{"ast":null,"code":"import * as ROSLIB from 'roslib';\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nvar createjs = {\n  exports: {}\n};\ncreatejs.exports;\n(function (module, exports) {\n  var createjs = commonjsGlobal.createjs = commonjsGlobal.createjs || {};\n  /*!\n  * CreateJS\n  * Visit http://createjs.com/ for documentation, updates and examples.\n  *\n  * Copyright (c) 2010 gskinner.com, inc.\n  *\n  * Permission is hereby granted, free of charge, to any person\n  * obtaining a copy of this software and associated documentation\n  * files (the \"Software\"), to deal in the Software without\n  * restriction, including without limitation the rights to use,\n  * copy, modify, merge, publish, distribute, sublicense, and/or sell\n  * copies of the Software, and to permit persons to whom the\n  * Software is furnished to do so, subject to the following\n  * conditions:\n  *\n  * The above copyright notice and this permission notice shall be\n  * included in all copies or substantial portions of the Software.\n  *\n  * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n  * OTHER DEALINGS IN THE SOFTWARE.\n  */\n\n  commonjsGlobal.createjs = commonjsGlobal.createjs || {};\n\n  //##############################################################################\n  // extend.js\n  //##############################################################################\n\n  /**\n   * @class Utility Methods\n   */\n\n  /**\n   * Sets up the prototype chain and constructor property for a new class.\n   *\n   * This should be called right after creating the class constructor.\n   *\n   * \tfunction MySubClass() {}\n   * \tcreatejs.extend(MySubClass, MySuperClass);\n   * \tMySubClass.prototype.doSomething = function() { }\n   *\n   * \tvar foo = new MySubClass();\n   * \tconsole.log(foo instanceof MySuperClass); // true\n   * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n   *\n   * @method extend\n   * @param {Function} subclass The subclass.\n   * @param {Function} superclass The superclass to extend.\n   * @return {Function} Returns the subclass's new prototype.\n   */\n  createjs.extend = function (subclass, superclass) {\n    function o() {\n      this.constructor = subclass;\n    }\n    o.prototype = superclass.prototype;\n    return subclass.prototype = new o();\n  };\n\n  //##############################################################################\n  // promote.js\n  //##############################################################################\n\n  /**\n   * @class Utility Methods\n   */\n\n  /**\n   * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n   * It is recommended to use the super class's name as the prefix.\n   * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n   * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n   *\n   * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n   * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n   * prototype of `MySubClass` as `MySuperClass_draw`.\n   *\n   * This should be called after the class's prototype is fully defined.\n   *\n   * \tfunction ClassA(name) {\n   * \t\tthis.name = name;\n   * \t}\n   * \tClassA.prototype.greet = function() {\n   * \t\treturn \"Hello \"+this.name;\n   * \t}\n   *\n   * \tfunction ClassB(name, punctuation) {\n   * \t\tthis.ClassA_constructor(name);\n   * \t\tthis.punctuation = punctuation;\n   * \t}\n   * \tcreatejs.extend(ClassB, ClassA);\n   * \tClassB.prototype.greet = function() {\n   * \t\treturn this.ClassA_greet()+this.punctuation;\n   * \t}\n   * \tcreatejs.promote(ClassB, \"ClassA\");\n   *\n   * \tvar foo = new ClassB(\"World\", \"!?!\");\n   * \tconsole.log(foo.greet()); // Hello World!?!\n   *\n   * @method promote\n   * @param {Function} subclass The class to promote super class methods on.\n   * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n   * @return {Function} Returns the subclass.\n   */\n  createjs.promote = function (subclass, prefix) {\n    var subP = subclass.prototype,\n      supP = Object.getPrototypeOf && Object.getPrototypeOf(subP) || subP.__proto__;\n    if (supP) {\n      subP[(prefix += \"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n      for (var n in supP) {\n        if (subP.hasOwnProperty(n) && typeof supP[n] == \"function\") {\n          subP[prefix + n] = supP[n];\n        }\n      }\n    }\n    return subclass;\n  };\n\n  //##############################################################################\n  // indexOf.js\n  //##############################################################################\n\n  /**\n   * @class Utility Methods\n   */\n\n  /**\n   * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n   * that value.  Returns -1 if value is not found.\n   *\n   *      var i = createjs.indexOf(myArray, myElementToFind);\n   *\n   * @method indexOf\n   * @param {Array} array Array to search for searchElement\n   * @param searchElement Element to find in array.\n   * @return {Number} The first index of searchElement in array.\n   */\n  createjs.indexOf = function (array, searchElement) {\n    for (var i = 0, l = array.length; i < l; i++) {\n      if (searchElement === array[i]) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  //##############################################################################\n  // Event.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Contains properties and methods shared by all events for use with\n     * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n     * \n     * Note that Event objects are often reused, so you should never\n     * rely on an event object's state outside of the call stack it was received in.\n     * @class Event\n     * @param {String} type The event type.\n     * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n     * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n     * @constructor\n     **/\n    function Event(type, bubbles, cancelable) {\n      // public properties:\n      /**\n       * The type of event.\n       * @property type\n       * @type String\n       **/\n      this.type = type;\n\n      /**\n       * The object that generated an event.\n       * @property target\n       * @type Object\n       * @default null\n       * @readonly\n      */\n      this.target = null;\n\n      /**\n       * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n       * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n       * is generated from childObj, then a listener on parentObj would receive the event with\n       * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n       * @property currentTarget\n       * @type Object\n       * @default null\n       * @readonly\n      */\n      this.currentTarget = null;\n\n      /**\n       * For bubbling events, this indicates the current event phase:<OL>\n       * \t<LI> capture phase: starting from the top parent to the target</LI>\n       * \t<LI> at target phase: currently being dispatched from the target</LI>\n       * \t<LI> bubbling phase: from the target to the top parent</LI>\n       * </OL>\n       * @property eventPhase\n       * @type Number\n       * @default 0\n       * @readonly\n      */\n      this.eventPhase = 0;\n\n      /**\n       * Indicates whether the event will bubble through the display list.\n       * @property bubbles\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.bubbles = !!bubbles;\n\n      /**\n       * Indicates whether the default behaviour of this event can be cancelled via\n       * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n       * @property cancelable\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.cancelable = !!cancelable;\n\n      /**\n       * The epoch time at which this event was created.\n       * @property timeStamp\n       * @type Number\n       * @default 0\n       * @readonly\n      */\n      this.timeStamp = new Date().getTime();\n\n      /**\n       * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n       * on this event.\n       * @property defaultPrevented\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.defaultPrevented = false;\n\n      /**\n       * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n       * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n       * @property propagationStopped\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.propagationStopped = false;\n\n      /**\n       * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n       * on this event.\n       * @property immediatePropagationStopped\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.immediatePropagationStopped = false;\n\n      /**\n       * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n       * @property removed\n       * @type Boolean\n       * @default false\n       * @readonly\n      */\n      this.removed = false;\n    }\n    var p = Event.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // public methods:\n    /**\n     * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n     * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n     * cancel the default behaviour associated with the event.\n     * @method preventDefault\n     **/\n    p.preventDefault = function () {\n      this.defaultPrevented = this.cancelable && true;\n    };\n\n    /**\n     * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n     * Mirrors the DOM event standard.\n     * @method stopPropagation\n     **/\n    p.stopPropagation = function () {\n      this.propagationStopped = true;\n    };\n\n    /**\n     * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n     * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n     * Mirrors the DOM event standard.\n     * @method stopImmediatePropagation\n     **/\n    p.stopImmediatePropagation = function () {\n      this.immediatePropagationStopped = this.propagationStopped = true;\n    };\n\n    /**\n     * Causes the active listener to be removed via removeEventListener();\n     * \n     * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n     * \t\t\t// do stuff...\n     * \t\t\tevt.remove(); // removes this listener.\n     * \t\t});\n     * \n     * @method remove\n     **/\n    p.remove = function () {\n      this.removed = true;\n    };\n\n    /**\n     * Returns a clone of the Event instance.\n     * @method clone\n     * @return {Event} a clone of the Event instance.\n     **/\n    p.clone = function () {\n      return new Event(this.type, this.bubbles, this.cancelable);\n    };\n\n    /**\n     * Provides a chainable shortcut method for setting a number of properties on the instance.\n     *\n     * @method set\n     * @param {Object} props A generic object containing properties to copy to the instance.\n     * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n     * @chainable\n    */\n    p.set = function (props) {\n      for (var n in props) {\n        this[n] = props[n];\n      }\n      return this;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Event (type=\" + this.type + \")]\";\n    };\n    createjs.Event = Event;\n  })();\n\n  //##############################################################################\n  // EventDispatcher.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n     *\n     * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n     * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n     * \n     * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n     * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n     * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n     * \n     * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n     * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n     * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n     * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n     * \n     * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n     * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n     * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n     *\n     * <h4>Example</h4>\n     * Add EventDispatcher capabilities to the \"MyClass\" class.\n     *\n     *      EventDispatcher.initialize(MyClass.prototype);\n     *\n     * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n     *\n     *      instance.addEventListener(\"eventName\", handlerMethod);\n     *      function handlerMethod(event) {\n     *          console.log(event.target + \" Was Clicked\");\n     *      }\n     *\n     * <b>Maintaining proper scope</b><br />\n     * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n     * method to subscribe to events simplifies this.\n     *\n     *      instance.addEventListener(\"click\", function(event) {\n     *          console.log(instance == this); // false, scope is ambiguous.\n     *      });\n     *      \n     *      instance.on(\"click\", function(event) {\n     *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n     *      });\n     * \n     * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n     * scope.\n     *\n     * <b>Browser support</b>\n     * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n     * requires modern browsers (IE9+).\n     *      \n     *\n     * @class EventDispatcher\n     * @constructor\n     **/\n    function EventDispatcher() {\n      // private properties:\n      /**\n       * @protected\n       * @property _listeners\n       * @type Object\n       **/\n      this._listeners = null;\n\n      /**\n       * @protected\n       * @property _captureListeners\n       * @type Object\n       **/\n      this._captureListeners = null;\n    }\n    var p = EventDispatcher.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // static public methods:\n    /**\n     * Static initializer to mix EventDispatcher methods into a target object or prototype.\n     * \n     * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n     * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n     * \n     * @method initialize\n     * @static\n     * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n     * prototype.\n     **/\n    EventDispatcher.initialize = function (target) {\n      target.addEventListener = p.addEventListener;\n      target.on = p.on;\n      target.removeEventListener = target.off = p.removeEventListener;\n      target.removeAllEventListeners = p.removeAllEventListeners;\n      target.hasEventListener = p.hasEventListener;\n      target.dispatchEvent = p.dispatchEvent;\n      target._dispatchEvent = p._dispatchEvent;\n      target.willTrigger = p.willTrigger;\n    };\n\n    // public methods:\n    /**\n     * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n     * multiple callbacks getting fired.\n     *\n     * <h4>Example</h4>\n     *\n     *      displayObject.addEventListener(\"click\", handleClick);\n     *      function handleClick(event) {\n     *         // Click happened.\n     *      }\n     *\n     * @method addEventListener\n     * @param {String} type The string type of the event.\n     * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n     * the event is dispatched.\n     * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n     * @return {Function | Object} Returns the listener for chaining or assignment.\n     **/\n    p.addEventListener = function (type, listener, useCapture) {\n      var listeners;\n      if (useCapture) {\n        listeners = this._captureListeners = this._captureListeners || {};\n      } else {\n        listeners = this._listeners = this._listeners || {};\n      }\n      var arr = listeners[type];\n      if (arr) {\n        this.removeEventListener(type, listener, useCapture);\n      }\n      arr = listeners[type]; // remove may have deleted the array\n      if (!arr) {\n        listeners[type] = [listener];\n      } else {\n        arr.push(listener);\n      }\n      return listener;\n    };\n\n    /**\n     * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n     * only run once, associate arbitrary data with the listener, and remove the listener.\n     * \n     * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n     * The wrapper function is returned for use with `removeEventListener` (or `off`).\n     * \n     * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n     * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n     * to `on` with the same params will create multiple listeners.\n     * \n     * <h4>Example</h4>\n     * \n     * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n     * \t\tfunction handleClick(evt, data) {\n     * \t\t\tdata.count -= 1;\n     * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n     * \t\t\tif (data.count == 0) {\n     * \t\t\t\talert(\"clicked 3 times!\");\n     * \t\t\t\tmyBtn.off(\"click\", listener);\n     * \t\t\t\t// alternately: evt.remove();\n     * \t\t\t}\n     * \t\t}\n     * \n     * @method on\n     * @param {String} type The string type of the event.\n     * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n     * the event is dispatched.\n     * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n     * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n     * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n     * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n     * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n     **/\n    p.on = function (type, listener, scope, once, data, useCapture) {\n      if (listener.handleEvent) {\n        scope = scope || listener;\n        listener = listener.handleEvent;\n      }\n      scope = scope || this;\n      return this.addEventListener(type, function (evt) {\n        listener.call(scope, evt, data);\n        once && evt.remove();\n      }, useCapture);\n    };\n\n    /**\n     * Removes the specified event listener.\n     *\n     * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n     * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n     * closure will not work.\n     *\n     * <h4>Example</h4>\n     *\n     *      displayObject.removeEventListener(\"click\", handleClick);\n     *\n     * @method removeEventListener\n     * @param {String} type The string type of the event.\n     * @param {Function | Object} listener The listener function or object.\n     * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n     **/\n    p.removeEventListener = function (type, listener, useCapture) {\n      var listeners = useCapture ? this._captureListeners : this._listeners;\n      if (!listeners) {\n        return;\n      }\n      var arr = listeners[type];\n      if (!arr) {\n        return;\n      }\n      for (var i = 0, l = arr.length; i < l; i++) {\n        if (arr[i] == listener) {\n          if (l == 1) {\n            delete listeners[type];\n          } // allows for faster checks.\n          else {\n            arr.splice(i, 1);\n          }\n          break;\n        }\n      }\n    };\n\n    /**\n     * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n     * .on method.\n     * \n     * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n     * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n     *\n     * @method off\n     * @param {String} type The string type of the event.\n     * @param {Function | Object} listener The listener function or object.\n     * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n     **/\n    p.off = p.removeEventListener;\n\n    /**\n     * Removes all listeners for the specified type, or all listeners of all types.\n     *\n     * <h4>Example</h4>\n     *\n     *      // Remove all listeners\n     *      displayObject.removeAllEventListeners();\n     *\n     *      // Remove all click listeners\n     *      displayObject.removeAllEventListeners(\"click\");\n     *\n     * @method removeAllEventListeners\n     * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n     **/\n    p.removeAllEventListeners = function (type) {\n      if (!type) {\n        this._listeners = this._captureListeners = null;\n      } else {\n        if (this._listeners) {\n          delete this._listeners[type];\n        }\n        if (this._captureListeners) {\n          delete this._captureListeners[type];\n        }\n      }\n    };\n\n    /**\n     * Dispatches the specified event to all listeners.\n     *\n     * <h4>Example</h4>\n     *\n     *      // Use a string event\n     *      this.dispatchEvent(\"complete\");\n     *\n     *      // Use an Event instance\n     *      var event = new createjs.Event(\"progress\");\n     *      this.dispatchEvent(event);\n     *\n     * @method dispatchEvent\n     * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n     * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n     * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n     * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n     * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n     * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n     * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n     **/\n    p.dispatchEvent = function (eventObj, bubbles, cancelable) {\n      if (typeof eventObj == \"string\") {\n        // skip everything if there's no listeners and it doesn't bubble:\n        var listeners = this._listeners;\n        if (!bubbles && (!listeners || !listeners[eventObj])) {\n          return true;\n        }\n        eventObj = new createjs.Event(eventObj, bubbles, cancelable);\n      } else if (eventObj.target && eventObj.clone) {\n        // redispatching an active event object, so clone it:\n        eventObj = eventObj.clone();\n      }\n\n      // TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n      try {\n        eventObj.target = this;\n      } catch (e) {} // try/catch allows redispatching of native events\n\n      if (!eventObj.bubbles || !this.parent) {\n        this._dispatchEvent(eventObj, 2);\n      } else {\n        var top = this,\n          list = [top];\n        while (top.parent) {\n          list.push(top = top.parent);\n        }\n        var i,\n          l = list.length;\n\n        // capture & atTarget\n        for (i = l - 1; i >= 0 && !eventObj.propagationStopped; i--) {\n          list[i]._dispatchEvent(eventObj, 1 + (i == 0));\n        }\n        // bubbling\n        for (i = 1; i < l && !eventObj.propagationStopped; i++) {\n          list[i]._dispatchEvent(eventObj, 3);\n        }\n      }\n      return !eventObj.defaultPrevented;\n    };\n\n    /**\n     * Indicates whether there is at least one listener for the specified event type.\n     * @method hasEventListener\n     * @param {String} type The string type of the event.\n     * @return {Boolean} Returns true if there is at least one listener for the specified event.\n     **/\n    p.hasEventListener = function (type) {\n      var listeners = this._listeners,\n        captureListeners = this._captureListeners;\n      return !!(listeners && listeners[type] || captureListeners && captureListeners[type]);\n    };\n\n    /**\n     * Indicates whether there is at least one listener for the specified event type on this object or any of its\n     * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n     * specified type is dispatched from this object, it will trigger at least one listener.\n     * \n     * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n     * event flow for a listener, not just this object.\n     * @method willTrigger\n     * @param {String} type The string type of the event.\n     * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n     **/\n    p.willTrigger = function (type) {\n      var o = this;\n      while (o) {\n        if (o.hasEventListener(type)) {\n          return true;\n        }\n        o = o.parent;\n      }\n      return false;\n    };\n\n    /**\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[EventDispatcher]\";\n    };\n\n    // private methods:\n    /**\n     * @method _dispatchEvent\n     * @param {Object | String | Event} eventObj\n     * @param {Object} eventPhase\n     * @protected\n     **/\n    p._dispatchEvent = function (eventObj, eventPhase) {\n      var l,\n        listeners = eventPhase == 1 ? this._captureListeners : this._listeners;\n      if (eventObj && listeners) {\n        var arr = listeners[eventObj.type];\n        if (!arr || !(l = arr.length)) {\n          return;\n        }\n        try {\n          eventObj.currentTarget = this;\n        } catch (e) {}\n        try {\n          eventObj.eventPhase = eventPhase;\n        } catch (e$1) {}\n        eventObj.removed = false;\n        arr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n        for (var i = 0; i < l && !eventObj.immediatePropagationStopped; i++) {\n          var o = arr[i];\n          if (o.handleEvent) {\n            o.handleEvent(eventObj);\n          } else {\n            o(eventObj);\n          }\n          if (eventObj.removed) {\n            this.off(eventObj.type, o, eventPhase == 1);\n            eventObj.removed = false;\n          }\n        }\n      }\n    };\n    createjs.EventDispatcher = EventDispatcher;\n  })();\n\n  //##############################################################################\n  // Ticker.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n     * event to be notified when a set time interval has elapsed.\n     *\n     * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n     * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n     * can not be instantiated.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n     *      function handleTick(event) {\n     *          // Actions carried out each tick (aka frame)\n     *          if (!event.paused) {\n     *              // Actions carried out when the Ticker is not paused.\n     *          }\n     *      }\n     *\n     * @class Ticker\n     * @uses EventDispatcher\n     * @static\n     **/\n    function Ticker() {\n      throw \"Ticker cannot be instantiated.\";\n    }\n\n    // constants:\n    /**\n     * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n     * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n     * dispatches the tick when the time is within a certain threshold.\n     *\n     * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n     * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n     * gaining the benefits of that API (screen synch, background throttling).\n     *\n     * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n     * framerates of 10, 12, 15, 20, and 30 work well.\n     *\n     * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n     * supported.\n     * @property RAF_SYNCHED\n     * @static\n     * @type {String}\n     * @default \"synched\"\n     * @readonly\n     **/\n    Ticker.RAF_SYNCHED = \"synched\";\n\n    /**\n     * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n     * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n     * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n     * event object's \"delta\" properties to make this easier.\n     *\n     * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n     * supported.\n     * @property RAF\n     * @static\n     * @type {String}\n     * @default \"raf\"\n     * @readonly\n     **/\n    Ticker.RAF = \"raf\";\n\n    /**\n     * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n     * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n     * @property TIMEOUT\n     * @static\n     * @type {String}\n     * @default \"timeout\"\n     * @readonly\n     **/\n    Ticker.TIMEOUT = \"timeout\";\n\n    // static events:\n    /**\n     * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n     * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n     *      function handleTick(event) {\n     *          console.log(\"Paused:\", event.paused, event.delta);\n     *      }\n     *\n     * @event tick\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {Boolean} paused Indicates whether the ticker is currently paused.\n     * @param {Number} delta The time elapsed in ms since the last tick.\n     * @param {Number} time The total time in ms since Ticker was initialized.\n     * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n     * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n     * @since 0.6.0\n     */\n\n    // public static properties:\n    /**\n     * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\n     * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\n     * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\n     * @property useRAF\n     * @static\n     * @type {Boolean}\n     * @default false\n     **/\n    Ticker.useRAF = false;\n\n    /**\n     * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n     * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\n     * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\n     * @property timingMode\n     * @static\n     * @type {String}\n     * @default Ticker.TIMEOUT\n     **/\n    Ticker.timingMode = null;\n\n    /**\n     * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n     * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n     * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n     * (ex. maxDelta=50 when running at 40fps).\n     * \n     * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n     * when using both delta and other values.\n     * \n     * If 0, there is no maximum.\n     * @property maxDelta\n     * @static\n     * @type {number}\n     * @default 0\n     */\n    Ticker.maxDelta = 0;\n\n    /**\n     * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n     * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n     * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n     * info.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n     *      createjs.Ticker.paused = true;\n     *      function handleTick(event) {\n     *          console.log(event.paused,\n     *          \tcreatejs.Ticker.getTime(false),\n     *          \tcreatejs.Ticker.getTime(true));\n     *      }\n     *\n     * @property paused\n     * @static\n     * @type {Boolean}\n     * @default false\n     **/\n    Ticker.paused = false;\n\n    // mix-ins:\n    // EventDispatcher methods:\n    Ticker.removeEventListener = null;\n    Ticker.removeAllEventListeners = null;\n    Ticker.dispatchEvent = null;\n    Ticker.hasEventListener = null;\n    Ticker._listeners = null;\n    createjs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n    Ticker._addEventListener = Ticker.addEventListener;\n    Ticker.addEventListener = function () {\n      !Ticker._inited && Ticker.init();\n      return Ticker._addEventListener.apply(Ticker, arguments);\n    };\n\n    // private static properties:\n    /**\n     * @property _inited\n     * @static\n     * @type {Boolean}\n     * @protected\n     **/\n    Ticker._inited = false;\n\n    /**\n     * @property _startTime\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._startTime = 0;\n\n    /**\n     * @property _pausedTime\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._pausedTime = 0;\n\n    /**\n     * The number of ticks that have passed\n     * @property _ticks\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._ticks = 0;\n\n    /**\n     * The number of ticks that have passed while Ticker has been paused\n     * @property _pausedTicks\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._pausedTicks = 0;\n\n    /**\n     * @property _interval\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._interval = 50;\n\n    /**\n     * @property _lastTime\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._lastTime = 0;\n\n    /**\n     * @property _times\n     * @static\n     * @type {Array}\n     * @protected\n     **/\n    Ticker._times = null;\n\n    /**\n     * @property _tickTimes\n     * @static\n     * @type {Array}\n     * @protected\n     **/\n    Ticker._tickTimes = null;\n\n    /**\n     * Stores the timeout or requestAnimationFrame id.\n     * @property _timerId\n     * @static\n     * @type {Number}\n     * @protected\n     **/\n    Ticker._timerId = null;\n\n    /**\n     * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n     * if that property changed and a tick hasn't fired.\n     * @property _raf\n     * @static\n     * @type {Boolean}\n     * @protected\n     **/\n    Ticker._raf = true;\n\n    // static getter / setters:\n    /**\n     * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n     * @method setInterval\n     * @static\n     * @param {Number} interval\n     * @deprecated\n     **/\n    Ticker.setInterval = function (interval) {\n      Ticker._interval = interval;\n      if (!Ticker._inited) {\n        return;\n      }\n      Ticker._setupTick();\n    };\n\n    /**\n     * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n     * @method getInterval\n     * @static\n     * @return {Number}\n     * @deprecated\n     **/\n    Ticker.getInterval = function () {\n      return Ticker._interval;\n    };\n\n    /**\n     * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n     * @method setFPS\n     * @static\n     * @param {Number} value\n     * @deprecated\n     **/\n    Ticker.setFPS = function (value) {\n      Ticker.setInterval(1000 / value);\n    };\n\n    /**\n     * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n     * @method getFPS\n     * @static\n     * @return {Number}\n     * @deprecated\n     **/\n    Ticker.getFPS = function () {\n      return 1000 / Ticker._interval;\n    };\n\n    /**\n     * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n     * Note that actual time between ticks may be more than specified depending on CPU load.\n     * This property is ignored if the ticker is using the `RAF` timing mode.\n     * @property interval\n     * @static\n     * @type {Number}\n     **/\n\n    /**\n     * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n     * `framerate == 1000/interval`.\n     * @property framerate\n     * @static\n     * @type {Number}\n     **/\n    try {\n      Object.defineProperties(Ticker, {\n        interval: {\n          get: Ticker.getInterval,\n          set: Ticker.setInterval\n        },\n        framerate: {\n          get: Ticker.getFPS,\n          set: Ticker.setFPS\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n\n    // public static methods:\n    /**\n     * Starts the tick. This is called automatically when the first listener is added.\n     * @method init\n     * @static\n     **/\n    Ticker.init = function () {\n      if (Ticker._inited) {\n        return;\n      }\n      Ticker._inited = true;\n      Ticker._times = [];\n      Ticker._tickTimes = [];\n      Ticker._startTime = Ticker._getTime();\n      Ticker._times.push(Ticker._lastTime = 0);\n      Ticker.interval = Ticker._interval;\n    };\n\n    /**\n     * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n     * @method reset\n     * @static\n     **/\n    Ticker.reset = function () {\n      if (Ticker._raf) {\n        var f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n        f && f(Ticker._timerId);\n      } else {\n        clearTimeout(Ticker._timerId);\n      }\n      Ticker.removeAllEventListeners(\"tick\");\n      Ticker._timerId = Ticker._times = Ticker._tickTimes = null;\n      Ticker._startTime = Ticker._lastTime = Ticker._ticks = 0;\n      Ticker._inited = false;\n    };\n\n    /**\n     * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n     * because it only measures the time spent within the tick execution stack. \n     * \n     * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n     * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n     * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n     *\n     * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\n     * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\n     * other than the tick is using ~80ms (another script, DOM rendering, etc).\n     * @method getMeasuredTickTime\n     * @static\n     * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n     * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n     * @return {Number} The average time spent in a tick in milliseconds.\n     **/\n    Ticker.getMeasuredTickTime = function (ticks) {\n      var ttl = 0,\n        times = Ticker._tickTimes;\n      if (!times || times.length < 1) {\n        return -1;\n      }\n\n      // by default, calculate average for the past ~1 second:\n      ticks = Math.min(times.length, ticks || Ticker.getFPS() | 0);\n      for (var i = 0; i < ticks; i++) {\n        ttl += times[i];\n      }\n      return ttl / ticks;\n    };\n\n    /**\n     * Returns the actual frames / ticks per second.\n     * @method getMeasuredFPS\n     * @static\n     * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n     * Defaults to the number of ticks per second.\n     * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n     * from the target frames per second.\n     **/\n    Ticker.getMeasuredFPS = function (ticks) {\n      var times = Ticker._times;\n      if (!times || times.length < 2) {\n        return -1;\n      }\n\n      // by default, calculate fps for the past ~1 second:\n      ticks = Math.min(times.length - 1, ticks || Ticker.getFPS() | 0);\n      return 1000 / ((times[0] - times[ticks]) / ticks);\n    };\n\n    /**\n     * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n     * @method setPaused\n     * @static\n     * @param {Boolean} value\n     * @deprecated\n     **/\n    Ticker.setPaused = function (value) {\n      // TODO: deprecated.\n      Ticker.paused = value;\n    };\n\n    /**\n     * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n     * @method getPaused\n     * @static\n     * @return {Boolean}\n     * @deprecated\n     **/\n    Ticker.getPaused = function () {\n      // TODO: deprecated.\n      return Ticker.paused;\n    };\n\n    /**\n     * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n     * Returns -1 if Ticker has not been initialized. For example, you could use\n     * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n     * @method getTime\n     * @static\n     * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n     * If false, the value returned will be total time elapsed since the first tick event listener was added.\n     * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n     **/\n    Ticker.getTime = function (runTime) {\n      return Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n    };\n\n    /**\n     * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n     * event object.\n     * @method getEventTime\n     * @static\n     * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n     * @returns {number} The time or runTime property from the most recent tick event or -1.\n     */\n    Ticker.getEventTime = function (runTime) {\n      return Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n    };\n\n    /**\n     * Returns the number of ticks that have been broadcast by Ticker.\n     * @method getTicks\n     * @static\n     * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n     * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n     * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n     * value. The default value is false.\n     * @return {Number} of ticks that have been broadcast.\n     **/\n    Ticker.getTicks = function (pauseable) {\n      return Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n    };\n\n    // private static methods:\n    /**\n     * @method _handleSynch\n     * @static\n     * @protected\n     **/\n    Ticker._handleSynch = function () {\n      Ticker._timerId = null;\n      Ticker._setupTick();\n\n      // run if enough time has elapsed, with a little bit of flexibility to be early:\n      if (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval - 1) * 0.97) {\n        Ticker._tick();\n      }\n    };\n\n    /**\n     * @method _handleRAF\n     * @static\n     * @protected\n     **/\n    Ticker._handleRAF = function () {\n      Ticker._timerId = null;\n      Ticker._setupTick();\n      Ticker._tick();\n    };\n\n    /**\n     * @method _handleTimeout\n     * @static\n     * @protected\n     **/\n    Ticker._handleTimeout = function () {\n      Ticker._timerId = null;\n      Ticker._setupTick();\n      Ticker._tick();\n    };\n\n    /**\n     * @method _setupTick\n     * @static\n     * @protected\n     **/\n    Ticker._setupTick = function () {\n      if (Ticker._timerId != null) {\n        return;\n      } // avoid duplicates\n\n      var mode = Ticker.timingMode || Ticker.useRAF && Ticker.RAF_SYNCHED;\n      if (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n        var f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n        if (f) {\n          Ticker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n          Ticker._raf = true;\n          return;\n        }\n      }\n      Ticker._raf = false;\n      Ticker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n    };\n\n    /**\n     * @method _tick\n     * @static\n     * @protected\n     **/\n    Ticker._tick = function () {\n      var paused = Ticker.paused;\n      var time = Ticker._getTime();\n      var elapsedTime = time - Ticker._lastTime;\n      Ticker._lastTime = time;\n      Ticker._ticks++;\n      if (paused) {\n        Ticker._pausedTicks++;\n        Ticker._pausedTime += elapsedTime;\n      }\n      if (Ticker.hasEventListener(\"tick\")) {\n        var event = new createjs.Event(\"tick\");\n        var maxDelta = Ticker.maxDelta;\n        event.delta = maxDelta && elapsedTime > maxDelta ? maxDelta : elapsedTime;\n        event.paused = paused;\n        event.time = time;\n        event.runTime = time - Ticker._pausedTime;\n        Ticker.dispatchEvent(event);\n      }\n      Ticker._tickTimes.unshift(Ticker._getTime() - time);\n      while (Ticker._tickTimes.length > 100) {\n        Ticker._tickTimes.pop();\n      }\n      Ticker._times.unshift(time);\n      while (Ticker._times.length > 100) {\n        Ticker._times.pop();\n      }\n    };\n\n    /**\n     * @method _getTime\n     * @static\n     * @protected\n     **/\n    var now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\n    Ticker._getTime = function () {\n      return (now && now.call(performance) || new Date().getTime()) - Ticker._startTime;\n    };\n    createjs.Ticker = Ticker;\n  })();\n\n  //##############################################################################\n  // UID.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n     * and should not be instantiated.\n     * @class UID\n     * @static\n     **/\n    function UID() {\n      throw \"UID cannot be instantiated\";\n    }\n\n    // private static properties:\n    /**\n     * @property _nextID\n     * @type Number\n     * @protected\n     **/\n    UID._nextID = 0;\n\n    // public static methods:\n    /**\n     * Returns the next unique id.\n     * @method get\n     * @return {Number} The next unique id\n     * @static\n     **/\n    UID.get = function () {\n      return UID._nextID++;\n    };\n    createjs.UID = UID;\n  })();\n\n  //##############################################################################\n  // MouseEvent.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n     * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n     * @class MouseEvent\n     * @param {String} type The event type.\n     * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n     * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n     * @param {Number} stageX The normalized x position relative to the stage.\n     * @param {Number} stageY The normalized y position relative to the stage.\n     * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n     * @param {Number} pointerID The unique id for the pointer.\n     * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n     * @param {Number} rawX The raw x position relative to the stage.\n     * @param {Number} rawY The raw y position relative to the stage.\n     * @param {DisplayObject} relatedTarget The secondary target for the event.\n     * @extends Event\n     * @constructor\n     **/\n    function MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n      this.Event_constructor(type, bubbles, cancelable);\n\n      // public properties:\n      /**\n       * The normalized x position on the stage. This will always be within the range 0 to stage width.\n       * @property stageX\n       * @type Number\n      */\n      this.stageX = stageX;\n\n      /**\n       * The normalized y position on the stage. This will always be within the range 0 to stage height.\n       * @property stageY\n       * @type Number\n       **/\n      this.stageY = stageY;\n\n      /**\n       * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n       * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n       * @property rawX\n       * @type Number\n      */\n      this.rawX = rawX == null ? stageX : rawX;\n\n      /**\n       * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n       * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n       * @property rawY\n       * @type Number\n      */\n      this.rawY = rawY == null ? stageY : rawY;\n\n      /**\n       * The native MouseEvent generated by the browser. The properties and API for this\n       * event may differ between browsers. This property will be null if the\n       * EaselJS property was not directly generated from a native MouseEvent.\n       * @property nativeEvent\n       * @type HtmlMouseEvent\n       * @default null\n       **/\n      this.nativeEvent = nativeEvent;\n\n      /**\n       * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n       * supplied id value.\n       * @property pointerID\n       * @type {Number}\n       */\n      this.pointerID = pointerID;\n\n      /**\n       * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n       * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n       * @property primary\n       * @type {Boolean}\n       */\n      this.primary = !!primary;\n\n      /**\n       * The secondary target for the event, if applicable. This is used for mouseout/rollout\n       * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n       * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n       * \n       * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n       * @property relatedTarget\n       * @type {DisplayObject}\n       */\n      this.relatedTarget = relatedTarget;\n    }\n    var p = createjs.extend(MouseEvent, createjs.Event);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // getter / setters:\n    /**\n     * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n     * @property localX\n     * @type {Number}\n     * @readonly\n     */\n    p._get_localX = function () {\n      return this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n    };\n\n    /**\n     * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n     * @property localY\n     * @type {Number}\n     * @readonly\n     */\n    p._get_localY = function () {\n      return this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n    };\n\n    /**\n     * Indicates whether the event was generated by a touch input (versus a mouse input).\n     * @property isTouch\n     * @type {Boolean}\n     * @readonly\n     */\n    p._get_isTouch = function () {\n      return this.pointerID !== -1;\n    };\n    try {\n      Object.defineProperties(p, {\n        localX: {\n          get: p._get_localX\n        },\n        localY: {\n          get: p._get_localY\n        },\n        isTouch: {\n          get: p._get_isTouch\n        }\n      });\n    } catch (e) {} // TODO: use Log\n\n    // public methods:\n    /**\n     * Returns a clone of the MouseEvent instance.\n     * @method clone\n     * @return {MouseEvent} a clone of the MouseEvent instance.\n     **/\n    p.clone = function () {\n      return new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[MouseEvent (type=\" + this.type + \" stageX=\" + this.stageX + \" stageY=\" + this.stageY + \")]\";\n    };\n    createjs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n  })();\n\n  //##############################################################################\n  // Matrix2D.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n     *\n     * This matrix can be visualized as:\n     *\n     * \t[ a  c  tx\n     * \t  b  d  ty\n     * \t  0  0  1  ]\n     *\n     * Note the locations of b and c.\n     *\n     * @class Matrix2D\n     * @param {Number} [a=1] Specifies the a property for the new matrix.\n     * @param {Number} [b=0] Specifies the b property for the new matrix.\n     * @param {Number} [c=0] Specifies the c property for the new matrix.\n     * @param {Number} [d=1] Specifies the d property for the new matrix.\n     * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n     * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n     * @constructor\n     **/\n    function Matrix2D(a, b, c, d, tx, ty) {\n      this.setValues(a, b, c, d, tx, ty);\n\n      // public properties:\n      // assigned in the setValues method.\n      /**\n       * Position (0, 0) in a 3x3 affine transformation matrix.\n       * @property a\n       * @type Number\n       **/\n\n      /**\n       * Position (0, 1) in a 3x3 affine transformation matrix.\n       * @property b\n       * @type Number\n       **/\n\n      /**\n       * Position (1, 0) in a 3x3 affine transformation matrix.\n       * @property c\n       * @type Number\n       **/\n\n      /**\n       * Position (1, 1) in a 3x3 affine transformation matrix.\n       * @property d\n       * @type Number\n       **/\n\n      /**\n       * Position (2, 0) in a 3x3 affine transformation matrix.\n       * @property tx\n       * @type Number\n       **/\n\n      /**\n       * Position (2, 1) in a 3x3 affine transformation matrix.\n       * @property ty\n       * @type Number\n       **/\n    }\n    var p = Matrix2D.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // constants:\n    /**\n     * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n     * @property DEG_TO_RAD\n     * @static\n     * @final\n     * @type Number\n     * @readonly\n     **/\n    Matrix2D.DEG_TO_RAD = Math.PI / 180;\n\n    // static public properties:\n    /**\n     * An identity matrix, representing a null transformation.\n     * @property identity\n     * @static\n     * @type Matrix2D\n     * @readonly\n     **/\n    Matrix2D.identity = null; // set at bottom of class definition.\n\n    // public methods:\n    /**\n     * Sets the specified values on this instance. \n     * @method setValues\n     * @param {Number} [a=1] Specifies the a property for the new matrix.\n     * @param {Number} [b=0] Specifies the b property for the new matrix.\n     * @param {Number} [c=0] Specifies the c property for the new matrix.\n     * @param {Number} [d=1] Specifies the d property for the new matrix.\n     * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n     * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n     * @return {Matrix2D} This instance. Useful for chaining method calls.\n    */\n    p.setValues = function (a, b, c, d, tx, ty) {\n      // don't forget to update docs in the constructor if these change:\n      this.a = a == null ? 1 : a;\n      this.b = b || 0;\n      this.c = c || 0;\n      this.d = d == null ? 1 : d;\n      this.tx = tx || 0;\n      this.ty = ty || 0;\n      return this;\n    };\n\n    /**\n     * Appends the specified matrix properties to this matrix. All parameters are required.\n     * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n     * @method append\n     * @param {Number} a\n     * @param {Number} b\n     * @param {Number} c\n     * @param {Number} d\n     * @param {Number} tx\n     * @param {Number} ty\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.append = function (a, b, c, d, tx, ty) {\n      var a1 = this.a;\n      var b1 = this.b;\n      var c1 = this.c;\n      var d1 = this.d;\n      if (a != 1 || b != 0 || c != 0 || d != 1) {\n        this.a = a1 * a + c1 * b;\n        this.b = b1 * a + d1 * b;\n        this.c = a1 * c + c1 * d;\n        this.d = b1 * c + d1 * d;\n      }\n      this.tx = a1 * tx + c1 * ty + this.tx;\n      this.ty = b1 * tx + d1 * ty + this.ty;\n      return this;\n    };\n\n    /**\n     * Prepends the specified matrix properties to this matrix.\n     * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n     * All parameters are required.\n     * @method prepend\n     * @param {Number} a\n     * @param {Number} b\n     * @param {Number} c\n     * @param {Number} d\n     * @param {Number} tx\n     * @param {Number} ty\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.prepend = function (a, b, c, d, tx, ty) {\n      var a1 = this.a;\n      var c1 = this.c;\n      var tx1 = this.tx;\n      this.a = a * a1 + c * this.b;\n      this.b = b * a1 + d * this.b;\n      this.c = a * c1 + c * this.d;\n      this.d = b * c1 + d * this.d;\n      this.tx = a * tx1 + c * this.ty + tx;\n      this.ty = b * tx1 + d * this.ty + ty;\n      return this;\n    };\n\n    /**\n     * Appends the specified matrix to this matrix.\n     * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n     * @method appendMatrix\n     * @param {Matrix2D} matrix\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.appendMatrix = function (matrix) {\n      return this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n    };\n\n    /**\n     * Prepends the specified matrix to this matrix.\n     * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n     * For example, you could calculate the combined transformation for a child object using:\n     * \n     * \tvar o = myDisplayObject;\n     * \tvar mtx = o.getMatrix();\n     * \twhile (o = o.parent) {\n     * \t\t// prepend each parent's transformation in turn:\n     * \t\to.prependMatrix(o.getMatrix());\n     * \t}\n     * @method prependMatrix\n     * @param {Matrix2D} matrix\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.prependMatrix = function (matrix) {\n      return this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n    };\n\n    /**\n     * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n     * For example, you can use this to generate a matrix representing the transformations of a display object:\n     * \n     * \tvar mtx = new createjs.Matrix2D();\n     * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n     * @method appendTransform\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     * @param {Number} rotation\n     * @param {Number} skewX\n     * @param {Number} skewY\n     * @param {Number} regX Optional.\n     * @param {Number} regY Optional.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.appendTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n      if (rotation % 360) {\n        var r = rotation * Matrix2D.DEG_TO_RAD;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n      } else {\n        cos = 1;\n        sin = 0;\n      }\n      if (skewX || skewY) {\n        // TODO: can this be combined into a single append operation?\n        skewX *= Matrix2D.DEG_TO_RAD;\n        skewY *= Matrix2D.DEG_TO_RAD;\n        this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n        this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0);\n      } else {\n        this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y);\n      }\n      if (regX || regY) {\n        // append the registration offset:\n        this.tx -= regX * this.a + regY * this.c;\n        this.ty -= regX * this.b + regY * this.d;\n      }\n      return this;\n    };\n\n    /**\n     * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n     * For example, you could calculate the combined transformation for a child object using:\n     * \n     * \tvar o = myDisplayObject;\n     * \tvar mtx = new createjs.Matrix2D();\n     * \tdo  {\n     * \t\t// prepend each parent's transformation in turn:\n     * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n     * \t} while (o = o.parent);\n     * \t\n     * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n     * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n     * @method prependTransform\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     * @param {Number} rotation\n     * @param {Number} skewX\n     * @param {Number} skewY\n     * @param {Number} regX Optional.\n     * @param {Number} regY Optional.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.prependTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n      if (rotation % 360) {\n        var r = rotation * Matrix2D.DEG_TO_RAD;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n      } else {\n        cos = 1;\n        sin = 0;\n      }\n      if (regX || regY) {\n        // prepend the registration offset:\n        this.tx -= regX;\n        this.ty -= regY;\n      }\n      if (skewX || skewY) {\n        // TODO: can this be combined into a single prepend operation?\n        skewX *= Matrix2D.DEG_TO_RAD;\n        skewY *= Matrix2D.DEG_TO_RAD;\n        this.prepend(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0);\n        this.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n      } else {\n        this.prepend(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y);\n      }\n      return this;\n    };\n\n    /**\n     * Applies a clockwise rotation transformation to the matrix.\n     * @method rotate\n     * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.rotate = function (angle) {\n      angle = angle * Matrix2D.DEG_TO_RAD;\n      var cos = Math.cos(angle);\n      var sin = Math.sin(angle);\n      var a1 = this.a;\n      var b1 = this.b;\n      this.a = a1 * cos + this.c * sin;\n      this.b = b1 * cos + this.d * sin;\n      this.c = -a1 * sin + this.c * cos;\n      this.d = -b1 * sin + this.d * cos;\n      return this;\n    };\n\n    /**\n     * Applies a skew transformation to the matrix.\n     * @method skew\n     * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n     * @param {Number} skewY The amount to skew vertically in degrees.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n    */\n    p.skew = function (skewX, skewY) {\n      skewX = skewX * Matrix2D.DEG_TO_RAD;\n      skewY = skewY * Matrix2D.DEG_TO_RAD;\n      this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n      return this;\n    };\n\n    /**\n     * Applies a scale transformation to the matrix.\n     * @method scale\n     * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n     * @param {Number} y The amount to scale vertically.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.scale = function (x, y) {\n      this.a *= x;\n      this.b *= x;\n      this.c *= y;\n      this.d *= y;\n      //this.tx *= x;\n      //this.ty *= y;\n      return this;\n    };\n\n    /**\n     * Translates the matrix on the x and y axes.\n     * @method translate\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.translate = function (x, y) {\n      this.tx += this.a * x + this.c * y;\n      this.ty += this.b * x + this.d * y;\n      return this;\n    };\n\n    /**\n     * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n     * @method identity\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.identity = function () {\n      this.a = this.d = 1;\n      this.b = this.c = this.tx = this.ty = 0;\n      return this;\n    };\n\n    /**\n     * Inverts the matrix, causing it to perform the opposite transformation.\n     * @method invert\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n     **/\n    p.invert = function () {\n      var a1 = this.a;\n      var b1 = this.b;\n      var c1 = this.c;\n      var d1 = this.d;\n      var tx1 = this.tx;\n      var n = a1 * d1 - b1 * c1;\n      this.a = d1 / n;\n      this.b = -b1 / n;\n      this.c = -c1 / n;\n      this.d = a1 / n;\n      this.tx = (c1 * this.ty - d1 * tx1) / n;\n      this.ty = -(a1 * this.ty - b1 * tx1) / n;\n      return this;\n    };\n\n    /**\n     * Returns true if the matrix is an identity matrix.\n     * @method isIdentity\n     * @return {Boolean}\n     **/\n    p.isIdentity = function () {\n      return this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n    };\n\n    /**\n     * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n     * @method equals\n     * @param {Matrix2D} matrix The matrix to compare.\n     * @return {Boolean}\n     **/\n    p.equals = function (matrix) {\n      return this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n    };\n\n    /**\n     * Transforms a point according to this matrix.\n     * @method transformPoint\n     * @param {Number} x The x component of the point to transform.\n     * @param {Number} y The y component of the point to transform.\n     * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n     * @return {Point} This matrix. Useful for chaining method calls.\n     **/\n    p.transformPoint = function (x, y, pt) {\n      pt = pt || {};\n      pt.x = x * this.a + y * this.c + this.tx;\n      pt.y = x * this.b + y * this.d + this.ty;\n      return pt;\n    };\n\n    /**\n     * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n     * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n     * results.\n     * @method decompose\n     * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n     * @return {Object} The target, or a new generic object with the transform properties applied.\n    */\n    p.decompose = function (target) {\n      // TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n      if (target == null) {\n        target = {};\n      }\n      target.x = this.tx;\n      target.y = this.ty;\n      target.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n      target.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n      var skewX = Math.atan2(-this.c, this.d);\n      var skewY = Math.atan2(this.b, this.a);\n      var delta = Math.abs(1 - skewX / skewY);\n      if (delta < 0.00001) {\n        // effectively identical, can use rotation:\n        target.rotation = skewY / Matrix2D.DEG_TO_RAD;\n        if (this.a < 0 && this.d >= 0) {\n          target.rotation += target.rotation <= 0 ? 180 : -180;\n        }\n        target.skewX = target.skewY = 0;\n      } else {\n        target.skewX = skewX / Matrix2D.DEG_TO_RAD;\n        target.skewY = skewY / Matrix2D.DEG_TO_RAD;\n      }\n      return target;\n    };\n\n    /**\n     * Copies all properties from the specified matrix to this matrix.\n     * @method copy\n     * @param {Matrix2D} matrix The matrix to copy properties from.\n     * @return {Matrix2D} This matrix. Useful for chaining method calls.\n    */\n    p.copy = function (matrix) {\n      return this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n    };\n\n    /**\n     * Returns a clone of the Matrix2D instance.\n     * @method clone\n     * @return {Matrix2D} a clone of the Matrix2D instance.\n     **/\n    p.clone = function () {\n      return new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Matrix2D (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\";\n    };\n\n    // this has to be populated after the class is defined:\n    Matrix2D.identity = new Matrix2D();\n    createjs.Matrix2D = Matrix2D;\n  })();\n\n  //##############################################################################\n  // DisplayProps.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Used for calculating and encapsulating display related properties.\n     * @class DisplayProps\n     * @param {Number} [visible=true] Visible value.\n     * @param {Number} [alpha=1] Alpha value.\n     * @param {Number} [shadow=null] A Shadow instance or null.\n     * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n     * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n     * @constructor\n     **/\n    function DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n      this.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\n      // public properties:\n      // assigned in the setValues method.\n      /**\n       * Property representing the alpha that will be applied to a display object.\n       * @property alpha\n       * @type Number\n       **/\n\n      /**\n       * Property representing the shadow that will be applied to a display object.\n       * @property shadow\n       * @type Shadow\n       **/\n\n      /**\n       * Property representing the compositeOperation that will be applied to a display object.\n       * You can find a list of valid composite operations at:\n       * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\n       * @property compositeOperation\n       * @type String\n       **/\n\n      /**\n       * Property representing the value for visible that will be applied to a display object.\n       * @property visible\n       * @type Boolean\n       **/\n\n      /**\n       * The transformation matrix that will be applied to a display object.\n       * @property matrix\n       * @type Matrix2D\n       **/\n    }\n    var p = DisplayProps.prototype;\n\n    // initialization:\n    /**\n     * Reinitializes the instance with the specified values.\n     * @method setValues\n     * @param {Number} [visible=true] Visible value.\n     * @param {Number} [alpha=1] Alpha value.\n     * @param {Number} [shadow=null] A Shadow instance or null.\n     * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n     * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n     * @return {DisplayProps} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n      this.visible = visible == null ? true : !!visible;\n      this.alpha = alpha == null ? 1 : alpha;\n      this.shadow = shadow;\n      this.compositeOperation = compositeOperation;\n      this.matrix = matrix || this.matrix && this.matrix.identity() || new createjs.Matrix2D();\n      return this;\n    };\n\n    // public methods:\n    /**\n     * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n     * @method append\n     * @param {Boolean} visible desired visible value\n     * @param {Number} alpha desired alpha value\n     * @param {Shadow} shadow desired shadow value\n     * @param {String} compositeOperation desired composite operation value\n     * @param {Matrix2D} [matrix] a Matrix2D instance\n     * @return {DisplayProps} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.append = function (visible, alpha, shadow, compositeOperation, matrix) {\n      this.alpha *= alpha;\n      this.shadow = shadow || this.shadow;\n      this.compositeOperation = compositeOperation || this.compositeOperation;\n      this.visible = this.visible && visible;\n      matrix && this.matrix.appendMatrix(matrix);\n      return this;\n    };\n\n    /**\n     * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n     * For example, to get the combined display properties that would be applied to a child, you could use:\n     * \n     * \tvar o = myDisplayObject;\n     * \tvar props = new createjs.DisplayProps();\n     * \tdo {\n     * \t\t// prepend each parent's props in turn:\n     * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n     * \t} while (o = o.parent);\n     * \t\n     * @method prepend\n     * @param {Boolean} visible desired visible value\n     * @param {Number} alpha desired alpha value\n     * @param {Shadow} shadow desired shadow value\n     * @param {String} compositeOperation desired composite operation value\n     * @param {Matrix2D} [matrix] a Matrix2D instance\n     * @return {DisplayProps} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.prepend = function (visible, alpha, shadow, compositeOperation, matrix) {\n      this.alpha *= alpha;\n      this.shadow = this.shadow || shadow;\n      this.compositeOperation = this.compositeOperation || compositeOperation;\n      this.visible = this.visible && visible;\n      matrix && this.matrix.prependMatrix(matrix);\n      return this;\n    };\n\n    /**\n     * Resets this instance and its matrix to default values.\n     * @method identity\n     * @return {DisplayProps} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.identity = function () {\n      this.visible = true;\n      this.alpha = 1;\n      this.shadow = this.compositeOperation = null;\n      this.matrix.identity();\n      return this;\n    };\n\n    /**\n     * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n     * @method clone\n     * @return {DisplayProps} a clone of the DisplayProps instance.\n     **/\n    p.clone = function () {\n      return new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n    };\n\n    // private methods:\n\n    createjs.DisplayProps = DisplayProps;\n  })();\n\n  //##############################################################################\n  // Point.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Represents a point on a 2 dimensional x / y coordinate system.\n     *\n     * <h4>Example</h4>\n     * \n     *      var point = new createjs.Point(0, 100);\n     * \n     * @class Point\n     * @param {Number} [x=0] X position.\n     * @param {Number} [y=0] Y position.\n     * @constructor\n     **/\n    function Point(x, y) {\n      this.setValues(x, y);\n\n      // public properties:\n      // assigned in the setValues method.\n      /**\n       * X position.\n       * @property x\n       * @type Number\n       **/\n\n      /**\n       * Y position.\n       * @property y\n       * @type Number\n       **/\n    }\n    var p = Point.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // public methods:\n    /** \n     * Sets the specified values on this instance.\n     * @method setValues\n     * @param {Number} [x=0] X position.\n     * @param {Number} [y=0] Y position.\n     * @return {Point} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.setValues = function (x, y) {\n      this.x = x || 0;\n      this.y = y || 0;\n      return this;\n    };\n\n    /**\n     * Copies all properties from the specified point to this point.\n     * @method copy\n     * @param {Point} point The point to copy properties from.\n     * @return {Point} This point. Useful for chaining method calls.\n     * @chainable\n    */\n    p.copy = function (point) {\n      this.x = point.x;\n      this.y = point.y;\n      return this;\n    };\n\n    /**\n     * Returns a clone of the Point instance.\n     * @method clone\n     * @return {Point} a clone of the Point instance.\n     **/\n    p.clone = function () {\n      return new Point(this.x, this.y);\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Point (x=\" + this.x + \" y=\" + this.y + \")]\";\n    };\n    createjs.Point = Point;\n  })();\n\n  //##############################################################################\n  // Rectangle.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n     *\n     * <h4>Example</h4>\n     *\n     *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n     *\n     * @class Rectangle\n     * @param {Number} [x=0] X position.\n     * @param {Number} [y=0] Y position.\n     * @param {Number} [width=0] The width of the Rectangle.\n     * @param {Number} [height=0] The height of the Rectangle.\n     * @constructor\n     **/\n    function Rectangle(x, y, width, height) {\n      this.setValues(x, y, width, height);\n\n      // public properties:\n      // assigned in the setValues method.\n      /**\n       * X position.\n       * @property x\n       * @type Number\n       **/\n\n      /**\n       * Y position.\n       * @property y\n       * @type Number\n       **/\n\n      /**\n       * Width.\n       * @property width\n       * @type Number\n       **/\n\n      /**\n       * Height.\n       * @property height\n       * @type Number\n       **/\n    }\n    var p = Rectangle.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // public methods:\n    /** \n     * Sets the specified values on this instance.\n     * @method setValues\n     * @param {Number} [x=0] X position.\n     * @param {Number} [y=0] Y position.\n     * @param {Number} [width=0] The width of the Rectangle.\n     * @param {Number} [height=0] The height of the Rectangle.\n     * @return {Rectangle} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.setValues = function (x, y, width, height) {\n      // don't forget to update docs in the constructor if these change:\n      this.x = x || 0;\n      this.y = y || 0;\n      this.width = width || 0;\n      this.height = height || 0;\n      return this;\n    };\n\n    /** \n     * Extends the rectangle's bounds to include the described point or rectangle.\n     * @method extend\n     * @param {Number} x X position of the point or rectangle.\n     * @param {Number} y Y position of the point or rectangle.\n     * @param {Number} [width=0] The width of the rectangle.\n     * @param {Number} [height=0] The height of the rectangle.\n     * @return {Rectangle} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.extend = function (x, y, width, height) {\n      width = width || 0;\n      height = height || 0;\n      if (x + width > this.x + this.width) {\n        this.width = x + width - this.x;\n      }\n      if (y + height > this.y + this.height) {\n        this.height = y + height - this.y;\n      }\n      if (x < this.x) {\n        this.width += this.x - x;\n        this.x = x;\n      }\n      if (y < this.y) {\n        this.height += this.y - y;\n        this.y = y;\n      }\n      return this;\n    };\n\n    /** \n     * Adds the specified padding to the rectangle's bounds.\n     * @method pad\n     * @param {Number} top\n     * @param {Number} left\n     * @param {Number} right\n     * @param {Number} bottom\n     * @return {Rectangle} This instance. Useful for chaining method calls.\n     * @chainable\n    */\n    p.pad = function (top, left, bottom, right) {\n      this.x -= left;\n      this.y -= top;\n      this.width += left + right;\n      this.height += top + bottom;\n      return this;\n    };\n\n    /**\n     * Copies all properties from the specified rectangle to this rectangle.\n     * @method copy\n     * @param {Rectangle} rectangle The rectangle to copy properties from.\n     * @return {Rectangle} This rectangle. Useful for chaining method calls.\n     * @chainable\n    */\n    p.copy = function (rectangle) {\n      return this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n\n    /** \n     * Returns true if this rectangle fully encloses the described point or rectangle.\n     * @method contains\n     * @param {Number} x X position of the point or rectangle.\n     * @param {Number} y Y position of the point or rectangle.\n     * @param {Number} [width=0] The width of the rectangle.\n     * @param {Number} [height=0] The height of the rectangle.\n     * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n    */\n    p.contains = function (x, y, width, height) {\n      width = width || 0;\n      height = height || 0;\n      return x >= this.x && x + width <= this.x + this.width && y >= this.y && y + height <= this.y + this.height;\n    };\n\n    /** \n     * Returns a new rectangle which contains this rectangle and the specified rectangle.\n     * @method union\n     * @param {Rectangle} rect The rectangle to calculate a union with.\n     * @return {Rectangle} A new rectangle describing the union.\n    */\n    p.union = function (rect) {\n      return this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n    };\n\n    /** \n     * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n     * or null if they do not intersect.\n     * @method intersection\n     * @param {Rectangle} rect The rectangle to calculate an intersection with.\n     * @return {Rectangle} A new rectangle describing the intersection or null.\n    */\n    p.intersection = function (rect) {\n      var x1 = rect.x,\n        y1 = rect.y,\n        x2 = x1 + rect.width,\n        y2 = y1 + rect.height;\n      if (this.x > x1) {\n        x1 = this.x;\n      }\n      if (this.y > y1) {\n        y1 = this.y;\n      }\n      if (this.x + this.width < x2) {\n        x2 = this.x + this.width;\n      }\n      if (this.y + this.height < y2) {\n        y2 = this.y + this.height;\n      }\n      return x2 <= x1 || y2 <= y1 ? null : new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    };\n\n    /** \n     * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n     * @method intersects\n     * @param {Rectangle} rect The rectangle to compare.\n     * @return {Boolean} True if the rectangles intersect.\n    */\n    p.intersects = function (rect) {\n      return rect.x <= this.x + this.width && this.x <= rect.x + rect.width && rect.y <= this.y + this.height && this.y <= rect.y + rect.height;\n    };\n\n    /** \n     * Returns true if the width or height are equal or less than 0.\n     * @method isEmpty\n     * @return {Boolean} True if the rectangle is empty.\n    */\n    p.isEmpty = function () {\n      return this.width <= 0 || this.height <= 0;\n    };\n\n    /**\n     * Returns a clone of the Rectangle instance.\n     * @method clone\n     * @return {Rectangle} a clone of the Rectangle instance.\n     **/\n    p.clone = function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Rectangle (x=\" + this.x + \" y=\" + this.y + \" width=\" + this.width + \" height=\" + this.height + \")]\";\n    };\n    createjs.Rectangle = Rectangle;\n  })();\n\n  //##############################################################################\n  // ButtonHelper.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n     * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n     * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n     * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n     *\n     * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n     * garbage collection.\n     * \n     * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n     *      myInstance.addEventListener(\"click\", handleClick);\n     *      function handleClick(event) {\n     *          // Click Happened.\n     *      }\n     *\n     * @class ButtonHelper\n     * @param {Sprite|MovieClip} target The instance to manage.\n     * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n     * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n     * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n     * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n     * states.\n     * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n     * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n     * used for the hitState.\n     * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n     * null, then the default state of the hitArea will be used. *\n     * @constructor\n     */\n    function ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n      if (!target.addEventListener) {\n        return;\n      }\n\n      // public properties:\n      /**\n       * The target for this button helper.\n       * @property target\n       * @type MovieClip | Sprite\n       * @readonly\n       **/\n      this.target = target;\n\n      /**\n       * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n       * @property overLabel\n       * @type String | Number\n       **/\n      this.overLabel = overLabel == null ? \"over\" : overLabel;\n\n      /**\n       * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n       * @property outLabel\n       * @type String | Number\n       **/\n      this.outLabel = outLabel == null ? \"out\" : outLabel;\n\n      /**\n       * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n       * @property downLabel\n       * @type String | Number\n       **/\n      this.downLabel = downLabel == null ? \"down\" : downLabel;\n\n      /**\n       * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n       * @property play\n       * @default false\n       * @type Boolean\n       **/\n      this.play = play;\n\n      //  private properties\n      /**\n       * @property _isPressed\n       * @type Boolean\n       * @protected\n       **/\n      this._isPressed = false;\n\n      /**\n       * @property _isOver\n       * @type Boolean\n       * @protected\n       **/\n      this._isOver = false;\n\n      /**\n       * @property _enabled\n       * @type Boolean\n       * @protected\n       **/\n      this._enabled = false;\n\n      // setup:\n      target.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n      this.enabled = true;\n      this.handleEvent({});\n      if (hitArea) {\n        if (hitLabel) {\n          hitArea.actionsEnabled = false;\n          hitArea.gotoAndStop && hitArea.gotoAndStop(hitLabel);\n        }\n        target.hitArea = hitArea;\n      }\n    }\n    var p = ButtonHelper.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n     * @method setEnabled\n     * @param {Boolean} value\n     * @deprecated\n     **/\n    p.setEnabled = function (value) {\n      // TODO: deprecated.\n      if (value == this._enabled) {\n        return;\n      }\n      var o = this.target;\n      this._enabled = value;\n      if (value) {\n        o.cursor = \"pointer\";\n        o.addEventListener(\"rollover\", this);\n        o.addEventListener(\"rollout\", this);\n        o.addEventListener(\"mousedown\", this);\n        o.addEventListener(\"pressup\", this);\n        if (o._reset) {\n          o.__reset = o._reset;\n          o._reset = this._reset;\n        }\n      } else {\n        o.cursor = null;\n        o.removeEventListener(\"rollover\", this);\n        o.removeEventListener(\"rollout\", this);\n        o.removeEventListener(\"mousedown\", this);\n        o.removeEventListener(\"pressup\", this);\n        if (o.__reset) {\n          o._reset = o.__reset;\n          delete o.__reset;\n        }\n      }\n    };\n    /**\n     * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n     * @method getEnabled\n     * @return {Boolean}\n     * @deprecated\n     **/\n    p.getEnabled = function () {\n      return this._enabled;\n    };\n\n    /**\n     * Enables or disables the button functionality on the target.\n     * @property enabled\n     * @type {Boolean}\n     **/\n    try {\n      Object.defineProperties(p, {\n        enabled: {\n          get: p.getEnabled,\n          set: p.setEnabled\n        }\n      });\n    } catch (e) {} // TODO: use Log\n\n    // public methods:\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[ButtonHelper]\";\n    };\n\n    // private methods:\n    /**\n     * @method handleEvent\n     * @param {Object} evt The mouse event to handle.\n     * @protected\n     **/\n    p.handleEvent = function (evt) {\n      var label,\n        t = this.target,\n        type = evt.type;\n      if (type == \"mousedown\") {\n        this._isPressed = true;\n        label = this.downLabel;\n      } else if (type == \"pressup\") {\n        this._isPressed = false;\n        label = this._isOver ? this.overLabel : this.outLabel;\n      } else if (type == \"rollover\") {\n        this._isOver = true;\n        label = this._isPressed ? this.downLabel : this.overLabel;\n      } else {\n        // rollout and default\n        this._isOver = false;\n        label = this._isPressed ? this.overLabel : this.outLabel;\n      }\n      if (this.play) {\n        t.gotoAndPlay && t.gotoAndPlay(label);\n      } else {\n        t.gotoAndStop && t.gotoAndStop(label);\n      }\n    };\n\n    /**\n     * Injected into target. Preserves the paused state through a reset.\n     * @method _reset\n     * @protected\n     **/\n    p._reset = function () {\n      // TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n      var p = this.paused;\n      this.__reset();\n      this.paused = p;\n    };\n    createjs.ButtonHelper = ButtonHelper;\n  })();\n\n  //##############################################################################\n  // Shadow.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n     * via its <code>shadow</code> property.\n     *\n     * <h4>Example</h4>\n     *\n     *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n     *\n     * @class Shadow\n     * @constructor\n     * @param {String} color The color of the shadow. This can be any valid CSS color value.\n     * @param {Number} offsetX The x offset of the shadow in pixels.\n     * @param {Number} offsetY The y offset of the shadow in pixels.\n     * @param {Number} blur The size of the blurring effect.\n     **/\n    function Shadow(color, offsetX, offsetY, blur) {\n      // public properties:\n      /** \n       * The color of the shadow. This can be any valid CSS color value.\n       * @property color\n       * @type String\n       * @default null\n       */\n      this.color = color || \"black\";\n\n      /** The x offset of the shadow.\n       * @property offsetX\n       * @type Number\n       * @default 0\n       */\n      this.offsetX = offsetX || 0;\n\n      /** The y offset of the shadow.\n       * @property offsetY\n       * @type Number\n       * @default 0\n       */\n      this.offsetY = offsetY || 0;\n\n      /** The blur of the shadow.\n       * @property blur\n       * @type Number\n       * @default 0\n       */\n      this.blur = blur || 0;\n    }\n    var p = Shadow.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // static public properties:\n    /**\n     * An identity shadow object (all properties are set to 0).\n     * @property identity\n     * @type Shadow\n     * @static\n     * @final\n     * @readonly\n     **/\n    Shadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n    // public methods:\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Shadow]\";\n    };\n\n    /**\n     * Returns a clone of this Shadow instance.\n     * @method clone\n     * @return {Shadow} A clone of the current Shadow instance.\n     **/\n    p.clone = function () {\n      return new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n    };\n    createjs.Shadow = Shadow;\n  })();\n\n  //##############################################################################\n  // SpriteSheet.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n     * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n     * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n     *\n     * The data passed to the SpriteSheet constructor defines:\n     * <ol>\n     * \t<li> The source image or images to use.</li>\n     * \t<li> The positions of individual image frames.</li>\n     * \t<li> Sequences of frames that form named animations. Optional.</li>\n     * \t<li> The target playback framerate. Optional.</li>\n     * </ol>\n     * <h3>SpriteSheet Format</h3>\n     * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n     * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n     *\n     * <h4>images</h4>\n     * An array of source images. Images can be either an HTMlimage\n     * instance, or a uri to an image. The former is recommended to control preloading.\n     *\n     * \timages: [image1, \"path/to/image2.png\"],\n     *\n     * <h4>frames</h4>\n     * Defines the individual frames. There are two supported formats for frame data:\n     * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n     * and `count` properties.\n     *\n     * <ul>\n     *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n     *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n     *  <li>`spacing` indicate the spacing between frames</li>\n     *  <li>`margin` specify the margin around the image(s)</li>\n     *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n     *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n     *  indexes based on their position in the source images (left to right, top to bottom).</li>\n     * </ul>\n     *\n     *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n     *\n     * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n     * with 4 required and 3 optional entries, in the order:\n     *\n     * <ul>\n     *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n     *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n     *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n     * </ul>\n     *\n     * \tframes: [\n     * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n     * \t\t[64, 0, 96, 64],\n     * \t\t[0, 0, 64, 64, 1, 32, 32]\n     * \t\t// etc.\n     * \t]\n     *\n     * <h4>animations</h4>\n     * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n     * animation of the same name. Each animation must specify the frames to play, and may\n     * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n     * the name of the `next` animation to sequence to after it completes.\n     *\n     * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n     * <ol>\n     * \t<li>for a single frame animation, you can simply specify the frame index\n     *\n     * \t\tanimations: {\n     * \t\t\tsit: 7\n     * \t\t}\n     *\n     * </li>\n     * <li>\n     *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n     * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n     *\n     * \t\tanimations: {\n     * \t\t\t// start, end, next*, speed*\n     * \t\t\trun: [0, 8],\n     * \t\t\tjump: [9, 12, \"run\", 2]\n     * \t\t}\n     *\n     *  </li>\n     *  <li>\n     *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n     *     indexes to play in order. The object can also specify `next` and `speed` properties.\n     *\n     * \t\tanimations: {\n     * \t\t\twalk: {\n     * \t\t\t\tframes: [1,2,3,3,2,1]\n     * \t\t\t},\n     * \t\t\tshoot: {\n     * \t\t\t\tframes: [1,4,5,6],\n     * \t\t\t\tnext: \"walk\",\n     * \t\t\t\tspeed: 0.5\n     * \t\t\t}\n     * \t\t}\n     *\n     *  </li>\n     * </ol>\n     * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n     * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n     * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n     *\n     * <h4>framerate</h4>\n     * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n     * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n     *\n     * \t\tframerate: 20\n     *\n     * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n     * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n     *\n     * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n     * \t\tfunction handleTick(event) {\n     *\t\t\tstage.update(event);\n     *\t\t}\n     *\n     * <h3>Example</h3>\n     * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n     * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n     * sequencing back to run.\n     *\n     * \t\tvar data = {\n     * \t\t\timages: [\"sprites.jpg\"],\n     * \t\t\tframes: {width:50, height:50},\n     * \t\t\tanimations: {\n     * \t\t\t\tstand:0,\n     * \t\t\t\trun:[1,5],\n     * \t\t\t\tjump:[6,8,\"run\"]\n     * \t\t\t}\n     * \t\t};\n     * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n     * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n     *\n     * <h3>Generating SpriteSheet Images</h3>\n     * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n     * coordinates manually, however there are a number of tools that facilitate this.\n     * <ul>\n     *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\n     *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n     *     EaselJS support.\n     *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\n     * </ul>\n     *\n     * <h3>Cross Origin Issues</h3>\n     * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n     * using:\n     * <ul>\n     *     <li>a mouse</li>\n     *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n     *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n     *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n     * </ul>\n     * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n     * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n     *\n     * \t\tvar image = new Image();\n     * \t\timg.crossOrigin=\"Anonymous\";\n     * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n     *\n     * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n     * support cross-origin requests, or this will not work. For more information, check out\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n     *\n     * @class SpriteSheet\n     * @constructor\n     * @param {Object} data An object describing the SpriteSheet data.\n     * @extends EventDispatcher\n     **/\n    function SpriteSheet(data) {\n      this.EventDispatcher_constructor();\n\n      // public properties:\n      /**\n       * Indicates whether all images are finished loading.\n       * @property complete\n       * @type Boolean\n       * @readonly\n       **/\n      this.complete = true;\n\n      /**\n       * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n       * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n       * @property framerate\n       * @type Number\n       **/\n      this.framerate = 0;\n\n      // private properties:\n      /**\n       * @property _animations\n       * @protected\n       * @type Array\n       **/\n      this._animations = null;\n\n      /**\n       * @property _frames\n       * @protected\n       * @type Array\n       **/\n      this._frames = null;\n\n      /**\n       * @property _images\n       * @protected\n       * @type Array\n       **/\n      this._images = null;\n\n      /**\n       * @property _data\n       * @protected\n       * @type Object\n       **/\n      this._data = null;\n\n      /**\n       * @property _loadCount\n       * @protected\n       * @type Number\n       **/\n      this._loadCount = 0;\n\n      // only used for simple frame defs:\n      /**\n       * @property _frameHeight\n       * @protected\n       * @type Number\n       **/\n      this._frameHeight = 0;\n\n      /**\n       * @property _frameWidth\n       * @protected\n       * @type Number\n       **/\n      this._frameWidth = 0;\n\n      /**\n       * @property _numFrames\n       * @protected\n       * @type Number\n       **/\n      this._numFrames = 0;\n\n      /**\n       * @property _regX\n       * @protected\n       * @type Number\n       **/\n      this._regX = 0;\n\n      /**\n       * @property _regY\n       * @protected\n       * @type Number\n       **/\n      this._regY = 0;\n\n      /**\n       * @property _spacing\n       * @protected\n       * @type Number\n       **/\n      this._spacing = 0;\n\n      /**\n       * @property _margin\n       * @protected\n       * @type Number\n       **/\n      this._margin = 0;\n\n      // setup:\n      this._parseData(data);\n    }\n    var p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // events:\n    /**\n     * Dispatched when all images are loaded.  Note that this only fires if the images\n     * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n     * to prior to adding a listener. Ex.\n     *\n     * \tvar sheet = new createjs.SpriteSheet(data);\n     * \tif (!sheet.complete) {\n     * \t\t// not preloaded, listen for the complete event:\n     * \t\tsheet.addEventListener(\"complete\", handler);\n     * \t}\n     *\n     * @event complete\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n     * when doing on-demand rendering.\n     * @event getframe\n     * @param {Number} index The frame index.\n     * @param {Object} frame The frame object that getFrame will return.\n     */\n\n    /**\n     * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n     * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n     * event once all images are finished processing, even if an error is encountered.\n     * @event error\n     * @param {String} src The source of the image that failed to load.\n     * @since 0.8.2\n     */\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n     * @method getAnimations\n     * @return {Array}\n     * @deprecated\n     **/\n    p.getAnimations = function () {\n      return this._animations.slice();\n    };\n\n    /**\n     * Returns an array of all available animation names available on this sprite sheet as strings.\n     * @property animations\n     * @type {Array}\n     * @readonly\n     **/\n    try {\n      Object.defineProperties(p, {\n        animations: {\n          get: p.getAnimations\n        }\n      });\n    } catch (e) {}\n\n    // public methods:\n    /**\n     * Returns the total number of frames in the specified animation, or in the whole sprite\n     * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n     * the images have not been fully loaded.\n     * @method getNumFrames\n     * @param {String} animation The name of the animation to get a frame count for.\n     * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n     */\n    p.getNumFrames = function (animation) {\n      if (animation == null) {\n        return this._frames ? this._frames.length : this._numFrames || 0;\n      } else {\n        var data = this._data[animation];\n        if (data == null) {\n          return 0;\n        } else {\n          return data.frames.length;\n        }\n      }\n    };\n\n    /**\n     * Returns an object defining the specified animation. The returned object contains:<UL>\n     * \t<li>frames: an array of the frame ids in the animation</li>\n     * \t<li>speed: the playback speed for this animation</li>\n     * \t<li>name: the name of the animation</li>\n     * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n     * \tsame.</li>\n     * </UL>\n     * @method getAnimation\n     * @param {String} name The name of the animation to get.\n     * @return {Object} a generic object with frames, speed, name, and next properties.\n     **/\n    p.getAnimation = function (name) {\n      return this._data[name];\n    };\n\n    /**\n     * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n     * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n     * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n     * \timage.</li>\n     * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n     * </UL>\n     * @method getFrame\n     * @param {Number} frameIndex The index of the frame.\n     * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n     **/\n    p.getFrame = function (frameIndex) {\n      var frame;\n      if (this._frames && (frame = this._frames[frameIndex])) {\n        return frame;\n      }\n      return null;\n    };\n\n    /**\n     * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n     * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n     *\n     * \t[x=-50, y=-40, width=90, height=70]\n     *\n     * @method getFrameBounds\n     * @param {Number} frameIndex The index of the frame.\n     * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n     * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n     **/\n    p.getFrameBounds = function (frameIndex, rectangle) {\n      var frame = this.getFrame(frameIndex);\n      return frame ? (rectangle || new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[SpriteSheet]\";\n    };\n\n    /**\n     * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n     * @method clone\n     **/\n    p.clone = function () {\n      throw \"SpriteSheet cannot be cloned.\";\n    };\n\n    // private methods:\n    /**\n     * @method _parseData\n     * @param {Object} data An object describing the SpriteSheet data.\n     * @protected\n     **/\n    p._parseData = function (data) {\n      var i, l, o, a;\n      if (data == null) {\n        return;\n      }\n      this.framerate = data.framerate || 0;\n\n      // parse images:\n      if (data.images && (l = data.images.length) > 0) {\n        a = this._images = [];\n        for (i = 0; i < l; i++) {\n          var img = data.images[i];\n          if (typeof img == \"string\") {\n            var src = img;\n            img = document.createElement(\"img\");\n            img.src = src;\n          }\n          a.push(img);\n          if (!img.getContext && !img.naturalWidth) {\n            this._loadCount++;\n            this.complete = false;\n            (function (o, src) {\n              img.onload = function () {\n                o._handleImageLoad(src);\n              };\n            })(this, src);\n            (function (o, src) {\n              img.onerror = function () {\n                o._handleImageError(src);\n              };\n            })(this, src);\n          }\n        }\n      }\n\n      // parse frames:\n      if (data.frames == null) ;else if (Array.isArray(data.frames)) {\n        this._frames = [];\n        a = data.frames;\n        for (i = 0, l = a.length; i < l; i++) {\n          var arr = a[i];\n          this._frames.push({\n            image: this._images[arr[4] ? arr[4] : 0],\n            rect: new createjs.Rectangle(arr[0], arr[1], arr[2], arr[3]),\n            regX: arr[5] || 0,\n            regY: arr[6] || 0\n          });\n        }\n      } else {\n        o = data.frames;\n        this._frameWidth = o.width;\n        this._frameHeight = o.height;\n        this._regX = o.regX || 0;\n        this._regY = o.regY || 0;\n        this._spacing = o.spacing || 0;\n        this._margin = o.margin || 0;\n        this._numFrames = o.count;\n        if (this._loadCount == 0) {\n          this._calculateFrames();\n        }\n      }\n\n      // parse animations:\n      this._animations = [];\n      if ((o = data.animations) != null) {\n        this._data = {};\n        var name;\n        for (name in o) {\n          var anim = {\n            name: name\n          };\n          var obj = o[name];\n          if (typeof obj == \"number\") {\n            // single frame\n            a = anim.frames = [obj];\n          } else if (Array.isArray(obj)) {\n            // simple\n            if (obj.length == 1) {\n              anim.frames = [obj[0]];\n            } else {\n              anim.speed = obj[3];\n              anim.next = obj[2];\n              a = anim.frames = [];\n              for (i = obj[0]; i <= obj[1]; i++) {\n                a.push(i);\n              }\n            }\n          } else {\n            // complex\n            anim.speed = obj.speed;\n            anim.next = obj.next;\n            var frames = obj.frames;\n            a = anim.frames = typeof frames == \"number\" ? [frames] : frames.slice(0);\n          }\n          if (anim.next === true || anim.next === undefined) {\n            anim.next = name;\n          } // loop\n          if (anim.next === false || a.length < 2 && anim.next == name) {\n            anim.next = null;\n          } // stop\n          if (!anim.speed) {\n            anim.speed = 1;\n          }\n          this._animations.push(name);\n          this._data[name] = anim;\n        }\n      }\n    };\n\n    /**\n     * @method _handleImageLoad\n     * @protected\n     **/\n    p._handleImageLoad = function (src) {\n      if (--this._loadCount == 0) {\n        this._calculateFrames();\n        this.complete = true;\n        this.dispatchEvent(\"complete\");\n      }\n    };\n\n    /**\n     * @method _handleImageError\n     * @protected\n     */\n    p._handleImageError = function (src) {\n      var errorEvent = new createjs.Event(\"error\");\n      errorEvent.src = src;\n      this.dispatchEvent(errorEvent);\n\n      // Complete is still dispatched.\n      if (--this._loadCount == 0) {\n        this.dispatchEvent(\"complete\");\n      }\n    };\n\n    /**\n     * @method _calculateFrames\n     * @protected\n     **/\n    p._calculateFrames = function () {\n      if (this._frames || this._frameWidth == 0) {\n        return;\n      }\n      this._frames = [];\n      var maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n      var frameCount = 0,\n        frameWidth = this._frameWidth,\n        frameHeight = this._frameHeight;\n      var spacing = this._spacing,\n        margin = this._margin;\n      imgLoop: for (var i = 0, imgs = this._images; i < imgs.length; i++) {\n        var img = imgs[i],\n          imgW = img.width,\n          imgH = img.height;\n        var y = margin;\n        while (y <= imgH - margin - frameHeight) {\n          var x = margin;\n          while (x <= imgW - margin - frameWidth) {\n            if (frameCount >= maxFrames) {\n              break imgLoop;\n            }\n            frameCount++;\n            this._frames.push({\n              image: img,\n              rect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n              regX: this._regX,\n              regY: this._regY\n            });\n            x += frameWidth + spacing;\n          }\n          y += frameHeight + spacing;\n        }\n      }\n      this._numFrames = frameCount;\n    };\n    createjs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // Graphics.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n     * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n     * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n     * context of an EaselJS display list.\n     *\n     * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n     * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n     * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n     *\n     *      var g = new createjs.Graphics();\n     *      g.setStrokeStyle(1);\n     *      g.beginStroke(\"#000000\");\n     *      g.beginFill(\"red\");\n     *      g.drawCircle(0,0,30);\n     *\n     * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n     * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n     *\n     *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n     *\n     * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n     * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n     *\n     *      var fillCommand = myGraphics.beginFill(\"red\").command;\n     *      // ... later, update the fill style/color:\n     *      fillCommand.style = \"blue\";\n     *      // or change it to a bitmap fill:\n     *      fillCommand.bitmap(myImage);\n     *\n     * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n     * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n     *\n     *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n     *      myGraphics.append(createjs.Graphics.beginCmd);\n     *      // we need to define the path before applying the fill:\n     *      var circle = new createjs.Graphics.Circle(0,0,30);\n     *      myGraphics.append(circle);\n     *      // fill the path we just defined:\n     *      var fill = new createjs.Graphics.Fill(\"red\");\n     *      myGraphics.append(fill);\n     *\n     * These approaches can be used together, for example to insert a custom command:\n     *\n     *      myGraphics.beginFill(\"red\");\n     *      var customCommand = new CustomSpiralCommand(etc);\n     *      myGraphics.append(customCommand);\n     *      myGraphics.beginFill(\"blue\");\n     *      myGraphics.drawCircle(0, 0, 30);\n     *\n     * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n     *\n     * <h4>Tiny API</h4>\n     * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n     * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n     * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n     * descriptions in the docs.\n     *\n     * <table>\n     *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n     *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n     *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n     *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n     *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n     *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n     *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n     *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n     *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n     *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n     *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n     *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n     *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n     *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n     *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n     *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n     *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n     * </table>\n     *\n     * Here is the above example, using the tiny API instead.\n     *\n     *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n     *\n     * @class Graphics\n     * @constructor\n     **/\n    function Graphics() {\n      // public properties\n      /**\n       * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n       * to a Fill command in order to dynamically update the color later by using:\n       *\n       * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n       * \t\t// update color later:\n       * \t\tmyFill.style = \"yellow\";\n       *\n       * @property command\n       * @type Object\n       **/\n      this.command = null;\n\n      // private properties\n      /**\n       * @property _stroke\n       * @protected\n       * @type {Stroke}\n       **/\n      this._stroke = null;\n\n      /**\n       * @property _strokeStyle\n       * @protected\n       * @type {StrokeStyle}\n       **/\n      this._strokeStyle = null;\n\n      /**\n       * @property _oldStrokeStyle\n       * @protected\n       * @type {StrokeStyle}\n       **/\n      this._oldStrokeStyle = null;\n\n      /**\n       * @property _strokeDash\n       * @protected\n       * @type {StrokeDash}\n       **/\n      this._strokeDash = null;\n\n      /**\n       * @property _oldStrokeDash\n       * @protected\n       * @type {StrokeDash}\n       **/\n      this._oldStrokeDash = null;\n\n      /**\n       * @property _strokeIgnoreScale\n       * @protected\n       * @type Boolean\n       **/\n      this._strokeIgnoreScale = false;\n\n      /**\n       * @property _fill\n       * @protected\n       * @type {Fill}\n       **/\n      this._fill = null;\n\n      /**\n       * @property _instructions\n       * @protected\n       * @type {Array}\n       **/\n      this._instructions = [];\n\n      /**\n       * Indicates the last instruction index that was committed.\n       * @property _commitIndex\n       * @protected\n       * @type {Number}\n       **/\n      this._commitIndex = 0;\n\n      /**\n       * Uncommitted instructions.\n       * @property _activeInstructions\n       * @protected\n       * @type {Array}\n       **/\n      this._activeInstructions = [];\n\n      /**\n       * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n       * @property _dirty\n       * @protected\n       * @type {Boolean}\n       * @default false\n       **/\n      this._dirty = false;\n\n      /**\n       * Index to draw from if a store operation has happened.\n       * @property _storeIndex\n       * @protected\n       * @type {Number}\n       * @default 0\n       **/\n      this._storeIndex = 0;\n\n      // setup:\n      this.clear();\n    }\n    var p = Graphics.prototype;\n    var G = Graphics; // shortcut\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // static public methods:\n    /**\n     * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n     * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n     *\n     *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n     *      // Returns \"rgba(50,100,150,0.5)\"\n     *\n     * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n     * param. For example,\n     *\n     *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n     *      // Returns \"rgba(255,0,255,0.2)\"\n     *\n     * @method getRGB\n     * @static\n     * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n     * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n     * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n     * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n     * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n     * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n     **/\n    Graphics.getRGB = function (r, g, b, alpha) {\n      if (r != null && b == null) {\n        alpha = g;\n        b = r & 0xFF;\n        g = r >> 8 & 0xFF;\n        r = r >> 16 & 0xFF;\n      }\n      if (alpha == null) {\n        return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n      } else {\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + alpha + \")\";\n      }\n    };\n\n    /**\n     * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n     * or if alpha is null then in the format \"hsl(360,100,100)\".\n     *\n     *      createjs.Graphics.getHSL(150, 100, 70);\n     *      // Returns \"hsl(150,100,70)\"\n     *\n     * @method getHSL\n     * @static\n     * @param {Number} hue The hue component for the color, between 0 and 360.\n     * @param {Number} saturation The saturation component for the color, between 0 and 100.\n     * @param {Number} lightness The lightness component for the color, between 0 and 100.\n     * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n     * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n     * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n     **/\n    Graphics.getHSL = function (hue, saturation, lightness, alpha) {\n      if (alpha == null) {\n        return \"hsl(\" + hue % 360 + \",\" + saturation + \"%,\" + lightness + \"%)\";\n      } else {\n        return \"hsla(\" + hue % 360 + \",\" + saturation + \"%,\" + lightness + \"%,\" + alpha + \")\";\n      }\n    };\n\n    // static properties:\n    /**\n     * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n     * unnecessary instantiation.\n     * @property beginCmd\n     * @type {Graphics.BeginPath}\n     * @static\n     **/\n    // defined at the bottom of this file.\n\n    /**\n     * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n     * @property BASE_64\n     * @static\n     * @final\n     * @readonly\n     * @type {Object}\n     **/\n    Graphics.BASE_64 = {\n      \"A\": 0,\n      \"B\": 1,\n      \"C\": 2,\n      \"D\": 3,\n      \"E\": 4,\n      \"F\": 5,\n      \"G\": 6,\n      \"H\": 7,\n      \"I\": 8,\n      \"J\": 9,\n      \"K\": 10,\n      \"L\": 11,\n      \"M\": 12,\n      \"N\": 13,\n      \"O\": 14,\n      \"P\": 15,\n      \"Q\": 16,\n      \"R\": 17,\n      \"S\": 18,\n      \"T\": 19,\n      \"U\": 20,\n      \"V\": 21,\n      \"W\": 22,\n      \"X\": 23,\n      \"Y\": 24,\n      \"Z\": 25,\n      \"a\": 26,\n      \"b\": 27,\n      \"c\": 28,\n      \"d\": 29,\n      \"e\": 30,\n      \"f\": 31,\n      \"g\": 32,\n      \"h\": 33,\n      \"i\": 34,\n      \"j\": 35,\n      \"k\": 36,\n      \"l\": 37,\n      \"m\": 38,\n      \"n\": 39,\n      \"o\": 40,\n      \"p\": 41,\n      \"q\": 42,\n      \"r\": 43,\n      \"s\": 44,\n      \"t\": 45,\n      \"u\": 46,\n      \"v\": 47,\n      \"w\": 48,\n      \"x\": 49,\n      \"y\": 50,\n      \"z\": 51,\n      \"0\": 52,\n      \"1\": 53,\n      \"2\": 54,\n      \"3\": 55,\n      \"4\": 56,\n      \"5\": 57,\n      \"6\": 58,\n      \"7\": 59,\n      \"8\": 60,\n      \"9\": 61,\n      \"+\": 62,\n      \"/\": 63\n    };\n\n    /**\n     * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n     * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n     * \"butt\", 1 to \"round\", and 2 to \"square\".\n     * For example, to set the line caps to \"square\":\n     *\n     *      myGraphics.ss(16, 2);\n     *\n     * @property STROKE_CAPS_MAP\n     * @static\n     * @final\n     * @readonly\n     * @type {Array}\n     **/\n    Graphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n    /**\n     * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n     * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n     * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n     * For example, to set the line joints to \"bevel\":\n     *\n     *      myGraphics.ss(16, 0, 2);\n     *\n     * @property STROKE_JOINTS_MAP\n     * @static\n     * @final\n     * @readonly\n     * @type {Array}\n     **/\n    Graphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n    /**\n     * @property _ctx\n     * @static\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     **/\n    var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n    if (canvas.getContext) {\n      Graphics._ctx = canvas.getContext(\"2d\");\n      canvas.width = canvas.height = 1;\n    }\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n     * @method getInstructions\n     * @return {Array}\n     * @deprecated\n     **/\n    p.getInstructions = function () {\n      this._updateInstructions();\n      return this._instructions;\n    };\n\n    /**\n     * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n     * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n     *\n     * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n     * @property instructions\n     * @type {Array}\n     * @readonly\n     **/\n    try {\n      Object.defineProperties(p, {\n        instructions: {\n          get: p.getInstructions\n        }\n      });\n    } catch (e) {}\n\n    // public methods:\n    /**\n     * Returns true if this Graphics instance has no drawing commands.\n     * @method isEmpty\n     * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n     **/\n    p.isEmpty = function () {\n      return !(this._instructions.length || this._activeInstructions.length);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n     **/\n    p.draw = function (ctx, data) {\n      this._updateInstructions();\n      var instr = this._instructions;\n      for (var i = this._storeIndex, l = instr.length; i < l; i++) {\n        instr[i].exec(ctx, data);\n      }\n    };\n\n    /**\n     * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n     * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method drawAsPath\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     **/\n    p.drawAsPath = function (ctx) {\n      this._updateInstructions();\n      var instr,\n        instrs = this._instructions;\n      for (var i = this._storeIndex, l = instrs.length; i < l; i++) {\n        // the first command is always a beginPath command.\n        if ((instr = instrs[i]).path !== false) {\n          instr.exec(ctx);\n        }\n      }\n    };\n\n    // public methods that map directly to context 2D calls:\n    /**\n     * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n     * @method moveTo\n     * @param {Number} x The x coordinate the drawing point should move to.\n     * @param {Number} y The y coordinate the drawing point should move to.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n     * @chainable\n     **/\n    p.moveTo = function (x, y) {\n      return this.append(new G.MoveTo(x, y), true);\n    };\n\n    /**\n     * Draws a line from the current drawing point to the specified position, which become the new current drawing\n     * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n     * A tiny API method \"lt\" also exists.\n     *\n     * For detailed information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n     * whatwg spec</a>.\n     * @method lineTo\n     * @param {Number} x The x coordinate the drawing point should draw to.\n     * @param {Number} y The y coordinate the drawing point should draw to.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.lineTo = function (x, y) {\n      return this.append(new G.LineTo(x, y));\n    };\n\n    /**\n     * Draws an arc with the specified control points and radius.  For detailed information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n     * whatwg spec</a>. A tiny API method \"at\" also exists.\n     * @method arcTo\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     * @param {Number} radius\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.arcTo = function (x1, y1, x2, y2, radius) {\n      return this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n    };\n\n    /**\n     * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n     * example, to draw a full circle with a radius of 20 centered at (100, 100):\n     *\n     *      arc(100, 100, 20, 0, Math.PI*2);\n     *\n     * For detailed information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n     * A tiny API method \"a\" also exists.\n     * @method arc\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @param {Number} startAngle Measured in radians.\n     * @param {Number} endAngle Measured in radians.\n     * @param {Boolean} anticlockwise\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.arc = function (x, y, radius, startAngle, endAngle, anticlockwise) {\n      return this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n    };\n\n    /**\n     * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n     * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n     * whatwg spec</a>. A tiny API method \"qt\" also exists.\n     * @method quadraticCurveTo\n     * @param {Number} cpx\n     * @param {Number} cpy\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.quadraticCurveTo = function (cpx, cpy, x, y) {\n      return this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n    };\n\n    /**\n     * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n     * cp2y). For detailed information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n     * whatwg spec</a>. A tiny API method \"bt\" also exists.\n     * @method bezierCurveTo\n     * @param {Number} cp1x\n     * @param {Number} cp1y\n     * @param {Number} cp2x\n     * @param {Number} cp2y\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n      return this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n    };\n\n    /**\n     * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n     * For detailed information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n     * whatwg spec</a>. A tiny API method \"r\" also exists.\n     * @method rect\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w Width of the rectangle\n     * @param {Number} h Height of the rectangle\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.rect = function (x, y, w, h) {\n      return this.append(new G.Rect(x, y, w, h));\n    };\n\n    /**\n     * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n     * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n     * @method closePath\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.closePath = function () {\n      return this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n    };\n\n    // public methods that roughly map to Flash graphics APIs:\n    /**\n     * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n     * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n     * @method clear\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.clear = function () {\n      this._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n      this._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n      this._dirty = this._strokeIgnoreScale = false;\n      return this;\n    };\n\n    /**\n     * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n     * @method beginFill\n     * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n     * null will result in no fill.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginFill = function (color) {\n      return this._setFill(color ? new G.Fill(color) : null);\n    };\n\n    /**\n     * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n     * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n     * square to display it:\n     *\n     *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n     *\n     * A tiny API method \"lf\" also exists.\n     * @method beginLinearGradientFill\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n     * drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n     * the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n     * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginLinearGradientFill = function (colors, ratios, x0, y0, x1, y1) {\n      return this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n    };\n\n    /**\n     * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n     * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n     *\n     *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n     *\n     * A tiny API method \"rf\" also exists.\n     * @method beginRadialGradientFill\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 Center position of the inner circle that defines the gradient.\n     * @param {Number} y0 Center position of the inner circle that defines the gradient.\n     * @param {Number} r0 Radius of the inner circle that defines the gradient.\n     * @param {Number} x1 Center position of the outer circle that defines the gradient.\n     * @param {Number} y1 Center position of the outer circle that defines the gradient.\n     * @param {Number} r1 Radius of the outer circle that defines the gradient.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginRadialGradientFill = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n      return this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n    };\n\n    /**\n     * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n     * exists.\n     * @method beginBitmapFill\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n     * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n     * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n     * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n     * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n     * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n     * will be applied relative to the parent transform.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginBitmapFill = function (image, repetition, matrix) {\n      return this._setFill(new G.Fill(null, matrix).bitmap(image, repetition));\n    };\n\n    /**\n     * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n     * A tiny API method \"ef\" also exists.\n     * @method endFill\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.endFill = function () {\n      return this.beginFill();\n    };\n\n    /**\n     * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n     * the stroke style and color in a single line of code like so:\n     *\n     * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n     *\n     * A tiny API method \"ss\" also exists.\n     * @method setStrokeStyle\n     * @param {Number} thickness The width of the stroke.\n     * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n     * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n     * the tiny API.\n     * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n     * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n     * for use with the tiny API.\n     * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n     * controls at what point a mitered joint will be clipped.\n     * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n     * of active transformations.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.setStrokeStyle = function (thickness, caps, joints, miterLimit, ignoreScale) {\n      this._updateInstructions(true);\n      this._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n      // ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n      if (this._stroke) {\n        this._stroke.ignoreScale = ignoreScale;\n      }\n      this._strokeIgnoreScale = ignoreScale;\n      return this;\n    };\n\n    /**\n     * Sets or clears the stroke dash pattern.\n     *\n     * \tmyGraphics.setStrokeDash([20, 10], 0);\n     *\n     * A tiny API method `sd` also exists.\n     * @method setStrokeDash\n     * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n     * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n     * Passing null or an empty array will clear the existing stroke dash.\n     * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.setStrokeDash = function (segments, offset) {\n      this._updateInstructions(true);\n      this._strokeDash = this.command = new G.StrokeDash(segments, offset);\n      return this;\n    };\n\n    /**\n     * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n     * @method beginStroke\n     * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n     * null will result in no stroke.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginStroke = function (color) {\n      return this._setStroke(color ? new G.Stroke(color) : null);\n    };\n\n    /**\n     * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n     * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n     * square to display it:\n     *\n     *      myGraphics.setStrokeStyle(10).\n     *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n     *\n     * A tiny API method \"ls\" also exists.\n     * @method beginLinearGradientStroke\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n     * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginLinearGradientStroke = function (colors, ratios, x0, y0, x1, y1) {\n      return this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n    };\n\n    /**\n     * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n     * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n     *\n     *      myGraphics.setStrokeStyle(10)\n     *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n     *          .drawRect(50, 90, 150, 110);\n     *\n     * A tiny API method \"rs\" also exists.\n     * @method beginRadialGradientStroke\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n     * to 100%.\n     * @param {Number} x0 Center position of the inner circle that defines the gradient.\n     * @param {Number} y0 Center position of the inner circle that defines the gradient.\n     * @param {Number} r0 Radius of the inner circle that defines the gradient.\n     * @param {Number} x1 Center position of the outer circle that defines the gradient.\n     * @param {Number} y1 Center position of the outer circle that defines the gradient.\n     * @param {Number} r1 Radius of the outer circle that defines the gradient.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginRadialGradientStroke = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n      return this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n    };\n\n    /**\n     * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n     * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n     * also exists.\n     * @method beginBitmapStroke\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n     * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n     * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n     * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.beginBitmapStroke = function (image, repetition) {\n      // NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n      return this._setStroke(new G.Stroke().bitmap(image, repetition));\n    };\n\n    /**\n     * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n     * A tiny API method \"es\" also exists.\n     * @method endStroke\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.endStroke = function () {\n      return this.beginStroke();\n    };\n\n    /**\n     * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n     * method.\n     * @method quadraticCurveTo\n     * @param {Number} cpx\n     * @param {Number} cpy\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.curveTo = p.quadraticCurveTo;\n\n    /**\n     *\n     * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n     * method.\n     * @method drawRect\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w Width of the rectangle\n     * @param {Number} h Height of the rectangle\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawRect = p.rect;\n\n    /**\n     * Draws a rounded rectangle with all corners with the specified radius.\n     * @method drawRoundRect\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     * @param {Number} radius Corner radius.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawRoundRect = function (x, y, w, h, radius) {\n      return this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n    };\n\n    /**\n     * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n     * method \"rc\" also exists.\n     * @method drawRoundRectComplex\n     * @param {Number} x The horizontal coordinate to draw the round rect.\n     * @param {Number} y The vertical coordinate to draw the round rect.\n     * @param {Number} w The width of the round rect.\n     * @param {Number} h The height of the round rect.\n     * @param {Number} radiusTL Top left corner radius.\n     * @param {Number} radiusTR Top right corner radius.\n     * @param {Number} radiusBR Bottom right corner radius.\n     * @param {Number} radiusBL Bottom left corner radius.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawRoundRectComplex = function (x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n      return this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n    };\n\n    /**\n     * Draws a circle with the specified radius at (x, y).\n     *\n     *      var g = new createjs.Graphics();\n     *\t    g.setStrokeStyle(1);\n     *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n     *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n     *\t    g.drawCircle(0,0,3);\n     *\n     *\t    var s = new createjs.Shape(g);\n     *\t\ts.x = 100;\n     *\t\ts.y = 100;\n     *\n     *\t    stage.addChild(s);\n     *\t    stage.update();\n     *\n     * A tiny API method \"dc\" also exists.\n     * @method drawCircle\n     * @param {Number} x x coordinate center point of circle.\n     * @param {Number} y y coordinate center point of circle.\n     * @param {Number} radius Radius of circle.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawCircle = function (x, y, radius) {\n      return this.append(new G.Circle(x, y, radius));\n    };\n\n    /**\n     * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n     * except the width and height can be different. A tiny API method \"de\" also exists.\n     * @method drawEllipse\n     * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n     * which draws from center.\n     * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n     * which draws from the center.\n     * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n     * number.\n     * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawEllipse = function (x, y, w, h) {\n      return this.append(new G.Ellipse(x, y, w, h));\n    };\n\n    /**\n     * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n     * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n     * radius of 50:\n     *\n     *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n     *      // Note: -90 makes the first point vertical\n     *\n     * A tiny API method \"dp\" also exists.\n     *\n     * @method drawPolyStar\n     * @param {Number} x Position of the center of the shape.\n     * @param {Number} y Position of the center of the shape.\n     * @param {Number} radius The outer radius of the shape.\n     * @param {Number} sides The number of points on the star or sides on the polygon.\n     * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n     * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n     * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n     * directly to the right of the center.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.drawPolyStar = function (x, y, radius, sides, pointSize, angle) {\n      return this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n    };\n\n    // TODO: deprecated.\n    /**\n     * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n     * @method inject\n     * @deprecated\n     **/\n\n    /**\n     * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n     * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n     * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n     *\n     * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n     * built-in or custom graphics commands. For example:\n     *\n     * \t\t// attach data to our shape, so we can access it during the draw:\n     * \t\tmyShape.color = \"red\";\n     *\n     * \t\t// append a Circle command object:\n     * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n     *\n     * \t\t// append a custom command object with an exec method that sets the fill style\n     * \t\t// based on the shape's data, and then fills the circle.\n     * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n     * \t\t\tctx.fillStyle = shape.color;\n     * \t\t\tctx.fill();\n     * \t\t}});\n     *\n     * @method append\n     * @param {Object} command A graphics command object exposing an \"exec\" method.\n     * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.append = function (command, clean) {\n      this._activeInstructions.push(command);\n      this.command = command;\n      if (!clean) {\n        this._dirty = true;\n      }\n      return this;\n    };\n\n    /**\n     * Decodes a compact encoded path string into a series of draw instructions.\n     * This format is not intended to be human readable, and is meant for use by authoring tools.\n     * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n     * commands.\n     *\n     * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n     * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n     * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n     * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n     * latter. Bits 5 and 6 are currently unused.\n     *\n     * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n     * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n     * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n     * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n     * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n     * appropriate).\n     *\n     * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n     * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n     * parameter.\n     * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n     * indicate 1500 tenths of a pixel.\n     * <br />AA - 000000000000. Absolute y position of 0.\n     * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n     * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n     * provide an absolute position of +150.0px.\n     * <br />AAA - 000000000000000000. A y delta value of 0.\n     *\n     * A tiny API method \"p\" also exists.\n     * @method decodePath\n     * @param {String} str The path string to decode.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.decodePath = function (str) {\n      var instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n      var paramCount = [2, 2, 4, 6, 0];\n      var i = 0,\n        l = str.length;\n      var params = [];\n      var x = 0,\n        y = 0;\n      var base64 = Graphics.BASE_64;\n      while (i < l) {\n        var c = str.charAt(i);\n        var n = base64[c];\n        var fi = n >> 3; // highest order bits 1-3 code for operation.\n        var f = instructions[fi];\n        // check that we have a valid instruction & that the unused bits are empty:\n        if (!f || n & 3) {\n          throw \"bad path data (@\" + i + \"): \" + c;\n        }\n        var pl = paramCount[fi];\n        if (!fi) {\n          x = y = 0;\n        } // move operations reset the position.\n        params.length = 0;\n        i++;\n        var charCount = (n >> 2 & 1) + 2; // 4th header bit indicates number size for this operation.\n        for (var p = 0; p < pl; p++) {\n          var num = base64[str.charAt(i)];\n          var sign = num >> 5 ? -1 : 1;\n          num = (num & 31) << 6 | base64[str.charAt(i + 1)];\n          if (charCount == 3) {\n            num = num << 6 | base64[str.charAt(i + 2)];\n          }\n          num = sign * num / 10;\n          if (p % 2) {\n            x = num += x;\n          } else {\n            y = num += y;\n          }\n          params[p] = num;\n          i += charCount;\n        }\n        f.apply(this, params);\n      }\n      return this;\n    };\n\n    /**\n     * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n     * the existing store. This also affects `drawAsPath()`.\n     *\n     * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n     * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n     * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n     *\n     * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n     * the fill or stroke.\n     *\n     * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n     * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n     * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n     *\n     * \t// set up cache:\n     * \tmyShape.cache(0,0,500,500,scale);\n     *\n     * \t// when the user drags, draw a new line:\n     * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n     * \t// then draw it into the existing cache:\n     * \tmyShape.updateCache(\"source-over\");\n     * \t// store the new line, so it isn't redrawn next time:\n     * \tmyShape.store();\n     *\n     * \t// then, when the window resizes, we can re-render at a different scale:\n     * \t// first, unstore all our lines:\n     * \tmyShape.unstore();\n     * \t// then cache using the new scale:\n     * \tmyShape.cache(0,0,500,500,newScale);\n     * \t// finally, store the existing commands again:\n     * \tmyShape.store();\n     *\n     * @method store\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.store = function () {\n      this._updateInstructions(true);\n      this._storeIndex = this._instructions.length;\n      return this;\n    };\n\n    /**\n     * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n     * so that they will be executed in subsequent draw calls.\n     *\n     * @method unstore\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.unstore = function () {\n      this._storeIndex = 0;\n      return this;\n    };\n\n    /**\n     * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n     * @method clone\n     * @return {Graphics} A clone of the current Graphics instance.\n     **/\n    p.clone = function () {\n      var o = new Graphics();\n      o.command = this.command;\n      o._stroke = this._stroke;\n      o._strokeStyle = this._strokeStyle;\n      o._strokeDash = this._strokeDash;\n      o._strokeIgnoreScale = this._strokeIgnoreScale;\n      o._fill = this._fill;\n      o._instructions = this._instructions.slice();\n      o._commitIndex = this._commitIndex;\n      o._activeInstructions = this._activeInstructions.slice();\n      o._dirty = this._dirty;\n      o._storeIndex = this._storeIndex;\n      return o;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Graphics]\";\n    };\n\n    // tiny API:\n    /**\n     * Shortcut to moveTo.\n     * @method mt\n     * @param {Number} x The x coordinate the drawing point should move to.\n     * @param {Number} y The y coordinate the drawing point should move to.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n     * @chainable\n     * @protected\n     **/\n    p.mt = p.moveTo;\n\n    /**\n     * Shortcut to lineTo.\n     * @method lt\n     * @param {Number} x The x coordinate the drawing point should draw to.\n     * @param {Number} y The y coordinate the drawing point should draw to.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.lt = p.lineTo;\n\n    /**\n     * Shortcut to arcTo.\n     * @method at\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     * @param {Number} radius\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.at = p.arcTo;\n\n    /**\n     * Shortcut to bezierCurveTo.\n     * @method bt\n     * @param {Number} cp1x\n     * @param {Number} cp1y\n     * @param {Number} cp2x\n     * @param {Number} cp2y\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.bt = p.bezierCurveTo;\n\n    /**\n     * Shortcut to quadraticCurveTo / curveTo.\n     * @method qt\n     * @param {Number} cpx\n     * @param {Number} cpy\n     * @param {Number} x\n     * @param {Number} y\n     * @protected\n     * @chainable\n     **/\n    p.qt = p.quadraticCurveTo;\n\n    /**\n     * Shortcut to arc.\n     * @method a\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @param {Number} startAngle Measured in radians.\n     * @param {Number} endAngle Measured in radians.\n     * @param {Boolean} anticlockwise\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @protected\n     * @chainable\n     **/\n    p.a = p.arc;\n\n    /**\n     * Shortcut to rect.\n     * @method r\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w Width of the rectangle\n     * @param {Number} h Height of the rectangle\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.r = p.rect;\n\n    /**\n     * Shortcut to closePath.\n     * @method cp\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.cp = p.closePath;\n\n    /**\n     * Shortcut to clear.\n     * @method c\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.c = p.clear;\n\n    /**\n     * Shortcut to beginFill.\n     * @method f\n     * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n     * null will result in no fill.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.f = p.beginFill;\n\n    /**\n     * Shortcut to beginLinearGradientFill.\n     * @method lf\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n     * drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n     * the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n     * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.lf = p.beginLinearGradientFill;\n\n    /**\n     * Shortcut to beginRadialGradientFill.\n     * @method rf\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 Center position of the inner circle that defines the gradient.\n     * @param {Number} y0 Center position of the inner circle that defines the gradient.\n     * @param {Number} r0 Radius of the inner circle that defines the gradient.\n     * @param {Number} x1 Center position of the outer circle that defines the gradient.\n     * @param {Number} y1 Center position of the outer circle that defines the gradient.\n     * @param {Number} r1 Radius of the outer circle that defines the gradient.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.rf = p.beginRadialGradientFill;\n\n    /**\n     * Shortcut to beginBitmapFill.\n     * @method bf\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n     * as the pattern.\n     * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n     * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n     * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n     * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n     * will be applied relative to the parent transform.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.bf = p.beginBitmapFill;\n\n    /**\n     * Shortcut to endFill.\n     * @method ef\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.ef = p.endFill;\n\n    /**\n     * Shortcut to setStrokeStyle.\n     * @method ss\n     * @param {Number} thickness The width of the stroke.\n     * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n     * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n     * the tiny API.\n     * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n     * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n     * for use with the tiny API.\n     * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n     * controls at what point a mitered joint will be clipped.\n     * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n     * of active transformations.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.ss = p.setStrokeStyle;\n\n    /**\n     * Shortcut to setStrokeDash.\n     * @method sd\n     * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n     * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n     * Passing null or an empty array will clear any existing dash.\n     * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.sd = p.setStrokeDash;\n\n    /**\n     * Shortcut to beginStroke.\n     * @method s\n     * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n     * null will result in no stroke.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.s = p.beginStroke;\n\n    /**\n     * Shortcut to beginLinearGradientStroke.\n     * @method ls\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n     * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n     * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n     * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.ls = p.beginLinearGradientStroke;\n\n    /**\n     * Shortcut to beginRadialGradientStroke.\n     * @method rs\n     * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n     * a gradient drawing from red to blue.\n     * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n     * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n     * to 100%.\n     * @param {Number} x0 Center position of the inner circle that defines the gradient.\n     * @param {Number} y0 Center position of the inner circle that defines the gradient.\n     * @param {Number} r0 Radius of the inner circle that defines the gradient.\n     * @param {Number} x1 Center position of the outer circle that defines the gradient.\n     * @param {Number} y1 Center position of the outer circle that defines the gradient.\n     * @param {Number} r1 Radius of the outer circle that defines the gradient.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.rs = p.beginRadialGradientStroke;\n\n    /**\n     * Shortcut to beginBitmapStroke.\n     * @method bs\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n     * as the pattern.\n     * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n     * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.bs = p.beginBitmapStroke;\n\n    /**\n     * Shortcut to endStroke.\n     * @method es\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.es = p.endStroke;\n\n    /**\n     * Shortcut to drawRect.\n     * @method dr\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w Width of the rectangle\n     * @param {Number} h Height of the rectangle\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.dr = p.drawRect;\n\n    /**\n     * Shortcut to drawRoundRect.\n     * @method rr\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     * @param {Number} radius Corner radius.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.rr = p.drawRoundRect;\n\n    /**\n     * Shortcut to drawRoundRectComplex.\n     * @method rc\n     * @param {Number} x The horizontal coordinate to draw the round rect.\n     * @param {Number} y The vertical coordinate to draw the round rect.\n     * @param {Number} w The width of the round rect.\n     * @param {Number} h The height of the round rect.\n     * @param {Number} radiusTL Top left corner radius.\n     * @param {Number} radiusTR Top right corner radius.\n     * @param {Number} radiusBR Bottom right corner radius.\n     * @param {Number} radiusBL Bottom left corner radius.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.rc = p.drawRoundRectComplex;\n\n    /**\n     * Shortcut to drawCircle.\n     * @method dc\n     * @param {Number} x x coordinate center point of circle.\n     * @param {Number} y y coordinate center point of circle.\n     * @param {Number} radius Radius of circle.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.dc = p.drawCircle;\n\n    /**\n     * Shortcut to drawEllipse.\n     * @method de\n     * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n     * which draws from center.\n     * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n     * which draws from the center.\n     * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n     * number.\n     * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.de = p.drawEllipse;\n\n    /**\n     * Shortcut to drawPolyStar.\n     * @method dp\n     * @param {Number} x Position of the center of the shape.\n     * @param {Number} y Position of the center of the shape.\n     * @param {Number} radius The outer radius of the shape.\n     * @param {Number} sides The number of points on the star or sides on the polygon.\n     * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n     * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n     * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n     * directly to the right of the center.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.dp = p.drawPolyStar;\n\n    /**\n     * Shortcut to decodePath.\n     * @method p\n     * @param {String} str The path string to decode.\n     * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n     * @chainable\n     * @protected\n     **/\n    p.p = p.decodePath;\n\n    // private methods:\n    /**\n     * @method _updateInstructions\n     * @param commit\n     * @protected\n     **/\n    p._updateInstructions = function (commit) {\n      var instr = this._instructions,\n        active = this._activeInstructions,\n        commitIndex = this._commitIndex;\n      if (this._dirty && active.length) {\n        instr.length = commitIndex; // remove old, uncommitted commands\n        instr.push(Graphics.beginCmd);\n        var l = active.length,\n          ll = instr.length;\n        instr.length = ll + l;\n        for (var i = 0; i < l; i++) {\n          instr[i + ll] = active[i];\n        }\n        if (this._fill) {\n          instr.push(this._fill);\n        }\n        if (this._stroke) {\n          // doesn't need to be re-applied if it hasn't changed.\n          if (this._strokeDash !== this._oldStrokeDash) {\n            this._oldStrokeDash = this._strokeDash;\n            instr.push(this._strokeDash);\n          }\n          if (this._strokeStyle !== this._oldStrokeStyle) {\n            this._oldStrokeStyle = this._strokeStyle;\n            instr.push(this._strokeStyle);\n          }\n          instr.push(this._stroke);\n        }\n        this._dirty = false;\n      }\n      if (commit) {\n        active.length = 0;\n        this._commitIndex = instr.length;\n      }\n    };\n\n    /**\n     * @method _setFill\n     * @param fill\n     * @protected\n     **/\n    p._setFill = function (fill) {\n      this._updateInstructions(true);\n      this.command = this._fill = fill;\n      return this;\n    };\n\n    /**\n     * @method _setStroke\n     * @param stroke\n     * @protected\n     **/\n    p._setStroke = function (stroke) {\n      this._updateInstructions(true);\n      if (this.command = this._stroke = stroke) {\n        stroke.ignoreScale = this._strokeIgnoreScale;\n      }\n      return this;\n    };\n\n    // Command Objects:\n    /**\n     * @namespace Graphics\n     */\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class LineTo\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.LineTo = function (x, y) {\n      this.x = x;\n      this.y = y;\n    }).prototype.exec = function (ctx) {\n      ctx.lineTo(this.x, this.y);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class MoveTo\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    (G.MoveTo = function (x, y) {\n      this.x = x;\n      this.y = y;\n    }).prototype.exec = function (ctx) {\n      ctx.moveTo(this.x, this.y);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class ArcTo\n     * @constructor\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     * @param {Number} radius\n     **/\n    /**\n     * @property x1\n     * @type Number\n     */\n    /**\n     * @property y1\n     * @type Number\n     */\n    /**\n     * @property x2\n     * @type Number\n     */\n    /**\n     * @property y2\n     * @type Number\n     */\n    /**\n     * @property radius\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.ArcTo = function (x1, y1, x2, y2, radius) {\n      this.x1 = x1;\n      this.y1 = y1;\n      this.x2 = x2;\n      this.y2 = y2;\n      this.radius = radius;\n    }).prototype.exec = function (ctx) {\n      ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Arc\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @param {Number} startAngle\n     * @param {Number} endAngle\n     * @param {Number} anticlockwise\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property radius\n     * @type Number\n     */\n    /**\n     * @property startAngle\n     * @type Number\n     */\n    /**\n     * @property endAngle\n     * @type Number\n     */\n    /**\n     * @property anticlockwise\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.Arc = function (x, y, radius, startAngle, endAngle, anticlockwise) {\n      this.x = x;\n      this.y = y;\n      this.radius = radius;\n      this.startAngle = startAngle;\n      this.endAngle = endAngle;\n      this.anticlockwise = !!anticlockwise;\n    }).prototype.exec = function (ctx) {\n      ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class QuadraticCurveTo\n     * @constructor\n     * @param {Number} cpx\n     * @param {Number} cpy\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    /**\n     * @property cpx\n     * @type Number\n     */\n    /**\n     * @property cpy\n     * @type Number\n     */\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.QuadraticCurveTo = function (cpx, cpy, x, y) {\n      this.cpx = cpx;\n      this.cpy = cpy;\n      this.x = x;\n      this.y = y;\n    }).prototype.exec = function (ctx) {\n      ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class BezierCurveTo\n     * @constructor\n     * @param {Number} cp1x\n     * @param {Number} cp1y\n     * @param {Number} cp2x\n     * @param {Number} cp2y\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    /**\n     * @property cp1x\n     * @type Number\n     */\n    /**\n     * @property cp1y\n     * @type Number\n     */\n    /**\n     * @property cp2x\n     * @type Number\n     */\n    /**\n     * @property cp2y\n     * @type Number\n     */\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.BezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n      this.cp1x = cp1x;\n      this.cp1y = cp1y;\n      this.cp2x = cp2x;\n      this.cp2y = cp2y;\n      this.x = x;\n      this.y = y;\n    }).prototype.exec = function (ctx) {\n      ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Rect\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property w\n     * @type Number\n     */\n    /**\n     * @property h\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.Rect = function (x, y, w, h) {\n      this.x = x;\n      this.y = y;\n      this.w = w;\n      this.h = h;\n    }).prototype.exec = function (ctx) {\n      ctx.rect(this.x, this.y, this.w, this.h);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class ClosePath\n     * @constructor\n     **/\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.ClosePath = function () {}).prototype.exec = function (ctx) {\n      ctx.closePath();\n    };\n\n    /**\n     * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class BeginPath\n     * @constructor\n     **/\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.BeginPath = function () {}).prototype.exec = function (ctx) {\n      ctx.beginPath();\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Fill\n     * @constructor\n     * @param {Object} style A valid Context2D fillStyle.\n     * @param {Matrix2D} matrix\n     **/\n    /**\n     * A valid Context2D fillStyle.\n     * @property style\n     * @type Object\n     */\n    /**\n     * @property matrix\n     * @type Matrix2D\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    p = (G.Fill = function (style, matrix) {\n      this.style = style;\n      this.matrix = matrix;\n    }).prototype;\n    p.exec = function (ctx) {\n      if (!this.style) {\n        return;\n      }\n      ctx.fillStyle = this.style;\n      var mtx = this.matrix;\n      if (mtx) {\n        ctx.save();\n        ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n      }\n      ctx.fill();\n      if (mtx) {\n        ctx.restore();\n      }\n    };\n    /**\n     * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n     * @method linearGradient\n     * @param {Array} colors\n     *\n     * @param {Array} ratios\n     * @param {Number} x0\n     * @param {Number} y0\n     * @param {Number} x1\n     * @param {Number} y1\n     * @return {Fill} Returns this Fill object for chaining or assignment.\n     */\n    p.linearGradient = function (colors, ratios, x0, y0, x1, y1) {\n      var o = this.style = Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n      for (var i = 0, l = colors.length; i < l; i++) {\n        o.addColorStop(ratios[i], colors[i]);\n      }\n      o.props = {\n        colors: colors,\n        ratios: ratios,\n        x0: x0,\n        y0: y0,\n        x1: x1,\n        y1: y1,\n        type: \"linear\"\n      };\n      return this;\n    };\n    /**\n     * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n     * @method radialGradient\n     * @param {Array} colors\n     * @param {Array} ratios\n     * @param {Number} x0\n     * @param {Number} y0\n     * @param {Number} r0\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} r1\n     * @return {Fill} Returns this Fill object for chaining or assignment.\n     */\n    p.radialGradient = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n      var o = this.style = Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n      for (var i = 0, l = colors.length; i < l; i++) {\n        o.addColorStop(ratios[i], colors[i]);\n      }\n      o.props = {\n        colors: colors,\n        ratios: ratios,\n        x0: x0,\n        y0: y0,\n        r0: r0,\n        x1: x1,\n        y1: y1,\n        r1: r1,\n        type: \"radial\"\n      };\n      return this;\n    };\n    /**\n     * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n     * @method bitmap\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n     * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n     * @return {Fill} Returns this Fill object for chaining or assignment.\n     */\n    p.bitmap = function (image, repetition) {\n      if (image.naturalWidth || image.getContext || image.readyState >= 2) {\n        var o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n        o.props = {\n          image: image,\n          repetition: repetition,\n          type: \"bitmap\"\n        };\n      }\n      return this;\n    };\n    p.path = false;\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Stroke\n     * @constructor\n     * @param {Object} style A valid Context2D fillStyle.\n     * @param {Boolean} ignoreScale\n     **/\n    /**\n     * A valid Context2D strokeStyle.\n     * @property style\n     * @type Object\n     */\n    /**\n     * @property ignoreScale\n     * @type Boolean\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    p = (G.Stroke = function (style, ignoreScale) {\n      this.style = style;\n      this.ignoreScale = ignoreScale;\n    }).prototype;\n    p.exec = function (ctx) {\n      if (!this.style) {\n        return;\n      }\n      ctx.strokeStyle = this.style;\n      if (this.ignoreScale) {\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n      }\n      ctx.stroke();\n      if (this.ignoreScale) {\n        ctx.restore();\n      }\n    };\n    /**\n     * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n     * @method linearGradient\n     * @param {Array} colors\n     * @param {Array} ratios\n     * @param {Number} x0\n     * @param {Number} y0\n     * @param {Number} x1\n     * @param {Number} y1\n     * @return {Fill} Returns this Stroke object for chaining or assignment.\n     */\n    p.linearGradient = G.Fill.prototype.linearGradient;\n    /**\n     * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n     * @method radialGradient\n     * @param {Array} colors\n     * @param {Array} ratios\n     * @param {Number} x0\n     * @param {Number} y0\n     * @param {Number} r0\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} r1\n     * @return {Fill} Returns this Stroke object for chaining or assignment.\n     */\n    p.radialGradient = G.Fill.prototype.radialGradient;\n    /**\n     * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n     * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n     * @method bitmap\n     * @param {HTMLImageElement} image\n     * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n     * @return {Fill} Returns this Stroke object for chaining or assignment.\n     */\n    p.bitmap = G.Fill.prototype.bitmap;\n    p.path = false;\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class StrokeStyle\n     * @constructor\n     * @param {Number} width\n     * @param {String} [caps=butt]\n     * @param {String} [joints=miter]\n     * @param {Number} [miterLimit=10]\n     * @param {Boolean} [ignoreScale=false]\n     **/\n    /**\n     * @property width\n     * @type Number\n     */\n    /**\n     * One of: butt, round, square\n     * @property caps\n     * @type String\n     */\n    /**\n     * One of: round, bevel, miter\n     * @property joints\n     * @type String\n     */\n    /**\n     * @property miterLimit\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    p = (G.StrokeStyle = function (width, caps, joints, miterLimit, ignoreScale) {\n      this.width = width;\n      this.caps = caps;\n      this.joints = joints;\n      this.miterLimit = miterLimit;\n      this.ignoreScale = ignoreScale;\n    }).prototype;\n    p.exec = function (ctx) {\n      ctx.lineWidth = this.width == null ? \"1\" : this.width;\n      ctx.lineCap = this.caps == null ? \"butt\" : isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps];\n      ctx.lineJoin = this.joints == null ? \"miter\" : isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints];\n      ctx.miterLimit = this.miterLimit == null ? \"10\" : this.miterLimit;\n      ctx.ignoreScale = this.ignoreScale == null ? false : this.ignoreScale;\n    };\n    p.path = false;\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class StrokeDash\n     * @constructor\n     * @param {Array} [segments]\n     * @param {Number} [offset=0]\n     **/\n    /**\n     * @property segments\n     * @type Array\n     */\n    /**\n     * @property offset\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.StrokeDash = function (segments, offset) {\n      this.segments = segments;\n      this.offset = offset || 0;\n    }).prototype.exec = function (ctx) {\n      if (ctx.setLineDash) {\n        // feature detection.\n        ctx.setLineDash(this.segments || G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n        ctx.lineDashOffset = this.offset || 0;\n      }\n    };\n    /**\n     * The default value for segments (ie. no dash).\n     * @property EMPTY_SEGMENTS\n     * @static\n     * @final\n     * @readonly\n     * @protected\n     * @type {Array}\n     **/\n    G.StrokeDash.EMPTY_SEGMENTS = [];\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class RoundRect\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     * @param {Number} radiusTL\n     * @param {Number} radiusTR\n     * @param {Number} radiusBR\n     * @param {Number} radiusBL\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property w\n     * @type Number\n     */\n    /**\n     * @property h\n     * @type Number\n     */\n    /**\n     * @property radiusTL\n     * @type Number\n     */\n    /**\n     * @property radiusTR\n     * @type Number\n     */\n    /**\n     * @property radiusBR\n     * @type Number\n     */\n    /**\n     * @property radiusBL\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.RoundRect = function (x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n      this.x = x;\n      this.y = y;\n      this.w = w;\n      this.h = h;\n      this.radiusTL = radiusTL;\n      this.radiusTR = radiusTR;\n      this.radiusBR = radiusBR;\n      this.radiusBL = radiusBL;\n    }).prototype.exec = function (ctx) {\n      var max = (w < h ? w : h) / 2;\n      var mTL = 0,\n        mTR = 0,\n        mBR = 0,\n        mBL = 0;\n      var x = this.x,\n        y = this.y,\n        w = this.w,\n        h = this.h;\n      var rTL = this.radiusTL,\n        rTR = this.radiusTR,\n        rBR = this.radiusBR,\n        rBL = this.radiusBL;\n      if (rTL < 0) {\n        rTL *= mTL = -1;\n      }\n      if (rTL > max) {\n        rTL = max;\n      }\n      if (rTR < 0) {\n        rTR *= mTR = -1;\n      }\n      if (rTR > max) {\n        rTR = max;\n      }\n      if (rBR < 0) {\n        rBR *= mBR = -1;\n      }\n      if (rBR > max) {\n        rBR = max;\n      }\n      if (rBL < 0) {\n        rBL *= mBL = -1;\n      }\n      if (rBL > max) {\n        rBL = max;\n      }\n      ctx.moveTo(x + w - rTR, y);\n      ctx.arcTo(x + w + rTR * mTR, y - rTR * mTR, x + w, y + rTR, rTR);\n      ctx.lineTo(x + w, y + h - rBR);\n      ctx.arcTo(x + w + rBR * mBR, y + h + rBR * mBR, x + w - rBR, y + h, rBR);\n      ctx.lineTo(x + rBL, y + h);\n      ctx.arcTo(x - rBL * mBL, y + h + rBL * mBL, x, y + h - rBL, rBL);\n      ctx.lineTo(x, y + rTL);\n      ctx.arcTo(x - rTL * mTL, y - rTL * mTL, x + rTL, y, rTL);\n      ctx.closePath();\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Circle\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property radius\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.Circle = function (x, y, radius) {\n      this.x = x;\n      this.y = y;\n      this.radius = radius;\n    }).prototype.exec = function (ctx) {\n      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class Ellipse\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property w\n     * @type Number\n     */\n    /**\n     * @property h\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.Ellipse = function (x, y, w, h) {\n      this.x = x;\n      this.y = y;\n      this.w = w;\n      this.h = h;\n    }).prototype.exec = function (ctx) {\n      var x = this.x,\n        y = this.y;\n      var w = this.w,\n        h = this.h;\n      var k = 0.5522848;\n      var ox = w / 2 * k;\n      var oy = h / 2 * k;\n      var xe = x + w;\n      var ye = y + h;\n      var xm = x + w / 2;\n      var ym = y + h / 2;\n      ctx.moveTo(x, ym);\n      ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n      ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n      ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n      ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n    };\n\n    /**\n     * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n     * @class PolyStar\n     * @constructor\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @param {Number} sides\n     * @param {Number} pointSize\n     * @param {Number} angle\n     **/\n    /**\n     * @property x\n     * @type Number\n     */\n    /**\n     * @property y\n     * @type Number\n     */\n    /**\n     * @property radius\n     * @type Number\n     */\n    /**\n     * @property sides\n     * @type Number\n     */\n    /**\n     * @property pointSize\n     * @type Number\n     */\n    /**\n     * @property angle\n     * @type Number\n     */\n    /**\n     * Execute the Graphics command in the provided Canvas context.\n     * @method exec\n     * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n     */\n    (G.PolyStar = function (x, y, radius, sides, pointSize, angle) {\n      this.x = x;\n      this.y = y;\n      this.radius = radius;\n      this.sides = sides;\n      this.pointSize = pointSize;\n      this.angle = angle;\n    }).prototype.exec = function (ctx) {\n      var x = this.x,\n        y = this.y;\n      var radius = this.radius;\n      var angle = (this.angle || 0) / 180 * Math.PI;\n      var sides = this.sides;\n      var ps = 1 - (this.pointSize || 0);\n      var a = Math.PI / sides;\n      ctx.moveTo(x + Math.cos(angle) * radius, y + Math.sin(angle) * radius);\n      for (var i = 0; i < sides; i++) {\n        angle += a;\n        if (ps != 1) {\n          ctx.lineTo(x + Math.cos(angle) * radius * ps, y + Math.sin(angle) * radius * ps);\n        }\n        angle += a;\n        ctx.lineTo(x + Math.cos(angle) * radius, y + Math.sin(angle) * radius);\n      }\n      ctx.closePath();\n    };\n\n    // docced above.\n    Graphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n    createjs.Graphics = Graphics;\n  })();\n\n  //##############################################################################\n  // DisplayObject.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n     * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n     * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n     * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n     * caching, and mouse handlers.\n     * @class DisplayObject\n     * @extends EventDispatcher\n     * @constructor\n     **/\n    function DisplayObject() {\n      this.EventDispatcher_constructor();\n\n      // public properties:\n      /**\n       * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n       * @property alpha\n       * @type {Number}\n       * @default 1\n       **/\n      this.alpha = 1;\n\n      /**\n       * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\n       * for more information.\n       * @property cacheCanvas\n       * @type {HTMLCanvasElement | Object}\n       * @default null\n       * @readonly\n       **/\n      this.cacheCanvas = null;\n\n      /**\n       * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n       * determine if the cache has changed since a previous check.\n       * @property cacheID\n       * @type {Number}\n       * @default 0\n       */\n      this.cacheID = 0;\n\n      /**\n       * Unique ID for this display object. Makes display objects easier for some uses.\n       * @property id\n       * @type {Number}\n       * @default -1\n       **/\n      this.id = createjs.UID.get();\n\n      /**\n       * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n       * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n       * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n       * method from returning the child.\n       *\n       * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n       * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n       * provided in the next release of EaselJS.\n       * @property mouseEnabled\n       * @type {Boolean}\n       * @default true\n       **/\n      this.mouseEnabled = true;\n\n      /**\n       * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n       * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n       * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n       * @property tickEnabled\n       * @type Boolean\n       * @default true\n       **/\n      this.tickEnabled = true;\n\n      /**\n       * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n       * debugging.\n       * @property name\n       * @type {String}\n       * @default null\n       **/\n      this.name = null;\n\n      /**\n       * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n       * contains this display object, or null if it has not been added\n       * to one.\n       * @property parent\n       * @final\n       * @type {Container}\n       * @default null\n       * @readonly\n       **/\n      this.parent = null;\n\n      /**\n       * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n       * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n       * @property regX\n       * @type {Number}\n       * @default 0\n       **/\n      this.regX = 0;\n\n      /**\n       * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n       * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n       * @property regY\n       * @type {Number}\n       * @default 0\n       **/\n      this.regY = 0;\n\n      /**\n       * The rotation in degrees for this display object.\n       * @property rotation\n       * @type {Number}\n       * @default 0\n       **/\n      this.rotation = 0;\n\n      /**\n       * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n       * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n       * @property scaleX\n       * @type {Number}\n       * @default 1\n       **/\n      this.scaleX = 1;\n\n      /**\n       * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n       * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n       * @property scaleY\n       * @type {Number}\n       * @default 1\n       **/\n      this.scaleY = 1;\n\n      /**\n       * The factor to skew this display object horizontally.\n       * @property skewX\n       * @type {Number}\n       * @default 0\n       **/\n      this.skewX = 0;\n\n      /**\n       * The factor to skew this display object vertically.\n       * @property skewY\n       * @type {Number}\n       * @default 0\n       **/\n      this.skewY = 0;\n\n      /**\n       * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n       * null, this property is inherited from the parent container.\n       * @property shadow\n       * @type {Shadow}\n       * @default null\n       **/\n      this.shadow = null;\n\n      /**\n       * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n       * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n       * @property visible\n       * @type {Boolean}\n       * @default true\n       **/\n      this.visible = true;\n\n      /**\n       * The x (horizontal) position of the display object, relative to its parent.\n       * @property x\n       * @type {Number}\n       * @default 0\n       **/\n      this.x = 0;\n\n      /** The y (vertical) position of the display object, relative to its parent.\n       * @property y\n       * @type {Number}\n       * @default 0\n       **/\n      this.y = 0;\n\n      /**\n       * If set, defines the transformation for this display object, overriding all other transformation properties\n       * (x, y, rotation, scale, skew).\n       * @property transformMatrix\n       * @type {Matrix2D}\n       * @default null\n       **/\n      this.transformMatrix = null;\n\n      /**\n       * The composite operation indicates how the pixels of this display object will be composited with the elements\n       * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n       * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n       * whatwg spec on compositing</a>.\n       * @property compositeOperation\n       * @type {String}\n       * @default null\n       **/\n      this.compositeOperation = null;\n\n      /**\n       * Indicates whether the display object should be drawn to a whole pixel when\n       * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n       * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n       * @property snapToPixel\n       * @type {Boolean}\n       * @default true\n       **/\n      this.snapToPixel = true;\n\n      /**\n       * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n       * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n       * cached.\n       * @property filters\n       * @type {Array}\n       * @default null\n       **/\n      this.filters = null;\n\n      /**\n       * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n       * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n       * @property mask\n       * @type {Shape}\n       * @default null\n       */\n      this.mask = null;\n\n      /**\n       * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n       * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n       * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n       * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n       * ancestors (parents).\n       * \n       * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n       * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n       *\n       * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n       * @property hitArea\n       * @type {DisplayObject}\n       * @default null\n       */\n      this.hitArea = null;\n\n      /**\n       * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n       * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n       * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n       * @property cursor\n       * @type {String}\n       * @default null\n       */\n      this.cursor = null;\n\n      // private properties:\n      /**\n       * @property _cacheOffsetX\n       * @protected\n       * @type {Number}\n       * @default 0\n       **/\n      this._cacheOffsetX = 0;\n\n      /**\n       * @property _cacheOffsetY\n       * @protected\n       * @type {Number}\n       * @default 0\n       **/\n      this._cacheOffsetY = 0;\n\n      /**\n       * @property _filterOffsetX\n       * @protected\n       * @type {Number}\n       * @default 0\n       **/\n      this._filterOffsetX = 0;\n\n      /**\n       * @property _filterOffsetY\n       * @protected\n       * @type {Number}\n       * @default 0\n       **/\n      this._filterOffsetY = 0;\n\n      /**\n       * @property _cacheScale\n       * @protected\n       * @type {Number}\n       * @default 1\n       **/\n      this._cacheScale = 1;\n\n      /**\n      * @property _cacheDataURLID\n      * @protected\n      * @type {Number}\n      * @default 0\n      */\n      this._cacheDataURLID = 0;\n\n      /**\n      * @property _cacheDataURL\n      * @protected\n      * @type {String}\n      * @default null\n      */\n      this._cacheDataURL = null;\n\n      /**\n       * @property _props\n       * @protected\n       * @type {DisplayObject}\n       * @default null\n       **/\n      this._props = new createjs.DisplayProps();\n\n      /**\n       * @property _rectangle\n       * @protected\n       * @type {Rectangle}\n       * @default null\n       **/\n      this._rectangle = new createjs.Rectangle();\n\n      /**\n       * @property _bounds\n       * @protected\n       * @type {Rectangle}\n       * @default null\n       **/\n      this._bounds = null;\n    }\n    var p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // static properties:\n    /**\n     * Listing of mouse event names. Used in _hasMouseEventListener.\n     * @property _MOUSE_EVENTS\n     * @protected\n     * @static\n     * @type {Array}\n     **/\n    DisplayObject._MOUSE_EVENTS = [\"click\", \"dblclick\", \"mousedown\", \"mouseout\", \"mouseover\", \"pressmove\", \"pressup\", \"rollout\", \"rollover\"];\n\n    /**\n     * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n     * with cross domain content.\n     * @property suppressCrossDomainErrors\n     * @static\n     * @type {Boolean}\n     * @default false\n     **/\n    DisplayObject.suppressCrossDomainErrors = false;\n\n    /**\n     * @property _snapToPixelEnabled\n     * @protected\n     * @static\n     * @type {Boolean}\n     * @default false\n     **/\n    DisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n    /**\n     * @property _hitTestCanvas\n     * @type {HTMLCanvasElement | Object}\n     * @static\n     * @protected\n     **/\n    /**\n     * @property _hitTestContext\n     * @type {CanvasRenderingContext2D}\n     * @static\n     * @protected\n     **/\n    var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\n    if (canvas.getContext) {\n      DisplayObject._hitTestCanvas = canvas;\n      DisplayObject._hitTestContext = canvas.getContext(\"2d\");\n      canvas.width = canvas.height = 1;\n    }\n\n    /**\n     * @property _nextCacheID\n     * @type {Number}\n     * @static\n     * @protected\n     **/\n    DisplayObject._nextCacheID = 1;\n\n    // events:\n    /**\n     * Dispatched when the user presses their left mouse button over the display object. See the \n     * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event mousedown\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event click\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user double clicks their left mouse button over this display object.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event dblclick\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user's mouse enters this display object. This event must be enabled using \n     * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event mouseover\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n     * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event mouseout\n     * @since 0.6.0\n     */\n\n    /**\n     * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n     * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n     * aggregate of their content.\n     * \n     * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n     * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n     * myContainer, two events would be received, each targeting a child element:<OL>\n     * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n     * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n     * </OL>\n     * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n     * the aggregate myContainer content (target=myContainer).\n     * \n     * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event rollover\n     * @since 0.7.0\n     */\n\n    /**\n     * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n     * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n     * aggregate of their content.\n     * \n     * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n     * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n     * on myContainer, two events would be received, each targeting a child element:<OL>\n     * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n     * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n     * </OL>\n     * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n     * the aggregate myContainer content (target=myContainer).\n     * \n     * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event rollout\n     * @since 0.7.0\n     */\n\n    /**\n     * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n     * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n     * useful for dragging and similar operations.\n     * @event pressmove\n     * @since 0.7.0\n     */\n\n    /**\n     * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n     * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n     * operations.\n     * @event pressup\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched when the display object is added to a parent container.\n     * @event added\n     */\n\n    /**\n     * Dispatched when the display object is removed from its parent container.\n     * @event removed\n     */\n\n    /**\n     * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n     * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n     * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n     * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n     * dispatched on their parent.\n     * @event tick\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n     *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n     * @since 0.6.0\n     */\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n     * @method getStage\n     * @return {Stage}\n     * @deprecated\n     **/\n    p.getStage = function () {\n      // uses dynamic access to avoid circular dependencies;\n      var o = this,\n        _Stage = createjs[\"Stage\"];\n      while (o.parent) {\n        o = o.parent;\n      }\n      if (o instanceof _Stage) {\n        return o;\n      }\n      return null;\n    };\n\n    /**\n     * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n     * @property stage\n     * @type {Stage}\n     * @readonly\n     **/\n    try {\n      Object.defineProperties(p, {\n        stage: {\n          get: p.getStage\n        }\n      });\n    } catch (e) {}\n\n    // public methods:\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n     * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n     * @return {Boolean}\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      var cacheCanvas = this.cacheCanvas;\n      if (ignoreCache || !cacheCanvas) {\n        return false;\n      }\n      var scale = this._cacheScale;\n      ctx.drawImage(cacheCanvas, this._cacheOffsetX + this._filterOffsetX, this._cacheOffsetY + this._filterOffsetY, cacheCanvas.width / scale, cacheCanvas.height / scale);\n      return true;\n    };\n\n    /**\n     * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n     * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n     * @method updateContext\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n     **/\n    p.updateContext = function (ctx) {\n      var o = this,\n        mask = o.mask,\n        mtx = o._props.matrix;\n      if (mask && mask.graphics && !mask.graphics.isEmpty()) {\n        mask.getMatrix(mtx);\n        ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n        mask.graphics.drawAsPath(ctx);\n        ctx.clip();\n        mtx.invert();\n        ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n      }\n      this.getMatrix(mtx);\n      var tx = mtx.tx,\n        ty = mtx.ty;\n      if (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n        tx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n        ty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n      }\n      ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, tx, ty);\n      ctx.globalAlpha *= o.alpha;\n      if (o.compositeOperation) {\n        ctx.globalCompositeOperation = o.compositeOperation;\n      }\n      if (o.shadow) {\n        this._applyShadow(ctx, o.shadow);\n      }\n    };\n\n    /**\n     * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\n     * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n     * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n     * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\n     * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\n     * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\n     * using this display object's coordinates.\n     *\n     * <h4>Example</h4>\n     * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n     *\n     *      var shape = new createjs.Shape();\n     *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n     *      myShape.cache(-25, -25, 50, 50);\n     *\n     * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\n     * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\n     * \n     * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\n     * will add padding to the canvas dimensions.\n     *\n     * @method cache\n     * @param {Number} x The x coordinate origin for the cache region.\n     * @param {Number} y The y coordinate origin for the cache region.\n     * @param {Number} width The width of the cache region.\n     * @param {Number} height The height of the cache region.\n     * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n     * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n     * \tcached elements with greater fidelity. Default is 1.\n     **/\n    p.cache = function (x, y, width, height, scale) {\n      // draw to canvas.\n      scale = scale || 1;\n      if (!this.cacheCanvas) {\n        this.cacheCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n      }\n      this._cacheWidth = width;\n      this._cacheHeight = height;\n      this._cacheOffsetX = x;\n      this._cacheOffsetY = y;\n      this._cacheScale = scale;\n      this.updateCache();\n    };\n\n    /**\n     * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n     * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n     * will be drawn over the existing cache using the specified compositeOperation.\n     *\n     * <h4>Example</h4>\n     * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n     * will be drawn on top of the old one.\n     *\n     *      // Not shown: Creating the shape, and caching it.\n     *      shapeInstance.clear();\n     *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n     *      shapeInstance.updateCache();\n     *\n     * @method updateCache\n     * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n     * whatwg spec on compositing</a>.\n     **/\n    p.updateCache = function (compositeOperation) {\n      var cacheCanvas = this.cacheCanvas;\n      if (!cacheCanvas) {\n        throw \"cache() must be called before updateCache()\";\n      }\n      var scale = this._cacheScale,\n        offX = this._cacheOffsetX * scale,\n        offY = this._cacheOffsetY * scale;\n      var w = this._cacheWidth,\n        h = this._cacheHeight,\n        ctx = cacheCanvas.getContext(\"2d\");\n      var fBounds = this._getFilterBounds();\n      offX += this._filterOffsetX = fBounds.x;\n      offY += this._filterOffsetY = fBounds.y;\n      w = Math.ceil(w * scale) + fBounds.width;\n      h = Math.ceil(h * scale) + fBounds.height;\n      if (w != cacheCanvas.width || h != cacheCanvas.height) {\n        // TODO: it would be nice to preserve the content if there is a compositeOperation.\n        cacheCanvas.width = w;\n        cacheCanvas.height = h;\n      } else if (!compositeOperation) {\n        ctx.clearRect(0, 0, w + 1, h + 1);\n      }\n      ctx.save();\n      ctx.globalCompositeOperation = compositeOperation;\n      ctx.setTransform(scale, 0, 0, scale, -offX, -offY);\n      this.draw(ctx, true);\n      // TODO: filters and cache scale don't play well together at present.\n      this._applyFilters();\n      ctx.restore();\n      this.cacheID = DisplayObject._nextCacheID++;\n    };\n\n    /**\n     * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n     * @method uncache\n     **/\n    p.uncache = function () {\n      this._cacheDataURL = this.cacheCanvas = null;\n      this.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\n      this._cacheScale = 1;\n    };\n\n    /**\n     * Returns a data URL for the cache, or null if this display object is not cached.\n     * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\n     * @method getCacheDataURL\n     * @return {String} The image data url for the cache.\n     **/\n    p.getCacheDataURL = function () {\n      if (!this.cacheCanvas) {\n        return null;\n      }\n      if (this.cacheID != this._cacheDataURLID) {\n        this._cacheDataURL = this.cacheCanvas.toDataURL();\n      }\n      return this._cacheDataURL;\n    };\n\n    /**\n     * Transforms the specified x and y position from the coordinate space of the display object\n     * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n     * over a specific point on a nested display object. Returns a Point instance with x and y properties\n     * correlating to the transformed coordinates on the stage.\n     *\n     * <h4>Example</h4>\n     *\n     *      displayObject.x = 300;\n     *      displayObject.y = 200;\n     *      stage.addChild(displayObject);\n     *      var point = displayObject.localToGlobal(100, 100);\n     *      // Results in x=400, y=300\n     *\n     * @method localToGlobal\n     * @param {Number} x The x position in the source display object to transform.\n     * @param {Number} y The y position in the source display object to transform.\n     * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n     * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n     * on the stage.\n     **/\n    p.localToGlobal = function (x, y, pt) {\n      return this.getConcatenatedMatrix(this._props.matrix).transformPoint(x, y, pt || new createjs.Point());\n    };\n\n    /**\n     * Transforms the specified x and y position from the global (stage) coordinate space to the\n     * coordinate space of the display object. For example, this could be used to determine\n     * the current mouse position within the display object. Returns a Point instance with x and y properties\n     * correlating to the transformed position in the display object's coordinate space.\n     *\n     * <h4>Example</h4>\n     *\n     *      displayObject.x = 300;\n     *      displayObject.y = 200;\n     *      stage.addChild(displayObject);\n     *      var point = displayObject.globalToLocal(100, 100);\n     *      // Results in x=-200, y=-100\n     *\n     * @method globalToLocal\n     * @param {Number} x The x position on the stage to transform.\n     * @param {Number} y The y position on the stage to transform.\n     * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n     * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n     * display object's coordinate space.\n     **/\n    p.globalToLocal = function (x, y, pt) {\n      return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x, y, pt || new createjs.Point());\n    };\n\n    /**\n     * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n     * space of the target display object. Returns a Point instance with x and y properties correlating to the\n     * transformed position in the target's coordinate space. Effectively the same as using the following code with\n     * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n     *\n     *      var pt = this.localToGlobal(x, y);\n     *      pt = target.globalToLocal(pt.x, pt.y);\n     *\n     * @method localToLocal\n     * @param {Number} x The x position in the source display object to transform.\n     * @param {Number} y The y position on the source display object to transform.\n     * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n     * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n     * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n     * in the target's coordinate space.\n     **/\n    p.localToLocal = function (x, y, target, pt) {\n      pt = this.localToGlobal(x, y, pt);\n      return target.globalToLocal(pt.x, pt.y, pt);\n    };\n\n    /**\n     * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n     * Omitted parameters will have the default value set.\n     *\n     * <h4>Example</h4>\n     *\n     *      displayObject.setTransform(100, 100, 2, 2);\n     *\n     * @method setTransform\n     * @param {Number} [x=0] The horizontal translation (x position) in pixels\n     * @param {Number} [y=0] The vertical translation (y position) in pixels\n     * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n     * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n     * @param {Number} [rotation=0] The rotation, in degrees\n     * @param {Number} [skewX=0] The horizontal skew factor\n     * @param {Number} [skewY=0] The vertical skew factor\n     * @param {Number} [regX=0] The horizontal registration point in pixels\n     * @param {Number} [regY=0] The vertical registration point in pixels\n     * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n     * @chainable\n    */\n    p.setTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n      this.x = x || 0;\n      this.y = y || 0;\n      this.scaleX = scaleX == null ? 1 : scaleX;\n      this.scaleY = scaleY == null ? 1 : scaleY;\n      this.rotation = rotation || 0;\n      this.skewX = skewX || 0;\n      this.skewY = skewY || 0;\n      this.regX = regX || 0;\n      this.regY = regY || 0;\n      return this;\n    };\n\n    /**\n     * Returns a matrix based on this object's current transform.\n     * @method getMatrix\n     * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n     * Matrix object is returned.\n     * @return {Matrix2D} A matrix representing this display object's transform.\n     **/\n    p.getMatrix = function (matrix) {\n      var o = this,\n        mtx = matrix && matrix.identity() || new createjs.Matrix2D();\n      return o.transformMatrix ? mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n    };\n\n    /**\n     * Generates a Matrix2D object representing the combined transform of the display object and all of its\n     * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n     * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n     * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n     * @method getConcatenatedMatrix\n     * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n     * If null, a new Matrix2D object is returned.\n     * @return {Matrix2D} The combined matrix.\n     **/\n    p.getConcatenatedMatrix = function (matrix) {\n      var o = this,\n        mtx = this.getMatrix(matrix);\n      while (o = o.parent) {\n        mtx.prependMatrix(o.getMatrix(o._props.matrix));\n      }\n      return mtx;\n    };\n\n    /**\n     * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n     * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n     * @method getConcatenatedDisplayProps\n     * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n     * If null, a new DisplayProps object is returned.\n     * @return {DisplayProps} The combined display properties.\n     **/\n    p.getConcatenatedDisplayProps = function (props) {\n      props = props ? props.identity() : new createjs.DisplayProps();\n      var o = this,\n        mtx = o.getMatrix(props.matrix);\n      do {\n        props.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\n        // we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n        // this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n        if (o != this) {\n          mtx.prependMatrix(o.getMatrix(o._props.matrix));\n        }\n      } while (o = o.parent);\n      return props;\n    };\n\n    /**\n     * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\n     * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\n     * of the display object.\n     *\n     * <h4>Example</h4>\n     *\n     * \t\tvar myShape = new createjs.Shape();\n     * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\n     *\n     * \t\tconsole.log(myShape.hitTest(10,10); // false\n     * \t\tconsole.log(myShape.hitTest(110, 25); // true\n     *\n     * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\n     * first be converted to local coordinates:\n     *\n     *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n     *      function handleMouseDown(event) {\n     *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\n     *          var hit = myShape.hitTest(p.x, p.y);\n     *      }\n     *\n     * Shape-to-shape collision is not currently supported by EaselJS.\n     *\n     * @method hitTest\n     * @param {Number} x The x position to check in the display object's local coordinates.\n     * @param {Number} y The y position to check in the display object's local coordinates.\n     * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n     * local Point.\n    */\n    p.hitTest = function (x, y) {\n      var ctx = DisplayObject._hitTestContext;\n      ctx.setTransform(1, 0, 0, 1, -x, -y);\n      this.draw(ctx);\n      var hit = this._testHit(ctx);\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, 2, 2);\n      return hit;\n    };\n\n    /**\n     * Provides a chainable shortcut method for setting a number of properties on the instance.\n     *\n     * <h4>Example</h4>\n     *\n     *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n     *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n     *\n     * @method set\n     * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n     * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n     * @chainable\n    */\n    p.set = function (props) {\n      for (var n in props) {\n        this[n] = props[n];\n      }\n      return this;\n    };\n\n    /**\n     * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n     * Objects that have been cached will return the bounds of the cache.\n     * \n     * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n     * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n     * bounds.\n     * \n     * <table>\n     * \t<tr><td><b>All</b></td><td>\n     * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n     * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n     * \t\tthe automatic calculations listed below.\n     * \t</td></tr>\n     * \t<tr><td><b>Bitmap</b></td><td>\n     * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n     * \t</td></tr>\n     * \t<tr><td><b>Sprite</b></td><td>\n     * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n     * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n     * \t</td></tr>\n     * \t<tr><td><b>Container</b></td><td>\n     * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n     * \t</td></tr>\n     * \t<tr><td><b>Shape</b></td><td>\n     * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n     * \t</td></tr>\n     * \t<tr><td><b>Text</b></td><td>\n     * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n     * \t\tnot, especially when using textBaseline values other than \"top\".\n     * \t</td></tr>\n     * \t<tr><td><b>BitmapText</b></td><td>\n     * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n     * \t\tto (x=0,y=0).\n     * \t</td></tr>\n    * </table>\n     * \n     * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n     * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n     * bounds explicitly:\n     * \n     * \tvar bounds = obj.getBounds();\n     * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n     * \t// getBounds will now use the set values, instead of recalculating\n     * \n     * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n     * values if you need to retain it.\n     * \n     * \tvar myBounds = obj.getBounds().clone();\n     * \t// OR:\n     * \tmyRect.copy(obj.getBounds());\n     * \n     * @method getBounds\n     * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n     * object.\n     **/\n    p.getBounds = function () {\n      if (this._bounds) {\n        return this._rectangle.copy(this._bounds);\n      }\n      var cacheCanvas = this.cacheCanvas;\n      if (cacheCanvas) {\n        var scale = this._cacheScale;\n        return this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width / scale, cacheCanvas.height / scale);\n      }\n      return null;\n    };\n\n    /**\n     * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n     * Objects that have been cached will return the transformed bounds of the cache.\n     * \n     * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n     * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n     * bounds.\n     * \n     * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n     * values if you need to retain it.\n     * \n     * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n     * @method getTransformedBounds\n     * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n     **/\n    p.getTransformedBounds = function () {\n      return this._getBounds();\n    };\n\n    /**\n     * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n     * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n     * override calculated bounds.\n     * \n     * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n     * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n     * @method setBounds\n     * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n     * @param {Number} y The y origin of the bounds.\n     * @param {Number} width The width of the bounds.\n     * @param {Number} height The height of the bounds.\n     **/\n    p.setBounds = function (x, y, width, height) {\n      if (x == null) {\n        this._bounds = x;\n      }\n      this._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n    };\n\n    /**\n     * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n     * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n     * are copied by reference (masks, individual filter instances, hit area)\n     * @method clone\n     * @return {DisplayObject} A clone of the current DisplayObject instance.\n     **/\n    p.clone = function () {\n      return this._cloneProps(new DisplayObject());\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[DisplayObject (name=\" + this.name + \")]\";\n    };\n\n    // private methods:\n    // separated so it can be used more easily in subclasses:\n    /**\n     * @method _cloneProps\n     * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n     * instance copied into.\n     * @return {DisplayObject} o\n     * @protected\n     **/\n    p._cloneProps = function (o) {\n      o.alpha = this.alpha;\n      o.mouseEnabled = this.mouseEnabled;\n      o.tickEnabled = this.tickEnabled;\n      o.name = this.name;\n      o.regX = this.regX;\n      o.regY = this.regY;\n      o.rotation = this.rotation;\n      o.scaleX = this.scaleX;\n      o.scaleY = this.scaleY;\n      o.shadow = this.shadow;\n      o.skewX = this.skewX;\n      o.skewY = this.skewY;\n      o.visible = this.visible;\n      o.x = this.x;\n      o.y = this.y;\n      o.compositeOperation = this.compositeOperation;\n      o.snapToPixel = this.snapToPixel;\n      o.filters = this.filters == null ? null : this.filters.slice(0);\n      o.mask = this.mask;\n      o.hitArea = this.hitArea;\n      o.cursor = this.cursor;\n      o._bounds = this._bounds;\n      return o;\n    };\n\n    /**\n     * @method _applyShadow\n     * @protected\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Shadow} shadow\n     **/\n    p._applyShadow = function (ctx, shadow) {\n      shadow = shadow || Shadow.identity;\n      ctx.shadowColor = shadow.color;\n      ctx.shadowOffsetX = shadow.offsetX;\n      ctx.shadowOffsetY = shadow.offsetY;\n      ctx.shadowBlur = shadow.blur;\n    };\n\n    /**\n     * @method _tick\n     * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n     * @protected\n     **/\n    p._tick = function (evtObj) {\n      // because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n      var ls = this._listeners;\n      if (ls && ls[\"tick\"]) {\n        // reset & reuse the event object to avoid construction / GC costs:\n        evtObj.target = null;\n        evtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n        this.dispatchEvent(evtObj);\n      }\n    };\n\n    /**\n     * @method _testHit\n     * @protected\n     * @param {CanvasRenderingContext2D} ctx\n     * @return {Boolean}\n     **/\n    p._testHit = function (ctx) {\n      try {\n        var hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n      } catch (e) {\n        if (!DisplayObject.suppressCrossDomainErrors) {\n          throw \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n        }\n      }\n      return hit;\n    };\n\n    /**\n     * @method _applyFilters\n     * @protected\n     **/\n    p._applyFilters = function () {\n      if (!this.filters || this.filters.length == 0 || !this.cacheCanvas) {\n        return;\n      }\n      var l = this.filters.length;\n      var ctx = this.cacheCanvas.getContext(\"2d\");\n      var w = this.cacheCanvas.width;\n      var h = this.cacheCanvas.height;\n      for (var i = 0; i < l; i++) {\n        this.filters[i].applyFilter(ctx, 0, 0, w, h);\n      }\n    };\n\n    /**\n     * @method _getFilterBounds\n     * @return {Rectangle}\n     * @protected\n     **/\n    p._getFilterBounds = function (rect) {\n      var l,\n        filters = this.filters,\n        bounds = this._rectangle.setValues(0, 0, 0, 0);\n      if (!filters || !(l = filters.length)) {\n        return bounds;\n      }\n      for (var i = 0; i < l; i++) {\n        var f = this.filters[i];\n        f.getBounds && f.getBounds(bounds);\n      }\n      return bounds;\n    };\n\n    /**\n     * @method _getBounds\n     * @param {Matrix2D} matrix\n     * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n     * @return {Rectangle}\n     * @protected\n     **/\n    p._getBounds = function (matrix, ignoreTransform) {\n      return this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n    };\n\n    /**\n     * @method _transformBounds\n     * @param {Rectangle} bounds\n     * @param {Matrix2D} matrix\n     * @param {Boolean} ignoreTransform\n     * @return {Rectangle}\n     * @protected\n     **/\n    p._transformBounds = function (bounds, matrix, ignoreTransform) {\n      if (!bounds) {\n        return bounds;\n      }\n      var x = bounds.x,\n        y = bounds.y,\n        width = bounds.width,\n        height = bounds.height,\n        mtx = this._props.matrix;\n      mtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n      if (x || y) {\n        mtx.appendTransform(0, 0, 1, 1, 0, 0, 0, -x, -y);\n      } // TODO: simplify this.\n      if (matrix) {\n        mtx.prependMatrix(matrix);\n      }\n      var x_a = width * mtx.a,\n        x_b = width * mtx.b;\n      var y_c = height * mtx.c,\n        y_d = height * mtx.d;\n      var tx = mtx.tx,\n        ty = mtx.ty;\n      var minX = tx,\n        maxX = tx,\n        minY = ty,\n        maxY = ty;\n      if ((x = x_a + tx) < minX) {\n        minX = x;\n      } else if (x > maxX) {\n        maxX = x;\n      }\n      if ((x = x_a + y_c + tx) < minX) {\n        minX = x;\n      } else if (x > maxX) {\n        maxX = x;\n      }\n      if ((x = y_c + tx) < minX) {\n        minX = x;\n      } else if (x > maxX) {\n        maxX = x;\n      }\n      if ((y = x_b + ty) < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      if ((y = x_b + y_d + ty) < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      if ((y = y_d + ty) < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      return bounds.setValues(minX, minY, maxX - minX, maxY - minY);\n    };\n\n    /**\n     * Indicates whether the display object has any mouse event listeners or a cursor.\n     * @method _isMouseOpaque\n     * @return {Boolean}\n     * @protected\n     **/\n    p._hasMouseEventListener = function () {\n      var evts = DisplayObject._MOUSE_EVENTS;\n      for (var i = 0, l = evts.length; i < l; i++) {\n        if (this.hasEventListener(evts[i])) {\n          return true;\n        }\n      }\n      return !!this.cursor;\n    };\n    createjs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // Container.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n     * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n     * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n     * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n     * Container.\n     *\n     * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n     * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n     * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n     *\n     * <h4>Example</h4>\n     *\n     *      var container = new createjs.Container();\n     *      container.addChild(bitmapInstance, shapeInstance);\n     *      container.x = 100;\n     *\n     * @class Container\n     * @extends DisplayObject\n     * @constructor\n     **/\n    function Container() {\n      this.DisplayObject_constructor();\n\n      // public properties:\n      /**\n       * The array of children in the display list. You should usually use the child management methods such as\n       * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n       * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n       * included for advanced uses.\n       * @property children\n       * @type Array\n       * @default null\n       **/\n      this.children = [];\n\n      /**\n       * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n       * If false, the children will be aggregated under the container - for example, a click on a child shape would\n       * trigger a click event on the container.\n       * @property mouseChildren\n       * @type Boolean\n       * @default true\n       **/\n      this.mouseChildren = true;\n\n      /**\n       * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n       * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n       * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n       * @property tickChildren\n       * @type Boolean\n       * @default true\n       **/\n      this.tickChildren = true;\n    }\n    var p = createjs.extend(Container, createjs.DisplayObject);\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n     * @method getNumChildren\n     * @return {Number}\n     * @deprecated\n     **/\n    p.getNumChildren = function () {\n      return this.children.length;\n    };\n\n    /**\n     * Returns the number of children in the container.\n     * @property numChildren\n     * @type {Number}\n     * @readonly\n     **/\n    try {\n      Object.defineProperties(p, {\n        numChildren: {\n          get: p.getNumChildren\n        }\n      });\n    } catch (e) {}\n\n    // public methods:\n    /**\n     * Constructor alias for backwards compatibility. This method will be removed in future versions.\n     * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n     * @method initialize\n     * @deprecated in favour of `createjs.promote()`\n     **/\n    p.initialize = Container; // TODO: deprecated.\n\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var hasContent = this.cacheCanvas || this.children.length;\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return true;\n      }\n\n      // this ensures we don't have issues with display list changes that occur during a draw:\n      var list = this.children.slice();\n      for (var i = 0, l = list.length; i < l; i++) {\n        var child = list[i];\n        if (!child.isVisible()) {\n          continue;\n        }\n\n        // draw the child:\n        ctx.save();\n        child.updateContext(ctx);\n        child.draw(ctx);\n        ctx.restore();\n      }\n      return true;\n    };\n\n    /**\n     * Adds a child to the top of the display list.\n     *\n     * <h4>Example</h4>\n     *\n     * \t\tcontainer.addChild(bitmapInstance);\n     *\n     * You can also add multiple children at once:\n     *\n     * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n     *\n     * @method addChild\n     * @param {DisplayObject} child The display object to add.\n     * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n     **/\n    p.addChild = function (child) {\n      var arguments$1 = arguments;\n      if (child == null) {\n        return child;\n      }\n      var l = arguments.length;\n      if (l > 1) {\n        for (var i = 0; i < l; i++) {\n          this.addChild(arguments$1[i]);\n        }\n        return arguments[l - 1];\n      }\n      if (child.parent) {\n        child.parent.removeChild(child);\n      }\n      child.parent = this;\n      this.children.push(child);\n      child.dispatchEvent(\"added\");\n      return child;\n    };\n\n    /**\n     * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n     * setting its parent to this Container.\n     *\n     * <h4>Example</h4>\n     *\n     *      addChildAt(child1, index);\n     *\n     * You can also add multiple children, such as:\n     *\n     *      addChildAt(child1, child2, ..., index);\n     *\n     * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n     * you could use:\n     *\n     *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n     *\n     * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n     *\n     * @method addChildAt\n     * @param {DisplayObject} child The display object to add.\n     * @param {Number} index The index to add the child at.\n     * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n     **/\n    p.addChildAt = function (child, index) {\n      var arguments$1 = arguments;\n      var l = arguments.length;\n      var indx = arguments[l - 1]; // can't use the same name as the index param or it replaces arguments[1]\n      if (indx < 0 || indx > this.children.length) {\n        return arguments[l - 2];\n      }\n      if (l > 2) {\n        for (var i = 0; i < l - 1; i++) {\n          this.addChildAt(arguments$1[i], indx + i);\n        }\n        return arguments[l - 2];\n      }\n      if (child.parent) {\n        child.parent.removeChild(child);\n      }\n      child.parent = this;\n      this.children.splice(index, 0, child);\n      child.dispatchEvent(\"added\");\n      return child;\n    };\n\n    /**\n     * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n     * already known.\n     *\n     * <h4>Example</h4>\n     *\n     *      container.removeChild(child);\n     *\n     * You can also remove multiple children:\n     *\n     *      removeChild(child1, child2, ...);\n     *\n     * Returns true if the child (or children) was removed, or false if it was not in the display list.\n     * @method removeChild\n     * @param {DisplayObject} child The child to remove.\n     * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n     **/\n    p.removeChild = function (child) {\n      var arguments$1 = arguments;\n      var l = arguments.length;\n      if (l > 1) {\n        var good = true;\n        for (var i = 0; i < l; i++) {\n          good = good && this.removeChild(arguments$1[i]);\n        }\n        return good;\n      }\n      return this.removeChildAt(createjs.indexOf(this.children, child));\n    };\n\n    /**\n     * Removes the child at the specified index from the display list, and sets its parent to null.\n     *\n     * <h4>Example</h4>\n     *\n     *      container.removeChildAt(2);\n     *\n     * You can also remove multiple children:\n     *\n     *      container.removeChild(2, 7, ...)\n     *\n     * Returns true if the child (or children) was removed, or false if any index was out of range.\n     * @method removeChildAt\n     * @param {Number} index The index of the child to remove.\n     * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n     **/\n    p.removeChildAt = function (index) {\n      var arguments$1 = arguments;\n      var l = arguments.length;\n      if (l > 1) {\n        var a = [];\n        for (var i = 0; i < l; i++) {\n          a[i] = arguments$1[i];\n        }\n        a.sort(function (a, b) {\n          return b - a;\n        });\n        var good = true;\n        for (var i = 0; i < l; i++) {\n          good = good && this.removeChildAt(a[i]);\n        }\n        return good;\n      }\n      if (index < 0 || index > this.children.length - 1) {\n        return false;\n      }\n      var child = this.children[index];\n      if (child) {\n        child.parent = null;\n      }\n      this.children.splice(index, 1);\n      child.dispatchEvent(\"removed\");\n      return true;\n    };\n\n    /**\n     * Removes all children from the display list.\n     *\n     * <h4>Example</h4>\n     *\n     * \tcontainer.removeAllChildren();\n     *\n     * @method removeAllChildren\n     **/\n    p.removeAllChildren = function () {\n      var kids = this.children;\n      while (kids.length) {\n        this.removeChildAt(0);\n      }\n    };\n\n    /**\n     * Returns the child at the specified index.\n     *\n     * <h4>Example</h4>\n     *\n     *      container.getChildAt(2);\n     *\n     * @method getChildAt\n     * @param {Number} index The index of the child to return.\n     * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n     **/\n    p.getChildAt = function (index) {\n      return this.children[index];\n    };\n\n    /**\n     * Returns the child with the specified name.\n     * @method getChildByName\n     * @param {String} name The name of the child to return.\n     * @return {DisplayObject} The child with the specified name.\n     **/\n    p.getChildByName = function (name) {\n      var kids = this.children;\n      for (var i = 0, l = kids.length; i < l; i++) {\n        if (kids[i].name == name) {\n          return kids[i];\n        }\n      }\n      return null;\n    };\n\n    /**\n     * Performs an array sort operation on the child list.\n     *\n     * <h4>Example: Display children with a higher y in front.</h4>\n     * \n     *      var sortFunction = function(obj1, obj2, options) {\n     *          if (obj1.y > obj2.y) { return 1; }\n     *          if (obj1.y < obj2.y) { return -1; }\n     *          return 0;\n     *      }\n     *      container.sortChildren(sortFunction);\n     *\n     * @method sortChildren\n     * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n     * documentation for details.\n     **/\n    p.sortChildren = function (sortFunction) {\n      this.children.sort(sortFunction);\n    };\n\n    /**\n     * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n     *\n     * <h4>Example</h4>\n     *\n     *      var index = container.getChildIndex(child);\n     *\n     * @method getChildIndex\n     * @param {DisplayObject} child The child to return the index of.\n     * @return {Number} The index of the specified child. -1 if the child is not found.\n     **/\n    p.getChildIndex = function (child) {\n      return createjs.indexOf(this.children, child);\n    };\n\n    /**\n     * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n     * @method swapChildrenAt\n     * @param {Number} index1\n     * @param {Number} index2\n     **/\n    p.swapChildrenAt = function (index1, index2) {\n      var kids = this.children;\n      var o1 = kids[index1];\n      var o2 = kids[index2];\n      if (!o1 || !o2) {\n        return;\n      }\n      kids[index1] = o2;\n      kids[index2] = o1;\n    };\n\n    /**\n     * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n     * Container.\n     * @method swapChildren\n     * @param {DisplayObject} child1\n     * @param {DisplayObject} child2\n     **/\n    p.swapChildren = function (child1, child2) {\n      var kids = this.children;\n      var index1, index2;\n      for (var i = 0, l = kids.length; i < l; i++) {\n        if (kids[i] == child1) {\n          index1 = i;\n        }\n        if (kids[i] == child2) {\n          index2 = i;\n        }\n        if (index1 != null && index2 != null) {\n          break;\n        }\n      }\n      if (i == l) {\n        return;\n      } // TODO: throw error?\n      kids[index1] = child2;\n      kids[index2] = child1;\n    };\n\n    /**\n     * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n     * @param {DisplayObject} child\n     * @param {Number} index  \n     * @method setChildIndex\n     **/\n    p.setChildIndex = function (child, index) {\n      var kids = this.children,\n        l = kids.length;\n      if (child.parent != this || index < 0 || index >= l) {\n        return;\n      }\n      for (var i = 0; i < l; i++) {\n        if (kids[i] == child) {\n          break;\n        }\n      }\n      if (i == l || i == index) {\n        return;\n      }\n      kids.splice(i, 1);\n      kids.splice(index, 0, child);\n    };\n\n    /**\n     * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n     * of this container.\n     * @method contains\n     * @param {DisplayObject} child The DisplayObject to be checked.\n     * @return {Boolean} true if the specified display object either is this container or is a descendent.\n     **/\n    p.contains = function (child) {\n      while (child) {\n        if (child == this) {\n          return true;\n        }\n        child = child.parent;\n      }\n      return false;\n    };\n\n    /**\n     * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n     * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n     * transform properties including regX/Y.\n     * @method hitTest\n     * @param {Number} x The x position to check in the display object's local coordinates.\n     * @param {Number} y The y position to check in the display object's local coordinates.\n     * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n     * coordinates.\n     **/\n    p.hitTest = function (x, y) {\n      // TODO: optimize to use the fast cache check where possible.\n      return this.getObjectUnderPoint(x, y) != null;\n    };\n\n    /**\n     * Returns an array of all display objects under the specified coordinates that are in this container's display\n     * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n     * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n     * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n     * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n     * and only if the mouse's position has changed.\n     * \n     * <ul>\n     *     <li>By default (mode=0) this method evaluates all display objects.</li>\n     *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n     * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n     * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n     * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n     * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n     * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n     * </li>\n     * \n     * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n     * @method getObjectsUnderPoint\n     * @param {Number} x The x position in the container to test.\n     * @param {Number} y The y position in the container to test.\n     * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n     * @return {Array} An Array of DisplayObjects under the specified coordinates.\n     **/\n    p.getObjectsUnderPoint = function (x, y, mode) {\n      var arr = [];\n      var pt = this.localToGlobal(x, y);\n      this._getObjectsUnderPoint(pt.x, pt.y, arr, mode > 0, mode == 1);\n      return arr;\n    };\n\n    /**\n     * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n     * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n     * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n     * @method getObjectUnderPoint\n     * @param {Number} x The x position in the container to test.\n     * @param {Number} y The y position in the container to test.\n     * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n     * @return {DisplayObject} The top-most display object under the specified coordinates.\n     **/\n    p.getObjectUnderPoint = function (x, y, mode) {\n      var pt = this.localToGlobal(x, y);\n      return this._getObjectsUnderPoint(pt.x, pt.y, null, mode > 0, mode == 1);\n    };\n\n    /**\n     * Docced in superclass.\n     */\n    p.getBounds = function () {\n      return this._getBounds(null, true);\n    };\n\n    /**\n     * Docced in superclass.\n     */\n    p.getTransformedBounds = function () {\n      return this._getBounds();\n    };\n\n    /**\n     * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n     * reverted to their defaults (for example .parent).\n     * @method clone\n     * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n     * properties of the container will be cloned, but the new instance will not have any children.\n     * @return {Container} A clone of the current Container instance.\n     **/\n    p.clone = function (recursive) {\n      var o = this._cloneProps(new Container());\n      if (recursive) {\n        this._cloneChildren(o);\n      }\n      return o;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Container (name=\" + this.name + \")]\";\n    };\n\n    // private methods:\n    /**\n     * @method _tick\n     * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n     * @protected\n     **/\n    p._tick = function (evtObj) {\n      if (this.tickChildren) {\n        for (var i = this.children.length - 1; i >= 0; i--) {\n          var child = this.children[i];\n          if (child.tickEnabled && child._tick) {\n            child._tick(evtObj);\n          }\n        }\n      }\n      this.DisplayObject__tick(evtObj);\n    };\n\n    /**\n     * Recursively clones all children of this container, and adds them to the target container.\n     * @method cloneChildren\n     * @protected\n     * @param {Container} o The target container.\n     **/\n    p._cloneChildren = function (o) {\n      if (o.children.length) {\n        o.removeAllChildren();\n      }\n      var arr = o.children;\n      for (var i = 0, l = this.children.length; i < l; i++) {\n        var clone = this.children[i].clone(true);\n        clone.parent = o;\n        arr.push(clone);\n      }\n    };\n\n    /**\n     * @method _getObjectsUnderPoint\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Array} arr\n     * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n     * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n     * @param {Number} currentDepth Indicates the current depth of the search.\n     * @return {DisplayObject}\n     * @protected\n     **/\n    p._getObjectsUnderPoint = function (x, y, arr, mouse, activeListener, currentDepth) {\n      currentDepth = currentDepth || 0;\n      if (!currentDepth && !this._testMask(this, x, y)) {\n        return null;\n      }\n      var mtx,\n        ctx = createjs.DisplayObject._hitTestContext;\n      activeListener = activeListener || mouse && this._hasMouseEventListener();\n\n      // draw children one at a time, and check if we get a hit:\n      var children = this.children,\n        l = children.length;\n      for (var i = l - 1; i >= 0; i--) {\n        var child = children[i];\n        var hitArea = child.hitArea;\n        if (!child.visible || !hitArea && !child.isVisible() || mouse && !child.mouseEnabled) {\n          continue;\n        }\n        if (!hitArea && !this._testMask(child, x, y)) {\n          continue;\n        }\n\n        // if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\n        if (!hitArea && child instanceof Container) {\n          var result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth + 1);\n          if (!arr && result) {\n            return mouse && !this.mouseChildren ? this : result;\n          }\n        } else {\n          if (mouse && !activeListener && !child._hasMouseEventListener()) {\n            continue;\n          }\n\n          // TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n          var props = child.getConcatenatedDisplayProps(child._props);\n          mtx = props.matrix;\n          if (hitArea) {\n            mtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n            props.alpha = hitArea.alpha;\n          }\n          ctx.globalAlpha = props.alpha;\n          ctx.setTransform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx - x, mtx.ty - y);\n          (hitArea || child).draw(ctx);\n          if (!this._testHit(ctx)) {\n            continue;\n          }\n          ctx.setTransform(1, 0, 0, 1, 0, 0);\n          ctx.clearRect(0, 0, 2, 2);\n          if (arr) {\n            arr.push(child);\n          } else {\n            return mouse && !this.mouseChildren ? this : child;\n          }\n        }\n      }\n      return null;\n    };\n\n    /**\n     * @method _testMask\n     * @param {DisplayObject} target\n     * @param {Number} x\n     * @param {Number} y\n     * @return {Boolean} Indicates whether the x/y is within the masked region.\n     * @protected\n     **/\n    p._testMask = function (target, x, y) {\n      var mask = target.mask;\n      if (!mask || !mask.graphics || mask.graphics.isEmpty()) {\n        return true;\n      }\n      var mtx = this._props.matrix,\n        parent = target.parent;\n      mtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n      mtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n      var ctx = createjs.DisplayObject._hitTestContext;\n      ctx.setTransform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx - x, mtx.ty - y);\n\n      // draw the mask as a solid fill:\n      mask.graphics.drawAsPath(ctx);\n      ctx.fillStyle = \"#000\";\n      ctx.fill();\n      if (!this._testHit(ctx)) {\n        return false;\n      }\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, 2, 2);\n      return true;\n    };\n\n    /**\n     * @method _getBounds\n     * @param {Matrix2D} matrix\n     * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n     * @return {Rectangle}\n     * @protected\n     **/\n    p._getBounds = function (matrix, ignoreTransform) {\n      var bounds = this.DisplayObject_getBounds();\n      if (bounds) {\n        return this._transformBounds(bounds, matrix, ignoreTransform);\n      }\n      var mtx = this._props.matrix;\n      mtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n      if (matrix) {\n        mtx.prependMatrix(matrix);\n      }\n      var l = this.children.length,\n        rect = null;\n      for (var i = 0; i < l; i++) {\n        var child = this.children[i];\n        if (!child.visible || !(bounds = child._getBounds(mtx))) {\n          continue;\n        }\n        if (rect) {\n          rect.extend(bounds.x, bounds.y, bounds.width, bounds.height);\n        } else {\n          rect = bounds.clone();\n        }\n      }\n      return rect;\n    };\n    createjs.Container = createjs.promote(Container, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // Stage.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n     * method is called, it will render its display list to its target canvas.\n     *\n     * <h4>Example</h4>\n     * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n     * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n     *\n     *      var stage = new createjs.Stage(\"canvasElementId\");\n     *      var image = new createjs.Bitmap(\"imagePath.png\");\n     *      stage.addChild(image);\n     *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n     *      function handleTick(event) {\n     *          image.x += 10;\n     *          stage.update();\n     *      }\n     *\n     * @class Stage\n     * @extends Container\n     * @constructor\n     * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n     * of a canvas object in the current document.\n     **/\n    function Stage(canvas) {\n      this.Container_constructor();\n\n      // public properties:\n      /**\n       * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n       * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n       * example).\n       *\n       * <h4>Example</h4>\n       *\n       *      var stage = new createjs.Stage(\"canvasId\");\n       *      stage.autoClear = false;\n       *\n       * @property autoClear\n       * @type Boolean\n       * @default true\n       **/\n      this.autoClear = true;\n\n      /**\n       * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n       * first stage that will be ticked (or they will clear each other's render).\n       *\n       * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n       * new canvas or mouse events will not work as expected. For example:\n       *\n       *      myStage.enableDOMEvents(false);\n       *      myStage.canvas = anotherCanvas;\n       *      myStage.enableDOMEvents(true);\n       *\n       * @property canvas\n       * @type HTMLCanvasElement | Object\n       **/\n      this.canvas = typeof canvas == \"string\" ? document.getElementById(canvas) : canvas;\n\n      /**\n       * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n       * position over the canvas, and mouseInBounds will be set to false.\n       * @property mouseX\n       * @type Number\n       * @readonly\n       **/\n      this.mouseX = 0;\n\n      /**\n       * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n       * position over the canvas, and mouseInBounds will be set to false.\n       * @property mouseY\n       * @type Number\n       * @readonly\n       **/\n      this.mouseY = 0;\n\n      /**\n       * Specifies the area of the stage to affect when calling update. This can be use to selectively\n       * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n       * @property drawRect\n       * @type {Rectangle}\n       */\n      this.drawRect = null;\n\n      /**\n       * Indicates whether display objects should be rendered on whole pixels. You can set the\n       * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n       * display objects to false to enable/disable this behaviour on a per instance basis.\n       * @property snapToPixelEnabled\n       * @type Boolean\n       * @default false\n       **/\n      this.snapToPixelEnabled = false;\n\n      /**\n       * Indicates whether the mouse is currently within the bounds of the canvas.\n       * @property mouseInBounds\n       * @type Boolean\n       * @default false\n       **/\n      this.mouseInBounds = false;\n\n      /**\n       * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n       * @property tickOnUpdate\n       * @type Boolean\n       * @default true\n       **/\n      this.tickOnUpdate = true;\n\n      /**\n       * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n       * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n       * x/y/rawX/rawY.\n       * @property mouseMoveOutside\n       * @type Boolean\n       * @default false\n       **/\n      this.mouseMoveOutside = false;\n\n      /**\n       * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n       * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n       * @property preventSelection\n       * @type Boolean\n       * @default true\n       **/\n      this.preventSelection = true;\n\n      /**\n       * The hitArea property is not supported for Stage.\n       * @property hitArea\n       * @type {DisplayObject}\n       * @default null\n       */\n\n      // private properties:\n      /**\n       * Holds objects with data for each active pointer id. Each object has the following properties:\n       * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n       * @property _pointerData\n       * @type {Object}\n       * @private\n       */\n      this._pointerData = {};\n\n      /**\n       * Number of active pointers.\n       * @property _pointerCount\n       * @type {Object}\n       * @private\n       */\n      this._pointerCount = 0;\n\n      /**\n       * The ID of the primary pointer.\n       * @property _primaryPointerID\n       * @type {Object}\n       * @private\n       */\n      this._primaryPointerID = null;\n\n      /**\n       * @property _mouseOverIntervalID\n       * @protected\n       * @type Number\n       **/\n      this._mouseOverIntervalID = null;\n\n      /**\n       * @property _nextStage\n       * @protected\n       * @type Stage\n       **/\n      this._nextStage = null;\n\n      /**\n       * @property _prevStage\n       * @protected\n       * @type Stage\n       **/\n      this._prevStage = null;\n\n      // initialize:\n      this.enableDOMEvents(true);\n    }\n    var p = createjs.extend(Stage, createjs.Container);\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // events:\n    /**\n     * Dispatched when the user moves the mouse over the canvas.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event stagemousemove\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n     * class for a listing of event properties.\n     * @event stagemousedown\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n     * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n     * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n     * @event stagemouseup\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n     * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n     * class for a listing of event properties.\n     * @event mouseleave\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n     * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n     * class for a listing of event properties.\n     * @event mouseenter\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched each update immediately before the tick event is propagated through the display list.\n     * You can call preventDefault on the event object to cancel propagating the tick event.\n     * @event tickstart\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n     * tickOnUpdate is false. Precedes the \"drawstart\" event.\n     * @event tickend\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n     * You can call preventDefault on the event object to cancel the draw.\n     * @event drawstart\n     * @since 0.7.0\n     */\n\n    /**\n     * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n     * @event drawend\n     * @since 0.7.0\n     */\n\n    // getter / setters:\n    /**\n     * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n     * This can be useful in cases where you have multiple layered canvases and want user interactions\n     * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n     *\n     *      topStage.nextStage = bottomStage;\n     *\n     * To disable relaying, set nextStage to null.\n     * \n     * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n     * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n     * Considerations when using roll over in relay targets:<OL>\n     * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n     * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n     * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n     * </OL>\n     * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n     * 30 as it's desired frequency):\n     * \ttopStage.nextStage = targetStage;\n     * \ttopStage.enableMouseOver(10);\n     * \ttargetStage.enableMouseOver(30);\n     * \n     * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n     * DOM events using:\n     * \n     *\ttargetStage.enableDOMEvents(false);\n     * \n     * @property nextStage\n     * @type {Stage}\n     **/\n    p._get_nextStage = function () {\n      return this._nextStage;\n    };\n    p._set_nextStage = function (value) {\n      if (this._nextStage) {\n        this._nextStage._prevStage = null;\n      }\n      if (value) {\n        value._prevStage = this;\n      }\n      this._nextStage = value;\n    };\n    try {\n      Object.defineProperties(p, {\n        nextStage: {\n          get: p._get_nextStage,\n          set: p._set_nextStage\n        }\n      });\n    } catch (e) {} // TODO: use Log\n\n    // public methods:\n    /**\n     * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n     * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n     * and then render the display list to the canvas.\n     *\n     * @method update\n     * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n     **/\n    p.update = function (props) {\n      if (!this.canvas) {\n        return;\n      }\n      if (this.tickOnUpdate) {\n        this.tick(props);\n      }\n      if (this.dispatchEvent(\"drawstart\", false, true) === false) {\n        return;\n      }\n      createjs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n      var r = this.drawRect,\n        ctx = this.canvas.getContext(\"2d\");\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      if (this.autoClear) {\n        if (r) {\n          ctx.clearRect(r.x, r.y, r.width, r.height);\n        } else {\n          ctx.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1);\n        }\n      }\n      ctx.save();\n      if (this.drawRect) {\n        ctx.beginPath();\n        ctx.rect(r.x, r.y, r.width, r.height);\n        ctx.clip();\n      }\n      this.updateContext(ctx);\n      this.draw(ctx, false);\n      ctx.restore();\n      this.dispatchEvent(\"drawend\");\n    };\n\n    /**\n     * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n     * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n     *\n     * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n     * propagated to listeners.\n     *\n     * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n     * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n     * passed as the `props` parameter to `tick()`. For example:\n     *\n     * \tTicker.on(\"tick\", handleTick);\n     * \tfunction handleTick(evtObj) {\n     * \t\t// clone the event object from Ticker, and add some custom data to it:\n     * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n     * \t\t\n     * \t\t// pass it to stage.update():\n     * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n     * \t}\n     * \t\n     * \t// ...\n     * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n     * \tfunction handleDisplayObjectTick(evt) {\n     * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n     * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n     * \t}\n     * \n     * @method tick\n     * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n     **/\n    p.tick = function (props) {\n      if (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) {\n        return;\n      }\n      var evtObj = new createjs.Event(\"tick\");\n      if (props) {\n        for (var n in props) {\n          if (props.hasOwnProperty(n)) {\n            evtObj[n] = props[n];\n          }\n        }\n      }\n      this._tick(evtObj);\n      this.dispatchEvent(\"tickend\");\n    };\n\n    /**\n     * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n     * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n     * directly, using:\n     *\n     *      Ticker.addEventListener(\"tick\", myStage\");\n     *\n     * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n     * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n     * @property handleEvent\n     * @type Function\n     **/\n    p.handleEvent = function (evt) {\n      if (evt.type == \"tick\") {\n        this.update(evt);\n      }\n    };\n\n    /**\n     * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n     * @method clear\n     **/\n    p.clear = function () {\n      if (!this.canvas) {\n        return;\n      }\n      var ctx = this.canvas.getContext(\"2d\");\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1);\n    };\n\n    /**\n     * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n     * be specified as the src value of an image element.\n     * @method toDataURL\n     * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n     * value is allowed. The default value is a transparent background.\n     * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n     * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n     * @return {String} a Base64 encoded image.\n     **/\n    p.toDataURL = function (backgroundColor, mimeType) {\n      var data,\n        ctx = this.canvas.getContext('2d'),\n        w = this.canvas.width,\n        h = this.canvas.height;\n      if (backgroundColor) {\n        data = ctx.getImageData(0, 0, w, h);\n        var compositeOperation = ctx.globalCompositeOperation;\n        ctx.globalCompositeOperation = \"destination-over\";\n        ctx.fillStyle = backgroundColor;\n        ctx.fillRect(0, 0, w, h);\n      }\n      var dataURL = this.canvas.toDataURL(mimeType || \"image/png\");\n      if (backgroundColor) {\n        ctx.putImageData(data, 0, 0);\n        ctx.globalCompositeOperation = compositeOperation;\n      }\n      return dataURL;\n    };\n\n    /**\n     * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n     * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n     * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n     * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n     * independently of mouse move events via the optional `frequency` parameter.\n     *\n     * <h4>Example</h4>\n     *\n     *      var stage = new createjs.Stage(\"canvasId\");\n     *      stage.enableMouseOver(10); // 10 updates per second\n     *\n     * @method enableMouseOver\n     * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n     * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n     * responsive, but uses less CPU.\n     **/\n    p.enableMouseOver = function (frequency) {\n      if (this._mouseOverIntervalID) {\n        clearInterval(this._mouseOverIntervalID);\n        this._mouseOverIntervalID = null;\n        if (frequency == 0) {\n          this._testMouseOver(true);\n        }\n      }\n      if (frequency == null) {\n        frequency = 20;\n      } else if (frequency <= 0) {\n        return;\n      }\n      var o = this;\n      this._mouseOverIntervalID = setInterval(function () {\n        o._testMouseOver();\n      }, 1000 / Math.min(50, frequency));\n    };\n\n    /**\n     * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n     * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n     * events from the page.\n     *\n     * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n     * new canvas or mouse events will not work as expected. For example:\n     *\n     *      myStage.enableDOMEvents(false);\n     *      myStage.canvas = anotherCanvas;\n     *      myStage.enableDOMEvents(true);\n     *\n     * @method enableDOMEvents\n     * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n     **/\n    p.enableDOMEvents = function (enable) {\n      if (enable == null) {\n        enable = true;\n      }\n      var n,\n        o,\n        ls = this._eventListeners;\n      if (!enable && ls) {\n        for (n in ls) {\n          o = ls[n];\n          o.t.removeEventListener(n, o.f, false);\n        }\n        this._eventListeners = null;\n      } else if (enable && !ls && this.canvas) {\n        var t = window.addEventListener ? window : document;\n        var _this = this;\n        ls = this._eventListeners = {};\n        ls[\"mouseup\"] = {\n          t: t,\n          f: function (e) {\n            _this._handleMouseUp(e);\n          }\n        };\n        ls[\"mousemove\"] = {\n          t: t,\n          f: function (e) {\n            _this._handleMouseMove(e);\n          }\n        };\n        ls[\"dblclick\"] = {\n          t: this.canvas,\n          f: function (e) {\n            _this._handleDoubleClick(e);\n          }\n        };\n        ls[\"mousedown\"] = {\n          t: this.canvas,\n          f: function (e) {\n            _this._handleMouseDown(e);\n          }\n        };\n        for (n in ls) {\n          o = ls[n];\n          o.t.addEventListener(n, o.f, false);\n        }\n      }\n    };\n\n    /**\n     * Stage instances cannot be cloned.\n     * @method clone\n     **/\n    p.clone = function () {\n      throw \"Stage cannot be cloned.\";\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Stage (name=\" + this.name + \")]\";\n    };\n\n    // private methods:\n    /**\n     * @method _getElementRect\n     * @protected\n     * @param {HTMLElement} e\n     **/\n    p._getElementRect = function (e) {\n      var bounds;\n      try {\n        bounds = e.getBoundingClientRect();\n      } // this can fail on disconnected DOM elements in IE9\n      catch (err) {\n        bounds = {\n          top: e.offsetTop,\n          left: e.offsetLeft,\n          width: e.offsetWidth,\n          height: e.offsetHeight\n        };\n      }\n      var offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n      var offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop || document.body.clientTop || 0);\n      var styles = window.getComputedStyle ? getComputedStyle(e, null) : e.currentStyle; // IE <9 compatibility.\n      var padL = parseInt(styles.paddingLeft) + parseInt(styles.borderLeftWidth);\n      var padT = parseInt(styles.paddingTop) + parseInt(styles.borderTopWidth);\n      var padR = parseInt(styles.paddingRight) + parseInt(styles.borderRightWidth);\n      var padB = parseInt(styles.paddingBottom) + parseInt(styles.borderBottomWidth);\n\n      // note: in some browsers bounds properties are read only.\n      return {\n        left: bounds.left + offX + padL,\n        right: bounds.right + offX - padR,\n        top: bounds.top + offY + padT,\n        bottom: bounds.bottom + offY - padB\n      };\n    };\n\n    /**\n     * @method _getPointerData\n     * @protected\n     * @param {Number} id\n     **/\n    p._getPointerData = function (id) {\n      var data = this._pointerData[id];\n      if (!data) {\n        data = this._pointerData[id] = {\n          x: 0,\n          y: 0\n        };\n      }\n      return data;\n    };\n\n    /**\n     * @method _handleMouseMove\n     * @protected\n     * @param {MouseEvent} e\n     **/\n    p._handleMouseMove = function (e) {\n      if (!e) {\n        e = window.event;\n      }\n      this._handlePointerMove(-1, e, e.pageX, e.pageY);\n    };\n\n    /**\n     * @method _handlePointerMove\n     * @protected\n     * @param {Number} id\n     * @param {Event} e\n     * @param {Number} pageX\n     * @param {Number} pageY\n     * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n     **/\n    p._handlePointerMove = function (id, e, pageX, pageY, owner) {\n      if (this._prevStage && owner === undefined) {\n        return;\n      } // redundant listener.\n      if (!this.canvas) {\n        return;\n      }\n      var nextStage = this._nextStage,\n        o = this._getPointerData(id);\n      var inBounds = o.inBounds;\n      this._updatePointerPosition(id, e, pageX, pageY);\n      if (inBounds || o.inBounds || this.mouseMoveOutside) {\n        if (id === -1 && o.inBounds == !inBounds) {\n          this._dispatchMouseEvent(this, inBounds ? \"mouseleave\" : \"mouseenter\", false, id, o, e);\n        }\n        this._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n        this._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n      }\n      nextStage && nextStage._handlePointerMove(id, e, pageX, pageY, null);\n    };\n\n    /**\n     * @method _updatePointerPosition\n     * @protected\n     * @param {Number} id\n     * @param {Event} e\n     * @param {Number} pageX\n     * @param {Number} pageY\n     **/\n    p._updatePointerPosition = function (id, e, pageX, pageY) {\n      var rect = this._getElementRect(this.canvas);\n      pageX -= rect.left;\n      pageY -= rect.top;\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      pageX /= (rect.right - rect.left) / w;\n      pageY /= (rect.bottom - rect.top) / h;\n      var o = this._getPointerData(id);\n      if (o.inBounds = pageX >= 0 && pageY >= 0 && pageX <= w - 1 && pageY <= h - 1) {\n        o.x = pageX;\n        o.y = pageY;\n      } else if (this.mouseMoveOutside) {\n        o.x = pageX < 0 ? 0 : pageX > w - 1 ? w - 1 : pageX;\n        o.y = pageY < 0 ? 0 : pageY > h - 1 ? h - 1 : pageY;\n      }\n      o.posEvtObj = e;\n      o.rawX = pageX;\n      o.rawY = pageY;\n      if (id === this._primaryPointerID || id === -1) {\n        this.mouseX = o.x;\n        this.mouseY = o.y;\n        this.mouseInBounds = o.inBounds;\n      }\n    };\n\n    /**\n     * @method _handleMouseUp\n     * @protected\n     * @param {MouseEvent} e\n     **/\n    p._handleMouseUp = function (e) {\n      this._handlePointerUp(-1, e, false);\n    };\n\n    /**\n     * @method _handlePointerUp\n     * @protected\n     * @param {Number} id\n     * @param {Event} e\n     * @param {Boolean} clear\n     * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n     **/\n    p._handlePointerUp = function (id, e, clear, owner) {\n      var nextStage = this._nextStage,\n        o = this._getPointerData(id);\n      if (this._prevStage && owner === undefined) {\n        return;\n      } // redundant listener.\n\n      var target = null,\n        oTarget = o.target;\n      if (!owner && (oTarget || nextStage)) {\n        target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n      }\n      if (o.down) {\n        this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target);\n        o.down = false;\n      }\n      if (target == oTarget) {\n        this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e);\n      }\n      this._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n      if (clear) {\n        if (id == this._primaryPointerID) {\n          this._primaryPointerID = null;\n        }\n        delete this._pointerData[id];\n      } else {\n        o.target = null;\n      }\n      nextStage && nextStage._handlePointerUp(id, e, clear, owner || target && this);\n    };\n\n    /**\n     * @method _handleMouseDown\n     * @protected\n     * @param {MouseEvent} e\n     **/\n    p._handleMouseDown = function (e) {\n      this._handlePointerDown(-1, e, e.pageX, e.pageY);\n    };\n\n    /**\n     * @method _handlePointerDown\n     * @protected\n     * @param {Number} id\n     * @param {Event} e\n     * @param {Number} pageX\n     * @param {Number} pageY\n     * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n     **/\n    p._handlePointerDown = function (id, e, pageX, pageY, owner) {\n      if (this.preventSelection) {\n        e.preventDefault();\n      }\n      if (this._primaryPointerID == null || id === -1) {\n        this._primaryPointerID = id;\n      } // mouse always takes over.\n\n      if (pageY != null) {\n        this._updatePointerPosition(id, e, pageX, pageY);\n      }\n      var target = null,\n        nextStage = this._nextStage,\n        o = this._getPointerData(id);\n      if (!owner) {\n        target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n      }\n      if (o.inBounds) {\n        this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target);\n        o.down = true;\n      }\n      this._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n      nextStage && nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n    };\n\n    /**\n     * @method _testMouseOver\n     * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n     * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n     * @param {Stage} eventTarget The stage that the cursor is actively over.\n     * @protected\n     **/\n    p._testMouseOver = function (clear, owner, eventTarget) {\n      if (this._prevStage && owner === undefined) {\n        return;\n      } // redundant listener.\n\n      var nextStage = this._nextStage;\n      if (!this._mouseOverIntervalID) {\n        // not enabled for mouseover, but should still relay the event.\n        nextStage && nextStage._testMouseOver(clear, owner, eventTarget);\n        return;\n      }\n      var o = this._getPointerData(-1);\n      // only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n      if (!o || !clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds) {\n        return;\n      }\n      var e = o.posEvtObj;\n      var isEventTarget = eventTarget || e && e.target == this.canvas;\n      var target = null,\n        common = -1,\n        cursor = \"\",\n        t,\n        i,\n        l;\n      if (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n        target = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n        this._mouseOverX = this.mouseX;\n        this._mouseOverY = this.mouseY;\n      }\n      var oldList = this._mouseOverTarget || [];\n      var oldTarget = oldList[oldList.length - 1];\n      var list = this._mouseOverTarget = [];\n\n      // generate ancestor list and check for cursor:\n      t = target;\n      while (t) {\n        list.unshift(t);\n        if (!cursor) {\n          cursor = t.cursor;\n        }\n        t = t.parent;\n      }\n      this.canvas.style.cursor = cursor;\n      if (!owner && eventTarget) {\n        eventTarget.canvas.style.cursor = cursor;\n      }\n\n      // find common ancestor:\n      for (i = 0, l = list.length; i < l; i++) {\n        if (list[i] != oldList[i]) {\n          break;\n        }\n        common = i;\n      }\n      if (oldTarget != target) {\n        this._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n      }\n      for (i = oldList.length - 1; i > common; i--) {\n        this._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n      }\n      for (i = list.length - 1; i > common; i--) {\n        this._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n      }\n      if (oldTarget != target) {\n        this._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n      }\n      nextStage && nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n    };\n\n    /**\n     * @method _handleDoubleClick\n     * @protected\n     * @param {MouseEvent} e\n     * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n     **/\n    p._handleDoubleClick = function (e, owner) {\n      var target = null,\n        nextStage = this._nextStage,\n        o = this._getPointerData(-1);\n      if (!owner) {\n        target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n        this._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n      }\n      nextStage && nextStage._handleDoubleClick(e, owner || target && this);\n    };\n\n    /**\n     * @method _dispatchMouseEvent\n     * @protected\n     * @param {DisplayObject} target\n     * @param {String} type\n     * @param {Boolean} bubbles\n     * @param {Number} pointerId\n     * @param {Object} o\n     * @param {MouseEvent} [nativeEvent]\n     * @param {DisplayObject} [relatedTarget]\n     **/\n    p._dispatchMouseEvent = function (target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n      // TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n      if (!target || !bubbles && !target.hasEventListener(type)) {\n        return;\n      }\n      /*\n      // TODO: account for stage transformations?\n      this._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n      var pt = this._mtx.transformPoint(o.x, o.y);\n      var evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n      */\n      var evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n      target.dispatchEvent(evt);\n    };\n    createjs.Stage = createjs.promote(Stage, \"Container\");\n  })();\n\n  //##############################################################################\n  // Bitmap.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n     * HTML element, or a string.\n     *\n     * <h4>Example</h4>\n     *\n     *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n     *\n     * <strong>Notes:</strong>\n     * <ol>\n     *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n     *      will be displayed.</li>\n     *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n     *     the Bitmap can be cached.</li>\n     *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n     *     happens in all browsers except recent Firefox builds.</li>\n     *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n     *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n     *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n     * </ol>\n     *\n     * @class Bitmap\n     * @extends DisplayObject\n     * @constructor\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\n     * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\n     * If it is a URI, a new Image object will be constructed and assigned to the .image property.\n     **/\n    function Bitmap(imageOrUri) {\n      this.DisplayObject_constructor();\n\n      // public properties:\n      /**\n       * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\n       * mobile browsers) support drawing video to a canvas.\n       * @property image\n       * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\n       **/\n      if (typeof imageOrUri == \"string\") {\n        this.image = document.createElement(\"img\");\n        this.image.src = imageOrUri;\n      } else {\n        this.image = imageOrUri;\n      }\n\n      /**\n       * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n       * Note that video sources must have a width / height set to work correctly with `sourceRect`.\n       * @property sourceRect\n       * @type Rectangle\n       * @default null\n       */\n      this.sourceRect = null;\n    }\n    var p = createjs.extend(Bitmap, createjs.DisplayObject);\n\n    // public methods:\n    /**\n     * Constructor alias for backwards compatibility. This method will be removed in future versions.\n     * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n     * @method initialize\n     * @deprecated in favour of `createjs.promote()`\n     **/\n    p.initialize = Bitmap; // TODO: deprecated.\n\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var image = this.image;\n      var hasContent = this.cacheCanvas || image && (image.naturalWidth || image.getContext || image.readyState >= 2);\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     *\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     * @return {Boolean}\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) {\n        return true;\n      }\n      var img = this.image,\n        rect = this.sourceRect;\n      if (rect) {\n        // some browsers choke on out of bound values, so we'll fix them:\n        var x1 = rect.x,\n          y1 = rect.y,\n          x2 = x1 + rect.width,\n          y2 = y1 + rect.height,\n          x = 0,\n          y = 0,\n          w = img.width,\n          h = img.height;\n        if (x1 < 0) {\n          x -= x1;\n          x1 = 0;\n        }\n        if (x2 > w) {\n          x2 = w;\n        }\n        if (y1 < 0) {\n          y -= y1;\n          y1 = 0;\n        }\n        if (y2 > h) {\n          y2 = h;\n        }\n        ctx.drawImage(img, x1, y1, x2 - x1, y2 - y1, x, y, x2 - x1, y2 - y1);\n      } else {\n        ctx.drawImage(img, 0, 0);\n      }\n      return true;\n    };\n\n    //Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n    //Bitmap. This is why they have no method implementations.\n\n    /**\n     * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n     * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n     *\n     * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n     * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n     * method.\n     * @method cache\n     **/\n\n    /**\n     * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n     * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n     *\n     * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n     * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n     * method.\n     * @method updateCache\n     **/\n\n    /**\n     * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n     * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n     *\n     * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n     * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n     * method.\n     * @method uncache\n     **/\n\n    /**\n     * Docced in superclass.\n     */\n    p.getBounds = function () {\n      var rect = this.DisplayObject_getBounds();\n      if (rect) {\n        return rect;\n      }\n      var image = this.image,\n        o = this.sourceRect || image;\n      var hasContent = image && (image.naturalWidth || image.getContext || image.readyState >= 2);\n      return hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n    };\n\n    /**\n     * Returns a clone of the Bitmap instance.\n     * @method clone\n     * @return {Bitmap} a clone of the Bitmap instance.\n     **/\n    p.clone = function () {\n      var o = new Bitmap(this.image);\n      if (this.sourceRect) {\n        o.sourceRect = this.sourceRect.clone();\n      }\n      this._cloneProps(o);\n      return o;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Bitmap (name=\" + this.name + \")]\";\n    };\n    createjs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // Sprite.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n     * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n     * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n     * play frames as an animation, and even sequence animations together.\n     *\n     * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n     *\n     * <h4>Example</h4>\n     *\n     *      var instance = new createjs.Sprite(spriteSheet);\n     *      instance.gotoAndStop(\"frameName\");\n     *\n     * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n     * only the first defined frame defined in the sprite sheet will be displayed.\n     *\n     * @class Sprite\n     * @extends DisplayObject\n     * @constructor\n     * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n     * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n     * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n     **/\n    function Sprite(spriteSheet, frameOrAnimation) {\n      this.DisplayObject_constructor();\n\n      // public properties:\n      /**\n       * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n       * definitions, this will advance non-sequentially. This will always be an integer value.\n       * @property currentFrame\n       * @type {Number}\n       * @default 0\n       * @readonly\n       **/\n      this.currentFrame = 0;\n\n      /**\n       * Returns the name of the currently playing animation.\n       * @property currentAnimation\n       * @type {String}\n       * @final\n       * @readonly\n       **/\n      this.currentAnimation = null;\n\n      /**\n       * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n       * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n       * @property paused\n       * @type {Boolean}\n       * @default false\n       **/\n      this.paused = true;\n\n      /**\n       * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n       * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n       * @property spriteSheet\n       * @type {SpriteSheet}\n       * @readonly\n       **/\n      this.spriteSheet = spriteSheet;\n\n      /**\n       * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n       * from 0 to n-1, where n is the number of frames in the current animation.\n       *\n       * This could be a non-integer value if\n       * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n       * not an integer.\n       * @property currentAnimationFrame\n       * @type {Number}\n       * @default 0\n       **/\n      this.currentAnimationFrame = 0;\n\n      /**\n       * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n       * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n       * framerate.\n       *\n       * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n       * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n       * vary slightly between frames.\n       *\n       * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n       * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n       * @property framerate\n       * @type {Number}\n       * @default 0\n       **/\n      this.framerate = 0;\n\n      // private properties:\n      /**\n       * Current animation object.\n       * @property _animation\n       * @protected\n       * @type {Object}\n       * @default null\n       **/\n      this._animation = null;\n\n      /**\n       * Current frame index.\n       * @property _currentFrame\n       * @protected\n       * @type {Number}\n       * @default null\n       **/\n      this._currentFrame = null;\n\n      /**\n       * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n       * @property _skipAdvance\n       * @protected\n       * @type {Boolean}\n       * @default false\n       **/\n      this._skipAdvance = false;\n      if (frameOrAnimation != null) {\n        this.gotoAndPlay(frameOrAnimation);\n      }\n    }\n    var p = createjs.extend(Sprite, createjs.DisplayObject);\n\n    /**\n     * Constructor alias for backwards compatibility. This method will be removed in future versions.\n     * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n     * @method initialize\n     * @deprecated in favour of `createjs.promote()`\n     **/\n    p.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\n\n    // events:\n    /**\n     * Dispatched when an animation reaches its ends.\n     * @event animationend\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {String} name The name of the animation that just ended.\n     * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n     * or calling gotoAndPlay() or gotoAndStop().\n     * @event change\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     */\n\n    // public methods:\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var hasContent = this.cacheCanvas || this.spriteSheet.complete;\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return true;\n      }\n      this._normalizeFrame();\n      var o = this.spriteSheet.getFrame(this._currentFrame | 0);\n      if (!o) {\n        return false;\n      }\n      var rect = o.rect;\n      if (rect.width && rect.height) {\n        ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height);\n      }\n      return true;\n    };\n\n    //Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n    //Bitmap. This is why they have no method implementations.\n\n    /**\n     * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n     * You should not cache Sprite instances as it can degrade performance.\n     * @method cache\n     **/\n\n    /**\n     * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n     * You should not cache Sprite instances as it can degrade performance.\n     * @method updateCache\n     **/\n\n    /**\n     * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n     * You should not cache Sprite instances as it can degrade performance.\n     * @method uncache\n     **/\n\n    /**\n     * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n     * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n     * unchanged.\n     * @method play\n     **/\n    p.play = function () {\n      this.paused = false;\n    };\n\n    /**\n     * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n     * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n     * will resume playback.\n     * @method stop\n     **/\n    p.stop = function () {\n      this.paused = true;\n    };\n\n    /**\n     * Sets paused to false and plays the specified animation name, named frame, or frame number.\n     * @method gotoAndPlay\n     * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n     * and begin playing.\n     **/\n    p.gotoAndPlay = function (frameOrAnimation) {\n      this.paused = false;\n      this._skipAdvance = true;\n      this._goto(frameOrAnimation);\n    };\n\n    /**\n     * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n     * @method gotoAndStop\n     * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n     * and stop.\n     **/\n    p.gotoAndStop = function (frameOrAnimation) {\n      this.paused = true;\n      this._goto(frameOrAnimation);\n    };\n\n    /**\n     * Advances the playhead. This occurs automatically each tick by default.\n     * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n     * or its SpriteSheet.\n     * @method advance\n    */\n    p.advance = function (time) {\n      var fps = this.framerate || this.spriteSheet.framerate;\n      var t = fps && time != null ? time / (1000 / fps) : 1;\n      this._normalizeFrame(t);\n    };\n\n    /**\n     * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n     * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n     * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n     *\n     * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n     * @method getBounds\n     * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n     * loaded.\n     **/\n    p.getBounds = function () {\n      // TODO: should this normalizeFrame?\n      return this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n    };\n\n    /**\n     * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n     * instances.\n     * @method clone\n     * @return {Sprite} a clone of the Sprite instance.\n     **/\n    p.clone = function () {\n      return this._cloneProps(new Sprite(this.spriteSheet));\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Sprite (name=\" + this.name + \")]\";\n    };\n\n    // private methods:\n    /**\n     * @method _cloneProps\n     * @param {Sprite} o\n     * @return {Sprite} o\n     * @protected\n     **/\n    p._cloneProps = function (o) {\n      this.DisplayObject__cloneProps(o);\n      o.currentFrame = this.currentFrame;\n      o.currentAnimation = this.currentAnimation;\n      o.paused = this.paused;\n      o.currentAnimationFrame = this.currentAnimationFrame;\n      o.framerate = this.framerate;\n      o._animation = this._animation;\n      o._currentFrame = this._currentFrame;\n      o._skipAdvance = this._skipAdvance;\n      return o;\n    };\n\n    /**\n     * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n     * ticks.\n     * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n     * @protected\n     * @method _tick\n     **/\n    p._tick = function (evtObj) {\n      if (!this.paused) {\n        if (!this._skipAdvance) {\n          this.advance(evtObj && evtObj.delta);\n        }\n        this._skipAdvance = false;\n      }\n      this.DisplayObject__tick(evtObj);\n    };\n\n    /**\n     * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n     * @protected\n     * @method _normalizeFrame\n     **/\n    p._normalizeFrame = function (frameDelta) {\n      frameDelta = frameDelta || 0;\n      var animation = this._animation;\n      var paused = this.paused;\n      var frame = this._currentFrame;\n      var l;\n      if (animation) {\n        var speed = animation.speed || 1;\n        var animFrame = this.currentAnimationFrame;\n        l = animation.frames.length;\n        if (animFrame + frameDelta * speed >= l) {\n          var next = animation.next;\n          if (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n            // something changed in the event stack, so we shouldn't make any more changes here.\n            return;\n          } else if (next) {\n            // sequence. Automatically calls _normalizeFrame again with the remaining frames.\n            return this._goto(next, frameDelta - (l - animFrame) / speed);\n          } else {\n            // end.\n            this.paused = true;\n            animFrame = animation.frames.length - 1;\n          }\n        } else {\n          animFrame += frameDelta * speed;\n        }\n        this.currentAnimationFrame = animFrame;\n        this._currentFrame = animation.frames[animFrame | 0];\n      } else {\n        frame = this._currentFrame += frameDelta;\n        l = this.spriteSheet.getNumFrames();\n        if (frame >= l && l > 0) {\n          if (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n            // looped.\n            if ((this._currentFrame -= l) >= l) {\n              return this._normalizeFrame();\n            }\n          }\n        }\n      }\n      frame = this._currentFrame | 0;\n      if (this.currentFrame != frame) {\n        this.currentFrame = frame;\n        this.dispatchEvent(\"change\");\n      }\n    };\n\n    /**\n     * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n     * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n     * @property _dispatchAnimationEnd\n     * @private\n     * @type {Function}\n     **/\n    p._dispatchAnimationEnd = function (animation, frame, paused, next, end) {\n      var name = animation ? animation.name : null;\n      if (this.hasEventListener(\"animationend\")) {\n        var evt = new createjs.Event(\"animationend\");\n        evt.name = name;\n        evt.next = next;\n        this.dispatchEvent(evt);\n      }\n      // did the animation get changed in the event stack?:\n      var changed = this._animation != animation || this._currentFrame != frame;\n      // if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n      if (!changed && !paused && this.paused) {\n        this.currentAnimationFrame = end;\n        changed = true;\n      }\n      return changed;\n    };\n\n    /**\n     * Moves the playhead to the specified frame number or animation.\n     * @method _goto\n     * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n     * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n     * @protected\n     **/\n    p._goto = function (frameOrAnimation, frame) {\n      this.currentAnimationFrame = 0;\n      if (isNaN(frameOrAnimation)) {\n        var data = this.spriteSheet.getAnimation(frameOrAnimation);\n        if (data) {\n          this._animation = data;\n          this.currentAnimation = frameOrAnimation;\n          this._normalizeFrame(frame);\n        }\n      } else {\n        this.currentAnimation = this._animation = null;\n        this._currentFrame = frameOrAnimation;\n        this._normalizeFrame();\n      }\n    };\n    createjs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // Shape.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n     * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n     * instances to display the same vector graphics with different positions or transforms.\n     *\n     * If the vector art will not\n     * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n     * rendering cost.\n     *\n     * <h4>Example</h4>\n     *\n     *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n     *      var shape = new createjs.Shape(graphics);\n     *\n     *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n     *      var shape = new createjs.Shape();\n     *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n     *\n     * @class Shape\n     * @extends DisplayObject\n     * @constructor\n     * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n     **/\n    function Shape(graphics) {\n      this.DisplayObject_constructor();\n\n      // public properties:\n      /**\n       * The graphics instance to display.\n       * @property graphics\n       * @type Graphics\n       **/\n      this.graphics = graphics ? graphics : new createjs.Graphics();\n    }\n    var p = createjs.extend(Shape, createjs.DisplayObject);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /**\n     * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var hasContent = this.cacheCanvas || this.graphics && !this.graphics.isEmpty();\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n    };\n\n    /**\n     * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n     * the draw was handled (useful for overriding functionality).\n     *\n     * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n     * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n     * @return {Boolean}\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return true;\n      }\n      this.graphics.draw(ctx, this);\n      return true;\n    };\n\n    /**\n     * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n     * their defaults (for example .parent).\n     * @method clone\n     * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n     * cloned. If false, the Graphics instance will be shared with the new Shape.\n     **/\n    p.clone = function (recursive) {\n      var g = recursive && this.graphics ? this.graphics.clone() : this.graphics;\n      return this._cloneProps(new Shape(g));\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Shape (name=\" + this.name + \")]\";\n    };\n    createjs.Shape = createjs.promote(Shape, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // Text.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n     * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n     * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n     * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n     *\n     * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n     * multiple font styles, you will need to create multiple text instances, and position them manually.\n     *\n     * <h4>Example</h4>\n     *\n     *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n     *      text.x = 100;\n     *      text.textBaseline = \"alphabetic\";\n     *\n     * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n     * before it can be displayed.\n     *\n     * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n     * browsers will render Text exactly the same.\n     * @class Text\n     * @extends DisplayObject\n     * @constructor\n     * @param {String} [text] The text to display.\n     * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n     * 36px Arial\").\n     * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n     * \"#F00\", \"red\", or \"#FF0000\").\n     **/\n    function Text(text, font, color) {\n      this.DisplayObject_constructor();\n\n      // public properties:\n      /**\n       * The text to display.\n       * @property text\n       * @type String\n       **/\n      this.text = text;\n\n      /**\n       * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n       * @property font\n       * @type String\n       **/\n      this.font = font;\n\n      /**\n       * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n       * It will also accept valid canvas fillStyle values.\n       * @property color\n       * @type String\n       **/\n      this.color = color;\n\n      /**\n       * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n       * information view the\n       * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n       * whatwg spec</a>. Default is \"left\".\n       * @property textAlign\n       * @type String\n       **/\n      this.textAlign = \"left\";\n\n      /**\n       * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n       * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n       * whatwg spec</a>. Default is \"top\".\n       * @property textBaseline\n       * @type String\n      */\n      this.textBaseline = \"top\";\n\n      /**\n       * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n       * shrunk to make it fit in this width. For detailed information view the\n       * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n       * whatwg spec</a>.\n       * @property maxWidth\n       * @type Number\n      */\n      this.maxWidth = null;\n\n      /**\n       * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n       * @property outline\n       * @type Number\n       **/\n      this.outline = 0;\n\n      /**\n       * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n       * the value of getMeasuredLineHeight is used.\n       * @property lineHeight\n       * @type Number\n       **/\n      this.lineHeight = 0;\n\n      /**\n       * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n       * the text will not be wrapped.\n       * @property lineWidth\n       * @type Number\n       **/\n      this.lineWidth = null;\n    }\n    var p = createjs.extend(Text, createjs.DisplayObject);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // static properties:\n    /**\n     * @property _workingContext\n     * @type CanvasRenderingContext2D\n     * @private\n     **/\n    var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n    if (canvas.getContext) {\n      Text._workingContext = canvas.getContext(\"2d\");\n      canvas.width = canvas.height = 1;\n    }\n\n    // constants:\n    /**\n     * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n     * @property H_OFFSETS\n     * @type Object\n     * @protected\n     * @static\n     **/\n    Text.H_OFFSETS = {\n      start: 0,\n      left: 0,\n      center: -0.5,\n      end: -1,\n      right: -1\n    };\n\n    /**\n     * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n     * @property H_OFFSETS\n     * @type Object\n     * @protected\n     * @static\n     **/\n    Text.V_OFFSETS = {\n      top: 0,\n      hanging: -0.01,\n      middle: -0.4,\n      alphabetic: -0.8,\n      ideographic: -0.85,\n      bottom: -1\n    };\n\n    // public methods:\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var hasContent = this.cacheCanvas || this.text != null && this.text !== \"\";\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n    };\n\n    /**\n     * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return true;\n      }\n      var col = this.color || \"#000\";\n      if (this.outline) {\n        ctx.strokeStyle = col;\n        ctx.lineWidth = this.outline * 1;\n      } else {\n        ctx.fillStyle = col;\n      }\n      this._drawText(this._prepContext(ctx));\n      return true;\n    };\n\n    /**\n     * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n     * @method getMeasuredWidth\n     * @return {Number} The measured, untransformed width of the text.\n     **/\n    p.getMeasuredWidth = function () {\n      return this._getMeasuredWidth(this.text);\n    };\n\n    /**\n     * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n     * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n     * @method getMeasuredLineHeight\n     * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n     * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n     **/\n    p.getMeasuredLineHeight = function () {\n      return this._getMeasuredWidth(\"M\") * 1.2;\n    };\n\n    /**\n     * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n     * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n     * this operation requires the text flowing logic to run, which has an associated CPU cost.\n     * @method getMeasuredHeight\n     * @return {Number} The approximate height of the untransformed multi-line text.\n     **/\n    p.getMeasuredHeight = function () {\n      return this._drawText(null, {}).height;\n    };\n\n    /**\n     * Docced in superclass.\n     */\n    p.getBounds = function () {\n      var rect = this.DisplayObject_getBounds();\n      if (rect) {\n        return rect;\n      }\n      if (this.text == null || this.text === \"\") {\n        return null;\n      }\n      var o = this._drawText(null, {});\n      var w = this.maxWidth && this.maxWidth < o.width ? this.maxWidth : o.width;\n      var x = w * Text.H_OFFSETS[this.textAlign || \"left\"];\n      var lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n      var y = lineHeight * Text.V_OFFSETS[this.textBaseline || \"top\"];\n      return this._rectangle.setValues(x, y, w, o.height);\n    };\n\n    /**\n     * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n     * of the drawn text. The lines property contains an array of strings, one for\n     * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n     * whitespace removed.\n     * @method getMetrics\n     * @return {Object} An object with width, height, and lines properties.\n     **/\n    p.getMetrics = function () {\n      var o = {\n        lines: []\n      };\n      o.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n      o.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline || \"top\"];\n      return this._drawText(null, o, o.lines);\n    };\n\n    /**\n     * Returns a clone of the Text instance.\n     * @method clone\n     * @return {Text} a clone of the Text instance.\n     **/\n    p.clone = function () {\n      return this._cloneProps(new Text(this.text, this.font, this.color));\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Text (text=\" + (this.text.length > 20 ? this.text.substr(0, 17) + \"...\" : this.text) + \")]\";\n    };\n\n    // private methods:\n    /**\n     * @method _cloneProps\n     * @param {Text} o\n     * @protected\n     * @return {Text} o\n     **/\n    p._cloneProps = function (o) {\n      this.DisplayObject__cloneProps(o);\n      o.textAlign = this.textAlign;\n      o.textBaseline = this.textBaseline;\n      o.maxWidth = this.maxWidth;\n      o.outline = this.outline;\n      o.lineHeight = this.lineHeight;\n      o.lineWidth = this.lineWidth;\n      return o;\n    };\n\n    /**\n     * @method _getWorkingContext\n     * @param {CanvasRenderingContext2D} ctx\n     * @return {CanvasRenderingContext2D}\n     * @protected\n     **/\n    p._prepContext = function (ctx) {\n      ctx.font = this.font || \"10px sans-serif\";\n      ctx.textAlign = this.textAlign || \"left\";\n      ctx.textBaseline = this.textBaseline || \"top\";\n      return ctx;\n    };\n\n    /**\n     * Draws multiline text.\n     * @method _drawText\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Object} o\n     * @param {Array} lines\n     * @return {Object}\n     * @protected\n     **/\n    p._drawText = function (ctx, o, lines) {\n      var paint = !!ctx;\n      if (!paint) {\n        ctx = Text._workingContext;\n        ctx.save();\n        this._prepContext(ctx);\n      }\n      var lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n      var maxW = 0,\n        count = 0;\n      var hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n      for (var i = 0, l = hardLines.length; i < l; i++) {\n        var str = hardLines[i];\n        var w = null;\n        if (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n          // text wrapping:\n          var words = str.split(/(\\s)/);\n          str = words[0];\n          w = ctx.measureText(str).width;\n          for (var j = 1, jl = words.length; j < jl; j += 2) {\n            // Line needs to wrap:\n            var wordW = ctx.measureText(words[j] + words[j + 1]).width;\n            if (w + wordW > this.lineWidth) {\n              if (paint) {\n                this._drawTextLine(ctx, str, count * lineHeight);\n              }\n              if (lines) {\n                lines.push(str);\n              }\n              if (w > maxW) {\n                maxW = w;\n              }\n              str = words[j + 1];\n              w = ctx.measureText(str).width;\n              count++;\n            } else {\n              str += words[j] + words[j + 1];\n              w += wordW;\n            }\n          }\n        }\n        if (paint) {\n          this._drawTextLine(ctx, str, count * lineHeight);\n        }\n        if (lines) {\n          lines.push(str);\n        }\n        if (o && w == null) {\n          w = ctx.measureText(str).width;\n        }\n        if (w > maxW) {\n          maxW = w;\n        }\n        count++;\n      }\n      if (o) {\n        o.width = maxW;\n        o.height = count * lineHeight;\n      }\n      if (!paint) {\n        ctx.restore();\n      }\n      return o;\n    };\n\n    /**\n     * @method _drawTextLine\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {String} text\n     * @param {Number} y\n     * @protected\n     **/\n    p._drawTextLine = function (ctx, text, y) {\n      // Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n      if (this.outline) {\n        ctx.strokeText(text, 0, y, this.maxWidth || 0xFFFF);\n      } else {\n        ctx.fillText(text, 0, y, this.maxWidth || 0xFFFF);\n      }\n    };\n\n    /**\n     * @method _getMeasuredWidth\n     * @param {String} text\n     * @protected\n     **/\n    p._getMeasuredWidth = function (text) {\n      var ctx = Text._workingContext;\n      ctx.save();\n      var w = this._prepContext(ctx).measureText(text).width;\n      ctx.restore();\n      return w;\n    };\n    createjs.Text = createjs.promote(Text, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // BitmapText.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\n     * using new line characters, but automatic wrapping is not supported. See the \n     * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n     * property for more information on defining glyphs.\n     * \n     * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\n     * As such, methods like addChild and removeChild are disabled.\n     * @class BitmapText\n     * @extends DisplayObject\n     * @param {String} [text=\"\"] The text to display.\n     * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n     * @constructor\n     **/\n    function BitmapText(text, spriteSheet) {\n      this.Container_constructor();\n\n      // public properties:\n      /**\n       * The text to display.\n       * @property text\n       * @type String\n       * @default \"\"\n       **/\n      this.text = text || \"\";\n\n      /**\n       * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n       * should have a single frame animation defined in the sprite sheet named the same as\n       * corresponding character. For example, the following animation definition:\n       *\n       * \t\t\"A\": {frames: [0]}\n       *\n       * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n       * is also acceptable:\n       * \n       * \t\t\"A\": 0\n       *\n       * Note that if a character in the text is not found in the sprite sheet, it will also\n       * try to use the alternate case (upper or lower).\n       *\n       * See SpriteSheet for more information on defining sprite sheet data.\n       * @property spriteSheet\n       * @type SpriteSheet\n       * @default null\n       **/\n      this.spriteSheet = spriteSheet;\n\n      /**\n       * The height of each line of text. If 0, then it will use a line height calculated\n       * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n       * those characters are not defined, it will use the height of the first frame of the\n       * sprite sheet.\n       * @property lineHeight\n       * @type Number\n       * @default 0\n       **/\n      this.lineHeight = 0;\n\n      /**\n       * This spacing (in pixels) will be added after each character in the output.\n       * @property letterSpacing\n       * @type Number\n       * @default 0\n       **/\n      this.letterSpacing = 0;\n\n      /**\n       * If a space character is not defined in the sprite sheet, then empty pixels equal to\n       * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n       * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n       * those characters are not defined, it will use the width of the first frame of the\n       * sprite sheet.\n       * @property spaceWidth\n       * @type Number\n       * @default 0\n       **/\n      this.spaceWidth = 0;\n\n      // private properties:\n      /**\n      * @property _oldProps\n      * @type Object\n      * @protected\n      **/\n      this._oldProps = {\n        text: 0,\n        spriteSheet: 0,\n        lineHeight: 0,\n        letterSpacing: 0,\n        spaceWidth: 0\n      };\n    }\n    var p = createjs.extend(BitmapText, createjs.Container);\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // static properties:\n    /**\n     * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n     * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n     * retained, slightly increasing memory use, but reducing instantiation.\n     * @property maxPoolSize\n     * @type Number\n     * @static\n     * @default 100\n     **/\n    BitmapText.maxPoolSize = 100;\n\n    /**\n     * Sprite object pool.\n     * @type {Array}\n     * @static\n     * @private\n     */\n    BitmapText._spritePool = [];\n\n    // public methods:\n    /**\n     * Docced in superclass.\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return;\n      }\n      this._updateText();\n      this.Container_draw(ctx, ignoreCache);\n    };\n\n    /**\n     * Docced in superclass.\n     **/\n    p.getBounds = function () {\n      this._updateText();\n      return this.Container_getBounds();\n    };\n\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      var hasContent = this.cacheCanvas || this.spriteSheet && this.spriteSheet.complete && this.text;\n      return !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n    };\n    p.clone = function () {\n      return this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n    };\n\n    /**\n     * <strong>Disabled in BitmapText.</strong>\n     * @method addChild\n     **/\n    /**\n     * <strong>Disabled in BitmapText.</strong>\n     * @method addChildAt\n     **/\n    /**\n     * <strong>Disabled in BitmapText.</strong>\n     * @method removeChild\n     **/\n    /**\n     * <strong>Disabled in BitmapText.</strong>\n     * @method removeChildAt\n     **/\n    /**\n     * <strong>Disabled in BitmapText.</strong>\n     * @method removeAllChildren\n     **/\n    p.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function () {};\n\n    // private methods:\n    /**\n    * @method _cloneProps\n    * @param {BitmapText} o\n    * @return {BitmapText} o\n    * @protected\n    **/\n    p._cloneProps = function (o) {\n      this.Container__cloneProps(o);\n      o.lineHeight = this.lineHeight;\n      o.letterSpacing = this.letterSpacing;\n      o.spaceWidth = this.spaceWidth;\n      return o;\n    };\n\n    /**\n     * @method _getFrameIndex\n     * @param {String} character\n     * @param {SpriteSheet} spriteSheet\n     * @return {Number}\n     * @protected\n     **/\n    p._getFrameIndex = function (character, spriteSheet) {\n      var c,\n        o = spriteSheet.getAnimation(character);\n      if (!o) {\n        character != (c = character.toUpperCase()) || character != (c = character.toLowerCase()) || (c = null);\n        if (c) {\n          o = spriteSheet.getAnimation(c);\n        }\n      }\n      return o && o.frames[0];\n    };\n\n    /**\n     * @method _getFrame\n     * @param {String} character\n     * @param {SpriteSheet} spriteSheet\n     * @return {Object}\n     * @protected\n     **/\n    p._getFrame = function (character, spriteSheet) {\n      var index = this._getFrameIndex(character, spriteSheet);\n      return index == null ? index : spriteSheet.getFrame(index);\n    };\n\n    /**\n     * @method _getLineHeight\n     * @param {SpriteSheet} ss\n     * @return {Number}\n     * @protected\n     **/\n    p._getLineHeight = function (ss) {\n      var frame = this._getFrame(\"1\", ss) || this._getFrame(\"T\", ss) || this._getFrame(\"L\", ss) || ss.getFrame(0);\n      return frame ? frame.rect.height : 1;\n    };\n    /**\n     * @method _getSpaceWidth\n     * @param {SpriteSheet} ss\n     * @return {Number}\n     * @protected\n     **/\n    p._getSpaceWidth = function (ss) {\n      var frame = this._getFrame(\"1\", ss) || this._getFrame(\"l\", ss) || this._getFrame(\"e\", ss) || this._getFrame(\"a\", ss) || ss.getFrame(0);\n      return frame ? frame.rect.width : 1;\n    };\n\n    /**\n     * @method _drawText\n     * @protected\n     **/\n    p._updateText = function () {\n      var x = 0,\n        y = 0,\n        o = this._oldProps,\n        change = false,\n        spaceW = this.spaceWidth,\n        lineH = this.lineHeight,\n        ss = this.spriteSheet;\n      var pool = BitmapText._spritePool,\n        kids = this.children,\n        childIndex = 0,\n        numKids = kids.length,\n        sprite;\n      for (var n in o) {\n        if (o[n] != this[n]) {\n          o[n] = this[n];\n          change = true;\n        }\n      }\n      if (!change) {\n        return;\n      }\n      var hasSpace = !!this._getFrame(\" \", ss);\n      if (!hasSpace && !spaceW) {\n        spaceW = this._getSpaceWidth(ss);\n      }\n      if (!lineH) {\n        lineH = this._getLineHeight(ss);\n      }\n      for (var i = 0, l = this.text.length; i < l; i++) {\n        var character = this.text.charAt(i);\n        if (character == \" \" && !hasSpace) {\n          x += spaceW;\n          continue;\n        } else if (character == \"\\n\" || character == \"\\r\") {\n          if (character == \"\\r\" && this.text.charAt(i + 1) == \"\\n\") {\n            i++;\n          } // crlf\n          x = 0;\n          y += lineH;\n          continue;\n        }\n        var index = this._getFrameIndex(character, ss);\n        if (index == null) {\n          continue;\n        }\n        if (childIndex < numKids) {\n          sprite = kids[childIndex];\n        } else {\n          kids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n          sprite.parent = this;\n          numKids++;\n        }\n        sprite.spriteSheet = ss;\n        sprite.gotoAndStop(index);\n        sprite.x = x;\n        sprite.y = y;\n        childIndex++;\n        x += sprite.getBounds().width + this.letterSpacing;\n      }\n      while (numKids > childIndex) {\n        // faster than removeChild.\n        pool.push(sprite = kids.pop());\n        sprite.parent = null;\n        numKids--;\n      }\n      if (pool.length > BitmapText.maxPoolSize) {\n        pool.length = BitmapText.maxPoolSize;\n      }\n    };\n    createjs.BitmapText = createjs.promote(BitmapText, \"Container\");\n  })();\n\n  //##############################################################################\n  // MovieClip.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n     * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\n     * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\n     * in the main EaselJS library.\n     *\n     * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n     * been made to support time-based timelines in the future.\n     *\n     * <h4>Example</h4>\n     * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n     * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n     *\n     *      var stage = new createjs.Stage(\"canvas\");\n     *      createjs.Ticker.addEventListener(\"tick\", stage);\n     *\n     *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\n     *      stage.addChild(mc);\n     *\n     *      var child1 = new createjs.Shape(\n     *          new createjs.Graphics().beginFill(\"#999999\")\n     *              .drawCircle(30,30,30));\n     *      var child2 = new createjs.Shape(\n     *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n     *              .drawCircle(30,30,30));\n     *\n     *      mc.timeline.addTween(\n     *          createjs.Tween.get(child1)\n     *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n     *      mc.timeline.addTween(\n     *          createjs.Tween.get(child2)\n     *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n     *\n     *      mc.gotoAndPlay(\"start\");\n     *\n     * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n     * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n     * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n     *\n     * @class MovieClip\n     * @main MovieClip\n     * @extends Container\n     * @constructor\n     * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\n     * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\n     * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\n     * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\n     * property.\n     * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\n     * property. The default is `true`.\n     * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\n     * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\n     **/\n    function MovieClip(mode, startPosition, loop, labels) {\n      this.Container_constructor();\n      !MovieClip.inited && MovieClip.init(); // static init\n\n      // public properties:\n      /**\n       * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n       * See each constant for a description of the behaviour.\n       * @property mode\n       * @type String\n       * @default null\n       **/\n      this.mode = mode || MovieClip.INDEPENDENT;\n\n      /**\n       * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n       * @property startPosition\n       * @type Number\n       * @default 0\n       */\n      this.startPosition = startPosition || 0;\n\n      /**\n       * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\n       * @property loop\n       * @type Boolean\n       * @default true\n       */\n      this.loop = loop;\n\n      /**\n       * The current frame of the movieclip.\n       * @property currentFrame\n       * @type Number\n       * @default 0\n       * @readonly\n       */\n      this.currentFrame = 0;\n\n      /**\n       * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n       * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n       * instances to the timeline.\n       *\n       * <h4>Example</h4>\n       *\n       *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n       *      var mc = new createjs.MovieClip();\n       *      mc.timeline.addTween(tween);\n       *\n       * Elements can be added and removed from the timeline by toggling an \"_off\" property\n       * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n       * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n       * frame 1. You can use the \"visible\" property to achieve the same effect.\n       *\n       *      var tween = createjs.Tween.get(target).to({_off:false})\n       *          .wait(1).to({_off:true})\n       *          .wait(1).to({_off:false});\n       *\n       * @property timeline\n       * @type Timeline\n       * @default null\n       */\n      this.timeline = new createjs.Timeline(null, labels, {\n        paused: true,\n        position: startPosition,\n        useTicks: true\n      });\n\n      /**\n       * If true, the MovieClip's position will not advance when ticked.\n       * @property paused\n       * @type Boolean\n       * @default false\n       */\n      this.paused = false;\n\n      /**\n       * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n       * @property actionsEnabled\n       * @type Boolean\n       * @default true\n       */\n      this.actionsEnabled = true;\n\n      /**\n       * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n       * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n       * <br><br>\n       * For example, if you had a character animation with a \"body\" child MovieClip instance\n       * with different costumes on each frame, you could set body.autoReset = false, so that\n       * you can manually change the frame it is on, without worrying that it will be reset\n       * automatically.\n       * @property autoReset\n       * @type Boolean\n       * @default true\n       */\n      this.autoReset = true;\n\n      /**\n       * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n       * @property frameBounds\n       * @type Array\n       * @default null\n       */\n      this.frameBounds = this.frameBounds || null; // TODO: Deprecated. This is for backwards support of FlashCC\n\n      /**\n       * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n       * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n       * framerate.\n       *\n       * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n       * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n       * vary slightly between frames.\n       *\n       * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n       * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n       * @property framerate\n       * @type {Number}\n       * @default null\n       **/\n      this.framerate = null;\n\n      // private properties:\n      /**\n       * @property _synchOffset\n       * @type Number\n       * @default 0\n       * @private\n       */\n      this._synchOffset = 0;\n\n      /**\n       * @property _prevPos\n       * @type Number\n       * @default -1\n       * @private\n       */\n      this._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\n      /**\n       * @property _prevPosition\n       * @type Number\n       * @default 0\n       * @private\n       */\n      this._prevPosition = 0;\n\n      /**\n       * The time remaining from the previous tick, only applicable when .framerate is set.\n       * @property _t\n       * @type Number\n       * @private\n       */\n      this._t = 0;\n\n      /**\n       * List of display objects that are actively being managed by the MovieClip.\n       * @property _managed\n       * @type Object\n       * @private\n       */\n      this._managed = {};\n    }\n    var p = createjs.extend(MovieClip, createjs.Container);\n\n    // constants:\n    /**\n     * The MovieClip will advance independently of its parent, even if its parent is paused.\n     * This is the default mode.\n     * @property INDEPENDENT\n     * @static\n     * @type String\n     * @default \"independent\"\n     * @readonly\n     **/\n    MovieClip.INDEPENDENT = \"independent\";\n\n    /**\n     * The MovieClip will only display a single frame (as determined by the startPosition property).\n     * @property SINGLE_FRAME\n     * @static\n     * @type String\n     * @default \"single\"\n     * @readonly\n     **/\n    MovieClip.SINGLE_FRAME = \"single\";\n\n    /**\n     * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n     * the parent MovieClip.\n     * @property SYNCHED\n     * @static\n     * @type String\n     * @default \"synched\"\n     * @readonly\n     **/\n    MovieClip.SYNCHED = \"synched\";\n\n    // static properties:\n    MovieClip.inited = false;\n\n    // static methods:\n    MovieClip.init = function () {\n      if (MovieClip.inited) {\n        return;\n      }\n      // plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n      MovieClipPlugin.install();\n      MovieClip.inited = true;\n    };\n\n    // getter / setters:\n    /**\n     * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n     * @method getLabels\n     * @return {Array}\n     * @deprecated\n     **/\n    p.getLabels = function () {\n      return this.timeline.getLabels();\n    };\n\n    /**\n     * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n     * @method getCurrentLabel\n     * @return {String}\n     * @deprecated\n     **/\n    p.getCurrentLabel = function () {\n      this._updateTimeline();\n      return this.timeline.getCurrentLabel();\n    };\n\n    /**\n     * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n     * @method getDuration\n     * @return {Number}\n     * @protected\n     **/\n    p.getDuration = function () {\n      return this.timeline.duration;\n    };\n\n    /**\n     * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n     * Shortcut to TweenJS: Timeline.getLabels();\n     * @property labels\n     * @type {Array}\n     * @readonly\n     **/\n\n    /**\n     * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\n     * for more information.\n     * @property currentLabel\n     * @type {String}\n     * @readonly\n     **/\n\n    /**\n     * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\n     * and provided for Flash API compatibility.\n     * @property totalFrames\n     * @type {Number}\n     * @readonly\n     **/\n\n    /**\n     * Returns the duration of this MovieClip in seconds or ticks.\n     * @property duration\n     * @type {Number}\n     * @readonly\n     **/\n    try {\n      Object.defineProperties(p, {\n        labels: {\n          get: p.getLabels\n        },\n        currentLabel: {\n          get: p.getCurrentLabel\n        },\n        totalFrames: {\n          get: p.getDuration\n        },\n        duration: {\n          get: p.getDuration\n        }\n      });\n    } catch (e) {}\n\n    // public methods:\n    /**\n     * Constructor alias for backwards compatibility. This method will be removed in future versions.\n     * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n     * @method initialize\n     * @deprecated in favour of `createjs.promote()`\n     **/\n    p.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\n\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     **/\n    p.isVisible = function () {\n      // children are placed in draw, so we can't determine if we have content.\n      return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     **/\n    p.draw = function (ctx, ignoreCache) {\n      // draw to cache first:\n      if (this.DisplayObject_draw(ctx, ignoreCache)) {\n        return true;\n      }\n      this._updateTimeline();\n      this.Container_draw(ctx, ignoreCache);\n      return true;\n    };\n\n    /**\n     * Sets paused to false.\n     * @method play\n     **/\n    p.play = function () {\n      this.paused = false;\n    };\n\n    /**\n     * Sets paused to true.\n     * @method stop\n     **/\n    p.stop = function () {\n      this.paused = true;\n    };\n\n    /**\n     * Advances this movie clip to the specified position or label and sets paused to false.\n     * @method gotoAndPlay\n     * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n     **/\n    p.gotoAndPlay = function (positionOrLabel) {\n      this.paused = false;\n      this._goto(positionOrLabel);\n    };\n\n    /**\n     * Advances this movie clip to the specified position or label and sets paused to true.\n     * @method gotoAndStop\n     * @param {String|Number} positionOrLabel The animation or frame name to go to.\n     **/\n    p.gotoAndStop = function (positionOrLabel) {\n      this.paused = true;\n      this._goto(positionOrLabel);\n    };\n\n    /**\n     * Advances the playhead. This occurs automatically each tick by default.\n     * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n     * @method advance\n    */\n    p.advance = function (time) {\n      // TODO: should we worry at all about clips who change their own modes via frame scripts?\n      var independent = MovieClip.INDEPENDENT;\n      if (this.mode != independent) {\n        return;\n      }\n      var o = this,\n        fps = o.framerate;\n      while ((o = o.parent) && fps == null) {\n        if (o.mode == independent) {\n          fps = o._framerate;\n        }\n      }\n      this._framerate = fps;\n      var t = fps != null && fps != -1 && time != null ? time / (1000 / fps) + this._t : 1;\n      var frames = t | 0;\n      this._t = t - frames; // leftover time\n\n      while (!this.paused && frames--) {\n        this._prevPosition = this._prevPos < 0 ? 0 : this._prevPosition + 1;\n        this._updateTimeline();\n      }\n    };\n\n    /**\n     * MovieClip instances cannot be cloned.\n     * @method clone\n     **/\n    p.clone = function () {\n      // TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n      throw \"MovieClip cannot be cloned.\";\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[MovieClip (name=\" + this.name + \")]\";\n    };\n\n    // private methods:\n    /**\n     * @method _tick\n     * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n     * function.\n     * @protected\n     **/\n    p._tick = function (evtObj) {\n      this.advance(evtObj && evtObj.delta);\n      this.Container__tick(evtObj);\n    };\n\n    /**\n     * @method _goto\n     * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n     * @protected\n     **/\n    p._goto = function (positionOrLabel) {\n      var pos = this.timeline.resolve(positionOrLabel);\n      if (pos == null) {\n        return;\n      }\n      // prevent _updateTimeline from overwriting the new position because of a reset:\n      if (this._prevPos == -1) {\n        this._prevPos = NaN;\n      }\n      this._prevPosition = pos;\n      this._t = 0;\n      this._updateTimeline();\n    };\n\n    /**\n     * @method _reset\n     * @private\n     **/\n    p._reset = function () {\n      this._prevPos = -1;\n      this._t = this.currentFrame = 0;\n      this.paused = false;\n    };\n\n    /**\n     * @method _updateTimeline\n     * @protected\n     **/\n    p._updateTimeline = function () {\n      var tl = this.timeline;\n      var synched = this.mode != MovieClip.INDEPENDENT;\n      tl.loop = this.loop == null ? true : this.loop;\n      var pos = synched ? this.startPosition + (this.mode == MovieClip.SINGLE_FRAME ? 0 : this._synchOffset) : this._prevPos < 0 ? 0 : this._prevPosition;\n      var mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\n\n      // pre-assign currentFrame so it is available to frame scripts:\n      this.currentFrame = tl._calcPosition(pos);\n\n      // update timeline position, ignoring actions if this is a graphic.\n      tl.setPosition(pos, mode);\n      this._prevPosition = tl._prevPosition;\n      if (this._prevPos == tl._prevPos) {\n        return;\n      }\n      this.currentFrame = this._prevPos = tl._prevPos;\n      for (var n in this._managed) {\n        this._managed[n] = 1;\n      }\n      var tweens = tl._tweens;\n      for (var i = 0, l = tweens.length; i < l; i++) {\n        var tween = tweens[i];\n        var target = tween._target;\n        if (target == this || tween.passive) {\n          continue;\n        } // TODO: this assumes actions tween has this as the target. Valid?\n        var offset = tween._stepPosition;\n        if (target instanceof createjs.DisplayObject) {\n          // motion tween.\n          this._addManagedChild(target, offset);\n        } else {\n          // state tween.\n          this._setState(target.state, offset);\n        }\n      }\n      var kids = this.children;\n      for (i = kids.length - 1; i >= 0; i--) {\n        var id = kids[i].id;\n        if (this._managed[id] == 1) {\n          this.removeChildAt(i);\n          delete this._managed[id];\n        }\n      }\n    };\n\n    /**\n     * @method _setState\n     * @param {Array} state\n     * @param {Number} offset\n     * @protected\n     **/\n    p._setState = function (state, offset) {\n      if (!state) {\n        return;\n      }\n      for (var i = state.length - 1; i >= 0; i--) {\n        var o = state[i];\n        var target = o.t;\n        var props = o.p;\n        for (var n in props) {\n          target[n] = props[n];\n        }\n        this._addManagedChild(target, offset);\n      }\n    };\n\n    /**\n     * Adds a child to the timeline, and sets it up as a managed child.\n     * @method _addManagedChild\n     * @param {MovieClip} child The child MovieClip to manage\n     * @param {Number} offset\n     * @private\n     **/\n    p._addManagedChild = function (child, offset) {\n      if (child._off) {\n        return;\n      }\n      this.addChildAt(child, 0);\n      if (child instanceof MovieClip) {\n        child._synchOffset = offset;\n        // TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n        if (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) {\n          child._reset();\n        }\n      }\n      this._managed[child.id] = 2;\n    };\n\n    /**\n     * @method _getBounds\n     * @param {Matrix2D} matrix\n     * @param {Boolean} ignoreTransform\n     * @return {Rectangle}\n     * @protected\n     **/\n    p._getBounds = function (matrix, ignoreTransform) {\n      var bounds = this.DisplayObject_getBounds();\n      if (!bounds) {\n        this._updateTimeline();\n        if (this.frameBounds) {\n          bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]);\n        }\n      }\n      if (bounds) {\n        return this._transformBounds(bounds, matrix, ignoreTransform);\n      }\n      return this.Container__getBounds(matrix, ignoreTransform);\n    };\n    createjs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n    // MovieClipPlugin for TweenJS:\n    /**\n     * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n     * property from tweening.\n     * @private\n     * @class MovieClipPlugin\n     * @constructor\n     **/\n    function MovieClipPlugin() {\n      throw \"MovieClipPlugin cannot be instantiated.\";\n    }\n\n    /**\n     * @method priority\n     * @private\n     **/\n    MovieClipPlugin.priority = 100; // very high priority, should run first\n\n    /**\n     * @method install\n     * @private\n     **/\n    MovieClipPlugin.install = function () {\n      createjs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\n    };\n\n    /**\n     * @method init\n     * @param {Tween} tween\n     * @param {String} prop\n     * @param {String|Number|Boolean} value\n     * @private\n     **/\n    MovieClipPlugin.init = function (tween, prop, value) {\n      return value;\n    };\n\n    /**\n     * @method step\n     * @private\n     **/\n    MovieClipPlugin.step = function () {\n      // unused.\n    };\n\n    /**\n     * @method tween\n     * @param {Tween} tween\n     * @param {String} prop\n     * @param {String | Number | Boolean} value\n     * @param {Array} startValues\n     * @param {Array} endValues\n     * @param {Number} ratio\n     * @param {Object} wait\n     * @param {Object} end\n     * @return {*}\n     */\n    MovieClipPlugin.tween = function (tween, prop, value, startValues, endValues, ratio, wait, end) {\n      if (!(tween.target instanceof MovieClip)) {\n        return value;\n      }\n      return ratio == 1 ? endValues[prop] : startValues[prop];\n    };\n  })();\n\n  //##############################################################################\n  // SpriteSheetUtils.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n     * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n     * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n     * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n     * @class SpriteSheetUtils\n     * @static\n     **/\n    function SpriteSheetUtils() {\n      throw \"SpriteSheetUtils cannot be instantiated\";\n    }\n\n    // private static properties:\n    /**\n     * @property _workingCanvas\n     * @static\n     * @type HTMLCanvasElement | Object\n     * @protected\n    */\n    /**\n     * @property _workingContext\n     * @static\n     * @type CanvasRenderingContext2D\n     * @protected\n    */\n    var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n    if (canvas.getContext) {\n      SpriteSheetUtils._workingCanvas = canvas;\n      SpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n      canvas.width = canvas.height = 1;\n    }\n\n    // public static methods:\n    /**\n     * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\n     * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\n     * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\n     * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\n     * <br/><br/>\n     * For example:<br/>\n     * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\n     * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\n     * <br/><br/>\n     * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\n     * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\n     * which is why addFlippedFrames is available.\n     * @method addFlippedFrames\n     * @static\n     * @param {SpriteSheet} spriteSheet\n     * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\n     * @param {Boolean} vertical If true, vertically flipped frames will be added.\n     * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\n     * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\n     **/\n    SpriteSheetUtils.addFlippedFrames = function (spriteSheet, horizontal, vertical, both) {\n      if (!horizontal && !vertical && !both) {\n        return;\n      }\n      var count = 0;\n      if (horizontal) {\n        SpriteSheetUtils._flip(spriteSheet, ++count, true, false);\n      }\n      if (vertical) {\n        SpriteSheetUtils._flip(spriteSheet, ++count, false, true);\n      }\n      if (both) {\n        SpriteSheetUtils._flip(spriteSheet, ++count, true, true);\n      }\n    };\n\n    /**\n     * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n     * to use a spritesheet frame as the source for a bitmap fill.\n     *\n     * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n     * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n     * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n     * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n     *\n     * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n     * @method extractFrame\n     * @static\n     * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n     * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n     * name is specified, only the first frame of the animation will be extracted.\n     * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n    */\n    SpriteSheetUtils.extractFrame = function (spriteSheet, frameOrAnimation) {\n      if (isNaN(frameOrAnimation)) {\n        frameOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n      }\n      var data = spriteSheet.getFrame(frameOrAnimation);\n      if (!data) {\n        return null;\n      }\n      var r = data.rect;\n      var canvas = SpriteSheetUtils._workingCanvas;\n      canvas.width = r.width;\n      canvas.height = r.height;\n      SpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n      var img = document.createElement(\"img\");\n      img.src = canvas.toDataURL(\"image/png\");\n      return img;\n    };\n\n    /**\n     * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\n     * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\n     * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\n     * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\n     * @method mergeAlpha\n     * @static\n     * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\n     * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\n     * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\n     * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\n     * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\n    */\n    SpriteSheetUtils.mergeAlpha = function (rgbImage, alphaImage, canvas) {\n      if (!canvas) {\n        canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n      }\n      canvas.width = Math.max(alphaImage.width, rgbImage.width);\n      canvas.height = Math.max(alphaImage.height, rgbImage.height);\n      var ctx = canvas.getContext(\"2d\");\n      ctx.save();\n      ctx.drawImage(rgbImage, 0, 0);\n      ctx.globalCompositeOperation = \"destination-in\";\n      ctx.drawImage(alphaImage, 0, 0);\n      ctx.restore();\n      return canvas;\n    };\n\n    // private static methods:\n    SpriteSheetUtils._flip = function (spriteSheet, count, h, v) {\n      var imgs = spriteSheet._images;\n      var canvas = SpriteSheetUtils._workingCanvas;\n      var ctx = SpriteSheetUtils._workingContext;\n      var il = imgs.length / count;\n      for (var i = 0; i < il; i++) {\n        var src = imgs[i];\n        src.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, canvas.width + 1, canvas.height + 1);\n        canvas.width = src.width;\n        canvas.height = src.height;\n        ctx.setTransform(h ? -1 : 1, 0, 0, v ? -1 : 1, h ? src.width : 0, v ? src.height : 0);\n        ctx.drawImage(src, 0, 0);\n        var img = document.createElement(\"img\");\n        img.src = canvas.toDataURL(\"image/png\");\n        // work around a strange bug in Safari:\n        img.width = src.width;\n        img.height = src.height;\n        imgs.push(img);\n      }\n      var frames = spriteSheet._frames;\n      var fl = frames.length / count;\n      for (i = 0; i < fl; i++) {\n        src = frames[i];\n        var rect = src.rect.clone();\n        img = imgs[src.image.__tmp + il * count];\n        var frame = {\n          image: img,\n          rect: rect,\n          regX: src.regX,\n          regY: src.regY\n        };\n        if (h) {\n          rect.x = img.width - rect.x - rect.width; // update rect\n          frame.regX = rect.width - src.regX; // update registration point\n        }\n        if (v) {\n          rect.y = img.height - rect.y - rect.height; // update rect\n          frame.regY = rect.height - src.regY; // update registration point\n        }\n        frames.push(frame);\n      }\n      var sfx = \"_\" + (h ? \"h\" : \"\") + (v ? \"v\" : \"\");\n      var names = spriteSheet._animations;\n      var data = spriteSheet._data;\n      var al = names.length / count;\n      for (i = 0; i < al; i++) {\n        var name = names[i];\n        src = data[name];\n        var anim = {\n          name: name + sfx,\n          speed: src.speed,\n          next: src.next,\n          frames: []\n        };\n        if (src.next) {\n          anim.next += sfx;\n        }\n        frames = src.frames;\n        for (var j = 0, l = frames.length; j < l; j++) {\n          anim.frames.push(frames[j] + fl * count);\n        }\n        data[anim.name] = anim;\n        names.push(anim.name);\n      }\n    };\n    createjs.SpriteSheetUtils = SpriteSheetUtils;\n  })();\n\n  //##############################################################################\n  // SpriteSheetBuilder.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n     * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n     * render them at run time as SpriteSheets for better performance.\n     *\n     * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n     * without locking the UI.\n     *\n     * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n     * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n     * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n     * @class SpriteSheetBuilder\n     * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n     * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n     * @extends EventDispatcher\n     * @constructor\n     **/\n    function SpriteSheetBuilder(framerate) {\n      this.EventDispatcher_constructor();\n\n      // public properties:\n      /**\n       * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n       * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n       * dimensions, then additional images will be created as needed.\n       * @property maxWidth\n       * @type Number\n       * @default 2048\n      */\n      this.maxWidth = 2048;\n\n      /**\n       * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n       * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n       * dimensions, then additional images will be created as needed.\n       * @property maxHeight\n       * @type Number\n       * @default 2048\n       **/\n      this.maxHeight = 2048;\n\n      /**\n       * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n       * @property spriteSheet\n       * @type SpriteSheet\n       **/\n      this.spriteSheet = null;\n\n      /**\n       * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n       * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n       * to the a specific device resolution (ex. tablet vs mobile).\n       * @property scale\n       * @type Number\n       * @default 1\n       **/\n      this.scale = 1;\n\n      /**\n      * The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n      * @property padding\n      * @type Number\n      * @default 1\n      **/\n      this.padding = 1;\n\n      /**\n       * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n       * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n       * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n       * Defaults to 0.3.\n       * @property timeSlice\n       * @type Number\n       * @default 0.3\n       **/\n      this.timeSlice = 0.3;\n\n      /**\n       * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n       * been initiated.\n       * @property progress\n       * @type Number\n       * @default -1\n       * @readonly\n       */\n      this.progress = -1;\n\n      /**\n       * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n       * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n       * framerate.\n       * @property framerate\n       * @type Number\n       * @default 0\n       */\n      this.framerate = framerate || 0;\n\n      // private properties:\n      /**\n       * @property _frames\n       * @protected\n       * @type Array\n       **/\n      this._frames = [];\n\n      /**\n       * @property _animations\n       * @protected\n       * @type Array\n       **/\n      this._animations = {};\n\n      /**\n       * @property _data\n       * @protected\n       * @type Array\n       **/\n      this._data = null;\n\n      /**\n       * @property _nextFrameIndex\n       * @protected\n       * @type Number\n       **/\n      this._nextFrameIndex = 0;\n\n      /**\n       * @property _index\n       * @protected\n       * @type Number\n       **/\n      this._index = 0;\n\n      /**\n       * @property _timerID\n       * @protected\n       * @type Number\n       **/\n      this._timerID = null;\n\n      /**\n       * @property _scale\n       * @protected\n       * @type Number\n       **/\n      this._scale = 1;\n    }\n    var p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // constants:\n    SpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n    SpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n    // events:\n    /**\n     * Dispatched when a build completes.\n     * @event complete\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.6.0\n     */\n\n    /**\n     * Dispatched when an asynchronous build has progress.\n     * @event progress\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {Number} progress The current progress value (0-1).\n     * @since 0.6.0\n     */\n\n    // public methods:\n    /**\n     * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n     * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n     * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n     * times, but manipulate it or its children to change it to generate different frames.\n     *\n     * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n     * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n     * and pass in the Container as the source.\n     * @method addFrame\n     * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n     * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n     * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n     * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n     * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n     * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n     * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n     * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n     **/\n    p.addFrame = function (source, sourceRect, scale, setupFunction, setupData) {\n      if (this._data) {\n        throw SpriteSheetBuilder.ERR_RUNNING;\n      }\n      var rect = sourceRect || source.bounds || source.nominalBounds;\n      if (!rect && source.getBounds) {\n        rect = source.getBounds();\n      }\n      if (!rect) {\n        return null;\n      }\n      scale = scale || 1;\n      return this._frames.push({\n        source: source,\n        sourceRect: rect,\n        scale: scale,\n        funct: setupFunction,\n        data: setupData,\n        index: this._frames.length,\n        height: rect.height * scale\n      }) - 1;\n    };\n\n    /**\n     * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n     * @method addAnimation\n     * @param {String} name The name for the animation.\n     * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n     * that played frame indexes 3, 6, and 5 in that order.\n     * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n     * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n     * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n     * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n     * the opposite effect.\n     **/\n    p.addAnimation = function (name, frames, next, speed) {\n      if (this._data) {\n        throw SpriteSheetBuilder.ERR_RUNNING;\n      }\n      this._animations[name] = {\n        frames: frames,\n        next: next,\n        speed: speed\n      };\n    };\n\n    /**\n     * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n     * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n     * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n     * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n     * frame index 10 to 14.\n     *\n     * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n     * set to `false`, ending on the last frame.\n     * @method addMovieClip\n     * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n     * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n     * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n     * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n     * found, the MovieClip will be skipped.\n     * @param {Number} [scale=1] The scale to draw the movie clip at.\n     * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n     * with three parameters: the source, setupData, and the frame index.\n     * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n     * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n     * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n     * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n     **/\n    p.addMovieClip = function (source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n      if (this._data) {\n        throw SpriteSheetBuilder.ERR_RUNNING;\n      }\n      var rects = source.frameBounds;\n      var rect = sourceRect || source.bounds || source.nominalBounds;\n      if (!rect && source.getBounds) {\n        rect = source.getBounds();\n      }\n      if (!rect && !rects) {\n        return;\n      }\n      var i,\n        l,\n        baseFrameIndex = this._frames.length;\n      var duration = source.timeline.duration;\n      for (i = 0; i < duration; i++) {\n        var r = rects && rects[i] ? rects[i] : rect;\n        this.addFrame(source, r, scale, this._setupMovieClipFrame, {\n          i: i,\n          f: setupFunction,\n          d: setupData\n        });\n      }\n      var labels = source.timeline._labels;\n      var lbls = [];\n      for (var n in labels) {\n        lbls.push({\n          index: labels[n],\n          label: n\n        });\n      }\n      if (lbls.length) {\n        lbls.sort(function (a, b) {\n          return a.index - b.index;\n        });\n        for (i = 0, l = lbls.length; i < l; i++) {\n          var label = lbls[i].label;\n          var start = baseFrameIndex + lbls[i].index;\n          var end = baseFrameIndex + (i == l - 1 ? duration : lbls[i + 1].index);\n          var frames = [];\n          for (var j = start; j < end; j++) {\n            frames.push(j);\n          }\n          if (labelFunction) {\n            label = labelFunction(label, source, start, end);\n            if (!label) {\n              continue;\n            }\n          }\n          this.addAnimation(label, frames, true); // for now, this loops all animations.\n        }\n      }\n    };\n\n    /**\n     * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n     * @method build\n     * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n     * occurred.\n     **/\n    p.build = function () {\n      if (this._data) {\n        throw SpriteSheetBuilder.ERR_RUNNING;\n      }\n      this._startBuild();\n      while (this._drawNext()) {}\n      this._endBuild();\n      return this.spriteSheet;\n    };\n\n    /**\n     * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n     * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n     * specified callback.\n     * @method buildAsync\n     * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n     **/\n    p.buildAsync = function (timeSlice) {\n      if (this._data) {\n        throw SpriteSheetBuilder.ERR_RUNNING;\n      }\n      this.timeSlice = timeSlice;\n      this._startBuild();\n      var _this = this;\n      this._timerID = setTimeout(function () {\n        _this._run();\n      }, 50 - Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)) * 50);\n    };\n\n    /**\n     * Stops the current asynchronous build.\n     * @method stopAsync\n     **/\n    p.stopAsync = function () {\n      clearTimeout(this._timerID);\n      this._data = null;\n    };\n\n    /**\n     * SpriteSheetBuilder instances cannot be cloned.\n     * @method clone\n     **/\n    p.clone = function () {\n      throw \"SpriteSheetBuilder cannot be cloned.\";\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[SpriteSheetBuilder]\";\n    };\n\n    // private methods:\n    /**\n     * @method _startBuild\n     * @protected\n     **/\n    p._startBuild = function () {\n      var pad = this.padding || 0;\n      this.progress = 0;\n      this.spriteSheet = null;\n      this._index = 0;\n      this._scale = this.scale;\n      var dataFrames = [];\n      this._data = {\n        images: [],\n        frames: dataFrames,\n        framerate: this.framerate,\n        animations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n      };\n      var frames = this._frames.slice();\n      frames.sort(function (a, b) {\n        return a.height <= b.height ? -1 : 1;\n      });\n      if (frames[frames.length - 1].height + pad * 2 > this.maxHeight) {\n        throw SpriteSheetBuilder.ERR_DIMENSIONS;\n      }\n      var y = 0,\n        x = 0;\n      var img = 0;\n      while (frames.length) {\n        var o = this._fillRow(frames, y, img, dataFrames, pad);\n        if (o.w > x) {\n          x = o.w;\n        }\n        y += o.h;\n        if (!o.h || !frames.length) {\n          var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n          canvas.width = this._getSize(x, this.maxWidth);\n          canvas.height = this._getSize(y, this.maxHeight);\n          this._data.images[img] = canvas;\n          if (!o.h) {\n            x = y = 0;\n            img++;\n          }\n        }\n      }\n    };\n\n    /**\n     * @method _setupMovieClipFrame\n     * @protected\n     * @return {Number} The width & height of the row.\n     **/\n    p._setupMovieClipFrame = function (source, data) {\n      var ae = source.actionsEnabled;\n      source.actionsEnabled = false;\n      source.gotoAndStop(data.i);\n      source.actionsEnabled = ae;\n      data.f && data.f(source, data.d, data.i);\n    };\n\n    /**\n     * @method _getSize\n     * @protected\n     * @return {Number} The width & height of the row.\n     **/\n    p._getSize = function (size, max) {\n      var pow = 4;\n      while (Math.pow(2, ++pow) < size) {}\n      return Math.min(max, Math.pow(2, pow));\n    };\n\n    /**\n     * @method _fillRow\n     * @param {Array} frames\n     * @param {Number} y\n     * @param {HTMLImageElement} img\n     * @param {Object} dataFrames\n     * @param {Number} pad\n     * @protected\n     * @return {Number} The width & height of the row.\n     **/\n    p._fillRow = function (frames, y, img, dataFrames, pad) {\n      var w = this.maxWidth;\n      var maxH = this.maxHeight;\n      y += pad;\n      var h = maxH - y;\n      var x = pad;\n      var height = 0;\n      for (var i = frames.length - 1; i >= 0; i--) {\n        var frame = frames[i];\n        var sc = this._scale * frame.scale;\n        var rect = frame.sourceRect;\n        var source = frame.source;\n        var rx = Math.floor(sc * rect.x - pad);\n        var ry = Math.floor(sc * rect.y - pad);\n        var rh = Math.ceil(sc * rect.height + pad * 2);\n        var rw = Math.ceil(sc * rect.width + pad * 2);\n        if (rw > w) {\n          throw SpriteSheetBuilder.ERR_DIMENSIONS;\n        }\n        if (rh > h || x + rw > w) {\n          continue;\n        }\n        frame.img = img;\n        frame.rect = new createjs.Rectangle(x, y, rw, rh);\n        height = height || rh;\n        frames.splice(i, 1);\n        dataFrames[frame.index] = [x, y, rw, rh, img, Math.round(-rx + sc * source.regX - pad), Math.round(-ry + sc * source.regY - pad)];\n        x += rw;\n      }\n      return {\n        w: x,\n        h: height\n      };\n    };\n\n    /**\n     * @method _endBuild\n     * @protected\n     **/\n    p._endBuild = function () {\n      this.spriteSheet = new createjs.SpriteSheet(this._data);\n      this._data = null;\n      this.progress = 1;\n      this.dispatchEvent(\"complete\");\n    };\n\n    /**\n     * @method _run\n     * @protected\n     **/\n    p._run = function () {\n      var ts = Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)) * 50;\n      var t = new Date().getTime() + ts;\n      var complete = false;\n      while (t > new Date().getTime()) {\n        if (!this._drawNext()) {\n          complete = true;\n          break;\n        }\n      }\n      if (complete) {\n        this._endBuild();\n      } else {\n        var _this = this;\n        this._timerID = setTimeout(function () {\n          _this._run();\n        }, 50 - ts);\n      }\n      var p = this.progress = this._index / this._frames.length;\n      if (this.hasEventListener(\"progress\")) {\n        var evt = new createjs.Event(\"progress\");\n        evt.progress = p;\n        this.dispatchEvent(evt);\n      }\n    };\n\n    /**\n     * @method _drawNext\n     * @protected\n     * @return Boolean Returns false if this is the last draw.\n     **/\n    p._drawNext = function () {\n      var frame = this._frames[this._index];\n      var sc = frame.scale * this._scale;\n      var rect = frame.rect;\n      var sourceRect = frame.sourceRect;\n      var canvas = this._data.images[frame.img];\n      var ctx = canvas.getContext(\"2d\");\n      frame.funct && frame.funct(frame.source, frame.data);\n      ctx.save();\n      ctx.beginPath();\n      ctx.rect(rect.x, rect.y, rect.width, rect.height);\n      ctx.clip();\n      ctx.translate(Math.ceil(rect.x - sourceRect.x * sc), Math.ceil(rect.y - sourceRect.y * sc));\n      ctx.scale(sc, sc);\n      frame.source.draw(ctx); // display object will draw itself.\n      ctx.restore();\n      return ++this._index < this._frames.length;\n    };\n    createjs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // DOMElement.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n     *\n     * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n     * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n     * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n     * drawn in front of or behind the canvas).\n     *\n     * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n     * the DOM Object be added to a div that also contains the canvas so that they share the same position\n     * on the page.\n     *\n     * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n     * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n     * content.\n     *\n     * <h4>Mouse Interaction</h4>\n     *\n     * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n     * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n     * the htmlElement (note, this does not support EventDispatcher)\n     *\n     *      var domElement = new createjs.DOMElement(htmlElement);\n     *      domElement.htmlElement.onclick = function() {\n     *          console.log(\"clicked\");\n     *      }\n     *\n     * @class DOMElement\n     * @extends DisplayObject\n     * @constructor\n     * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n     */\n    function DOMElement(htmlElement) {\n      this.DisplayObject_constructor();\n      if (typeof htmlElement == \"string\") {\n        htmlElement = document.getElementById(htmlElement);\n      }\n      this.mouseEnabled = false;\n      var style = htmlElement.style;\n      style.position = \"absolute\";\n      style.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\n      // public properties:\n      /**\n       * The DOM object to manage.\n       * @property htmlElement\n       * @type HTMLElement\n       */\n      this.htmlElement = htmlElement;\n\n      // private properties:\n      /**\n       * @property _oldMtx\n       * @type Matrix2D\n       * @protected\n       */\n      this._oldProps = null;\n    }\n    var p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /**\n     * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n     * This does not account for whether it would be visible within the boundaries of the stage.\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method isVisible\n     * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n     */\n    p.isVisible = function () {\n      return this.htmlElement != null;\n    };\n\n    /**\n     * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n     * Returns true if the draw was handled (useful for overriding functionality).\n     * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n     * @method draw\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n     * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n     * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n     * into itself).\n     * @return {Boolean}\n     */\n    p.draw = function (ctx, ignoreCache) {\n      // this relies on the _tick method because draw isn't called if the parent is not visible.\n      // the actual update happens in _handleDrawEnd\n      return true;\n    };\n\n    /**\n     * Not applicable to DOMElement.\n     * @method cache\n     */\n    p.cache = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method uncache\n     */\n    p.uncache = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method updateCache\n     */\n    p.updateCache = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method hitTest\n     */\n    p.hitTest = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method localToGlobal\n     */\n    p.localToGlobal = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method globalToLocal\n     */\n    p.globalToLocal = function () {};\n\n    /**\n     * Not applicable to DOMElement.\n     * @method localToLocal\n     */\n    p.localToLocal = function () {};\n\n    /**\n     * DOMElement cannot be cloned. Throws an error.\n     * @method clone\n     */\n    p.clone = function () {\n      throw \"DOMElement cannot be cloned.\";\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     */\n    p.toString = function () {\n      return \"[DOMElement (name=\" + this.name + \")]\";\n    };\n\n    /**\n        * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n     * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n     * @event click\n     */\n\n    /**\n    * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n    * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n    * @event dblClick\n    */\n\n    /**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n    * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n    * @event mousedown\n    */\n\n    /**\n     * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n     * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n     * @event mouseover\n    */\n\n    /**\n     * Not applicable to DOMElement.\n    * @event tick\n    */\n\n    // private methods:\n    /**\n     * @method _tick\n     * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n     * function.\n     * @protected\n     */\n    p._tick = function (evtObj) {\n      var stage = this.getStage();\n      stage && stage.on(\"drawend\", this._handleDrawEnd, this, true);\n      this.DisplayObject__tick(evtObj);\n    };\n\n    /**\n     * @method _handleDrawEnd\n     * @param {Event} evt\n     * @protected\n     */\n    p._handleDrawEnd = function (evt) {\n      var o = this.htmlElement;\n      if (!o) {\n        return;\n      }\n      var style = o.style;\n      var props = this.getConcatenatedDisplayProps(this._props),\n        mtx = props.matrix;\n      var visibility = props.visible ? \"visible\" : \"hidden\";\n      if (visibility != style.visibility) {\n        style.visibility = visibility;\n      }\n      if (!props.visible) {\n        return;\n      }\n      var oldProps = this._oldProps,\n        oldMtx = oldProps && oldProps.matrix;\n      var n = 10000; // precision\n\n      if (!oldMtx || !oldMtx.equals(mtx)) {\n        var str = \"matrix(\" + (mtx.a * n | 0) / n + \",\" + (mtx.b * n | 0) / n + \",\" + (mtx.c * n | 0) / n + \",\" + (mtx.d * n | 0) / n + \",\" + (mtx.tx + 0.5 | 0);\n        style.transform = style.WebkitTransform = style.OTransform = style.msTransform = str + \",\" + (mtx.ty + 0.5 | 0) + \")\";\n        style.MozTransform = str + \"px,\" + (mtx.ty + 0.5 | 0) + \"px)\";\n        if (!oldProps) {\n          oldProps = this._oldProps = new createjs.DisplayProps(true, NaN);\n        }\n        oldProps.matrix.copy(mtx);\n      }\n      if (oldProps.alpha != props.alpha) {\n        style.opacity = \"\" + (props.alpha * n | 0) / n;\n        oldProps.alpha = props.alpha;\n      }\n    };\n    createjs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n  })();\n\n  //##############################################################################\n  // Filter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n     * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n     * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n     *\n     * <h4>Example</h4>\n     *\n     *      myInstance.filters = [\n     *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n     *          new createjs.BlurFilter(5, 5, 10)\n     *      ];\n     *      myInstance.cache(0,0, 100, 100);\n     *\n     * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n     * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n     * will cause an object to feather outwards, resulting in a margin around the shape.\n     *\n     * <h4>EaselJS Filters</h4>\n     * EaselJS comes with a number of pre-built filters:\n     * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n     *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n     *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n     *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n     *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n     * </ul>\n     *\n     * @class Filter\n     * @constructor\n     **/\n    function Filter() {}\n    var p = Filter.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // public methods:\n    /**\n     * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n     * @method getBounds\n     * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n     * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n     **/\n    p.getBounds = function (rect) {\n      return rect;\n    };\n\n    /**\n     * Applies the filter to the specified context.\n     * @method applyFilter\n     * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n     * @param {Number} x The x position to use for the source rect.\n     * @param {Number} y The y position to use for the source rect.\n     * @param {Number} width The width to use for the source rect.\n     * @param {Number} height The height to use for the source rect.\n     * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n     * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n     * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n     * @return {Boolean} If the filter was applied successfully.\n     **/\n    p.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n      // this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n      targetCtx = targetCtx || ctx;\n      if (targetX == null) {\n        targetX = x;\n      }\n      if (targetY == null) {\n        targetY = y;\n      }\n      try {\n        var imageData = ctx.getImageData(x, y, width, height);\n      } catch (e) {\n        return false;\n      }\n      if (this._applyFilter(imageData)) {\n        targetCtx.putImageData(imageData, targetX, targetY);\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[Filter]\";\n    };\n\n    /**\n     * Returns a clone of this Filter instance.\n     * @method clone\n     * @return {Filter} A clone of the current Filter instance.\n     **/\n    p.clone = function () {\n      return new Filter();\n    };\n\n    // private methods:\n    /**\n     * @method _applyFilter\n     * @param {ImageData} imageData Target ImageData instance.\n     * @return {Boolean}\n     **/\n    p._applyFilter = function (imageData) {\n      return true;\n    };\n    createjs.Filter = Filter;\n  })();\n\n  //##############################################################################\n  // BlurFilter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\n     * set higher than 1.\n     *\n     * <h4>Example</h4>\n     * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n     * method to account for the spread that the blur causes.\n     *\n     *      var shape = new createjs.Shape().set({x:100,y:100});\n     *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n     *\n     *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n     *      shape.filters = [blurFilter];\n     *      var bounds = blurFilter.getBounds();\n     *\n     *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n     * @class BlurFilter\n     * @extends Filter\n     * @constructor\n     * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n     * @param {Number} [blurY=0] The vertical blur radius in pixels.\n     * @param {Number} [quality=1] The number of blur iterations.\n     **/\n    function BlurFilter(blurX, blurY, quality) {\n      if (isNaN(blurX) || blurX < 0) {\n        blurX = 0;\n      }\n      if (isNaN(blurY) || blurY < 0) {\n        blurY = 0;\n      }\n      if (isNaN(quality) || quality < 1) {\n        quality = 1;\n      }\n\n      // public properties:\n      /**\n       * Horizontal blur radius in pixels\n       * @property blurX\n       * @default 0\n       * @type Number\n       **/\n      this.blurX = blurX | 0;\n\n      /**\n       * Vertical blur radius in pixels\n       * @property blurY\n       * @default 0\n       * @type Number\n       **/\n      this.blurY = blurY | 0;\n\n      /**\n       * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n       * smoother blur, but take twice as long to run.\n       * @property quality\n       * @default 1\n       * @type Number\n       **/\n      this.quality = quality | 0;\n    }\n    var p = createjs.extend(BlurFilter, createjs.Filter);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // constants:\n    /**\n     * Array of multiply values for blur calculations.\n     * @property MUL_TABLE\n     * @type Array\n     * @protected\n     * @static\n     **/\n    BlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n    /**\n     * Array of shift values for blur calculations.\n     * @property SHG_TABLE\n     * @type Array\n     * @protected\n     * @static\n     **/\n    BlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n    // public methods:\n    /** docced in super class **/\n    p.getBounds = function (rect) {\n      var x = this.blurX | 0,\n        y = this.blurY | 0;\n      if (x <= 0 && y <= 0) {\n        return rect;\n      }\n      var q = Math.pow(this.quality, 0.2);\n      return (rect || new createjs.Rectangle()).pad(x * q + 1, y * q + 1, x * q + 1, y * q + 1);\n    };\n\n    /** docced in super class **/\n    p.clone = function () {\n      return new BlurFilter(this.blurX, this.blurY, this.quality);\n    };\n\n    /** docced in super class **/\n    p.toString = function () {\n      return \"[BlurFilter]\";\n    };\n\n    // private methods:\n\n    /** docced in super class **/\n    p._applyFilter = function (imageData) {\n      var radiusX = this.blurX >> 1;\n      if (isNaN(radiusX) || radiusX < 0) {\n        return false;\n      }\n      var radiusY = this.blurY >> 1;\n      if (isNaN(radiusY) || radiusY < 0) {\n        return false;\n      }\n      if (radiusX == 0 && radiusY == 0) {\n        return false;\n      }\n      var iterations = this.quality;\n      if (isNaN(iterations) || iterations < 1) {\n        iterations = 1;\n      }\n      iterations |= 0;\n      if (iterations > 3) {\n        iterations = 3;\n      }\n      if (iterations < 1) {\n        iterations = 1;\n      }\n      var px = imageData.data;\n      var x = 0,\n        y = 0,\n        i = 0,\n        p = 0,\n        yp = 0,\n        yi = 0,\n        yw = 0,\n        r = 0,\n        g = 0,\n        b = 0,\n        a = 0,\n        pr = 0,\n        pg = 0,\n        pb = 0,\n        pa = 0;\n      var divx = radiusX + radiusX + 1 | 0;\n      var divy = radiusY + radiusY + 1 | 0;\n      var w = imageData.width | 0;\n      var h = imageData.height | 0;\n      var w1 = w - 1 | 0;\n      var h1 = h - 1 | 0;\n      var rxp1 = radiusX + 1 | 0;\n      var ryp1 = radiusY + 1 | 0;\n      var ssx = {\n        r: 0,\n        b: 0,\n        g: 0,\n        a: 0\n      };\n      var sx = ssx;\n      for (i = 1; i < divx; i++) {\n        sx = sx.n = {\n          r: 0,\n          b: 0,\n          g: 0,\n          a: 0\n        };\n      }\n      sx.n = ssx;\n      var ssy = {\n        r: 0,\n        b: 0,\n        g: 0,\n        a: 0\n      };\n      var sy = ssy;\n      for (i = 1; i < divy; i++) {\n        sy = sy.n = {\n          r: 0,\n          b: 0,\n          g: 0,\n          a: 0\n        };\n      }\n      sy.n = ssy;\n      var si = null;\n      var mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n      var stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n      var mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n      var sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n      while (iterations-- > 0) {\n        yw = yi = 0;\n        var ms = mtx;\n        var ss = stx;\n        for (y = h; --y > -1;) {\n          r = rxp1 * (pr = px[yi | 0]);\n          g = rxp1 * (pg = px[yi + 1 | 0]);\n          b = rxp1 * (pb = px[yi + 2 | 0]);\n          a = rxp1 * (pa = px[yi + 3 | 0]);\n          sx = ssx;\n          for (i = rxp1; --i > -1;) {\n            sx.r = pr;\n            sx.g = pg;\n            sx.b = pb;\n            sx.a = pa;\n            sx = sx.n;\n          }\n          for (i = 1; i < rxp1; i++) {\n            p = yi + ((w1 < i ? w1 : i) << 2) | 0;\n            r += sx.r = px[p];\n            g += sx.g = px[p + 1];\n            b += sx.b = px[p + 2];\n            a += sx.a = px[p + 3];\n            sx = sx.n;\n          }\n          si = ssx;\n          for (x = 0; x < w; x++) {\n            px[yi++] = r * ms >>> ss;\n            px[yi++] = g * ms >>> ss;\n            px[yi++] = b * ms >>> ss;\n            px[yi++] = a * ms >>> ss;\n            p = yw + ((p = x + radiusX + 1) < w1 ? p : w1) << 2;\n            r -= si.r - (si.r = px[p]);\n            g -= si.g - (si.g = px[p + 1]);\n            b -= si.b - (si.b = px[p + 2]);\n            a -= si.a - (si.a = px[p + 3]);\n            si = si.n;\n          }\n          yw += w;\n        }\n        ms = mty;\n        ss = sty;\n        for (x = 0; x < w; x++) {\n          yi = x << 2 | 0;\n          r = ryp1 * (pr = px[yi]) | 0;\n          g = ryp1 * (pg = px[yi + 1 | 0]) | 0;\n          b = ryp1 * (pb = px[yi + 2 | 0]) | 0;\n          a = ryp1 * (pa = px[yi + 3 | 0]) | 0;\n          sy = ssy;\n          for (i = 0; i < ryp1; i++) {\n            sy.r = pr;\n            sy.g = pg;\n            sy.b = pb;\n            sy.a = pa;\n            sy = sy.n;\n          }\n          yp = w;\n          for (i = 1; i <= radiusY; i++) {\n            yi = yp + x << 2;\n            r += sy.r = px[yi];\n            g += sy.g = px[yi + 1];\n            b += sy.b = px[yi + 2];\n            a += sy.a = px[yi + 3];\n            sy = sy.n;\n            if (i < h1) {\n              yp += w;\n            }\n          }\n          yi = x;\n          si = ssy;\n          if (iterations > 0) {\n            for (y = 0; y < h; y++) {\n              p = yi << 2;\n              px[p + 3] = pa = a * ms >>> ss;\n              if (pa > 0) {\n                px[p] = r * ms >>> ss;\n                px[p + 1] = g * ms >>> ss;\n                px[p + 2] = b * ms >>> ss;\n              } else {\n                px[p] = px[p + 1] = px[p + 2] = 0;\n              }\n              p = x + ((p = y + ryp1) < h1 ? p : h1) * w << 2;\n              r -= si.r - (si.r = px[p]);\n              g -= si.g - (si.g = px[p + 1]);\n              b -= si.b - (si.b = px[p + 2]);\n              a -= si.a - (si.a = px[p + 3]);\n              si = si.n;\n              yi += w;\n            }\n          } else {\n            for (y = 0; y < h; y++) {\n              p = yi << 2;\n              px[p + 3] = pa = a * ms >>> ss;\n              if (pa > 0) {\n                pa = 255 / pa;\n                px[p] = (r * ms >>> ss) * pa;\n                px[p + 1] = (g * ms >>> ss) * pa;\n                px[p + 2] = (b * ms >>> ss) * pa;\n              } else {\n                px[p] = px[p + 1] = px[p + 2] = 0;\n              }\n              p = x + ((p = y + ryp1) < h1 ? p : h1) * w << 2;\n              r -= si.r - (si.r = px[p]);\n              g -= si.g - (si.g = px[p + 1]);\n              b -= si.b - (si.b = px[p + 2]);\n              a -= si.a - (si.a = px[p + 3]);\n              si = si.n;\n              yi += w;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    createjs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n  })();\n\n  //##############################################################################\n  // AlphaMapFilter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n     * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n     *\n     * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n     * better performance.\n     *\n     * <h4>Example</h4>\n     * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n     *\n     *       var box = new createjs.Shape();\n     *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n     *       box.graphics.drawRect(0, 0, 100, 100);\n     *       box.cache(0, 0, 100, 100);\n     *\n     *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n     *       bmp.filters = [\n     *           new createjs.AlphaMapFilter(box.cacheCanvas)\n     *       ];\n     *       bmp.cache(0, 0, 100, 100);\n     *       stage.addChild(bmp);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n     * @class AlphaMapFilter\n     * @extends Filter\n     * @constructor\n     * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n     * result. This should be exactly the same dimensions as the target.\n     **/\n    function AlphaMapFilter(alphaMap) {\n      // public properties:\n      /**\n       * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n       * dimensions as the target.\n       * @property alphaMap\n       * @type HTMLImageElement|HTMLCanvasElement\n       **/\n      this.alphaMap = alphaMap;\n\n      // private properties:\n      /**\n       * @property _alphaMap\n       * @protected\n       * @type HTMLImageElement|HTMLCanvasElement\n       **/\n      this._alphaMap = null;\n\n      /**\n       * @property _mapData\n       * @protected\n       * @type Uint8ClampedArray\n       **/\n      this._mapData = null;\n    }\n    var p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /** docced in super class **/\n    p.clone = function () {\n      var o = new AlphaMapFilter(this.alphaMap);\n      o._alphaMap = this._alphaMap;\n      o._mapData = this._mapData;\n      return o;\n    };\n\n    /** docced in super class **/\n    p.toString = function () {\n      return \"[AlphaMapFilter]\";\n    };\n\n    // private methods:\n    /** docced in super class **/\n    p._applyFilter = function (imageData) {\n      if (!this.alphaMap) {\n        return true;\n      }\n      if (!this._prepAlphaMap()) {\n        return false;\n      }\n\n      // TODO: update to support scenarios where the target has different dimensions.\n      var data = imageData.data;\n      var map = this._mapData;\n      for (var i = 0, l = data.length; i < l; i += 4) {\n        data[i + 3] = map[i] || 0;\n      }\n      return true;\n    };\n\n    /**\n     * @method _prepAlphaMap\n     * @protected\n     **/\n    p._prepAlphaMap = function () {\n      if (!this.alphaMap) {\n        return false;\n      }\n      if (this.alphaMap == this._alphaMap && this._mapData) {\n        return true;\n      }\n      this._mapData = null;\n      var map = this._alphaMap = this.alphaMap;\n      var canvas = map;\n      var ctx;\n      if (map instanceof HTMLCanvasElement) {\n        ctx = canvas.getContext(\"2d\");\n      } else {\n        canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n        canvas.width = map.width;\n        canvas.height = map.height;\n        ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(map, 0, 0);\n      }\n      try {\n        var imgData = ctx.getImageData(0, 0, map.width, map.height);\n      } catch (e) {\n        //if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n        return false;\n      }\n      this._mapData = imgData.data;\n      return true;\n    };\n    createjs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n  })();\n\n  //##############################################################################\n  // AlphaMaskFilter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n     * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n     * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n     * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n     *\n     * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n     *\n     * <h4>Example</h4>\n     * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n     *\n     *      var box = new createjs.Shape();\n     *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n     *      box.graphics.drawRect(0, 0, 100, 100);\n     *      box.cache(0, 0, 100, 100);\n     *\n     *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n     *      bmp.filters = [\n     *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n     *      ];\n     *      bmp.cache(0, 0, 100, 100);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n     * @class AlphaMaskFilter\n     * @extends Filter\n     * @constructor\n     * @param {HTMLImageElement|HTMLCanvasElement} mask\n     **/\n    function AlphaMaskFilter(mask) {\n      // public properties:\n      /**\n       * The image (or canvas) to use as the mask.\n       * @property mask\n       * @type HTMLImageElement|HTMLCanvasElement\n       **/\n      this.mask = mask;\n    }\n    var p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /**\n     * Applies the filter to the specified context.\n     *\n     * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n     * correctly.</strong>\n     * @method applyFilter\n     * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n     * @param {Number} x The x position to use for the source rect.\n     * @param {Number} y The y position to use for the source rect.\n     * @param {Number} width The width to use for the source rect.\n     * @param {Number} height The height to use for the source rect.\n     * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n     * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n     * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n     * @return {Boolean} If the filter was applied successfully.\n     **/\n    p.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n      if (!this.mask) {\n        return true;\n      }\n      targetCtx = targetCtx || ctx;\n      if (targetX == null) {\n        targetX = x;\n      }\n      if (targetY == null) {\n        targetY = y;\n      }\n      targetCtx.save();\n      if (ctx != targetCtx) {\n        // TODO: support targetCtx and targetX/Y\n        // clearRect, then draw the ctx in?\n        return false;\n      }\n      targetCtx.globalCompositeOperation = \"destination-in\";\n      targetCtx.drawImage(this.mask, targetX, targetY);\n      targetCtx.restore();\n      return true;\n    };\n\n    /** docced in super class **/\n    p.clone = function () {\n      return new AlphaMaskFilter(this.mask);\n    };\n\n    /** docced in super class **/\n    p.toString = function () {\n      return \"[AlphaMaskFilter]\";\n    };\n    createjs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n  })();\n\n  //##############################################################################\n  // ColorFilter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Applies a color transform to DisplayObjects.\n     *\n     * <h4>Example</h4>\n     * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n     * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n     *\n     *      var shape = new createjs.Shape().set({x:100,y:100});\n     *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n     *\n     *      shape.filters = [\n     *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n     *      ];\n     *      shape.cache(-50, -50, 100, 100);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n     * @class ColorFilter\n     * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n     * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n     * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n     * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n     * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n     * between -255 and 255.\n     * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n      * between -255 and 255.\n     * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n      * between -255 and 255.\n     * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n      * between -255 and 255.\n     * @constructor\n     * @extends Filter\n     **/\n    function ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n      // public properties:\n      /**\n       * Red channel multiplier.\n       * @property redMultiplier\n       * @type Number\n       **/\n      this.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\n      /**\n       * Green channel multiplier.\n       * @property greenMultiplier\n       * @type Number\n       **/\n      this.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\n      /**\n       * Blue channel multiplier.\n       * @property blueMultiplier\n       * @type Number\n       **/\n      this.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\n      /**\n       * Alpha channel multiplier.\n       * @property alphaMultiplier\n       * @type Number\n       **/\n      this.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\n      /**\n       * Red channel offset (added to value).\n       * @property redOffset\n       * @type Number\n       **/\n      this.redOffset = redOffset || 0;\n\n      /**\n       * Green channel offset (added to value).\n       * @property greenOffset\n       * @type Number\n       **/\n      this.greenOffset = greenOffset || 0;\n\n      /**\n       * Blue channel offset (added to value).\n       * @property blueOffset\n       * @type Number\n       **/\n      this.blueOffset = blueOffset || 0;\n\n      /**\n       * Alpha channel offset (added to value).\n       * @property alphaOffset\n       * @type Number\n       **/\n      this.alphaOffset = alphaOffset || 0;\n    }\n    var p = createjs.extend(ColorFilter, createjs.Filter);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /** docced in super class **/\n    p.toString = function () {\n      return \"[ColorFilter]\";\n    };\n\n    /** docced in super class **/\n    p.clone = function () {\n      return new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\n    };\n\n    // private methods:\n    /** docced in super class **/\n    p._applyFilter = function (imageData) {\n      var data = imageData.data;\n      var l = data.length;\n      for (var i = 0; i < l; i += 4) {\n        data[i] = data[i] * this.redMultiplier + this.redOffset;\n        data[i + 1] = data[i + 1] * this.greenMultiplier + this.greenOffset;\n        data[i + 2] = data[i + 2] * this.blueMultiplier + this.blueOffset;\n        data[i + 3] = data[i + 3] * this.alphaMultiplier + this.alphaOffset;\n      }\n      return true;\n    };\n    createjs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n  })();\n\n  //##############################################################################\n  // ColorMatrix.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n     * Most methods return the instance to facilitate chained calls.\n     *\n     * <h4>Example</h4>\n     *\n     *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n     * for an example of how to use ColorMatrix to change a DisplayObject's color.\n     * @class ColorMatrix\n     * @param {Number} brightness\n     * @param {Number} contrast\n     * @param {Number} saturation\n     * @param {Number} hue\n     * @constructor\n     **/\n    function ColorMatrix(brightness, contrast, saturation, hue) {\n      this.setColor(brightness, contrast, saturation, hue);\n    }\n    var p = ColorMatrix.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // constants:\n    /**\n     * Array of delta values for contrast calculations.\n     * @property DELTA_INDEX\n     * @type Array\n     * @protected\n     * @static\n     **/\n    ColorMatrix.DELTA_INDEX = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1.0, 1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54, 1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0, 2.12, 2.25, 2.37, 2.50, 2.62, 2.75, 2.87, 3.0, 3.2, 3.4, 3.6, 3.8, 4.0, 4.3, 4.7, 4.9, 5.0, 5.5, 6.0, 6.5, 6.8, 7.0, 7.3, 7.5, 7.8, 8.0, 8.4, 8.7, 9.0, 9.4, 9.6, 9.8, 10.0];\n\n    /**\n     * Identity matrix values.\n     * @property IDENTITY_MATRIX\n     * @type Array\n     * @protected\n     * @static\n     **/\n    ColorMatrix.IDENTITY_MATRIX = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n\n    /**\n     * The constant length of a color matrix.\n     * @property LENGTH\n     * @type Number\n     * @protected\n     * @static\n     **/\n    ColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n    // public methods:\n    /**\n     * Resets the instance with the specified values.\n     * @method setColor\n     * @param {Number} brightness\n     * @param {Number} contrast\n     * @param {Number} saturation\n     * @param {Number} hue\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     */\n    p.setColor = function (brightness, contrast, saturation, hue) {\n      return this.reset().adjustColor(brightness, contrast, saturation, hue);\n    };\n\n    /**\n     * Resets the matrix to identity values.\n     * @method reset\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     */\n    p.reset = function () {\n      return this.copy(ColorMatrix.IDENTITY_MATRIX);\n    };\n\n    /**\n     * Shortcut method to adjust brightness, contrast, saturation and hue.\n     * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n     * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n     * @method adjustColor\n     * @param {Number} brightness\n     * @param {Number} contrast\n     * @param {Number} saturation\n     * @param {Number} hue\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.adjustColor = function (brightness, contrast, saturation, hue) {\n      this.adjustHue(hue);\n      this.adjustContrast(contrast);\n      this.adjustBrightness(brightness);\n      return this.adjustSaturation(saturation);\n    };\n\n    /**\n     * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n     * Positive values will make the image brighter, negative values will make it darker.\n     * @method adjustBrightness\n     * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.adjustBrightness = function (value) {\n      if (value == 0 || isNaN(value)) {\n        return this;\n      }\n      value = this._cleanValue(value, 255);\n      this._multiplyMatrix([1, 0, 0, 0, value, 0, 1, 0, 0, value, 0, 0, 1, 0, value, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n      return this;\n    };\n\n    /**\n     * Adjusts the contrast of pixel color.\n     * Positive values will increase contrast, negative values will decrease contrast.\n     * @method adjustContrast\n     * @param {Number} value A value between -100 & 100.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.adjustContrast = function (value) {\n      if (value == 0 || isNaN(value)) {\n        return this;\n      }\n      value = this._cleanValue(value, 100);\n      var x;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x == 0) {\n          x = ColorMatrix.DELTA_INDEX[value];\n        } else {\n          x = ColorMatrix.DELTA_INDEX[value << 0] * (1 - x) + ColorMatrix.DELTA_INDEX[(value << 0) + 1] * x; // use linear interpolation for more granularity.\n        }\n        x = x * 127 + 127;\n      }\n      this._multiplyMatrix([x / 127, 0, 0, 0, 0.5 * (127 - x), 0, x / 127, 0, 0, 0.5 * (127 - x), 0, 0, x / 127, 0, 0.5 * (127 - x), 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n      return this;\n    };\n\n    /**\n     * Adjusts the color saturation of the pixel.\n     * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n     * @method adjustSaturation\n     * @param {Number} value A value between -100 & 100.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.adjustSaturation = function (value) {\n      if (value == 0 || isNaN(value)) {\n        return this;\n      }\n      value = this._cleanValue(value, 100);\n      var x = 1 + (value > 0 ? 3 * value / 100 : value / 100);\n      var lumR = 0.3086;\n      var lumG = 0.6094;\n      var lumB = 0.0820;\n      this._multiplyMatrix([lumR * (1 - x) + x, lumG * (1 - x), lumB * (1 - x), 0, 0, lumR * (1 - x), lumG * (1 - x) + x, lumB * (1 - x), 0, 0, lumR * (1 - x), lumG * (1 - x), lumB * (1 - x) + x, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n      return this;\n    };\n\n    /**\n     * Adjusts the hue of the pixel color.\n     * @method adjustHue\n     * @param {Number} value A value between -180 & 180.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.adjustHue = function (value) {\n      if (value == 0 || isNaN(value)) {\n        return this;\n      }\n      value = this._cleanValue(value, 180) / 180 * Math.PI;\n      var cosVal = Math.cos(value);\n      var sinVal = Math.sin(value);\n      var lumR = 0.213;\n      var lumG = 0.715;\n      var lumB = 0.072;\n      this._multiplyMatrix([lumR + cosVal * (1 - lumR) + sinVal * -lumR, lumG + cosVal * -lumG + sinVal * -lumG, lumB + cosVal * -lumB + sinVal * (1 - lumB), 0, 0, lumR + cosVal * -lumR + sinVal * 0.143, lumG + cosVal * (1 - lumG) + sinVal * 0.140, lumB + cosVal * -lumB + sinVal * -0.283, 0, 0, lumR + cosVal * -lumR + sinVal * -(1 - lumR), lumG + cosVal * -lumG + sinVal * lumG, lumB + cosVal * (1 - lumB) + sinVal * lumB, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n      return this;\n    };\n\n    /**\n     * Concatenates (multiplies) the specified matrix with this one.\n     * @method concat\n     * @param {Array} matrix An array or ColorMatrix instance.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.concat = function (matrix) {\n      matrix = this._fixMatrix(matrix);\n      if (matrix.length != ColorMatrix.LENGTH) {\n        return this;\n      }\n      this._multiplyMatrix(matrix);\n      return this;\n    };\n\n    /**\n     * Returns a clone of this ColorMatrix.\n     * @method clone\n     * @return {ColorMatrix} A clone of this ColorMatrix.\n     **/\n    p.clone = function () {\n      return new ColorMatrix().copy(this);\n    };\n\n    /**\n     * Return a length 25 (5x5) array instance containing this matrix's values.\n     * @method toArray\n     * @return {Array} An array holding this matrix's values.\n     **/\n    p.toArray = function () {\n      var arr = [];\n      for (var i = 0, l = ColorMatrix.LENGTH; i < l; i++) {\n        arr[i] = this[i];\n      }\n      return arr;\n    };\n\n    /**\n     * Copy the specified matrix's values to this matrix.\n     * @method copy\n     * @param {Array} matrix An array or ColorMatrix instance.\n     * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n     * @chainable\n     **/\n    p.copy = function (matrix) {\n      var l = ColorMatrix.LENGTH;\n      for (var i = 0; i < l; i++) {\n        this[i] = matrix[i];\n      }\n      return this;\n    };\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     **/\n    p.toString = function () {\n      return \"[ColorMatrix]\";\n    };\n\n    // private methods:\n    /**\n     * @method _multiplyMatrix\n     * @param {Array} matrix\n     * @protected\n     **/\n    p._multiplyMatrix = function (matrix) {\n      var i,\n        j,\n        k,\n        col = [];\n      for (i = 0; i < 5; i++) {\n        for (j = 0; j < 5; j++) {\n          col[j] = this[j + i * 5];\n        }\n        for (j = 0; j < 5; j++) {\n          var val = 0;\n          for (k = 0; k < 5; k++) {\n            val += matrix[j + k * 5] * col[k];\n          }\n          this[j + i * 5] = val;\n        }\n      }\n    };\n\n    /**\n     * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n     * @method _cleanValue\n     * @param {Number} value The raw number\n     * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n     * @protected\n     **/\n    p._cleanValue = function (value, limit) {\n      return Math.min(limit, Math.max(-limit, value));\n    };\n\n    /**\n     * Makes sure matrixes are 5x5 (25 long).\n     * @method _fixMatrix\n     * @param {Array} matrix\n     * @protected\n     **/\n    p._fixMatrix = function (matrix) {\n      if (matrix instanceof ColorMatrix) {\n        matrix = matrix.toArray();\n      }\n      if (matrix.length < ColorMatrix.LENGTH) {\n        matrix = matrix.slice(0, matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length, ColorMatrix.LENGTH));\n      } else if (matrix.length > ColorMatrix.LENGTH) {\n        matrix = matrix.slice(0, ColorMatrix.LENGTH);\n      }\n      return matrix;\n    };\n    createjs.ColorMatrix = ColorMatrix;\n  })();\n\n  //##############################################################################\n  // ColorMatrixFilter.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n     * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n     * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n     * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n     *\n     *      var shape = new createjs.Shape().set({x:100,y:100});\n     *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n     *\n     *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n     *      shape.filters = [\n     *          new createjs.ColorMatrixFilter(matrix)\n     *      ];\n     *\n     *      shape.cache(-50, -50, 100, 100);\n     *\n     * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n     * @class ColorMatrixFilter\n     * @constructor\n     * @extends Filter\n     * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n     * class.\n     **/\n    function ColorMatrixFilter(matrix) {\n      // public properties:\n      /**\n       * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n       * @property matrix\n       * @type Array | ColorMatrix\n       **/\n      this.matrix = matrix;\n    }\n    var p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // public methods:\n    /** docced in super class **/\n    p.toString = function () {\n      return \"[ColorMatrixFilter]\";\n    };\n\n    /** docced in super class **/\n    p.clone = function () {\n      return new ColorMatrixFilter(this.matrix);\n    };\n\n    // private methods:\n    /** docced in super class **/\n    p._applyFilter = function (imageData) {\n      var data = imageData.data;\n      var l = data.length;\n      var r, g, b, a;\n      var mtx = this.matrix;\n      var m0 = mtx[0],\n        m1 = mtx[1],\n        m2 = mtx[2],\n        m3 = mtx[3],\n        m4 = mtx[4];\n      var m5 = mtx[5],\n        m6 = mtx[6],\n        m7 = mtx[7],\n        m8 = mtx[8],\n        m9 = mtx[9];\n      var m10 = mtx[10],\n        m11 = mtx[11],\n        m12 = mtx[12],\n        m13 = mtx[13],\n        m14 = mtx[14];\n      var m15 = mtx[15],\n        m16 = mtx[16],\n        m17 = mtx[17],\n        m18 = mtx[18],\n        m19 = mtx[19];\n      for (var i = 0; i < l; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4; // red\n        data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9; // green\n        data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14; // blue\n        data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19; // alpha\n      }\n      return true;\n    };\n    createjs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n  })();\n\n  //##############################################################################\n  // Touch.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n    * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n    * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n    *\n    * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n    * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n    *\n    * <h4>Example</h4>\n    *\n    *      var stage = new createjs.Stage(\"canvasId\");\n    *      createjs.Touch.enable(stage);\n    *\n    * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n    *\n    *      createjs.Touch.disable(stage);\n    *\n    * @class Touch\n    * @static\n    **/\n    function Touch() {\n      throw \"Touch cannot be instantiated\";\n    }\n\n    // public static methods:\n    /**\n     * Returns `true` if touch is supported in the current browser.\n     * @method isSupported\n     * @return {Boolean} Indicates whether touch is supported in the current browser.\n     * @static\n     **/\n    Touch.isSupported = function () {\n      return !!('ontouchstart' in window // iOS & Android\n      || window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0 // IE10\n      || window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0); // IE11+\n    };\n\n    /**\n     * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n     * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n     * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n     * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n     * for more information.\n     * @method enable\n     * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n     * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n     * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n     * allowed when the user is interacting with the target canvas.\n     * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n     * @static\n     **/\n    Touch.enable = function (stage, singleTouch, allowDefault) {\n      if (!stage || !stage.canvas || !Touch.isSupported()) {\n        return false;\n      }\n      if (stage.__touch) {\n        return true;\n      }\n\n      // inject required properties on stage:\n      stage.__touch = {\n        pointers: {},\n        multitouch: !singleTouch,\n        preventDefault: !allowDefault,\n        count: 0\n      };\n\n      // note that in the future we may need to disable the standard mouse event model before adding\n      // these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n      if ('ontouchstart' in window) {\n        Touch._IOS_enable(stage);\n      } else if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) {\n        Touch._IE_enable(stage);\n      }\n      return true;\n    };\n\n    /**\n     * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n     * @method disable\n     * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n     * @static\n     **/\n    Touch.disable = function (stage) {\n      if (!stage) {\n        return;\n      }\n      if ('ontouchstart' in window) {\n        Touch._IOS_disable(stage);\n      } else if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) {\n        Touch._IE_disable(stage);\n      }\n      delete stage.__touch;\n    };\n\n    // Private static methods:\n    /**\n     * @method _IOS_enable\n     * @protected\n     * @param {Stage} stage\n     * @static\n     **/\n    Touch._IOS_enable = function (stage) {\n      var canvas = stage.canvas;\n      var f = stage.__touch.f = function (e) {\n        Touch._IOS_handleEvent(stage, e);\n      };\n      canvas.addEventListener(\"touchstart\", f, false);\n      canvas.addEventListener(\"touchmove\", f, false);\n      canvas.addEventListener(\"touchend\", f, false);\n      canvas.addEventListener(\"touchcancel\", f, false);\n    };\n\n    /**\n     * @method _IOS_disable\n     * @protected\n     * @param {Stage} stage\n     * @static\n     **/\n    Touch._IOS_disable = function (stage) {\n      var canvas = stage.canvas;\n      if (!canvas) {\n        return;\n      }\n      var f = stage.__touch.f;\n      canvas.removeEventListener(\"touchstart\", f, false);\n      canvas.removeEventListener(\"touchmove\", f, false);\n      canvas.removeEventListener(\"touchend\", f, false);\n      canvas.removeEventListener(\"touchcancel\", f, false);\n    };\n\n    /**\n     * @method _IOS_handleEvent\n     * @param {Stage} stage\n     * @param {Object} e The event to handle\n     * @protected\n     * @static\n     **/\n    Touch._IOS_handleEvent = function (stage, e) {\n      if (!stage) {\n        return;\n      }\n      if (stage.__touch.preventDefault) {\n        e.preventDefault && e.preventDefault();\n      }\n      var touches = e.changedTouches;\n      var type = e.type;\n      for (var i = 0, l = touches.length; i < l; i++) {\n        var touch = touches[i];\n        var id = touch.identifier;\n        if (touch.target != stage.canvas) {\n          continue;\n        }\n        if (type == \"touchstart\") {\n          this._handleStart(stage, id, e, touch.pageX, touch.pageY);\n        } else if (type == \"touchmove\") {\n          this._handleMove(stage, id, e, touch.pageX, touch.pageY);\n        } else if (type == \"touchend\" || type == \"touchcancel\") {\n          this._handleEnd(stage, id, e);\n        }\n      }\n    };\n\n    /**\n     * @method _IE_enable\n     * @protected\n     * @param {Stage} stage\n     * @static\n     **/\n    Touch._IE_enable = function (stage) {\n      var canvas = stage.canvas;\n      var f = stage.__touch.f = function (e) {\n        Touch._IE_handleEvent(stage, e);\n      };\n      if (window.navigator[\"pointerEnabled\"] === undefined) {\n        canvas.addEventListener(\"MSPointerDown\", f, false);\n        window.addEventListener(\"MSPointerMove\", f, false);\n        window.addEventListener(\"MSPointerUp\", f, false);\n        window.addEventListener(\"MSPointerCancel\", f, false);\n        if (stage.__touch.preventDefault) {\n          canvas.style.msTouchAction = \"none\";\n        }\n      } else {\n        canvas.addEventListener(\"pointerdown\", f, false);\n        window.addEventListener(\"pointermove\", f, false);\n        window.addEventListener(\"pointerup\", f, false);\n        window.addEventListener(\"pointercancel\", f, false);\n        if (stage.__touch.preventDefault) {\n          canvas.style.touchAction = \"none\";\n        }\n      }\n      stage.__touch.activeIDs = {};\n    };\n\n    /**\n     * @method _IE_disable\n     * @protected\n     * @param {Stage} stage\n     * @static\n     **/\n    Touch._IE_disable = function (stage) {\n      var f = stage.__touch.f;\n      if (window.navigator[\"pointerEnabled\"] === undefined) {\n        window.removeEventListener(\"MSPointerMove\", f, false);\n        window.removeEventListener(\"MSPointerUp\", f, false);\n        window.removeEventListener(\"MSPointerCancel\", f, false);\n        if (stage.canvas) {\n          stage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n        }\n      } else {\n        window.removeEventListener(\"pointermove\", f, false);\n        window.removeEventListener(\"pointerup\", f, false);\n        window.removeEventListener(\"pointercancel\", f, false);\n        if (stage.canvas) {\n          stage.canvas.removeEventListener(\"pointerdown\", f, false);\n        }\n      }\n    };\n\n    /**\n     * @method _IE_handleEvent\n     * @param {Stage} stage\n     * @param {Object} e The event to handle.\n     * @protected\n     * @static\n     **/\n    Touch._IE_handleEvent = function (stage, e) {\n      if (!stage) {\n        return;\n      }\n      if (stage.__touch.preventDefault) {\n        e.preventDefault && e.preventDefault();\n      }\n      var type = e.type;\n      var id = e.pointerId;\n      var ids = stage.__touch.activeIDs;\n      if (type == \"MSPointerDown\" || type == \"pointerdown\") {\n        if (e.srcElement != stage.canvas) {\n          return;\n        }\n        ids[id] = true;\n        this._handleStart(stage, id, e, e.pageX, e.pageY);\n      } else if (ids[id]) {\n        // it's an id we're watching\n        if (type == \"MSPointerMove\" || type == \"pointermove\") {\n          this._handleMove(stage, id, e, e.pageX, e.pageY);\n        } else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\" || type == \"pointerup\" || type == \"pointercancel\") {\n          delete ids[id];\n          this._handleEnd(stage, id, e);\n        }\n      }\n    };\n\n    /**\n     * @method _handleStart\n     * @param {Stage} stage\n     * @param {String|Number} id\n     * @param {Object} e\n     * @param {Number} x\n     * @param {Number} y\n     * @protected\n     **/\n    Touch._handleStart = function (stage, id, e, x, y) {\n      var props = stage.__touch;\n      if (!props.multitouch && props.count) {\n        return;\n      }\n      var ids = props.pointers;\n      if (ids[id]) {\n        return;\n      }\n      ids[id] = true;\n      props.count++;\n      stage._handlePointerDown(id, e, x, y);\n    };\n\n    /**\n     * @method _handleMove\n     * @param {Stage} stage\n     * @param {String|Number} id\n     * @param {Object} e\n     * @param {Number} x\n     * @param {Number} y\n     * @protected\n     **/\n    Touch._handleMove = function (stage, id, e, x, y) {\n      if (!stage.__touch.pointers[id]) {\n        return;\n      }\n      stage._handlePointerMove(id, e, x, y);\n    };\n\n    /**\n     * @method _handleEnd\n     * @param {Stage} stage\n     * @param {String|Number} id\n     * @param {Object} e\n     * @protected\n     **/\n    Touch._handleEnd = function (stage, id, e) {\n      // TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n      var props = stage.__touch;\n      var ids = props.pointers;\n      if (!ids[id]) {\n        return;\n      }\n      props.count--;\n      stage._handlePointerUp(id, e, true);\n      delete ids[id];\n    };\n    createjs.Touch = Touch;\n  })();\n\n  //##############################################################################\n  // version.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Static class holding library specific information such as the version and buildDate of\n     * the library.\n     * @class EaselJS\n     **/\n    var s = createjs.EaselJS = createjs.EaselJS || {};\n\n    /**\n     * The version string for this release.\n     * @property version\n     * @type String\n     * @static\n     **/\n    s.version = /*=version*/\"0.8.2\"; // injected by build process\n\n    /**\n     * The build date for this release in UTC format.\n     * @property buildDate\n     * @type String\n     * @static\n     **/\n    s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\n  })();\n\n  //##############################################################################\n  // version.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Static class holding library specific information such as the version and buildDate of the library.\n     * @class PreloadJS\n     **/\n    var s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n    /**\n     * The version string for this release.\n     * @property version\n     * @type {String}\n     * @static\n     **/\n    s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n    /**\n     * The build date for this release in UTC format.\n     * @property buildDate\n     * @type {String}\n     * @static\n     **/\n    s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n  })();\n\n  //##############################################################################\n  // proxy.js\n  //##############################################################################\n\n  /**\n   * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n   * createjs namespace directly.\n   *\n   * <h4>Example</h4>\n   *\n   *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n   *\n   * @class Utility Methods\n   * @main Utility Methods\n   */\n\n  (function () {\n    /**\n     * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n     * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n     * method gets called in the correct scope.\n     *\n     * Additional arguments can be passed that will be applied to the function when it is called.\n     *\n     * <h4>Example</h4>\n     *\n     *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n     *\n     *      function myHandler(arg1, arg2) {\n     *           // This gets called when myObject.myCallback is executed.\n     *      }\n     *\n     * @method proxy\n     * @param {Function} method The function to call\n     * @param {Object} scope The scope to call the method name on\n     * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n     * @public\n     * @static\n     */\n    createjs.proxy = function (method, scope) {\n      var aArgs = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        return method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n      };\n    };\n  })();\n\n  //##############################################################################\n  // ErrorEvent.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n     * @class ErrorEvent\n     * @param {String} [title] The error title\n     * @param {String} [message] The error description\n     * @param {Object} [data] Additional error data\n     * @constructor\n     */\n    function ErrorEvent(title, message, data) {\n      this.Event_constructor(\"error\");\n\n      /**\n       * The short error title, which indicates the type of error that occurred.\n       * @property title\n       * @type String\n       */\n      this.title = title;\n\n      /**\n       * The verbose error message, containing details about the error.\n       * @property message\n       * @type String\n       */\n      this.message = message;\n\n      /**\n       * Additional data attached to an error.\n       * @property data\n       * @type {Object}\n       */\n      this.data = data;\n    }\n    var p = createjs.extend(ErrorEvent, createjs.Event);\n    p.clone = function () {\n      return new createjs.ErrorEvent(this.title, this.message, this.data);\n    };\n    createjs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n  })();\n\n  //##############################################################################\n  // ProgressEvent.js\n  //##############################################################################\n\n  (function (scope) {\n    // constructor\n    /**\n     * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n     * @class ProgressEvent\n     * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n     * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n     * a percentage (between 0 and 1), it can be omitted.\n     * @todo Consider having this event be a \"fileprogress\" event as well\n     * @constructor\n     */\n    function ProgressEvent(loaded, total) {\n      this.Event_constructor(\"progress\");\n\n      /**\n       * The amount that has been loaded (out of a total amount)\n       * @property loaded\n       * @type {Number}\n       */\n      this.loaded = loaded;\n\n      /**\n       * The total \"size\" of the load.\n       * @property total\n       * @type {Number}\n       * @default 1\n       */\n      this.total = total == null ? 1 : total;\n\n      /**\n       * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n       * @property progress\n       * @type {Number}\n       * @default 0\n       */\n      this.progress = total == 0 ? 0 : this.loaded / this.total;\n    }\n    var p = createjs.extend(ProgressEvent, createjs.Event);\n\n    /**\n     * Returns a clone of the ProgressEvent instance.\n     * @method clone\n     * @return {ProgressEvent} a clone of the Event instance.\n     **/\n    p.clone = function () {\n      return new createjs.ProgressEvent(this.loaded, this.total);\n    };\n    createjs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n  })();\n  (function () {\n    // Detect the `define` function exposed by asynchronous module loaders. The\n    // strict `define` check is necessary for compatibility with `r.js`.\n    var isLoader = typeof undefined === \"function\";\n\n    // A set of types used to distinguish objects from primitives.\n    var objectTypes = {\n      \"function\": true,\n      \"object\": true\n    };\n\n    // Detect the `exports` object exposed by CommonJS implementations.\n    var freeExports = exports && !exports.nodeType && exports;\n\n    // Use the `global` object exposed by Node (including Browserify via\n    // `insert-module-globals`), Narwhal, and Ringo as the default context,\n    // and the `window` object in browsers. Rhino exports a `global` function\n    // instead.\n    var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes['object'] && module && !module.nodeType && typeof commonjsGlobal == \"object\" && commonjsGlobal;\n    if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n      root = freeGlobal;\n    }\n\n    // Public: Initializes JSON 3 using the given `context` object, attaching the\n    // `stringify` and `parse` functions to the specified `exports` object.\n    function runInContext(context, exports) {\n      context || (context = root[\"Object\"]());\n      exports || (exports = root[\"Object\"]());\n\n      // Native constructor aliases.\n      var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n      // Delegate to the native `stringify` and `parse` implementations.\n      if (typeof nativeJSON == \"object\" && nativeJSON) {\n        exports.stringify = nativeJSON.stringify;\n        exports.parse = nativeJSON.parse;\n      }\n\n      // Convenience aliases.\n      var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty,\n        forEach,\n        undef;\n\n      // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n      var isExtended = new Date(-3509827334573292);\n      try {\n        // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n        // results for certain dates in Opera >= 10.53.\n        isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n      } catch (exception) {}\n\n      // Internal: Determines whether the native `JSON.stringify` and `parse`\n      // implementations are spec-compliant. Based on work by Ken Snyder.\n      function has(name) {\n        if (has[name] !== undef) {\n          // Return cached feature test result.\n          return has[name];\n        }\n        var isSupported;\n        if (name == \"bug-string-char-index\") {\n          // IE <= 7 doesn't support accessing string characters using square\n          // bracket notation. IE 8 only supports this for primitives.\n          isSupported = \"a\"[0] != \"a\";\n        } else if (name == \"json\") {\n          // Indicates whether both `JSON.stringify` and `JSON.parse` are\n          // supported.\n          isSupported = has(\"json-stringify\") && has(\"json-parse\");\n        } else {\n          var value,\n            serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n          // Test `JSON.stringify`.\n          if (name == \"json-stringify\") {\n            var stringify = exports.stringify,\n              stringifySupported = typeof stringify == \"function\" && isExtended;\n            if (stringifySupported) {\n              // A test function object with a custom `toJSON` method.\n              (value = function () {\n                return 1;\n              }).toJSON = value;\n              try {\n                stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" && stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({\n                  \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n                }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n              } catch (exception) {\n                stringifySupported = false;\n              }\n            }\n            isSupported = stringifySupported;\n          }\n          // Test `JSON.parse`.\n          if (name == \"json-parse\") {\n            var parse = exports.parse;\n            if (typeof parse == \"function\") {\n              try {\n                // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n                // Conforming implementations should also coerce the initial argument to\n                // a string prior to parsing.\n                if (parse(\"0\") === 0 && !parse(false)) {\n                  // Simple parsing test.\n                  value = parse(serialized);\n                  var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                  if (parseSupported) {\n                    try {\n                      // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                      parseSupported = !parse('\"\\t\"');\n                    } catch (exception$1) {}\n                    if (parseSupported) {\n                      try {\n                        // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                        // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                        // certain octal literals.\n                        parseSupported = parse(\"01\") !== 1;\n                      } catch (exception$2) {}\n                    }\n                    if (parseSupported) {\n                      try {\n                        // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                        // points. These environments, along with FF 3.1b1 and 2,\n                        // also allow trailing commas in JSON objects and arrays.\n                        parseSupported = parse(\"1.\") !== 1;\n                      } catch (exception$3) {}\n                    }\n                  }\n                }\n              } catch (exception$4) {\n                parseSupported = false;\n              }\n            }\n            isSupported = parseSupported;\n          }\n        }\n        return has[name] = !!isSupported;\n      }\n      if (!has(\"json\")) {\n        // Common `[[Class]]` name aliases.\n        var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n        // Detect incomplete support for accessing string characters by index.\n        var charIndexBuggy = has(\"bug-string-char-index\");\n\n        // Define additional utility methods if the `Date` methods are buggy.\n        if (!isExtended) {\n          var floor = Math.floor;\n          // A mapping between the months of the year and the number of days between\n          // January 1st and the first of the respective month.\n          var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n          // Internal: Calculates the number of days between the Unix epoch and the\n          // first day of the given month.\n          var getDay = function (year, month) {\n            return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n          };\n        }\n\n        // Internal: Determines if a property is a direct property of the given\n        // object. Delegates to the native `Object#hasOwnProperty` method.\n        if (!(isProperty = objectProto.hasOwnProperty)) {\n          isProperty = function (property) {\n            var members = {},\n              constructor;\n            if ((members.__proto__ = null, members.__proto__ = {\n              // The *proto* property cannot be set multiple times in recent\n              // versions of Firefox and SeaMonkey.\n              \"toString\": 1\n            }, members).toString != getClass) {\n              // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n              // supports the mutable *proto* property.\n              isProperty = function (property) {\n                // Capture and break the object's prototype chain (see section 8.6.2\n                // of the ES 5.1 spec). The parenthesized expression prevents an\n                // unsafe transformation by the Closure Compiler.\n                var original = this.__proto__,\n                  result = property in (this.__proto__ = null, this);\n                // Restore the original prototype chain.\n                this.__proto__ = original;\n                return result;\n              };\n            } else {\n              // Capture a reference to the top-level `Object` constructor.\n              constructor = members.constructor;\n              // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n              // other environments.\n              isProperty = function (property) {\n                var parent = (this.constructor || constructor).prototype;\n                return property in this && !(property in parent && this[property] === parent[property]);\n              };\n            }\n            members = null;\n            return isProperty.call(this, property);\n          };\n        }\n\n        // Internal: Normalizes the `for...in` iteration algorithm across\n        // environments. Each enumerated key is yielded to a `callback` function.\n        forEach = function (object, callback) {\n          var size = 0,\n            Properties,\n            members,\n            property;\n\n          // Tests for bugs in the current environment's `for...in` algorithm. The\n          // `valueOf` property inherits the non-enumerable flag from\n          // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n          (Properties = function () {\n            this.valueOf = 0;\n          }).prototype.valueOf = 0;\n\n          // Iterate over a new instance of the `Properties` class.\n          members = new Properties();\n          for (property in members) {\n            // Ignore all properties inherited from `Object.prototype`.\n            if (isProperty.call(members, property)) {\n              size++;\n            }\n          }\n          Properties = members = null;\n\n          // Normalize the iteration algorithm.\n          if (!size) {\n            // A list of non-enumerable properties inherited from `Object.prototype`.\n            members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n            // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n            // properties.\n            forEach = function (object, callback) {\n              var isFunction = getClass.call(object) == functionClass,\n                property,\n                length;\n              var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n              for (property in object) {\n                // Gecko <= 1.0 enumerates the `prototype` property of functions under\n                // certain conditions; IE does not.\n                if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                  callback(property);\n                }\n              }\n              // Manually invoke the callback for each non-enumerable property.\n              for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property)) {}\n            };\n          } else if (size == 2) {\n            // Safari <= 2.0.4 enumerates shadowed properties twice.\n            forEach = function (object, callback) {\n              // Create a set of iterated properties.\n              var members = {},\n                isFunction = getClass.call(object) == functionClass,\n                property;\n              for (property in object) {\n                // Store each property name to prevent double enumeration. The\n                // `prototype` property of functions is not enumerated due to cross-\n                // environment inconsistencies.\n                if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                  callback(property);\n                }\n              }\n            };\n          } else {\n            // No bugs detected; use the standard `for...in` algorithm.\n            forEach = function (object, callback) {\n              var isFunction = getClass.call(object) == functionClass,\n                property,\n                isConstructor;\n              for (property in object) {\n                if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                  callback(property);\n                }\n              }\n              // Manually invoke the callback for the `constructor` property due to\n              // cross-environment inconsistencies.\n              if (isConstructor || isProperty.call(object, property = \"constructor\")) {\n                callback(property);\n              }\n            };\n          }\n          return forEach(object, callback);\n        };\n\n        // Public: Serializes a JavaScript `value` as a JSON string. The optional\n        // `filter` argument may specify either a function that alters how object and\n        // array members are serialized, or an array of strings and numbers that\n        // indicates which properties should be serialized. The optional `width`\n        // argument may be either a string or number that specifies the indentation\n        // level of the output.\n        if (!has(\"json-stringify\")) {\n          // Internal: A map of control characters and their escaped equivalents.\n          var Escapes = {\n            92: \"\\\\\\\\\",\n            34: '\\\\\"',\n            8: \"\\\\b\",\n            12: \"\\\\f\",\n            10: \"\\\\n\",\n            13: \"\\\\r\",\n            9: \"\\\\t\"\n          };\n\n          // Internal: Converts `value` into a zero-padded string such that its\n          // length is at least equal to `width`. The `width` must be <= 6.\n          var leadingZeroes = \"000000\";\n          var toPaddedString = function (width, value) {\n            // The `|| 0` expression is necessary to work around a bug in\n            // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n            return (leadingZeroes + (value || 0)).slice(-width);\n          };\n\n          // Internal: Double-quotes a string `value`, replacing all ASCII control\n          // characters (characters with code unit values between 0 and 31) with\n          // their escaped equivalents. This is an implementation of the\n          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n          var unicodePrefix = \"\\\\u00\";\n          var quote = function (value) {\n            var result = '\"',\n              index = 0,\n              length = value.length,\n              useCharIndex = !charIndexBuggy || length > 10;\n            var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n            for (; index < length; index++) {\n              var charCode = value.charCodeAt(index);\n              // If the character is a control character, append its Unicode or\n              // shorthand escape sequence; otherwise, append the character as-is.\n              switch (charCode) {\n                case 8:\n                case 9:\n                case 10:\n                case 12:\n                case 13:\n                case 34:\n                case 92:\n                  result += Escapes[charCode];\n                  break;\n                default:\n                  if (charCode < 32) {\n                    result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                    break;\n                  }\n                  result += useCharIndex ? symbols[index] : value.charAt(index);\n              }\n            }\n            return result + '\"';\n          };\n\n          // Internal: Recursively serializes an object. Implements the\n          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n          var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n            var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n            try {\n              // Necessary for host object support.\n              value = object[property];\n            } catch (exception) {}\n            if (typeof value == \"object\" && value) {\n              className = getClass.call(value);\n              if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n                if (value > -1 / 0 && value < 1 / 0) {\n                  // Dates are serialized according to the `Date#toJSON` method\n                  // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                  // for the ISO 8601 date time string format.\n                  if (getDay) {\n                    // Manually compute the year, month, date, hours, minutes,\n                    // seconds, and milliseconds if the `getUTC*` methods are\n                    // buggy. Adapted from @Yaffle's `date-shim` project.\n                    date = floor(value / 864e5);\n                    for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++) {}\n                    for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++) {}\n                    date = 1 + date - getDay(year, month);\n                    // The `time` value specifies the time within the day (see ES\n                    // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                    // to compute `A modulo B`, as the `%` operator does not\n                    // correspond to the `modulo` operation for negative numbers.\n                    time = (value % 864e5 + 864e5) % 864e5;\n                    // The hours, minutes, seconds, and milliseconds are obtained by\n                    // decomposing the time within the day. See section 15.9.1.10.\n                    hours = floor(time / 36e5) % 24;\n                    minutes = floor(time / 6e4) % 60;\n                    seconds = floor(time / 1e3) % 60;\n                    milliseconds = time % 1e3;\n                  } else {\n                    year = value.getUTCFullYear();\n                    month = value.getUTCMonth();\n                    date = value.getUTCDate();\n                    hours = value.getUTCHours();\n                    minutes = value.getUTCMinutes();\n                    seconds = value.getUTCSeconds();\n                    milliseconds = value.getUTCMilliseconds();\n                  }\n                  // Serialize extended years correctly.\n                  value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n                } else {\n                  value = null;\n                }\n              } else if (typeof value.toJSON == \"function\" && (className != numberClass && className != stringClass && className != arrayClass || isProperty.call(value, \"toJSON\"))) {\n                // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n                // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n                // ignores all `toJSON` methods on these objects unless they are\n                // defined directly on an instance.\n                value = value.toJSON(property);\n              }\n            }\n            if (callback) {\n              // If a replacement function was provided, call it to obtain the value\n              // for serialization.\n              value = callback.call(object, property, value);\n            }\n            if (value === null) {\n              return \"null\";\n            }\n            className = getClass.call(value);\n            if (className == booleanClass) {\n              // Booleans are represented literally.\n              return \"\" + value;\n            } else if (className == numberClass) {\n              // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n              // `\"null\"`.\n              return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n            } else if (className == stringClass) {\n              // Strings are double-quoted and escaped.\n              return quote(\"\" + value);\n            }\n            // Recursively serialize objects and arrays.\n            if (typeof value == \"object\") {\n              // Check for cyclic structures. This is a linear search; performance\n              // is inversely proportional to the number of unique nested objects.\n              for (length = stack.length; length--;) {\n                if (stack[length] === value) {\n                  // Cyclic structures cannot be serialized by `JSON.stringify`.\n                  throw TypeError();\n                }\n              }\n              // Add the object to the stack of traversed objects.\n              stack.push(value);\n              results = [];\n              // Save the current indentation level and indent one additional level.\n              prefix = indentation;\n              indentation += whitespace;\n              if (className == arrayClass) {\n                // Recursively serialize array elements.\n                for (index = 0, length = value.length; index < length; index++) {\n                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                  results.push(element === undef ? \"null\" : element);\n                }\n                result = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n              } else {\n                // Recursively serialize object members. Members are selected from\n                // either a user-specified list of property names, or the object\n                // itself.\n                forEach(properties || value, function (property) {\n                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                  if (element !== undef) {\n                    // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                    // is not the empty string, let `member` {quote(property) + \":\"}\n                    // be the concatenation of `member` and the `space` character.\"\n                    // The \"`space` character\" refers to the literal space\n                    // character, not the `space` {width} argument provided to\n                    // `JSON.stringify`.\n                    results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                  }\n                });\n                result = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n              }\n              // Remove the object from the traversed object stack.\n              stack.pop();\n              return result;\n            }\n          };\n\n          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n          exports.stringify = function (source, filter, width) {\n            var whitespace, callback, properties, className;\n            if (objectTypes[typeof filter] && filter) {\n              if ((className = getClass.call(filter)) == functionClass) {\n                callback = filter;\n              } else if (className == arrayClass) {\n                // Convert the property names array into a makeshift set.\n                properties = {};\n                for (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1)) {}\n              }\n            }\n            if (width) {\n              if ((className = getClass.call(width)) == numberClass) {\n                // Convert the `width` to an integer and create a string containing\n                // `width` number of space characters.\n                if ((width -= width % 1) > 0) {\n                  for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \") {}\n                }\n              } else if (className == stringClass) {\n                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n              }\n            }\n            // Opera <= 7.54u2 discards the values associated with empty string keys\n            // (`\"\"`) only if they are used directly within an object member list\n            // (e.g., `!(\"\" in { \"\": 1})`).\n            return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n          };\n        }\n\n        // Public: Parses a JSON source string.\n        if (!has(\"json-parse\")) {\n          var fromCharCode = String.fromCharCode;\n\n          // Internal: A map of escaped control characters and their unescaped\n          // equivalents.\n          var Unescapes = {\n            92: \"\\\\\",\n            34: '\"',\n            47: \"/\",\n            98: \"\\b\",\n            116: \"\\t\",\n            110: \"\\n\",\n            102: \"\\f\",\n            114: \"\\r\"\n          };\n\n          // Internal: Stores the parser state.\n          var Index, Source;\n\n          // Internal: Resets the parser state and throws a `SyntaxError`.\n          var abort = function () {\n            Index = Source = null;\n            throw SyntaxError();\n          };\n\n          // Internal: Returns the next token, or `\"$\"` if the parser has reached\n          // the end of the source string. A token may be a string, number, `null`\n          // literal, or Boolean literal.\n          var lex = function () {\n            var source = Source,\n              length = source.length,\n              value,\n              begin,\n              position,\n              isSigned,\n              charCode;\n            while (Index < length) {\n              charCode = source.charCodeAt(Index);\n              switch (charCode) {\n                case 9:\n                case 10:\n                case 13:\n                case 32:\n                  // Skip whitespace tokens, including tabs, carriage returns, line\n                  // feeds, and space characters.\n                  Index++;\n                  break;\n                case 123:\n                case 125:\n                case 91:\n                case 93:\n                case 58:\n                case 44:\n                  // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                  // the current position.\n                  value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                  Index++;\n                  return value;\n                case 34:\n                  // `\"` delimits a JSON string; advance to the next character and\n                  // begin parsing the string. String tokens are prefixed with the\n                  // sentinel `@` character to distinguish them from punctuators and\n                  // end-of-string tokens.\n                  for (value = \"@\", Index++; Index < length;) {\n                    charCode = source.charCodeAt(Index);\n                    if (charCode < 32) {\n                      // Unescaped ASCII control characters (those with a code unit\n                      // less than the space character) are not permitted.\n                      abort();\n                    } else if (charCode == 92) {\n                      // A reverse solidus (`\\`) marks the beginning of an escaped\n                      // control character (including `\"`, `\\`, and `/`) or Unicode\n                      // escape sequence.\n                      charCode = source.charCodeAt(++Index);\n                      switch (charCode) {\n                        case 92:\n                        case 34:\n                        case 47:\n                        case 98:\n                        case 116:\n                        case 110:\n                        case 102:\n                        case 114:\n                          // Revive escaped control characters.\n                          value += Unescapes[charCode];\n                          Index++;\n                          break;\n                        case 117:\n                          // `\\u` marks the beginning of a Unicode escape sequence.\n                          // Advance to the first character and validate the\n                          // four-digit code point.\n                          begin = ++Index;\n                          for (position = Index + 4; Index < position; Index++) {\n                            charCode = source.charCodeAt(Index);\n                            // A valid sequence comprises four hexdigits (case-\n                            // insensitive) that form a single hexadecimal value.\n                            if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                              // Invalid Unicode escape sequence.\n                              abort();\n                            }\n                          }\n                          // Revive the escaped character.\n                          value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                          break;\n                        default:\n                          // Invalid escape sequence.\n                          abort();\n                      }\n                    } else {\n                      if (charCode == 34) {\n                        // An unescaped double-quote character marks the end of the\n                        // string.\n                        break;\n                      }\n                      charCode = source.charCodeAt(Index);\n                      begin = Index;\n                      // Optimize for the common case where a string is valid.\n                      while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                        charCode = source.charCodeAt(++Index);\n                      }\n                      // Append the string as-is.\n                      value += source.slice(begin, Index);\n                    }\n                  }\n                  if (source.charCodeAt(Index) == 34) {\n                    // Advance to the next character and return the revived string.\n                    Index++;\n                    return value;\n                  }\n                  // Unterminated string.\n                  abort();\n                default:\n                  // Parse numbers and literals.\n                  begin = Index;\n                  // Advance past the negative sign, if one is specified.\n                  if (charCode == 45) {\n                    isSigned = true;\n                    charCode = source.charCodeAt(++Index);\n                  }\n                  // Parse an integer or floating-point value.\n                  if (charCode >= 48 && charCode <= 57) {\n                    // Leading zeroes are interpreted as octal literals.\n                    if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n                      // Illegal octal literal.\n                      abort();\n                    }\n                    isSigned = false;\n                    // Parse the integer component.\n                    for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++) {}\n                    // Floats cannot contain a leading decimal point; however, this\n                    // case is already accounted for by the parser.\n                    if (source.charCodeAt(Index) == 46) {\n                      position = ++Index;\n                      // Parse the decimal component.\n                      for (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++) {}\n                      if (position == Index) {\n                        // Illegal trailing decimal.\n                        abort();\n                      }\n                      Index = position;\n                    }\n                    // Parse exponents. The `e` denoting the exponent is\n                    // case-insensitive.\n                    charCode = source.charCodeAt(Index);\n                    if (charCode == 101 || charCode == 69) {\n                      charCode = source.charCodeAt(++Index);\n                      // Skip past the sign following the exponent, if one is\n                      // specified.\n                      if (charCode == 43 || charCode == 45) {\n                        Index++;\n                      }\n                      // Parse the exponential component.\n                      for (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++) {}\n                      if (position == Index) {\n                        // Illegal empty exponent.\n                        abort();\n                      }\n                      Index = position;\n                    }\n                    // Coerce the parsed value to a JavaScript number.\n                    return +source.slice(begin, Index);\n                  }\n                  // A negative sign may only precede numbers.\n                  if (isSigned) {\n                    abort();\n                  }\n                  // `true`, `false`, and `null` literals.\n                  if (source.slice(Index, Index + 4) == \"true\") {\n                    Index += 4;\n                    return true;\n                  } else if (source.slice(Index, Index + 5) == \"false\") {\n                    Index += 5;\n                    return false;\n                  } else if (source.slice(Index, Index + 4) == \"null\") {\n                    Index += 4;\n                    return null;\n                  }\n                  // Unrecognized token.\n                  abort();\n              }\n            }\n            // Return the sentinel `$` character if the parser has reached the end\n            // of the source string.\n            return \"$\";\n          };\n\n          // Internal: Parses a JSON `value` token.\n          var get = function (value) {\n            var results, hasMembers;\n            if (value == \"$\") {\n              // Unexpected end of input.\n              abort();\n            }\n            if (typeof value == \"string\") {\n              if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n                // Remove the sentinel `@` character.\n                return value.slice(1);\n              }\n              // Parse object and array literals.\n              if (value == \"[\") {\n                // Parses a JSON array, returning a new JavaScript array.\n                results = [];\n                for (;; hasMembers || (hasMembers = true)) {\n                  value = lex();\n                  // A closing square bracket marks the end of the array literal.\n                  if (value == \"]\") {\n                    break;\n                  }\n                  // If the array literal contains elements, the current token\n                  // should be a comma separating the previous element from the\n                  // next.\n                  if (hasMembers) {\n                    if (value == \",\") {\n                      value = lex();\n                      if (value == \"]\") {\n                        // Unexpected trailing `,` in array literal.\n                        abort();\n                      }\n                    } else {\n                      // A `,` must separate each array element.\n                      abort();\n                    }\n                  }\n                  // Elisions and leading commas are not permitted.\n                  if (value == \",\") {\n                    abort();\n                  }\n                  results.push(get(value));\n                }\n                return results;\n              } else if (value == \"{\") {\n                // Parses a JSON object, returning a new JavaScript object.\n                results = {};\n                for (;; hasMembers || (hasMembers = true)) {\n                  value = lex();\n                  // A closing curly brace marks the end of the object literal.\n                  if (value == \"}\") {\n                    break;\n                  }\n                  // If the object literal contains members, the current token\n                  // should be a comma separator.\n                  if (hasMembers) {\n                    if (value == \",\") {\n                      value = lex();\n                      if (value == \"}\") {\n                        // Unexpected trailing `,` in object literal.\n                        abort();\n                      }\n                    } else {\n                      // A `,` must separate each object member.\n                      abort();\n                    }\n                  }\n                  // Leading commas are not permitted, object property names must be\n                  // double-quoted strings, and a `:` must separate each property\n                  // name and value.\n                  if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                    abort();\n                  }\n                  results[value.slice(1)] = get(lex());\n                }\n                return results;\n              }\n              // Unexpected token encountered.\n              abort();\n            }\n            return value;\n          };\n\n          // Internal: Updates a traversed object member.\n          var update = function (source, property, callback) {\n            var element = walk(source, property, callback);\n            if (element === undef) {\n              delete source[property];\n            } else {\n              source[property] = element;\n            }\n          };\n\n          // Internal: Recursively traverses a parsed JSON object, invoking the\n          // `callback` function for each value. This is an implementation of the\n          // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n          var walk = function (source, property, callback) {\n            var value = source[property],\n              length;\n            if (typeof value == \"object\" && value) {\n              // `forEach` can't be used to traverse an array in Opera <= 8.54\n              // because its `Object#hasOwnProperty` implementation returns `false`\n              // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n              if (getClass.call(value) == arrayClass) {\n                for (length = value.length; length--;) {\n                  update(value, length, callback);\n                }\n              } else {\n                forEach(value, function (property) {\n                  update(value, property, callback);\n                });\n              }\n            }\n            return callback.call(source, property, value);\n          };\n\n          // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n          exports.parse = function (source, callback) {\n            var result, value;\n            Index = 0;\n            Source = \"\" + source;\n            result = get(lex());\n            // If a JSON string contains multiple tokens, it is invalid.\n            if (lex() != \"$\") {\n              abort();\n            }\n            // Reset the parser state.\n            Index = Source = null;\n            return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n          };\n        }\n      }\n      exports[\"runInContext\"] = runInContext;\n      return exports;\n    }\n    if (freeExports && !isLoader) {\n      // Export for CommonJS environments.\n      runInContext(root, freeExports);\n    } else {\n      // Export for web browsers and JavaScript engines.\n      var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n      var JSON3 = runInContext(root, root[\"JSON3\"] = {\n        // Public: Restores the original value of the global `JSON` object and\n        // returns a reference to the `JSON3` object.\n        \"noConflict\": function () {\n          if (!isRestored) {\n            isRestored = true;\n            root.JSON = nativeJSON;\n            root[\"JSON3\"] = previousJSON;\n            nativeJSON = previousJSON = null;\n          }\n          return JSON3;\n        }\n      });\n      root.JSON = {\n        \"parse\": JSON3.parse,\n        \"stringify\": JSON3.stringify\n      };\n    }\n  }).call(commonjsGlobal);\n\n  //##############################################################################\n  // DomUtils.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A few utilities for interacting with the dom.\n     * @class DomUtils\n     */\n    var s = {};\n    s.appendToHead = function (el) {\n      s.getHead().appendChild(el);\n    };\n    s.getHead = function () {\n      return document.head || document.getElementsByTagName(\"head\")[0];\n    };\n    s.getBody = function () {\n      return document.body || document.getElementsByTagName(\"body\")[0];\n    };\n    createjs.DomUtils = s;\n  })();\n\n  //##############################################################################\n  // DataUtils.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A few data utilities for formatting different data types.\n     * @class DataUtils\n     */\n    var s = {};\n\n    // static methods\n    /**\n     * Parse XML using the DOM. This is required when preloading XML or SVG.\n     * @method parseXML\n     * @param {String} text The raw text or XML that is loaded by XHR.\n     * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\n     * @return {XML} An XML document\n     * @static\n     */\n    s.parseXML = function (text, type) {\n      var xml = null;\n      // CocoonJS does not support XML parsing with either method.\n\n      // Most browsers will use DOMParser\n      // IE fails on certain SVG files, so we have a fallback below.\n      try {\n        if (window.DOMParser) {\n          var parser = new DOMParser();\n          xml = parser.parseFromString(text, type);\n        }\n      } catch (e) {}\n\n      // Fallback for IE support.\n      if (!xml) {\n        try {\n          xml = new ActiveXObject(\"Microsoft.XMLDOM\");\n          xml.async = false;\n          xml.loadXML(text);\n        } catch (e$1) {\n          xml = null;\n        }\n      }\n      return xml;\n    };\n\n    /**\n     * Parse a string into an Object.\n     * @method parseJSON\n     * @param {String} value The loaded JSON string\n     * @returns {Object} A JavaScript object.\n     */\n    s.parseJSON = function (value) {\n      if (value == null) {\n        return null;\n      }\n      try {\n        return JSON.parse(value);\n      } catch (e) {\n        // TODO; Handle this with a custom error?\n        throw e;\n      }\n    };\n    createjs.DataUtils = s;\n  })();\n\n  //##############################################################################\n  // LoadItem.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n     * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n     * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n     * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n     * @class LoadItem\n     * @constructor\n     * @since 0.6.0\n     */\n    function LoadItem() {\n      /**\n       * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n       * string (recommended), or an HTML tag.\n       * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n       * @property src\n       * @type {String}\n       * @default null\n       */\n      this.src = null;\n\n      /**\n       * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n       * be set manually. This is helpful in cases where a file does not have an extension.\n       * @property type\n       * @type {String}\n       * @default null\n       */\n      this.type = null;\n\n      /**\n       * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n       * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n       * @property id\n       * @type {String}\n       * @default null\n       */\n      this.id = null;\n\n      /**\n       * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n       * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n       * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n       * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n       * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n       * @property maintainOrder\n       * @type {Boolean}\n       * @default false\n       */\n      this.maintainOrder = false;\n\n      /**\n       * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n       * @property callback\n       * @type {String}\n       * @default null\n       */\n      this.callback = null;\n\n      /**\n       * An arbitrary data object, which is included with the loaded object.\n       * @property data\n       * @type {Object}\n       * @default null\n       */\n      this.data = null;\n\n      /**\n       * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\n       * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n       * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n       * @property method\n       * @type {String}\n       * @default get\n       */\n      this.method = createjs.LoadItem.GET;\n\n      /**\n       * An object hash of name/value pairs to send to the server.\n       * @property values\n       * @type {Object}\n       * @default null\n       */\n      this.values = null;\n\n      /**\n       * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n       * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n       * default headers by including them in your headers object.\n       * @property headers\n       * @type {Object}\n       * @default null\n       */\n      this.headers = null;\n\n      /**\n       * Enable credentials for XHR requests.\n       * @property withCredentials\n       * @type {Boolean}\n       * @default false\n       */\n      this.withCredentials = false;\n\n      /**\n       * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n       * based files (json, xml, text, css, js).\n       * @property mimeType\n       * @type {String}\n       * @default null\n       */\n      this.mimeType = null;\n\n      /**\n       * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n       * @property crossOrigin\n       * @type {boolean}\n       * @default Anonymous\n       */\n      this.crossOrigin = null;\n\n      /**\n       * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n       * (level one) loading, as XHR (level 2) provides its own timeout event.\n       * @property loadTimeout\n       * @type {Number}\n       * @default 8000 (8 seconds)\n       */\n      this.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n    }\n    var p = LoadItem.prototype = {};\n    var s = LoadItem;\n\n    /**\n     * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n     * (level one) loading, as XHR (level 2) provides its own timeout event.\n     * @property LOAD_TIMEOUT_DEFAULT\n     * @type {number}\n     * @static\n     */\n    s.LOAD_TIMEOUT_DEFAULT = 8000;\n\n    /**\n     * Create a LoadItem.\n     * <ul>\n     *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n     *     <li>LoadItem instances are returned as-is</li>\n     *     <li>Objects are returned with any needed properties added</li>\n     * </ul>\n     * @method create\n     * @param {LoadItem|String|Object} value The load item value\n     * @returns {LoadItem|Object}\n     * @static\n     */\n    s.create = function (value) {\n      if (typeof value == \"string\") {\n        var item = new LoadItem();\n        item.src = value;\n        return item;\n      } else if (value instanceof s) {\n        return value;\n      } else if (value instanceof Object && value.src) {\n        if (value.loadTimeout == null) {\n          value.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n        }\n        return value;\n      } else {\n        throw new Error(\"Type not recognized.\");\n      }\n    };\n\n    /**\n     * Provides a chainable shortcut method for setting a number of properties on the instance.\n     *\n     * <h4>Example</h4>\n     *\n     *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n     *\n     * @method set\n     * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n     * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n    */\n    p.set = function (props) {\n      for (var n in props) {\n        this[n] = props[n];\n      }\n      return this;\n    };\n    createjs.LoadItem = s;\n  })();\n\n  //##############################################################################\n  // RequestUtils.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Utilities that assist with parsing load items, and determining file types, etc.\n     * @class RequestUtils\n     */\n    var s = {};\n\n    /**\n     * The Regular Expression used to test file URLS for an absolute path.\n     * @property ABSOLUTE_PATH\n     * @type {RegExp}\n     * @static\n     */\n    s.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n    /**\n     * The Regular Expression used to test file URLS for a relative path.\n     * @property RELATIVE_PATH\n     * @type {RegExp}\n     * @static\n     */\n    s.RELATIVE_PATT = /^[./]*?\\//i;\n\n    /**\n     * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n     * removed.\n     * @property EXTENSION_PATT\n     * @type {RegExp}\n     * @static\n     */\n    s.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n    /**\n     * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n     * <ul>\n     *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n     *     `//networkPath`)</li>\n     *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n     *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n     *     the file path is expected to follow the format `name.ext`.</li>\n     * </ul>\n     * @method parseURI\n     * @param {String} path\n     * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\n     * property, which is the lowercase extension.\n     * @static\n     */\n    s.parseURI = function (path) {\n      var info = {\n        absolute: false,\n        relative: false\n      };\n      if (path == null) {\n        return info;\n      }\n\n      // Drop the query string\n      var queryIndex = path.indexOf(\"?\");\n      if (queryIndex > -1) {\n        path = path.substr(0, queryIndex);\n      }\n\n      // Absolute\n      var match;\n      if (s.ABSOLUTE_PATT.test(path)) {\n        info.absolute = true;\n\n        // Relative\n      } else if (s.RELATIVE_PATT.test(path)) {\n        info.relative = true;\n      }\n\n      // Extension\n      if (match = path.match(s.EXTENSION_PATT)) {\n        info.extension = match[1].toLowerCase();\n      }\n      return info;\n    };\n\n    /**\n     * Formats an object into a query string for either a POST or GET request.\n     * @method formatQueryString\n     * @param {Object} data The data to convert to a query string.\n     * @param {Array} [query] Existing name/value pairs to append on to this query.\n     * @static\n     */\n    s.formatQueryString = function (data, query) {\n      if (data == null) {\n        throw new Error('You must specify data.');\n      }\n      var params = [];\n      for (var n in data) {\n        params.push(n + '=' + escape(data[n]));\n      }\n      if (query) {\n        params = params.concat(query);\n      }\n      return params.join('&');\n    };\n\n    /**\n     * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n     * @method buildPath\n     * @param {String} src The source path to add values to.\n     * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n     * path will be preserved.\n     * @returns {string} A formatted string that contains the path and the supplied parameters.\n     * @static\n     */\n    s.buildPath = function (src, data) {\n      if (data == null) {\n        return src;\n      }\n      var query = [];\n      var idx = src.indexOf('?');\n      if (idx != -1) {\n        var q = src.slice(idx + 1);\n        query = query.concat(q.split('&'));\n      }\n      if (idx != -1) {\n        return src.slice(0, idx) + '?' + this.formatQueryString(data, query);\n      } else {\n        return src + '?' + this.formatQueryString(data, query);\n      }\n    };\n\n    /**\n     * @method isCrossDomain\n     * @param {LoadItem|Object} item A load item with a `src` property.\n     * @return {Boolean} If the load item is loading from a different domain than the current location.\n     * @static\n     */\n    s.isCrossDomain = function (item) {\n      var target = document.createElement(\"a\");\n      target.href = item.src;\n      var host = document.createElement(\"a\");\n      host.href = location.href;\n      var crossdomain = target.hostname != \"\" && (target.port != host.port || target.protocol != host.protocol || target.hostname != host.hostname);\n      return crossdomain;\n    };\n\n    /**\n     * @method isLocal\n     * @param {LoadItem|Object} item A load item with a `src` property\n     * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n     * well.\n     * @static\n     */\n    s.isLocal = function (item) {\n      var target = document.createElement(\"a\");\n      target.href = item.src;\n      return target.hostname == \"\" && target.protocol == \"file:\";\n    };\n\n    /**\n     * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n     * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n     * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n     * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n     * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n     * @method isBinary\n     * @param {String} type The item type.\n     * @return {Boolean} If the specified type is binary.\n     * @static\n     */\n    s.isBinary = function (type) {\n      switch (type) {\n        case createjs.AbstractLoader.IMAGE:\n        case createjs.AbstractLoader.BINARY:\n          return true;\n        default:\n          return false;\n      }\n    };\n\n    /**\n     * Check if item is a valid HTMLImageElement\n     * @method isImageTag\n     * @param {Object} item\n     * @returns {Boolean}\n     * @static\n     */\n    s.isImageTag = function (item) {\n      return item instanceof HTMLImageElement;\n    };\n\n    /**\n     * Check if item is a valid HTMLAudioElement\n     * @method isAudioTag\n     * @param {Object} item\n     * @returns {Boolean}\n     * @static\n     */\n    s.isAudioTag = function (item) {\n      if (window.HTMLAudioElement) {\n        return item instanceof HTMLAudioElement;\n      } else {\n        return false;\n      }\n    };\n\n    /**\n     * Check if item is a valid HTMLVideoElement\n     * @method isVideoTag\n     * @param {Object} item\n     * @returns {Boolean}\n     * @static\n     */\n    s.isVideoTag = function (item) {\n      if (window.HTMLVideoElement) {\n        return item instanceof HTMLVideoElement;\n      } else {\n        return false;\n      }\n    };\n\n    /**\n     * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n     * @method isText\n     * @param {String} type The item type.\n     * @return {Boolean} If the specified type is text.\n     * @static\n     */\n    s.isText = function (type) {\n      switch (type) {\n        case createjs.AbstractLoader.TEXT:\n        case createjs.AbstractLoader.JSON:\n        case createjs.AbstractLoader.MANIFEST:\n        case createjs.AbstractLoader.XML:\n        case createjs.AbstractLoader.CSS:\n        case createjs.AbstractLoader.SVG:\n        case createjs.AbstractLoader.JAVASCRIPT:\n        case createjs.AbstractLoader.SPRITESHEET:\n          return true;\n        default:\n          return false;\n      }\n    };\n\n    /**\n     * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n     * if it is an unusual extension.\n     * @method getTypeByExtension\n     * @param {String} extension The file extension to use to determine the load type.\n     * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\n     * the type can not be determined by the extension.\n     * @static\n     */\n    s.getTypeByExtension = function (extension) {\n      if (extension == null) {\n        return createjs.AbstractLoader.TEXT;\n      }\n      switch (extension.toLowerCase()) {\n        case \"jpeg\":\n        case \"jpg\":\n        case \"gif\":\n        case \"png\":\n        case \"webp\":\n        case \"bmp\":\n          return createjs.AbstractLoader.IMAGE;\n        case \"ogg\":\n        case \"mp3\":\n        case \"webm\":\n          return createjs.AbstractLoader.SOUND;\n        case \"mp4\":\n        case \"webm\":\n        case \"ts\":\n          return createjs.AbstractLoader.VIDEO;\n        case \"json\":\n          return createjs.AbstractLoader.JSON;\n        case \"xml\":\n          return createjs.AbstractLoader.XML;\n        case \"css\":\n          return createjs.AbstractLoader.CSS;\n        case \"js\":\n          return createjs.AbstractLoader.JAVASCRIPT;\n        case 'svg':\n          return createjs.AbstractLoader.SVG;\n        default:\n          return createjs.AbstractLoader.TEXT;\n      }\n    };\n    createjs.RequestUtils = s;\n  })();\n\n  //##############################################################################\n  // AbstractLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n     * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n     * @class AbstractLoader\n     * @param {LoadItem|object|string} loadItem The item to be loaded.\n     * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n     * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n     * other, so this is a suggested directive.\n     * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n     * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n     * @extends EventDispatcher\n     */\n    function AbstractLoader(loadItem, preferXHR, type) {\n      this.EventDispatcher_constructor();\n\n      // public properties\n      /**\n       * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n       * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n       * @property loaded\n       * @type {Boolean}\n       * @default false\n       */\n      this.loaded = false;\n\n      /**\n       * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n       * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n       * instead.\n       * @property canceled\n       * @type {Boolean}\n       * @default false\n       * @readonly\n       */\n      this.canceled = false;\n\n      /**\n       * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n       *\n       * <h4>Example</h4>\n       *\n       *     var queue = new createjs.LoadQueue();\n       *     queue.loadFile(\"largeImage.png\");\n       *     queue.on(\"progress\", function() {\n       *         console.log(\"Progress:\", queue.progress, event.progress);\n       *     });\n       *\n       * @property progress\n       * @type {Number}\n       * @default 0\n       */\n      this.progress = 0;\n\n      /**\n       * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n       * supported types.\n       * @property type\n       * @type {String}\n       */\n      this.type = type;\n\n      /**\n       * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n       * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n       * can be overridden to provide custom formatting.\n       *\n       * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n       * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n       * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n       * called in the current scope, as well as the success and error callbacks.\n       *\n       * <h4>Example asynchronous resultFormatter</h4>\n       *\n       * \tfunction _formatResult(loader) {\n       * \t\treturn function(success, error) {\n       * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n       * \t\t\tsuccess(result);\n       * \t\t}\n       * \t}\n       * @property resultFormatter\n       * @type {Function}\n       * @default null\n       */\n      this.resultFormatter = null;\n\n      // protected properties\n      /**\n       * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n       * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n       * @property _item\n       * @type {LoadItem|Object}\n       * @private\n       */\n      if (loadItem) {\n        this._item = createjs.LoadItem.create(loadItem);\n      } else {\n        this._item = null;\n      }\n\n      /**\n       * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n       * @property _preferXHR\n       * @type {Boolean}\n       * @private\n       */\n      this._preferXHR = preferXHR;\n\n      /**\n       * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n       * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n       * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n       * @property _result\n       * @type {Object|String}\n       * @private\n       */\n      this._result = null;\n\n      /**\n       * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n       * method, and passing `true`.\n       * @property _rawResult\n       * @type {Object|String}\n       * @private\n       */\n      this._rawResult = null;\n\n      /**\n       * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n       * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n       * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n       * @property _loadItems\n       * @type {null}\n       * @protected\n       */\n      this._loadedItems = null;\n\n      /**\n       * The attribute the items loaded using tags use for the source.\n       * @type {string}\n       * @default null\n       * @private\n       */\n      this._tagSrcAttribute = null;\n\n      /**\n       * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n       * @property _tag\n       * @type {Object}\n       * @private\n       */\n      this._tag = null;\n    }\n    var p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n    var s = AbstractLoader;\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    /**\n     * Defines a POST request, use for a method value when loading data.\n     * @property POST\n     * @type {string}\n     * @default post\n     * @static\n     */\n    s.POST = \"POST\";\n\n    /**\n     * Defines a GET request, use for a method value when loading data.\n     * @property GET\n     * @type {string}\n     * @default get\n     * @static\n     */\n    s.GET = \"GET\";\n\n    /**\n     * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n     * @property BINARY\n     * @type {String}\n     * @default binary\n     * @static\n     * @since 0.6.0\n     */\n    s.BINARY = \"binary\";\n\n    /**\n     * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n     * &lt;style&gt; tag when loaded with tags.\n     * @property CSS\n     * @type {String}\n     * @default css\n     * @static\n     * @since 0.6.0\n     */\n    s.CSS = \"css\";\n\n    /**\n     * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n     * @property IMAGE\n     * @type {String}\n     * @default image\n     * @static\n     * @since 0.6.0\n     */\n    s.IMAGE = \"image\";\n\n    /**\n     * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n     * &lt;script&gt; tag.\n     *\n     * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n     * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n     * only tag-loaded scripts are injected.\n     * @property JAVASCRIPT\n     * @type {String}\n     * @default javascript\n     * @static\n     * @since 0.6.0\n     */\n    s.JAVASCRIPT = \"javascript\";\n\n    /**\n     * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n     * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n     * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n     * must contain a matching wrapper function.\n     * @property JSON\n     * @type {String}\n     * @default json\n     * @static\n     * @since 0.6.0\n     */\n    s.JSON = \"json\";\n\n    /**\n     * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n     * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n     * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n     * property is set to.\n     * @property JSONP\n     * @type {String}\n     * @default jsonp\n     * @static\n     * @since 0.6.0\n     */\n    s.JSONP = \"jsonp\";\n\n    /**\n     * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n     * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n     * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n     * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n     * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n     * @property MANIFEST\n     * @type {String}\n     * @default manifest\n     * @static\n     * @since 0.6.0\n     */\n    s.MANIFEST = \"manifest\";\n\n    /**\n     * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n     * &lt;audio&gt; tag.\n     * @property SOUND\n     * @type {String}\n     * @default sound\n     * @static\n     * @since 0.6.0\n     */\n    s.SOUND = \"sound\";\n\n    /**\n     * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n     * &lt;video&gt; tag.\n     * @property VIDEO\n     * @type {String}\n     * @default video\n     * @static\n     * @since 0.6.0\n     */\n    s.VIDEO = \"video\";\n\n    /**\n     * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n     * @property SPRITESHEET\n     * @type {String}\n     * @default spritesheet\n     * @static\n     * @since 0.6.0\n     */\n    s.SPRITESHEET = \"spritesheet\";\n\n    /**\n     * The preload type for SVG files.\n     * @property SVG\n     * @type {String}\n     * @default svg\n     * @static\n     * @since 0.6.0\n     */\n    s.SVG = \"svg\";\n\n    /**\n     * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n     * loaded as raw text.\n     * @property TEXT\n     * @type {String}\n     * @default text\n     * @static\n     * @since 0.6.0\n     */\n    s.TEXT = \"text\";\n\n    /**\n     * The preload type for xml files. XML is loaded into an XML document.\n     * @property XML\n     * @type {String}\n     * @default xml\n     * @static\n     * @since 0.6.0\n     */\n    s.XML = \"xml\";\n\n    // Events\n    /**\n     * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n     * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n     * @event progress\n     * @since 0.3.0\n     */\n\n    /**\n     * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n     * @event loadstart\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.3.1\n     */\n\n    /**\n     * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n     * @event complete\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.3.0\n     */\n\n    /**\n     * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n     * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n     * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n     * @event error\n     * @since 0.3.0\n     */\n\n    /**\n     * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n     * This enables loaders to maintain internal queues, and surface file load errors.\n     * @event fileerror\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The even type (\"fileerror\")\n     * @param {LoadItem|object} The item that encountered the error\n     * @since 0.6.0\n     */\n\n    /**\n     * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n     * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n     * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n     * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n     * @event fileload\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type (\"fileload\")\n     * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n     * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n     * object will contain that value as a `src` property.\n     * @param {Object} result The HTML tag or parsed result of the loaded item.\n     * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n     * to a usable object.\n     * @since 0.6.0\n     */\n\n    /**\n     * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n     * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n     * @event initialize\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type (\"initialize\")\n     * @param {AbstractLoader} loader The loader that has been initialized.\n     */\n\n    /**\n     * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n     * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n     * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n     * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     * @method getItem\n     * @return {Object} The manifest item that this loader is responsible for loading.\n     * @since 0.6.0\n     */\n    p.getItem = function () {\n      return this._item;\n    };\n\n    /**\n     * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n     * event is dispatched.\n     * @method getResult\n     * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n     * data (if it exists).\n     * @return {Object}\n     * @since 0.6.0\n     */\n    p.getResult = function (raw) {\n      return raw ? this._rawResult : this._result;\n    };\n\n    /**\n     * Return the `tag` this object creates or uses for loading.\n     * @method getTag\n     * @return {Object} The tag instance\n     * @since 0.6.0\n     */\n    p.getTag = function () {\n      return this._tag;\n    };\n\n    /**\n     * Set the `tag` this item uses for loading.\n     * @method setTag\n     * @param {Object} tag The tag instance\n     * @since 0.6.0\n     */\n    p.setTag = function (tag) {\n      this._tag = tag;\n    };\n\n    /**\n     * Begin loading the item. This method is required when using a loader by itself.\n     *\n     * <h4>Example</h4>\n     *\n     *      var queue = new createjs.LoadQueue();\n     *      queue.on(\"complete\", handleComplete);\n     *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n     *      queue.load();\n     *\n     * @method load\n     */\n    p.load = function () {\n      this._createRequest();\n      this._request.on(\"complete\", this, this);\n      this._request.on(\"progress\", this, this);\n      this._request.on(\"loadStart\", this, this);\n      this._request.on(\"abort\", this, this);\n      this._request.on(\"timeout\", this, this);\n      this._request.on(\"error\", this, this);\n      var evt = new createjs.Event(\"initialize\");\n      evt.loader = this._request;\n      this.dispatchEvent(evt);\n      this._request.load();\n    };\n\n    /**\n     * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n     * the background), but events will not longer be dispatched.\n     * @method cancel\n     */\n    p.cancel = function () {\n      this.canceled = true;\n      this.destroy();\n    };\n\n    /**\n     * Clean up the loader.\n     * @method destroy\n     */\n    p.destroy = function () {\n      if (this._request) {\n        this._request.removeAllEventListeners();\n        this._request.destroy();\n      }\n      this._request = null;\n      this._item = null;\n      this._rawResult = null;\n      this._result = null;\n      this._loadItems = null;\n      this.removeAllEventListeners();\n    };\n\n    /**\n     * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n     * to expose items it loads internally.\n     * @method getLoadedItems\n     * @return {Array} A list of the items loaded by the loader.\n     * @since 0.6.0\n     */\n    p.getLoadedItems = function () {\n      return this._loadedItems;\n    };\n\n    // Private methods\n    /**\n     * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n     * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n     * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n     * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n     * @method _createRequest\n     * @protected\n     */\n    p._createRequest = function () {\n      if (!this._preferXHR) {\n        this._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n      } else {\n        this._request = new createjs.XHRRequest(this._item);\n      }\n    };\n\n    /**\n     * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n     * by loaders that require tag loading.\n     * @method _createTag\n     * @param {String} src The tag source\n     * @return {HTMLElement} The tag that was created\n     * @protected\n     */\n    p._createTag = function (src) {\n      return null;\n    };\n\n    /**\n     * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n     * event for details on the event payload.\n     * @method _sendLoadStart\n     * @protected\n     */\n    p._sendLoadStart = function () {\n      if (this._isCanceled()) {\n        return;\n      }\n      this.dispatchEvent(\"loadstart\");\n    };\n\n    /**\n     * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n     * @method _sendProgress\n     * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n     * and <code>total</code> properties.\n     * @protected\n     */\n    p._sendProgress = function (value) {\n      if (this._isCanceled()) {\n        return;\n      }\n      var event = null;\n      if (typeof value == \"number\") {\n        this.progress = value;\n        event = new createjs.ProgressEvent(this.progress);\n      } else {\n        event = value;\n        this.progress = value.loaded / value.total;\n        event.progress = this.progress;\n        if (isNaN(this.progress) || this.progress == Infinity) {\n          this.progress = 0;\n        }\n      }\n      this.hasEventListener(\"progress\") && this.dispatchEvent(event);\n    };\n\n    /**\n     * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n     * @method _sendComplete\n     * @protected\n     */\n    p._sendComplete = function () {\n      if (this._isCanceled()) {\n        return;\n      }\n      this.loaded = true;\n      var event = new createjs.Event(\"complete\");\n      event.rawResult = this._rawResult;\n      if (this._result != null) {\n        event.result = this._result;\n      }\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n     * event for details on the event payload.\n     * @method _sendError\n     * @param {ErrorEvent} event The event object containing specific error properties.\n     * @protected\n     */\n    p._sendError = function (event) {\n      if (this._isCanceled() || !this.hasEventListener(\"error\")) {\n        return;\n      }\n      if (event == null) {\n        event = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n      }\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n     * do not cause issues after the queue has been cleaned up.\n     * @method _isCanceled\n     * @return {Boolean} If the loader has been canceled.\n     * @protected\n     */\n    p._isCanceled = function () {\n      if (window.createjs == null || this.canceled) {\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n     * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n     * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n     * @property resultFormatter\n     * @type Function\n     * @return {Object} The formatted result\n     * @since 0.6.0\n     */\n    p.resultFormatter = null;\n\n    /**\n     * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n     * this method can be overridden for custom behaviours.\n     * @method handleEvent\n     * @param {Event} event The event that the internal request dispatches.\n     * @protected\n     * @since 0.6.0\n     */\n    p.handleEvent = function (event) {\n      switch (event.type) {\n        case \"complete\":\n          this._rawResult = event.target._response;\n          var result = this.resultFormatter && this.resultFormatter(this);\n          if (result instanceof Function) {\n            result.call(this, createjs.proxy(this._resultFormatSuccess, this), createjs.proxy(this._resultFormatFailed, this));\n          } else {\n            this._result = result || this._rawResult;\n            this._sendComplete();\n          }\n          break;\n        case \"progress\":\n          this._sendProgress(event);\n          break;\n        case \"error\":\n          this._sendError(event);\n          break;\n        case \"loadstart\":\n          this._sendLoadStart();\n          break;\n        case \"abort\":\n        case \"timeout\":\n          if (!this._isCanceled()) {\n            this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n          }\n          break;\n      }\n    };\n\n    /**\n     * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n     * functions.\n     * @method _resultFormatSuccess\n     * @param {Object} result The formatted result\n     * @private\n     */\n    p._resultFormatSuccess = function (result) {\n      this._result = result;\n      this._sendComplete();\n    };\n\n    /**\n     * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n     * functions.\n     * @method _resultFormatSuccess\n     * @param {Object} error The error event\n     * @private\n     */\n    p._resultFormatFailed = function (event) {\n      this._sendError(event);\n    };\n\n    /**\n     * @method buildPath\n     * @protected\n     * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\n     * instead.\n     */\n    p.buildPath = function (src, data) {\n      return createjs.RequestUtils.buildPath(src, data);\n    };\n\n    /**\n     * @method toString\n     * @return {String} a string representation of the instance.\n     */\n    p.toString = function () {\n      return \"[PreloadJS AbstractLoader]\";\n    };\n    createjs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // AbstractMediaLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n     * handle HTML media elements, such as Video and Audio.\n     * @class AbstractMediaLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function AbstractMediaLoader(loadItem, preferXHR, type) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n\n      // protected properties\n      this._tagSrcAttribute = \"src\";\n      this.on(\"initialize\", this._updateXHR, this);\n    }\n    var p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n    // static properties\n    // public methods\n    p.load = function () {\n      // TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n      if (!this._tag) {\n        this._tag = this._createTag(this._item.src);\n      }\n      this._tag.preload = \"auto\";\n      this._tag.load();\n      this.AbstractLoader_load();\n    };\n\n    // protected methods\n    /**\n     * Creates a new tag for loading if it doesn't exist yet.\n     * @method _createTag\n     * @private\n     */\n    p._createTag = function () {};\n    p._createRequest = function () {\n      if (!this._preferXHR) {\n        this._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n      } else {\n        this._request = new createjs.XHRRequest(this._item);\n      }\n    };\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n      // Only exists for XHR\n      if (event.loader.setResponseType) {\n        event.loader.setResponseType(\"blob\");\n      }\n    };\n\n    /**\n     * The result formatter for media files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {HTMLVideoElement|HTMLAudioElement}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n      this._tag.onstalled = null;\n      if (this._preferXHR) {\n        var URL = window.URL || window.webkitURL;\n        var result = loader.getResult(true);\n        loader.getTag().src = URL.createObjectURL(result);\n      }\n      return loader.getTag();\n    };\n    createjs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // AbstractRequest.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n     * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n     * hood to get data.\n     * @class AbstractRequest\n     * @param {LoadItem} item\n     * @constructor\n     */\n    var AbstractRequest = function (item) {\n      this._item = item;\n    };\n    var p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n    // public methods\n    /**\n     * Begin a load.\n     * @method load\n     */\n    p.load = function () {};\n\n    /**\n     * Clean up a request.\n     * @method destroy\n     */\n    p.destroy = function () {};\n\n    /**\n     * Cancel an in-progress request.\n     * @method cancel\n     */\n    p.cancel = function () {};\n    createjs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // TagRequest.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n     * @class TagRequest\n     * @param {LoadItem} loadItem\n     * @param {HTMLElement} tag\n     * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n     */\n    function TagRequest(loadItem, tag, srcAttribute) {\n      this.AbstractRequest_constructor(loadItem);\n\n      // protected properties\n      /**\n       * The HTML tag instance that is used to load.\n       * @property _tag\n       * @type {HTMLElement}\n       * @protected\n       */\n      this._tag = tag;\n\n      /**\n       * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n       * @property _tagSrcAttribute\n       * @type {String}\n       * @protected\n       */\n      this._tagSrcAttribute = srcAttribute;\n\n      /**\n       * A method closure used for handling the tag load event.\n       * @property _loadedHandler\n       * @type {Function}\n       * @private\n       */\n      this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n      /**\n       * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n       * @property _addedToDOM\n       * @type {Boolean}\n       * @private\n       */\n      this._addedToDOM = false;\n\n      /**\n       * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\n       *\n       * @type {null}\n       * @private\n       */\n      this._startTagVisibility = null;\n    }\n    var p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n    // public methods\n    p.load = function () {\n      this._tag.onload = createjs.proxy(this._handleTagComplete, this);\n      this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n      this._tag.onerror = createjs.proxy(this._handleError, this);\n      var evt = new createjs.Event(\"initialize\");\n      evt.loader = this._tag;\n      this.dispatchEvent(evt);\n      this._hideTag();\n      this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n      this._tag[this._tagSrcAttribute] = this._item.src;\n\n      // wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n      if (this._tag.parentNode == null) {\n        window.document.body.appendChild(this._tag);\n        this._addedToDOM = true;\n      }\n    };\n    p.destroy = function () {\n      this._clean();\n      this._tag = null;\n      this.AbstractRequest_destroy();\n    };\n\n    // private methods\n    /**\n     * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n     * and LINK tags), but other cases may exist.\n     * @method _handleReadyStateChange\n     * @private\n     */\n    p._handleReadyStateChange = function () {\n      clearTimeout(this._loadTimeout);\n      // This is strictly for tags in browsers that do not support onload.\n      var tag = this._tag;\n\n      // Complete is for old IE support.\n      if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n        this._handleTagComplete();\n      }\n    };\n\n    /**\n     * Handle any error events from the tag.\n     * @method _handleError\n     * @protected\n     */\n    p._handleError = function () {\n      this._clean();\n      this.dispatchEvent(\"error\");\n    };\n\n    /**\n     * Handle the tag's onload callback.\n     * @method _handleTagComplete\n     * @private\n     */\n    p._handleTagComplete = function () {\n      this._rawResult = this._tag;\n      this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n      this._clean();\n      this._showTag();\n      this.dispatchEvent(\"complete\");\n    };\n\n    /**\n     * The tag request has not loaded within the time specified in loadTimeout.\n     * @method _handleError\n     * @param {Object} event The XHR error event.\n     * @private\n     */\n    p._handleTimeout = function () {\n      this._clean();\n      this.dispatchEvent(new createjs.Event(\"timeout\"));\n    };\n\n    /**\n     * Remove event listeners, but don't destroy the request object\n     * @method _clean\n     * @private\n     */\n    p._clean = function () {\n      this._tag.onload = null;\n      this._tag.onreadystatechange = null;\n      this._tag.onerror = null;\n      if (this._addedToDOM && this._tag.parentNode != null) {\n        this._tag.parentNode.removeChild(this._tag);\n      }\n      clearTimeout(this._loadTimeout);\n    };\n    p._hideTag = function () {\n      this._startTagVisibility = this._tag.style.visibility;\n      this._tag.style.visibility = \"hidden\";\n    };\n    p._showTag = function () {\n      this._tag.style.visibility = this._startTagVisibility;\n    };\n\n    /**\n     * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n     * that is already in a load, but not complete.\n     * @method _handleStalled\n     * @private\n     */\n    p._handleStalled = function () {\n      //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n    };\n    createjs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n  })();\n\n  //##############################################################################\n  // MediaTagRequest.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n     * @class MediaTagRequest\n     * @param {LoadItem} loadItem\n     * @param {HTMLAudioElement|HTMLVideoElement} tag\n     * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n     * @constructor\n     */\n    function MediaTagRequest(loadItem, tag, srcAttribute) {\n      this.AbstractRequest_constructor(loadItem);\n\n      // protected properties\n      this._tag = tag;\n      this._tagSrcAttribute = srcAttribute;\n      this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n    }\n    var p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\n    // public methods\n    p.load = function () {\n      var sc = createjs.proxy(this._handleStalled, this);\n      this._stalledCallback = sc;\n      var pc = createjs.proxy(this._handleProgress, this);\n      this._handleProgress = pc;\n      this._tag.addEventListener(\"stalled\", sc);\n      this._tag.addEventListener(\"progress\", pc);\n\n      // This will tell us when audio is buffered enough to play through, but not when its loaded.\n      // The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n      this._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n      this.TagRequest_load();\n    };\n\n    // private methods\n    p._handleReadyStateChange = function () {\n      clearTimeout(this._loadTimeout);\n      // This is strictly for tags in browsers that do not support onload.\n      var tag = this._tag;\n\n      // Complete is for old IE support.\n      if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n        this._handleTagComplete();\n      }\n    };\n    p._handleStalled = function () {\n      //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n    };\n\n    /**\n     * An XHR request has reported progress.\n     * @method _handleProgress\n     * @param {Object} event The XHR progress event.\n     * @private\n     */\n    p._handleProgress = function (event) {\n      if (!event || event.loaded > 0 && event.total == 0) {\n        return; // Sometimes we get no \"total\", so just ignore the progress event.\n      }\n      var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n      this.dispatchEvent(newEvent);\n    };\n\n    // protected methods\n    p._clean = function () {\n      this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n      this._tag.removeEventListener(\"stalled\", this._stalledCallback);\n      this._tag.removeEventListener(\"progress\", this._progressCallback);\n      this.TagRequest__clean();\n    };\n    createjs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n  })();\n\n  //##############################################################################\n  // XHRRequest.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n     * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n     * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n     * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n     * cross-domain loading.\n     * @class XHRRequest\n     * @constructor\n     * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n     * for an overview of supported file properties.\n     * @extends AbstractLoader\n     */\n    function XHRRequest(item) {\n      this.AbstractRequest_constructor(item);\n\n      // protected properties\n      /**\n       * A reference to the XHR request used to load the content.\n       * @property _request\n       * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n       * @private\n       */\n      this._request = null;\n\n      /**\n       * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n       * typically IE9).\n       * @property _loadTimeout\n       * @type {Number}\n       * @private\n       */\n      this._loadTimeout = null;\n\n      /**\n       * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n       * the version, so we use capabilities to make a best guess.\n       * @property _xhrLevel\n       * @type {Number}\n       * @default 1\n       * @private\n       */\n      this._xhrLevel = 1;\n\n      /**\n       * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n       * null until the file is loaded.\n       * @property _response\n       * @type {mixed}\n       * @private\n       */\n      this._response = null;\n\n      /**\n       * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n       * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n       * want to access the raw content as it was loaded.\n       * @property _rawResponse\n       * @type {String|Object}\n       * @private\n       */\n      this._rawResponse = null;\n      this._canceled = false;\n\n      // Setup our event handlers now.\n      this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n      this._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n      this._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n      this._handleErrorProxy = createjs.proxy(this._handleError, this);\n      this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n      this._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n      this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n      if (!this._createXHR(item)) ;\n    }\n    var p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n    // static properties\n    /**\n     * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n     * @property ACTIVEX_VERSIONS\n     * @type {Array}\n     * @since 0.4.2\n     * @private\n     */\n    XHRRequest.ACTIVEX_VERSIONS = [\"Msxml2.XMLHTTP.6.0\", \"Msxml2.XMLHTTP.5.0\", \"Msxml2.XMLHTTP.4.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"];\n\n    // Public methods\n    /**\n     * Look up the loaded result.\n     * @method getResult\n     * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n     * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n     * returned instead.\n     * @return {Object} A result object containing the content that was loaded, such as:\n     * <ul>\n     *      <li>An image tag (&lt;image /&gt;) for images</li>\n     *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n     *      HTML head.</li>\n     *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n     *      <li>Raw text for TEXT</li>\n     *      <li>A formatted JavaScript object defined by JSON</li>\n     *      <li>An XML document</li>\n     *      <li>An binary arraybuffer loaded by XHR</li>\n     * </ul>\n     * Note that if a raw result is requested, but not found, the result will be returned instead.\n     */\n    p.getResult = function (raw) {\n      if (raw && this._rawResponse) {\n        return this._rawResponse;\n      }\n      return this._response;\n    };\n\n    // Overrides abstract method in AbstractRequest\n    p.cancel = function () {\n      this.canceled = true;\n      this._clean();\n      this._request.abort();\n    };\n\n    // Overrides abstract method in AbstractLoader\n    p.load = function () {\n      if (this._request == null) {\n        this._handleError();\n        return;\n      }\n\n      //Events\n      if (this._request.addEventListener != null) {\n        this._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n        this._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n        this._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n        this._request.addEventListener(\"error\", this._handleErrorProxy, false);\n        this._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n        // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n        this._request.addEventListener(\"load\", this._handleLoadProxy, false);\n        this._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n      } else {\n        // IE9 support\n        this._request.onloadstart = this._handleLoadStartProxy;\n        this._request.onprogress = this._handleProgressProxy;\n        this._request.onabort = this._handleAbortProxy;\n        this._request.onerror = this._handleErrorProxy;\n        this._request.ontimeout = this._handleTimeoutProxy;\n\n        // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n        this._request.onload = this._handleLoadProxy;\n        this._request.onreadystatechange = this._handleReadyStateChangeProxy;\n      }\n\n      // Set up a timeout if we don't have XHR2\n      if (this._xhrLevel == 1) {\n        this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n      }\n\n      // Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n      try {\n        if (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\n          this._request.send();\n        } else if (this._item.method == createjs.AbstractLoader.POST) {\n          this._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\n        }\n      } catch (error) {\n        this.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n      }\n    };\n    p.setResponseType = function (type) {\n      // Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n      if (type === 'blob') {\n        type = window.URL ? 'blob' : 'arraybuffer';\n        this._responseType = type;\n      }\n      this._request.responseType = type;\n    };\n\n    /**\n     * Get all the response headers from the XmlHttpRequest.\n     *\n     * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n     * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n     * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n     * pair.\n     * @method getAllResponseHeaders\n     * @return {String}\n     * @since 0.4.1\n     */\n    p.getAllResponseHeaders = function () {\n      if (this._request.getAllResponseHeaders instanceof Function) {\n        return this._request.getAllResponseHeaders();\n      } else {\n        return null;\n      }\n    };\n\n    /**\n     * Get a specific response header from the XmlHttpRequest.\n     *\n     * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n     * header, unless the field name is Set-Cookie or Set-Cookie2.\n     * @method getResponseHeader\n     * @param {String} header The header name to retrieve.\n     * @return {String}\n     * @since 0.4.1\n     */\n    p.getResponseHeader = function (header) {\n      if (this._request.getResponseHeader instanceof Function) {\n        return this._request.getResponseHeader(header);\n      } else {\n        return null;\n      }\n    };\n\n    // protected methods\n    /**\n     * The XHR request has reported progress.\n     * @method _handleProgress\n     * @param {Object} event The XHR progress event.\n     * @private\n     */\n    p._handleProgress = function (event) {\n      if (!event || event.loaded > 0 && event.total == 0) {\n        return; // Sometimes we get no \"total\", so just ignore the progress event.\n      }\n      var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n      this.dispatchEvent(newEvent);\n    };\n\n    /**\n     * The XHR request has reported a load start.\n     * @method _handleLoadStart\n     * @param {Object} event The XHR loadStart event.\n     * @private\n     */\n    p._handleLoadStart = function (event) {\n      clearTimeout(this._loadTimeout);\n      this.dispatchEvent(\"loadstart\");\n    };\n\n    /**\n     * The XHR request has reported an abort event.\n     * @method handleAbort\n     * @param {Object} event The XHR abort event.\n     * @private\n     */\n    p._handleAbort = function (event) {\n      this._clean();\n      this.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n    };\n\n    /**\n     * The XHR request has reported an error event.\n     * @method _handleError\n     * @param {Object} event The XHR error event.\n     * @private\n     */\n    p._handleError = function (event) {\n      this._clean();\n      this.dispatchEvent(new createjs.ErrorEvent(event.message));\n    };\n\n    /**\n     * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n     * event, so we must monitor the readyStateChange to determine if the file is loaded.\n     * @method _handleReadyStateChange\n     * @param {Object} event The XHR readyStateChange event.\n     * @private\n     */\n    p._handleReadyStateChange = function (event) {\n      if (this._request.readyState == 4) {\n        this._handleLoad();\n      }\n    };\n\n    /**\n     * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n     * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n     * @method _handleLoad\n     * @param {Object} event The XHR load event.\n     * @private\n     */\n    p._handleLoad = function (event) {\n      if (this.loaded) {\n        return;\n      }\n      this.loaded = true;\n      var error = this._checkError();\n      if (error) {\n        this._handleError(error);\n        return;\n      }\n      this._response = this._getResponse();\n      // Convert arraybuffer back to blob\n      if (this._responseType === 'arraybuffer') {\n        try {\n          this._response = new Blob([this._response]);\n        } catch (e) {\n          // Fallback to use BlobBuilder if Blob constructor is not supported\n          // Tested on Android 2.3 ~ 4.2 and iOS5 safari\n          window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n          if (e.name === 'TypeError' && window.BlobBuilder) {\n            var builder = new BlobBuilder();\n            builder.append(this._response);\n            this._response = builder.getBlob();\n          }\n        }\n      }\n      this._clean();\n      this.dispatchEvent(new createjs.Event(\"complete\"));\n    };\n\n    /**\n     * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n     * callback.\n     * @method _handleTimeout\n     * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n     * @private\n     */\n    p._handleTimeout = function (event) {\n      this._clean();\n      this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n    };\n\n    // Protected\n    /**\n     * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\n     * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\n     * @method _checkError\n     * @return {int} If the request status returns an error code.\n     * @private\n     */\n    p._checkError = function () {\n      //LM: Probably need additional handlers here, maybe 501\n      var status = parseInt(this._request.status);\n      switch (status) {\n        case 404: // Not Found\n        case 0:\n          // Not Loaded\n          return new Error(status);\n      }\n      return null;\n    };\n\n    /**\n     * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n     * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n     * @method _getResponse\n     * @private\n     */\n    p._getResponse = function () {\n      if (this._response != null) {\n        return this._response;\n      }\n      if (this._request.response != null) {\n        return this._request.response;\n      }\n\n      // Android 2.2 uses .responseText\n      try {\n        if (this._request.responseText != null) {\n          return this._request.responseText;\n        }\n      } catch (e) {}\n\n      // When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n      try {\n        if (this._request.responseXML != null) {\n          return this._request.responseXML;\n        }\n      } catch (e$1) {}\n      return null;\n    };\n\n    /**\n     * Create an XHR request. Depending on a number of factors, we get totally different results.\n     * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n     *      <li>XMLHttpRequest are created when available.</li>\n     *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n     *      <li>Text requests override the mime type if possible</li>\n     *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n     *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n     * @method _createXHR\n     * @param {Object} item The requested item that is being loaded.\n     * @return {Boolean} If an XHR request or equivalent was successfully created.\n     * @private\n     */\n    p._createXHR = function (item) {\n      // Check for cross-domain loads. We can't fully support them, but we can try.\n      var crossdomain = createjs.RequestUtils.isCrossDomain(item);\n      var headers = {};\n\n      // Create the request. Fallback to whatever support we have.\n      var req = null;\n      if (window.XMLHttpRequest) {\n        req = new XMLHttpRequest();\n        // This is 8 or 9, so use XDomainRequest instead.\n        if (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n          req = new XDomainRequest();\n        }\n      } else {\n        // Old IE versions use a different approach\n        for (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n          var axVersion = s.ACTIVEX_VERSIONS[i];\n          try {\n            req = new ActiveXObject(axVersion);\n            break;\n          } catch (e) {}\n        }\n        if (req == null) {\n          return false;\n        }\n      }\n\n      // Default to utf-8 for Text requests.\n      if (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n        item.mimeType = \"text/plain; charset=utf-8\";\n      }\n\n      // IE9 doesn't support overrideMimeType(), so we need to check for it.\n      if (item.mimeType && req.overrideMimeType) {\n        req.overrideMimeType(item.mimeType);\n      }\n\n      // Determine the XHR level\n      this._xhrLevel = typeof req.responseType === \"string\" ? 2 : 1;\n      var src = null;\n      if (item.method == createjs.AbstractLoader.GET) {\n        src = createjs.RequestUtils.buildPath(item.src, item.values);\n      } else {\n        src = item.src;\n      }\n\n      // Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n      req.open(item.method || createjs.AbstractLoader.GET, src, true);\n      if (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n        headers[\"Origin\"] = location.origin;\n      }\n\n      // To send data we need to set the Content-type header)\n      if (item.values && item.method == createjs.AbstractLoader.POST) {\n        headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n      }\n      if (!crossdomain && !headers[\"X-Requested-With\"]) {\n        headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n      }\n      if (item.headers) {\n        for (var n in item.headers) {\n          headers[n] = item.headers[n];\n        }\n      }\n      for (n in headers) {\n        req.setRequestHeader(n, headers[n]);\n      }\n      if (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n        req.withCredentials = item.withCredentials;\n      }\n      this._request = req;\n      return true;\n    };\n\n    /**\n     * A request has completed (or failed or canceled), and needs to be disposed.\n     * @method _clean\n     * @private\n     */\n    p._clean = function () {\n      clearTimeout(this._loadTimeout);\n      if (this._request.removeEventListener != null) {\n        this._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n        this._request.removeEventListener(\"progress\", this._handleProgressProxy);\n        this._request.removeEventListener(\"abort\", this._handleAbortProxy);\n        this._request.removeEventListener(\"error\", this._handleErrorProxy);\n        this._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n        this._request.removeEventListener(\"load\", this._handleLoadProxy);\n        this._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n      } else {\n        this._request.onloadstart = null;\n        this._request.onprogress = null;\n        this._request.onabort = null;\n        this._request.onerror = null;\n        this._request.ontimeout = null;\n        this._request.onload = null;\n        this._request.onreadystatechange = null;\n      }\n    };\n    p.toString = function () {\n      return \"[PreloadJS XHRRequest]\";\n    };\n    createjs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n  })();\n\n  //##############################################################################\n  // LoadQueue.js\n  //##############################################################################\n\n  /*\n   TODO: WINDOWS ISSUES\n   * No error for HTML audio in IE 678\n   * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n   * No script complete handler in IE 67 TAGS (XHR is fine)\n   * No XML/JSON in IE6 TAGS\n   * Need to hide loading SVG in Opera TAGS\n   * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n   * SVG no load or failure in Opera XHR\n   * Reported issues with IE7/8\n   */\n\n  (function () {\n    // constructor\n    /**\n     * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n     * a single file, or queue of files.\n     *\n     * <b>Creating a Queue</b><br />\n     * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n     * argument to false.\n     *\n     *      var queue = new createjs.LoadQueue(true);\n     *\n     * <b>Listening for Events</b><br />\n     * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n     * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n     *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n     *     files</li>\n     *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n     *     any file.</li>\n     *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n     *     changed.</li>\n     *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n     *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n     *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n     * </ul>\n     *\n     *      queue.on(\"fileload\", handleFileLoad, this);\n     *      queue.on(\"complete\", handleComplete, this);\n     *\n     * <b>Adding files and manifests</b><br />\n     * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n     * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n     * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n     * like.\n     *\n     *      queue.loadFile(\"filePath/file.jpg\");\n     *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n     *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n     *\n     *      // Use an external manifest\n     *      queue.loadManifest(\"path/to/manifest.json\");\n     *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n     *\n     * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n     * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n     * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n     * `loadNow` argument of `true`.\n     *\n     *      queue.load();\n     *\n     * <b>File Types</b><br />\n     * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n     * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n     * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n     * <code>type</code> property with any manifest item.\n     *\n     *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\n     *\n     *      // Note that PreloadJS will not read a file extension from the query string\n     *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\n     *\n     * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n     * <ul>\n     *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n     *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\n     *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n     *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n     *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\n     *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n     *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n     *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n     *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n     *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n     *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n     *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\n     *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n        *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n     *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\n     * </ul>\n     *\n     * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\n     * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\n     * are deprecated.</em>\n     *\n     * <b>Handling Results</b><br />\n     * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n     * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n     * formatted object that can be used immediately, including:\n     * <ul>\n     *     <li>Binary: The binary loaded result</li>\n     *     <li>CSS: A &lt;link /&gt; tag</li>\n     *     <li>Image: An &lt;img /&gt; tag</li>\n     *     <li>JavaScript: A &lt;script /&gt; tag</li>\n     *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n     *     <li>Manifest: A JavaScript object.\n     *     <li>Sound: An &lt;audio /&gt; tag</a>\n     *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n     *     <li>SVG: An &lt;object /&gt; tag</li>\n     *     <li>Text: Raw text</li>\n        *     <li>Video: A Video DOM node</li>\n     *     <li>XML: An XML DOM node</li>\n     * </ul>\n     *\n     *      function handleFileLoad(event) {\n     *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n     *          var type = item.type;\n     *\n     *          // Add any images to the page body.\n     *          if (type == createjs.LoadQueue.IMAGE) {\n     *              document.body.appendChild(event.result);\n     *          }\n     *      }\n     *\n     * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n     * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n     * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n     * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n     *\n     *      var image = queue.getResult(\"image\");\n     *      document.body.appendChild(image);\n     *\n     * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n     * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n     * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n     * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n     *\n     *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n     *\n     * <b>Plugins</b><br />\n     * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n     * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n     * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n     *\n     *      queue.installPlugin(createjs.Sound);\n     *\n     * <h4>Known Browser Issues</h4>\n     * <ul>\n     *     <li>Browsers without audio support can not load audio files.</li>\n     *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n     *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n     *     than Chrome will continue to download in the background.</li>\n     *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n     *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n     *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n     *     XHR to work.</li>\n     *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n     *     canceled, although no events will be dispatched.</li>\n     * </ul>\n     *\n     * @class LoadQueue\n     * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n     * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n     * when necessary.\n     * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n     * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n     * will not receive a base path.\n     * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n     * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n     * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n     * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n     *\n     * @constructor\n     * @extends AbstractLoader\n     */\n    function LoadQueue(preferXHR, basePath, crossOrigin) {\n      this.AbstractLoader_constructor();\n\n      /**\n       * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n       * @property _plugins\n       * @type {Array}\n       * @private\n       * @since 0.6.1\n       */\n      this._plugins = [];\n\n      /**\n       * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n       * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n       * method for more information.\n       * @property _typeCallbacks\n       * @type {Object}\n       * @private\n       */\n      this._typeCallbacks = {};\n\n      /**\n       * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n       * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n       * method for more information.\n       * @property _extensionCallbacks\n       * @type {null}\n       * @private\n       */\n      this._extensionCallbacks = {};\n\n      /**\n       * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n       * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n       * @property next\n       * @type {LoadQueue}\n       * @default null\n       */\n      this.next = null;\n\n      /**\n       * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n       * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n       * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n       * specified.\n       *\n       * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n       * property on the load item, or by ensuring that only one connection can be open at a time using\n       * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n       * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n       * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n       *\n       * <h4>Example</h4>\n       *\n       *      var queue = new createjs.LoadQueue();\n       *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n       *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n       *      queue.loadManifest([\n       *          \"script1.js\",\n       *          \"script2.js\",\n       *          \"image.png\", // Load any time\n       *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n       *          \"image3.png\",\n       *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n       *      ]);\n       *\n       * @property maintainScriptOrder\n       * @type {Boolean}\n       * @default true\n       */\n      this.maintainScriptOrder = true;\n\n      /**\n       * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n       * @property stopOnError\n       * @type {Boolean}\n       * @default false\n       */\n      this.stopOnError = false;\n\n      /**\n       * The number of maximum open connections that a loadQueue tries to maintain. Please see\n       * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n       * @property _maxConnections\n       * @type {Number}\n       * @default 1\n       * @private\n       */\n      this._maxConnections = 1;\n\n      /**\n       * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n       * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n       * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n       * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n       * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n       * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n       *\n       * Loaders can be removed from PreloadJS by simply not including them.\n       *\n       * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n       * so that they are checked first.\n       * @property _availableLoaders\n       * @type {Array}\n       * @private\n       * @since 0.6.0\n       */\n      this._availableLoaders = [createjs.ImageLoader, createjs.JavaScriptLoader, createjs.CSSLoader, createjs.JSONLoader, createjs.JSONPLoader, createjs.SoundLoader, createjs.ManifestLoader, createjs.SpriteSheetLoader, createjs.XMLLoader, createjs.SVGLoader, createjs.BinaryLoader, createjs.VideoLoader, createjs.TextLoader];\n\n      /**\n       * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n      \t\t * @property _defaultLoaderLength\n       * @type {Number}\n       * @private\n       * @since 0.6.0\n       */\n      this._defaultLoaderLength = this._availableLoaders.length;\n      this.init(preferXHR, basePath, crossOrigin);\n    }\n    var p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n    var s = LoadQueue;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    /**\n     * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n     * @method init\n     * @param preferXHR\n     * @param basePath\n     * @param crossOrigin\n     * @private\n     */\n    p.init = function (preferXHR, basePath, crossOrigin) {\n      // public properties\n      /**\n       * @property useXHR\n       * @type {Boolean}\n       * @readonly\n       * @default true\n       * @deprecated Use preferXHR instead.\n       */\n      this.useXHR = true;\n\n      /**\n       * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n       * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n       * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n       * user-defined type.\n       * @type {Boolean}\n       * @default true\n       * @since 0.6.0\n       */\n      this.preferXHR = true; //TODO: Get/Set\n      this._preferXHR = true;\n      this.setPreferXHR(preferXHR);\n\n      // protected properties\n      /**\n       * Whether the queue is currently paused or not.\n       * @property _paused\n       * @type {boolean}\n       * @private\n       */\n      this._paused = false;\n\n      /**\n       * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n       * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n       * as `http://`, or a relative path such as `../`.\n       * @property _basePath\n       * @type {String}\n       * @private\n       * @since 0.3.1\n       */\n      this._basePath = basePath;\n\n      /**\n       * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n       * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n       * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n       * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n       * and \"Anonymous\".\n       * @property _crossOrigin\n       * @type {String}\n       * @default \"\"\n       * @private\n       * @since 0.4.1\n       */\n      this._crossOrigin = crossOrigin;\n\n      /**\n       * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n       * file is requested.\n       * @property _loadStartWasDispatched\n       * @type {Boolean}\n       * @default false\n       * @private\n       */\n      this._loadStartWasDispatched = false;\n\n      /**\n       * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n       * using a script tag to do preloading.\n       * @property _currentlyLoadingScript\n       * @type {Boolean}\n       * @private\n       */\n      this._currentlyLoadingScript = null;\n\n      /**\n       * An array containing the currently downloading files.\n       * @property _currentLoads\n       * @type {Array}\n       * @private\n       */\n      this._currentLoads = [];\n\n      /**\n       * An array containing the queued items that have not yet started downloading.\n       * @property _loadQueue\n       * @type {Array}\n       * @private\n       */\n      this._loadQueue = [];\n\n      /**\n       * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n       * @property _loadQueueBackup\n       * @type {Array}\n       * @private\n       */\n      this._loadQueueBackup = [];\n\n      /**\n       * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n       * id.\n       * @property _loadItemsById\n       * @type {Object}\n       * @private\n       */\n      this._loadItemsById = {};\n\n      /**\n       * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n       * source.\n       * @property _loadItemsBySrc\n       * @type {Object}\n       * @private\n       */\n      this._loadItemsBySrc = {};\n\n      /**\n       * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n       * @property _loadedResults\n       * @type {Object}\n       * @private\n       */\n      this._loadedResults = {};\n\n      /**\n       * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n       * @property _loadedRawResults\n       * @type {Object}\n       * @private\n       */\n      this._loadedRawResults = {};\n\n      /**\n       * The number of items that have been requested. This helps manage an overall progress without knowing how large\n       * the files are before they are downloaded. This does not include items inside of loaders such as the\n       * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n       * @property _numItems\n       * @type {Number}\n       * @default 0\n       * @private\n       */\n      this._numItems = 0;\n\n      /**\n       * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n       * the files are before they are downloaded.\n       * @property _numItemsLoaded\n       * @type {Number}\n       * @default 0\n       * @private\n       */\n      this._numItemsLoaded = 0;\n\n      /**\n       * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n       * order.\n       * @property _scriptOrder\n       * @type {Array}\n       * @private\n       */\n      this._scriptOrder = [];\n\n      /**\n       * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n       * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n       * once they are complete and have been dispatched.\n       * @property _loadedScripts\n       * @type {Array}\n       * @private\n       */\n      this._loadedScripts = [];\n\n      /**\n       * The last progress amount. This is used to suppress duplicate progress events.\n       * @property _lastProgress\n       * @type {Number}\n       * @private\n       * @since 0.6.0\n       */\n      this._lastProgress = NaN;\n    };\n\n    // static properties\n    /**\n     * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n     * event is dispatched if the timeout is reached before any data is received.\n     * @property loadTimeout\n     * @type {Number}\n     * @default 8000\n     * @static\n     * @since 0.4.1\n     * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\n     */\n    s.loadTimeout = 8000;\n\n    /**\n     * The time in milliseconds to assume a load has failed.\n     * @property LOAD_TIMEOUT\n     * @type {Number}\n     * @default 0\n     * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\n     */\n    s.LOAD_TIMEOUT = 0;\n\n    // Preload Types\n    /**\n     * @property BINARY\n     * @type {String}\n     * @default binary\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\n     */\n    s.BINARY = createjs.AbstractLoader.BINARY;\n\n    /**\n     * @property CSS\n     * @type {String}\n     * @default css\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n     */\n    s.CSS = createjs.AbstractLoader.CSS;\n\n    /**\n     * @property IMAGE\n     * @type {String}\n     * @default image\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n     */\n    s.IMAGE = createjs.AbstractLoader.IMAGE;\n\n    /**\n     * @property JAVASCRIPT\n     * @type {String}\n     * @default javascript\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n     */\n    s.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\n\n    /**\n     * @property JSON\n     * @type {String}\n     * @default json\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\n     */\n    s.JSON = createjs.AbstractLoader.JSON;\n\n    /**\n     * @property JSONP\n     * @type {String}\n     * @default jsonp\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\n     */\n    s.JSONP = createjs.AbstractLoader.JSONP;\n\n    /**\n     * @property MANIFEST\n     * @type {String}\n     * @default manifest\n     * @static\n     * @since 0.4.1\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\n     */\n    s.MANIFEST = createjs.AbstractLoader.MANIFEST;\n\n    /**\n     * @property SOUND\n     * @type {String}\n     * @default sound\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n     */\n    s.SOUND = createjs.AbstractLoader.SOUND;\n\n    /**\n     * @property VIDEO\n     * @type {String}\n     * @default video\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n     */\n    s.VIDEO = createjs.AbstractLoader.VIDEO;\n\n    /**\n     * @property SVG\n     * @type {String}\n     * @default svg\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\n     */\n    s.SVG = createjs.AbstractLoader.SVG;\n\n    /**\n     * @property TEXT\n     * @type {String}\n     * @default text\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\n     */\n    s.TEXT = createjs.AbstractLoader.TEXT;\n\n    /**\n     * @property XML\n     * @type {String}\n     * @default xml\n     * @static\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\n     */\n    s.XML = createjs.AbstractLoader.XML;\n\n    /**\n     * @property POST\n     * @type {string}\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\n     */\n    s.POST = createjs.AbstractLoader.POST;\n\n    /**\n     * @property GET\n     * @type {string}\n     * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\n     */\n    s.GET = createjs.AbstractLoader.GET;\n\n    // events\n    /**\n     * This event is fired when an individual file has loaded, and been processed.\n     * @event fileload\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n     * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n     * object will contain that value as a `src` property.\n     * @param {Object} result The HTML tag or parsed result of the loaded item.\n     * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n     * to a usable object.\n     * @since 0.3.0\n     */\n\n    /**\n     * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n     * @event fileprogress\n     * @since 0.3.0\n     */\n\n    /**\n     * This event is fired when an individual file starts to load.\n     * @event filestart\n     * @param {Object} The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n     * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n     * object will contain that value as a property.\n     */\n\n    /**\n     * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n     * a LoadQueue instance.\n     * @event initialize\n     * @private\n     */\n\n    // public methods\n    /**\n     * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n     * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n     * once, and will be prepended to the list of available loaders.\n     * @method registerLoader\n     * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n     * @since 0.6.0\n     */\n    p.registerLoader = function (loader) {\n      if (!loader || !loader.canLoadItem) {\n        throw new Error(\"loader is of an incorrect type.\");\n      } else if (this._availableLoaders.indexOf(loader) != -1) {\n        throw new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n      }\n      this._availableLoaders.unshift(loader);\n    };\n\n    /**\n     * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n     * unregistered, the default loaders will always be available.\n     * @method unregisterLoader\n     * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n     */\n    p.unregisterLoader = function (loader) {\n      var idx = this._availableLoaders.indexOf(loader);\n      if (idx != -1 && idx < this._defaultLoaderLength - 1) {\n        this._availableLoaders.splice(idx, 1);\n      }\n    };\n\n    /**\n     * @method setUseXHR\n     * @param {Boolean} value The new useXHR value to set.\n     * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\n     * the provided value argument was true.\n     * @since 0.3.0\n     * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\n     * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\n     */\n    p.setUseXHR = function (value) {\n      return this.setPreferXHR(value);\n    };\n\n    /**\n     * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n     * fail, or be ignored depending on the browser's capabilities and the load type.\n     * @method setPreferXHR\n     * @param {Boolean} value\n     * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n     * @since 0.6.0\n     */\n    p.setPreferXHR = function (value) {\n      // Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n      //TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n      this.preferXHR = value != false && window.XMLHttpRequest != null;\n      return this.preferXHR;\n    };\n\n    /**\n     * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n     * content, and allows the queue to be used again.\n     * @method removeAll\n     * @since 0.3.0\n     */\n    p.removeAll = function () {\n      this.remove();\n    };\n\n    /**\n     * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n     * This also removes internal references to loaded item(s).\n     *\n     * <h4>Example</h4>\n     *\n     *      queue.loadManifest([\n     *          {src:\"test.png\", id:\"png\"},\n     *          {src:\"test.jpg\", id:\"jpg\"},\n     *          {src:\"test.mp3\", id:\"mp3\"}\n     *      ]);\n     *      queue.remove(\"png\"); // Single item by ID\n     *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n     *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n     *\n     * @method remove\n     * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n     * items, or multiple items as arguments.\n     * @since 0.3.0\n     */\n    p.remove = function (idsOrUrls) {\n      var args = null;\n      if (idsOrUrls && !Array.isArray(idsOrUrls)) {\n        args = [idsOrUrls];\n      } else if (idsOrUrls) {\n        args = idsOrUrls;\n      } else if (arguments.length > 0) {\n        return;\n      }\n      var itemsWereRemoved = false;\n\n      // Destroy everything\n      if (!args) {\n        this.close();\n        for (var n in this._loadItemsById) {\n          this._disposeItem(this._loadItemsById[n]);\n        }\n        this.init(this.preferXHR, this._basePath);\n\n        // Remove specific items\n      } else {\n        while (args.length) {\n          var item = args.pop();\n          var r = this.getResult(item);\n\n          //Remove from the main load Queue\n          for (i = this._loadQueue.length - 1; i >= 0; i--) {\n            loadItem = this._loadQueue[i].getItem();\n            if (loadItem.id == item || loadItem.src == item) {\n              this._loadQueue.splice(i, 1)[0].cancel();\n              break;\n            }\n          }\n\n          //Remove from the backup queue\n          for (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n            loadItem = this._loadQueueBackup[i].getItem();\n            if (loadItem.id == item || loadItem.src == item) {\n              this._loadQueueBackup.splice(i, 1)[0].cancel();\n              break;\n            }\n          }\n          if (r) {\n            this._disposeItem(this.getItem(item));\n          } else {\n            for (var i = this._currentLoads.length - 1; i >= 0; i--) {\n              var loadItem = this._currentLoads[i].getItem();\n              if (loadItem.id == item || loadItem.src == item) {\n                this._currentLoads.splice(i, 1)[0].cancel();\n                itemsWereRemoved = true;\n                break;\n              }\n            }\n          }\n        }\n\n        // If this was called during a load, try to load the next item.\n        if (itemsWereRemoved) {\n          this._loadNext();\n        }\n      }\n    };\n\n    /**\n     * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n     * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n     * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n     * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n     * @method reset\n     * @since 0.3.0\n     */\n    p.reset = function () {\n      this.close();\n      for (var n in this._loadItemsById) {\n        this._disposeItem(this._loadItemsById[n]);\n      }\n\n      //Reset the queue to its start state\n      var a = [];\n      for (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n        a.push(this._loadQueueBackup[i].getItem());\n      }\n      this.loadManifest(a, false);\n    };\n\n    /**\n     * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n     * Currently, only one plugin can exist per type/extension.\n     *\n     * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n     * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n     * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n     *\n     * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n     * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n     * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n     * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n     * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n     * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n     *\n     * @method installPlugin\n     * @param {Function} plugin The plugin class to install.\n     */\n    p.installPlugin = function (plugin) {\n      if (plugin == null) {\n        return;\n      }\n      if (plugin.getPreloadHandlers != null) {\n        this._plugins.push(plugin);\n        var map = plugin.getPreloadHandlers();\n        map.scope = plugin;\n        if (map.types != null) {\n          for (var i = 0, l = map.types.length; i < l; i++) {\n            this._typeCallbacks[map.types[i]] = map;\n          }\n        }\n        if (map.extensions != null) {\n          for (i = 0, l = map.extensions.length; i < l; i++) {\n            this._extensionCallbacks[map.extensions[i]] = map;\n          }\n        }\n      }\n    };\n\n    /**\n     * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n     * number of open connections, so any additional connections may remain in a pending state until the browser\n     * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n     * is `true`, only one script is loaded at a time due to browser limitations.\n     *\n     * <h4>Example</h4>\n     *\n     *      var queue = new createjs.LoadQueue();\n     *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n     *\n     * @method setMaxConnections\n     * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n     * is open at any time.\n     */\n    p.setMaxConnections = function (value) {\n      this._maxConnections = value;\n      if (!this._paused && this._loadQueue.length > 0) {\n        this._loadNext();\n      }\n    };\n\n    /**\n     * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n     * method.\n     *\n     * Files are always appended to the current queue, so this method can be used multiple times to add files.\n     * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n     * @method loadFile\n     * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n     * <ul>\n     *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n     *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n     *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     *     in the background.</li>\n     * </ul>\n     * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n     * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n     * `true`, the queue will resume automatically.\n     * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n     * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\n     * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n     * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n     * constructor, or a `path` property in a manifest definition.\n     */\n    p.loadFile = function (file, loadNow, basePath) {\n      if (file == null) {\n        var event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n        this._sendError(event);\n        return;\n      }\n      this._addItem(file, null, basePath);\n      if (loadNow !== false) {\n        this.setPaused(false);\n      } else {\n        this.setPaused(true);\n      }\n    };\n\n    /**\n     * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n     * The files in the manifest are requested in the same order, but may complete in a different order if the max\n     * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n     * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n     * default).\n     *\n     * Files are always appended to the current queue, so this method can be used multiple times to add files.\n     * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n     * @method loadManifest\n     * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n     * manifests:\n     * <ol>\n     *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n     *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n     *     prepended to each file in the list.</li>\n     *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n     *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n     *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n     *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n     *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n     *     <li>An Array of files to load.</li>\n     * </ol>\n     *\n     * Each \"file\" in a manifest can be either:\n     * <ul>\n     *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n     *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n     *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     *     in the background.</li>\n     * </ul>\n     *\n     * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n     * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n     * `true`, the queue will resume automatically.\n     * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n     * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n     * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n     * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n     * constructor, or a `path` property in a manifest definition.\n     */\n    p.loadManifest = function (manifest, loadNow, basePath) {\n      var fileList = null;\n      var path = null;\n\n      // Array-based list of items\n      if (Array.isArray(manifest)) {\n        if (manifest.length == 0) {\n          var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n          this._sendError(event);\n          return;\n        }\n        fileList = manifest;\n\n        // String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n      } else if (typeof manifest === \"string\") {\n        fileList = [{\n          src: manifest,\n          type: s.MANIFEST\n        }];\n      } else if (typeof manifest == \"object\") {\n        // An object that defines a manifest path\n        if (manifest.src !== undefined) {\n          if (manifest.type == null) {\n            manifest.type = s.MANIFEST;\n          } else if (manifest.type != s.MANIFEST) {\n            var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n            this._sendError(event);\n          }\n          fileList = [manifest];\n\n          // An object that defines a manifest\n        } else if (manifest.manifest !== undefined) {\n          fileList = manifest.manifest;\n          path = manifest.path;\n        }\n\n        // Unsupported. This will throw an error.\n      } else {\n        var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n        this._sendError(event);\n        return;\n      }\n      for (var i = 0, l = fileList.length; i < l; i++) {\n        this._addItem(fileList[i], path, basePath);\n      }\n      if (loadNow !== false) {\n        this.setPaused(false);\n      } else {\n        this.setPaused(true);\n      }\n    };\n\n    /**\n     * Start a LoadQueue that was created, but not automatically started.\n     * @method load\n     */\n    p.load = function () {\n      this.setPaused(false);\n    };\n\n    /**\n     * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n     * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n     * `basePath` will not be part of the ID.\n     * @method getItem\n     * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n     * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n     * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n     * event as the `item` parameter.\n     */\n    p.getItem = function (value) {\n      return this._loadItemsById[value] || this._loadItemsBySrc[value];\n    };\n\n    /**\n     * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n     * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n     * `basePath` will not be part of the ID.\n     * @method getResult\n     * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n     * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n     * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n     * returned instead.\n     * @return {Object} A result object containing the content that was loaded, such as:\n     * <ul>\n     *      <li>An image tag (&lt;image /&gt;) for images</li>\n     *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n     *      DOM.</li>\n     *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n     *      <li>Raw text for TEXT</li>\n     *      <li>A formatted JavaScript object defined by JSON</li>\n     *      <li>An XML document</li>\n     *      <li>A binary arraybuffer loaded by XHR</li>\n     *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n     *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n     *      which can not be used to play audio back.</li>\n     * </ul>\n     * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n     * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n     */\n    p.getResult = function (value, rawResult) {\n      var item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n      if (item == null) {\n        return null;\n      }\n      var id = item.id;\n      if (rawResult && this._loadedRawResults[id]) {\n        return this._loadedRawResults[id];\n      }\n      return this._loadedResults[id];\n    };\n\n    /**\n     * Generate an list of items loaded by this queue.\n     * @method getItems\n     * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n     * and failed load items will also be included.\n     * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n     * result, and rawResult.\n     * @since 0.6.0\n     */\n    p.getItems = function (loaded) {\n      var arr = [];\n      for (var n in this._loadItemsById) {\n        var item = this._loadItemsById[n];\n        var result = this.getResult(n);\n        if (loaded === true && result == null) {\n          continue;\n        }\n        arr.push({\n          item: item,\n          result: result,\n          rawResult: this.getResult(n, true)\n        });\n      }\n      return arr;\n    };\n\n    /**\n     * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n     * be processed when active loads complete. LoadQueues are not paused by default.\n     *\n     * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n     * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n     * argument is `false`.\n     * @method setPaused\n     * @param {Boolean} value Whether the queue should be paused or not.\n     */\n    p.setPaused = function (value) {\n      this._paused = value;\n      if (!this._paused) {\n        this._loadNext();\n      }\n    };\n\n    /**\n     * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n     * starting to download. Note that currently any active loads will remain open, and events may be processed.\n     *\n     * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n     * @method close\n     */\n    p.close = function () {\n      while (this._currentLoads.length) {\n        this._currentLoads.pop().cancel();\n      }\n      this._scriptOrder.length = 0;\n      this._loadedScripts.length = 0;\n      this.loadStartWasDispatched = false;\n      this._itemCount = 0;\n      this._lastProgress = NaN;\n    };\n\n    // protected methods\n    /**\n     * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n     * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n     * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n     * method.\n     * @method _addItem\n     * @param {String|Object} value The item to add to the queue.\n     * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n     * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n     * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n     * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n     * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n     * version.\n     * @private\n     */\n    p._addItem = function (value, path, basePath) {\n      var item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n      if (item == null) {\n        return;\n      } // Sometimes plugins or types should be skipped.\n      var loader = this._createLoader(item);\n      if (loader != null) {\n        if (\"plugins\" in loader) {\n          loader.plugins = this._plugins;\n        }\n        item._loader = loader;\n        this._loadQueue.push(loader);\n        this._loadQueueBackup.push(loader);\n        this._numItems++;\n        this._updateProgress();\n\n        // Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n        if (this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT\n        //&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n        || item.maintainOrder === true) {\n          this._scriptOrder.push(item);\n          this._loadedScripts.push(null);\n        }\n      }\n    };\n\n    /**\n     * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n     * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n     * XHR is only used for file types that support it in new browsers.\n     *\n     * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n     * alter the load item.\n     * @method _createLoadItem\n     * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n     * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n     * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n     * when it is added.\n     * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n     * the path argument.\n     * @return {Object} The loader instance that will be used.\n     * @private\n     */\n    p._createLoadItem = function (value, path, basePath) {\n      var item = createjs.LoadItem.create(value);\n      if (item == null) {\n        return null;\n      }\n      var bp = \"\"; // Store the generated basePath\n      var useBasePath = basePath || this._basePath;\n      if (item.src instanceof Object) {\n        if (!item.type) {\n          return null;\n        } // the the src is an object, type is required to pass off to plugin\n        if (path) {\n          bp = path;\n          var pathMatch = createjs.RequestUtils.parseURI(path);\n          // Also append basePath\n          if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n            bp = useBasePath + bp;\n          }\n        } else if (useBasePath != null) {\n          bp = useBasePath;\n        }\n      } else {\n        // Determine Extension, etc.\n        var match = createjs.RequestUtils.parseURI(item.src);\n        if (match.extension) {\n          item.ext = match.extension;\n        }\n        if (item.type == null) {\n          item.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n        }\n\n        // Inject path & basePath\n        var autoId = item.src;\n        if (!match.absolute && !match.relative) {\n          if (path) {\n            bp = path;\n            var pathMatch = createjs.RequestUtils.parseURI(path);\n            autoId = path + autoId;\n            // Also append basePath\n            if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n              bp = useBasePath + bp;\n            }\n          } else if (useBasePath != null) {\n            bp = useBasePath;\n          }\n        }\n        item.src = bp + item.src;\n      }\n      item.path = bp;\n\n      // If there's no id, set one now.\n      if (item.id === undefined || item.id === null || item.id === \"\") {\n        item.id = autoId;\n      }\n\n      // Give plugins a chance to modify the loadItem:\n      var customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n      if (customHandler) {\n        // Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n        var result = customHandler.callback.call(customHandler.scope, item, this);\n\n        // The plugin will handle the load, or has canceled it. Ignore it.\n        if (result === false) {\n          return null;\n\n          // Load as normal:\n        } else if (result === true) ;else if (result != null) {\n          item._loader = result;\n        }\n\n        // Update the extension in case the type changed:\n        match = createjs.RequestUtils.parseURI(item.src);\n        if (match.extension != null) {\n          item.ext = match.extension;\n        }\n      }\n\n      // Store the item for lookup. This also helps clean-up later.\n      this._loadItemsById[item.id] = item;\n      this._loadItemsBySrc[item.src] = item;\n      if (item.crossOrigin == null) {\n        item.crossOrigin = this._crossOrigin;\n      }\n      return item;\n    };\n\n    /**\n     * Create a loader for a load item.\n     * @method _createLoader\n     * @param {Object} item A formatted load item that can be used to generate a loader.\n     * @return {AbstractLoader} A loader that can be used to load content.\n     * @private\n     */\n    p._createLoader = function (item) {\n      if (item._loader != null) {\n        // A plugin already specified a loader\n        return item._loader;\n      }\n\n      // Initially, try and use the provided/supported XHR mode:\n      var preferXHR = this.preferXHR;\n      for (var i = 0; i < this._availableLoaders.length; i++) {\n        var loader = this._availableLoaders[i];\n        if (loader && loader.canLoadItem(item)) {\n          return new loader(item, preferXHR);\n        }\n      }\n\n      // TODO: Log error (requires createjs.log)\n      return null;\n    };\n\n    /**\n     * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n     * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n     * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n     * using tags, which have to be loaded one at a time to maintain load order.\n     * @method _loadNext\n     * @private\n     */\n    p._loadNext = function () {\n      if (this._paused) {\n        return;\n      }\n\n      // Only dispatch loadstart event when the first file is loaded.\n      if (!this._loadStartWasDispatched) {\n        this._sendLoadStart();\n        this._loadStartWasDispatched = true;\n      }\n\n      // The queue has completed.\n      if (this._numItems == this._numItemsLoaded) {\n        this.loaded = true;\n        this._sendComplete();\n\n        // Load the next queue, if it has been defined.\n        if (this.next && this.next.load) {\n          this.next.load();\n        }\n      } else {\n        this.loaded = false;\n      }\n\n      // Must iterate forwards to load in the right order.\n      for (var i = 0; i < this._loadQueue.length; i++) {\n        if (this._currentLoads.length >= this._maxConnections) {\n          break;\n        }\n        var loader = this._loadQueue[i];\n\n        // Determine if we should be only loading one tag-script at a time:\n        // Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n        if (!this._canStartLoad(loader)) {\n          continue;\n        }\n        this._loadQueue.splice(i, 1);\n        i--;\n        this._loadItem(loader);\n      }\n    };\n\n    /**\n     * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n     * @method _loadItem\n     * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n     * @private\n     */\n    p._loadItem = function (loader) {\n      loader.on(\"fileload\", this._handleFileLoad, this);\n      loader.on(\"progress\", this._handleProgress, this);\n      loader.on(\"complete\", this._handleFileComplete, this);\n      loader.on(\"error\", this._handleError, this);\n      loader.on(\"fileerror\", this._handleFileError, this);\n      this._currentLoads.push(loader);\n      this._sendFileStart(loader.getItem());\n      loader.load();\n    };\n\n    /**\n     * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n     * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n     * events.\n     * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n     * @private\n     * @since 0.6.0\n     */\n    p._handleFileLoad = function (event) {\n      event.target = null;\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n     * loaders like M\n     * @param event\n     * @private\n     */\n    p._handleFileError = function (event) {\n      var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n      this._sendError(newEvent);\n    };\n\n    /**\n     * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n     * is set to `true`.\n     * @method _handleError\n     * @param {ErrorEvent} event The error event, containing relevant error information.\n     * @private\n     */\n    p._handleError = function (event) {\n      var loader = event.target;\n      this._numItemsLoaded++;\n      this._finishOrderedItem(loader, true);\n      this._updateProgress();\n      var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n      // TODO: Propagate actual error message.\n\n      this._sendError(newEvent);\n      if (!this.stopOnError) {\n        this._removeLoadItem(loader);\n        this._cleanLoadItem(loader);\n        this._loadNext();\n      } else {\n        this.setPaused(true);\n      }\n    };\n\n    /**\n     * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n     * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n     * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n     * @method _handleFileComplete\n     * @param {Event} event The event object from the loader.\n     * @private\n     */\n    p._handleFileComplete = function (event) {\n      var loader = event.target;\n      var item = loader.getItem();\n      var result = loader.getResult();\n      this._loadedResults[item.id] = result;\n      var rawResult = loader.getResult(true);\n      if (rawResult != null && rawResult !== result) {\n        this._loadedRawResults[item.id] = rawResult;\n      }\n      this._saveLoadedItems(loader);\n\n      // Remove the load item\n      this._removeLoadItem(loader);\n      if (!this._finishOrderedItem(loader)) {\n        // The item was NOT managed, so process it now\n        this._processFinishedLoad(item, loader);\n      }\n\n      // Clean up the load item\n      this._cleanLoadItem(loader);\n    };\n\n    /**\n     * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n     * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n     * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n     * methods.\n     * @method _saveLoadedItems\n     * @param {AbstractLoader} loader\n     * @protected\n     * @since 0.6.0\n     */\n    p._saveLoadedItems = function (loader) {\n      // TODO: Not sure how to handle this. Would be nice to expose the items.\n      // Loaders may load sub-items. This adds them to this queue\n      var list = loader.getLoadedItems();\n      if (list === null) {\n        return;\n      }\n      for (var i = 0; i < list.length; i++) {\n        var item = list[i].item;\n\n        // Store item lookups\n        this._loadItemsBySrc[item.src] = item;\n        this._loadItemsById[item.id] = item;\n\n        // Store loaded content\n        this._loadedResults[item.id] = list[i].result;\n        this._loadedRawResults[item.id] = list[i].rawResult;\n      }\n    };\n\n    /**\n     * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n     * so, trigger prior items to trigger as well.\n     * @method _finishOrderedItem\n     * @param {AbstractLoader} loader\n     * @param {Boolean} loadFailed\n     * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n     * behaviour if it is.\n     * @private\n     */\n    p._finishOrderedItem = function (loader, loadFailed) {\n      var item = loader.getItem();\n      if (this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT || item.maintainOrder) {\n        //TODO: Evaluate removal of the _currentlyLoadingScript\n        if (loader instanceof createjs.JavaScriptLoader) {\n          this._currentlyLoadingScript = false;\n        }\n        var index = createjs.indexOf(this._scriptOrder, item);\n        if (index == -1) {\n          return false;\n        } // This loader no longer exists\n        this._loadedScripts[index] = loadFailed === true ? true : item;\n        this._checkScriptLoadOrder();\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n     * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n     * and then when they are processed and dispatched, the value is set to `true`. This method simply\n     * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n     * dispatched.\n     * @method _checkScriptLoadOrder\n     * @private\n     */\n    p._checkScriptLoadOrder = function () {\n      var l = this._loadedScripts.length;\n      for (var i = 0; i < l; i++) {\n        var item = this._loadedScripts[i];\n        if (item === null) {\n          break;\n        } // This is still loading. Do not process further.\n        if (item === true) {\n          continue;\n        } // This has completed, and been processed. Move on.\n\n        var loadItem = this._loadedResults[item.id];\n        if (item.type == createjs.LoadQueue.JAVASCRIPT) {\n          // Append script tags to the head automatically.\n          createjs.DomUtils.appendToHead(loadItem);\n        }\n        var loader = item._loader;\n        this._processFinishedLoad(item, loader);\n        this._loadedScripts[i] = true;\n      }\n    };\n\n    /**\n     * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n     * the next item.\n     * @method _processFinishedLoad\n     * @param {LoadItem|Object} item\n     * @param {AbstractLoader} loader\n     * @protected\n     */\n    p._processFinishedLoad = function (item, loader) {\n      this._numItemsLoaded++;\n\n      // Since LoadQueue needs maintain order, we can't append scripts in the loader.\n      // So we do it here instead. Or in _checkScriptLoadOrder();\n      if (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\n        var tag = loader.getTag();\n        createjs.DomUtils.appendToHead(tag);\n      }\n      this._updateProgress();\n      this._sendFileComplete(item, loader);\n      this._loadNext();\n    };\n\n    /**\n     * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n     * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n     * the script can even be started, since it exist in the DOM while loading.\n     * @method _canStartLoad\n     * @param {AbstractLoader} loader The loader for the item\n     * @return {Boolean} Whether the item can start a load or not.\n     * @private\n     */\n    p._canStartLoad = function (loader) {\n      if (!this.maintainScriptOrder || loader.preferXHR) {\n        return true;\n      }\n      var item = loader.getItem();\n      if (item.type != createjs.LoadQueue.JAVASCRIPT) {\n        return true;\n      }\n      if (this._currentlyLoadingScript) {\n        return false;\n      }\n      var index = this._scriptOrder.indexOf(item);\n      var i = 0;\n      while (i < index) {\n        var checkItem = this._loadedScripts[i];\n        if (checkItem == null) {\n          return false;\n        }\n        i++;\n      }\n      this._currentlyLoadingScript = true;\n      return true;\n    };\n\n    /**\n     * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n     * @method _removeLoadItem\n     * @param {AbstractLoader} loader A loader instance to remove.\n     * @private\n     */\n    p._removeLoadItem = function (loader) {\n      var l = this._currentLoads.length;\n      for (var i = 0; i < l; i++) {\n        if (this._currentLoads[i] == loader) {\n          this._currentLoads.splice(i, 1);\n          break;\n        }\n      }\n    };\n\n    /**\n     * Remove unneeded references from a loader.\n     *\n     * @param loader\n     * @private\n     */\n    p._cleanLoadItem = function (loader) {\n      var item = loader.getItem();\n      if (item) {\n        delete item._loader;\n      }\n    };\n\n    /**\n     * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n     * @method _handleProgress\n     * @param {ProgressEvent} event The progress event from the item.\n     * @private\n     */\n    p._handleProgress = function (event) {\n      var loader = event.target;\n      this._sendFileProgress(loader.getItem(), loader.progress);\n      this._updateProgress();\n    };\n\n    /**\n     * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n     * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n     * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n     * loaded progress on top of the already-loaded items.\n     *\n     * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n     * <ul>\n     *      <li>5/10 of the items in the queue (50%)</li>\n     *      <li>plus 20% of item 6's slot (2%)</li>\n     *      <li>equals 52%</li>\n     * </ul>\n     * @method _updateProgress\n     * @private\n     */\n    p._updateProgress = function () {\n      var loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n      var remaining = this._numItems - this._numItemsLoaded;\n      if (remaining > 0) {\n        var chunk = 0;\n        for (var i = 0, l = this._currentLoads.length; i < l; i++) {\n          chunk += this._currentLoads[i].progress;\n        }\n        loaded += chunk / remaining * (remaining / this._numItems);\n      }\n      if (this._lastProgress != loaded) {\n        this._sendProgress(loaded);\n        this._lastProgress = loaded;\n      }\n    };\n\n    /**\n     * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n     * hashes.\n     * @method _disposeItem\n     * @param {LoadItem|Object} item The item that was passed in for preloading.\n     * @private\n     */\n    p._disposeItem = function (item) {\n      delete this._loadedResults[item.id];\n      delete this._loadedRawResults[item.id];\n      delete this._loadItemsById[item.id];\n      delete this._loadItemsBySrc[item.src];\n    };\n\n    /**\n     * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n     * event for details on the event payload.\n     * @method _sendFileProgress\n     * @param {LoadItem|Object} item The item that is being loaded.\n     * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n     * @protected\n     */\n    p._sendFileProgress = function (item, progress) {\n      if (this._isCanceled() || this._paused) {\n        return;\n      }\n      if (!this.hasEventListener(\"fileprogress\")) {\n        return;\n      }\n\n      //LM: Rework ProgressEvent to support this?\n      var event = new createjs.Event(\"fileprogress\");\n      event.progress = progress;\n      event.loaded = progress;\n      event.total = 1;\n      event.item = item;\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n     * details on the event payload.\n     * @method _sendFileComplete\n     * @param {LoadItemObject} item The item that is being loaded.\n     * @param {AbstractLoader} loader\n     * @protected\n     */\n    p._sendFileComplete = function (item, loader) {\n      if (this._isCanceled() || this._paused) {\n        return;\n      }\n      var event = new createjs.Event(\"fileload\");\n      event.loader = loader;\n      event.item = item;\n      event.result = this._loadedResults[item.id];\n      event.rawResult = this._loadedRawResults[item.id];\n\n      // This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n      if (item.completeHandler) {\n        item.completeHandler(event);\n      }\n      this.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n    };\n\n    /**\n     * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n     * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n     * @method _sendFileStart\n     * @param {LoadItem|Object} item The item that is being loaded.\n     * @protected\n     */\n    p._sendFileStart = function (item) {\n      var event = new createjs.Event(\"filestart\");\n      event.item = item;\n      this.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n    };\n    p.toString = function () {\n      return \"[PreloadJS LoadQueue]\";\n    };\n    createjs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // TextLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for Text files.\n     * @class TextLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function TextLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\n    }\n    createjs.extend(TextLoader, createjs.AbstractLoader);\n    var s = TextLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\n     * but is also the default loader if a file type can not be determined.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.TEXT;\n    };\n    createjs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // BinaryLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n     * @class BinaryLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function BinaryLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\n      this.on(\"initialize\", this._updateXHR, this);\n    }\n    var p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n    var s = BinaryLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.BINARY;\n    };\n\n    // private methods\n    /**\n     * Before the item loads, set the response type to \"arraybuffer\"\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n      event.loader.setResponseType(\"arraybuffer\");\n    };\n    createjs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // CSSLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for CSS files.\n     * @class CSSLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function CSSLoader(loadItem, preferXHR) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n\n      // protected properties\n      this._tagSrcAttribute = \"href\";\n      if (preferXHR) {\n        this._tag = document.createElement(\"style\");\n      } else {\n        this._tag = document.createElement(\"link\");\n      }\n      this._tag.rel = \"stylesheet\";\n      this._tag.type = \"text/css\";\n    }\n    var p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n    var s = CSSLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.CSS;\n    };\n\n    // protected methods\n    /**\n     * The result formatter for CSS files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {HTMLLinkElement|HTMLStyleElement}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      if (this._preferXHR) {\n        var tag = loader.getTag();\n        if (tag.styleSheet) {\n          // IE\n          tag.styleSheet.cssText = loader.getResult(true);\n        } else {\n          var textNode = document.createTextNode(loader.getResult(true));\n          tag.appendChild(textNode);\n        }\n      } else {\n        tag = this._tag;\n      }\n      createjs.DomUtils.appendToHead(tag);\n      return tag;\n    };\n    createjs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // ImageLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for image files.\n     * @class ImageLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function ImageLoader(loadItem, preferXHR) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n\n      // protected properties\n      this._tagSrcAttribute = \"src\";\n\n      // Check if the preload item is already a tag.\n      if (createjs.RequestUtils.isImageTag(loadItem)) {\n        this._tag = loadItem;\n      } else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\n        this._tag = loadItem.src;\n      } else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\n        this._tag = loadItem.tag;\n      }\n      if (this._tag != null) {\n        this._preferXHR = false;\n      } else {\n        this._tag = document.createElement(\"img\");\n      }\n      this.on(\"initialize\", this._updateXHR, this);\n    }\n    var p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n    var s = ImageLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.IMAGE;\n    };\n\n    // public methods\n    p.load = function () {\n      if (this._tag.src != \"\" && this._tag.complete) {\n        this._sendComplete();\n        return;\n      }\n      var crossOrigin = this._item.crossOrigin;\n      if (crossOrigin == true) {\n        crossOrigin = \"Anonymous\";\n      }\n      if (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\n        this._tag.crossOrigin = crossOrigin;\n      }\n      this.AbstractLoader_load();\n    };\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n      event.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n      // Only exists for XHR\n      if (event.loader.setResponseType) {\n        event.loader.setResponseType(\"blob\");\n      }\n    };\n\n    /**\n     * The result formatter for Image files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {HTMLImageElement}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      return this._formatImage;\n    };\n\n    /**\n     * The asynchronous image formatter function. This is required because images have\n     * a short delay before they are ready.\n     * @method _formatImage\n     * @param {Function} successCallback The method to call when the result has finished formatting\n     * @param {Function} errorCallback The method to call if an error occurs during formatting\n     * @private\n     */\n    p._formatImage = function (successCallback, errorCallback) {\n      var tag = this._tag;\n      var URL = window.URL || window.webkitURL;\n      if (!this._preferXHR) ;else if (URL) {\n        var objURL = URL.createObjectURL(this.getResult(true));\n        tag.src = objURL;\n        tag.addEventListener(\"load\", this._cleanUpURL, false);\n        tag.addEventListener(\"error\", this._cleanUpURL, false);\n      } else {\n        tag.src = this._item.src;\n      }\n      if (tag.complete) {\n        successCallback(tag);\n      } else {\n        tag.onload = createjs.proxy(function () {\n          successCallback(this._tag);\n        }, this);\n        tag.onerror = createjs.proxy(function () {\n          errorCallback(_this._tag);\n        }, this);\n      }\n    };\n\n    /**\n     * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n     * as an event listener without a proxy/closure, as it doesn't require it - so do not\n     * include any functionality that requires scope without changing it.\n     * @method _cleanUpURL\n     * @param event\n     * @private\n     */\n    p._cleanUpURL = function (event) {\n      var URL = window.URL || window.webkitURL;\n      URL.revokeObjectURL(event.target.src);\n    };\n    createjs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // JavaScriptLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for JavaScript files.\n     * @class JavaScriptLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function JavaScriptLoader(loadItem, preferXHR) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n\n      // protected properties\n      this._tagSrcAttribute = \"src\";\n      this.setTag(document.createElement(\"script\"));\n    }\n    var p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n    var s = JavaScriptLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.JAVASCRIPT;\n    };\n\n    // protected methods\n    /**\n     * The result formatter for JavaScript files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {HTMLLinkElement|HTMLStyleElement}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      var tag = loader.getTag();\n      if (this._preferXHR) {\n        tag.text = loader.getResult(true);\n      }\n      return tag;\n    };\n    createjs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // JSONLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n     * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n     * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n     * @class JSONLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function JSONLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n    }\n    var p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n    var s = JSONLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.JSON;\n    };\n\n    // protected methods\n    /**\n     * The result formatter for JSON files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {HTMLLinkElement|HTMLStyleElement}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      var json = null;\n      try {\n        json = createjs.DataUtils.parseJSON(loader.getResult(true));\n      } catch (e) {\n        var event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n        this._sendError(event);\n        return e;\n      }\n      return json;\n    };\n    createjs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // JSONPLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n     * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n     * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n     * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n     *\n     * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n     * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n     * JSONP must match the callback passed to the loadItem.\n     *\n     * <h4>Example JSONP</h4>\n     *\n     * \t\tcallbackName({\n     * \t\t\t\"name\": \"value\",\n     *\t \t\t\"num\": 3,\n     *\t\t\t\"obj\": { \"bool\":true }\n     * \t\t});\n     *\n     * <h4>Example</h4>\n     *\n     * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n     * \t\tvar queue = new createjs.LoadQueue();\n     * \t\tqueue.on(\"complete\", handleComplete);\n     * \t\tqueue.loadItem(loadItem);\n     *\n     * \t\tfunction handleComplete(event) }\n     * \t\t\tvar json = queue.getResult(\"json\");\n     * \t\t\tconsole.log(json.obj.bool); // true\n     * \t\t}\n     *\n     * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\n     * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\n     * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n     *\n     * @class JSONPLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function JSONPLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\n      this.setTag(document.createElement(\"script\"));\n      this.getTag().type = \"text/javascript\";\n    }\n    var p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n    var s = JSONPLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.JSONP;\n    };\n\n    // public methods\n    p.cancel = function () {\n      this.AbstractLoader_cancel();\n      this._dispose();\n    };\n\n    /**\n     * Loads the JSONp file.  Because of the unique loading needs of JSONp\n     * we don't use the AbstractLoader.load() method.\n     *\n     * @method load\n     *\n     */\n    p.load = function () {\n      if (this._item.callback == null) {\n        throw new Error('callback is required for loading JSONP requests.');\n      }\n\n      // TODO: Look into creating our own iFrame to handle the load\n      // In the first attempt, FF did not get the result\n      //   result instanceof Object did not work either\n      //   so we would need to clone the result.\n      if (window[this._item.callback] != null) {\n        throw new Error(\"JSONP callback '\" + this._item.callback + \"' already exists on window. You need to specify a different callback or re-name the current one.\");\n      }\n      window[this._item.callback] = createjs.proxy(this._handleLoad, this);\n      window.document.body.appendChild(this._tag);\n      this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n      // Load the tag\n      this._tag.src = this._item.src;\n    };\n\n    // private methods\n    /**\n     * Handle the JSONP callback, which is a public method defined on `window`.\n     * @method _handleLoad\n     * @param {Object} data The formatted JSON data.\n     * @private\n     */\n    p._handleLoad = function (data) {\n      this._result = this._rawResult = data;\n      this._sendComplete();\n      this._dispose();\n    };\n\n    /**\n     * The tag request has not loaded within the time specfied in loadTimeout.\n     * @method _handleError\n     * @param {Object} event The XHR error event.\n     * @private\n     */\n    p._handleTimeout = function () {\n      this._dispose();\n      this.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n    };\n\n    /**\n     * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n     * @method _dispose\n     * @private\n     */\n    p._dispose = function () {\n      window.document.body.removeChild(this._tag);\n      delete window[this._item.callback];\n      clearTimeout(this._loadTimeout);\n    };\n    createjs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // ManifestLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n     * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n     * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     *\n     * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n     * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n     *\n     * \t\t{\n     * \t\t\t\"path\": \"assets/\",\n     *\t \t    \"manifest\": [\n     *\t\t\t\t\"image.png\",\n     *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n     *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n     *\t \t    ]\n     *\t \t}\n     *\n     * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n     * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n     *\n     * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n     * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\n     * @class ManifestLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function ManifestLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\n\n      // Public Properties\n      /**\n       * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n       * used to pass plugins to new LoadQueues that may be created.\n       * @property _plugins\n       * @type {Array}\n       * @private\n       * @since 0.6.1\n       */\n      this.plugins = null;\n\n      // Protected Properties\n      /**\n       * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n       * @property _manifestQueue\n       * @type {LoadQueue}\n       * @private\n       */\n      this._manifestQueue = null;\n    }\n    var p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n    var s = ManifestLoader;\n\n    // static properties\n    /**\n     * The amount of progress that the manifest itself takes up.\n     * @property MANIFEST_PROGRESS\n     * @type {number}\n     * @default 0.25 (25%)\n     * @private\n     * @static\n     */\n    s.MANIFEST_PROGRESS = 0.25;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.MANIFEST;\n    };\n\n    // public methods\n    p.load = function () {\n      this.AbstractLoader_load();\n    };\n\n    // protected methods\n    p._createRequest = function () {\n      var callback = this._item.callback;\n      if (callback != null) {\n        this._request = new createjs.JSONPLoader(this._item);\n      } else {\n        this._request = new createjs.JSONLoader(this._item);\n      }\n    };\n    p.handleEvent = function (event) {\n      switch (event.type) {\n        case \"complete\":\n          this._rawResult = event.target.getResult(true);\n          this._result = event.target.getResult();\n          this._sendProgress(s.MANIFEST_PROGRESS);\n          this._loadManifest(this._result);\n          return;\n        case \"progress\":\n          event.loaded *= s.MANIFEST_PROGRESS;\n          this.progress = event.loaded / event.total;\n          if (isNaN(this.progress) || this.progress == Infinity) {\n            this.progress = 0;\n          }\n          this._sendProgress(event);\n          return;\n      }\n      this.AbstractLoader_handleEvent(event);\n    };\n    p.destroy = function () {\n      this.AbstractLoader_destroy();\n      this._manifestQueue.close();\n    };\n\n    /**\n     * Create and load the manifest items once the actual manifest has been loaded.\n     * @method _loadManifest\n     * @param {Object} json\n     * @private\n     */\n    p._loadManifest = function (json) {\n      if (json && json.manifest) {\n        var queue = this._manifestQueue = new createjs.LoadQueue();\n        queue.on(\"fileload\", this._handleManifestFileLoad, this);\n        queue.on(\"progress\", this._handleManifestProgress, this);\n        queue.on(\"complete\", this._handleManifestComplete, this, true);\n        queue.on(\"error\", this._handleManifestError, this, true);\n        for (var i = 0, l = this.plugins.length; i < l; i++) {\n          // conserve order of plugins\n          queue.installPlugin(this.plugins[i]);\n        }\n        queue.loadManifest(json);\n      } else {\n        this._sendComplete();\n      }\n    };\n\n    /**\n     * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n     * @method _handleManifestFileLoad\n     * @param {Event} event\n     * @private\n     */\n    p._handleManifestFileLoad = function (event) {\n      event.target = null;\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n     * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n     * @method _handleManifestComplete\n     * @param {Event} event\n     * @private\n     */\n    p._handleManifestComplete = function (event) {\n      this._loadedItems = this._manifestQueue.getItems(true);\n      this._sendComplete();\n    };\n\n    /**\n     * The manifest has reported progress.\n     * @method _handleManifestProgress\n     * @param {ProgressEvent} event\n     * @private\n     */\n    p._handleManifestProgress = function (event) {\n      this.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n      this._sendProgress(this.progress);\n    };\n\n    /**\n     * The manifest has reported an error with one of the files.\n     * @method _handleManifestError\n     * @param {ErrorEvent} event\n     * @private\n     */\n    p._handleManifestError = function (event) {\n      var newEvent = new createjs.Event(\"fileerror\");\n      newEvent.item = event.data;\n      this.dispatchEvent(newEvent);\n    };\n    createjs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // SoundLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n     * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n     * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n     * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n     * @class SoundLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractMediaLoader\n     * @constructor\n     */\n    function SoundLoader(loadItem, preferXHR) {\n      this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\n\n      // protected properties\n      if (createjs.RequestUtils.isAudioTag(loadItem)) {\n        this._tag = loadItem;\n      } else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\n        this._tag = loadItem;\n      } else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\n        this._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n      }\n      if (this._tag != null) {\n        this._preferXHR = false;\n      }\n    }\n    var p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n    var s = SoundLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.SOUND;\n    };\n\n    // protected methods\n    p._createTag = function (src) {\n      var tag = document.createElement(\"audio\");\n      tag.autoplay = false;\n      tag.preload = \"none\";\n\n      //LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n      tag.src = src;\n      return tag;\n    };\n    createjs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n  })();\n\n  //##############################################################################\n  // VideoLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for video files.\n     * @class VideoLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractMediaLoader\n     * @constructor\n     */\n    function VideoLoader(loadItem, preferXHR) {\n      this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\n      if (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\n        this.setTag(createjs.RequestUtils.isVideoTag(loadItem) ? loadItem : loadItem.src);\n\n        // We can't use XHR for a tag that's passed in.\n        this._preferXHR = false;\n      } else {\n        this.setTag(this._createTag());\n      }\n    }\n    var p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n    var s = VideoLoader;\n\n    /**\n     * Create a new video tag\n     *\n     * @returns {HTMLElement}\n     * @private\n     */\n    p._createTag = function () {\n      return document.createElement(\"video\");\n    };\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.VIDEO;\n    };\n    createjs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n  })();\n\n  //##############################################################################\n  // SpriteSheetLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n     * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n     * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n     * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n     * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n     * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\n     *\n     * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n     * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n     * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n     * the SpriteSheet images.\n     *\n     * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n     * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n     * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n     * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n     * @class SpriteSheetLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function SpriteSheetLoader(loadItem, preferXHR) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\n\n      // protected properties\n      /**\n       * An internal queue which loads the SpriteSheet's images.\n       * @method _manifestQueue\n       * @type {LoadQueue}\n       * @private\n       */\n      this._manifestQueue = null;\n    }\n    var p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n    var s = SpriteSheetLoader;\n\n    // static properties\n    /**\n     * The amount of progress that the manifest itself takes up.\n     * @property SPRITESHEET_PROGRESS\n     * @type {number}\n     * @default 0.25 (25%)\n     * @private\n     * @static\n     */\n    s.SPRITESHEET_PROGRESS = 0.25;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.SPRITESHEET;\n    };\n\n    // public methods\n    p.destroy = function () {\n      this.AbstractLoader_destroy;\n      this._manifestQueue.close();\n    };\n\n    // protected methods\n    p._createRequest = function () {\n      var callback = this._item.callback;\n      if (callback != null) {\n        this._request = new createjs.JSONPLoader(this._item);\n      } else {\n        this._request = new createjs.JSONLoader(this._item);\n      }\n    };\n    p.handleEvent = function (event) {\n      switch (event.type) {\n        case \"complete\":\n          this._rawResult = event.target.getResult(true);\n          this._result = event.target.getResult();\n          this._sendProgress(s.SPRITESHEET_PROGRESS);\n          this._loadManifest(this._result);\n          return;\n        case \"progress\":\n          event.loaded *= s.SPRITESHEET_PROGRESS;\n          this.progress = event.loaded / event.total;\n          if (isNaN(this.progress) || this.progress == Infinity) {\n            this.progress = 0;\n          }\n          this._sendProgress(event);\n          return;\n      }\n      this.AbstractLoader_handleEvent(event);\n    };\n\n    /**\n     * Create and load the images once the SpriteSheet JSON has been loaded.\n     * @method _loadManifest\n     * @param {Object} json\n     * @private\n     */\n    p._loadManifest = function (json) {\n      if (json && json.images) {\n        var queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n        queue.on(\"complete\", this._handleManifestComplete, this, true);\n        queue.on(\"fileload\", this._handleManifestFileLoad, this);\n        queue.on(\"progress\", this._handleManifestProgress, this);\n        queue.on(\"error\", this._handleManifestError, this, true);\n        queue.loadManifest(json.images);\n      }\n    };\n\n    /**\n     * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n     * @method _handleManifestFileLoad\n     * @param {Event} event\n     * @private\n     */\n    p._handleManifestFileLoad = function (event) {\n      var image = event.result;\n      if (image != null) {\n        var images = this.getResult().images;\n        var pos = images.indexOf(event.item.src);\n        images[pos] = image;\n      }\n    };\n\n    /**\n     * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n     * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n     * @method _handleManifestComplete\n     * @param {Event} event\n     * @private\n     */\n    p._handleManifestComplete = function (event) {\n      this._result = new createjs.SpriteSheet(this._result);\n      this._loadedItems = this._manifestQueue.getItems(true);\n      this._sendComplete();\n    };\n\n    /**\n     * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n     * @method _handleManifestProgress\n     * @param {ProgressEvent} event\n     * @private\n     */\n    p._handleManifestProgress = function (event) {\n      this.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n      this._sendProgress(this.progress);\n    };\n\n    /**\n     * An image has reported an error.\n     * @method _handleManifestError\n     * @param {ErrorEvent} event\n     * @private\n     */\n    p._handleManifestError = function (event) {\n      var newEvent = new createjs.Event(\"fileerror\");\n      newEvent.item = event.data;\n      this.dispatchEvent(newEvent);\n    };\n    createjs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // SVGLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for SVG files.\n     * @class SVGLoader\n     * @param {LoadItem|Object} loadItem\n     * @param {Boolean} preferXHR\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function SVGLoader(loadItem, preferXHR) {\n      this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n\n      // protected properties\n      this._tagSrcAttribute = \"data\";\n      if (preferXHR) {\n        this.setTag(document.createElement(\"svg\"));\n      } else {\n        this.setTag(document.createElement(\"object\"));\n        this.getTag().type = \"image/svg+xml\";\n      }\n    }\n    var p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n    var s = SVGLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.SVG;\n    };\n\n    // protected methods\n    /**\n     * The result formatter for SVG files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {Object}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      // mime should be image/svg+xml, but Opera requires text/xml\n      var xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n      var tag = loader.getTag();\n      if (!this._preferXHR && document.body.contains(tag)) {\n        document.body.removeChild(tag);\n      }\n      if (xml.documentElement != null) {\n        tag.appendChild(xml.documentElement);\n        tag.style.visibility = \"visible\";\n        return tag;\n      } else {\n        // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n        return xml;\n      }\n    };\n    createjs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // XMLLoader.js\n  //##############################################################################\n\n  (function () {\n    // constructor\n    /**\n     * A loader for CSS files.\n     * @class XMLLoader\n     * @param {LoadItem|Object} loadItem\n     * @extends AbstractLoader\n     * @constructor\n     */\n    function XMLLoader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\n\n      // public properties\n      this.resultFormatter = this._formatResult;\n    }\n    var p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n    var s = XMLLoader;\n\n    // static methods\n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    s.canLoadItem = function (item) {\n      return item.type == createjs.AbstractLoader.XML;\n    };\n\n    // protected methods\n    /**\n     * The result formatter for XML files.\n     * @method _formatResult\n     * @param {AbstractLoader} loader\n     * @returns {XMLDocument}\n     * @private\n     */\n    p._formatResult = function (loader) {\n      return createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n    };\n    createjs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // version.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Static class holding library specific information such as the version and buildDate of the library.\n     * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\n     * for information on using sound.\n     * @class SoundJS\n     **/\n    var s = createjs.SoundJS = createjs.SoundJS || {};\n\n    /**\n     * The version string for this release.\n     * @property version\n     * @type String\n     * @static\n     **/\n    s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n    /**\n     * The build date for this release in UTC format.\n     * @property buildDate\n     * @type String\n     * @static\n     **/\n    s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n  })();\n\n  //##############################################################################\n  // IndexOf.js\n  //##############################################################################\n\n  /**\n   * @class Utility Methods\n   */\n\n  /**\n   * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n   * that value.  Returns -1 if value is not found.\n   *\n   *      var i = createjs.indexOf(myArray, myElementToFind);\n   *\n   * @method indexOf\n   * @param {Array} array Array to search for searchElement\n   * @param searchElement Element to find in array.\n   * @return {Number} The first index of searchElement in array.\n   */\n  createjs.indexOf = function (array, searchElement) {\n    for (var i = 0, l = array.length; i < l; i++) {\n      if (searchElement === array[i]) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  //##############################################################################\n  // Proxy.js\n  //##############################################################################\n\n  /**\n   * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n   * createjs namespace directly.\n   *\n   * <h4>Example</h4>\n   *\n   *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n   *\n   * @class Utility Methods\n   * @main Utility Methods\n   */\n\n  (function () {\n    /**\n     * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n     * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n     * method gets called in the correct scope.\n     *\n     * Additional arguments can be passed that will be applied to the function when it is called.\n     *\n     * <h4>Example</h4>\n     *\n     *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n     *\n     *      function myHandler(arg1, arg2) {\n     *           // This gets called when myObject.myCallback is executed.\n     *      }\n     *\n     * @method proxy\n     * @param {Function} method The function to call\n     * @param {Object} scope The scope to call the method name on\n     * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n     * @public\n     * @static\n     */\n    createjs.proxy = function (method, scope) {\n      var aArgs = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        return method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n      };\n    };\n  })();\n\n  //##############################################################################\n  // BrowserDetect.js\n  //##############################################################################\n\n  /**\n   * @class Utility Methods\n   */\n  (function () {\n    /**\n     * An object that determines the current browser, version, operating system, and other environment\n     * variables via user agent string.\n     *\n     * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\n     *\n     * <h4>Example</h4>\n     *\n     *      if (createjs.BrowserDetect.isIOS) { // do stuff }\n     *\n     * @property BrowserDetect\n     * @type {Object}\n     * @param {Boolean} isFirefox True if our browser is Firefox.\n     * @param {Boolean} isOpera True if our browser is opera.\n     * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\n     * completely different browser with different abilities.\n     * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\n     * @param {Boolean} isAndroid True if our browser is Android.\n     * @param {Boolean} isBlackberry True if our browser is Blackberry.\n     * @constructor\n     * @static\n     */\n    function BrowserDetect() {\n      throw \"BrowserDetect cannot be instantiated\";\n    }\n    var agent = BrowserDetect.agent = window.navigator.userAgent;\n    BrowserDetect.isWindowPhone = agent.indexOf(\"IEMobile\") > -1 || agent.indexOf(\"Windows Phone\") > -1;\n    BrowserDetect.isFirefox = agent.indexOf(\"Firefox\") > -1;\n    BrowserDetect.isOpera = window.opera != null;\n    BrowserDetect.isChrome = agent.indexOf(\"Chrome\") > -1; // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\n    BrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\n    BrowserDetect.isAndroid = agent.indexOf(\"Android\") > -1 && !BrowserDetect.isWindowPhone;\n    BrowserDetect.isBlackberry = agent.indexOf(\"Blackberry\") > -1;\n    createjs.BrowserDetect = BrowserDetect;\n  })();\n\n  //##############################################################################\n  // AudioSprite.js\n  //##############################################################################\n\n  //  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\n\n  /**\n   * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\n   * out here for quick reference.</strong>\n   *\n   * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\n   * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\n   * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\n   * accidentally playing bits of the neighbouring clips.\n   *\n   * <strong>Benefits of Audio Sprites:</strong>\n   * <ul>\n   *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\n   *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\n   *     sounds that could be loaded at once.</li>\n   *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\n   * where the network round trip for each file can add significant latency.</li>\n   * </ul>\n   *\n   * <strong>Drawbacks of Audio Sprites</strong>\n   * <ul>\n   *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\n   * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\n   * \t\tit.</li>\n   *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\n   *     (Chrome!), HTML audio will only load enough to play through at the current download speed  so we rely on the\n   *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\n   *     sounds, the audio may not yet have downloaded fully.</li>\n   *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\n   * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\n   * </ul>\n   *\n   * <h4>Example</h4>\n   *\n   *\t\tcreatejs.Sound.initializeDefaultPlugins();\n   *\t\tvar assetsPath = \"./assets/\";\n   *\t\tvar sounds = [{\n   *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n   *\t\t\t\taudioSprite: [\n   *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n   *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n   *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n   *\t\t\t\t]}\n   *\t\t\t}\n   *\t\t];\n   *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n   *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n   *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n   *\t\t// after load is complete\n   *\t\tcreatejs.Sound.play(\"sound2\");\n   *\n   * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\n   *\n   * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\n   *\n   * The excellent CreateJS community has created a tool to create audio sprites, available at\n   * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\n   * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\n   * to SoundJS format.\n   *\n   * @class AudioSprite\n   * @since 0.6.0\n   */\n\n  //##############################################################################\n  // PlayPropsConfig.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\n     * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\n     *\n     * Optional Play Properties Include:\n     * <ul>\n     * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\n     * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n     * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\n     * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\n     * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\n     * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\n     * loops), and -1 can be used for infinite playback.</li>\n     * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\n     * against the individual volume.</li>\n     * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\n     * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\n     * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\n     * </ul>\n     *\n     * <h4>Example</h4>\n     *\n     * \tvar ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\n     * \tcreatejs.Sound.play(\"mySound\", ppc);\n     * \tmySoundInstance.play(ppc);\n     *\n     * @class PlayPropsConfig\n     * @constructor\n     * @since 0.6.1\n     */\n    // TODO think of a better name for this class\n    var PlayPropsConfig = function () {\n      // Public Properties\n      /**\n       * How to interrupt any currently playing instances of audio with the same source,\n       * if the maximum number of instances of the sound are already playing. Values are defined as\n       * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\n       * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n       * @property interrupt\n       * @type {string}\n       * @default null\n       */\n      this.interrupt = null;\n\n      /**\n       * The amount of time to delay the start of audio playback, in milliseconds.\n       * @property delay\n       * @type {Number}\n       * @default null\n       */\n      this.delay = null;\n\n      /**\n       * The offset from the start of the audio to begin playback, in milliseconds.\n       * @property offset\n       * @type {number}\n       * @default null\n       */\n      this.offset = null;\n\n      /**\n       * How many times the audio loops when it reaches the end of playback. The default is 0 (no\n       * loops), and -1 can be used for infinite playback.\n       * @property loop\n       * @type {number}\n       * @default null\n       */\n      this.loop = null;\n\n      /**\n       * The volume of the sound, between 0 and 1. Note that the master volume is applied\n       * against the individual volume.\n       * @property volume\n       * @type {number}\n       * @default null\n       */\n      this.volume = null;\n\n      /**\n       * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n       * @property pan\n       * @type {number}\n       * @default null\n       */\n      this.pan = null;\n\n      /**\n       * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n       * @property startTime\n       * @type {number}\n       * @default null\n       */\n      this.startTime = null;\n\n      /**\n       * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n       * @property duration\n       * @type {number}\n       * @default null\n       */\n      this.duration = null;\n    };\n    var p = PlayPropsConfig.prototype = {};\n    var s = PlayPropsConfig;\n\n    // Static Methods\n    /**\n     * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\n     *\n     * @method create\n     * @param {PlayPropsConfig|Object} value The play properties\n     * @returns {PlayPropsConfig}\n     * @static\n     */\n    s.create = function (value) {\n      if (value instanceof s || value instanceof Object) {\n        var ppc = new createjs.PlayPropsConfig();\n        ppc.set(value);\n        return ppc;\n      } else {\n        throw new Error(\"Type not recognized.\");\n      }\n    };\n\n    // Public Methods\n    /**\n     * Provides a chainable shortcut method for setting a number of properties on the instance.\n     *\n     * <h4>Example</h4>\n     *\n     *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\n     *\n     * @method set\n     * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\n     * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\n    */\n    p.set = function (props) {\n      for (var n in props) {\n        this[n] = props[n];\n      }\n      return this;\n    };\n    p.toString = function () {\n      return \"[PlayPropsConfig]\";\n    };\n    createjs.PlayPropsConfig = s;\n  })();\n\n  //##############################################################################\n  // Sound.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\n     * All Sound APIs on this class are static.\n     *\n     * <b>Registering and Preloading</b><br />\n     * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\n     * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\n     * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\n     * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\n     * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\n     * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\n     * PreloadJS so they are ready when you want to use them.\n     *\n     * <b>Playback</b><br />\n     * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\n     * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\n     * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\n     *\n     * <b>Plugins</b><br />\n     * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\n     * are used (when available), although developers can change plugin priority or add new plugins (such as the\n     * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\n     * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\n     * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\n     *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\n     *      createjs.Sound.alternateExtensions = [\"mp3\"];\n     *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n     *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n     *      function loadHandler(event) {\n        *          // This is fired for each sound that is registered.\n        *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\n        *          instance.on(\"complete\", this.handleComplete, this);\n        *          instance.volume = 0.5;\n     *      }\n     *\n     * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\n     * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\n     * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\n     * default limit of 100.\n     *\n     *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\n     *\n     * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\n     * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\n     * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\n     * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\n     * preloading. It is recommended that all audio is preloaded before it is played.\n     *\n     *      var queue = new createjs.LoadQueue();\n     *\t\tqueue.installPlugin(createjs.Sound);\n     *\n     * <b>Audio Sprites</b><br />\n     * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\n     * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\n     * grouped into a single file.\n     *\n     * <h4>Example</h4>\n     *\n     *\t\tvar assetsPath = \"./assets/\";\n     *\t\tvar sounds = [{\n     *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n     *\t\t\t\taudioSprite: [\n     *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n     *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n     *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n     *\t\t\t\t]}\n    \t *\t\t\t}\n     *\t\t];\n     *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n     *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n     *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n     *\t\t// after load is complete\n     *\t\tcreatejs.Sound.play(\"sound2\");\n     *\n     * <b>Mobile Playback</b><br />\n     * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\n     * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\n     * longer necessary as of SoundJS 0.6.2.\n     * <ul>\n     *     <li>\n     *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\n     *         method in the call stack of a user input event to manually unlock the audio context.\n     *     </li>\n     *     <li>\n     *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\n     *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\n     *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\n     *     </li>\n     *     <li>\n     *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\n     *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\n     *         as a \"click\", so if the user long-presses the button, it will no longer work.\n     *     </li>\n     *     <li>\n     *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\n     *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\n     *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\n     *         <ol>\n     *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\n     *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\n     *         </ol>\n     *         These settings may change how your application behaves, and are not recommended.\n     *     </li>\n     * </ul>\n     *\n     * <b>Loading Alternate Paths and Extension-less Files</b><br />\n     * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\n     * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\n     * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\n     * different folders, or on CDNs, which often has completely different filenames for each file.\n     *\n     * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\n     * and loading with PreloadJS.\n     *\n     * <em>Note: an id is required for playback.</em>\n     *\n     * <h4>Example</h4>\n     *\n     *\t\tvar sounds = {path:\"./audioPath/\",\n     * \t\t\t\tmanifest: [\n     *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\n     *\t\t]};\n     *\n     *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n     *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\n     *\t\tcreatejs.Sound.registerSounds(sounds);\n     *\n     * <h3>Known Browser and OS issues</h3>\n     * <b>IE 9 HTML Audio limitations</b><br />\n     * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n     * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n     * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n        * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\n     * encoding with 64kbps works.</li>\n     * <li>Occasionally very short samples will get cut off.</li>\n     * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\n     * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\n     * estimate.</li></ul>\n     *\n     * <b>Firefox 25 Web Audio limitations</b>\n     * <ul><li>mp3 audio files do not load properly on all windows machines, reported\n     * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\n     * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\n     * possible.</li></ul>\n    \t * <b>Safari limitations</b><br />\n     * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n     *\n     * <b>iOS 6 Web Audio limitations</b><br />\n     * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\n     * Mobile Playback above.</li>\n     * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\n     * at a different sampleRate.</li>\n     * </ul>\n     *\n     * <b>Android HTML Audio limitations</b><br />\n     * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n     * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\n     * a delay.</li></ul>\n     *\n     * <b>Web Audio and PreloadJS</b><br />\n     * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\n     * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\n     *\n     * @class Sound\n     * @static\n     * @uses EventDispatcher\n     */\n    function Sound() {\n      throw \"Sound cannot be instantiated\";\n    }\n    var s = Sound;\n\n    // Static Properties\n    /**\n     * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\n     * instances of the sound are already playing.\n     * @property INTERRUPT_ANY\n     * @type {String}\n     * @default any\n     * @static\n     */\n    s.INTERRUPT_ANY = \"any\";\n\n    /**\n     * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\n     * least distance in the audio track, if the maximum number of instances of the sound are already playing.\n     * @property INTERRUPT_EARLY\n     * @type {String}\n     * @default early\n     * @static\n     */\n    s.INTERRUPT_EARLY = \"early\";\n\n    /**\n     * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\n     * distance in the audio track, if the maximum number of instances of the sound are already playing.\n     * @property INTERRUPT_LATE\n     * @type {String}\n     * @default late\n     * @static\n     */\n    s.INTERRUPT_LATE = \"late\";\n\n    /**\n     * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\n     * instances of the sound are already playing.\n     * @property INTERRUPT_NONE\n     * @type {String}\n     * @default none\n     * @static\n     */\n    s.INTERRUPT_NONE = \"none\";\n\n    /**\n     * Defines the playState of an instance that is still initializing.\n     * @property PLAY_INITED\n     * @type {String}\n     * @default playInited\n     * @static\n     */\n    s.PLAY_INITED = \"playInited\";\n\n    /**\n     * Defines the playState of an instance that is currently playing or paused.\n     * @property PLAY_SUCCEEDED\n     * @type {String}\n     * @default playSucceeded\n     * @static\n     */\n    s.PLAY_SUCCEEDED = \"playSucceeded\";\n\n    /**\n     * Defines the playState of an instance that was interrupted by another instance.\n     * @property PLAY_INTERRUPTED\n     * @type {String}\n     * @default playInterrupted\n     * @static\n     */\n    s.PLAY_INTERRUPTED = \"playInterrupted\";\n\n    /**\n     * Defines the playState of an instance that completed playback.\n     * @property PLAY_FINISHED\n     * @type {String}\n     * @default playFinished\n     * @static\n     */\n    s.PLAY_FINISHED = \"playFinished\";\n\n    /**\n     * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\n     * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\n     * @property PLAY_FAILED\n     * @type {String}\n     * @default playFailed\n     * @static\n     */\n    s.PLAY_FAILED = \"playFailed\";\n\n    /**\n     * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\n     * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\n     * support additional media types.\n     *\n     * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n     *\n     * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\n     * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\n     * @property SUPPORTED_EXTENSIONS\n     * @type {Array[String]}\n     * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\n     * @since 0.4.0\n     * @static\n     */\n    s.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\n\n    /**\n     * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\n     * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\n     * plugins determine more accurately if an extension is supported.\n     *\n    \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\n     * @property EXTENSION_MAP\n     * @type {Object}\n     * @since 0.4.0\n     * @default {m4a:\"mp4\"}\n     * @static\n     */\n    s.EXTENSION_MAP = {\n      m4a: \"mp4\"\n    };\n\n    /**\n     * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\n     * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\n     * @property FILE_PATTERN\n     * @type {RegExp}\n     * @static\n     * @protected\n     */\n    s.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\n\n    // Class Public properties\n    /**\n     * Determines the default behavior for interrupting other currently playing instances with the same source, if the\n     * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\n     * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\n     * is called without passing a value for interrupt.\n     * @property defaultInterruptBehavior\n     * @type {String}\n     * @default Sound.INTERRUPT_NONE, or \"none\"\n     * @static\n     * @since 0.4.0\n     */\n    s.defaultInterruptBehavior = s.INTERRUPT_NONE; // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\n\n    /**\n     * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\n     * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\n     * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\n     * to exist in the same location, as only the extension is altered.\n     *\n     * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\n     * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\n     *\n     * <h4>Example</h4>\n     *\n     *\tvar sounds = [\n     *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\n     *\t];\n     *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\n     *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n     *\tcreatejs.Sound.registerSounds(sounds, assetPath);\n     *\t// ...\n     *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\n     *\n     * @property alternateExtensions\n     * @type {Array}\n     * @since 0.5.2\n     * @static\n     */\n    s.alternateExtensions = [];\n\n    /**\n     * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\n     * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\n     * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n     * @property activePlugin\n     * @type {Object}\n     * @static\n     */\n    s.activePlugin = null;\n\n    // class getter / setter properties\n    /**\n     * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\n     * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\n     * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} instead.\n     *\n     * <h4>Example</h4>\n     *\n     *     createjs.Sound.volume = 0.5;\n     *\n     *\n     * @property volume\n     * @type {Number}\n     * @default 1\n     * @since 0.6.1\n     */\n    s._masterVolume = 1;\n    Object.defineProperty(s, \"volume\", {\n      get: function () {\n        return this._masterVolume;\n      },\n      set: function (value) {\n        if (Number(value) == null) {\n          return false;\n        }\n        value = Math.max(0, Math.min(1, value));\n        s._masterVolume = value;\n        if (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n          var instances = this._instances;\n          for (var i = 0, l = instances.length; i < l; i++) {\n            instances[i].setMasterVolume(value);\n          }\n        }\n      }\n    });\n\n    /**\n     * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\n     * separately and when set will override, but not change the mute property of individual instances. To mute an individual\n     * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\n     *\n     * <h4>Example</h4>\n     *\n     *     createjs.Sound.muted = true;\n     *\n     *\n     * @property muted\n     * @type {Boolean}\n     * @default false\n     * @since 0.6.1\n     */\n    s._masterMute = false;\n    // OJR references to the methods were not working, so the code had to be duplicated here\n    Object.defineProperty(s, \"muted\", {\n      get: function () {\n        return this._masterMute;\n      },\n      set: function (value) {\n        if (value == null) {\n          return false;\n        }\n        this._masterMute = value;\n        if (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n          var instances = this._instances;\n          for (var i = 0, l = instances.length; i < l; i++) {\n            instances[i].setMasterMute(value);\n          }\n        }\n        return true;\n      }\n    });\n\n    /**\n     * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\n     * or if the plugin supports a specific feature. Capabilities include:\n     * <ul>\n     *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\n     *     <li><b>volume;</b> If the plugin can control audio volume.</li>\n     *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\n     *     if there is no known limit.</li>\n     * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\n     *     <li><b>mp3:</b> If MP3 audio is supported.</li>\n     *     <li><b>ogg:</b> If OGG audio is supported.</li>\n     *     <li><b>wav:</b> If WAV audio is supported.</li>\n     *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\n     *     <li><b>m4a:</b> If M4A audio is supported.</li>\n     *     <li><b>mp4:</b> If MP4 audio is supported.</li>\n     *     <li><b>aiff:</b> If aiff audio is supported.</li>\n     *     <li><b>wma:</b> If wma audio is supported.</li>\n     *     <li><b>mid:</b> If mid audio is supported.</li>\n     * </ul>\n     *\n     * You can get a specific capability of the active plugin using standard object notation\n     *\n     * <h4>Example</h4>\n     *\n     *      var mp3 = createjs.Sound.capabilities.mp3;\n     *\n     * Note this property is read only.\n     *\n     * @property capabilities\n     * @type {Object}\n     * @static\n     * @readOnly\n     * @since 0.6.1\n     */\n    Object.defineProperty(s, \"capabilities\", {\n      get: function () {\n        if (s.activePlugin == null) {\n          return null;\n        }\n        return s.activePlugin._capabilities;\n      },\n      set: function (value) {\n        return false;\n      }\n    });\n\n    // Class Private properties\n    /**\n     * Determines if the plugins have been registered. If false, the first call to play() will instantiate the default\n     * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\n     * If plugins have been registered, but none are applicable, then sound playback will fail.\n     * @property _pluginsRegistered\n     * @type {Boolean}\n     * @default false\n     * @static\n     * @protected\n     */\n    s._pluginsRegistered = false;\n\n    /**\n     * Used internally to assign unique IDs to each AbstractSoundInstance.\n     * @property _lastID\n     * @type {Number}\n     * @static\n     * @protected\n     */\n    s._lastID = 0;\n\n    /**\n     * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\n     * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/setVolume\"}}{{/crossLink}}.\n     * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\n     * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\n     * method.\n     * @property _instances\n     * @type {Array}\n     * @protected\n     * @static\n     */\n    s._instances = [];\n\n    /**\n     * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\n     * @property _idHash\n     * @type {Object}\n     * @protected\n     * @static\n     */\n    s._idHash = {};\n\n    /**\n     * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\n     * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\n     * and data.\n     * @property _preloadHash\n     * @type {Object}\n     * @protected\n     * @static\n     */\n    s._preloadHash = {};\n\n    /**\n     * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\n     * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n     * @property _defaultPlayPropsHash\n     * @type {Object}\n     * @protected\n     * @static\n     * @since 0.6.1\n     */\n    s._defaultPlayPropsHash = {};\n\n    // EventDispatcher methods:\n    s.addEventListener = null;\n    s.removeEventListener = null;\n    s.removeAllEventListeners = null;\n    s.dispatchEvent = null;\n    s.hasEventListener = null;\n    s._listeners = null;\n    createjs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\n\n    // Events\n    /**\n     * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\n     * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n     * @event fileload\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {String} src The source of the sound that was loaded.\n     * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n     * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n     * @since 0.4.1\n     */\n\n    /**\n     * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\n     * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n     * @event fileerror\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @param {String} src The source of the sound that was loaded.\n     * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n     * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n     * @since 0.6.0\n     */\n\n    // Class Public Methods\n    /**\n     * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n     * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\n     * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\n     * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\n     * @method getPreloadHandlers\n     * @return {Object} An object containing:\n     * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\n     *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\n     *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\n     *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\n     * @static\n     * @protected\n     */\n    s.getPreloadHandlers = function () {\n      return {\n        callback: createjs.proxy(s.initLoad, s),\n        types: [\"sound\"],\n        extensions: s.SUPPORTED_EXTENSIONS\n      };\n    };\n\n    /**\n     * Used to dispatch fileload events from internal loading.\n     * @method _handleLoadComplete\n     * @param event A loader event.\n     * @protected\n     * @static\n     * @since 0.6.0\n     */\n    s._handleLoadComplete = function (event) {\n      var src = event.target.getItem().src;\n      if (!s._preloadHash[src]) {\n        return;\n      }\n      for (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n        var item = s._preloadHash[src][i];\n        s._preloadHash[src][i] = true;\n        if (!s.hasEventListener(\"fileload\")) {\n          continue;\n        }\n        var event = new createjs.Event(\"fileload\");\n        event.src = item.src;\n        event.id = item.id;\n        event.data = item.data;\n        event.sprite = item.sprite;\n        s.dispatchEvent(event);\n      }\n    };\n\n    /**\n     * Used to dispatch error events from internal preloading.\n     * @param event\n     * @protected\n     * @since 0.6.0\n     * @static\n     */\n    s._handleLoadError = function (event) {\n      var src = event.target.getItem().src;\n      if (!s._preloadHash[src]) {\n        return;\n      }\n      for (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n        var item = s._preloadHash[src][i];\n        s._preloadHash[src][i] = false;\n        if (!s.hasEventListener(\"fileerror\")) {\n          continue;\n        }\n        var event = new createjs.Event(\"fileerror\");\n        event.src = item.src;\n        event.id = item.id;\n        event.data = item.data;\n        event.sprite = item.sprite;\n        s.dispatchEvent(event);\n      }\n    };\n\n    /**\n     * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\n     *\n     * @method _registerPlugin\n     * @param {Object} plugin The plugin class to install.\n     * @return {Boolean} Whether the plugin was successfully initialized.\n     * @static\n     * @private\n     */\n    s._registerPlugin = function (plugin) {\n      // Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\n      if (plugin.isSupported()) {\n        s.activePlugin = new plugin();\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n     *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n     *\n     * @method registerPlugins\n     * @param {Array} plugins An array of plugins classes to install.\n     * @return {Boolean} Whether a plugin was successfully initialized.\n     * @static\n     */\n    s.registerPlugins = function (plugins) {\n      s._pluginsRegistered = true;\n      for (var i = 0, l = plugins.length; i < l; i++) {\n        if (s._registerPlugin(plugins[i])) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Initialize the default plugins. This method is automatically called when any audio is played or registered before\n     * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\n     * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     * \tif (!createjs.initializeDefaultPlugins()) { return; }\n     *\n     * @method initializeDefaultPlugins\n     * @returns {Boolean} True if a plugin was initialized, false otherwise.\n     * @since 0.4.0\n     * @static\n     */\n    s.initializeDefaultPlugins = function () {\n      if (s.activePlugin != null) {\n        return true;\n      }\n      if (s._pluginsRegistered) {\n        return false;\n      }\n      if (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * Determines if Sound has been initialized, and a plugin has been activated.\n     *\n     * <h4>Example</h4>\n     * This example sets up a Flash fallback, but only if there is no plugin specified yet.\n     *\n     * \tif (!createjs.Sound.isReady()) {\n     *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n     * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n     *\t}\n     *\n     * @method isReady\n     * @return {Boolean} If Sound has initialized a plugin.\n     * @static\n     */\n    s.isReady = function () {\n      return s.activePlugin != null;\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n     *\n     * @method getCapabilities\n     * @return {Object} An object containing the capabilities of the active plugin.\n     * @static\n     * @deprecated\n     */\n    s.getCapabilities = function () {\n      if (s.activePlugin == null) {\n        return null;\n      }\n      return s.activePlugin._capabilities;\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n     *\n     * @method getCapability\n     * @param {String} key The capability to retrieve\n     * @return {Number|Boolean} The value of the capability.\n     * @static\n     * @see getCapabilities\n     * @deprecated\n     */\n    s.getCapability = function (key) {\n      if (s.activePlugin == null) {\n        return null;\n      }\n      return s.activePlugin._capabilities[key];\n    };\n\n    /**\n     * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\n     * for usage by a plugin, and not for direct interaction.\n     * @method initLoad\n     * @param {Object} src The object to load.\n     * @return {Object|AbstractLoader} An instance of AbstractLoader.\n     * @protected\n     * @static\n     */\n    s.initLoad = function (loadItem) {\n      return s._registerSound(loadItem);\n    };\n\n    /**\n     * Internal method for loading sounds.  This should not be called directly.\n     *\n     * @method _registerSound\n     * @param {Object} src The object to load, containing src property and optionally containing id and data.\n     * @return {Object} An object with the modified values that were passed in, which defines the sound.\n     * Returns false if the source cannot be parsed or no plugins can be initialized.\n     * Returns true if the source is already loaded.\n     * @static\n     * @private\n     * @since 0.6.0\n     */\n\n    s._registerSound = function (loadItem) {\n      if (!s.initializeDefaultPlugins()) {\n        return false;\n      }\n      var details;\n      if (loadItem.src instanceof Object) {\n        details = s._parseSrc(loadItem.src);\n        details.src = loadItem.path + details.src;\n      } else {\n        details = s._parsePath(loadItem.src);\n      }\n      if (details == null) {\n        return false;\n      }\n      loadItem.src = details.src;\n      loadItem.type = \"sound\";\n      var data = loadItem.data;\n      var numChannels = null;\n      if (data != null) {\n        if (!isNaN(data.channels)) {\n          numChannels = parseInt(data.channels);\n        } else if (!isNaN(data)) {\n          numChannels = parseInt(data);\n        }\n        if (data.audioSprite) {\n          var sp;\n          for (var i = data.audioSprite.length; i--;) {\n            sp = data.audioSprite[i];\n            s._idHash[sp.id] = {\n              src: loadItem.src,\n              startTime: parseInt(sp.startTime),\n              duration: parseInt(sp.duration)\n            };\n            if (sp.defaultPlayProps) {\n              s._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\n            }\n          }\n        }\n      }\n      if (loadItem.id != null) {\n        s._idHash[loadItem.id] = {\n          src: loadItem.src\n        };\n      }\n      var loader = s.activePlugin.register(loadItem);\n      SoundChannel.create(loadItem.src, numChannels);\n\n      // return the number of instances to the user.  This will also be returned in the load event.\n      if (data == null || !isNaN(data)) {\n        loadItem.data = numChannels || SoundChannel.maxPerChannel();\n      } else {\n        loadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\n      }\n      if (loader.type) {\n        loadItem.type = loader.type;\n      }\n      if (loadItem.defaultPlayProps) {\n        s._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\n      }\n      return loader;\n    };\n\n    /**\n     * Register an audio file for loading and future playback in Sound. This is automatically called when using\n     * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\n     * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Sound.alternateExtensions = [\"mp3\"];\n     *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\n     *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\n     *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\n     *\n     *\n     * @method registerSound\n     * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\n     * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\n     * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\n     * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\n     * for other information. The audio channels will set a default based on plugin if no value is found.\n     * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\n     *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\n     *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\n     *   duration is the amount of time to play the clip for, in milliseconds.<br/>\n     * This allows Sound to support audio sprites that are played back by id.\n     * @param {string} basePath Set a path that will be prepended to src for loading.\n     * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\n     * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\n     * @return {Object} An object with the modified values that were passed in, which defines the sound.\n     * Returns false if the source cannot be parsed or no plugins can be initialized.\n     * Returns true if the source is already loaded.\n     * @static\n     * @since 0.4.0\n     */\n    s.registerSound = function (src, id, data, basePath, defaultPlayProps) {\n      var loadItem = {\n        src: src,\n        id: id,\n        data: data,\n        defaultPlayProps: defaultPlayProps\n      };\n      if (src instanceof Object && src.src) {\n        basePath = id;\n        loadItem = src;\n      }\n      loadItem = createjs.LoadItem.create(loadItem);\n      loadItem.path = basePath;\n      if (basePath != null && !(loadItem.src instanceof Object)) {\n        loadItem.src = basePath + src;\n      }\n      var loader = s._registerSound(loadItem);\n      if (!loader) {\n        return false;\n      }\n      if (!s._preloadHash[loadItem.src]) {\n        s._preloadHash[loadItem.src] = [];\n      }\n      s._preloadHash[loadItem.src].push(loadItem);\n      if (s._preloadHash[loadItem.src].length == 1) {\n        // OJR note this will disallow reloading a sound if loading fails or the source changes\n        loader.on(\"complete\", createjs.proxy(this._handleLoadComplete, this));\n        loader.on(\"error\", createjs.proxy(this._handleLoadError, this));\n        s.activePlugin.preload(loader);\n      } else {\n        if (s._preloadHash[loadItem.src][0] == true) {\n          return true;\n        }\n      }\n      return loadItem;\n    };\n\n    /**\n     * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\n     * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\n     * when required.\n     *\n     * <h4>Example</h4>\n     *\n     * \t\tvar assetPath = \"./myAudioPath/\";\n     *      var sounds = [\n     *          {src:\"asset0.ogg\", id:\"example\"},\n     *          {src:\"asset1.ogg\", id:\"1\", data:6},\n     *          {src:\"asset2.mp3\", id:\"works\"}\n     *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension}, id:\"better\"}\n     *      ];\n     *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\n     *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n     *      createjs.Sound.registerSounds(sounds, assetPath);\n     *\n     * @method registerSounds\n     * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\n     * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\n     * with \"id\" and \"data\" being optional.\n     * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\n     * Note id is required if src is an object with extension labeled src properties.\n     * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\n     * audio that was loaded with a basePath by src, the basePath must be included.\n     * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\n     * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\n     * Also, it will return true for any values when the source is already loaded.\n     * @static\n     * @since 0.6.0\n     */\n    s.registerSounds = function (sounds, basePath) {\n      var returnValues = [];\n      if (sounds.path) {\n        if (!basePath) {\n          basePath = sounds.path;\n        } else {\n          basePath = basePath + sounds.path;\n        }\n        sounds = sounds.manifest;\n        // TODO document this feature\n      }\n      for (var i = 0, l = sounds.length; i < l; i++) {\n        returnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\n      }\n      return returnValues;\n    };\n\n    /**\n     * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n     * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n     * <br />Note this will stop playback on active instances playing this sound before deleting them.\n     * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Sound.removeSound(\"myID\");\n     *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\n     *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\n     *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\n     *\n     * @method removeSound\n     * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\n     * @param {string} basePath Set a path that will be prepended to each src when removing.\n     * @return {Boolean} True if sound is successfully removed.\n     * @static\n     * @since 0.4.1\n     */\n    s.removeSound = function (src, basePath) {\n      if (s.activePlugin == null) {\n        return false;\n      }\n      if (src instanceof Object && src.src) {\n        src = src.src;\n      }\n      var details;\n      if (src instanceof Object) {\n        details = s._parseSrc(src);\n      } else {\n        src = s._getSrcById(src).src;\n        details = s._parsePath(src);\n      }\n      if (details == null) {\n        return false;\n      }\n      src = details.src;\n      if (basePath != null) {\n        src = basePath + src;\n      }\n      for (var prop in s._idHash) {\n        if (s._idHash[prop].src == src) {\n          delete s._idHash[prop];\n        }\n      }\n\n      // clear from SoundChannel, which also stops and deletes all instances\n      SoundChannel.removeSrc(src);\n      delete s._preloadHash[src];\n      s.activePlugin.removeSound(src);\n      return true;\n    };\n\n    /**\n     * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n     * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n     * <br />Note this will stop playback on active instances playing this audio before deleting them.\n     * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n     *\n     * <h4>Example</h4>\n     *\n     * \t\tassetPath = \"./myPath/\";\n     *      var sounds = [\n     *          {src:\"asset0.ogg\", id:\"example\"},\n     *          {src:\"asset1.ogg\", id:\"1\", data:6},\n     *          {src:\"asset2.mp3\", id:\"works\"}\n     *      ];\n     *      createjs.Sound.removeSounds(sounds, assetPath);\n     *\n     * @method removeSounds\n     * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\n     * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\n     * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\n     * @param {string} basePath Set a path that will be prepended to each src when removing.\n     * @return {Object} An array of Boolean values representing if the sounds with the same array index were\n     * successfully removed.\n     * @static\n     * @since 0.4.1\n     */\n    s.removeSounds = function (sounds, basePath) {\n      var returnValues = [];\n      if (sounds.path) {\n        if (!basePath) {\n          basePath = sounds.path;\n        } else {\n          basePath = basePath + sounds.path;\n        }\n        sounds = sounds.manifest;\n      }\n      for (var i = 0, l = sounds.length; i < l; i++) {\n        returnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\n      }\n      return returnValues;\n    };\n\n    /**\n     * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n     * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n     * <br />Note this will stop playback on all active sound instances before deleting them.\n     *\n     * <h4>Example</h4>\n     *\n     *     createjs.Sound.removeAllSounds();\n     *\n     * @method removeAllSounds\n     * @static\n     * @since 0.4.1\n     */\n    s.removeAllSounds = function () {\n      s._idHash = {};\n      s._preloadHash = {};\n      SoundChannel.removeAll();\n      if (s.activePlugin) {\n        s.activePlugin.removeAllSounds();\n      }\n    };\n\n    /**\n     * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\n     * not completed preloading will not kick off a new internal preload if they are played.\n     *\n     * <h4>Example</h4>\n     *\n     *     var mySound = \"assetPath/asset0.ogg\";\n     *     if(createjs.Sound.loadComplete(mySound) {\n     *         createjs.Sound.play(mySound);\n     *     }\n     *\n     * @method loadComplete\n     * @param {String} src The src or id that is being loaded.\n     * @return {Boolean} If the src is already loaded.\n     * @since 0.4.0\n     * @static\n     */\n    s.loadComplete = function (src) {\n      if (!s.isReady()) {\n        return false;\n      }\n      var details = s._parsePath(src);\n      if (details) {\n        src = s._getSrcById(details.src).src;\n      } else {\n        src = s._getSrcById(src).src;\n      }\n      if (s._preloadHash[src] == undefined) {\n        return false;\n      }\n      return s._preloadHash[src][0] == true; // src only loads once, so if it's true for the first it's true for all\n    };\n\n    /**\n     * Parse the path of a sound. Alternate extensions will be attempted in order if the\n     * current extension is not supported\n     * @method _parsePath\n     * @param {String} value The path to an audio source.\n     * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n     * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n     * @protected\n     * @static\n     */\n    s._parsePath = function (value) {\n      if (typeof value != \"string\") {\n        value = value.toString();\n      }\n      var match = value.match(s.FILE_PATTERN);\n      if (match == null) {\n        return false;\n      }\n      var name = match[4];\n      var ext = match[5];\n      var c = s.capabilities;\n      var i = 0;\n      while (!c[ext]) {\n        ext = s.alternateExtensions[i++];\n        if (i > s.alternateExtensions.length) {\n          return null;\n        } // no extensions are supported\n      }\n      value = value.replace(\".\" + match[5], \".\" + ext);\n      var ret = {\n        name: name,\n        src: value,\n        extension: ext\n      };\n      return ret;\n    };\n\n    /**\n     * Parse the path of a sound based on properties of src matching with supported extensions.\n     * Returns false if none of the properties are supported\n     * @method _parseSrc\n     * @param {Object} value The paths to an audio source, indexed by extension type.\n     * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n     * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n     * @protected\n     * @static\n     */\n    s._parseSrc = function (value) {\n      var ret = {\n        name: undefined,\n        src: undefined,\n        extension: undefined\n      };\n      var c = s.capabilities;\n      for (var prop in value) {\n        if (value.hasOwnProperty(prop) && c[prop]) {\n          ret.src = value[prop];\n          ret.extension = prop;\n          break;\n        }\n      }\n      if (!ret.src) {\n        return false;\n      } // no matches\n\n      var i = ret.src.lastIndexOf(\"/\");\n      if (i != -1) {\n        ret.name = ret.src.slice(i + 1);\n      } else {\n        ret.name = ret.src;\n      }\n      return ret;\n    };\n\n    /* ---------------\n     Static API.\n     --------------- */\n    /**\n     * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to play, a\n     * AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\n     * Note that even on sounds with failed playback, you may still be able to call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\n     * since the failure could be due to lack of available channels. If the src does not have a supported extension or\n     * if there is no available plugin, a default AbstractSoundInstance will be returned which will not play any audio, but will not generate errors.\n     *\n     * <h4>Example</h4>\n     *\n     *      createjs.Sound.on(\"fileload\", handleLoad);\n     *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n     *      function handleLoad(event) {\n     *      \tcreatejs.Sound.play(\"myID\");\n     *      \t// store off AbstractSoundInstance for controlling\n     *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\n     *      }\n     *\n     * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n     * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n     *\n     * <b>Parameters Deprecated</b><br />\n     * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n     *\n     * @method play\n     * @param {String} src The src or ID of the audio.\n     * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n     * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n     * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n     * <br /><strong>OR</strong><br />\n     * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n     * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n     * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n     * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n     * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n     * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n     * loops), and -1 can be used for infinite playback.\n     * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n     * against the individual volume.\n     * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n     * @param {Number} [startTime=null] <b>Deprecated</b> To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n     * @param {Number} [duration=null] <b>Deprecated</b> To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n     * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n     * @static\n     */\n    s.play = function (src, interrupt, delay, offset, loop, volume, pan, startTime, duration) {\n      var playProps;\n      if (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n        playProps = createjs.PlayPropsConfig.create(interrupt);\n      } else {\n        playProps = createjs.PlayPropsConfig.create({\n          interrupt: interrupt,\n          delay: delay,\n          offset: offset,\n          loop: loop,\n          volume: volume,\n          pan: pan,\n          startTime: startTime,\n          duration: duration\n        });\n      }\n      var instance = s.createInstance(src, playProps.startTime, playProps.duration);\n      var ok = s._playInstance(instance, playProps);\n      if (!ok) {\n        instance._playFailed();\n      }\n      return instance;\n    };\n\n    /**\n     * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\n     * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\n     * called safely but does nothing.\n     *\n     * <h4>Example</h4>\n     *\n     *      var myInstance = null;\n     *      createjs.Sound.on(\"fileload\", handleLoad);\n     *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n     *      function handleLoad(event) {\n     *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\n     *      \t// alternately we could call the following\n     *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\n     *      }\n     *\n     * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n     * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n     *\n     * @method createInstance\n     * @param {String} src The src or ID of the audio.\n     * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n     * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n     * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n     * Unsupported extensions will return the default AbstractSoundInstance.\n     * @since 0.4.0\n     * @static\n     */\n    s.createInstance = function (src, startTime, duration) {\n      if (!s.initializeDefaultPlugins()) {\n        return new createjs.DefaultSoundInstance(src, startTime, duration);\n      }\n      var defaultPlayProps = s._defaultPlayPropsHash[src]; // for audio sprites, which create and store defaults by id\n      src = s._getSrcById(src);\n      var details = s._parsePath(src.src);\n      var instance = null;\n      if (details != null && details.src != null) {\n        SoundChannel.create(details.src);\n        if (startTime == null) {\n          startTime = src.startTime;\n        }\n        instance = s.activePlugin.create(details.src, startTime, duration || src.duration);\n        defaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\n        if (defaultPlayProps) {\n          instance.applyPlayProps(defaultPlayProps);\n        }\n      } else {\n        instance = new createjs.DefaultSoundInstance(src, startTime, duration);\n      }\n      instance.uniqueId = s._lastID++;\n      return instance;\n    };\n\n    /**\n     * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\n     * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     *     createjs.Sound.stop();\n     *\n     * @method stop\n     * @static\n     */\n    s.stop = function () {\n      var instances = this._instances;\n      for (var i = instances.length; i--;) {\n        instances[i].stop(); // NOTE stop removes instance from this._instances\n      }\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n     *\n     * @method setVolume\n     * @param {Number} value The master volume value. The acceptable range is 0-1.\n     * @static\n     * @deprecated\n     */\n    s.setVolume = function (value) {\n      if (Number(value) == null) {\n        return false;\n      }\n      value = Math.max(0, Math.min(1, value));\n      s._masterVolume = value;\n      if (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n        var instances = this._instances;\n        for (var i = 0, l = instances.length; i < l; i++) {\n          instances[i].setMasterVolume(value);\n        }\n      }\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n     *\n     * @method getVolume\n     * @return {Number} The master volume, in a range of 0-1.\n     * @static\n     * @deprecated\n     */\n    s.getVolume = function () {\n      return this._masterVolume;\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n     *\n     * @method setMute\n     * @param {Boolean} value Whether the audio should be muted or not.\n     * @return {Boolean} If the mute was set.\n     * @static\n     * @since 0.4.0\n     * @deprecated\n     */\n    s.setMute = function (value) {\n      if (value == null) {\n        return false;\n      }\n      this._masterMute = value;\n      if (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n        var instances = this._instances;\n        for (var i = 0, l = instances.length; i < l; i++) {\n          instances[i].setMasterMute(value);\n        }\n      }\n      return true;\n    };\n\n    /**\n     * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n     *\n     * @method getMute\n     * @return {Boolean} The mute value of Sound.\n     * @static\n     * @since 0.4.0\n     * @deprecated\n     */\n    s.getMute = function () {\n      return this._masterMute;\n    };\n\n    /**\n     * Set the default playback properties for all new SoundInstances of the passed in src or ID.\n     * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\n     *\n     * @method setDefaultPlayProps\n     * @param {String} src The src or ID used to register the audio.\n     * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\n     * @since 0.6.1\n     */\n    s.setDefaultPlayProps = function (src, playProps) {\n      src = s._getSrcById(src);\n      s._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\n    };\n\n    /**\n     * Get the default playback properties for the passed in src or ID.  These properties are applied to all\n     * new SoundInstances.  Returns null if default does not exist.\n     *\n     * @method getDefaultPlayProps\n     * @param {String} src The src or ID used to register the audio.\n     * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\n     * @since 0.6.1\n     */\n    s.getDefaultPlayProps = function (src) {\n      src = s._getSrcById(src);\n      return s._defaultPlayPropsHash[s._parsePath(src.src).src];\n    };\n\n    /* ---------------\n     Internal methods\n     --------------- */\n    /**\n     * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\n     * control delays.\n     * @method _playInstance\n     * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\n     * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n     * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\n     * have a delay will return true, but may still fail to play.\n     * @protected\n     * @static\n     */\n    s._playInstance = function (instance, playProps) {\n      var defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\n      if (playProps.interrupt == null) {\n        playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior;\n      }\n      if (playProps.delay == null) {\n        playProps.delay = defaultPlayProps.delay || 0;\n      }\n      if (playProps.offset == null) {\n        playProps.offset = instance.getPosition();\n      }\n      if (playProps.loop == null) {\n        playProps.loop = instance.loop;\n      }\n      if (playProps.volume == null) {\n        playProps.volume = instance.volume;\n      }\n      if (playProps.pan == null) {\n        playProps.pan = instance.pan;\n      }\n      if (playProps.delay == 0) {\n        var ok = s._beginPlaying(instance, playProps);\n        if (!ok) {\n          return false;\n        }\n      } else {\n        //Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\n        // OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\n        var delayTimeoutId = setTimeout(function () {\n          s._beginPlaying(instance, playProps);\n        }, playProps.delay);\n        instance.delayTimeoutId = delayTimeoutId;\n      }\n      this._instances.push(instance);\n      return true;\n    };\n\n    /**\n     * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\n     * @method _beginPlaying\n     * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\n     * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n     * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\n     * start, this will return false.\n     * @protected\n     * @static\n     */\n    s._beginPlaying = function (instance, playProps) {\n      if (!SoundChannel.add(instance, playProps.interrupt)) {\n        return false;\n      }\n      var result = instance._beginPlaying(playProps);\n      if (!result) {\n        var index = createjs.indexOf(this._instances, instance);\n        if (index > -1) {\n          this._instances.splice(index, 1);\n        }\n        return false;\n      }\n      return true;\n    };\n\n    /**\n     * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\n     * instead.\n     * @method _getSrcById\n     * @param {String} value The ID the sound was registered with.\n     * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\n     * @protected\n     * @static\n     */\n    s._getSrcById = function (value) {\n      return s._idHash[value] || {\n        src: value\n      };\n    };\n\n    /**\n     * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\n     * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\n     * instances themselves.\n     * @method _playFinished\n     * @param {AbstractSoundInstance} instance The instance that finished playback.\n     * @protected\n     * @static\n     */\n    s._playFinished = function (instance) {\n      SoundChannel.remove(instance);\n      var index = createjs.indexOf(this._instances, instance);\n      if (index > -1) {\n        this._instances.splice(index, 1);\n      } // OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\n    };\n    createjs.Sound = Sound;\n\n    /**\n     * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\n     * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\n     *\n     * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\n     * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\n     * browser support.\n     *\n     * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\n     * sound that is already playing.\n     * #class SoundChannel\n     * @param {String} src The source of the instances\n     * @param {Number} [max=1] The number of instances allowed\n     * @constructor\n     * @protected\n     */\n    function SoundChannel(src, max) {\n      this.init(src, max);\n    }\n\n    /* ------------\n     Static API\n     ------------ */\n    /**\n     * A hash of channel instances indexed by source.\n     * #property channels\n     * @type {Object}\n     * @static\n     */\n    SoundChannel.channels = {};\n\n    /**\n     * Create a sound channel. Note that if the sound channel already exists, this will fail.\n     * #method create\n     * @param {String} src The source for the channel\n     * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\n     * @return {Boolean} If the channels were created.\n     * @static\n     */\n    SoundChannel.create = function (src, max) {\n      var channel = SoundChannel.get(src);\n      if (channel == null) {\n        SoundChannel.channels[src] = new SoundChannel(src, max);\n        return true;\n      }\n      return false;\n    };\n    /**\n     * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\n     * #method remove\n     * @param {String} src The source for the channel\n     * @return {Boolean} If the channels were deleted.\n     * @static\n     */\n    SoundChannel.removeSrc = function (src) {\n      var channel = SoundChannel.get(src);\n      if (channel == null) {\n        return false;\n      }\n      channel._removeAll(); // this stops and removes all active instances\n      delete SoundChannel.channels[src];\n      return true;\n    };\n    /**\n     * Delete all sound channels, stop and delete all related instances.\n     * #method removeAll\n     * @static\n     */\n    SoundChannel.removeAll = function () {\n      for (var channel in SoundChannel.channels) {\n        SoundChannel.channels[channel]._removeAll(); // this stops and removes all active instances\n      }\n      SoundChannel.channels = {};\n    };\n    /**\n     * Add an instance to a sound channel.\n     * #method add\n     * @param {AbstractSoundInstance} instance The instance to add to the channel\n     * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\n     * for details on interrupt modes.\n     * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n     * @static\n     */\n    SoundChannel.add = function (instance, interrupt) {\n      var channel = SoundChannel.get(instance.src);\n      if (channel == null) {\n        return false;\n      }\n      return channel._add(instance, interrupt);\n    };\n    /**\n     * Remove an instance from the channel.\n     * #method remove\n     * @param {AbstractSoundInstance} instance The instance to remove from the channel\n     * @return The success of the method call. If there is no channel, it will return false.\n     * @static\n     */\n    SoundChannel.remove = function (instance) {\n      var channel = SoundChannel.get(instance.src);\n      if (channel == null) {\n        return false;\n      }\n      channel._remove(instance);\n      return true;\n    };\n    /**\n     * Get the maximum number of sounds you can have in a channel.\n     * #method maxPerChannel\n     * @return {Number} The maximum number of sounds you can have in a channel.\n     */\n    SoundChannel.maxPerChannel = function () {\n      return p.maxDefault;\n    };\n    /**\n     * Get a channel instance by its src.\n     * #method get\n     * @param {String} src The src to use to look up the channel\n     * @static\n     */\n    SoundChannel.get = function (src) {\n      return SoundChannel.channels[src];\n    };\n    var p = SoundChannel.prototype;\n    p.constructor = SoundChannel;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    /**\n     * The source of the channel.\n     * #property src\n     * @type {String}\n     */\n    p.src = null;\n\n    /**\n     * The maximum number of instances in this channel.  -1 indicates no limit\n     * #property max\n     * @type {Number}\n     */\n    p.max = null;\n\n    /**\n     * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\n     * #property maxDefault\n     * @type {Number}\n     * @default 100\n     * @since 0.4.0\n     */\n    p.maxDefault = 100;\n\n    /**\n     * The current number of active instances.\n     * #property length\n     * @type {Number}\n     */\n    p.length = 0;\n\n    /**\n     * Initialize the channel.\n     * #method init\n     * @param {String} src The source of the channel\n     * @param {Number} max The maximum number of instances in the channel\n     * @protected\n     */\n    p.init = function (src, max) {\n      this.src = src;\n      this.max = max || this.maxDefault;\n      if (this.max == -1) {\n        this.max = this.maxDefault;\n      }\n      this._instances = [];\n    };\n\n    /**\n     * Get an instance by index.\n     * #method get\n     * @param {Number} index The index to return.\n     * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\n     */\n    p._get = function (index) {\n      return this._instances[index];\n    };\n\n    /**\n     * Add a new instance to the channel.\n     * #method add\n     * @param {AbstractSoundInstance} instance The instance to add.\n     * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n     */\n    p._add = function (instance, interrupt) {\n      if (!this._getSlot(interrupt, instance)) {\n        return false;\n      }\n      this._instances.push(instance);\n      this.length++;\n      return true;\n    };\n\n    /**\n     * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\n     * #method remove\n     * @param {AbstractSoundInstance} instance The instance to remove\n     * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\n     * return false.\n     */\n    p._remove = function (instance) {\n      var index = createjs.indexOf(this._instances, instance);\n      if (index == -1) {\n        return false;\n      }\n      this._instances.splice(index, 1);\n      this.length--;\n      return true;\n    };\n\n    /**\n     * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\n     * #method removeAll\n     */\n    p._removeAll = function () {\n      // Note that stop() removes the item from the list\n      for (var i = this.length - 1; i >= 0; i--) {\n        this._instances[i].stop();\n      }\n    };\n\n    /**\n     * Get an available slot depending on interrupt value and if slots are available.\n     * #method getSlot\n     * @param {String} interrupt The interrupt value to use.\n     * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\n     * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\n     * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\n     */\n    p._getSlot = function (interrupt, instance) {\n      var target, replacement;\n      if (interrupt != Sound.INTERRUPT_NONE) {\n        // First replacement candidate\n        replacement = this._get(0);\n        if (replacement == null) {\n          return true;\n        }\n      }\n      for (var i = 0, l = this.max; i < l; i++) {\n        target = this._get(i);\n\n        // Available Space\n        if (target == null) {\n          return true;\n        }\n\n        // Audio is complete or not playing\n        if (target.playState == Sound.PLAY_FINISHED || target.playState == Sound.PLAY_INTERRUPTED || target.playState == Sound.PLAY_FAILED) {\n          replacement = target;\n          break;\n        }\n        if (interrupt == Sound.INTERRUPT_NONE) {\n          continue;\n        }\n\n        // Audio is a better candidate than the current target, according to playhead\n        if (interrupt == Sound.INTERRUPT_EARLY && target.getPosition() < replacement.getPosition() || interrupt == Sound.INTERRUPT_LATE && target.getPosition() > replacement.getPosition()) {\n          replacement = target;\n        }\n      }\n      if (replacement != null) {\n        replacement._interrupt();\n        this._remove(replacement);\n        return true;\n      }\n      return false;\n    };\n    p.toString = function () {\n      return \"[Sound SoundChannel]\";\n    };\n    // do not add SoundChannel to namespace\n  })();\n\n  //##############################################################################\n  // AbstractSoundInstance.js\n  //##############################################################################\n\n  /**\n   * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\n   * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\n   * for control by the user.\n   *\n   * <h4>Example</h4>\n   *\n   *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n   *\n   * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\n   * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\n   *\n   * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\n   * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\n   * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\n   * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\n   * will rebuild the references the Sound class need to control it.\n   *\n   *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\n   *      myInstance.on(\"loop\", handleLoop);\n   *      function handleLoop(event) {\n   *          myInstance.volume = myInstance.volume * 0.5;\n   *      }\n   *\n   * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\n   *\n   *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n   *      myInstance.on(\"complete\", handleComplete);\n   *      myInstance.on(\"loop\", handleLoop);\n   *      myInstance.on(\"failed\", handleFailed);\n   *\n   *\n   * @class AbstractSoundInstance\n   * @param {String} src The path to and file name of the sound.\n   * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n   * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n   * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n   * @extends EventDispatcher\n   * @constructor\n   */\n\n  (function () {\n    // Constructor:\n    var AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\n      this.EventDispatcher_constructor();\n\n      // public properties:\n      /**\n       * The source of the sound.\n       * @property src\n       * @type {String}\n       * @default null\n       */\n      this.src = src;\n\n      /**\n       * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\n       * @property uniqueId\n       * @type {String} | Number\n       * @default -1\n       */\n      this.uniqueId = -1;\n\n      /**\n       * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\n       * @property playState\n       * @type {String}\n       * @default null\n       */\n      this.playState = null;\n\n      /**\n       * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\n       * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\n       * @property delayTimeoutId\n       * @type {timeoutVariable}\n       * @default null\n       * @protected\n       * @since 0.4.0\n       */\n      this.delayTimeoutId = null;\n      // TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\n\n      // private properties\n      // Getter / Setter Properties\n      // OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\n      /**\n       * The volume of the sound, between 0 and 1.\n       *\n       * The actual output volume of a sound can be calculated using:\n       * <code>myInstance.volume * createjs.Sound.getVolume();</code>\n       *\n       * @property volume\n       * @type {Number}\n       * @default 1\n       */\n      this._volume = 1;\n      Object.defineProperty(this, \"volume\", {\n        get: this.getVolume,\n        set: this.setVolume\n      });\n\n      /**\n       * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\n       *\n       * <br />Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio.\n       *\n       * @property pan\n       * @type {Number}\n       * @default 0\n       */\n      this._pan = 0;\n      Object.defineProperty(this, \"pan\", {\n        get: this.getPan,\n        set: this.setPan\n      });\n\n      /**\n       * Audio sprite property used to determine the starting offset.\n       * @property startTime\n       * @type {Number}\n       * @default 0\n       * @since 0.6.1\n       */\n      this._startTime = Math.max(0, startTime || 0);\n      Object.defineProperty(this, \"startTime\", {\n        get: this.getStartTime,\n        set: this.setStartTime\n      });\n\n      /**\n       * Sets or gets the length of the audio clip, value is in milliseconds.\n       *\n       * @property duration\n       * @type {Number}\n       * @default 0\n       * @since 0.6.0\n       */\n      this._duration = Math.max(0, duration || 0);\n      Object.defineProperty(this, \"duration\", {\n        get: this.getDuration,\n        set: this.setDuration\n      });\n\n      /**\n       * Object that holds plugin specific resource need for audio playback.\n       * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\n       * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\n       *\n       * @property playbackResource\n       * @type {Object}\n       * @default null\n       */\n      this._playbackResource = null;\n      Object.defineProperty(this, \"playbackResource\", {\n        get: this.getPlaybackResource,\n        set: this.setPlaybackResource\n      });\n      if (playbackResource !== false && playbackResource !== true) {\n        this.setPlaybackResource(playbackResource);\n      }\n\n      /**\n       * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\n       *\n       * @property position\n       * @type {Number}\n       * @default 0\n       * @since 0.6.0\n       */\n      this._position = 0;\n      Object.defineProperty(this, \"position\", {\n        get: this.getPosition,\n        set: this.setPosition\n      });\n\n      /**\n       * The number of play loops remaining. Negative values will loop infinitely.\n       *\n       * @property loop\n       * @type {Number}\n       * @default 0\n       * @public\n       * @since 0.6.0\n       */\n      this._loop = 0;\n      Object.defineProperty(this, \"loop\", {\n        get: this.getLoop,\n        set: this.setLoop\n      });\n\n      /**\n       * Mutes or unmutes the current audio instance.\n       *\n       * @property muted\n       * @type {Boolean}\n       * @default false\n       * @since 0.6.0\n       */\n      this._muted = false;\n      Object.defineProperty(this, \"muted\", {\n        get: this.getMuted,\n        set: this.setMuted\n      });\n\n      /**\n       * Pauses or resumes the current audio instance.\n       *\n       * @property paused\n       * @type {Boolean}\n       */\n      this._paused = false;\n      Object.defineProperty(this, \"paused\", {\n        get: this.getPaused,\n        set: this.setPaused\n      });\n\n      // Events\n      /**\n       * The event that is fired when playback has started successfully.\n       * @event succeeded\n       * @param {Object} target The object that dispatched the event.\n       * @param {String} type The event type.\n       * @since 0.4.0\n       */\n\n      /**\n       * The event that is fired when playback is interrupted. This happens when another sound with the same\n       * src property is played using an interrupt value that causes this instance to stop playing.\n       * @event interrupted\n       * @param {Object} target The object that dispatched the event.\n       * @param {String} type The event type.\n       * @since 0.4.0\n       */\n\n      /**\n       * The event that is fired when playback has failed. This happens when there are too many channels with the same\n       * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\n       * the sound could not be played, perhaps due to a 404 error.\n       * @event failed\n       * @param {Object} target The object that dispatched the event.\n       * @param {String} type The event type.\n       * @since 0.4.0\n       */\n\n      /**\n       * The event that is fired when a sound has completed playing but has loops remaining.\n       * @event loop\n       * @param {Object} target The object that dispatched the event.\n       * @param {String} type The event type.\n       * @since 0.4.0\n       */\n\n      /**\n       * The event that is fired when playback completes. This means that the sound has finished playing in its\n       * entirety, including its loop iterations.\n       * @event complete\n       * @param {Object} target The object that dispatched the event.\n       * @param {String} type The event type.\n       * @since 0.4.0\n       */\n    };\n    var p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // Public Methods:\n    /**\n     * Play an instance. This method is intended to be called on SoundInstances that already exist (created\n     * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\n     *\n     * <h4>Example</h4>\n     *\n     *      var myInstance = createjs.Sound.createInstance(mySrc);\n     *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\n     *\n     * Note that if this sound is already playing, this call will still set the passed in parameters.\n    \t * <b>Parameters Deprecated</b><br />\n     * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n     *\n     * @method play\n     * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n     * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n     * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n     * <br /><strong>OR</strong><br />\n     * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n     * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n     * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n     * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n     * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n     * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n     * loops), and -1 can be used for infinite playback.\n     * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n     * against the individual volume.\n     * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n     * Note that pan is not supported for HTML Audio.\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     */\n    p.play = function (interrupt, delay, offset, loop, volume, pan) {\n      var playProps;\n      if (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n        playProps = createjs.PlayPropsConfig.create(interrupt);\n      } else {\n        playProps = createjs.PlayPropsConfig.create({\n          interrupt: interrupt,\n          delay: delay,\n          offset: offset,\n          loop: loop,\n          volume: volume,\n          pan: pan\n        });\n      }\n      if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this.applyPlayProps(playProps);\n        if (this._paused) {\n          this.setPaused(false);\n        }\n        return;\n      }\n      this._cleanUp();\n      createjs.Sound._playInstance(this, playProps); // make this an event dispatch??\n      return this;\n    };\n\n    /**\n     * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\n     * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n        *\n        * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\n     *\n     * <h4>Example</h4>\n     *\n     *     myInstance.stop();\n     *\n     * @method stop\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     */\n    p.stop = function () {\n      this._position = 0;\n      this._paused = false;\n      this._handleStop();\n      this._cleanUp();\n      this.playState = createjs.Sound.PLAY_FINISHED;\n      return this;\n    };\n\n    /**\n     * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\n     * @method destroy\n     * @since 0.6.0\n     */\n    p.destroy = function () {\n      this._cleanUp();\n      this.src = null;\n      this.playbackResource = null;\n      this.removeAllEventListeners();\n    };\n\n    /**\n     * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\n     * @method applyPlayProps\n     * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\n     * @since 0.6.1\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     */\n    p.applyPlayProps = function (playProps) {\n      if (playProps.offset != null) {\n        this.setPosition(playProps.offset);\n      }\n      if (playProps.loop != null) {\n        this.setLoop(playProps.loop);\n      }\n      if (playProps.volume != null) {\n        this.setVolume(playProps.volume);\n      }\n      if (playProps.pan != null) {\n        this.setPan(playProps.pan);\n      }\n      if (playProps.startTime != null) {\n        this.setStartTime(playProps.startTime);\n        this.setDuration(playProps.duration);\n      }\n      return this;\n    };\n    p.toString = function () {\n      return \"[AbstractSoundInstance]\";\n    };\n\n    // get/set methods that allow support for IE8\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property,\n     *\n     * @deprecated\n     * @method getPaused\n     * @returns {boolean} If the instance is currently paused\n     * @since 0.6.0\n     */\n    p.getPaused = function () {\n      return this._paused;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setPaused\n     * @param {boolean} value\n     * @since 0.6.0\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     */\n    p.setPaused = function (value) {\n      if (value !== true && value !== false || this._paused == value) {\n        return;\n      }\n      if (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {\n        return;\n      }\n      this._paused = value;\n      if (value) {\n        this._pause();\n      } else {\n        this._resume();\n      }\n      clearTimeout(this.delayTimeoutId);\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setVolume\n     * @param {Number} value The volume to set, between 0 and 1.\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     */\n    p.setVolume = function (value) {\n      if (value == this._volume) {\n        return this;\n      }\n      this._volume = Math.max(0, Math.min(1, value));\n      if (!this._muted) {\n        this._updateVolume();\n      }\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getVolume\n     * @return {Number} The current volume of the sound instance.\n     */\n    p.getVolume = function () {\n      return this._volume;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setMuted\n     * @param {Boolean} value If the sound should be muted.\n     * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n     * @since 0.6.0\n     */\n    p.setMuted = function (value) {\n      if (value !== true && value !== false) {\n        return;\n      }\n      this._muted = value;\n      this._updateVolume();\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getMuted\n     * @return {Boolean} If the sound is muted.\n     * @since 0.6.0\n     */\n    p.getMuted = function () {\n      return this._muted;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setPan\n     * @param {Number} value The pan value, between -1 (left) and 1 (right).\n     * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n     */\n    p.setPan = function (value) {\n      if (value == this._pan) {\n        return this;\n      }\n      this._pan = Math.max(-1, Math.min(1, value));\n      this._updatePan();\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getPan\n     * @return {Number} The value of the pan, between -1 (left) and 1 (right).\n     */\n    p.getPan = function () {\n      return this._pan;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getPosition\n     * @return {Number} The position of the playhead in the sound, in milliseconds.\n     */\n    p.getPosition = function () {\n      if (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this._position = this._calculateCurrentPosition();\n      }\n      return this._position;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setPosition\n     * @param {Number} value The position to place the playhead, in milliseconds.\n     * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n     */\n    p.setPosition = function (value) {\n      this._position = Math.max(0, value);\n      if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this._updatePosition();\n      }\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getStartTime\n     * @return {Number} The startTime of the sound instance in milliseconds.\n     */\n    p.getStartTime = function () {\n      return this._startTime;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setStartTime\n     * @param {number} value The new startTime time in milli seconds.\n     * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n     */\n    p.setStartTime = function (value) {\n      if (value == this._startTime) {\n        return this;\n      }\n      this._startTime = Math.max(0, value || 0);\n      this._updateStartTime();\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getDuration\n     * @return {Number} The duration of the sound instance in milliseconds.\n     */\n    p.getDuration = function () {\n      return this._duration;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setDuration\n     * @param {number} value The new duration time in milli seconds.\n     * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n     * @since 0.6.0\n     */\n    p.setDuration = function (value) {\n      if (value == this._duration) {\n        return this;\n      }\n      this._duration = Math.max(0, value || 0);\n      this._updateDuration();\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setPlayback\n     * @param {Object} value The new playback resource.\n     * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n     * @since 0.6.0\n     **/\n    p.setPlaybackResource = function (value) {\n      this._playbackResource = value;\n      if (this._duration == 0) {\n        this._setDurationFromSource();\n      }\n      return this;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method setPlayback\n     * @param {Object} value The new playback resource.\n     * @return {Object} playback resource used for playing audio\n     * @since 0.6.0\n     **/\n    p.getPlaybackResource = function () {\n      return this._playbackResource;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n     *\n     * @deprecated\n     * @method getLoop\n     * @return {number}\n     * @since 0.6.0\n     **/\n    p.getLoop = function () {\n      return this._loop;\n    };\n\n    /**\n     * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property,\n     *\n     * @deprecated\n     * @method setLoop\n     * @param {number} value The number of times to loop after play.\n     * @since 0.6.0\n     */\n    p.setLoop = function (value) {\n      if (this._playbackResource != null) {\n        // remove looping\n        if (this._loop != 0 && value == 0) {\n          this._removeLooping(value);\n        }\n        // add looping\n        else if (this._loop == 0 && value != 0) {\n          this._addLooping(value);\n        }\n      }\n      this._loop = value;\n    };\n\n    // Private Methods:\n    /**\n     * A helper method that dispatches all events for AbstractSoundInstance.\n     * @method _sendEvent\n     * @param {String} type The event type\n     * @protected\n     */\n    p._sendEvent = function (type) {\n      var event = new createjs.Event(type);\n      this.dispatchEvent(event);\n    };\n\n    /**\n     * Clean up the instance. Remove references and clean up any additional properties such as timers.\n     * @method _cleanUp\n     * @protected\n     */\n    p._cleanUp = function () {\n      clearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\n      this._handleCleanUp();\n      this._paused = false;\n      createjs.Sound._playFinished(this); // TODO change to an event\n    };\n\n    /**\n     * The sound has been interrupted.\n     * @method _interrupt\n     * @protected\n     */\n    p._interrupt = function () {\n      this._cleanUp();\n      this.playState = createjs.Sound.PLAY_INTERRUPTED;\n      this._sendEvent(\"interrupted\");\n    };\n\n    /**\n     * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\n     * src is loaded, otherwise playback will fail.\n     * @method _beginPlaying\n     * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n     * @return {Boolean} If playback succeeded.\n     * @protected\n     */\n    // OJR FlashAudioSoundInstance overwrites\n    p._beginPlaying = function (playProps) {\n      this.setPosition(playProps.offset);\n      this.setLoop(playProps.loop);\n      this.setVolume(playProps.volume);\n      this.setPan(playProps.pan);\n      if (playProps.startTime != null) {\n        this.setStartTime(playProps.startTime);\n        this.setDuration(playProps.duration);\n      }\n      if (this._playbackResource != null && this._position < this._duration) {\n        this._paused = false;\n        this._handleSoundReady();\n        this.playState = createjs.Sound.PLAY_SUCCEEDED;\n        this._sendEvent(\"succeeded\");\n        return true;\n      } else {\n        this._playFailed();\n        return false;\n      }\n    };\n\n    /**\n     * Play has failed, which can happen for a variety of reasons.\n     * Cleans up instance and dispatches failed event\n     * @method _playFailed\n     * @private\n     */\n    p._playFailed = function () {\n      this._cleanUp();\n      this.playState = createjs.Sound.PLAY_FAILED;\n      this._sendEvent(\"failed\");\n    };\n\n    /**\n     * Audio has finished playing. Manually loop it if required.\n     * @method _handleSoundComplete\n     * @param event\n     * @protected\n     */\n    p._handleSoundComplete = function (event) {\n      this._position = 0; // have to set this as it can be set by pause during playback\n\n      if (this._loop != 0) {\n        this._loop--; // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\n        this._handleLoop();\n        this._sendEvent(\"loop\");\n        return;\n      }\n      this._cleanUp();\n      this.playState = createjs.Sound.PLAY_FINISHED;\n      this._sendEvent(\"complete\");\n    };\n\n    // Plugin specific code\n    /**\n     * Handles starting playback when the sound is ready for playing.\n     * @method _handleSoundReady\n     * @protected\n    \t */\n    p._handleSoundReady = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\n     * and master mute value.\n     * @method _updateVolume\n     * @protected\n     */\n    p._updateVolume = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function used to update the pan\n     * @method _updatePan\n     * @protected\n     * @since 0.6.0\n     */\n    p._updatePan = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function used to update the startTime of the audio.\n     * @method _updateStartTime\n     * @protected\n     * @since 0.6.1\n     */\n    p._updateStartTime = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function used to update the duration of the audio.\n     * @method _updateDuration\n     * @protected\n     * @since 0.6.0\n     */\n    p._updateDuration = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function used to get the duration of the audio from the source we'll be playing.\n     * @method _updateDuration\n     * @protected\n     * @since 0.6.0\n     */\n    p._setDurationFromSource = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function that calculates the current position of the playhead and sets this._position to that value\n     * @method _calculateCurrentPosition\n     * @protected\n     * @since 0.6.0\n     */\n    p._calculateCurrentPosition = function () {\n      // plugin specific code that sets this.position\n    };\n\n    /**\n     * Internal function used to update the position of the playhead.\n     * @method _updatePosition\n     * @protected\n     * @since 0.6.0\n     */\n    p._updatePosition = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when looping is removed during playback.\n     * @method _removeLooping\n     * @param {number} value The number of times to loop after play.\n     * @protected\n     * @since 0.6.0\n     */\n    p._removeLooping = function (value) {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when looping is added during playback.\n     * @method _addLooping\n     * @param {number} value The number of times to loop after play.\n     * @protected\n     * @since 0.6.0\n     */\n    p._addLooping = function (value) {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when pausing playback\n     * @method _pause\n     * @protected\n     * @since 0.6.0\n     */\n    p._pause = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when resuming playback\n     * @method _resume\n     * @protected\n     * @since 0.6.0\n     */\n    p._resume = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when stopping playback\n     * @method _handleStop\n     * @protected\n     * @since 0.6.0\n     */\n    p._handleStop = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when AbstractSoundInstance is being cleaned up\n     * @method _handleCleanUp\n     * @protected\n     * @since 0.6.0\n     */\n    p._handleCleanUp = function () {\n      // plugin specific code\n    };\n\n    /**\n     * Internal function called when AbstractSoundInstance has played to end and is looping\n     * @method _handleLoop\n     * @protected\n     * @since 0.6.0\n     */\n    p._handleLoop = function () {\n      // plugin specific code\n    };\n    createjs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\n    createjs.DefaultSoundInstance = createjs.AbstractSoundInstance; // used when no plugin is supported\n  })();\n\n  //##############################################################################\n  // AbstractPlugin.js\n  //##############################################################################\n\n  (function () {\n    // constructor:\n    /**\n    * A default plugin class used as a base for all other plugins.\n    * @class AbstractPlugin\n    * @constructor\n    * @since 0.6.0\n    */\n\n    var AbstractPlugin = function () {\n      // private properties:\n      /**\n       * The capabilities of the plugin.\n       * method and is used internally.\n       * @property _capabilities\n       * @type {Object}\n       * @default null\n       * @protected\n       * @static\n       */\n      this._capabilities = null;\n\n      /**\n       * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\n       * @type {Object}\n       * @protected\n       */\n      this._loaders = {};\n\n      /**\n       * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\n       * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\n       * is complete (for example arrayBuffers for web audio).\n       * @property _audioSources\n       * @type {Object}\n       * @protected\n       */\n      this._audioSources = {};\n\n      /**\n       * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\n       * and properly destroy them if sources are removed\n       * @type {Object}\n       * @protected\n       */\n      this._soundInstances = {};\n\n      /**\n       * The internal master volume value of the plugin.\n       * @property _volume\n       * @type {Number}\n       * @default 1\n       * @protected\n       */\n      this._volume = 1;\n\n      /**\n       * A reference to a loader class used by a plugin that must be set.\n       * @type {Object}\n       * @protected\n       */\n      this._loaderClass;\n\n      /**\n       * A reference to an AbstractSoundInstance class used by a plugin that must be set.\n       * @type {Object}\n       * @protected;\n       */\n      this._soundInstanceClass;\n    };\n    var p = AbstractPlugin.prototype;\n\n    /**\n     * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n     * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n     * for details.\n     *\n     * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n     *\n     * @method initialize\n     * @protected\n     * @deprecated\n     */\n    // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n    // Static Properties:\n    // NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\n    /**\n     * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\n     * @property _capabilities\n     * @type {Object}\n     * @default null\n     * @protected\n     * @static\n     */\n    AbstractPlugin._capabilities = null;\n\n    /**\n     * Determine if the plugin can be used in the current browser/OS.\n     * @method isSupported\n     * @return {Boolean} If the plugin can be initialized.\n     * @static\n     */\n    AbstractPlugin.isSupported = function () {\n      return true;\n    };\n\n    // public methods:\n    /**\n     * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\n     * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\n     * can use to assist with preloading.\n     * @method register\n     * @param {String} loadItem An Object containing the source of the audio\n     * Note that not every plugin will manage this value.\n     * @return {Object} A result object, containing a \"tag\" for preloading purposes.\n     */\n    p.register = function (loadItem) {\n      var loader = this._loaders[loadItem.src];\n      if (loader && !loader.canceled) {\n        return this._loaders[loadItem.src];\n      } // already loading/loaded this, so don't load twice\n      // OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\n      this._audioSources[loadItem.src] = true;\n      this._soundInstances[loadItem.src] = [];\n      loader = new this._loaderClass(loadItem);\n      loader.on(\"complete\", this._handlePreloadComplete, this);\n      this._loaders[loadItem.src] = loader;\n      return loader;\n    };\n\n    // note sound calls register before calling preload\n    /**\n     * Internally preload a sound.\n     * @method preload\n     * @param {Loader} loader The sound URI to load.\n     */\n    p.preload = function (loader) {\n      loader.on(\"error\", this._handlePreloadError, this);\n      loader.load();\n    };\n\n    /**\n     * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\n     * or has already finished loading.\n     * @method isPreloadStarted\n     * @param {String} src The sound URI to check.\n     * @return {Boolean}\n     */\n    p.isPreloadStarted = function (src) {\n      return this._audioSources[src] != null;\n    };\n\n    /**\n     * Checks if preloading has finished for a specific source.\n     * @method isPreloadComplete\n     * @param {String} src The sound URI to load.\n     * @return {Boolean}\n     */\n    p.isPreloadComplete = function (src) {\n      return !(this._audioSources[src] == null || this._audioSources[src] == true);\n    };\n\n    /**\n     * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n     * @method removeSound\n     * @param {String} src The sound URI to unload.\n     */\n    p.removeSound = function (src) {\n      if (!this._soundInstances[src]) {\n        return;\n      }\n      for (var i = this._soundInstances[src].length; i--;) {\n        var item = this._soundInstances[src][i];\n        item.destroy();\n      }\n      delete this._soundInstances[src];\n      delete this._audioSources[src];\n      if (this._loaders[src]) {\n        this._loaders[src].destroy();\n      }\n      delete this._loaders[src];\n    };\n\n    /**\n     * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n     * @method removeAllSounds\n     * @param {String} src The sound URI to unload.\n     */\n    p.removeAllSounds = function () {\n      for (var key in this._audioSources) {\n        this.removeSound(key);\n      }\n    };\n\n    /**\n     * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\n     * @method create\n     * @param {String} src The sound source to use.\n     * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n     * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n     * @return {AbstractSoundInstance} A sound instance for playback and control.\n     */\n    p.create = function (src, startTime, duration) {\n      if (!this.isPreloadStarted(src)) {\n        this.preload(this.register(src));\n      }\n      var si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\n      this._soundInstances[src].push(si);\n      return si;\n    };\n\n    // if a plugin does not support volume and mute, it should set these to null\n    /**\n     * Set the master volume of the plugin, which affects all SoundInstances.\n     * @method setVolume\n     * @param {Number} value The volume to set, between 0 and 1.\n     * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\n     * instances manually otherwise.\n     */\n    p.setVolume = function (value) {\n      this._volume = value;\n      this._updateVolume();\n      return true;\n    };\n\n    /**\n     * Get the master volume of the plugin, which affects all SoundInstances.\n     * @method getVolume\n     * @return {Number} The volume level, between 0 and 1.\n     */\n    p.getVolume = function () {\n      return this._volume;\n    };\n\n    /**\n     * Mute all sounds via the plugin.\n     * @method setMute\n     * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\n     * the mute value of Sound {{#crossLink \"Sound/getMute\"}}{{/crossLink}}, so this property is not used here.\n     * @return {Boolean} If the mute call succeeds.\n     */\n    p.setMute = function (value) {\n      this._updateVolume();\n      return true;\n    };\n\n    // plugins should overwrite this method\n    p.toString = function () {\n      return \"[AbstractPlugin]\";\n    };\n\n    // private methods:\n    /**\n     * Handles internal preload completion.\n     * @method _handlePreloadComplete\n     * @protected\n     */\n    p._handlePreloadComplete = function (event) {\n      var src = event.target.getItem().src;\n      this._audioSources[src] = event.result;\n      for (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\n        var item = this._soundInstances[src][i];\n        item.setPlaybackResource(this._audioSources[src]);\n        // ToDo consider adding play call here if playstate == playfailed\n      }\n    };\n\n    /**\n     * Handles internal preload erros\n     * @method _handlePreloadError\n     * @param event\n     * @protected\n     */\n    p._handlePreloadError = function (event) {\n      //delete(this._audioSources[src]);\n    };\n\n    /**\n     * Set the gain value for master audio. Should not be called externally.\n     * @method _updateVolume\n     * @protected\n     */\n    p._updateVolume = function () {\n      // Plugin Specific code\n    };\n    createjs.AbstractPlugin = AbstractPlugin;\n  })();\n\n  //##############################################################################\n  // WebAudioLoader.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\n     * the preloader, and the load method is called when the asset needs to be requested.\n     *\n     * @class WebAudioLoader\n     * @param {String} loadItem The item to be loaded\n     * @extends XHRRequest\n     * @protected\n     */\n    function Loader(loadItem) {\n      this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.SOUND);\n    }\n    var p = createjs.extend(Loader, createjs.AbstractLoader);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    /**\n     * web audio context required for decoding audio\n     * @property context\n     * @type {AudioContext}\n     * @static\n     */\n    Loader.context = null;\n\n    // public methods\n    p.toString = function () {\n      return \"[WebAudioLoader]\";\n    };\n\n    // private methods\n    p._createRequest = function () {\n      this._request = new createjs.XHRRequest(this._item, false);\n      this._request.setResponseType(\"arraybuffer\");\n    };\n    p._sendComplete = function (event) {\n      // OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\n      Loader.context.decodeAudioData(this._rawResult, createjs.proxy(this._handleAudioDecoded, this), createjs.proxy(this._sendError, this));\n    };\n\n    /**\n    * The audio has been decoded.\n    * @method handleAudioDecoded\n    * @param decoded\n    * @protected\n    */\n    p._handleAudioDecoded = function (decodedAudio) {\n      this._result = decodedAudio;\n      this.AbstractLoader__sendComplete();\n    };\n    createjs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\n  })();\n\n  //##############################################################################\n  // WebAudioSoundInstance.js\n  //##############################################################################\n\n  /**\n   * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n   * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n   *\n   * WebAudioSoundInstance exposes audioNodes for advanced users.\n   *\n   * @param {String} src The path to and file name of the sound.\n   * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n   * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n   * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n   * @class WebAudioSoundInstance\n   * @extends AbstractSoundInstance\n   * @constructor\n   */\n  (function () {\n    function WebAudioSoundInstance(src, startTime, duration, playbackResource) {\n      this.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n      // public properties\n      /**\n       * NOTE this is only intended for use by advanced users.\n       * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\n       * @property gainNode\n       * @type {AudioGainNode}\n       * @since 0.4.0\n       *\n       */\n      this.gainNode = s.context.createGain();\n\n      /**\n       * NOTE this is only intended for use by advanced users.\n       * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n       * @property panNode\n       * @type {AudioPannerNode}\n       * @since 0.4.0\n       */\n      this.panNode = s.context.createPanner();\n      this.panNode.panningModel = s._panningModel;\n      this.panNode.connect(this.gainNode);\n      this._updatePan();\n\n      /**\n       * NOTE this is only intended for use by advanced users.\n       * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\n       * @property sourceNode\n       * @type {AudioNode}\n       * @since 0.4.0\n       *\n       */\n      this.sourceNode = null;\n\n      // private properties\n      /**\n       * Timeout that is created internally to handle sound playing to completion.\n       * Stored so we can remove it when stop, pause, or cleanup are called\n       * @property _soundCompleteTimeout\n       * @type {timeoutVariable}\n       * @default null\n       * @protected\n       * @since 0.4.0\n       */\n      this._soundCompleteTimeout = null;\n\n      /**\n       * NOTE this is only intended for use by very advanced users.\n       * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\n       * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n       * @property _sourceNodeNext\n       * @type {AudioNode}\n       * @default null\n       * @protected\n       * @since 0.4.1\n       *\n       */\n      this._sourceNodeNext = null;\n\n      /**\n       * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\n       * @property _playbackStartTime\n       * @type {Number}\n       * @default 0\n       * @protected\n       * @since 0.4.0\n       */\n      this._playbackStartTime = 0;\n\n      // Proxies, make removing listeners easier.\n      this._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n    }\n    var p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\n    var s = WebAudioSoundInstance;\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    /**\n     * Note this is only intended for use by advanced users.\n     * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n     \t * @property context\n     * @type {AudioContext}\n     * @static\n     * @since 0.6.0\n     */\n    s.context = null;\n\n    /**\n     * Note this is only intended for use by advanced users.\n     * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \n     * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n     \t * @property _scratchBuffer\n     * @type {AudioBufferSourceNode}\n     * @static\n     */\n    s._scratchBuffer = null;\n\n    /**\n     * Note this is only intended for use by advanced users.\n     * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\n     * @property destinationNode\n     * @type {AudioNode}\n     * @static\n     * @since 0.6.0\n     */\n    s.destinationNode = null;\n\n    /**\n     * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n     * @property _panningModel\n     * @type {Number / String}\n     * @protected\n     * @static\n     * @since 0.6.0\n     */\n    s._panningModel = \"equalpower\";\n\n    // Public methods\n    p.destroy = function () {\n      this.AbstractSoundInstance_destroy();\n      this.panNode.disconnect(0);\n      this.panNode = null;\n      this.gainNode.disconnect(0);\n      this.gainNode = null;\n    };\n    p.toString = function () {\n      return \"[WebAudioSoundInstance]\";\n    };\n\n    // Private Methods\n    p._updatePan = function () {\n      this.panNode.setPosition(this._pan, 0, -0.5);\n      // z need to be -0.5 otherwise the sound only plays in left, right, or center\n    };\n    p._removeLooping = function (value) {\n      this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n    };\n    p._addLooping = function (value) {\n      if (this.playState != createjs.Sound.PLAY_SUCCEEDED) {\n        return;\n      }\n      this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n    };\n    p._setDurationFromSource = function () {\n      this._duration = this.playbackResource.duration * 1000;\n    };\n    p._handleCleanUp = function () {\n      if (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n        this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n      }\n      if (this.gainNode.numberOfOutputs != 0) {\n        this.gainNode.disconnect(0);\n      }\n      // OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\n\n      clearTimeout(this._soundCompleteTimeout);\n      this._playbackStartTime = 0; // This is used by getPosition\n    };\n\n    /**\n     * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\n     * @method _cleanUpAudioNode\n     * @param audioNode\n     * @return {audioNode}\n     * @protected\n     * @since 0.4.1\n     */\n    p._cleanUpAudioNode = function (audioNode) {\n      if (audioNode) {\n        audioNode.stop(0);\n        audioNode.disconnect(0);\n        // necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\n        // browser implementations.\n        try {\n          audioNode.buffer = s._scratchBuffer;\n        } catch (e) {}\n        audioNode = null;\n      }\n      return audioNode;\n    };\n    p._handleSoundReady = function (event) {\n      this.gainNode.connect(s.destinationNode); // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\n\n      var dur = this._duration * 0.001;\n      var pos = this._position * 0.001;\n      if (pos > dur) {\n        pos = dur;\n      }\n      this.sourceNode = this._createAndPlayAudioNode(s.context.currentTime - dur, pos);\n      this._playbackStartTime = this.sourceNode.startTime - pos;\n      this._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\n      if (this._loop != 0) {\n        this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n      }\n    };\n\n    /**\n     * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\n     * @method _createAndPlayAudioNode\n     * @param {Number} startTime The time to add this to the web audio context, in seconds.\n     * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\n     * @return {audioNode}\n     * @protected\n     * @since 0.4.1\n     */\n    p._createAndPlayAudioNode = function (startTime, offset) {\n      var audioNode = s.context.createBufferSource();\n      audioNode.buffer = this.playbackResource;\n      audioNode.connect(this.panNode);\n      var dur = this._duration * 0.001;\n      audioNode.startTime = startTime + dur;\n      audioNode.start(audioNode.startTime, offset + this._startTime * 0.001, dur - offset);\n      return audioNode;\n    };\n    p._pause = function () {\n      this._position = (s.context.currentTime - this._playbackStartTime) * 1000; // * 1000 to give milliseconds, lets us restart at same point\n      this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n      this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n      if (this.gainNode.numberOfOutputs != 0) {\n        this.gainNode.disconnect(0);\n      }\n      clearTimeout(this._soundCompleteTimeout);\n    };\n    p._resume = function () {\n      this._handleSoundReady();\n    };\n\n    /*\n    p._handleStop = function () {\n    \t// web audio does not need to do anything extra\n    };\n    */\n\n    p._updateVolume = function () {\n      var newVolume = this._muted ? 0 : this._volume;\n      if (newVolume != this.gainNode.gain.value) {\n        this.gainNode.gain.value = newVolume;\n      }\n    };\n    p._calculateCurrentPosition = function () {\n      return (s.context.currentTime - this._playbackStartTime) * 1000; // pos in seconds * 1000 to give milliseconds\n    };\n    p._updatePosition = function () {\n      this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n      this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n      clearTimeout(this._soundCompleteTimeout);\n      if (!this._paused) {\n        this._handleSoundReady();\n      }\n    };\n\n    // OJR we are using a look ahead approach to ensure smooth looping.\n    // We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\n    // This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\n    // NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\n    p._handleLoop = function () {\n      this._cleanUpAudioNode(this.sourceNode);\n      this.sourceNode = this._sourceNodeNext;\n      this._playbackStartTime = this.sourceNode.startTime;\n      this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n      this._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\n    };\n    p._updateDuration = function () {\n      if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this._pause();\n        this._resume();\n      }\n    };\n    createjs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\n  })();\n\n  //##############################################################################\n  // WebAudioPlugin.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\n     * anywhere that it is supported. To change plugin priority, check out the Sound API\n     * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\n    \t * <h4>Known Browser and OS issues for Web Audio</h4>\n     * <b>Firefox 25</b>\n     * <li>\n     *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\n     *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\n     *     extension, until this bug is resolved\n     * </li>\n     *\n     * <b>Webkit (Chrome and Safari)</b>\n     * <li>\n     *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\n     * \t   are playing a lot of audio files.\n     * </li>\n     *\n     * <b>iOS 6 limitations</b>\n     * <ul>\n     *     <li>\n     *         Sound is initially muted and will only unmute through play being called inside a user initiated event\n     *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\n     *         class for a full overview of the limitations, and how to get around them.\n     *     </li>\n     *\t   <li>\n     *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\n     *\t       this bug by ensuring the audio and video audio share the same sample rate.\n     *\t   </li>\n     * </ul>\n     * @class WebAudioPlugin\n     * @extends AbstractPlugin\n     * @constructor\n     * @since 0.4.0\n     */\n    function WebAudioPlugin() {\n      this.AbstractPlugin_constructor();\n\n      // Private Properties\n      /**\n       * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n       * @property _panningModel\n       * @type {Number / String}\n       * @protected\n       */\n      this._panningModel = s._panningModel;\n      /**\n       * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n       * need to be created within this context.\n       * @property context\n       * @type {AudioContext}\n       */\n      this.context = s.context;\n\n      /**\n       * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\n       * It is connected to <code>context.destination</code>.\n       *\n       * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\n       * @property dynamicsCompressorNode\n       * @type {AudioNode}\n       */\n      this.dynamicsCompressorNode = this.context.createDynamicsCompressor();\n      this.dynamicsCompressorNode.connect(this.context.destination);\n\n      /**\n       * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\n       *\n       * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\n       * @property gainNode\n       * @type {AudioGainNode}\n       */\n      this.gainNode = this.context.createGain();\n      this.gainNode.connect(this.dynamicsCompressorNode);\n      createjs.WebAudioSoundInstance.destinationNode = this.gainNode;\n      this._capabilities = s._capabilities;\n      this._loaderClass = createjs.WebAudioLoader;\n      this._soundInstanceClass = createjs.WebAudioSoundInstance;\n      this._addPropsToClasses();\n    }\n    var p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // Static Properties\n    var s = WebAudioPlugin;\n    /**\n     * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\n     * method and is used internally.\n     * @property _capabilities\n     * @type {Object}\n     * @default null\n     * @protected\n     * @static\n     */\n    s._capabilities = null;\n\n    /**\n     * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n     * @property _panningModel\n     * @type {Number / String}\n     * @protected\n     * @static\n     */\n    s._panningModel = \"equalpower\";\n\n    /**\n     * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n     * need to be created within this context.\n     *\n     * Advanced users can set this to an existing context, but <b>must</b> do so before they call\n     * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n     *\n     * @property context\n     * @type {AudioContext}\n     * @static\n     */\n    s.context = null;\n\n    /**\n     * The scratch buffer that will be assigned to the buffer property of a source node on close.\n     * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\n     *\n     * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\n     * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n     *\n     * @property _scratchBuffer\n     * @type {AudioBuffer}\n     * @protected\n     * @static\n     */\n    s._scratchBuffer = null;\n\n    /**\n     * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n     * empty sound.\n     * @property _unlocked\n     * @type {boolean}\n     * @since 0.6.2\n     * @private\n     */\n    s._unlocked = false;\n\n    // Static Public Methods\n    /**\n     * Determine if the plugin can be used in the current browser/OS.\n     * @method isSupported\n     * @return {Boolean} If the plugin can be initialized.\n     * @static\n     */\n    s.isSupported = function () {\n      // check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\n      var isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\n      // OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\n      if (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) {\n        return false;\n      } // Web Audio requires XHR, which is not usually available locally\n      s._generateCapabilities();\n      if (s.context == null) {\n        return false;\n      }\n      return true;\n    };\n\n    /**\n     * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n     * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\n     * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\n     * for example).\n     *\n     * <h4>Example</h4>\n     *\n     *     function handleTouch(event) {\n     *         createjs.WebAudioPlugin.playEmptySound();\n     *     }\n     *\n     * @method playEmptySound\n     * @static\n     * @since 0.4.1\n     */\n    s.playEmptySound = function () {\n      if (s.context == null) {\n        return;\n      }\n      var source = s.context.createBufferSource();\n      source.buffer = s._scratchBuffer;\n      source.connect(s.context.destination);\n      source.start(0, 0, 0);\n    };\n\n    // Static Private Methods\n    /**\n     * Determine if XHR is supported, which is necessary for web audio.\n     * @method _isFileXHRSupported\n     * @return {Boolean} If XHR is supported.\n     * @since 0.4.2\n     * @protected\n     * @static\n     */\n    s._isFileXHRSupported = function () {\n      // it's much easier to detect when something goes wrong, so let's start optimistically\n      var supported = true;\n      var xhr = new XMLHttpRequest();\n      try {\n        xhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\n      } catch (error) {\n        // catch errors in cases where the onerror is passed by\n        supported = false;\n        return supported;\n      }\n      xhr.onerror = function () {\n        supported = false;\n      }; // cause irrelevant\n      // with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\n      xhr.onload = function () {\n        supported = this.status == 404 || this.status == 200 || this.status == 0 && this.response != \"\";\n      };\n      try {\n        xhr.send();\n      } catch (error$1) {\n        // catch errors in cases where the onerror is passed by\n        supported = false;\n      }\n      return supported;\n    };\n\n    /**\n     * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n     * method for an overview of plugin capabilities.\n     * @method _generateCapabilities\n     * @static\n     * @protected\n     */\n    s._generateCapabilities = function () {\n      if (s._capabilities != null) {\n        return;\n      }\n      // Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\n      var t = document.createElement(\"audio\");\n      if (t.canPlayType == null) {\n        return null;\n      }\n      if (s.context == null) {\n        if (window.AudioContext) {\n          s.context = new AudioContext();\n        } else if (window.webkitAudioContext) {\n          s.context = new webkitAudioContext();\n        } else {\n          return null;\n        }\n      }\n      if (s._scratchBuffer == null) {\n        s._scratchBuffer = s.context.createBuffer(1, 1, 22050);\n      }\n      s._compatibilitySetUp();\n\n      // Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\n      if (\"ontouchstart\" in window && s.context.state != \"running\") {\n        s._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n        document.addEventListener(\"mousedown\", s._unlock, true);\n        document.addEventListener(\"touchend\", s._unlock, true);\n      }\n      s._capabilities = {\n        panning: true,\n        volume: true,\n        tracks: -1\n      };\n\n      // determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n      var supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n      var extensionMap = createjs.Sound.EXTENSION_MAP;\n      for (var i = 0, l = supportedExtensions.length; i < l; i++) {\n        var ext = supportedExtensions[i];\n        var playType = extensionMap[ext] || ext;\n        s._capabilities[ext] = t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\" || t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\";\n      } // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\n      // 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\n      // See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\n      if (s.context.destination.numberOfChannels < 2) {\n        s._capabilities.panning = false;\n      }\n    };\n\n    /**\n     * Set up compatibility if only deprecated web audio calls are supported.\n     * See http://www.w3.org/TR/webaudio/#DeprecationNotes\n     * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\n     * don't support new calls.\n     *\n     * @method _compatibilitySetUp\n     * @static\n     * @protected\n     * @since 0.4.2\n     */\n    s._compatibilitySetUp = function () {\n      s._panningModel = \"equalpower\";\n      //assume that if one new call is supported, they all are\n      if (s.context.createGain) {\n        return;\n      }\n\n      // simple name change, functionality the same\n      s.context.createGain = s.context.createGainNode;\n\n      // source node, add to prototype\n      var audioNode = s.context.createBufferSource();\n      audioNode.__proto__.start = audioNode.__proto__.noteGrainOn; // note that noteGrainOn requires all 3 parameters\n      audioNode.__proto__.stop = audioNode.__proto__.noteOff;\n\n      // panningModel\n      s._panningModel = 0;\n    };\n\n    /**\n     * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n     * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n     * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n     *\n     * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n     * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n     * stick with `mousedown` and `touchend`.\n     * @method _unlock\n     * @since 0.6.2\n     * @private\n     */\n    s._unlock = function () {\n      if (s._unlocked) {\n        return;\n      }\n      s.playEmptySound();\n      if (s.context.state == \"running\") {\n        document.removeEventListener(\"mousedown\", s._unlock, true);\n        document.removeEventListener(\"touchend\", s._unlock, true);\n        s._unlocked = true;\n      }\n    };\n\n    // Public Methods\n    p.toString = function () {\n      return \"[WebAudioPlugin]\";\n    };\n\n    // Private Methods\n    /**\n     * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\n     * @method _addPropsToClasses\n     * @static\n     * @protected\n     * @since 0.6.0\n     */\n    p._addPropsToClasses = function () {\n      var c = this._soundInstanceClass;\n      c.context = this.context;\n      c._scratchBuffer = s._scratchBuffer;\n      c.destinationNode = this.gainNode;\n      c._panningModel = this._panningModel;\n      this._loaderClass.context = this.context;\n    };\n\n    /**\n     * Set the gain value for master audio. Should not be called externally.\n     * @method _updateVolume\n     * @protected\n     */\n    p._updateVolume = function () {\n      var newVolume = createjs.Sound._masterMute ? 0 : this._volume;\n      if (newVolume != this.gainNode.gain.value) {\n        this.gainNode.gain.value = newVolume;\n      }\n    };\n    createjs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\n  })();\n\n  //##############################################################################\n  // HTMLAudioTagPool.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\n     * @class HTMLAudioTagPool\n     * @param {String} src The source of the channel.\n     * @protected\n     */\n    function HTMLAudioTagPool() {\n      throw \"HTMLAudioTagPool cannot be instantiated\";\n    }\n    var s = HTMLAudioTagPool;\n\n    // Static Properties\n    /**\n     * A hash lookup of each base audio tag, indexed by the audio source.\n     * @property _tags\n     * @type {{}}\n     * @static\n     * @protected\n     */\n    s._tags = {};\n\n    /**\n     * An object pool for html audio tags\n     * @property _tagPool\n     * @type {TagPool}\n     * @static\n     * @protected\n     */\n    s._tagPool = new TagPool();\n\n    /**\n     * A hash lookup of if a base audio tag is available, indexed by the audio source\n     * @property _tagsUsed\n     * @type {{}}\n     * @protected\n     * @static\n     */\n    s._tagUsed = {};\n\n    // Static Methods\n    /**\n      * Get an audio tag with the given source.\n      * @method get\n      * @param {String} src The source file used by the audio tag.\n      * @static\n      */\n    s.get = function (src) {\n      var t = s._tags[src];\n      if (t == null) {\n        // create new base tag\n        t = s._tags[src] = s._tagPool.get();\n        t.src = src;\n      } else {\n        // get base or pool\n        if (s._tagUsed[src]) {\n          t = s._tagPool.get();\n          t.src = src;\n        } else {\n          s._tagUsed[src] = true;\n        }\n      }\n      return t;\n    };\n\n    /**\n     * Return an audio tag to the pool.\n     * @method set\n     * @param {String} src The source file used by the audio tag.\n     * @param {HTMLElement} tag Audio tag to set.\n     * @static\n     */\n    s.set = function (src, tag) {\n      // check if this is base, if yes set boolean if not return to pool\n      if (tag == s._tags[src]) {\n        s._tagUsed[src] = false;\n      } else {\n        s._tagPool.set(tag);\n      }\n    };\n\n    /**\n     * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\n     * @method remove\n     * @param {String} src The source for the tag\n     * @return {Boolean} If the TagPool was deleted.\n     * @static\n     */\n    s.remove = function (src) {\n      var tag = s._tags[src];\n      if (tag == null) {\n        return false;\n      }\n      s._tagPool.set(tag);\n      delete s._tags[src];\n      delete s._tagUsed[src];\n      return true;\n    };\n\n    /**\n     * Gets the duration of the src audio in milliseconds\n     * @method getDuration\n     * @param {String} src The source file used by the audio tag.\n     * @return {Number} Duration of src in milliseconds\n     * @static\n     */\n    s.getDuration = function (src) {\n      var t = s._tags[src];\n      if (t == null || !t.duration) {\n        return 0;\n      } // OJR duration is NaN if loading has not completed\n      return t.duration * 1000;\n    };\n    createjs.HTMLAudioTagPool = HTMLAudioTagPool;\n\n    // ************************************************************************************************************\n    /**\n     * The TagPool is an object pool for HTMLAudio tag instances.\n     * #class TagPool\n     * @param {String} src The source of the channel.\n     * @protected\n     */\n    function TagPool(src) {\n      // Public Properties\n      /**\n       * A list of all available tags in the pool.\n       * #property tags\n       * @type {Array}\n       * @protected\n       */\n      this._tags = [];\n    }\n    var p = TagPool.prototype;\n    p.constructor = TagPool;\n\n    // Public Methods\n    /**\n     * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\n     * #method get\n     * @return {HTMLAudioElement} An HTML audio tag.\n     */\n    p.get = function () {\n      var tag;\n      if (this._tags.length == 0) {\n        tag = this._createTag();\n      } else {\n        tag = this._tags.pop();\n      }\n      if (tag.parentNode == null) {\n        document.body.appendChild(tag);\n      }\n      return tag;\n    };\n\n    /**\n     * Put an HTMLAudioElement back in the pool for use.\n     * #method set\n     * @param {HTMLAudioElement} tag HTML audio tag\n     */\n    p.set = function (tag) {\n      // OJR this first step seems unnecessary\n      var index = createjs.indexOf(this._tags, tag);\n      if (index == -1) {\n        this._tags.src = null;\n        this._tags.push(tag);\n      }\n    };\n    p.toString = function () {\n      return \"[TagPool]\";\n    };\n\n    // Private Methods\n    /**\n     * Create an HTML audio tag.\n     * #method _createTag\n     * @param {String} src The source file to set for the audio tag.\n     * @return {HTMLElement} Returns an HTML audio tag.\n     * @protected\n     */\n    p._createTag = function () {\n      var tag = document.createElement(\"audio\");\n      tag.autoplay = false;\n      tag.preload = \"none\";\n      //LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n      return tag;\n    };\n  })();\n\n  //##############################################################################\n  // HTMLAudioSoundInstance.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n     * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n     *\n     * @param {String} src The path to and file name of the sound.\n     * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n     * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n     * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n     * @class HTMLAudioSoundInstance\n     * @extends AbstractSoundInstance\n     * @constructor\n     */\n    function HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\n      this.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n      // Private Properties\n      this._audioSpriteStopTime = null;\n      this._delayTimeoutId = null;\n\n      // Proxies, make removing listeners easier.\n      this._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n      this._readyHandler = createjs.proxy(this._handleTagReady, this);\n      this._stalledHandler = createjs.proxy(this._playFailed, this);\n      this._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\n      this._loopHandler = createjs.proxy(this._handleSoundComplete, this);\n      if (duration) {\n        this._audioSpriteStopTime = (startTime + duration) * 0.001;\n      } else {\n        this._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n      }\n    }\n    var p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // Public Methods\n    /**\n     * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\n     * undoc'd because it is not meant to be used outside of Sound\n     * #method setMasterVolume\n     * @param value\n     */\n    p.setMasterVolume = function (value) {\n      this._updateVolume();\n    };\n\n    /**\n     * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\n     * undoc'd because it is not meant to be used outside of Sound\n     * #method setMasterMute\n     * @param value\n     */\n    p.setMasterMute = function (isMuted) {\n      this._updateVolume();\n    };\n    p.toString = function () {\n      return \"[HTMLAudioSoundInstance]\";\n    };\n\n    //Private Methods\n    p._removeLooping = function () {\n      if (this._playbackResource == null) {\n        return;\n      }\n      this._playbackResource.loop = false;\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n    };\n    p._addLooping = function () {\n      if (this._playbackResource == null || this._audioSpriteStopTime) {\n        return;\n      }\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n      this._playbackResource.loop = true;\n    };\n    p._handleCleanUp = function () {\n      var tag = this._playbackResource;\n      if (tag != null) {\n        tag.pause();\n        tag.loop = false;\n        tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n        tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n        tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n        tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n        tag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n        try {\n          tag.currentTime = this._startTime;\n        } catch (e) {} // Reset Position\n        createjs.HTMLAudioTagPool.set(this.src, tag);\n        this._playbackResource = null;\n      }\n    };\n    p._beginPlaying = function (playProps) {\n      this._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\n      return this.AbstractSoundInstance__beginPlaying(playProps);\n    };\n    p._handleSoundReady = function (event) {\n      if (this._playbackResource.readyState !== 4) {\n        var tag = this._playbackResource;\n        tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n        tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n        tag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\n        tag.load();\n        return;\n      }\n      this._updateVolume();\n      this._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\n      if (this._audioSpriteStopTime) {\n        this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n      } else {\n        this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n        if (this._loop != 0) {\n          this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n          this._playbackResource.loop = true;\n        }\n      }\n      this._playbackResource.play();\n    };\n\n    /**\n     * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\n     * @method _handleTagReady\n     * @param event\n     * @protected\n     */\n    p._handleTagReady = function (event) {\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n      this._handleSoundReady();\n    };\n    p._pause = function () {\n      this._playbackResource.pause();\n    };\n    p._resume = function () {\n      this._playbackResource.play();\n    };\n    p._updateVolume = function () {\n      if (this._playbackResource != null) {\n        var newVolume = this._muted || createjs.Sound._masterMute ? 0 : this._volume * createjs.Sound._masterVolume;\n        if (newVolume != this._playbackResource.volume) {\n          this._playbackResource.volume = newVolume;\n        }\n      }\n    };\n    p._calculateCurrentPosition = function () {\n      return this._playbackResource.currentTime * 1000 - this._startTime;\n    };\n    p._updatePosition = function () {\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n      try {\n        this._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\n      } catch (error) {\n        // Out of range\n        this._handleSetPositionSeek(null);\n      }\n    };\n\n    /**\n     * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\n     * @method _handleSetPositionSeek\n     * @param event\n     * @protected\n     */\n    p._handleSetPositionSeek = function (event) {\n      if (this._playbackResource == null) {\n        return;\n      }\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n    };\n\n    /**\n     * Timer used to loop audio sprites.\n     * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\n     * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\n     *\n     * @method _handleAudioSpriteLoop\n     * @param event\n     * @private\n     */\n    p._handleAudioSpriteLoop = function (event) {\n      if (this._playbackResource.currentTime <= this._audioSpriteStopTime) {\n        return;\n      }\n      this._playbackResource.pause();\n      if (this._loop == 0) {\n        this._handleSoundComplete(null);\n      } else {\n        this._position = 0;\n        this._loop--;\n        this._playbackResource.currentTime = this._startTime * 0.001;\n        if (!this._paused) {\n          this._playbackResource.play();\n        }\n        this._sendEvent(\"loop\");\n      }\n    };\n\n    // NOTE with this approach audio will loop as reliably as the browser allows\n    // but we could end up sending the loop event after next loop playback begins\n    p._handleLoop = function (event) {\n      if (this._loop == 0) {\n        this._playbackResource.loop = false;\n        this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n      }\n    };\n    p._updateStartTime = function () {\n      this._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n      if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n        this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n      }\n    };\n    p._updateDuration = function () {\n      this._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n      if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n        this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n        this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n      }\n    };\n    p._setDurationFromSource = function () {\n      this._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n      this._playbackResource = null;\n    };\n    createjs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\n  })();\n\n  //##############################################################################\n  // HTMLAudioPlugin.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\n     * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\n     * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n     *\n     * <h4>Known Browser and OS issues for HTML Audio</h4>\n     * <b>All browsers</b><br />\n     * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\n     * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\n     * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\n     *\n        * <b>IE html limitations</b><br />\n        * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n        * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n        * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n        * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\n        * 64kbps works.</li>\n     * <li>Occasionally very short samples will get cut off.</li>\n     * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\n     * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\n     * Note that audio sprites can be used as a solution to this issue.</li></ul>\n     *\n     * <b>Safari limitations</b><br />\n     * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n     *\n     * <b>iOS 6 limitations</b><br />\n     * <ul><li>can only have one &lt;audio&gt; tag</li>\n     * \t\t<li>can not preload or autoplay the audio</li>\n     * \t\t<li>can not cache the audio</li>\n     * \t\t<li>can not play the audio except inside a user initiated event.</li>\n     *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\n     * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\n     * </ul>\n     *\n     * <b>Android Native Browser limitations</b><br />\n     * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n     *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\n     * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\n     * <ul> <li>Can only play 1 sound at a time.</li>\n     *      <li>Sound is not cached.</li>\n     *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\n     *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\n     * </ul>\n     *\n     * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\n     *\n     * @class HTMLAudioPlugin\n     * @extends AbstractPlugin\n     * @constructor\n     */\n    function HTMLAudioPlugin() {\n      this.AbstractPlugin_constructor();\n\n      // Public Properties\n      /**\n       * This is no longer needed as we are now using object pooling for tags.\n       *\n       * <b>NOTE this property only exists as a limitation of HTML audio.</b>\n       * @property defaultNumChannels\n       * @type {Number}\n       * @default 2\n       * @since 0.4.0\n       * @deprecated\n       */\n      this.defaultNumChannels = 2;\n      this._capabilities = s._capabilities;\n      this._loaderClass = createjs.SoundLoader;\n      this._soundInstanceClass = createjs.HTMLAudioSoundInstance;\n    }\n    var p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\n    var s = HTMLAudioPlugin;\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // Static Properties\n    /**\n     * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\n     * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\n     * Audio sprites work around this limitation.\n     * @property MAX_INSTANCES\n     * @type {Number}\n     * @default 30\n     * @static\n     */\n    s.MAX_INSTANCES = 30;\n\n    /**\n     * Event constant for the \"canPlayThrough\" event for cleaner code.\n     * @property _AUDIO_READY\n     * @type {String}\n     * @default canplaythrough\n     * @static\n     * @protected\n     */\n    s._AUDIO_READY = \"canplaythrough\";\n\n    /**\n     * Event constant for the \"ended\" event for cleaner code.\n     * @property _AUDIO_ENDED\n     * @type {String}\n     * @default ended\n     * @static\n     * @protected\n     */\n    s._AUDIO_ENDED = \"ended\";\n\n    /**\n     * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\n     * @property _AUDIO_SEEKED\n     * @type {String}\n     * @default seeked\n     * @static\n     * @protected\n     */\n    s._AUDIO_SEEKED = \"seeked\";\n\n    /**\n     * Event constant for the \"stalled\" event for cleaner code.\n     * @property _AUDIO_STALLED\n     * @type {String}\n     * @default stalled\n     * @static\n     * @protected\n     */\n    s._AUDIO_STALLED = \"stalled\";\n\n    /**\n     * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\n     * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\n     * @property _TIME_UPDATE\n     * @type {String}\n     * @default timeupdate\n     * @static\n     * @protected\n     */\n    s._TIME_UPDATE = \"timeupdate\";\n\n    /**\n     * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\n     * method. Please see the Sound {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}} method for an overview of all\n     * of the available properties.\n     * @property _capabilities\n     * @type {Object}\n     * @protected\n     * @static\n     */\n    s._capabilities = null;\n\n    // Static Methods\n    /**\n     * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\n     * browsers, but is disabled in iOS because of its limitations.\n     * @method isSupported\n     * @return {Boolean} If the plugin can be initialized.\n     * @static\n     */\n    s.isSupported = function () {\n      s._generateCapabilities();\n      return s._capabilities != null;\n    };\n\n    /**\n     * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n     * method for an overview of plugin capabilities.\n     * @method _generateCapabilities\n     * @static\n     * @protected\n     */\n    s._generateCapabilities = function () {\n      if (s._capabilities != null) {\n        return;\n      }\n      var t = document.createElement(\"audio\");\n      if (t.canPlayType == null) {\n        return null;\n      }\n      s._capabilities = {\n        panning: false,\n        volume: true,\n        tracks: -1\n      };\n\n      // determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n      var supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n      var extensionMap = createjs.Sound.EXTENSION_MAP;\n      for (var i = 0, l = supportedExtensions.length; i < l; i++) {\n        var ext = supportedExtensions[i];\n        var playType = extensionMap[ext] || ext;\n        s._capabilities[ext] = t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\" || t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\";\n      } // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n    };\n\n    // public methods\n    p.register = function (loadItem) {\n      var tag = createjs.HTMLAudioTagPool.get(loadItem.src);\n      var loader = this.AbstractPlugin_register(loadItem);\n      loader.setTag(tag);\n      return loader;\n    };\n    p.removeSound = function (src) {\n      this.AbstractPlugin_removeSound(src);\n      createjs.HTMLAudioTagPool.remove(src);\n    };\n    p.create = function (src, startTime, duration) {\n      var si = this.AbstractPlugin_create(src, startTime, duration);\n      si.setPlaybackResource(null);\n      return si;\n    };\n    p.toString = function () {\n      return \"[HTMLAudioPlugin]\";\n    };\n\n    // plugin does not support these\n    p.setVolume = p.getVolume = p.setMute = null;\n    createjs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\n  })();\n\n  //##############################################################################\n  // Tween.js\n  //##############################################################################\n\n  // TODO: possibly add a END actionsMode (only runs actions that == position)?\n  // TODO: evaluate a way to decouple paused from tick registration.\n\n  (function () {\n    // constructor\n    /**\n     * A Tween instance tweens properties for a single target. Instance methods can be chained for easy construction and sequencing:\n     *\n     * <h4>Example</h4>\n     *\n     *      target.alpha = 1;\n     *\t    createjs.Tween.get(target)\n     *\t         .wait(500)\n     *\t         .to({alpha:0, visible:false}, 1000)\n     *\t         .call(handleComplete);\n     *\t    function handleComplete() {\n     *\t    \t//Tween complete\n     *\t    }\n     *\n     * Multiple tweens can point to the same instance, however if they affect the same properties there could be unexpected\n     * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\n     * in the props argument.\n     *\n     *      createjs.Tween.get(target, {override:true}).to({x:100});\n     *\n     * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to get notified when a property of the\n     * target is changed.\n     *\n     *      createjs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\n     *      function handleChange(event) {\n     *          // The tween changed.\n     *      }\n     *\n     * See the Tween {{#crossLink \"Tween/get\"}}{{/crossLink}} method for additional param documentation.\n     * @class Tween\n     * @param {Object} target The target object that will have its properties tweened.\n     * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`.\n     * All properties default to false. Supported props are:<UL>\n     *    <LI> loop: sets the loop property on this tween.</LI>\n     *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n     *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on this tween.</LI>\n     *    <LI> override: if true, `Tween.removeTweens(target)` will be called to remove any other tweens with the same target.\n     *    <LI> paused: indicates whether to start the tween paused.</LI>\n     *    <LI> position: indicates the initial position for this tween.</LI>\n     *    <LI> onChange: specifies a listener for the \"change\" event.</LI>\n     * </UL>\n     * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual\n     * plugins' documentation for details.\n     * @extends EventDispatcher\n     * @constructor\n     */\n    function Tween(target, props, pluginData) {\n      // public properties:\n      /**\n       * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\n       * then setting this to true (the default) will cause this tween to be paused when <code>Ticker.setPaused(true)</code>\n       * is called. See the Tween {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the props\n       * parameter.\n       * @property ignoreGlobalPause\n       * @type Boolean\n       * @default false\n       */\n      this.ignoreGlobalPause = false;\n\n      /**\n       * If true, the tween will loop when it reaches the end. Can be set via the props param.\n       * @property loop\n       * @type {Boolean}\n       * @default false\n       */\n      this.loop = false;\n\n      /**\n       * Specifies the total duration of this tween in milliseconds (or ticks if useTicks is true).\n       * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\n       * behaviour.\n       * @property duration\n       * @type {Number}\n       * @default 0\n       * @readonly\n       */\n      this.duration = 0;\n\n      /**\n       * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\n       * you specify data by setting it to a property of pluginData with the same name as the plugin class.\n       * @example\n       *\tmyTween.pluginData.PluginClassName = data;\n       * <br/>\n       * Also, most plugins support a property to enable or disable them. This is typically the plugin class name followed by \"_enabled\".<br/>\n       * @example\n       *\tmyTween.pluginData.PluginClassName_enabled = false;<br/>\n       * <br/>\n       * Some plugins also store instance data in this object, usually in a property named _PluginClassName.\n       * See the documentation for individual plugins for more details.\n       * @property pluginData\n       * @type {Object}\n       */\n      this.pluginData = pluginData || {};\n\n      /**\n       * The target of this tween. This is the object on which the tweened properties will be changed. Changing\n       * this property after the tween is created will not have any effect.\n       * @property target\n       * @type {Object}\n       * @readonly\n       */\n      this.target = target;\n\n      /**\n       * The current normalized position of the tween. This will always be a value between 0 and duration.\n       * Changing this property directly will have no effect.\n       * @property position\n       * @type {Object}\n       * @readonly\n       */\n      this.position = null;\n\n      /**\n       * Indicates the tween's current position is within a passive wait.\n       * @property passive\n       * @type {Boolean}\n       * @default false\n       * @readonly\n       **/\n      this.passive = false;\n\n      // private properties:\t\n      /**\n       * @property _paused\n       * @type {Boolean}\n       * @default false\n       * @protected\n       */\n      this._paused = false;\n\n      /**\n       * @property _curQueueProps\n       * @type {Object}\n       * @protected\n       */\n      this._curQueueProps = {};\n\n      /**\n       * @property _initQueueProps\n       * @type {Object}\n       * @protected\n       */\n      this._initQueueProps = {};\n\n      /**\n       * @property _steps\n       * @type {Array}\n       * @protected\n       */\n      this._steps = [];\n\n      /**\n       * @property _actions\n       * @type {Array}\n       * @protected\n       */\n      this._actions = [];\n\n      /**\n       * Raw position.\n       * @property _prevPosition\n       * @type {Number}\n       * @default 0\n       * @protected\n       */\n      this._prevPosition = 0;\n\n      /**\n       * The position within the current step.\n       * @property _stepPosition\n       * @type {Number}\n       * @default 0\n       * @protected\n       */\n      this._stepPosition = 0; // this is needed by MovieClip.\n\n      /**\n       * Normalized position.\n       * @property _prevPos\n       * @type {Number}\n       * @default -1\n       * @protected\n       */\n      this._prevPos = -1;\n\n      /**\n       * @property _target\n       * @type {Object}\n       * @protected\n       */\n      this._target = target;\n\n      /**\n       * @property _useTicks\n       * @type {Boolean}\n       * @default false\n       * @protected\n       */\n      this._useTicks = false;\n\n      /**\n       * @property _inited\n       * @type {boolean}\n       * @default false\n       * @protected\n       */\n      this._inited = false;\n\n      /**\n       * Indicates whether the tween is currently registered with Tween.\n       * @property _registered\n       * @type {boolean}\n       * @default false\n       * @protected\n       */\n      this._registered = false;\n      if (props) {\n        this._useTicks = props.useTicks;\n        this.ignoreGlobalPause = props.ignoreGlobalPause;\n        this.loop = props.loop;\n        props.onChange && this.addEventListener(\"change\", props.onChange);\n        if (props.override) {\n          Tween.removeTweens(target);\n        }\n      }\n      if (props && props.paused) {\n        this._paused = true;\n      } else {\n        createjs.Tween._register(this, true);\n      }\n      if (props && props.position != null) {\n        this.setPosition(props.position, Tween.NONE);\n      }\n    }\n    var p = createjs.extend(Tween, createjs.EventDispatcher);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // static properties\n    /**\n     * Constant defining the none actionsMode for use with setPosition.\n     * @property NONE\n     * @type Number\n     * @default 0\n     * @static\n     */\n    Tween.NONE = 0;\n\n    /**\n     * Constant defining the loop actionsMode for use with setPosition.\n     * @property LOOP\n     * @type Number\n     * @default 1\n     * @static\n     */\n    Tween.LOOP = 1;\n\n    /**\n     * Constant defining the reverse actionsMode for use with setPosition.\n     * @property REVERSE\n     * @type Number\n     * @default 2\n     * @static\n     */\n    Tween.REVERSE = 2;\n\n    /**\n     * Constant returned by plugins to tell the tween not to use default assignment.\n     * @property IGNORE\n     * @type Object\n     * @static\n     */\n    Tween.IGNORE = {};\n\n    /**\n     * @property _listeners\n     * @type Array[Tween]\n     * @static\n     * @protected\n     */\n    Tween._tweens = [];\n\n    /**\n     * @property _plugins\n     * @type Object\n     * @static\n     * @protected\n     */\n    Tween._plugins = {};\n\n    // static methods\t\n    /**\n     * Returns a new tween instance. This is functionally identical to using \"new Tween(...)\", but looks cleaner\n     * with the chained syntax of TweenJS.\n     * <h4>Example</h4>\n     *\n     *\t\tvar tween = createjs.Tween.get(target);\n     *\n     * @method get\n     * @param {Object} target The target object that will have its properties tweened.\n     * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`).\n     * All properties default to `false`. Supported props are:\n     * <UL>\n     *    <LI> loop: sets the loop property on this tween.</LI>\n     *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n     *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on\n     *    this tween.</LI>\n     *    <LI> override: if true, `createjs.Tween.removeTweens(target)` will be called to remove any other tweens with\n     *    the same target.\n     *    <LI> paused: indicates whether to start the tween paused.</LI>\n     *    <LI> position: indicates the initial position for this tween.</LI>\n     *    <LI> onChange: specifies a listener for the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event.</LI>\n     * </UL>\n     * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual plugins'\n     * documentation for details.\n     * @param {Boolean} [override=false] If true, any previous tweens on the same target will be removed. This is the\n     * same as calling `Tween.removeTweens(target)`.\n     * @return {Tween} A reference to the created tween. Additional chained tweens, method calls, or callbacks can be\n     * applied to the returned tween instance.\n     * @static\n     */\n    Tween.get = function (target, props, pluginData, override) {\n      if (override) {\n        Tween.removeTweens(target);\n      }\n      return new Tween(target, props, pluginData);\n    };\n\n    /**\n     * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\n     * manually if you prefer to use your own \"heartbeat\" implementation.\n     * @method tick\n     * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\n     * `useTicks` set to true.\n     * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\n     * will ignore this, but all others will pause if this is `true`.\n     * @static\n     */\n    Tween.tick = function (delta, paused) {\n      var tweens = Tween._tweens.slice(); // to avoid race conditions.\n      for (var i = tweens.length - 1; i >= 0; i--) {\n        var tween = tweens[i];\n        if (paused && !tween.ignoreGlobalPause || tween._paused) {\n          continue;\n        }\n        tween.tick(tween._useTicks ? 1 : delta);\n      }\n    };\n\n    /**\n     * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\n     * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\n     * No other events are handled in Tween.\n     * @method handleEvent\n     * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\n     * usually be of type \"tick\".\n     * @private\n     * @static\n     * @since 0.4.2\n     */\n    Tween.handleEvent = function (event) {\n      if (event.type == \"tick\") {\n        this.tick(event.delta, event.paused);\n      }\n    };\n\n    /**\n     * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\n     * property is `true`.\n     * @method removeTweens\n     * @param {Object} target The target object to remove existing tweens from.\n     * @static\n     */\n    Tween.removeTweens = function (target) {\n      if (!target.tweenjs_count) {\n        return;\n      }\n      var tweens = Tween._tweens;\n      for (var i = tweens.length - 1; i >= 0; i--) {\n        var tween = tweens[i];\n        if (tween._target == target) {\n          tween._paused = true;\n          tweens.splice(i, 1);\n        }\n      }\n      target.tweenjs_count = 0;\n    };\n\n    /**\n     * Stop and remove all existing tweens.\n     * @method removeAllTweens\n     * @static\n     * @since 0.4.1\n     */\n    Tween.removeAllTweens = function () {\n      var tweens = Tween._tweens;\n      for (var i = 0, l = tweens.length; i < l; i++) {\n        var tween = tweens[i];\n        tween._paused = true;\n        tween.target && (tween.target.tweenjs_count = 0);\n      }\n      tweens.length = 0;\n    };\n\n    /**\n     * Indicates whether there are any active tweens (and how many) on the target object (if specified) or in general.\n     * @method hasActiveTweens\n     * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\n     * if there are any active tweens on any target.\n     * @return {Boolean} If there are active tweens.\n     * @static\n     */\n    Tween.hasActiveTweens = function (target) {\n      if (target) {\n        return target.tweenjs_count != null && !!target.tweenjs_count;\n      }\n      return Tween._tweens && !!Tween._tweens.length;\n    };\n\n    /**\n     * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"CSSPlugin\"}}{{/crossLink}}\n     * for an example of how to write TweenJS plugins.\n     * @method installPlugin\n     * @static\n     * @param {Object} plugin The plugin class to install\n     * @param {Array} properties An array of properties that the plugin will handle.\n     */\n    Tween.installPlugin = function (plugin, properties) {\n      var priority = plugin.priority;\n      if (priority == null) {\n        plugin.priority = priority = 0;\n      }\n      for (var i = 0, l = properties.length, p = Tween._plugins; i < l; i++) {\n        var n = properties[i];\n        if (!p[n]) {\n          p[n] = [plugin];\n        } else {\n          var arr = p[n];\n          for (var j = 0, jl = arr.length; j < jl; j++) {\n            if (priority < arr[j].priority) {\n              break;\n            }\n          }\n          p[n].splice(j, 0, plugin);\n        }\n      }\n    };\n\n    /**\n     * Registers or unregisters a tween with the ticking system.\n     * @method _register\n     * @param {Tween} tween The tween instance to register or unregister.\n     * @param {Boolean} value If `true`, the tween is registered. If `false` the tween is unregistered.\n     * @static\n     * @protected\n     */\n    Tween._register = function (tween, value) {\n      var target = tween._target;\n      var tweens = Tween._tweens;\n      if (value && !tween._registered) {\n        // TODO: this approach might fail if a dev is using sealed objects in ES5\n        if (target) {\n          target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count + 1 : 1;\n        }\n        tweens.push(tween);\n        if (!Tween._inited && createjs.Ticker) {\n          createjs.Ticker.addEventListener(\"tick\", Tween);\n          Tween._inited = true;\n        }\n      } else if (!value && tween._registered) {\n        if (target) {\n          target.tweenjs_count--;\n        }\n        var i = tweens.length;\n        while (i--) {\n          if (tweens[i] == tween) {\n            tweens.splice(i, 1);\n            break;\n          }\n        }\n      }\n      tween._registered = value;\n    };\n\n    // events:\n    /**\n     * Called whenever the tween's position changes.\n     * @event change\n     * @since 0.4.0\n     **/\n\n    // public methods:\n    /**\n     * Queues a wait (essentially an empty tween).\n     * <h4>Example</h4>\n     *\n     *\t\t//This tween will wait 1s before alpha is faded to 0.\n     *\t\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\n     *\n     * @method wait\n     * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n     * @param {Boolean} [passive] Tween properties will not be updated during a passive wait. This\n     * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\n     * affecting the same target at different times.\n     * @return {Tween} This tween instance (for chaining calls).\n     **/\n    p.wait = function (duration, passive) {\n      if (duration == null || duration <= 0) {\n        return this;\n      }\n      var o = this._cloneProps(this._curQueueProps);\n      return this._addStep({\n        d: duration,\n        p0: o,\n        e: this._linearEase,\n        p1: o,\n        v: passive\n      });\n    };\n\n    /**\n     * Queues a tween from the current values to the target properties. Set duration to 0 to jump to these value.\n     * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\n     * properties will be set at the end of the specified duration.\n     * <h4>Example</h4>\n     *\n     *\t\tcreatejs.Tween.get(target).to({alpha:0}, 1000);\n     *\n     * @method to\n     * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\n     * property of the target to 300).\n     * @param {Number} [duration=0] The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n     * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\n     * class for a list of built-in ease functions.\n     * @return {Tween} This tween instance (for chaining calls).\n     */\n    p.to = function (props, duration, ease) {\n      if (isNaN(duration) || duration < 0) {\n        duration = 0;\n      }\n      return this._addStep({\n        d: duration || 0,\n        p0: this._cloneProps(this._curQueueProps),\n        e: ease,\n        p1: this._cloneProps(this._appendQueueProps(props))\n      });\n    };\n\n    /**\n     * Queues an action to call the specified function.\n     * <h4>Example</h4>\n     *\n     *   \t//would call myFunction() after 1 second.\n     *   \tmyTween.wait(1000).call(myFunction);\n     *\n     * @method call\n     * @param {Function} callback The function to call.\n     * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\n     *      will be called with a single param pointing to this tween.\n     * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's\n     *      scope.\n     * @return {Tween} This tween instance (for chaining calls).\n     */\n    p.call = function (callback, params, scope) {\n      return this._addAction({\n        f: callback,\n        p: params ? params : [this],\n        o: scope ? scope : this._target\n      });\n    };\n\n    // TODO: add clarification between this and a 0 duration .to:\n    /**\n     * Queues an action to set the specified props on the specified target. If target is null, it will use this tween's\n     * target.\n     * <h4>Example</h4>\n     *\n     *\t\tmyTween.wait(1000).set({visible:false},foo);\n     *\n     * @method set\n     * @param {Object} props The properties to set (ex. `{visible:false}`).\n     * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\n     * @return {Tween} This tween instance (for chaining calls).\n     */\n    p.set = function (props, target) {\n      return this._addAction({\n        f: this._set,\n        o: this,\n        p: [props, target ? target : this._target]\n      });\n    };\n\n    /**\n     * Queues an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\n     * <h4>Example</h4>\n     *\n     *\t\tmyTween.to({x:100},500).play(otherTween);\n     *\n     * @method play\n     * @param {Tween} tween The tween to play.\n     * @return {Tween} This tween instance (for chaining calls).\n     */\n    p.play = function (tween) {\n      if (!tween) {\n        tween = this;\n      }\n      return this.call(tween.setPaused, [false], tween);\n    };\n\n    /**\n     * Queues an action to pause the specified tween.\n     * @method pause\n     * @param {Tween} tween The tween to pause. If null, it pauses this tween.\n     * @return {Tween} This tween instance (for chaining calls)\n     */\n    p.pause = function (tween) {\n      if (!tween) {\n        tween = this;\n      }\n      return this.call(tween.setPaused, [true], tween);\n    };\n\n    /**\n     * Advances the tween to a specified position.\n     * @method setPosition\n     * @param {Number} value The position to seek to in milliseconds (or ticks if useTicks is true).\n     * @param {Number} [actionsMode=1] Specifies how actions are handled (ie. call, set, play, pause):\n     * <ul>\n     *      <li>{{#crossLink \"Tween/NONE:property\"}}{{/crossLink}} (0) - run no actions.</li>\n     *      <li>{{#crossLink \"Tween/LOOP:property\"}}{{/crossLink}} (1) - if new position is less than old, then run all\n     *      actions between old and duration, then all actions between 0 and new.</li>\n     *      <li>{{#crossLink \"Tween/REVERSE:property\"}}{{/crossLink}} (2) - if new position is less than old, run all\n     *      actions between them in reverse.</li>\n     * </ul>\n     * @return {Boolean} Returns `true` if the tween is complete (ie. the full tween has run & {{#crossLink \"Tween/loop:property\"}}{{/crossLink}}\n     * is `false`).\n     */\n    p.setPosition = function (value, actionsMode) {\n      if (value < 0) {\n        value = 0;\n      }\n      if (actionsMode == null) {\n        actionsMode = 1;\n      }\n\n      // normalize position:\n      var t = value;\n      var end = false;\n      if (t >= this.duration) {\n        if (this.loop) {\n          t = t % this.duration;\n        } else {\n          t = this.duration;\n          end = true;\n        }\n      }\n      if (t == this._prevPos) {\n        return end;\n      }\n      var prevPos = this._prevPos;\n      this.position = this._prevPos = t; // set this in advance in case an action modifies position.\n      this._prevPosition = value;\n\n      // handle tweens:\n      if (this._target) {\n        if (end) {\n          // addresses problems with an ending zero length step.\n          this._updateTargetProps(null, 1);\n        } else if (this._steps.length > 0) {\n          // find our new tween index:\n          for (var i = 0, l = this._steps.length; i < l; i++) {\n            if (this._steps[i].t > t) {\n              break;\n            }\n          }\n          var step = this._steps[i - 1];\n          this._updateTargetProps(step, (this._stepPosition = t - step.t) / step.d);\n        }\n      }\n\n      // run actions:\n      if (actionsMode != 0 && this._actions.length > 0) {\n        if (this._useTicks) {\n          // only run the actions we landed on.\n          this._runActions(t, t);\n        } else if (actionsMode == 1 && t < prevPos) {\n          if (prevPos != this.duration) {\n            this._runActions(prevPos, this.duration);\n          }\n          this._runActions(0, t, true);\n        } else {\n          this._runActions(prevPos, t);\n        }\n      }\n      if (end) {\n        this.setPaused(true);\n      }\n      this.dispatchEvent(\"change\");\n      return end;\n    };\n\n    /**\n     * Advances this tween by the specified amount of time in milliseconds (or ticks if`useTicks` is `true`).\n     * This is normally called automatically by the Tween engine (via {{#crossLink \"Tween/tick\"}}{{/crossLink}}), but is\n     * exposed for advanced uses.\n     * @method tick\n     * @param {Number} delta The time to advance in milliseconds (or ticks if `useTicks` is `true`).\n     */\n    p.tick = function (delta) {\n      if (this._paused) {\n        return;\n      }\n      this.setPosition(this._prevPosition + delta);\n    };\n\n    /**\n     * Pauses or plays this tween.\n     * @method setPaused\n     * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\n     * @return {Tween} This tween instance (for chaining calls)\n     */\n    p.setPaused = function (value) {\n      if (this._paused === !!value) {\n        return this;\n      }\n      this._paused = !!value;\n      Tween._register(this, !value);\n      return this;\n    };\n\n    // tiny api (primarily for tool output):\n    p.w = p.wait;\n    p.t = p.to;\n    p.c = p.call;\n    p.s = p.set;\n\n    /**\n     * Returns a string representation of this object.\n     * @method toString\n     * @return {String} a string representation of the instance.\n     */\n    p.toString = function () {\n      return \"[Tween]\";\n    };\n\n    /**\n     * @method clone\n     * @protected\n     */\n    p.clone = function () {\n      throw \"Tween can not be cloned.\";\n    };\n\n    // private methods:\n    /**\n     * @method _updateTargetProps\n     * @param {Object} step\n     * @param {Number} ratio\n     * @protected\n     */\n    p._updateTargetProps = function (step, ratio) {\n      var p0, p1, v, v0, v1, arr;\n      if (!step && ratio == 1) {\n        // GDS: when does this run? Just at the very end? Shouldn't.\n        this.passive = false;\n        p0 = p1 = this._curQueueProps;\n      } else {\n        this.passive = !!step.v;\n        if (this.passive) {\n          return;\n        } // don't update props.\n        // apply ease to ratio.\n        if (step.e) {\n          ratio = step.e(ratio, 0, 1, 1);\n        }\n        p0 = step.p0;\n        p1 = step.p1;\n      }\n      for (var n in this._initQueueProps) {\n        if ((v0 = p0[n]) == null) {\n          p0[n] = v0 = this._initQueueProps[n];\n        }\n        if ((v1 = p1[n]) == null) {\n          p1[n] = v1 = v0;\n        }\n        if (v0 == v1 || ratio == 0 || ratio == 1 || typeof v0 != \"number\") {\n          // no interpolation - either at start, end, values don't change, or the value is non-numeric.\n          v = ratio == 1 ? v1 : v0;\n        } else {\n          v = v0 + (v1 - v0) * ratio;\n        }\n        var ignore = false;\n        if (arr = Tween._plugins[n]) {\n          for (var i = 0, l = arr.length; i < l; i++) {\n            var v2 = arr[i].tween(this, n, v, p0, p1, ratio, !!step && p0 == p1, !step);\n            if (v2 == Tween.IGNORE) {\n              ignore = true;\n            } else {\n              v = v2;\n            }\n          }\n        }\n        if (!ignore) {\n          this._target[n] = v;\n        }\n      }\n    };\n\n    /**\n     * @method _runActions\n     * @param {Number} startPos\n     * @param {Number} endPos\n     * @param {Boolean} includeStart\n     * @protected\n     */\n    p._runActions = function (startPos, endPos, includeStart) {\n      var sPos = startPos;\n      var ePos = endPos;\n      var i = -1;\n      var j = this._actions.length;\n      var k = 1;\n      if (startPos > endPos) {\n        // running backwards, flip everything:\n        sPos = endPos;\n        ePos = startPos;\n        i = j;\n        j = k = -1;\n      }\n      while ((i += k) != j) {\n        var action = this._actions[i];\n        var pos = action.t;\n        if (pos == ePos || pos > sPos && pos < ePos || includeStart && pos == startPos) {\n          action.f.apply(action.o, action.p);\n        }\n      }\n    };\n\n    /**\n     * @method _appendQueueProps\n     * @param {Object} o\n     * @protected\n     */\n    p._appendQueueProps = function (o) {\n      var arr, oldValue, i, l, injectProps;\n      for (var n in o) {\n        if (this._initQueueProps[n] === undefined) {\n          oldValue = this._target[n];\n\n          // init plugins:\n          if (arr = Tween._plugins[n]) {\n            for (i = 0, l = arr.length; i < l; i++) {\n              oldValue = arr[i].init(this, n, oldValue);\n            }\n          }\n          this._initQueueProps[n] = this._curQueueProps[n] = oldValue === undefined ? null : oldValue;\n        } else {\n          oldValue = this._curQueueProps[n];\n        }\n      }\n      for (var n in o) {\n        oldValue = this._curQueueProps[n];\n        if (arr = Tween._plugins[n]) {\n          injectProps = injectProps || {};\n          for (i = 0, l = arr.length; i < l; i++) {\n            // TODO: remove the check for .step in the next version. It's here for backwards compatibility.\n            if (arr[i].step) {\n              arr[i].step(this, n, oldValue, o[n], injectProps);\n            }\n          }\n        }\n        this._curQueueProps[n] = o[n];\n      }\n      if (injectProps) {\n        this._appendQueueProps(injectProps);\n      }\n      return this._curQueueProps;\n    };\n\n    /**\n     * @method _cloneProps\n     * @param {Object} props\n     * @protected\n     */\n    p._cloneProps = function (props) {\n      var o = {};\n      for (var n in props) {\n        o[n] = props[n];\n      }\n      return o;\n    };\n\n    /**\n     * @method _addStep\n     * @param {Object} o\n     * @protected\n     */\n    p._addStep = function (o) {\n      if (o.d > 0) {\n        this._steps.push(o);\n        o.t = this.duration;\n        this.duration += o.d;\n      }\n      return this;\n    };\n\n    /**\n     * @method _addAction\n     * @param {Object} o\n     * @protected\n     */\n    p._addAction = function (o) {\n      o.t = this.duration;\n      this._actions.push(o);\n      return this;\n    };\n\n    /**\n     * @method _set\n     * @param {Object} props\n     * @param {Object} o\n     * @protected\n     */\n    p._set = function (props, o) {\n      for (var n in props) {\n        o[n] = props[n];\n      }\n    };\n    createjs.Tween = createjs.promote(Tween, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // Timeline.js\n  //##############################################################################\n\n  (function () {\n    // constructor\t\n    /**\n     * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\n     * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\n     * @class Timeline\n     * @param {Array} tweens An array of Tweens to add to this timeline. See {{#crossLink \"Timeline/addTween\"}}{{/crossLink}}\n     * for more info.\n     * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n     * See {{#crossLink \"Timeline/setLabels\"}}{{/crossLink}}\n     * for details.\n     * @param {Object} props The configuration properties to apply to this tween instance (ex. `{loop:true}`). All properties\n     * default to false. Supported props are:<UL>\n     *    <LI> loop: sets the loop property on this tween.</LI>\n     *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n     *    <LI> ignoreGlobalPause: sets the ignoreGlobalPause property on this tween.</LI>\n     *    <LI> paused: indicates whether to start the tween paused.</LI>\n     *    <LI> position: indicates the initial position for this timeline.</LI>\n     *    <LI> onChange: specifies a listener to add for the {{#crossLink \"Timeline/change:event\"}}{{/crossLink}} event.</LI>\n     * </UL>\n     * @extends EventDispatcher\n     * @constructor\n     **/\n    function Timeline(tweens, labels, props) {\n      this.EventDispatcher_constructor();\n\n      // public properties:\n      /**\n       * Causes this timeline to continue playing when a global pause is active.\n       * @property ignoreGlobalPause\n       * @type Boolean\n       **/\n      this.ignoreGlobalPause = false;\n\n      /**\n       * The total duration of this timeline in milliseconds (or ticks if `useTicks `is `true`). This value is usually\n       * automatically updated as you modify the timeline. See {{#crossLink \"Timeline/updateDuration\"}}{{/crossLink}}\n       * for more information.\n       * @property duration\n       * @type Number\n       * @default 0\n       * @readonly\n       **/\n      this.duration = 0;\n\n      /**\n       * If true, the timeline will loop when it reaches the end. Can be set via the props param.\n       * @property loop\n       * @type Boolean\n       **/\n      this.loop = false;\n\n      /**\n       * The current normalized position of the timeline. This will always be a value between 0 and\n       * {{#crossLink \"Timeline/duration:property\"}}{{/crossLink}}.\n       * Changing this property directly will have no effect.\n       * @property position\n       * @type Object\n       * @readonly\n       **/\n      this.position = null;\n\n      // private properties:\n      /**\n       * @property _paused\n       * @type Boolean\n       * @protected\n       **/\n      this._paused = false;\n\n      /**\n       * @property _tweens\n       * @type Array[Tween]\n       * @protected\n       **/\n      this._tweens = [];\n\n      /**\n       * @property _labels\n       * @type Object\n       * @protected\n       **/\n      this._labels = null;\n\n      /**\n       * @property _labelList\n       * @type Array[Object]\n       * @protected\n       **/\n      this._labelList = null;\n\n      /**\n       * @property _prevPosition\n       * @type Number\n       * @default 0\n       * @protected\n       **/\n      this._prevPosition = 0;\n\n      /**\n       * @property _prevPos\n       * @type Number\n       * @default -1\n       * @protected\n       **/\n      this._prevPos = -1;\n\n      /**\n       * @property _useTicks\n       * @type Boolean\n       * @default false\n       * @protected\n       **/\n      this._useTicks = false;\n\n      /**\n       * Indicates whether the timeline is currently registered with Tween.\n       * @property _registered\n       * @type {boolean}\n       * @default false\n       * @protected\n       */\n      this._registered = false;\n      if (props) {\n        this._useTicks = props.useTicks;\n        this.loop = props.loop;\n        this.ignoreGlobalPause = props.ignoreGlobalPause;\n        props.onChange && this.addEventListener(\"change\", props.onChange);\n      }\n      if (tweens) {\n        this.addTween.apply(this, tweens);\n      }\n      this.setLabels(labels);\n      if (props && props.paused) {\n        this._paused = true;\n      } else {\n        createjs.Tween._register(this, true);\n      }\n      if (props && props.position != null) {\n        this.setPosition(props.position, createjs.Tween.NONE);\n      }\n    }\n    var p = createjs.extend(Timeline, createjs.EventDispatcher);\n\n    // TODO: deprecated\n    // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n    // events:\n    /**\n     * Called whenever the timeline's position changes.\n     * @event change\n     * @since 0.5.0\n     **/\n\n    // public methods:\n    /**\n     * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\n     * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\n     * unexpected behaviour.\n     * @method addTween\n     * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\n     * @return {Tween} The first tween that was passed in.\n     **/\n    p.addTween = function (tween) {\n      var arguments$1 = arguments;\n      var l = arguments.length;\n      if (l > 1) {\n        for (var i = 0; i < l; i++) {\n          this.addTween(arguments$1[i]);\n        }\n        return arguments[0];\n      } else if (l == 0) {\n        return null;\n      }\n      this.removeTween(tween);\n      this._tweens.push(tween);\n      tween.setPaused(true);\n      tween._paused = false;\n      tween._useTicks = this._useTicks;\n      if (tween.duration > this.duration) {\n        this.duration = tween.duration;\n      }\n      if (this._prevPos >= 0) {\n        tween.setPosition(this._prevPos, createjs.Tween.NONE);\n      }\n      return tween;\n    };\n\n    /**\n     * Removes one or more tweens from this timeline.\n     * @method removeTween\n     * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\n     * @return Boolean Returns `true` if all of the tweens were successfully removed.\n     **/\n    p.removeTween = function (tween) {\n      var arguments$1 = arguments;\n      var l = arguments.length;\n      if (l > 1) {\n        var good = true;\n        for (var i = 0; i < l; i++) {\n          good = good && this.removeTween(arguments$1[i]);\n        }\n        return good;\n      } else if (l == 0) {\n        return false;\n      }\n      var tweens = this._tweens;\n      var i = tweens.length;\n      while (i--) {\n        if (tweens[i] == tween) {\n          tweens.splice(i, 1);\n          if (tween.duration >= this.duration) {\n            this.updateDuration();\n          }\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n     * @method addLabel\n     * @param {String} label The label name.\n     * @param {Number} position The position this label represents.\n     **/\n    p.addLabel = function (label, position) {\n      this._labels[label] = position;\n      var list = this._labelList;\n      if (list) {\n        for (var i = 0, l = list.length; i < l; i++) {\n          if (position < list[i].position) {\n            break;\n          }\n        }\n        list.splice(i, 0, {\n          label: label,\n          position: position\n        });\n      }\n    };\n\n    /**\n     * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\n     * @method setLabels\n     * @param {Object} o An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\n     * in the form `{labelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\n     **/\n    p.setLabels = function (o) {\n      this._labels = o ? o : {};\n    };\n\n    /**\n     * Returns a sorted list of the labels defined on this timeline.\n     * @method getLabels\n     * @return {Array[Object]} A sorted array of objects with label and position properties.\n     **/\n    p.getLabels = function () {\n      var list = this._labelList;\n      if (!list) {\n        list = this._labelList = [];\n        var labels = this._labels;\n        for (var n in labels) {\n          list.push({\n            label: n,\n            position: labels[n]\n          });\n        }\n        list.sort(function (a, b) {\n          return a.position - b.position;\n        });\n      }\n      return list;\n    };\n\n    /**\n     * Returns the name of the label on or immediately before the current position. For example, given a timeline with\n     * two labels, \"first\" on frame index 4, and \"second\" on frame 8, getCurrentLabel would return:\n     * <UL>\n     * \t\t<LI>null if the current position is 2.</LI>\n     * \t\t<LI>\"first\" if the current position is 4.</LI>\n     * \t\t<LI>\"first\" if the current position is 7.</LI>\n     * \t\t<LI>\"second\" if the current position is 15.</LI>\n     * </UL>\n     * @method getCurrentLabel\n     * @return {String} The name of the current label or null if there is no label\n     **/\n    p.getCurrentLabel = function () {\n      var labels = this.getLabels();\n      var pos = this.position;\n      var l = labels.length;\n      if (l) {\n        for (var i = 0; i < l; i++) {\n          if (pos < labels[i].position) {\n            break;\n          }\n        }\n        return i == 0 ? null : labels[i - 1].label;\n      }\n      return null;\n    };\n\n    /**\n     * Unpauses this timeline and jumps to the specified position or label.\n     * @method gotoAndPlay\n     * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\n     * or label to jump to.\n     **/\n    p.gotoAndPlay = function (positionOrLabel) {\n      this.setPaused(false);\n      this._goto(positionOrLabel);\n    };\n\n    /**\n     * Pauses this timeline and jumps to the specified position or label.\n     * @method gotoAndStop\n     * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\n     * to jump to.\n     **/\n    p.gotoAndStop = function (positionOrLabel) {\n      this.setPaused(true);\n      this._goto(positionOrLabel);\n    };\n\n    /**\n     * Advances the timeline to the specified position.\n     * @method setPosition\n     * @param {Number} value The position to seek to in milliseconds (or ticks if `useTicks` is `true`).\n     * @param {Number} [actionsMode] parameter specifying how actions are handled. See the Tween {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}\n     * method for more details.\n     * @return {Boolean} Returns `true` if the timeline is complete (ie. the full timeline has run & {{#crossLink \"Timeline/loop:property\"}}{{/crossLink}}\n     * is `false`).\n     **/\n    p.setPosition = function (value, actionsMode) {\n      var t = this._calcPosition(value);\n      var end = !this.loop && value >= this.duration;\n      if (t == this._prevPos) {\n        return end;\n      }\n      this._prevPosition = value;\n      this.position = this._prevPos = t; // in case an action changes the current frame.\n      for (var i = 0, l = this._tweens.length; i < l; i++) {\n        this._tweens[i].setPosition(t, actionsMode);\n        if (t != this._prevPos) {\n          return false;\n        } // an action changed this timeline's position.\n      }\n      if (end) {\n        this.setPaused(true);\n      }\n      this.dispatchEvent(\"change\");\n      return end;\n    };\n\n    /**\n     * Pauses or plays this timeline.\n     * @method setPaused\n     * @param {Boolean} value Indicates whether the tween should be paused (`true`) or played (`false`).\n     **/\n    p.setPaused = function (value) {\n      this._paused = !!value;\n      createjs.Tween._register(this, !value);\n    };\n\n    /**\n     * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\n     * but this method is useful if you modify a tween after it was added to the timeline.\n     * @method updateDuration\n     **/\n    p.updateDuration = function () {\n      this.duration = 0;\n      for (var i = 0, l = this._tweens.length; i < l; i++) {\n        var tween = this._tweens[i];\n        if (tween.duration > this.duration) {\n          this.duration = tween.duration;\n        }\n      }\n    };\n\n    /**\n     * Advances this timeline by the specified amount of time in milliseconds (or ticks if `useTicks` is `true`).\n     * This is normally called automatically by the Tween engine (via the {{#crossLink \"Tween/tick:event\"}}{{/crossLink}}\n     * event), but is exposed for advanced uses.\n     * @method tick\n     * @param {Number} delta The time to advance in milliseconds (or ticks if useTicks is true).\n     **/\n    p.tick = function (delta) {\n      this.setPosition(this._prevPosition + delta);\n    };\n\n    /**\n     * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\n     * corresponding frame label will be returned, or `null` if a matching label is not defined.\n     * @method resolve\n     * @param {String|Number} positionOrLabel A numeric position value or label string.\n     **/\n    p.resolve = function (positionOrLabel) {\n      var pos = Number(positionOrLabel);\n      if (isNaN(pos)) {\n        pos = this._labels[positionOrLabel];\n      }\n      return pos;\n    };\n\n    /**\n    * Returns a string representation of this object.\n    * @method toString\n    * @return {String} a string representation of the instance.\n    **/\n    p.toString = function () {\n      return \"[Timeline]\";\n    };\n\n    /**\n     * @method clone\n     * @protected\n     **/\n    p.clone = function () {\n      throw \"Timeline can not be cloned.\";\n    };\n\n    // private methods:\n    /**\n     * @method _goto\n     * @param {String | Number} positionOrLabel\n     * @protected\n     **/\n    p._goto = function (positionOrLabel) {\n      var pos = this.resolve(positionOrLabel);\n      if (pos != null) {\n        this.setPosition(pos);\n      }\n    };\n\n    /**\n     * @method _calcPosition\n     * @param {Number} value\n     * @return {Number}\n     * @protected\n     **/\n    p._calcPosition = function (value) {\n      if (value < 0) {\n        return 0;\n      }\n      if (value < this.duration) {\n        return value;\n      }\n      return this.loop ? value % this.duration : this.duration;\n    };\n    createjs.Timeline = createjs.promote(Timeline, \"EventDispatcher\");\n  })();\n\n  //##############################################################################\n  // Ease.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\n     * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\n     *\n     * Most methods on Ease can be passed directly as easing functions:\n     *\n     *      Tween.get(target).to({x:100}, 500, Ease.linear);\n     *\n     * However, methods beginning with \"get\" will return an easing function based on parameter values:\n     *\n     *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\n     *\n     * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\n     * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\n     *\n     * <em>Equations derived from work by Robert Penner.</em>\n     * @class Ease\n     * @static\n     **/\n    function Ease() {\n      throw \"Ease cannot be instantiated.\";\n    }\n\n    // static methods and properties\n    /**\n     * @method linear\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.linear = function (t) {\n      return t;\n    };\n\n    /**\n     * Identical to linear.\n     * @method none\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.none = Ease.linear;\n\n    /**\n     * Mimics the simple -100 to 100 easing in Flash Pro.\n     * @method get\n     * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\n     * @static\n     * @return {Function}\n     **/\n    Ease.get = function (amount) {\n      if (amount < -1) {\n        amount = -1;\n      }\n      if (amount > 1) {\n        amount = 1;\n      }\n      return function (t) {\n        if (amount == 0) {\n          return t;\n        }\n        if (amount < 0) {\n          return t * (t * -amount + 1 + amount);\n        }\n        return t * ((2 - t) * amount + (1 - amount));\n      };\n    };\n\n    /**\n     * Configurable exponential ease.\n     * @method getPowIn\n     * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n     * @static\n     * @return {Function}\n     **/\n    Ease.getPowIn = function (pow) {\n      return function (t) {\n        return Math.pow(t, pow);\n      };\n    };\n\n    /**\n     * Configurable exponential ease.\n     * @method getPowOut\n     * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n     * @static\n     * @return {Function}\n     **/\n    Ease.getPowOut = function (pow) {\n      return function (t) {\n        return 1 - Math.pow(1 - t, pow);\n      };\n    };\n\n    /**\n     * Configurable exponential ease.\n     * @method getPowInOut\n     * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n     * @static\n     * @return {Function}\n     **/\n    Ease.getPowInOut = function (pow) {\n      return function (t) {\n        if ((t *= 2) < 1) {\n          return 0.5 * Math.pow(t, pow);\n        }\n        return 1 - 0.5 * Math.abs(Math.pow(2 - t, pow));\n      };\n    };\n\n    /**\n     * @method quadIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quadIn = Ease.getPowIn(2);\n    /**\n     * @method quadOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quadOut = Ease.getPowOut(2);\n    /**\n     * @method quadInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quadInOut = Ease.getPowInOut(2);\n\n    /**\n     * @method cubicIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.cubicIn = Ease.getPowIn(3);\n    /**\n     * @method cubicOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.cubicOut = Ease.getPowOut(3);\n    /**\n     * @method cubicInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.cubicInOut = Ease.getPowInOut(3);\n\n    /**\n     * @method quartIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quartIn = Ease.getPowIn(4);\n    /**\n     * @method quartOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quartOut = Ease.getPowOut(4);\n    /**\n     * @method quartInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quartInOut = Ease.getPowInOut(4);\n\n    /**\n     * @method quintIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quintIn = Ease.getPowIn(5);\n    /**\n     * @method quintOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quintOut = Ease.getPowOut(5);\n    /**\n     * @method quintInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.quintInOut = Ease.getPowInOut(5);\n\n    /**\n     * @method sineIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.sineIn = function (t) {\n      return 1 - Math.cos(t * Math.PI / 2);\n    };\n\n    /**\n     * @method sineOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.sineOut = function (t) {\n      return Math.sin(t * Math.PI / 2);\n    };\n\n    /**\n     * @method sineInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.sineInOut = function (t) {\n      return -0.5 * (Math.cos(Math.PI * t) - 1);\n    };\n\n    /**\n     * Configurable \"back in\" ease.\n     * @method getBackIn\n     * @param {Number} amount The strength of the ease.\n     * @static\n     * @return {Function}\n     **/\n    Ease.getBackIn = function (amount) {\n      return function (t) {\n        return t * t * ((amount + 1) * t - amount);\n      };\n    };\n    /**\n     * @method backIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.backIn = Ease.getBackIn(1.7);\n\n    /**\n     * Configurable \"back out\" ease.\n     * @method getBackOut\n     * @param {Number} amount The strength of the ease.\n     * @static\n     * @return {Function}\n     **/\n    Ease.getBackOut = function (amount) {\n      return function (t) {\n        return --t * t * ((amount + 1) * t + amount) + 1;\n      };\n    };\n    /**\n     * @method backOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.backOut = Ease.getBackOut(1.7);\n\n    /**\n     * Configurable \"back in out\" ease.\n     * @method getBackInOut\n     * @param {Number} amount The strength of the ease.\n     * @static\n     * @return {Function}\n     **/\n    Ease.getBackInOut = function (amount) {\n      amount *= 1.525;\n      return function (t) {\n        if ((t *= 2) < 1) {\n          return 0.5 * (t * t * ((amount + 1) * t - amount));\n        }\n        return 0.5 * ((t -= 2) * t * ((amount + 1) * t + amount) + 2);\n      };\n    };\n    /**\n     * @method backInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.backInOut = Ease.getBackInOut(1.7);\n\n    /**\n     * @method circIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.circIn = function (t) {\n      return -(Math.sqrt(1 - t * t) - 1);\n    };\n\n    /**\n     * @method circOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.circOut = function (t) {\n      return Math.sqrt(1 - --t * t);\n    };\n\n    /**\n     * @method circInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.circInOut = function (t) {\n      if ((t *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n      }\n      return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n    };\n\n    /**\n     * @method bounceIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.bounceIn = function (t) {\n      return 1 - Ease.bounceOut(1 - t);\n    };\n\n    /**\n     * @method bounceOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.bounceOut = function (t) {\n      if (t < 1 / 2.75) {\n        return 7.5625 * t * t;\n      } else if (t < 2 / 2.75) {\n        return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;\n      } else if (t < 2.5 / 2.75) {\n        return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;\n      } else {\n        return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;\n      }\n    };\n\n    /**\n     * @method bounceInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.bounceInOut = function (t) {\n      if (t < 0.5) {\n        return Ease.bounceIn(t * 2) * .5;\n      }\n      return Ease.bounceOut(t * 2 - 1) * 0.5 + 0.5;\n    };\n\n    /**\n     * Configurable elastic ease.\n     * @method getElasticIn\n     * @param {Number} amplitude\n     * @param {Number} period\n     * @static\n     * @return {Function}\n     **/\n    Ease.getElasticIn = function (amplitude, period) {\n      var pi2 = Math.PI * 2;\n      return function (t) {\n        if (t == 0 || t == 1) {\n          return t;\n        }\n        var s = period / pi2 * Math.asin(1 / amplitude);\n        return -(amplitude * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * pi2 / period));\n      };\n    };\n    /**\n     * @method elasticIn\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.elasticIn = Ease.getElasticIn(1, 0.3);\n\n    /**\n     * Configurable elastic ease.\n     * @method getElasticOut\n     * @param {Number} amplitude\n     * @param {Number} period\n     * @static\n     * @return {Function}\n     **/\n    Ease.getElasticOut = function (amplitude, period) {\n      var pi2 = Math.PI * 2;\n      return function (t) {\n        if (t == 0 || t == 1) {\n          return t;\n        }\n        var s = period / pi2 * Math.asin(1 / amplitude);\n        return amplitude * Math.pow(2, -10 * t) * Math.sin((t - s) * pi2 / period) + 1;\n      };\n    };\n    /**\n     * @method elasticOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.elasticOut = Ease.getElasticOut(1, 0.3);\n\n    /**\n     * Configurable elastic ease.\n     * @method getElasticInOut\n     * @param {Number} amplitude\n     * @param {Number} period\n     * @static\n     * @return {Function}\n     **/\n    Ease.getElasticInOut = function (amplitude, period) {\n      var pi2 = Math.PI * 2;\n      return function (t) {\n        var s = period / pi2 * Math.asin(1 / amplitude);\n        if ((t *= 2) < 1) {\n          return -0.5 * (amplitude * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * pi2 / period));\n        }\n        return amplitude * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * pi2 / period) * 0.5 + 1;\n      };\n    };\n    /**\n     * @method elasticInOut\n     * @param {Number} t\n     * @static\n     * @return {Number}\n     **/\n    Ease.elasticInOut = Ease.getElasticInOut(1, 0.3 * 1.5);\n    createjs.Ease = Ease;\n  })();\n\n  //##############################################################################\n  // MotionGuidePlugin.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * A TweenJS plugin for working with motion guides.\n     *\n     * To use, install the plugin after TweenJS has loaded. Next tween the 'guide' property with an object as detailed below.\n     *\n     *       createjs.MotionGuidePlugin.install();\n     *\n     * <h4>Example</h4>\n     *\n     *      // Using a Motion Guide\n     *\t    createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\n     *\t    // Visualizing the line\n     *\t    graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\n     *\n     * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\n     * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\n     *      <LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\n     *      <LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\n     *      <LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\n     *      <LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\n     *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\n     *      \t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\n     *      \t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including flash like behaviour</LI>\n     * \t\t</UL></LI>\n     * </UL>\n     * Guide objects should not be shared between tweens even if all properties are identical, the library stores\n     * information on these objects in the background and sharing them can cause unexpected behaviour. Values\n     * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\n     *\n     * @class MotionGuidePlugin\n     * @constructor\n     **/\n    function MotionGuidePlugin() {\n      throw \"MotionGuidePlugin cannot be instantiated.\";\n    }\n\n    // static properties:\n    /**\n     * @property priority\n     * @protected\n     * @static\n     **/\n    MotionGuidePlugin.priority = 0; // high priority, should run sooner\n\n    /**\n     * @property temporary variable storage\n     * @private\n     * @static\n     */\n    MotionGuidePlugin._rotOffS;\n    /**\n     * @property temporary variable storage\n     * @private\n     * @static\n     */\n    MotionGuidePlugin._rotOffE;\n    /**\n     * @property temporary variable storage\n     * @private\n     * @static\n     */\n    MotionGuidePlugin._rotNormS;\n    /**\n     * @property temporary variable storage\n     * @private\n     * @static\n     */\n    MotionGuidePlugin._rotNormE;\n\n    // static methods\n    /**\n     * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\n     * @method install\n     * @static\n     **/\n    MotionGuidePlugin.install = function () {\n      createjs.Tween.installPlugin(MotionGuidePlugin, [\"guide\", \"x\", \"y\", \"rotation\"]);\n      return createjs.Tween.IGNORE;\n    };\n\n    /**\n     * @method init\n     * @protected\n     * @static\n     **/\n    MotionGuidePlugin.init = function (tween, prop, value) {\n      var target = tween.target;\n      if (!target.hasOwnProperty(\"x\")) {\n        target.x = 0;\n      }\n      if (!target.hasOwnProperty(\"y\")) {\n        target.y = 0;\n      }\n      if (!target.hasOwnProperty(\"rotation\")) {\n        target.rotation = 0;\n      }\n      if (prop == \"rotation\") {\n        tween.__needsRot = true;\n      }\n      return prop == \"guide\" ? null : value;\n    };\n\n    /**\n     * @method step\n     * @protected\n     * @static\n     **/\n    MotionGuidePlugin.step = function (tween, prop, startValue, endValue, injectProps) {\n      // other props\n      if (prop == \"rotation\") {\n        tween.__rotGlobalS = startValue;\n        tween.__rotGlobalE = endValue;\n        MotionGuidePlugin.testRotData(tween, injectProps);\n      }\n      if (prop != \"guide\") {\n        return endValue;\n      }\n\n      // guide only information - Start -\n      var temp,\n        data = endValue;\n      if (!data.hasOwnProperty(\"path\")) {\n        data.path = [];\n      }\n      var path = data.path;\n      if (!data.hasOwnProperty(\"end\")) {\n        data.end = 1;\n      }\n      if (!data.hasOwnProperty(\"start\")) {\n        data.start = startValue && startValue.hasOwnProperty(\"end\") && startValue.path === path ? startValue.end : 0;\n      }\n\n      // Figure out subline information\n      if (data.hasOwnProperty(\"_segments\") && data._length) {\n        return endValue;\n      }\n      var l = path.length;\n      var accuracy = 10; // Adjust to improve line following precision but sacrifice performance (# of seg)\n      if (l >= 6 && (l - 2) % 4 == 0) {\n        // Enough points && contains correct number per entry ignoring start\n        data._segments = [];\n        data._length = 0;\n        for (var i = 2; i < l; i += 4) {\n          var sx = path[i - 2],\n            sy = path[i - 1];\n          var cx = path[i + 0],\n            cy = path[i + 1];\n          var ex = path[i + 2],\n            ey = path[i + 3];\n          var oldX = sx,\n            oldY = sy;\n          var tempX,\n            tempY,\n            total = 0;\n          var sublines = [];\n          for (var j = 1; j <= accuracy; j++) {\n            var t = j / accuracy;\n            var inv = 1 - t;\n            tempX = inv * inv * sx + 2 * inv * t * cx + t * t * ex;\n            tempY = inv * inv * sy + 2 * inv * t * cy + t * t * ey;\n            total += sublines[sublines.push(Math.sqrt((temp = tempX - oldX) * temp + (temp = tempY - oldY) * temp)) - 1];\n            oldX = tempX;\n            oldY = tempY;\n          }\n          data._segments.push(total);\n          data._segments.push(sublines);\n          data._length += total;\n        }\n      } else {\n        throw \"invalid 'path' data, please see documentation for valid paths\";\n      }\n\n      // Setup x/y tweens\n      temp = data.orient;\n      data.orient = true;\n      var o = {};\n      MotionGuidePlugin.calc(data, data.start, o);\n      tween.__rotPathS = Number(o.rotation.toFixed(5));\n      MotionGuidePlugin.calc(data, data.end, o);\n      tween.__rotPathE = Number(o.rotation.toFixed(5));\n      data.orient = false; //here and now we don't know if we need to\n      MotionGuidePlugin.calc(data, data.end, injectProps);\n      data.orient = temp;\n\n      // Setup rotation properties\n      if (!data.orient) {\n        return endValue;\n      }\n      tween.__guideData = data;\n      MotionGuidePlugin.testRotData(tween, injectProps);\n      return endValue;\n    };\n\n    /**\n     * @method testRotData\n     * @protected\n     * @static\n     **/\n    MotionGuidePlugin.testRotData = function (tween, injectProps) {\n      // no rotation informat? if we need it come back, if we don't use 0 & ensure we have guide data\n      if (tween.__rotGlobalS === undefined || tween.__rotGlobalE === undefined) {\n        if (tween.__needsRot) {\n          return;\n        }\n        if (tween._curQueueProps.rotation !== undefined) {\n          tween.__rotGlobalS = tween.__rotGlobalE = tween._curQueueProps.rotation;\n        } else {\n          tween.__rotGlobalS = tween.__rotGlobalE = injectProps.rotation = tween.target.rotation || 0;\n        }\n      }\n      if (tween.__guideData === undefined) {\n        return;\n      }\n\n      // Process rotation properties\n      var data = tween.__guideData;\n      var rotGlobalD = tween.__rotGlobalE - tween.__rotGlobalS;\n      var rotPathD = tween.__rotPathE - tween.__rotPathS;\n      var rot = rotGlobalD - rotPathD;\n      if (data.orient == \"auto\") {\n        if (rot > 180) {\n          rot -= 360;\n        } else if (rot < -180) {\n          rot += 360;\n        }\n      } else if (data.orient == \"cw\") {\n        while (rot < 0) {\n          rot += 360;\n        }\n        if (rot == 0 && rotGlobalD > 0 && rotGlobalD != 180) {\n          rot += 360;\n        }\n      } else if (data.orient == \"ccw\") {\n        rot = rotGlobalD - (rotPathD > 180 ? 360 - rotPathD : rotPathD); // sign flipping on path\n        while (rot > 0) {\n          rot -= 360;\n        }\n        if (rot == 0 && rotGlobalD < 0 && rotGlobalD != -180) {\n          rot -= 360;\n        }\n      }\n      data.rotDelta = rot;\n      data.rotOffS = tween.__rotGlobalS - tween.__rotPathS;\n\n      // reset\n      tween.__rotGlobalS = tween.__rotGlobalE = tween.__guideData = tween.__needsRot = undefined;\n    };\n\n    /**\n     * @method tween\n     * @protected\n     * @static\n     **/\n    MotionGuidePlugin.tween = function (tween, prop, value, startValues, endValues, ratio, wait, end) {\n      var data = endValues.guide;\n      if (data == undefined || data === startValues.guide) {\n        return value;\n      }\n      if (data.lastRatio != ratio) {\n        // first time through so calculate what I need to\n        var t = (data.end - data.start) * (wait ? data.end : ratio) + data.start;\n        MotionGuidePlugin.calc(data, t, tween.target);\n        switch (data.orient) {\n          case \"cw\": // mix in the original rotation\n          case \"ccw\":\n          case \"auto\":\n            tween.target.rotation += data.rotOffS + data.rotDelta * ratio;\n            break;\n          case \"fixed\": // follow fixed behaviour to solve potential issues\n          default:\n            tween.target.rotation += data.rotOffS;\n            break;\n        }\n        data.lastRatio = ratio;\n      }\n      if (prop == \"rotation\" && (!data.orient || data.orient == \"false\")) {\n        return value;\n      }\n      return tween.target[prop];\n    };\n\n    /**\n     * Determine the appropriate x/y/rotation information about a path for a given ratio along the path.\n     * Assumes a path object with all optional parameters specified.\n     * @param data Data object you would pass to the \"guide:\" property in a Tween\n     * @param ratio 0-1 Distance along path, values outside 0-1 are \"best guess\"\n     * @param target Object to copy the results onto, will use a new object if not supplied.\n     * @return {Object} The target object or a new object w/ the tweened properties\n     * @static\n     */\n    MotionGuidePlugin.calc = function (data, ratio, target) {\n      if (data._segments == undefined) {\n        throw \"Missing critical pre-calculated information, please file a bug\";\n      }\n      if (target == undefined) {\n        target = {\n          x: 0,\n          y: 0,\n          rotation: 0\n        };\n      }\n      var seg = data._segments;\n      var path = data.path;\n\n      // find segment\n      var pos = data._length * ratio;\n      var cap = seg.length - 2;\n      var n = 0;\n      while (pos > seg[n] && n < cap) {\n        pos -= seg[n];\n        n += 2;\n      }\n\n      // find subline\n      var sublines = seg[n + 1];\n      var i = 0;\n      cap = sublines.length - 1;\n      while (pos > sublines[i] && i < cap) {\n        pos -= sublines[i];\n        i++;\n      }\n      var t = i / ++cap + pos / (cap * sublines[i]);\n\n      // find x/y\n      n = n * 2 + 2;\n      var inv = 1 - t;\n      target.x = inv * inv * path[n - 2] + 2 * inv * t * path[n + 0] + t * t * path[n + 2];\n      target.y = inv * inv * path[n - 1] + 2 * inv * t * path[n + 1] + t * t * path[n + 3];\n\n      // orientation\n      if (data.orient) {\n        target.rotation = 57.2957795 * Math.atan2((path[n + 1] - path[n - 1]) * inv + (path[n + 3] - path[n + 1]) * t, (path[n + 0] - path[n - 2]) * inv + (path[n + 2] - path[n + 0]) * t);\n      }\n      return target;\n    };\n    createjs.MotionGuidePlugin = MotionGuidePlugin;\n  })();\n\n  //##############################################################################\n  // version.js\n  //##############################################################################\n\n  (function () {\n    /**\n     * Static class holding library specific information such as the version and buildDate of\n     * the library.\n     * @class TweenJS\n     **/\n    var s = createjs.TweenJS = createjs.TweenJS || {};\n\n    /**\n     * The version string for this release.\n     * @property version\n     * @type String\n     * @static\n     **/\n    s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n    /**\n     * The build date for this release in UTC format.\n     * @property buildDate\n     * @type String\n     * @static\n     **/\n    s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n  })();\n  {\n    module.exports = commonjsGlobal.createjs;\n  }\n})(createjs, createjs.exports);\nvar createjsExports = createjs.exports;\n\n// convert the given global Stage coordinates to ROS coordinates\ncreatejsExports.Stage.prototype.globalToRos = function (x, y) {\n  var rosX = (x - this.x) / this.scaleX;\n  var rosY = (this.y - y) / this.scaleY;\n  return new ROSLIB.Vector3({\n    x: rosX,\n    y: rosY\n  });\n};\n\n// convert the given ROS coordinates to global Stage coordinates\ncreatejsExports.Stage.prototype.rosToGlobal = function (pos) {\n  var x = pos.x * this.scaleX + this.x;\n  var y = pos.y * this.scaleY + this.y;\n  return {\n    x: x,\n    y: y\n  };\n};\n\n// convert a ROS quaternion to theta in degrees\ncreatejsExports.Stage.prototype.rosQuaternionToGlobalTheta = function (orientation) {\n  // See https://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Rotation_matrices\n  // here we use [x y z] = R * [1 0 0]\n  var q0 = orientation.w;\n  var q1 = orientation.x;\n  var q2 = orientation.y;\n  var q3 = orientation.z;\n  // Canvas rotation is clock wise and in degrees\n  return -Math.atan2(2 * (q0 * q3 + q1 * q2), 1 - 2 * (q2 * q2 + q3 * q3)) * 180.0 / Math.PI;\n};\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar ImageMap = /*@__PURE__*/function (superclass) {\n  function ImageMap(options) {\n    options = options || {};\n    var message = options.message;\n    var image = options.image;\n\n    // create the bitmap\n    superclass.call(this, image);\n\n    // save the metadata we need\n    this.pose = new ROSLIB.Pose({\n      position: message.origin.position,\n      orientation: message.origin.orientation\n    });\n\n    // set the size\n    this.width = message.width;\n    this.height = message.height;\n\n    // change Y direction\n    this.y = -this.height * message.resolution;\n\n    // scale the image\n    this.scaleX = message.resolution;\n    this.scaleY = message.resolution;\n    this.width *= this.scaleX;\n    this.height *= this.scaleY;\n\n    // set the pose\n    this.x += this.pose.position.x;\n    this.y -= this.pose.position.y;\n  }\n  if (superclass) ImageMap.__proto__ = superclass;\n  ImageMap.prototype = Object.create(superclass && superclass.prototype);\n  ImageMap.prototype.constructor = ImageMap;\n  return ImageMap;\n}(createjsExports.Bitmap);\nvar eventemitter2 = {\n  exports: {}\n};\n\n/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\neventemitter2.exports;\n(function (module, exports) {\n  !function (undefined$1) {\n    var hasOwnProperty = Object.hasOwnProperty;\n    var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    var defaultMaxListeners = 10;\n    var nextTickSupported = typeof process == 'object' && typeof process.nextTick == 'function';\n    var symbolsSupported = typeof Symbol === 'function';\n    var reflectSupported = typeof Reflect === 'object';\n    var setImmediateSupported = typeof setImmediate === 'function';\n    var _setImmediate = setImmediateSupported ? setImmediate : setTimeout;\n    var ownKeys = symbolsSupported ? reflectSupported && typeof Reflect.ownKeys === 'function' ? Reflect.ownKeys : function (obj) {\n      var arr = Object.getOwnPropertyNames(obj);\n      arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n      return arr;\n    } : Object.keys;\n    function init() {\n      this._events = {};\n      if (this._conf) {\n        configure.call(this, this._conf);\n      }\n    }\n    function configure(conf) {\n      if (conf) {\n        this._conf = conf;\n        conf.delimiter && (this.delimiter = conf.delimiter);\n        if (conf.maxListeners !== undefined$1) {\n          this._maxListeners = conf.maxListeners;\n        }\n        conf.wildcard && (this.wildcard = conf.wildcard);\n        conf.newListener && (this._newListener = conf.newListener);\n        conf.removeListener && (this._removeListener = conf.removeListener);\n        conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n        conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n        if (this.wildcard) {\n          this.listenerTree = {};\n        }\n      }\n    }\n    function logPossibleMemoryLeak(count, eventName) {\n      var errorMsg = '(node) warning: possible EventEmitter memory ' + 'leak detected. ' + count + ' listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.';\n      if (this.verboseMemoryLeak) {\n        errorMsg += ' Event name: ' + eventName + '.';\n      }\n      if (typeof process !== 'undefined' && process.emitWarning) {\n        var e = new Error(errorMsg);\n        e.name = 'MaxListenersExceededWarning';\n        e.emitter = this;\n        e.count = count;\n        process.emitWarning(e);\n      } else {\n        console.error(errorMsg);\n        if (console.trace) {\n          console.trace();\n        }\n      }\n    }\n    var toArray = function (a, b, c) {\n      var arguments$1 = arguments;\n      var n = arguments.length;\n      switch (n) {\n        case 0:\n          return [];\n        case 1:\n          return [a];\n        case 2:\n          return [a, b];\n        case 3:\n          return [a, b, c];\n        default:\n          var arr = new Array(n);\n          while (n--) {\n            arr[n] = arguments$1[n];\n          }\n          return arr;\n      }\n    };\n    function toObject(keys, values) {\n      var obj = {};\n      var key;\n      var len = keys.length;\n      var valuesCount = values ? value.length : 0;\n      for (var i = 0; i < len; i++) {\n        key = keys[i];\n        obj[key] = i < valuesCount ? values[i] : undefined$1;\n      }\n      return obj;\n    }\n    function TargetObserver(emitter, target, options) {\n      this._emitter = emitter;\n      this._target = target;\n      this._listeners = {};\n      this._listenersCount = 0;\n      var on, off;\n      if (options.on || options.off) {\n        on = options.on;\n        off = options.off;\n      }\n      if (target.addEventListener) {\n        on = target.addEventListener;\n        off = target.removeEventListener;\n      } else if (target.addListener) {\n        on = target.addListener;\n        off = target.removeListener;\n      } else if (target.on) {\n        on = target.on;\n        off = target.off;\n      }\n      if (!on && !off) {\n        throw Error('target does not implement any known event API');\n      }\n      if (typeof on !== 'function') {\n        throw TypeError('on method must be a function');\n      }\n      if (typeof off !== 'function') {\n        throw TypeError('off method must be a function');\n      }\n      this._on = on;\n      this._off = off;\n      var _observers = emitter._observers;\n      if (_observers) {\n        _observers.push(this);\n      } else {\n        emitter._observers = [this];\n      }\n    }\n    Object.assign(TargetObserver.prototype, {\n      subscribe: function (event, localEvent, reducer) {\n        var observer = this;\n        var target = this._target;\n        var emitter = this._emitter;\n        var listeners = this._listeners;\n        var handler = function () {\n          var args = toArray.apply(null, arguments);\n          var eventObj = {\n            data: args,\n            name: localEvent,\n            original: event\n          };\n          if (reducer) {\n            var result = reducer.call(target, eventObj);\n            if (result !== false) {\n              emitter.emit.apply(emitter, [eventObj.name].concat(args));\n            }\n            return;\n          }\n          emitter.emit.apply(emitter, [localEvent].concat(args));\n        };\n        if (listeners[event]) {\n          throw Error('Event \\'' + event + '\\' is already listening');\n        }\n        this._listenersCount++;\n        if (emitter._newListener && emitter._removeListener && !observer._onNewListener) {\n          this._onNewListener = function (_event) {\n            if (_event === localEvent && listeners[event] === null) {\n              listeners[event] = handler;\n              observer._on.call(target, event, handler);\n            }\n          };\n          emitter.on('newListener', this._onNewListener);\n          this._onRemoveListener = function (_event) {\n            if (_event === localEvent && !emitter.hasListeners(_event) && listeners[event]) {\n              listeners[event] = null;\n              observer._off.call(target, event, handler);\n            }\n          };\n          listeners[event] = null;\n          emitter.on('removeListener', this._onRemoveListener);\n        } else {\n          listeners[event] = handler;\n          observer._on.call(target, event, handler);\n        }\n      },\n      unsubscribe: function (event) {\n        var observer = this;\n        var listeners = this._listeners;\n        var emitter = this._emitter;\n        var handler;\n        var events;\n        var off = this._off;\n        var target = this._target;\n        var i;\n        if (event && typeof event !== 'string') {\n          throw TypeError('event must be a string');\n        }\n        function clearRefs() {\n          if (observer._onNewListener) {\n            emitter.off('newListener', observer._onNewListener);\n            emitter.off('removeListener', observer._onRemoveListener);\n            observer._onNewListener = null;\n            observer._onRemoveListener = null;\n          }\n          var index = findTargetIndex.call(emitter, observer);\n          emitter._observers.splice(index, 1);\n        }\n        if (event) {\n          handler = listeners[event];\n          if (!handler) {\n            return;\n          }\n          off.call(target, event, handler);\n          delete listeners[event];\n          if (! --this._listenersCount) {\n            clearRefs();\n          }\n        } else {\n          events = ownKeys(listeners);\n          i = events.length;\n          while (i-- > 0) {\n            event = events[i];\n            off.call(target, event, listeners[event]);\n          }\n          this._listeners = {};\n          this._listenersCount = 0;\n          clearRefs();\n        }\n      }\n    });\n    function resolveOptions(options, schema, reducers, allowUnknown) {\n      var computedOptions = Object.assign({}, schema);\n      if (!options) {\n        return computedOptions;\n      }\n      if (typeof options !== 'object') {\n        throw TypeError('options must be an object');\n      }\n      var keys = Object.keys(options);\n      var length = keys.length;\n      var option, value;\n      var reducer;\n      function reject(reason) {\n        throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''));\n      }\n      for (var i = 0; i < length; i++) {\n        option = keys[i];\n        if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n          throw Error('Unknown \"' + option + '\" option');\n        }\n        value = options[option];\n        if (value !== undefined$1) {\n          reducer = reducers[option];\n          computedOptions[option] = reducer ? reducer(value, reject) : value;\n        }\n      }\n      return computedOptions;\n    }\n    function constructorReducer(value, reject) {\n      if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n        reject('value must be a constructor');\n      }\n      return value;\n    }\n    function makeTypeReducer(types) {\n      var message = 'value must be type of ' + types.join('|');\n      var len = types.length;\n      var firstType = types[0];\n      var secondType = types[1];\n      if (len === 1) {\n        return function (v, reject) {\n          if (typeof v === firstType) {\n            return v;\n          }\n          reject(message);\n        };\n      }\n      if (len === 2) {\n        return function (v, reject) {\n          var kind = typeof v;\n          if (kind === firstType || kind === secondType) {\n            return v;\n          }\n          reject(message);\n        };\n      }\n      return function (v, reject) {\n        var kind = typeof v;\n        var i = len;\n        while (i-- > 0) {\n          if (kind === types[i]) {\n            return v;\n          }\n        }\n        reject(message);\n      };\n    }\n    var functionReducer = makeTypeReducer(['function']);\n    var objectFunctionReducer = makeTypeReducer(['object', 'function']);\n    function makeCancelablePromise(Promise, executor, options) {\n      var isCancelable;\n      var callbacks;\n      var timer = 0;\n      var subscriptionClosed;\n      var promise = new Promise(function (resolve, reject, onCancel) {\n        options = resolveOptions(options, {\n          timeout: 0,\n          overload: false\n        }, {\n          timeout: function (value, reject) {\n            value *= 1;\n            if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n              reject('timeout must be a positive number');\n            }\n            return value;\n          }\n        });\n        isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n        function cleanup() {\n          if (callbacks) {\n            callbacks = null;\n          }\n          if (timer) {\n            clearTimeout(timer);\n            timer = 0;\n          }\n        }\n        var _resolve = function (value) {\n          cleanup();\n          resolve(value);\n        };\n        var _reject = function (err) {\n          cleanup();\n          reject(err);\n        };\n        if (isCancelable) {\n          executor(_resolve, _reject, onCancel);\n        } else {\n          callbacks = [function (reason) {\n            _reject(reason || Error('canceled'));\n          }];\n          executor(_resolve, _reject, function (cb) {\n            if (subscriptionClosed) {\n              throw Error('Unable to subscribe on cancel event asynchronously');\n            }\n            if (typeof cb !== 'function') {\n              throw TypeError('onCancel callback must be a function');\n            }\n            callbacks.push(cb);\n          });\n          subscriptionClosed = true;\n        }\n        if (options.timeout > 0) {\n          timer = setTimeout(function () {\n            var reason = Error('timeout');\n            reason.code = 'ETIMEDOUT';\n            timer = 0;\n            promise.cancel(reason);\n            reject(reason);\n          }, options.timeout);\n        }\n      });\n      if (!isCancelable) {\n        promise.cancel = function (reason) {\n          if (!callbacks) {\n            return;\n          }\n          var length = callbacks.length;\n          for (var i = 1; i < length; i++) {\n            callbacks[i](reason);\n          }\n          // internal callback to reject the promise\n          callbacks[0](reason);\n          callbacks = null;\n        };\n      }\n      return promise;\n    }\n    function findTargetIndex(observer) {\n      var observers = this._observers;\n      if (!observers) {\n        return -1;\n      }\n      var len = observers.length;\n      for (var i = 0; i < len; i++) {\n        if (observers[i]._target === observer) {\n          return i;\n        }\n      }\n      return -1;\n    }\n\n    // Attention, function return type now is array, always !\n    // It has zero elements if no any matches found and one or more\n    // elements (leafs) if there are matches\n    //\n    function searchListenerTree(handlers, type, tree, i, typeLength) {\n      if (!tree) {\n        return null;\n      }\n      if (i === 0) {\n        var kind = typeof type;\n        if (kind === 'string') {\n          var ns,\n            n,\n            l = 0,\n            j = 0,\n            delimiter = this.delimiter,\n            dl = delimiter.length;\n          if ((n = type.indexOf(delimiter)) !== -1) {\n            ns = new Array(5);\n            do {\n              ns[l++] = type.slice(j, n);\n              j = n + dl;\n            } while ((n = type.indexOf(delimiter, j)) !== -1);\n            ns[l++] = type.slice(j);\n            type = ns;\n            typeLength = l;\n          } else {\n            type = [type];\n            typeLength = 1;\n          }\n        } else if (kind === 'object') {\n          typeLength = type.length;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      }\n      var listeners = null,\n        branch,\n        xTree,\n        xxTree,\n        isolatedBranch,\n        endReached,\n        currentType = type[i],\n        nextType = type[i + 1],\n        branches,\n        _listeners;\n      if (i === typeLength) {\n        //\n        // If at the end of the event(s) list and the tree has listeners\n        // invoke those listeners.\n        //\n\n        if (tree._listeners) {\n          if (typeof tree._listeners === 'function') {\n            handlers && handlers.push(tree._listeners);\n            listeners = [tree];\n          } else {\n            handlers && handlers.push.apply(handlers, tree._listeners);\n            listeners = [tree];\n          }\n        }\n      } else {\n        if (currentType === '*') {\n          //\n          // If the event emitted is '*' at this part\n          // or there is a concrete match at this patch\n          //\n          branches = ownKeys(tree);\n          n = branches.length;\n          while (n-- > 0) {\n            branch = branches[n];\n            if (branch !== '_listeners') {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n              if (_listeners) {\n                if (listeners) {\n                  listeners.push.apply(listeners, _listeners);\n                } else {\n                  listeners = _listeners;\n                }\n              }\n            }\n          }\n          return listeners;\n        } else if (currentType === '**') {\n          endReached = i + 1 === typeLength || i + 2 === typeLength && nextType === '*';\n          if (endReached && tree._listeners) {\n            // The next element has a _listeners, add it to the handlers.\n            listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n          }\n          branches = ownKeys(tree);\n          n = branches.length;\n          while (n-- > 0) {\n            branch = branches[n];\n            if (branch !== '_listeners') {\n              if (branch === '*' || branch === '**') {\n                if (tree[branch]._listeners && !endReached) {\n                  _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                  if (_listeners) {\n                    if (listeners) {\n                      listeners.push.apply(listeners, _listeners);\n                    } else {\n                      listeners = _listeners;\n                    }\n                  }\n                }\n                _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n              } else if (branch === nextType) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n              } else {\n                // No match on this one, shift into the tree but not in the type array.\n                _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n              }\n              if (_listeners) {\n                if (listeners) {\n                  listeners.push.apply(listeners, _listeners);\n                } else {\n                  listeners = _listeners;\n                }\n              }\n            }\n          }\n          return listeners;\n        } else if (tree[currentType]) {\n          listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n        }\n      }\n      xTree = tree['*'];\n      if (xTree) {\n        //\n        // If the listener tree will allow any match for this part,\n        // then recursively explore all branches of the tree\n        //\n        searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n      }\n      xxTree = tree['**'];\n      if (xxTree) {\n        if (i < typeLength) {\n          if (xxTree._listeners) {\n            // If we have a listener on a '**', it will catch all, so add its handler.\n            searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n          }\n\n          // Build arrays of matching next branches and others.\n          branches = ownKeys(xxTree);\n          n = branches.length;\n          while (n-- > 0) {\n            branch = branches[n];\n            if (branch !== '_listeners') {\n              if (branch === nextType) {\n                // We know the next element will match, so jump twice.\n                searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n              } else if (branch === currentType) {\n                // Current node matches, move into the tree.\n                searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n              } else {\n                isolatedBranch = {};\n                isolatedBranch[branch] = xxTree[branch];\n                searchListenerTree(handlers, type, {\n                  '**': isolatedBranch\n                }, i + 1, typeLength);\n              }\n            }\n          }\n        } else if (xxTree._listeners) {\n          // We have reached the end and still on a '**'\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        } else if (xxTree['*'] && xxTree['*']._listeners) {\n          searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n        }\n      }\n      return listeners;\n    }\n    function growListenerTree(type, listener, prepend) {\n      var len = 0,\n        j = 0,\n        i,\n        delimiter = this.delimiter,\n        dl = delimiter.length,\n        ns;\n      if (typeof type === 'string') {\n        if ((i = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[len++] = type.slice(j, i);\n            j = i + dl;\n          } while ((i = type.indexOf(delimiter, j)) !== -1);\n          ns[len++] = type.slice(j);\n        } else {\n          ns = [type];\n          len = 1;\n        }\n      } else {\n        ns = type;\n        len = type.length;\n      }\n\n      //\n      // Looks for two consecutive '**', if so, don't add the event at all.\n      //\n      if (len > 1) {\n        for (i = 0; i + 1 < len; i++) {\n          if (ns[i] === '**' && ns[i + 1] === '**') {\n            return;\n          }\n        }\n      }\n      var tree = this.listenerTree,\n        name;\n      for (i = 0; i < len; i++) {\n        name = ns[i];\n        tree = tree[name] || (tree[name] = {});\n        if (i === len - 1) {\n          if (!tree._listeners) {\n            tree._listeners = listener;\n          } else {\n            if (typeof tree._listeners === 'function') {\n              tree._listeners = [tree._listeners];\n            }\n            if (prepend) {\n              tree._listeners.unshift(listener);\n            } else {\n              tree._listeners.push(listener);\n            }\n            if (!tree._listeners.warned && this._maxListeners > 0 && tree._listeners.length > this._maxListeners) {\n              tree._listeners.warned = true;\n              logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n            }\n          }\n          return true;\n        }\n      }\n      return true;\n    }\n    function collectTreeEvents(tree, events, root, asArray) {\n      var branches = ownKeys(tree);\n      var i = branches.length;\n      var branch, branchName, path;\n      var hasListeners = tree['_listeners'];\n      var isArrayPath;\n      while (i-- > 0) {\n        branchName = branches[i];\n        branch = tree[branchName];\n        if (branchName === '_listeners') {\n          path = root;\n        } else {\n          path = root ? root.concat(branchName) : [branchName];\n        }\n        isArrayPath = asArray || typeof branchName === 'symbol';\n        hasListeners && events.push(isArrayPath ? path : path.join(this.delimiter));\n        if (typeof branch === 'object') {\n          collectTreeEvents.call(this, branch, events, path, isArrayPath);\n        }\n      }\n      return events;\n    }\n    function recursivelyGarbageCollect(root) {\n      var keys = ownKeys(root);\n      var i = keys.length;\n      var obj, key, flag;\n      while (i-- > 0) {\n        key = keys[i];\n        obj = root[key];\n        if (obj) {\n          flag = true;\n          if (key !== '_listeners' && !recursivelyGarbageCollect(obj)) {\n            delete root[key];\n          }\n        }\n      }\n      return flag;\n    }\n    function Listener(emitter, event, listener) {\n      this.emitter = emitter;\n      this.event = event;\n      this.listener = listener;\n    }\n    Listener.prototype.off = function () {\n      this.emitter.off(this.event, this.listener);\n      return this;\n    };\n    function setupListener(event, listener, options) {\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n        if (promisify === undefined$1) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n          return promisify ? nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args);\n          }) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args);\n          });\n        };\n        listener._async = true;\n        listener._origin = _origin;\n      }\n      return [listener, objectify ? new Listener(this, event, listener) : this];\n    }\n    function EventEmitter(conf) {\n      this._events = {};\n      this._newListener = false;\n      this._removeListener = false;\n      this.verboseMemoryLeak = false;\n      configure.call(this, conf);\n    }\n    EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n    EventEmitter.prototype.listenTo = function (target, events, options) {\n      if (typeof target !== 'object') {\n        throw TypeError('target musts be an object');\n      }\n      var emitter = this;\n      options = resolveOptions(options, {\n        on: undefined$1,\n        off: undefined$1,\n        reducers: undefined$1\n      }, {\n        on: functionReducer,\n        off: functionReducer,\n        reducers: objectFunctionReducer\n      });\n      function listen(events) {\n        if (typeof events !== 'object') {\n          throw TypeError('events must be an object');\n        }\n        var reducers = options.reducers;\n        var index = findTargetIndex.call(emitter, target);\n        var observer;\n        if (index === -1) {\n          observer = new TargetObserver(emitter, target, options);\n        } else {\n          observer = emitter._observers[index];\n        }\n        var keys = ownKeys(events);\n        var len = keys.length;\n        var event;\n        var isSingleReducer = typeof reducers === 'function';\n        for (var i = 0; i < len; i++) {\n          event = keys[i];\n          observer.subscribe(event, events[event] || event, isSingleReducer ? reducers : reducers && reducers[event]);\n        }\n      }\n      isArray(events) ? listen(toObject(events)) : typeof events === 'string' ? listen(toObject(events.split(/\\s+/))) : listen(events);\n      return this;\n    };\n    EventEmitter.prototype.stopListeningTo = function (target, event) {\n      var observers = this._observers;\n      if (!observers) {\n        return false;\n      }\n      var i = observers.length;\n      var observer;\n      var matched = false;\n      if (target && typeof target !== 'object') {\n        throw TypeError('target should be an object');\n      }\n      while (i-- > 0) {\n        observer = observers[i];\n        if (!target || observer._target === target) {\n          observer.unsubscribe(event);\n          matched = true;\n        }\n      }\n      return matched;\n    };\n\n    // By default EventEmitters will print a warning if more than\n    // 10 listeners are added to it. This is a useful default which\n    // helps finding memory leaks.\n    //\n    // Obviously not all Emitters should be limited to 10. This function allows\n    // that to be increased. Set to zero for unlimited.\n\n    EventEmitter.prototype.delimiter = '.';\n    EventEmitter.prototype.setMaxListeners = function (n) {\n      if (n !== undefined$1) {\n        this._maxListeners = n;\n        if (!this._conf) {\n          this._conf = {};\n        }\n        this._conf.maxListeners = n;\n      }\n    };\n    EventEmitter.prototype.getMaxListeners = function () {\n      return this._maxListeners;\n    };\n    EventEmitter.prototype.event = '';\n    EventEmitter.prototype.once = function (event, fn, options) {\n      return this._once(event, fn, false, options);\n    };\n    EventEmitter.prototype.prependOnceListener = function (event, fn, options) {\n      return this._once(event, fn, true, options);\n    };\n    EventEmitter.prototype._once = function (event, fn, prepend, options) {\n      return this._many(event, 1, fn, prepend, options);\n    };\n    EventEmitter.prototype.many = function (event, ttl, fn, options) {\n      return this._many(event, ttl, fn, false, options);\n    };\n    EventEmitter.prototype.prependMany = function (event, ttl, fn, options) {\n      return this._many(event, ttl, fn, true, options);\n    };\n    EventEmitter.prototype._many = function (event, ttl, fn, prepend, options) {\n      var self = this;\n      if (typeof fn !== 'function') {\n        throw new Error('many only accepts instances of Function');\n      }\n      function listener() {\n        if (--ttl === 0) {\n          self.off(event, listener);\n        }\n        return fn.apply(this, arguments);\n      }\n      listener._origin = fn;\n      return this._on(event, listener, prepend, options);\n    };\n    EventEmitter.prototype.emit = function () {\n      var arguments$1 = arguments;\n      if (!this._events && !this._all) {\n        return false;\n      }\n      this._events || init.call(this);\n      var type = arguments[0],\n        ns,\n        wildcard = this.wildcard;\n      var args, l, i, j, containsSymbol;\n      if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) {\n          return false;\n        }\n      }\n      if (wildcard) {\n        ns = type;\n        if (type !== 'newListener' && type !== 'removeListener') {\n          if (typeof type === 'object') {\n            l = type.length;\n            if (symbolsSupported) {\n              for (i = 0; i < l; i++) {\n                if (typeof type[i] === 'symbol') {\n                  containsSymbol = true;\n                  break;\n                }\n              }\n            }\n            if (!containsSymbol) {\n              type = type.join(this.delimiter);\n            }\n          }\n        }\n      }\n      var al = arguments.length;\n      var handler;\n      if (this._all && this._all.length) {\n        handler = this._all.slice();\n        for (i = 0, l = handler.length; i < l; i++) {\n          this.event = type;\n          switch (al) {\n            case 1:\n              handler[i].call(this, type);\n              break;\n            case 2:\n              handler[i].call(this, type, arguments$1[1]);\n              break;\n            case 3:\n              handler[i].call(this, type, arguments$1[1], arguments$1[2]);\n              break;\n            default:\n              handler[i].apply(this, arguments$1);\n          }\n        }\n      }\n      if (wildcard) {\n        handler = [];\n        searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n      } else {\n        handler = this._events[type];\n        if (typeof handler === 'function') {\n          this.event = type;\n          switch (al) {\n            case 1:\n              handler.call(this);\n              break;\n            case 2:\n              handler.call(this, arguments[1]);\n              break;\n            case 3:\n              handler.call(this, arguments[1], arguments[2]);\n              break;\n            default:\n              args = new Array(al - 1);\n              for (j = 1; j < al; j++) {\n                args[j - 1] = arguments$1[j];\n              }\n              handler.apply(this, args);\n          }\n          return true;\n        } else if (handler) {\n          // need to make copy of handlers because list can change in the middle\n          // of emit call\n          handler = handler.slice();\n        }\n      }\n      if (handler && handler.length) {\n        if (al > 3) {\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) {\n            args[j - 1] = arguments$1[j];\n          }\n        }\n        for (i = 0, l = handler.length; i < l; i++) {\n          this.event = type;\n          switch (al) {\n            case 1:\n              handler[i].call(this);\n              break;\n            case 2:\n              handler[i].call(this, arguments$1[1]);\n              break;\n            case 3:\n              handler[i].call(this, arguments$1[1], arguments$1[2]);\n              break;\n            default:\n              handler[i].apply(this, args);\n          }\n        }\n        return true;\n      } else if (!this.ignoreErrors && !this._all && type === 'error') {\n        if (arguments[1] instanceof Error) {\n          throw arguments[1]; // Unhandled 'error' event\n        } else {\n          throw new Error(\"Uncaught, unspecified 'error' event.\");\n        }\n      }\n      return !!this._all;\n    };\n    EventEmitter.prototype.emitAsync = function () {\n      var arguments$1 = arguments;\n      if (!this._events && !this._all) {\n        return false;\n      }\n      this._events || init.call(this);\n      var type = arguments[0],\n        wildcard = this.wildcard,\n        ns,\n        containsSymbol;\n      var args, l, i, j;\n      if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) {\n          return Promise.resolve([false]);\n        }\n      }\n      if (wildcard) {\n        ns = type;\n        if (type !== 'newListener' && type !== 'removeListener') {\n          if (typeof type === 'object') {\n            l = type.length;\n            if (symbolsSupported) {\n              for (i = 0; i < l; i++) {\n                if (typeof type[i] === 'symbol') {\n                  containsSymbol = true;\n                  break;\n                }\n              }\n            }\n            if (!containsSymbol) {\n              type = type.join(this.delimiter);\n            }\n          }\n        }\n      }\n      var promises = [];\n      var al = arguments.length;\n      var handler;\n      if (this._all) {\n        for (i = 0, l = this._all.length; i < l; i++) {\n          this.event = type;\n          switch (al) {\n            case 1:\n              promises.push(this._all[i].call(this, type));\n              break;\n            case 2:\n              promises.push(this._all[i].call(this, type, arguments$1[1]));\n              break;\n            case 3:\n              promises.push(this._all[i].call(this, type, arguments$1[1], arguments$1[2]));\n              break;\n            default:\n              promises.push(this._all[i].apply(this, arguments$1));\n          }\n        }\n      }\n      if (wildcard) {\n        handler = [];\n        searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n      } else {\n        handler = this._events[type];\n      }\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n          case 1:\n            promises.push(handler.call(this));\n            break;\n          case 2:\n            promises.push(handler.call(this, arguments[1]));\n            break;\n          case 3:\n            promises.push(handler.call(this, arguments[1], arguments[2]));\n            break;\n          default:\n            args = new Array(al - 1);\n            for (j = 1; j < al; j++) {\n              args[j - 1] = arguments$1[j];\n            }\n            promises.push(handler.apply(this, args));\n        }\n      } else if (handler && handler.length) {\n        handler = handler.slice();\n        if (al > 3) {\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) {\n            args[j - 1] = arguments$1[j];\n          }\n        }\n        for (i = 0, l = handler.length; i < l; i++) {\n          this.event = type;\n          switch (al) {\n            case 1:\n              promises.push(handler[i].call(this));\n              break;\n            case 2:\n              promises.push(handler[i].call(this, arguments$1[1]));\n              break;\n            case 3:\n              promises.push(handler[i].call(this, arguments$1[1], arguments$1[2]));\n              break;\n            default:\n              promises.push(handler[i].apply(this, args));\n          }\n        }\n      } else if (!this.ignoreErrors && !this._all && type === 'error') {\n        if (arguments[1] instanceof Error) {\n          return Promise.reject(arguments[1]); // Unhandled 'error' event\n        } else {\n          return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n        }\n      }\n      return Promise.all(promises);\n    };\n    EventEmitter.prototype.on = function (type, listener, options) {\n      return this._on(type, listener, false, options);\n    };\n    EventEmitter.prototype.prependListener = function (type, listener, options) {\n      return this._on(type, listener, true, options);\n    };\n    EventEmitter.prototype.onAny = function (fn) {\n      return this._onAny(fn, false);\n    };\n    EventEmitter.prototype.prependAny = function (fn) {\n      return this._onAny(fn, true);\n    };\n    EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n    EventEmitter.prototype._onAny = function (fn, prepend) {\n      if (typeof fn !== 'function') {\n        throw new Error('onAny only accepts instances of Function');\n      }\n      if (!this._all) {\n        this._all = [];\n      }\n\n      // Add the function to the event listener collection.\n      if (prepend) {\n        this._all.unshift(fn);\n      } else {\n        this._all.push(fn);\n      }\n      return this;\n    };\n    EventEmitter.prototype._on = function (type, listener, prepend, options) {\n      if (typeof type === 'function') {\n        this._onAny(type, listener);\n        return this;\n      }\n      if (typeof listener !== 'function') {\n        throw new Error('on only accepts instances of Function');\n      }\n      this._events || init.call(this);\n      var returnValue = this,\n        temp;\n      if (options !== undefined$1) {\n        temp = setupListener.call(this, type, listener, options);\n        listener = temp[0];\n        returnValue = temp[1];\n      }\n\n      // To avoid recursion in the case that type == \"newListeners\"! Before\n      // adding it to the listeners, first emit \"newListeners\".\n      if (this._newListener) {\n        this.emit('newListener', type, listener);\n      }\n      if (this.wildcard) {\n        growListenerTree.call(this, type, listener, prepend);\n        return returnValue;\n      }\n      if (!this._events[type]) {\n        // Optimize the case of one listener. Don't need the extra array object.\n        this._events[type] = listener;\n      } else {\n        if (typeof this._events[type] === 'function') {\n          // Change to array.\n          this._events[type] = [this._events[type]];\n        }\n\n        // If we've already got an array, just add\n        if (prepend) {\n          this._events[type].unshift(listener);\n        } else {\n          this._events[type].push(listener);\n        }\n\n        // Check for listener leak\n        if (!this._events[type].warned && this._maxListeners > 0 && this._events[type].length > this._maxListeners) {\n          this._events[type].warned = true;\n          logPossibleMemoryLeak.call(this, this._events[type].length, type);\n        }\n      }\n      return returnValue;\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n      if (typeof listener !== 'function') {\n        throw new Error('removeListener only takes instances of Function');\n      }\n      var handlers,\n        leafs = [];\n      if (this.wildcard) {\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n        if (!leafs) {\n          return this;\n        }\n      } else {\n        // does not use listeners(), so no side effect of creating _events[type]\n        if (!this._events[type]) {\n          return this;\n        }\n        handlers = this._events[type];\n        leafs.push({\n          _listeners: handlers\n        });\n      }\n      for (var iLeaf = 0; iLeaf < leafs.length; iLeaf++) {\n        var leaf = leafs[iLeaf];\n        handlers = leaf._listeners;\n        if (isArray(handlers)) {\n          var position = -1;\n          for (var i = 0, length = handlers.length; i < length; i++) {\n            if (handlers[i] === listener || handlers[i].listener && handlers[i].listener === listener || handlers[i]._origin && handlers[i]._origin === listener) {\n              position = i;\n              break;\n            }\n          }\n          if (position < 0) {\n            continue;\n          }\n          if (this.wildcard) {\n            leaf._listeners.splice(position, 1);\n          } else {\n            this._events[type].splice(position, 1);\n          }\n          if (handlers.length === 0) {\n            if (this.wildcard) {\n              delete leaf._listeners;\n            } else {\n              delete this._events[type];\n            }\n          }\n          if (this._removeListener) {\n            this.emit(\"removeListener\", type, listener);\n          }\n          return this;\n        } else if (handlers === listener || handlers.listener && handlers.listener === listener || handlers._origin && handlers._origin === listener) {\n          if (this.wildcard) {\n            delete leaf._listeners;\n          } else {\n            delete this._events[type];\n          }\n          if (this._removeListener) {\n            this.emit(\"removeListener\", type, listener);\n          }\n        }\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n      return this;\n    };\n    EventEmitter.prototype.offAny = function (fn) {\n      var i = 0,\n        l = 0,\n        fns;\n      if (fn && this._all && this._all.length > 0) {\n        fns = this._all;\n        for (i = 0, l = fns.length; i < l; i++) {\n          if (fn === fns[i]) {\n            fns.splice(i, 1);\n            if (this._removeListener) {\n              this.emit(\"removeListenerAny\", fn);\n            }\n            return this;\n          }\n        }\n      } else {\n        fns = this._all;\n        if (this._removeListener) {\n          for (i = 0, l = fns.length; i < l; i++) {\n            this.emit(\"removeListenerAny\", fns[i]);\n          }\n        }\n        this._all = [];\n      }\n      return this;\n    };\n    EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n    EventEmitter.prototype.removeAllListeners = function (type) {\n      if (type === undefined$1) {\n        !this._events || init.call(this);\n        return this;\n      }\n      if (this.wildcard) {\n        var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0),\n          leaf,\n          i;\n        if (!leafs) {\n          return this;\n        }\n        for (i = 0; i < leafs.length; i++) {\n          leaf = leafs[i];\n          leaf._listeners = null;\n        }\n        this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n      } else if (this._events) {\n        this._events[type] = null;\n      }\n      return this;\n    };\n    EventEmitter.prototype.listeners = function (type) {\n      var _events = this._events;\n      var keys, listeners, allListeners;\n      var i;\n      var listenerTree;\n      if (type === undefined$1) {\n        if (this.wildcard) {\n          throw Error('event name required for wildcard emitter');\n        }\n        if (!_events) {\n          return [];\n        }\n        keys = ownKeys(_events);\n        i = keys.length;\n        allListeners = [];\n        while (i-- > 0) {\n          listeners = _events[keys[i]];\n          if (typeof listeners === 'function') {\n            allListeners.push(listeners);\n          } else {\n            allListeners.push.apply(allListeners, listeners);\n          }\n        }\n        return allListeners;\n      } else {\n        if (this.wildcard) {\n          listenerTree = this.listenerTree;\n          if (!listenerTree) {\n            return [];\n          }\n          var handlers = [];\n          var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n          searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n          return handlers;\n        }\n        if (!_events) {\n          return [];\n        }\n        listeners = _events[type];\n        if (!listeners) {\n          return [];\n        }\n        return typeof listeners === 'function' ? [listeners] : listeners;\n      }\n    };\n    EventEmitter.prototype.eventNames = function (nsAsArray) {\n      var _events = this._events;\n      return this.wildcard ? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : _events ? ownKeys(_events) : [];\n    };\n    EventEmitter.prototype.listenerCount = function (type) {\n      return this.listeners(type).length;\n    };\n    EventEmitter.prototype.hasListeners = function (type) {\n      if (this.wildcard) {\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n        return handlers.length > 0;\n      }\n      var _events = this._events;\n      var _all = this._all;\n      return !!(_all && _all.length || _events && (type === undefined$1 ? ownKeys(_events).length : _events[type]));\n    };\n    EventEmitter.prototype.listenersAny = function () {\n      if (this._all) {\n        return this._all;\n      } else {\n        return [];\n      }\n    };\n    EventEmitter.prototype.waitFor = function (event, options) {\n      var self = this;\n      var type = typeof options;\n      if (type === 'number') {\n        options = {\n          timeout: options\n        };\n      } else if (type === 'function') {\n        options = {\n          filter: options\n        };\n      }\n      options = resolveOptions(options, {\n        timeout: 0,\n        filter: undefined$1,\n        handleError: false,\n        Promise: Promise,\n        overload: false\n      }, {\n        filter: functionReducer,\n        Promise: constructorReducer\n      });\n      return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n        function listener() {\n          var filter = options.filter;\n          if (filter && !filter.apply(self, arguments)) {\n            return;\n          }\n          self.off(event, listener);\n          if (options.handleError) {\n            var err = arguments[0];\n            err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n          } else {\n            resolve(toArray.apply(null, arguments));\n          }\n        }\n        onCancel(function () {\n          self.off(event, listener);\n        });\n        self._on(event, listener, false);\n      }, {\n        timeout: options.timeout,\n        overload: options.overload\n      });\n    };\n    function once(emitter, name, options) {\n      options = resolveOptions(options, {\n        Promise: Promise,\n        timeout: 0,\n        overload: false\n      }, {\n        Promise: constructorReducer\n      });\n      var _Promise = options.Promise;\n      return makeCancelablePromise(_Promise, function (resolve, reject, onCancel) {\n        var handler;\n        if (typeof emitter.addEventListener === 'function') {\n          handler = function () {\n            resolve(toArray.apply(null, arguments));\n          };\n          onCancel(function () {\n            emitter.removeEventListener(name, handler);\n          });\n          emitter.addEventListener(name, handler, {\n            once: true\n          });\n          return;\n        }\n        var eventListener = function () {\n          errorListener && emitter.removeListener('error', errorListener);\n          resolve(toArray.apply(null, arguments));\n        };\n        var errorListener;\n        if (name !== 'error') {\n          errorListener = function (err) {\n            emitter.removeListener(name, eventListener);\n            reject(err);\n          };\n          emitter.once('error', errorListener);\n        }\n        onCancel(function () {\n          errorListener && emitter.removeListener('error', errorListener);\n          emitter.removeListener(name, eventListener);\n        });\n        emitter.once(name, eventListener);\n      }, {\n        timeout: options.timeout,\n        overload: options.overload\n      });\n    }\n    var prototype = EventEmitter.prototype;\n    Object.defineProperties(EventEmitter, {\n      defaultMaxListeners: {\n        get: function () {\n          return prototype._maxListeners;\n        },\n        set: function (n) {\n          if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n            throw TypeError('n must be a non-negative number');\n          }\n          prototype._maxListeners = n;\n        },\n        enumerable: true\n      },\n      once: {\n        value: once,\n        writable: true,\n        configurable: true\n      }\n    });\n    Object.defineProperties(prototype, {\n      _maxListeners: {\n        value: defaultMaxListeners,\n        writable: true,\n        configurable: true\n      },\n      _observers: {\n        value: null,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (typeof undefined$1 === 'function' && undefined$1.amd) {\n      // AMD. Register as an anonymous module.\n      undefined$1(function () {\n        return EventEmitter;\n      });\n    } else {\n      // CommonJS\n      module.exports = EventEmitter;\n    }\n  }();\n})(eventemitter2, eventemitter2.exports);\nvar eventemitter2Exports = eventemitter2.exports;\nvar EventEmitter2 = /*@__PURE__*/getDefaultExportFromCjs(eventemitter2Exports);\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar ImageMapClient = /*@__PURE__*/function (EventEmitter2) {\n  function ImageMapClient(options) {\n    EventEmitter2.call(this);\n    options = options || {};\n    var ros = options.ros;\n    var topic = options.topic || '/map';\n    this.image = options.image;\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // create an empty shape to start with\n    this.currentImage = new createjsExports.Shape();\n\n    // subscribe to the topic\n    var rosTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: topic,\n      messageType: 'nav_msgs/OccupancyGrid'\n    });\n    rosTopic.subscribe(function (message) {\n      // we only need this once\n      rosTopic.unsubscribe();\n\n      // create the image\n      this.currentImage = new ImageMap({\n        message: message,\n        image: this.image\n      });\n      this.rootObject.addChild(this.currentImage);\n      this.emit('change');\n    }.bind(this));\n  }\n  if (EventEmitter2) ImageMapClient.__proto__ = EventEmitter2;\n  ImageMapClient.prototype = Object.create(EventEmitter2 && EventEmitter2.prototype);\n  ImageMapClient.prototype.constructor = ImageMapClient;\n  return ImageMapClient;\n}(EventEmitter2);\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGrid = /*@__PURE__*/function (superclass) {\n  function OccupancyGrid(options) {\n    options = options || {};\n    var message = options.message;\n\n    // internal drawing canvas\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    // set the size\n    canvas.width = message.info.width;\n    canvas.height = message.info.height;\n    var imageData = context.createImageData(canvas.width, canvas.height);\n    for (var row = 0; row < canvas.height; row++) {\n      for (var col = 0; col < canvas.width; col++) {\n        // determine the index into the map data\n        var mapI = col + (canvas.height - row - 1) * canvas.width;\n        // determine the value\n        var data = message.data[mapI];\n        var val;\n        if (data === 100) {\n          val = 0;\n        } else if (data === 0) {\n          val = 255;\n        } else {\n          val = 127;\n        }\n\n        // determine the index into the image data array\n        var i = (col + row * canvas.width) * 4;\n        // r\n        imageData.data[i] = val;\n        // g\n        imageData.data[++i] = val;\n        // b\n        imageData.data[++i] = val;\n        // a\n        imageData.data[++i] = 255;\n      }\n    }\n    context.putImageData(imageData, 0, 0);\n\n    // create the bitmap\n    superclass.call(this, canvas);\n    this.width = canvas.width;\n    this.height = canvas.height;\n\n    // save the metadata we need\n    this.pose = new ROSLIB.Pose({\n      position: message.info.origin.position,\n      orientation: message.info.origin.orientation\n    });\n\n    // change Y direction\n    this.y = -this.height * message.info.resolution;\n\n    // scale the image\n    this.scaleX = message.info.resolution;\n    this.scaleY = message.info.resolution;\n    this.width *= this.scaleX;\n    this.height *= this.scaleY;\n\n    // set the pose\n    this.x += this.pose.position.x;\n    this.y -= this.pose.position.y;\n  }\n  if (superclass) OccupancyGrid.__proto__ = superclass;\n  OccupancyGrid.prototype = Object.create(superclass && superclass.prototype);\n  OccupancyGrid.prototype.constructor = OccupancyGrid;\n  return OccupancyGrid;\n}(createjsExports.Bitmap);\n\n/**\n * @fileOverview\n * @author Raffaello Bonghi - raffaello.bonghi@officinerobotiche.it\n */\n\nvar Grid = /*@__PURE__*/function (superclass) {\n  function Grid(options) {\n    options = options || {};\n    var size = options.size || 10;\n    var cellSize = options.cellSize || 0.1;\n    var lineWidth = options.lineWidth || 0.001;\n    // draw the arrow\n    var graphics = new createjsExports.Graphics();\n    // line width\n    graphics.setStrokeStyle(lineWidth * 5);\n    graphics.beginStroke(createjsExports.Graphics.getRGB(0, 0, 0));\n    graphics.beginFill(createjsExports.Graphics.getRGB(255, 0, 0));\n    graphics.moveTo(-size * cellSize, 0);\n    graphics.lineTo(size * cellSize, 0);\n    graphics.moveTo(0, -size * cellSize);\n    graphics.lineTo(0, size * cellSize);\n    graphics.endFill();\n    graphics.endStroke();\n    graphics.setStrokeStyle(lineWidth);\n    graphics.beginStroke(createjsExports.Graphics.getRGB(0, 0, 0));\n    graphics.beginFill(createjsExports.Graphics.getRGB(255, 0, 0));\n    for (var i = -size; i <= size; i++) {\n      graphics.moveTo(-size * cellSize, i * cellSize);\n      graphics.lineTo(size * cellSize, i * cellSize);\n      graphics.moveTo(i * cellSize, -size * cellSize);\n      graphics.lineTo(i * cellSize, size * cellSize);\n    }\n    graphics.endFill();\n    graphics.endStroke();\n    // create the shape\n    superclass.call(this, graphics);\n  }\n  if (superclass) Grid.__proto__ = superclass;\n  Grid.prototype = Object.create(superclass && superclass.prototype);\n  Grid.prototype.constructor = Grid;\n  return Grid;\n}(createjsExports.Shape);\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGridClient = /*@__PURE__*/function (EventEmitter2) {\n  function OccupancyGridClient(options) {\n    EventEmitter2.call(this);\n    var that = this;\n    options = options || {};\n    var ros = options.ros;\n    var topic = options.topic || '/map';\n    this.continuous = options.continuous;\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // current grid that is displayed\n    // create an empty shape to start with, so that the order remains correct.\n    this.currentGrid = new createjsExports.Shape();\n    this.rootObject.addChild(this.currentGrid);\n    // work-around for a bug in easeljs -- needs a second object to render correctly\n    this.rootObject.addChild(new Grid({\n      size: 1\n    }));\n\n    // subscribe to the topic\n    var rosTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: topic,\n      messageType: 'nav_msgs/OccupancyGrid'\n      // compression : 'png'\n    });\n    rosTopic.subscribe(function (message) {\n      // check for an old map\n      var index = null;\n      if (that.currentGrid) {\n        index = that.rootObject.getChildIndex(that.currentGrid);\n        that.rootObject.removeChild(that.currentGrid);\n      }\n      that.currentGrid = new OccupancyGrid({\n        message: message\n      });\n      if (index !== null) {\n        that.rootObject.addChildAt(that.currentGrid, index);\n      } else {\n        that.rootObject.addChild(that.currentGrid);\n      }\n      that.emit('change');\n\n      // check if we should unsubscribe\n      if (!that.continuous) {\n        rosTopic.unsubscribe();\n      }\n    });\n  }\n  if (EventEmitter2) OccupancyGridClient.__proto__ = EventEmitter2;\n  OccupancyGridClient.prototype = Object.create(EventEmitter2 && EventEmitter2.prototype);\n  OccupancyGridClient.prototype.constructor = OccupancyGridClient;\n  return OccupancyGridClient;\n}(EventEmitter2);\n\n/**\n * @fileOverview\n * @author Jihoon Lee- jihoonlee.in@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGridSrvClient = /*@__PURE__*/function (EventEmitter2) {\n  function OccupancyGridSrvClient(options) {\n    EventEmitter2.call(this);\n    var that = this;\n    options = options || {};\n    var ros = options.ros;\n    var service = options.service || '/static_map';\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // current grid that is displayed\n    this.currentGrid = null;\n\n    // Setting up to the service\n    var rosService = new ROSLIB.Service({\n      ros: ros,\n      name: service,\n      serviceType: 'nav_msgs/GetMap',\n      compression: 'png'\n    });\n    rosService.callService(new ROSLIB.ServiceRequest(), function (response) {\n      // check for an old map\n      if (that.currentGrid) {\n        that.rootObject.removeChild(that.currentGrid);\n      }\n      that.currentGrid = new OccupancyGrid({\n        message: response.map\n      });\n      that.rootObject.addChild(that.currentGrid);\n      that.emit('change', that.currentGrid);\n    });\n  }\n  if (EventEmitter2) OccupancyGridSrvClient.__proto__ = EventEmitter2;\n  OccupancyGridSrvClient.prototype = Object.create(EventEmitter2 && EventEmitter2.prototype);\n  OccupancyGridSrvClient.prototype.constructor = OccupancyGridSrvClient;\n  return OccupancyGridSrvClient;\n}(EventEmitter2);\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar ArrowShape = /*@__PURE__*/function (superclass) {\n  function ArrowShape(options) {\n    var that = this;\n    options = options || {};\n    var size = options.size || 10;\n    var strokeSize = options.strokeSize || 3;\n    var strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n    var fillColor = options.fillColor || createjsExports.Graphics.getRGB(255, 0, 0);\n    var pulse = options.pulse;\n\n    // draw the arrow\n    var graphics = new createjsExports.Graphics();\n    var headLen = size / 3.0;\n    var headWidth = headLen * 2.0 / 3.0;\n    graphics.setStrokeStyle(strokeSize);\n    graphics.beginStroke(strokeColor);\n    graphics.moveTo(0, 0);\n    graphics.lineTo(size - headLen, 0);\n    graphics.beginFill(fillColor);\n    graphics.moveTo(size, 0);\n    graphics.lineTo(size - headLen, headWidth / 2.0);\n    graphics.lineTo(size - headLen, -headWidth / 2.0);\n    graphics.closePath();\n    graphics.endFill();\n    graphics.endStroke();\n\n    // create the shape\n    superclass.call(this, graphics);\n\n    // check if we are pulsing\n    if (pulse) {\n      // have the model \"pulse\"\n      var growCount = 0;\n      var growing = true;\n      createjsExports.Ticker.addEventListener('tick', function () {\n        if (growing) {\n          that.scaleX *= 1.035;\n          that.scaleY *= 1.035;\n          growing = ++growCount < 10;\n        } else {\n          that.scaleX /= 1.035;\n          that.scaleY /= 1.035;\n          growing = --growCount < 0;\n        }\n      });\n    }\n  }\n  if (superclass) ArrowShape.__proto__ = superclass;\n  ArrowShape.prototype = Object.create(superclass && superclass.prototype);\n  ArrowShape.prototype.constructor = ArrowShape;\n  return ArrowShape;\n}(createjsExports.Shape);\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar NavigationArrow = /*@__PURE__*/function (superclass) {\n  function NavigationArrow(options) {\n    var that = this;\n    options = options || {};\n    var size = options.size || 10;\n    var strokeSize = options.strokeSize || 3;\n    var strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n    var fillColor = options.fillColor || createjsExports.Graphics.getRGB(255, 0, 0);\n    var pulse = options.pulse;\n\n    // draw the arrow\n    var graphics = new createjsExports.Graphics();\n    // line width\n    graphics.setStrokeStyle(strokeSize);\n    graphics.moveTo(-size / 2.0, -size / 2.0);\n    graphics.beginStroke(strokeColor);\n    graphics.beginFill(fillColor);\n    graphics.lineTo(size, 0);\n    graphics.lineTo(-size / 2.0, size / 2.0);\n    graphics.closePath();\n    graphics.endFill();\n    graphics.endStroke();\n\n    // create the shape\n    superclass.call(this, graphics);\n\n    // check if we are pulsing\n    if (pulse) {\n      // have the model \"pulse\"\n      var growCount = 0;\n      var growing = true;\n      createjsExports.Ticker.addEventListener('tick', function () {\n        if (growing) {\n          that.scaleX *= 1.035;\n          that.scaleY *= 1.035;\n          growing = ++growCount < 10;\n        } else {\n          that.scaleX /= 1.035;\n          that.scaleY /= 1.035;\n          growing = --growCount < 0;\n        }\n      });\n    }\n  }\n  if (superclass) NavigationArrow.__proto__ = superclass;\n  NavigationArrow.prototype = Object.create(superclass && superclass.prototype);\n  NavigationArrow.prototype.constructor = NavigationArrow;\n  return NavigationArrow;\n}(createjsExports.Shape);\n\n/**\n * @fileOverview\n * @author Inigo Gonzalez - ingonza85@gmail.com\n */\n\nvar NavigationImage = /*@__PURE__*/function (superclass) {\n  function NavigationImage(options) {\n    options = options || {};\n    var size = options.size || 10;\n    var image_url = options.image;\n    var pulse = options.pulse;\n    var alpha = options.alpha || 1;\n    var originals = {};\n    var image = new Image();\n    superclass.call(this, image);\n    var paintImage = function () {\n      var scale = calculateScale(size);\n      this.alpha = alpha;\n      this.scaleX = scale;\n      this.scaleY = scale;\n      this.regY = this.image.height / 2;\n      this.regX = this.image.width / 2;\n      originals['rotation'] = this.rotation;\n      Object.defineProperty(this, 'rotation', {\n        get: function () {\n          return originals['rotation'] + 90;\n        },\n        set: function (value) {\n          originals['rotation'] = value;\n        }\n      });\n      if (pulse) {\n        // have the model \"pulse\"\n        var growCount = 0;\n        var growing = true;\n        var SCALE_SIZE = 1.020;\n        createjsExports.Ticker.addEventListener('tick', function () {\n          if (growing) {\n            this.scaleX *= SCALE_SIZE;\n            this.scaleY *= SCALE_SIZE;\n            growing = ++growCount < 10;\n          } else {\n            this.scaleX /= SCALE_SIZE;\n            this.scaleY /= SCALE_SIZE;\n            growing = --growCount < 0;\n          }\n        });\n      }\n    };\n    image.onload = paintImage.bind(this);\n    image.src = image_url;\n    var calculateScale = function (_size) {\n      return _size / image.width;\n    };\n  }\n  if (superclass) NavigationImage.__proto__ = superclass;\n  NavigationImage.prototype = Object.create(superclass && superclass.prototype);\n  NavigationImage.prototype.constructor = NavigationImage;\n  return NavigationImage;\n}(createjsExports.Bitmap);\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PathShape = /*@__PURE__*/function (superclass) {\n  function PathShape(options) {\n    options = options || {};\n    var path = options.path;\n    this.strokeSize = options.strokeSize || 3;\n    this.strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n\n    // draw the line\n    this.graphics = new createjsExports.Graphics();\n    if (path !== null && typeof path !== 'undefined') {\n      this.graphics.setStrokeStyle(this.strokeSize);\n      this.graphics.beginStroke(this.strokeColor);\n      this.graphics.moveTo(path.poses[0].pose.position.x / this.scaleX, path.poses[0].pose.position.y / -this.scaleY);\n      for (var i = 1; i < path.poses.length; ++i) {\n        this.graphics.lineTo(path.poses[i].pose.position.x / this.scaleX, path.poses[i].pose.position.y / -this.scaleY);\n      }\n      this.graphics.endStroke();\n    }\n\n    // create the shape\n    superclass.call(this, this.graphics);\n  }\n  if (superclass) PathShape.__proto__ = superclass;\n  PathShape.prototype = Object.create(superclass && superclass.prototype);\n  PathShape.prototype.constructor = PathShape;\n  /**\n   * Set the path to draw\n   *\n   * @param path of type nav_msgs/Path\n   */\n  PathShape.prototype.setPath = function setPath(path) {\n    this.graphics.clear();\n    if (path !== null && typeof path !== 'undefined') {\n      this.graphics.setStrokeStyle(this.strokeSize);\n      this.graphics.beginStroke(this.strokeColor);\n      this.graphics.moveTo(path.poses[0].pose.position.x / this.scaleX, path.poses[0].pose.position.y / -this.scaleY);\n      for (var i = 1; i < path.poses.length; ++i) {\n        this.graphics.lineTo(path.poses[i].pose.position.x / this.scaleX, path.poses[i].pose.position.y / -this.scaleY);\n      }\n      this.graphics.endStroke();\n    }\n  };\n  return PathShape;\n}(createjsExports.Shape);\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PolygonMarker = /*@__PURE__*/function (superclass) {\n  function PolygonMarker(options) {\n    //  var that = this;\n    superclass.call(this);\n    options = options || {};\n    this.lineSize = options.lineSize || 3;\n    this.lineColor = options.lineColor || createjsExports.Graphics.getRGB(0, 0, 255, 0.66);\n    this.pointSize = options.pointSize || 10;\n    this.pointColor = options.pointColor || createjsExports.Graphics.getRGB(255, 0, 0, 0.66);\n    this.fillColor = options.pointColor || createjsExports.Graphics.getRGB(0, 255, 0, 0.33);\n    this.lineCallBack = options.lineCallBack;\n    this.pointCallBack = options.pointCallBack;\n\n    // Array of point shapes\n    //  this.points = [];\n    this.pointContainer = new createjsExports.Container();\n\n    // Array of line shapes\n    //  this.lines = [];\n    this.lineContainer = new createjsExports.Container();\n    this.fillShape = new createjsExports.Shape();\n\n    // Container with all the lines and points\n    this.addChild(this.fillShape);\n    this.addChild(this.lineContainer);\n    this.addChild(this.pointContainer);\n  }\n  if (superclass) PolygonMarker.__proto__ = superclass;\n  PolygonMarker.prototype = Object.create(superclass && superclass.prototype);\n  PolygonMarker.prototype.constructor = PolygonMarker;\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.createLineShape = function createLineShape(startPoint, endPoint) {\n    var line = new createjsExports.Shape();\n    //  line.graphics.setStrokeStyle(this.strokeSize);\n    //  line.graphics.beginStroke(this.strokeColor);\n    //  line.graphics.moveTo(startPoint.x, startPoint.y);\n    //  line.graphics.lineTo(endPoint.x, endPoint.y);\n    this.editLineShape(line, startPoint, endPoint);\n    var that = this;\n    line.addEventListener('mousedown', function (event) {\n      if (that.lineCallBack !== null && typeof that.lineCallBack !== 'undefined') {\n        that.lineCallBack('mousedown', event, that.lineContainer.getChildIndex(event.target));\n      }\n    });\n    return line;\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.editLineShape = function editLineShape(line, startPoint, endPoint) {\n    line.graphics.clear();\n    line.graphics.setStrokeStyle(this.lineSize);\n    line.graphics.beginStroke(this.lineColor);\n    line.graphics.moveTo(startPoint.x, startPoint.y);\n    line.graphics.lineTo(endPoint.x, endPoint.y);\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.createPointShape = function createPointShape(pos) {\n    var point = new createjsExports.Shape();\n    point.graphics.beginFill(this.pointColor);\n    point.graphics.drawCircle(0, 0, this.pointSize);\n    point.x = pos.x;\n    point.y = -pos.y;\n    var that = this;\n    point.addEventListener('mousedown', function (event) {\n      if (that.pointCallBack !== null && typeof that.pointCallBack !== 'undefined') {\n        that.pointCallBack('mousedown', event, that.pointContainer.getChildIndex(event.target));\n      }\n    });\n    return point;\n  };\n  /**\n   * Adds a point to the polygon\n   *\n   * @param position of type ROSLIB.Vector3\n   */\n  PolygonMarker.prototype.addPoint = function addPoint(pos) {\n    var point = this.createPointShape(pos);\n    this.pointContainer.addChild(point);\n    var numPoints = this.pointContainer.numChildren;\n\n    // 0 points -> 1 point, 0 lines\n    // 1 point  -> 2 points, lines: add line between previous and new point, add line between new point and first point\n    // 2 points -> 3 points, 3 lines: change last line, add line between new point and first point\n    // 3 points -> 4 points, 4 lines: change last line, add line between new point and first point\n    // etc\n\n    if (numPoints < 2) ;else if (numPoints < 3) {\n      // Now 2 points: add line between previous and new point\n      var line = this.createLineShape(this.pointContainer.getChildAt(numPoints - 2), point);\n      this.lineContainer.addChild(line);\n    }\n    if (numPoints > 2) {\n      // Now 3 or more points: change last line\n      this.editLineShape(this.lineContainer.getChildAt(numPoints - 2), this.pointContainer.getChildAt(numPoints - 2), point);\n    }\n    if (numPoints > 1) {\n      // Now 2 or more points: add line between new point and first point\n      var lineEnd = this.createLineShape(point, this.pointContainer.getChildAt(0));\n      this.lineContainer.addChild(lineEnd);\n    }\n    this.drawFill();\n  };\n  /**\n   * Removes a point from the polygon\n   *\n   * @param obj either an index (integer) or a point shape of the polygon\n   */\n  PolygonMarker.prototype.remPoint = function remPoint(obj) {\n    var index;\n    //  var point;\n    if (obj instanceof createjsExports.Shape) {\n      index = this.pointContainer.getChildIndex(obj);\n      //      point = obj;\n    } else {\n      index = obj;\n      //      point = this.pointContainer.getChildAt(index);\n    }\n\n    // 0 points -> 0 points, 0 lines\n    // 1 point  -> 0 points, 0 lines\n    // 2 points -> 1 point,  0 lines: remove all lines\n    // 3 points -> 2 points, 2 lines: change line before point to remove, remove line after point to remove\n    // 4 points -> 3 points, 3 lines: change line before point to remove, remove line after point to remove\n    // etc\n\n    var numPoints = this.pointContainer.numChildren;\n    if (numPoints < 2) ;else if (numPoints < 3) {\n      // 2 points: remove all lines\n      this.lineContainer.removeAllChildren();\n    } else {\n      // 3 or more points: change line before point to remove, remove line after point to remove\n      this.editLineShape(this.lineContainer.getChildAt((index - 1 + numPoints) % numPoints), this.pointContainer.getChildAt((index - 1 + numPoints) % numPoints), this.pointContainer.getChildAt((index + 1) % numPoints));\n      this.lineContainer.removeChildAt(index);\n    }\n    this.pointContainer.removeChildAt(index);\n    //  this.points.splice(index, 1);\n\n    this.drawFill();\n  };\n  /**\n   * Moves a point of the polygon\n   *\n   * @param obj either an index (integer) or a point shape of the polygon\n   * @param position of type ROSLIB.Vector3\n   */\n  PolygonMarker.prototype.movePoint = function movePoint(obj, newPos) {\n    var index;\n    var point;\n    if (obj instanceof createjsExports.Shape) {\n      index = this.pointContainer.getChildIndex(obj);\n      point = obj;\n    } else {\n      index = obj;\n      point = this.pointContainer.getChildAt(index);\n    }\n    point.x = newPos.x;\n    point.y = -newPos.y;\n    var numPoints = this.pointContainer.numChildren;\n    if (numPoints > 1) {\n      // line before moved point\n      var line1 = this.lineContainer.getChildAt((index - 1 + numPoints) % numPoints);\n      this.editLineShape(line1, this.pointContainer.getChildAt((index - 1 + numPoints) % numPoints), point);\n\n      // line after moved point\n      var line2 = this.lineContainer.getChildAt(index);\n      this.editLineShape(line2, point, this.pointContainer.getChildAt((index + 1) % numPoints));\n    }\n    this.drawFill();\n  };\n  /**\n   * Splits a line of the polygon: inserts a point at the center of the line\n   *\n   * @param obj either an index (integer) or a line shape of the polygon\n   */\n  PolygonMarker.prototype.splitLine = function splitLine(obj) {\n    var index;\n    var line;\n    if (obj instanceof createjsExports.Shape) {\n      index = this.lineContainer.getChildIndex(obj);\n      line = obj;\n    } else {\n      index = obj;\n      line = this.lineContainer.getChildAt(index);\n    }\n    var numPoints = this.pointContainer.numChildren;\n    var xs = this.pointContainer.getChildAt(index).x;\n    var ys = this.pointContainer.getChildAt(index).y;\n    var xe = this.pointContainer.getChildAt((index + 1) % numPoints).x;\n    var ye = this.pointContainer.getChildAt((index + 1) % numPoints).y;\n    var xh = (xs + xe) / 2.0;\n    var yh = (ys + ye) / 2.0;\n    var pos = new ROSLIB.Vector3({\n      x: xh,\n      y: -yh\n    });\n\n    // Add a point in the center of the line to split\n    var point = this.createPointShape(pos);\n    this.pointContainer.addChildAt(point, index + 1);\n    ++numPoints;\n\n    // Add a line between the new point and the end of the line to split\n    var lineNew = this.createLineShape(point, this.pointContainer.getChildAt((index + 2) % numPoints));\n    this.lineContainer.addChildAt(lineNew, index + 1);\n\n    // Set the endpoint of the line to split to the new point\n    this.editLineShape(line, this.pointContainer.getChildAt(index), point);\n    this.drawFill();\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.drawFill = function drawFill() {\n    var numPoints = this.pointContainer.numChildren;\n    if (numPoints > 2) {\n      var g = this.fillShape.graphics;\n      g.clear();\n      g.setStrokeStyle(0);\n      g.beginStroke();\n      g.beginFill(this.fillColor);\n      g.moveTo(this.pointContainer.getChildAt(0).x, this.pointContainer.getChildAt(0).y);\n      for (var i = 1; i < numPoints; ++i) {\n        g.lineTo(this.pointContainer.getChildAt(i).x, this.pointContainer.getChildAt(i).y);\n      }\n      g.closePath();\n      g.endFill();\n      g.endStroke();\n    } else {\n      this.fillShape.graphics.clear();\n    }\n  };\n  return PolygonMarker;\n}(createjsExports.Container);\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar TraceShape = /*@__PURE__*/function (superclass) {\n  function TraceShape(options) {\n    //\tvar that = this;\n    options = options || {};\n    var pose = options.pose;\n    this.strokeSize = options.strokeSize || 3;\n    this.strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n    this.maxPoses = options.maxPoses || options.maxPoses === 0 ? options.maxPoses : 100;\n    this.minDist = options.minDist || 0.05;\n\n    // Store minDist as the square of it\n    this.minDist = this.minDist * this.minDist;\n\n    // Array of the poses\n    // TODO: do we need this?\n    this.poses = [];\n\n    // Create the graphics\n    this.graphics = new createjsExports.Graphics();\n    this.graphics.setStrokeStyle(this.strokeSize);\n    this.graphics.beginStroke(this.strokeColor);\n\n    // Add first pose if given\n    if (pose !== null && typeof pose !== 'undefined') {\n      this.poses.push(pose);\n    }\n\n    // Create the shape\n    superclass.call(this, this.graphics);\n  }\n  if (superclass) TraceShape.__proto__ = superclass;\n  TraceShape.prototype = Object.create(superclass && superclass.prototype);\n  TraceShape.prototype.constructor = TraceShape;\n  /**\n   * Adds a pose to the trace and updates the graphics\n   *\n   * @param pose of type ROSLIB.Pose\n   */\n  TraceShape.prototype.addPose = function addPose(pose) {\n    var last = this.poses.length - 1;\n    if (last < 0) {\n      this.poses.push(pose);\n      this.graphics.moveTo(pose.position.x / this.scaleX, pose.position.y / -this.scaleY);\n    } else {\n      var prevX = this.poses[last].position.x;\n      var prevY = this.poses[last].position.y;\n      var dx = pose.position.x - prevX;\n      var dy = pose.position.y - prevY;\n      if (dx * dx + dy * dy > this.minDist) {\n        this.graphics.lineTo(pose.position.x / this.scaleX, pose.position.y / -this.scaleY);\n        this.poses.push(pose);\n      }\n    }\n    if (this.maxPoses > 0 && this.maxPoses < this.poses.length) {\n      this.popFront();\n    }\n  };\n  /**\n   * Removes front pose and updates the graphics\n   */\n  TraceShape.prototype.popFront = function popFront() {\n    if (this.poses.length > 0) {\n      this.poses.shift();\n      // TODO: shift drawing instructions rather than doing it all over\n      this.graphics.clear();\n      this.graphics.setStrokeStyle(this.strokeSize);\n      this.graphics.beginStroke(this.strokeColor);\n      this.graphics.lineTo(this.poses[0].position.x / this.scaleX, this.poses[0].position.y / -this.scaleY);\n      for (var i = 1; i < this.poses.length; ++i) {\n        this.graphics.lineTo(this.poses[i].position.x / this.scaleX, this.poses[i].position.y / -this.scaleY);\n      }\n    }\n  };\n  return TraceShape;\n}(createjsExports.Shape);\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PanView = function PanView(options) {\n  options = options || {};\n  this.rootObject = options.rootObject;\n\n  // get a handle to the stage\n  if (this.rootObject instanceof createjsExports.Stage) {\n    this.stage = this.rootObject;\n  } else {\n    this.stage = this.rootObject.getStage();\n  }\n  this.startPos = new ROSLIB.Vector3();\n};\nPanView.prototype.startPan = function startPan(startX, startY) {\n  this.startPos.x = startX;\n  this.startPos.y = startY;\n};\nPanView.prototype.pan = function pan(curX, curY) {\n  this.stage.x += curX - this.startPos.x;\n  this.startPos.x = curX;\n  this.stage.y += curY - this.startPos.y;\n  this.startPos.y = curY;\n};\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Viewer = function Viewer(options) {\n  options = options || {};\n  var divID = options.divID;\n  this.width = options.width;\n  this.height = options.height;\n  var background = options.background || '#111111';\n\n  // create the canvas to render to\n  var canvas = document.createElement('canvas');\n  canvas.width = this.width;\n  canvas.height = this.height;\n  canvas.style.background = background;\n  document.getElementById(divID).appendChild(canvas);\n  // create the easel to use\n  this.scene = new createjsExports.Stage(canvas);\n\n  // change Y axis center\n  this.scene.y = this.height;\n\n  // add the renderer to the page\n  document.getElementById(divID).appendChild(canvas);\n\n  // update at 30fps\n  createjsExports.Ticker.framerate = 30;\n  createjsExports.Ticker.addEventListener('tick', this.scene);\n};\n/**\n * Add the given createjs object to the global scene in the viewer.\n *\n * @param object - the object to add\n */\nViewer.prototype.addObject = function addObject(object) {\n  this.scene.addChild(object);\n};\n/**\n * Scale the scene to fit the given width and height into the current canvas.\n *\n * @param width - the width to scale to in meters\n * @param height - the height to scale to in meters\n */\nViewer.prototype.scaleToDimensions = function scaleToDimensions(width, height) {\n  // restore to values before shifting, if ocurred\n  this.scene.x = typeof this.scene.x_prev_shift !== 'undefined' ? this.scene.x_prev_shift : this.scene.x;\n  this.scene.y = typeof this.scene.y_prev_shift !== 'undefined' ? this.scene.y_prev_shift : this.scene.y;\n\n  // save scene scaling\n  this.scene.scaleX = this.width / width;\n  this.scene.scaleY = this.height / height;\n};\n/**\n * Shift the main view of the canvas by the given amount. This is based on the\n * ROS coordinate system. That is, Y is opposite that of a traditional canvas.\n *\n * @param x - the amount to shift by in the x direction in meters\n * @param y - the amount to shift by in the y direction in meters\n */\nViewer.prototype.shift = function shift(x, y) {\n  // save current offset\n  this.scene.x_prev_shift = this.scene.x;\n  this.scene.y_prev_shift = this.scene.y;\n\n  // shift scene by scaling the desired offset\n  this.scene.x -= x * this.scene.scaleX;\n  this.scene.y += y * this.scene.scaleY;\n};\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar ZoomView = function ZoomView(options) {\n  options = options || {};\n  this.rootObject = options.rootObject;\n  this.minScale = options.minScale || 0.001;\n\n  // get a handle to the stage\n  if (this.rootObject instanceof createjsExports.Stage) {\n    this.stage = this.rootObject;\n  } else {\n    this.stage = this.rootObject.getStage();\n  }\n  this.center = new ROSLIB.Vector3();\n  this.startShift = new ROSLIB.Vector3();\n  this.startScale = new ROSLIB.Vector3();\n};\nZoomView.prototype.startZoom = function startZoom(centerX, centerY) {\n  this.center.x = centerX;\n  this.center.y = centerY;\n  this.startShift.x = this.stage.x;\n  this.startShift.y = this.stage.y;\n  this.startScale.x = this.stage.scaleX;\n  this.startScale.y = this.stage.scaleY;\n};\nZoomView.prototype.zoom = function zoom(zoom$1) {\n  // Make sure scale doesn't become too small\n  if (this.startScale.x * zoom$1 < this.minScale) {\n    zoom$1 = this.minScale / this.startScale.x;\n  }\n  if (this.startScale.y * zoom$1 < this.minScale) {\n    zoom$1 = this.minScale / this.startScale.y;\n  }\n  this.stage.scaleX = this.startScale.x * zoom$1;\n  this.stage.scaleY = this.startScale.y * zoom$1;\n  this.stage.x = this.startShift.x - (this.center.x - this.startShift.x) * (this.stage.scaleX / this.startScale.x - 1);\n  this.stage.y = this.startShift.y - (this.center.y - this.startShift.y) * (this.stage.scaleY / this.startScale.y - 1);\n};\nexport { ArrowShape, Grid, ImageMap, ImageMapClient, NavigationArrow, NavigationImage, OccupancyGrid, OccupancyGridClient, OccupancyGridSrvClient, PanView, PathShape, PolygonMarker, TraceShape, Viewer, ZoomView };","map":{"version":3,"names":["ROSLIB","commonjsGlobal","globalThis","window","global","self","getDefaultExportFromCjs","x","__esModule","Object","prototype","hasOwnProperty","call","createjs","exports","module","extend","subclass","superclass","o","constructor","promote","prefix","subP","supP","getPrototypeOf","__proto__","n","indexOf","array","searchElement","i","l","length","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","p","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","EventDispatcher","_listeners","_captureListeners","initialize","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","push","scope","once","data","handleEvent","evt","splice","eventObj","e","parent","top","list","captureListeners","e$1","slice","Ticker","RAF_SYNCHED","RAF","TIMEOUT","useRAF","timingMode","maxDelta","paused","_addEventListener","_inited","init","apply","arguments","_startTime","_pausedTime","_ticks","_pausedTicks","_interval","_lastTime","_times","_tickTimes","_timerId","_raf","setInterval","interval","_setupTick","getInterval","setFPS","value","getFPS","defineProperties","get","framerate","console","log","_getTime","reset","f","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getMeasuredTickTime","ticks","ttl","times","Math","min","getMeasuredFPS","setPaused","getPaused","runTime","getEventTime","getTicks","pauseable","_handleSynch","_tick","_handleRAF","_handleTimeout","mode","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","time","elapsedTime","event","delta","unshift","pop","now","performance","mozNow","msNow","oNow","webkitNow","UID","_nextID","MouseEvent","stageX","stageY","nativeEvent","pointerID","primary","rawX","rawY","relatedTarget","Event_constructor","_get_localX","globalToLocal","_get_localY","y","_get_isTouch","localX","localY","isTouch","Matrix2D","a","b","c","d","tx","ty","setValues","DEG_TO_RAD","PI","identity","append","a1","b1","c1","d1","prepend","tx1","appendMatrix","matrix","prependMatrix","appendTransform","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","prependTransform","rotate","angle","skew","scale","translate","invert","isIdentity","equals","transformPoint","pt","decompose","sqrt","atan2","abs","copy","DisplayProps","visible","alpha","shadow","compositeOperation","Point","point","Rectangle","width","height","pad","left","bottom","right","rectangle","contains","union","rect","intersection","x1","y1","x2","y2","intersects","isEmpty","ButtonHelper","outLabel","overLabel","downLabel","play","hitArea","hitLabel","_isPressed","_isOver","_enabled","mouseChildren","enabled","actionsEnabled","gotoAndStop","setEnabled","cursor","_reset","__reset","getEnabled","label","t","gotoAndPlay","Shadow","color","offsetX","offsetY","blur","SpriteSheet","EventDispatcher_constructor","complete","_animations","_frames","_images","_data","_loadCount","_frameHeight","_frameWidth","_numFrames","_regX","_regY","_spacing","_margin","_parseData","getAnimations","animations","getNumFrames","animation","frames","getAnimation","name","getFrame","frameIndex","frame","getFrameBounds","images","img","src","document","createElement","getContext","naturalWidth","onload","_handleImageLoad","onerror","_handleImageError","Array","isArray","image","spacing","margin","count","_calculateFrames","anim","obj","speed","next","undefined","errorEvent","maxFrames","frameCount","frameWidth","frameHeight","imgLoop","imgs","imgW","imgH","Graphics","command","_stroke","_strokeStyle","_oldStrokeStyle","_strokeDash","_oldStrokeDash","_strokeIgnoreScale","_fill","_instructions","_commitIndex","_activeInstructions","_dirty","_storeIndex","clear","G","getRGB","g","getHSL","hue","saturation","lightness","BASE_64","STROKE_CAPS_MAP","STROKE_JOINTS_MAP","canvas","createCanvas","_ctx","getInstructions","_updateInstructions","instructions","draw","ctx","instr","exec","drawAsPath","instrs","path","moveTo","MoveTo","lineTo","LineTo","arcTo","radius","ArcTo","arc","startAngle","endAngle","anticlockwise","Arc","quadraticCurveTo","cpx","cpy","QuadraticCurveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","BezierCurveTo","w","h","Rect","closePath","ClosePath","beginFill","_setFill","Fill","beginLinearGradientFill","colors","ratios","x0","y0","linearGradient","beginRadialGradientFill","r0","r1","radialGradient","beginBitmapFill","repetition","bitmap","endFill","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","StrokeStyle","setStrokeDash","segments","offset","StrokeDash","beginStroke","_setStroke","Stroke","beginLinearGradientStroke","beginRadialGradientStroke","beginBitmapStroke","endStroke","curveTo","drawRect","drawRoundRect","drawRoundRectComplex","radiusTL","radiusTR","radiusBR","radiusBL","RoundRect","drawCircle","Circle","drawEllipse","Ellipse","drawPolyStar","sides","pointSize","PolyStar","clean","decodePath","str","paramCount","params","base64","charAt","fi","pl","charCount","num","sign","store","unstore","mt","lt","at","bt","qt","cp","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","commit","active","commitIndex","beginCmd","ll","fill","stroke","BeginPath","beginPath","style","fillStyle","mtx","save","transform","restore","createLinearGradient","addColorStop","createRadialGradient","readyState","createPattern","strokeStyle","setTransform","lineWidth","lineCap","isNaN","lineJoin","setLineDash","EMPTY_SEGMENTS","lineDashOffset","max","mTL","mTR","mBR","mBL","rTL","rTR","rBR","rBL","k","ox","oy","xe","ye","xm","ym","ps","DisplayObject","cacheCanvas","cacheID","id","mouseEnabled","tickEnabled","transformMatrix","snapToPixel","filters","mask","_cacheOffsetX","_cacheOffsetY","_filterOffsetX","_filterOffsetY","_cacheScale","_cacheDataURLID","_cacheDataURL","_props","_rectangle","_bounds","_MOUSE_EVENTS","suppressCrossDomainErrors","_snapToPixelEnabled","_hitTestCanvas","_hitTestContext","_nextCacheID","getStage","_Stage","stage","isVisible","ignoreCache","drawImage","updateContext","graphics","getMatrix","clip","globalAlpha","globalCompositeOperation","_applyShadow","cache","_cacheWidth","_cacheHeight","updateCache","offX","offY","fBounds","_getFilterBounds","ceil","clearRect","_applyFilters","uncache","getCacheDataURL","toDataURL","localToGlobal","getConcatenatedMatrix","localToLocal","getConcatenatedDisplayProps","hitTest","hit","_testHit","getBounds","getTransformedBounds","_getBounds","setBounds","_cloneProps","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","evtObj","getImageData","applyFilter","bounds","ignoreTransform","_transformBounds","x_a","x_b","y_c","y_d","minX","maxX","minY","maxY","_hasMouseEventListener","evts","Container","DisplayObject_constructor","children","tickChildren","getNumChildren","numChildren","hasContent","DisplayObject_draw","child","addChild","arguments$1","removeChild","addChildAt","index","indx","good","removeChildAt","sort","removeAllChildren","kids","getChildAt","getChildByName","sortChildren","sortFunction","getChildIndex","swapChildrenAt","index1","index2","o1","o2","swapChildren","child1","child2","setChildIndex","getObjectUnderPoint","getObjectsUnderPoint","_getObjectsUnderPoint","recursive","_cloneChildren","DisplayObject__tick","mouse","activeListener","currentDepth","_testMask","result","DisplayObject_getBounds","Stage","Container_constructor","autoClear","getElementById","mouseX","mouseY","snapToPixelEnabled","mouseInBounds","tickOnUpdate","mouseMoveOutside","preventSelection","_pointerData","_pointerCount","_primaryPointerID","_mouseOverIntervalID","_nextStage","_prevStage","enableDOMEvents","_get_nextStage","_set_nextStage","nextStage","update","tick","backgroundColor","mimeType","fillRect","dataURL","putImageData","enableMouseOver","frequency","clearInterval","_testMouseOver","enable","_eventListeners","_this","_handleMouseUp","_handleMouseMove","_handleDoubleClick","_handleMouseDown","_getElementRect","getBoundingClientRect","err","offsetTop","offsetLeft","offsetWidth","offsetHeight","pageXOffset","scrollLeft","clientLeft","body","pageYOffset","scrollTop","clientTop","styles","getComputedStyle","currentStyle","padL","parseInt","paddingLeft","borderLeftWidth","padT","paddingTop","borderTopWidth","padR","paddingRight","borderRightWidth","padB","paddingBottom","borderBottomWidth","_getPointerData","_handlePointerMove","pageX","pageY","owner","inBounds","_updatePointerPosition","_dispatchMouseEvent","posEvtObj","_handlePointerUp","oTarget","down","_handlePointerDown","eventTarget","_mouseOverX","_mouseOverY","isEventTarget","common","oldList","_mouseOverTarget","oldTarget","pointerId","Bitmap","imageOrUri","sourceRect","Sprite","spriteSheet","frameOrAnimation","currentFrame","currentAnimation","currentAnimationFrame","_animation","_currentFrame","_skipAdvance","_normalizeFrame","stop","_goto","advance","fps","DisplayObject__cloneProps","frameDelta","animFrame","_dispatchAnimationEnd","end","changed","Shape","Text","text","font","textAlign","textBaseline","maxWidth","outline","lineHeight","_workingContext","H_OFFSETS","start","center","V_OFFSETS","hanging","middle","alphabetic","ideographic","col","_drawText","_prepContext","getMeasuredWidth","_getMeasuredWidth","getMeasuredLineHeight","getMeasuredHeight","getMetrics","lines","vOffset","substr","paint","maxW","hardLines","String","split","measureText","words","j","jl","wordW","_drawTextLine","strokeText","fillText","BitmapText","letterSpacing","spaceWidth","_oldProps","maxPoolSize","_spritePool","_updateText","Container_draw","Container_getBounds","Container__cloneProps","_getFrameIndex","character","toUpperCase","toLowerCase","_getFrame","_getLineHeight","_getSpaceWidth","change","spaceW","lineH","pool","childIndex","numKids","sprite","hasSpace","MovieClip","startPosition","loop","labels","inited","INDEPENDENT","timeline","Timeline","position","useTicks","autoReset","frameBounds","_synchOffset","_prevPos","_prevPosition","_t","_managed","SINGLE_FRAME","SYNCHED","MovieClipPlugin","install","getLabels","getCurrentLabel","_updateTimeline","getDuration","duration","currentLabel","totalFrames","positionOrLabel","independent","_framerate","Container__tick","pos","resolve","NaN","tl","synched","Tween","NONE","_calcPosition","setPosition","tweens","_tweens","tween","_target","passive","_stepPosition","_addManagedChild","_setState","state","_off","Container__getBounds","priority","installPlugin","prop","step","startValues","endValues","ratio","wait","SpriteSheetUtils","_workingCanvas","addFlippedFrames","horizontal","vertical","both","_flip","extractFrame","mergeAlpha","rgbImage","alphaImage","v","il","__tmp","fl","sfx","names","al","SpriteSheetBuilder","maxHeight","padding","timeSlice","progress","_nextFrameIndex","_index","_timerID","_scale","ERR_DIMENSIONS","ERR_RUNNING","addFrame","source","setupFunction","setupData","nominalBounds","funct","addAnimation","addMovieClip","labelFunction","rects","baseFrameIndex","_setupMovieClipFrame","_labels","lbls","build","_startBuild","_drawNext","_endBuild","buildAsync","_run","stopAsync","dataFrames","_fillRow","_getSize","ae","size","pow","maxH","sc","rx","floor","ry","rh","rw","round","ts","DOMElement","htmlElement","transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin","_handleDrawEnd","visibility","oldProps","oldMtx","WebkitTransform","OTransform","msTransform","MozTransform","opacity","Filter","targetCtx","targetX","targetY","imageData","_applyFilter","BlurFilter","blurX","blurY","quality","MUL_TABLE","SHG_TABLE","q","radiusX","radiusY","iterations","px","yp","yi","yw","pr","pg","pb","pa","divx","divy","w1","h1","rxp1","ryp1","ssx","sx","ssy","sy","si","stx","mty","sty","ms","AlphaMapFilter","alphaMap","_alphaMap","_mapData","_prepAlphaMap","map","HTMLCanvasElement","imgData","AlphaMaskFilter","ColorFilter","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","ColorMatrix","brightness","contrast","setColor","DELTA_INDEX","IDENTITY_MATRIX","LENGTH","adjustColor","adjustHue","adjustContrast","adjustBrightness","adjustSaturation","_cleanValue","_multiplyMatrix","lumR","lumG","lumB","cosVal","sinVal","concat","_fixMatrix","toArray","val","limit","ColorMatrixFilter","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","Touch","isSupported","navigator","singleTouch","allowDefault","__touch","pointers","multitouch","_IOS_enable","_IE_enable","disable","_IOS_disable","_IE_disable","_IOS_handleEvent","touches","changedTouches","touch","identifier","_handleStart","_handleMove","_handleEnd","_IE_handleEvent","msTouchAction","touchAction","activeIDs","ids","srcElement","EaselJS","version","buildDate","PreloadJS","proxy","method","aArgs","ErrorEvent","title","message","ProgressEvent","loaded","total","isLoader","objectTypes","freeExports","nodeType","root","freeGlobal","runInContext","context","Number","SyntaxError","TypeError","nativeJSON","stringify","parse","objectProto","getClass","isProperty","forEach","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","serialized","stringifySupported","toJSON","parseSupported","exception$1","exception$2","exception$3","exception$4","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","original","object","callback","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","unicodePrefix","quote","useCharIndex","symbols","charCode","charCodeAt","serialize","properties","whitespace","indentation","stack","className","date","hours","minutes","seconds","milliseconds","results","element","join","filter","fromCharCode","Unescapes","Index","Source","abort","lex","begin","isSigned","hasMembers","walk","JSON","previousJSON","isRestored","JSON3","noConflict","appendToHead","el","getHead","appendChild","head","getElementsByTagName","getBody","DomUtils","parseXML","xml","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","parseJSON","DataUtils","LoadItem","maintainOrder","GET","values","headers","withCredentials","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","item","Error","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","parseURI","info","absolute","relative","queryIndex","match","test","extension","formatQueryString","query","escape","buildPath","idx","isCrossDomain","href","host","location","crossdomain","hostname","port","protocol","isLocal","isBinary","AbstractLoader","IMAGE","BINARY","isImageTag","HTMLImageElement","isAudioTag","HTMLAudioElement","isVideoTag","HTMLVideoElement","isText","TEXT","MANIFEST","XML","CSS","SVG","JAVASCRIPT","SPRITESHEET","getTypeByExtension","SOUND","VIDEO","RequestUtils","loadItem","preferXHR","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","POST","JSONP","getItem","getResult","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","TagRequest","_createTag","XHRRequest","_sendLoadStart","_isCanceled","_sendProgress","Infinity","_sendComplete","rawResult","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","AbstractRequest","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","_startTagVisibility","onreadystatechange","_handleReadyStateChange","_handleError","_hideTag","_loadTimeout","parentNode","_clean","AbstractRequest_destroy","_showTag","_handleStalled","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","onloadstart","onprogress","onabort","ontimeout","send","error","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","getBlob","status","response","responseText","responseXML","req","XMLHttpRequest","XDomainRequest","axVersion","overrideMimeType","open","origin","setRequestHeader","LoadQueue","basePath","_plugins","_typeCallbacks","_extensionCallbacks","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","SoundLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","useXHR","setPreferXHR","_paused","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","LOAD_TIMEOUT","registerLoader","canLoadItem","unregisterLoader","setUseXHR","removeAll","idsOrUrls","args","itemsWereRemoved","close","_disposeItem","_loadNext","loadManifest","plugin","getPreloadHandlers","types","extensions","setMaxConnections","loadFile","file","loadNow","_addItem","manifest","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","plugins","_loader","_updateProgress","bp","useBasePath","pathMatch","ext","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","_sendFileComplete","checkItem","_sendFileProgress","remaining","chunk","completeHandler","rel","styleSheet","cssText","textNode","createTextNode","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","revokeObjectURL","json","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_handleEvent","AbstractLoader_destroy","queue","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","AbstractMediaLoader_constructor","autoplay","SPRITESHEET_PROGRESS","documentElement","SoundJS","BrowserDetect","agent","userAgent","isWindowPhone","isFirefox","isOpera","opera","isChrome","isIOS","isAndroid","isBlackberry","PlayPropsConfig","interrupt","delay","volume","pan","startTime","ppc","Sound","INTERRUPT_ANY","INTERRUPT_EARLY","INTERRUPT_LATE","INTERRUPT_NONE","PLAY_INITED","PLAY_SUCCEEDED","PLAY_INTERRUPTED","PLAY_FINISHED","PLAY_FAILED","SUPPORTED_EXTENSIONS","EXTENSION_MAP","m4a","FILE_PATTERN","defaultInterruptBehavior","alternateExtensions","activePlugin","_masterVolume","defineProperty","setVolume","instances","_instances","setMasterVolume","_masterMute","setMute","setMasterMute","_capabilities","_pluginsRegistered","_lastID","_idHash","_preloadHash","_defaultPlayPropsHash","initLoad","_handleLoadComplete","_handleLoadError","_registerPlugin","registerPlugins","initializeDefaultPlugins","WebAudioPlugin","HTMLAudioPlugin","isReady","getCapabilities","getCapability","key","_registerSound","details","_parseSrc","_parsePath","numChannels","channels","audioSprite","sp","defaultPlayProps","register","SoundChannel","maxPerChannel","registerSound","registerSounds","sounds","returnValues","removeSound","_getSrcById","removeSrc","removeSounds","removeAllSounds","loadComplete","capabilities","replace","ret","lastIndexOf","playProps","instance","createInstance","ok","_playInstance","_playFailed","DefaultSoundInstance","applyPlayProps","uniqueId","getVolume","getMute","setDefaultPlayProps","getDefaultPlayProps","getPosition","_beginPlaying","delayTimeoutId","add","_playFinished","channel","_removeAll","_add","_remove","maxDefault","_get","_getSlot","replacement","playState","_interrupt","AbstractSoundInstance","playbackResource","_volume","_pan","getPan","setPan","getStartTime","setStartTime","_duration","setDuration","_playbackResource","getPlaybackResource","setPlaybackResource","_position","_loop","getLoop","setLoop","_muted","getMuted","setMuted","_cleanUp","_handleStop","_pause","_resume","_updateVolume","_updatePan","_calculateCurrentPosition","_updatePosition","_updateStartTime","_updateDuration","_setDurationFromSource","_removeLooping","_addLooping","_sendEvent","_handleCleanUp","_handleSoundReady","_handleSoundComplete","_handleLoop","AbstractPlugin","_loaders","_audioSources","_soundInstances","_loaderClass","_soundInstanceClass","_handlePreloadComplete","_handlePreloadError","isPreloadStarted","isPreloadComplete","Loader","decodeAudioData","_handleAudioDecoded","decodedAudio","AbstractLoader__sendComplete","WebAudioLoader","WebAudioSoundInstance","AbstractSoundInstance_constructor","gainNode","createGain","panNode","createPanner","panningModel","_panningModel","connect","sourceNode","_soundCompleteTimeout","_sourceNodeNext","_playbackStartTime","_endedHandler","_scratchBuffer","destinationNode","AbstractSoundInstance_destroy","disconnect","_cleanUpAudioNode","_createAndPlayAudioNode","numberOfOutputs","audioNode","buffer","dur","currentTime","createBufferSource","newVolume","gain","AbstractPlugin_constructor","dynamicsCompressorNode","createDynamicsCompressor","destination","_addPropsToClasses","_unlocked","isMobilePhoneGap","_isFileXHRSupported","_generateCapabilities","playEmptySound","supported","xhr","error$1","canPlayType","AudioContext","webkitAudioContext","createBuffer","_compatibilitySetUp","_unlock","panning","tracks","supportedExtensions","extensionMap","playType","numberOfChannels","createGainNode","noteGrainOn","noteOff","HTMLAudioTagPool","_tags","_tagPool","TagPool","_tagUsed","HTMLAudioSoundInstance","_audioSpriteStopTime","_delayTimeoutId","_readyHandler","_handleTagReady","_stalledHandler","_audioSpriteEndHandler","_handleAudioSpriteLoop","_loopHandler","isMuted","_AUDIO_SEEKED","pause","_AUDIO_ENDED","_AUDIO_READY","_AUDIO_STALLED","_TIME_UPDATE","AbstractSoundInstance__beginPlaying","_handleSetPositionSeek","defaultNumChannels","MAX_INSTANCES","AbstractPlugin_register","AbstractPlugin_removeSound","AbstractPlugin_create","pluginData","ignoreGlobalPause","_curQueueProps","_initQueueProps","_steps","_actions","_useTicks","_registered","onChange","override","removeTweens","_register","LOOP","REVERSE","IGNORE","tweenjs_count","removeAllTweens","hasActiveTweens","_addStep","p0","_linearEase","p1","to","ease","_appendQueueProps","_addAction","_set","actionsMode","prevPos","_updateTargetProps","_runActions","v0","v1","ignore","v2","startPos","endPos","includeStart","sPos","ePos","action","oldValue","injectProps","_labelList","addTween","setLabels","removeTween","updateDuration","addLabel","Ease","linear","none","amount","getPowIn","getPowOut","getPowInOut","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","quintIn","quintOut","quintInOut","sineIn","sineOut","sineInOut","getBackIn","backIn","getBackOut","backOut","getBackInOut","backInOut","circIn","circOut","circInOut","bounceIn","bounceOut","bounceInOut","getElasticIn","amplitude","period","pi2","asin","elasticIn","getElasticOut","elasticOut","getElasticInOut","elasticInOut","MotionGuidePlugin","_rotOffS","_rotOffE","_rotNormS","_rotNormE","__needsRot","startValue","endValue","__rotGlobalS","__rotGlobalE","testRotData","temp","_length","accuracy","_segments","cx","cy","ex","ey","oldX","oldY","tempX","tempY","sublines","inv","orient","calc","__rotPathS","toFixed","__rotPathE","__guideData","rotGlobalD","rotPathD","rot","rotDelta","rotOffS","guide","lastRatio","seg","cap","TweenJS","createjsExports","globalToRos","rosX","rosY","Vector3","rosToGlobal","rosQuaternionToGlobalTheta","orientation","q0","q1","q2","q3","z","ImageMap","options","pose","Pose","resolution","eventemitter2","undefined$1","_isArray","defaultMaxListeners","nextTickSupported","process","nextTick","symbolsSupported","Symbol","reflectSupported","Reflect","setImmediateSupported","setImmediate","_setImmediate","ownKeys","getOwnPropertyNames","getOwnPropertySymbols","keys","_events","_conf","configure","conf","delimiter","maxListeners","_maxListeners","wildcard","newListener","_newListener","removeListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","eventName","errorMsg","emitWarning","emitter","trace","toObject","len","valuesCount","TargetObserver","_emitter","_listenersCount","addListener","_on","_observers","assign","subscribe","localEvent","reducer","observer","handler","emit","_onNewListener","_event","_onRemoveListener","hasListeners","unsubscribe","events","clearRefs","findTargetIndex","resolveOptions","schema","reducers","allowUnknown","computedOptions","option","reject","reason","constructorReducer","makeTypeReducer","firstType","secondType","kind","functionReducer","objectFunctionReducer","makeCancelablePromise","Promise","executor","isCancelable","callbacks","timer","subscriptionClosed","promise","onCancel","timeout","overload","isFinite","cleanup","_resolve","_reject","cb","code","observers","searchListenerTree","handlers","tree","typeLength","ns","dl","branch","xTree","xxTree","isolatedBranch","endReached","currentType","nextType","branches","growListenerTree","warned","collectTreeEvents","asArray","branchName","isArrayPath","recursivelyGarbageCollect","flag","Listener","setupListener","promisify","objectify","_listener","_origin","then","_async","EventEmitter","EventEmitter2","listenTo","listen","isSingleReducer","stopListeningTo","matched","setMaxListeners","getMaxListeners","fn","_once","prependOnceListener","_many","many","prependMany","_all","containsSymbol","emitAsync","promises","all","prependListener","onAny","_onAny","prependAny","returnValue","leafs","iLeaf","leaf","offAny","fns","removeAllListeners","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","waitFor","handleError","_Promise","eventListener","errorListener","enumerable","writable","configurable","amd","eventemitter2Exports","ImageMapClient","ros","topic","rootObject","currentImage","rosTopic","Topic","messageType","bind","OccupancyGrid","createImageData","row","mapI","Grid","cellSize","OccupancyGridClient","that","continuous","currentGrid","OccupancyGridSrvClient","service","rosService","Service","serviceType","compression","callService","ServiceRequest","ArrowShape","strokeSize","strokeColor","fillColor","pulse","headLen","headWidth","growCount","growing","NavigationArrow","NavigationImage","image_url","originals","Image","paintImage","calculateScale","SCALE_SIZE","_size","PathShape","poses","setPath","PolygonMarker","lineSize","lineColor","pointColor","lineCallBack","pointCallBack","pointContainer","lineContainer","fillShape","createLineShape","startPoint","endPoint","line","editLineShape","createPointShape","addPoint","numPoints","lineEnd","drawFill","remPoint","movePoint","newPos","line1","line2","splitLine","xs","ys","xh","yh","lineNew","TraceShape","maxPoses","minDist","addPose","last","prevX","prevY","dx","dy","popFront","shift","PanView","startPan","startX","startY","curX","curY","Viewer","divID","background","scene","addObject","scaleToDimensions","x_prev_shift","y_prev_shift","ZoomView","minScale","startShift","startScale","startZoom","centerX","centerY","zoom","zoom$1"],"sources":["/home/zyme/ros_ws/romviz/romviz/node_modules/ros2d/build/ros2d.esm.js"],"sourcesContent":["import * as ROSLIB from 'roslib';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar createjs = {exports: {}};\n\ncreatejs.exports;\n\n(function (module, exports) {\n\tvar createjs = (commonjsGlobal.createjs = (commonjsGlobal.createjs || {}));\n\t/*!\n\t* CreateJS\n\t* Visit http://createjs.com/ for documentation, updates and examples.\n\t*\n\t* Copyright (c) 2010 gskinner.com, inc.\n\t*\n\t* Permission is hereby granted, free of charge, to any person\n\t* obtaining a copy of this software and associated documentation\n\t* files (the \"Software\"), to deal in the Software without\n\t* restriction, including without limitation the rights to use,\n\t* copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t* copies of the Software, and to permit persons to whom the\n\t* Software is furnished to do so, subject to the following\n\t* conditions:\n\t*\n\t* The above copyright notice and this permission notice shall be\n\t* included in all copies or substantial portions of the Software.\n\t*\n\t* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n\t* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n\t* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n\t* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n\t* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n\t* OTHER DEALINGS IN THE SOFTWARE.\n\t*/\n\n\tcommonjsGlobal.createjs = commonjsGlobal.createjs||{};\n\n\n\t//##############################################################################\n\t// extend.js\n\t//##############################################################################\n\n\t/**\n\t * @class Utility Methods\n\t */\n\n\t/**\n\t * Sets up the prototype chain and constructor property for a new class.\n\t *\n\t * This should be called right after creating the class constructor.\n\t *\n\t * \tfunction MySubClass() {}\n\t * \tcreatejs.extend(MySubClass, MySuperClass);\n\t * \tMySubClass.prototype.doSomething = function() { }\n\t *\n\t * \tvar foo = new MySubClass();\n\t * \tconsole.log(foo instanceof MySuperClass); // true\n\t * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n\t *\n\t * @method extend\n\t * @param {Function} subclass The subclass.\n\t * @param {Function} superclass The superclass to extend.\n\t * @return {Function} Returns the subclass's new prototype.\n\t */\n\tcreatejs.extend = function(subclass, superclass) {\n\n\t\tfunction o() { this.constructor = subclass; }\n\t\to.prototype = superclass.prototype;\n\t\treturn (subclass.prototype = new o());\n\t};\n\n\t//##############################################################################\n\t// promote.js\n\t//##############################################################################\n\n\t/**\n\t * @class Utility Methods\n\t */\n\n\t/**\n\t * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n\t * It is recommended to use the super class's name as the prefix.\n\t * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n\t * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n\t *\n\t * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n\t * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n\t * prototype of `MySubClass` as `MySuperClass_draw`.\n\t *\n\t * This should be called after the class's prototype is fully defined.\n\t *\n\t * \tfunction ClassA(name) {\n\t * \t\tthis.name = name;\n\t * \t}\n\t * \tClassA.prototype.greet = function() {\n\t * \t\treturn \"Hello \"+this.name;\n\t * \t}\n\t *\n\t * \tfunction ClassB(name, punctuation) {\n\t * \t\tthis.ClassA_constructor(name);\n\t * \t\tthis.punctuation = punctuation;\n\t * \t}\n\t * \tcreatejs.extend(ClassB, ClassA);\n\t * \tClassB.prototype.greet = function() {\n\t * \t\treturn this.ClassA_greet()+this.punctuation;\n\t * \t}\n\t * \tcreatejs.promote(ClassB, \"ClassA\");\n\t *\n\t * \tvar foo = new ClassB(\"World\", \"!?!\");\n\t * \tconsole.log(foo.greet()); // Hello World!?!\n\t *\n\t * @method promote\n\t * @param {Function} subclass The class to promote super class methods on.\n\t * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n\t * @return {Function} Returns the subclass.\n\t */\n\tcreatejs.promote = function(subclass, prefix) {\n\n\t\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\t\tif (supP) {\n\t\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\t\tfor (var n in supP) {\n\t\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t\t}\n\t\t}\n\t\treturn subclass;\n\t};\n\n\t//##############################################################################\n\t// indexOf.js\n\t//##############################################################################\n\n\t/**\n\t * @class Utility Methods\n\t */\n\n\t/**\n\t * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n\t * that value.  Returns -1 if value is not found.\n\t *\n\t *      var i = createjs.indexOf(myArray, myElementToFind);\n\t *\n\t * @method indexOf\n\t * @param {Array} array Array to search for searchElement\n\t * @param searchElement Element to find in array.\n\t * @return {Number} The first index of searchElement in array.\n\t */\n\tcreatejs.indexOf = function (array, searchElement){\n\n\t\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\t\tif (searchElement === array[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\t//##############################################################################\n\t// Event.js\n\t//##############################################################################\n\n\t(function() {\n\n\t// constructor:\n\t\t/**\n\t\t * Contains properties and methods shared by all events for use with\n\t\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t\t * \n\t\t * Note that Event objects are often reused, so you should never\n\t\t * rely on an event object's state outside of the call stack it was received in.\n\t\t * @class Event\n\t\t * @param {String} type The event type.\n\t\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t\t * @constructor\n\t\t **/\n\t\tfunction Event(type, bubbles, cancelable) {\n\t\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The type of event.\n\t\t\t * @property type\n\t\t\t * @type String\n\t\t\t **/\n\t\t\tthis.type = type;\n\t\t\n\t\t\t/**\n\t\t\t * The object that generated an event.\n\t\t\t * @property target\n\t\t\t * @type Object\n\t\t\t * @default null\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.target = null;\n\t\t\n\t\t\t/**\n\t\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t\t * @property currentTarget\n\t\t\t * @type Object\n\t\t\t * @default null\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.currentTarget = null;\n\t\t\n\t\t\t/**\n\t\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t\t * </OL>\n\t\t\t * @property eventPhase\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.eventPhase = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the event will bubble through the display list.\n\t\t\t * @property bubbles\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.bubbles = !!bubbles;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t\t * @property cancelable\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.cancelable = !!cancelable;\n\t\t\n\t\t\t/**\n\t\t\t * The epoch time at which this event was created.\n\t\t\t * @property timeStamp\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.timeStamp = (new Date()).getTime();\n\t\t\n\t\t\t/**\n\t\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t\t * on this event.\n\t\t\t * @property defaultPrevented\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.defaultPrevented = false;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t\t * @property propagationStopped\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.propagationStopped = false;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t\t * on this event.\n\t\t\t * @property immediatePropagationStopped\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.immediatePropagationStopped = false;\n\t\t\t\n\t\t\t/**\n\t\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t\t * @property removed\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t*/\n\t\t\tthis.removed = false;\n\t\t}\n\t\tvar p = Event.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t// public methods:\n\t\t/**\n\t\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t\t * cancel the default behaviour associated with the event.\n\t\t * @method preventDefault\n\t\t **/\n\t\tp.preventDefault = function() {\n\t\t\tthis.defaultPrevented = this.cancelable&&true;\n\t\t};\n\n\t\t/**\n\t\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t\t * Mirrors the DOM event standard.\n\t\t * @method stopPropagation\n\t\t **/\n\t\tp.stopPropagation = function() {\n\t\t\tthis.propagationStopped = true;\n\t\t};\n\n\t\t/**\n\t\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t\t * Mirrors the DOM event standard.\n\t\t * @method stopImmediatePropagation\n\t\t **/\n\t\tp.stopImmediatePropagation = function() {\n\t\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Causes the active listener to be removed via removeEventListener();\n\t\t * \n\t\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t\t * \t\t\t// do stuff...\n\t\t * \t\t\tevt.remove(); // removes this listener.\n\t\t * \t\t});\n\t\t * \n\t\t * @method remove\n\t\t **/\n\t\tp.remove = function() {\n\t\t\tthis.removed = true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a clone of the Event instance.\n\t\t * @method clone\n\t\t * @return {Event} a clone of the Event instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t\t *\n\t\t * @method set\n\t\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t*/\n\t\tp.set = function(props) {\n\t\t\tfor (var n in props) { this[n] = props[n]; }\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t\t};\n\n\t\tcreatejs.Event = Event;\n\t}());\n\n\t//##############################################################################\n\t// EventDispatcher.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t\t *\n\t\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t\t * \n\t\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t\t * \n\t\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t\t * \n\t\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t\t *\n\t\t *      EventDispatcher.initialize(MyClass.prototype);\n\t\t *\n\t\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t\t *\n\t\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t\t *      function handlerMethod(event) {\n\t\t *          console.log(event.target + \" Was Clicked\");\n\t\t *      }\n\t\t *\n\t\t * <b>Maintaining proper scope</b><br />\n\t\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t\t * method to subscribe to events simplifies this.\n\t\t *\n\t\t *      instance.addEventListener(\"click\", function(event) {\n\t\t *          console.log(instance == this); // false, scope is ambiguous.\n\t\t *      });\n\t\t *      \n\t\t *      instance.on(\"click\", function(event) {\n\t\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t\t *      });\n\t\t * \n\t\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t\t * scope.\n\t\t *\n\t\t * <b>Browser support</b>\n\t\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t\t * requires modern browsers (IE9+).\n\t\t *      \n\t\t *\n\t\t * @class EventDispatcher\n\t\t * @constructor\n\t\t **/\n\t\tfunction EventDispatcher() {\n\t\t\n\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @protected\n\t\t\t * @property _listeners\n\t\t\t * @type Object\n\t\t\t **/\n\t\t\tthis._listeners = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @protected\n\t\t\t * @property _captureListeners\n\t\t\t * @type Object\n\t\t\t **/\n\t\t\tthis._captureListeners = null;\n\t\t}\n\t\tvar p = EventDispatcher.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// static public methods:\n\t\t/**\n\t\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t\t * \n\t\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t\t * \n\t\t * @method initialize\n\t\t * @static\n\t\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t\t * prototype.\n\t\t **/\n\t\tEventDispatcher.initialize = function(target) {\n\t\t\ttarget.addEventListener = p.addEventListener;\n\t\t\ttarget.on = p.on;\n\t\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\t\ttarget.hasEventListener = p.hasEventListener;\n\t\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\t\ttarget.willTrigger = p.willTrigger;\n\t\t};\n\t\t\n\n\t// public methods:\n\t\t/**\n\t\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t\t * multiple callbacks getting fired.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      displayObject.addEventListener(\"click\", handleClick);\n\t\t *      function handleClick(event) {\n\t\t *         // Click happened.\n\t\t *      }\n\t\t *\n\t\t * @method addEventListener\n\t\t * @param {String} type The string type of the event.\n\t\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t\t * the event is dispatched.\n\t\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t\t **/\n\t\tp.addEventListener = function(type, listener, useCapture) {\n\t\t\tvar listeners;\n\t\t\tif (useCapture) {\n\t\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t\t} else {\n\t\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t\t}\n\t\t\tvar arr = listeners[type];\n\t\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\t\tarr = listeners[type]; // remove may have deleted the array\n\t\t\tif (!arr) { listeners[type] = [listener];  }\n\t\t\telse { arr.push(listener); }\n\t\t\treturn listener;\n\t\t};\n\t\t\n\t\t/**\n\t\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t\t * \n\t\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t\t * \n\t\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t\t * to `on` with the same params will create multiple listeners.\n\t\t * \n\t\t * <h4>Example</h4>\n\t\t * \n\t\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t\t * \t\tfunction handleClick(evt, data) {\n\t\t * \t\t\tdata.count -= 1;\n\t\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t\t * \t\t\tif (data.count == 0) {\n\t\t * \t\t\t\talert(\"clicked 3 times!\");\n\t\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t\t * \t\t\t\t// alternately: evt.remove();\n\t\t * \t\t\t}\n\t\t * \t\t}\n\t\t * \n\t\t * @method on\n\t\t * @param {String} type The string type of the event.\n\t\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t\t * the event is dispatched.\n\t\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t\t **/\n\t\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\t\tif (listener.handleEvent) {\n\t\t\t\tscope = scope||listener;\n\t\t\t\tlistener = listener.handleEvent;\n\t\t\t}\n\t\t\tscope = scope||this;\n\t\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\t\tonce&&evt.remove();\n\t\t\t\t}, useCapture);\n\t\t};\n\n\t\t/**\n\t\t * Removes the specified event listener.\n\t\t *\n\t\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t\t * closure will not work.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t\t *\n\t\t * @method removeEventListener\n\t\t * @param {String} type The string type of the event.\n\t\t * @param {Function | Object} listener The listener function or object.\n\t\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t\t **/\n\t\tp.removeEventListener = function(type, listener, useCapture) {\n\t\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\t\tif (!listeners) { return; }\n\t\t\tvar arr = listeners[type];\n\t\t\tif (!arr) { return; }\n\t\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\t\tif (arr[i] == listener) {\n\t\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t\t * .on method.\n\t\t * \n\t\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t\t *\n\t\t * @method off\n\t\t * @param {String} type The string type of the event.\n\t\t * @param {Function | Object} listener The listener function or object.\n\t\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t\t **/\n\t\tp.off = p.removeEventListener;\n\n\t\t/**\n\t\t * Removes all listeners for the specified type, or all listeners of all types.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      // Remove all listeners\n\t\t *      displayObject.removeAllEventListeners();\n\t\t *\n\t\t *      // Remove all click listeners\n\t\t *      displayObject.removeAllEventListeners(\"click\");\n\t\t *\n\t\t * @method removeAllEventListeners\n\t\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t\t **/\n\t\tp.removeAllEventListeners = function(type) {\n\t\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\t\telse {\n\t\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Dispatches the specified event to all listeners.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      // Use a string event\n\t\t *      this.dispatchEvent(\"complete\");\n\t\t *\n\t\t *      // Use an Event instance\n\t\t *      var event = new createjs.Event(\"progress\");\n\t\t *      this.dispatchEvent(event);\n\t\t *\n\t\t * @method dispatchEvent\n\t\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t\t **/\n\t\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\t\tif (typeof eventObj == \"string\") {\n\t\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\t\tvar listeners = this._listeners;\n\t\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t\t// redispatching an active event object, so clone it:\n\t\t\t\teventObj = eventObj.clone();\n\t\t\t}\n\t\t\t\n\t\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t\t} else {\n\t\t\t\tvar top=this, list=[top];\n\t\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\t\tvar i, l=list.length;\n\n\t\t\t\t// capture & atTarget\n\t\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t\t}\n\t\t\t\t// bubbling\n\t\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !eventObj.defaultPrevented;\n\t\t};\n\n\t\t/**\n\t\t * Indicates whether there is at least one listener for the specified event type.\n\t\t * @method hasEventListener\n\t\t * @param {String} type The string type of the event.\n\t\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t\t **/\n\t\tp.hasEventListener = function(type) {\n\t\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t\t};\n\t\t\n\t\t/**\n\t\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t\t * \n\t\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t\t * event flow for a listener, not just this object.\n\t\t * @method willTrigger\n\t\t * @param {String} type The string type of the event.\n\t\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t\t **/\n\t\tp.willTrigger = function(type) {\n\t\t\tvar o = this;\n\t\t\twhile (o) {\n\t\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\t\to = o.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[EventDispatcher]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _dispatchEvent\n\t\t * @param {Object | String | Event} eventObj\n\t\t * @param {Object} eventPhase\n\t\t * @protected\n\t\t **/\n\t\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\n\t\t\tif (eventObj && listeners) {\n\t\t\t\tvar arr = listeners[eventObj.type];\n\t\t\t\tif (!arr||!(l=arr.length)) { return; }\n\t\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e$1) {}\n\t\t\t\teventObj.removed = false;\n\t\t\t\t\n\t\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\t\tvar o = arr[i];\n\t\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\t\telse { o(eventObj); }\n\t\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\t\teventObj.removed = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tcreatejs.EventDispatcher = EventDispatcher;\n\t}());\n\n\t//##############################################################################\n\t// Ticker.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t\t * event to be notified when a set time interval has elapsed.\n\t\t *\n\t\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t\t * can not be instantiated.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t\t *      function handleTick(event) {\n\t\t *          // Actions carried out each tick (aka frame)\n\t\t *          if (!event.paused) {\n\t\t *              // Actions carried out when the Ticker is not paused.\n\t\t *          }\n\t\t *      }\n\t\t *\n\t\t * @class Ticker\n\t\t * @uses EventDispatcher\n\t\t * @static\n\t\t **/\n\t\tfunction Ticker() {\n\t\t\tthrow \"Ticker cannot be instantiated.\";\n\t\t}\n\n\n\t// constants:\n\t\t/**\n\t\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t\t * dispatches the tick when the time is within a certain threshold.\n\t\t *\n\t\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t\t * gaining the benefits of that API (screen synch, background throttling).\n\t\t *\n\t\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t\t *\n\t\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t\t * supported.\n\t\t * @property RAF_SYNCHED\n\t\t * @static\n\t\t * @type {String}\n\t\t * @default \"synched\"\n\t\t * @readonly\n\t\t **/\n\t\tTicker.RAF_SYNCHED = \"synched\";\n\n\t\t/**\n\t\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t\t * event object's \"delta\" properties to make this easier.\n\t\t *\n\t\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t\t * supported.\n\t\t * @property RAF\n\t\t * @static\n\t\t * @type {String}\n\t\t * @default \"raf\"\n\t\t * @readonly\n\t\t **/\n\t\tTicker.RAF = \"raf\";\n\n\t\t/**\n\t\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t\t * @property TIMEOUT\n\t\t * @static\n\t\t * @type {String}\n\t\t * @default \"timeout\"\n\t\t * @readonly\n\t\t **/\n\t\tTicker.TIMEOUT = \"timeout\";\n\n\n\t// static events:\n\t\t/**\n\t\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t\t * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t\t *      function handleTick(event) {\n\t\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t\t *      }\n\t\t *\n\t\t * @event tick\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t\t * @since 0.6.0\n\t\t */\n\n\n\t// public static properties:\n\t\t/**\n\t\t * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\n\t\t * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\n\t\t * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\n\t\t * @property useRAF\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tTicker.useRAF = false;\n\n\t\t/**\n\t\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t\t * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\n\t\t * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\n\t\t * @property timingMode\n\t\t * @static\n\t\t * @type {String}\n\t\t * @default Ticker.TIMEOUT\n\t\t **/\n\t\tTicker.timingMode = null;\n\n\t\t/**\n\t\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t\t * (ex. maxDelta=50 when running at 40fps).\n\t\t * \n\t\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t\t * when using both delta and other values.\n\t\t * \n\t\t * If 0, there is no maximum.\n\t\t * @property maxDelta\n\t\t * @static\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tTicker.maxDelta = 0;\n\t\t\n\t\t/**\n\t\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t\t * info.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t\t *      createjs.Ticker.paused = true;\n\t\t *      function handleTick(event) {\n\t\t *          console.log(event.paused,\n\t\t *          \tcreatejs.Ticker.getTime(false),\n\t\t *          \tcreatejs.Ticker.getTime(true));\n\t\t *      }\n\t\t *\n\t\t * @property paused\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tTicker.paused = false;\n\n\n\t// mix-ins:\n\t\t// EventDispatcher methods:\n\t\tTicker.removeEventListener = null;\n\t\tTicker.removeAllEventListeners = null;\n\t\tTicker.dispatchEvent = null;\n\t\tTicker.hasEventListener = null;\n\t\tTicker._listeners = null;\n\t\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\t\tTicker._addEventListener = Ticker.addEventListener;\n\t\tTicker.addEventListener = function() {\n\t\t\t!Ticker._inited&&Ticker.init();\n\t\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t\t};\n\n\n\t// private static properties:\n\t\t/**\n\t\t * @property _inited\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @protected\n\t\t **/\n\t\tTicker._inited = false;\n\n\t\t/**\n\t\t * @property _startTime\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._startTime = 0;\n\n\t\t/**\n\t\t * @property _pausedTime\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._pausedTime=0;\n\n\t\t/**\n\t\t * The number of ticks that have passed\n\t\t * @property _ticks\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._ticks = 0;\n\n\t\t/**\n\t\t * The number of ticks that have passed while Ticker has been paused\n\t\t * @property _pausedTicks\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._pausedTicks = 0;\n\n\t\t/**\n\t\t * @property _interval\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._interval = 50;\n\n\t\t/**\n\t\t * @property _lastTime\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._lastTime = 0;\n\n\t\t/**\n\t\t * @property _times\n\t\t * @static\n\t\t * @type {Array}\n\t\t * @protected\n\t\t **/\n\t\tTicker._times = null;\n\n\t\t/**\n\t\t * @property _tickTimes\n\t\t * @static\n\t\t * @type {Array}\n\t\t * @protected\n\t\t **/\n\t\tTicker._tickTimes = null;\n\n\t\t/**\n\t\t * Stores the timeout or requestAnimationFrame id.\n\t\t * @property _timerId\n\t\t * @static\n\t\t * @type {Number}\n\t\t * @protected\n\t\t **/\n\t\tTicker._timerId = null;\n\t\t\n\t\t/**\n\t\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t\t * if that property changed and a tick hasn't fired.\n\t\t * @property _raf\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @protected\n\t\t **/\n\t\tTicker._raf = true;\n\t\t\n\n\t// static getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t\t * @method setInterval\n\t\t * @static\n\t\t * @param {Number} interval\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.setInterval = function(interval) {\n\t\t\tTicker._interval = interval;\n\t\t\tif (!Ticker._inited) { return; }\n\t\t\tTicker._setupTick();\n\t\t};\n\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t\t * @method getInterval\n\t\t * @static\n\t\t * @return {Number}\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.getInterval = function() {\n\t\t\treturn Ticker._interval;\n\t\t};\n\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t\t * @method setFPS\n\t\t * @static\n\t\t * @param {Number} value\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.setFPS = function(value) {\n\t\t\tTicker.setInterval(1000/value);\n\t\t};\n\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t\t * @method getFPS\n\t\t * @static\n\t\t * @return {Number}\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.getFPS = function() {\n\t\t\treturn 1000/Ticker._interval;\n\t\t};\n\n\t\t/**\n\t\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t\t * @property interval\n\t\t * @static\n\t\t * @type {Number}\n\t\t **/\n\t\t \n\t\t/**\n\t\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t\t * `framerate == 1000/interval`.\n\t\t * @property framerate\n\t\t * @static\n\t\t * @type {Number}\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(Ticker, {\n\t\t\t\tinterval: { get: Ticker.getInterval, set: Ticker.setInterval },\n\t\t\t\tframerate: { get: Ticker.getFPS, set: Ticker.setFPS }\n\t\t\t});\n\t\t} catch (e) { console.log(e); }\n\n\n\t// public static methods:\n\t\t/**\n\t\t * Starts the tick. This is called automatically when the first listener is added.\n\t\t * @method init\n\t\t * @static\n\t\t **/\n\t\tTicker.init = function() {\n\t\t\tif (Ticker._inited) { return; }\n\t\t\tTicker._inited = true;\n\t\t\tTicker._times = [];\n\t\t\tTicker._tickTimes = [];\n\t\t\tTicker._startTime = Ticker._getTime();\n\t\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\t\tTicker.interval = Ticker._interval;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t\t * @method reset\n\t\t * @static\n\t\t **/\n\t\tTicker.reset = function() {\n\t\t\tif (Ticker._raf) {\n\t\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\t\tf&&f(Ticker._timerId);\n\t\t\t} else {\n\t\t\t\tclearTimeout(Ticker._timerId);\n\t\t\t}\n\t\t\tTicker.removeAllEventListeners(\"tick\");\n\t\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = 0;\n\t\t\tTicker._inited = false;\n\t\t};\n\n\t\t/**\n\t\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t\t * because it only measures the time spent within the tick execution stack. \n\t\t * \n\t\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t\t *\n\t\t * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\n\t\t * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\n\t\t * other than the tick is using ~80ms (another script, DOM rendering, etc).\n\t\t * @method getMeasuredTickTime\n\t\t * @static\n\t\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t\t * @return {Number} The average time spent in a tick in milliseconds.\n\t\t **/\n\t\tTicker.getMeasuredTickTime = function(ticks) {\n\t\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t\t// by default, calculate average for the past ~1 second:\n\t\t\tticks = Math.min(times.length, ticks||(Ticker.getFPS()|0));\n\t\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\t\treturn ttl/ticks;\n\t\t};\n\n\t\t/**\n\t\t * Returns the actual frames / ticks per second.\n\t\t * @method getMeasuredFPS\n\t\t * @static\n\t\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t\t * Defaults to the number of ticks per second.\n\t\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t\t * from the target frames per second.\n\t\t **/\n\t\tTicker.getMeasuredFPS = function(ticks) {\n\t\t\tvar times = Ticker._times;\n\t\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t\t// by default, calculate fps for the past ~1 second:\n\t\t\tticks = Math.min(times.length-1, ticks||(Ticker.getFPS()|0));\n\t\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t\t};\n\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t\t * @method setPaused\n\t\t * @static\n\t\t * @param {Boolean} value\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.setPaused = function(value) {\n\t\t\t// TODO: deprecated.\n\t\t\tTicker.paused = value;\n\t\t};\n\n\t\t/**\n\t\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t\t * @method getPaused\n\t\t * @static\n\t\t * @return {Boolean}\n\t\t * @deprecated\n\t\t **/\n\t\tTicker.getPaused = function() {\n\t\t\t// TODO: deprecated.\n\t\t\treturn Ticker.paused;\n\t\t};\n\n\t\t/**\n\t\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t\t * @method getTime\n\t\t * @static\n\t\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t\t **/\n\t\tTicker.getTime = function(runTime) {\n\t\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t\t};\n\n\t\t/**\n\t\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t\t * event object.\n\t\t * @method getEventTime\n\t\t * @static\n\t\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t\t */\n\t\tTicker.getEventTime = function(runTime) {\n\t\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns the number of ticks that have been broadcast by Ticker.\n\t\t * @method getTicks\n\t\t * @static\n\t\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t\t * value. The default value is false.\n\t\t * @return {Number} of ticks that have been broadcast.\n\t\t **/\n\t\tTicker.getTicks = function(pauseable) {\n\t\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t\t};\n\n\n\t// private static methods:\n\t\t/**\n\t\t * @method _handleSynch\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tTicker._handleSynch = function() {\n\t\t\tTicker._timerId = null;\n\t\t\tTicker._setupTick();\n\n\t\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\t\tTicker._tick();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _handleRAF\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tTicker._handleRAF = function() {\n\t\t\tTicker._timerId = null;\n\t\t\tTicker._setupTick();\n\t\t\tTicker._tick();\n\t\t};\n\n\t\t/**\n\t\t * @method _handleTimeout\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tTicker._handleTimeout = function() {\n\t\t\tTicker._timerId = null;\n\t\t\tTicker._setupTick();\n\t\t\tTicker._tick();\n\t\t};\n\n\t\t/**\n\t\t * @method _setupTick\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tTicker._setupTick = function() {\n\t\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\t\tvar mode = Ticker.timingMode||(Ticker.useRAF&&Ticker.RAF_SYNCHED);\n\t\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\t\tif (f) {\n\t\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\t\tTicker._raf = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tTicker._raf = false;\n\t\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t\t};\n\n\t\t/**\n\t\t * @method _tick\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tTicker._tick = function() {\n\t\t\tvar paused = Ticker.paused;\n\t\t\tvar time = Ticker._getTime();\n\t\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\t\tTicker._lastTime = time;\n\t\t\tTicker._ticks++;\n\t\t\t\n\t\t\tif (paused) {\n\t\t\t\tTicker._pausedTicks++;\n\t\t\t\tTicker._pausedTime += elapsedTime;\n\t\t\t}\n\t\t\t\n\t\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\t\tevent.paused = paused;\n\t\t\t\tevent.time = time;\n\t\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\t\tTicker.dispatchEvent(event);\n\t\t\t}\n\t\t\t\n\t\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\t\tTicker._times.unshift(time);\n\t\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t\t};\n\n\t\t/**\n\t\t * @method _getTime\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tvar now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\n\t\tTicker._getTime = function() {\n\t\t\treturn ((now&&now.call(performance))||(new Date().getTime())) - Ticker._startTime;\n\t\t};\n\n\n\t\tcreatejs.Ticker = Ticker;\n\t}());\n\n\t//##############################################################################\n\t// UID.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n\t\t * and should not be instantiated.\n\t\t * @class UID\n\t\t * @static\n\t\t **/\n\t\tfunction UID() {\n\t\t\tthrow \"UID cannot be instantiated\";\n\t\t}\n\n\n\t// private static properties:\n\t\t/**\n\t\t * @property _nextID\n\t\t * @type Number\n\t\t * @protected\n\t\t **/\n\t\tUID._nextID = 0;\n\n\n\t// public static methods:\n\t\t/**\n\t\t * Returns the next unique id.\n\t\t * @method get\n\t\t * @return {Number} The next unique id\n\t\t * @static\n\t\t **/\n\t\tUID.get = function() {\n\t\t\treturn UID._nextID++;\n\t\t};\n\n\n\t\tcreatejs.UID = UID;\n\t}());\n\n\t//##############################################################################\n\t// MouseEvent.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n\t\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n\t\t * @class MouseEvent\n\t\t * @param {String} type The event type.\n\t\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t\t * @param {Number} stageX The normalized x position relative to the stage.\n\t\t * @param {Number} stageY The normalized y position relative to the stage.\n\t\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n\t\t * @param {Number} pointerID The unique id for the pointer.\n\t\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n\t\t * @param {Number} rawX The raw x position relative to the stage.\n\t\t * @param {Number} rawY The raw y position relative to the stage.\n\t\t * @param {DisplayObject} relatedTarget The secondary target for the event.\n\t\t * @extends Event\n\t\t * @constructor\n\t\t **/\n\t\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n\t\t\tthis.Event_constructor(type, bubbles, cancelable);\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\n\t\t\t * @property stageX\n\t\t\t * @type Number\n\t\t\t*/\n\t\t\tthis.stageX = stageX;\n\t\t\n\t\t\t/**\n\t\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\n\t\t\t * @property stageY\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.stageY = stageY;\n\t\t\n\t\t\t/**\n\t\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n\t\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t\t * @property rawX\n\t\t\t * @type Number\n\t\t\t*/\n\t\t\tthis.rawX = (rawX==null)?stageX:rawX;\n\t\t\n\t\t\t/**\n\t\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n\t\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t\t * @property rawY\n\t\t\t * @type Number\n\t\t\t*/\n\t\t\tthis.rawY = (rawY==null)?stageY:rawY;\n\t\t\n\t\t\t/**\n\t\t\t * The native MouseEvent generated by the browser. The properties and API for this\n\t\t\t * event may differ between browsers. This property will be null if the\n\t\t\t * EaselJS property was not directly generated from a native MouseEvent.\n\t\t\t * @property nativeEvent\n\t\t\t * @type HtmlMouseEvent\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.nativeEvent = nativeEvent;\n\t\t\n\t\t\t/**\n\t\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n\t\t\t * supplied id value.\n\t\t\t * @property pointerID\n\t\t\t * @type {Number}\n\t\t\t */\n\t\t\tthis.pointerID = pointerID;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n\t\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n\t\t\t * @property primary\n\t\t\t * @type {Boolean}\n\t\t\t */\n\t\t\tthis.primary = !!primary;\n\t\t\t\n\t\t\t/**\n\t\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\n\t\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n\t\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n\t\t\t * \n\t\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n\t\t\t * @property relatedTarget\n\t\t\t * @type {DisplayObject}\n\t\t\t */\n\t\t\tthis.relatedTarget = relatedTarget;\n\t\t}\n\t\tvar p = createjs.extend(MouseEvent, createjs.Event);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\t\n\t\t\n\t// getter / setters:\n\t\t/**\n\t\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t\t * @property localX\n\t\t * @type {Number}\n\t\t * @readonly\n\t\t */\n\t\tp._get_localX = function() {\n\t\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t\t * @property localY\n\t\t * @type {Number}\n\t\t * @readonly\n\t\t */\n\t\tp._get_localY = function() {\n\t\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Indicates whether the event was generated by a touch input (versus a mouse input).\n\t\t * @property isTouch\n\t\t * @type {Boolean}\n\t\t * @readonly\n\t\t */\n\t\tp._get_isTouch = function() {\n\t\t\treturn this.pointerID !== -1;\n\t\t};\n\t\t\n\t\t\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tlocalX: { get: p._get_localX },\n\t\t\t\tlocalY: { get: p._get_localY },\n\t\t\t\tisTouch: { get: p._get_isTouch }\n\t\t\t});\n\t\t} catch (e) {} // TODO: use Log\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns a clone of the MouseEvent instance.\n\t\t * @method clone\n\t\t * @return {MouseEvent} a clone of the MouseEvent instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\n\t\t};\n\n\n\t\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n\t}());\n\n\t//##############################################################################\n\t// Matrix2D.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n\t\t *\n\t\t * This matrix can be visualized as:\n\t\t *\n\t\t * \t[ a  c  tx\n\t\t * \t  b  d  ty\n\t\t * \t  0  0  1  ]\n\t\t *\n\t\t * Note the locations of b and c.\n\t\t *\n\t\t * @class Matrix2D\n\t\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t\t * @constructor\n\t\t **/\n\t\tfunction Matrix2D(a, b, c, d, tx, ty) {\n\t\t\tthis.setValues(a,b,c,d,tx,ty);\n\t\t\t\n\t\t// public properties:\n\t\t\t// assigned in the setValues method.\n\t\t\t/**\n\t\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\n\t\t\t * @property a\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\n\t\t\t * @property b\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\n\t\t\t * @property c\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\n\t\t\t * @property d\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\n\t\t\t * @property tx\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\n\t\t\t * @property ty\n\t\t\t * @type Number\n\t\t\t **/\n\t\t}\n\t\tvar p = Matrix2D.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// constants:\n\t\t/**\n\t\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n\t\t * @property DEG_TO_RAD\n\t\t * @static\n\t\t * @final\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n\n\t// static public properties:\n\t\t/**\n\t\t * An identity matrix, representing a null transformation.\n\t\t * @property identity\n\t\t * @static\n\t\t * @type Matrix2D\n\t\t * @readonly\n\t\t **/\n\t\tMatrix2D.identity = null; // set at bottom of class definition.\n\t\t\n\n\t// public methods:\n\t\t/**\n\t\t * Sets the specified values on this instance. \n\t\t * @method setValues\n\t\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t\t * @return {Matrix2D} This instance. Useful for chaining method calls.\n\t\t*/\n\t\tp.setValues = function(a, b, c, d, tx, ty) {\n\t\t\t// don't forget to update docs in the constructor if these change:\n\t\t\tthis.a = (a == null) ? 1 : a;\n\t\t\tthis.b = b || 0;\n\t\t\tthis.c = c || 0;\n\t\t\tthis.d = (d == null) ? 1 : d;\n\t\t\tthis.tx = tx || 0;\n\t\t\tthis.ty = ty || 0;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Appends the specified matrix properties to this matrix. All parameters are required.\n\t\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t\t * @method append\n\t\t * @param {Number} a\n\t\t * @param {Number} b\n\t\t * @param {Number} c\n\t\t * @param {Number} d\n\t\t * @param {Number} tx\n\t\t * @param {Number} ty\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.append = function(a, b, c, d, tx, ty) {\n\t\t\tvar a1 = this.a;\n\t\t\tvar b1 = this.b;\n\t\t\tvar c1 = this.c;\n\t\t\tvar d1 = this.d;\n\t\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\t\tthis.a  = a1*a+c1*b;\n\t\t\t\tthis.b  = b1*a+d1*b;\n\t\t\t\tthis.c  = a1*c+c1*d;\n\t\t\t\tthis.d  = b1*c+d1*d;\n\t\t\t}\n\t\t\tthis.tx = a1*tx+c1*ty+this.tx;\n\t\t\tthis.ty = b1*tx+d1*ty+this.ty;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Prepends the specified matrix properties to this matrix.\n\t\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t\t * All parameters are required.\n\t\t * @method prepend\n\t\t * @param {Number} a\n\t\t * @param {Number} b\n\t\t * @param {Number} c\n\t\t * @param {Number} d\n\t\t * @param {Number} tx\n\t\t * @param {Number} ty\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.prepend = function(a, b, c, d, tx, ty) {\n\t\t\tvar a1 = this.a;\n\t\t\tvar c1 = this.c;\n\t\t\tvar tx1 = this.tx;\n\n\t\t\tthis.a  = a*a1+c*this.b;\n\t\t\tthis.b  = b*a1+d*this.b;\n\t\t\tthis.c  = a*c1+c*this.d;\n\t\t\tthis.d  = b*c1+d*this.d;\n\t\t\tthis.tx = a*tx1+c*this.ty+tx;\n\t\t\tthis.ty = b*tx1+d*this.ty+ty;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Appends the specified matrix to this matrix.\n\t\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t\t * @method appendMatrix\n\t\t * @param {Matrix2D} matrix\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.appendMatrix = function(matrix) {\n\t\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t\t};\n\n\t\t/**\n\t\t * Prepends the specified matrix to this matrix.\n\t\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t\t * For example, you could calculate the combined transformation for a child object using:\n\t\t * \n\t\t * \tvar o = myDisplayObject;\n\t\t * \tvar mtx = o.getMatrix();\n\t\t * \twhile (o = o.parent) {\n\t\t * \t\t// prepend each parent's transformation in turn:\n\t\t * \t\to.prependMatrix(o.getMatrix());\n\t\t * \t}\n\t\t * @method prependMatrix\n\t\t * @param {Matrix2D} matrix\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.prependMatrix = function(matrix) {\n\t\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t\t};\n\n\t\t/**\n\t\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n\t\t * For example, you can use this to generate a matrix representing the transformations of a display object:\n\t\t * \n\t\t * \tvar mtx = new createjs.Matrix2D();\n\t\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n\t\t * @method appendTransform\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} scaleX\n\t\t * @param {Number} scaleY\n\t\t * @param {Number} rotation\n\t\t * @param {Number} skewX\n\t\t * @param {Number} skewY\n\t\t * @param {Number} regX Optional.\n\t\t * @param {Number} regY Optional.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\t\tif (rotation%360) {\n\t\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\t\tvar cos = Math.cos(r);\n\t\t\t\tvar sin = Math.sin(r);\n\t\t\t} else {\n\t\t\t\tcos = 1;\n\t\t\t\tsin = 0;\n\t\t\t}\n\n\t\t\tif (skewX || skewY) {\n\t\t\t\t// TODO: can this be combined into a single append operation?\n\t\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\t} else {\n\t\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t\t}\n\t\t\t\n\t\t\tif (regX || regY) {\n\t\t\t\t// append the registration offset:\n\t\t\t\tthis.tx -= regX*this.a+regY*this.c; \n\t\t\t\tthis.ty -= regX*this.b+regY*this.d;\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n\t\t * For example, you could calculate the combined transformation for a child object using:\n\t\t * \n\t\t * \tvar o = myDisplayObject;\n\t\t * \tvar mtx = new createjs.Matrix2D();\n\t\t * \tdo  {\n\t\t * \t\t// prepend each parent's transformation in turn:\n\t\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t\t * \t} while (o = o.parent);\n\t\t * \t\n\t\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n\t\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n\t\t * @method prependTransform\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} scaleX\n\t\t * @param {Number} scaleY\n\t\t * @param {Number} rotation\n\t\t * @param {Number} skewX\n\t\t * @param {Number} skewY\n\t\t * @param {Number} regX Optional.\n\t\t * @param {Number} regY Optional.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\t\tif (rotation%360) {\n\t\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\t\tvar cos = Math.cos(r);\n\t\t\t\tvar sin = Math.sin(r);\n\t\t\t} else {\n\t\t\t\tcos = 1;\n\t\t\t\tsin = 0;\n\t\t\t}\n\n\t\t\tif (regX || regY) {\n\t\t\t\t// prepend the registration offset:\n\t\t\t\tthis.tx -= regX; this.ty -= regY;\n\t\t\t}\n\t\t\tif (skewX || skewY) {\n\t\t\t\t// TODO: can this be combined into a single prepend operation?\n\t\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\t} else {\n\t\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Applies a clockwise rotation transformation to the matrix.\n\t\t * @method rotate\n\t\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.rotate = function(angle) {\n\t\t\tangle = angle*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(angle);\n\t\t\tvar sin = Math.sin(angle);\n\n\t\t\tvar a1 = this.a;\n\t\t\tvar b1 = this.b;\n\n\t\t\tthis.a = a1*cos+this.c*sin;\n\t\t\tthis.b = b1*cos+this.d*sin;\n\t\t\tthis.c = -a1*sin+this.c*cos;\n\t\t\tthis.d = -b1*sin+this.d*cos;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Applies a skew transformation to the matrix.\n\t\t * @method skew\n\t\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t\t * @param {Number} skewY The amount to skew vertically in degrees.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t*/\n\t\tp.skew = function(skewX, skewY) {\n\t\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\n\t\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Applies a scale transformation to the matrix.\n\t\t * @method scale\n\t\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n\t\t * @param {Number} y The amount to scale vertically.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.scale = function(x, y) {\n\t\t\tthis.a *= x;\n\t\t\tthis.b *= x;\n\t\t\tthis.c *= y;\n\t\t\tthis.d *= y;\n\t\t\t//this.tx *= x;\n\t\t\t//this.ty *= y;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Translates the matrix on the x and y axes.\n\t\t * @method translate\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.translate = function(x, y) {\n\t\t\tthis.tx += this.a*x + this.c*y;\n\t\t\tthis.ty += this.b*x + this.d*y;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n\t\t * @method identity\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.identity = function() {\n\t\t\tthis.a = this.d = 1;\n\t\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Inverts the matrix, causing it to perform the opposite transformation.\n\t\t * @method invert\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.invert = function() {\n\t\t\tvar a1 = this.a;\n\t\t\tvar b1 = this.b;\n\t\t\tvar c1 = this.c;\n\t\t\tvar d1 = this.d;\n\t\t\tvar tx1 = this.tx;\n\t\t\tvar n = a1*d1-b1*c1;\n\n\t\t\tthis.a = d1/n;\n\t\t\tthis.b = -b1/n;\n\t\t\tthis.c = -c1/n;\n\t\t\tthis.d = a1/n;\n\t\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\n\t\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Returns true if the matrix is an identity matrix.\n\t\t * @method isIdentity\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp.isIdentity = function() {\n\t\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n\t\t * @method equals\n\t\t * @param {Matrix2D} matrix The matrix to compare.\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp.equals = function(matrix) {\n\t\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n\t\t};\n\n\t\t/**\n\t\t * Transforms a point according to this matrix.\n\t\t * @method transformPoint\n\t\t * @param {Number} x The x component of the point to transform.\n\t\t * @param {Number} y The y component of the point to transform.\n\t\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n\t\t * @return {Point} This matrix. Useful for chaining method calls.\n\t\t **/\n\t\tp.transformPoint = function(x, y, pt) {\n\t\t\tpt = pt||{};\n\t\t\tpt.x = x*this.a+y*this.c+this.tx;\n\t\t\tpt.y = x*this.b+y*this.d+this.ty;\n\t\t\treturn pt;\n\t\t};\n\n\t\t/**\n\t\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n\t\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n\t\t * results.\n\t\t * @method decompose\n\t\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n\t\t * @return {Object} The target, or a new generic object with the transform properties applied.\n\t\t*/\n\t\tp.decompose = function(target) {\n\t\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n\t\t\tif (target == null) { target = {}; }\n\t\t\ttarget.x = this.tx;\n\t\t\ttarget.y = this.ty;\n\t\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n\t\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n\t\t\tvar skewX = Math.atan2(-this.c, this.d);\n\t\t\tvar skewY = Math.atan2(this.b, this.a);\n\n\t\t\tvar delta = Math.abs(1-skewX/skewY);\n\t\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\n\t\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\t\tif (this.a < 0 && this.d >= 0) {\n\t\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\n\t\t\t\t}\n\t\t\t\ttarget.skewX = target.skewY = 0;\n\t\t\t} else {\n\t\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\n\t\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\t}\n\t\t\treturn target;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Copies all properties from the specified matrix to this matrix.\n\t\t * @method copy\n\t\t * @param {Matrix2D} matrix The matrix to copy properties from.\n\t\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t\t*/\n\t\tp.copy = function(matrix) {\n\t\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of the Matrix2D instance.\n\t\t * @method clone\n\t\t * @return {Matrix2D} a clone of the Matrix2D instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n\t\t};\n\n\t\t// this has to be populated after the class is defined:\n\t\tMatrix2D.identity = new Matrix2D();\n\n\n\t\tcreatejs.Matrix2D = Matrix2D;\n\t}());\n\n\t//##############################################################################\n\t// DisplayProps.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * Used for calculating and encapsulating display related properties.\n\t\t * @class DisplayProps\n\t\t * @param {Number} [visible=true] Visible value.\n\t\t * @param {Number} [alpha=1] Alpha value.\n\t\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n\t\t * @constructor\n\t\t **/\n\t\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n\t\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\t\t\t\n\t\t// public properties:\n\t\t\t// assigned in the setValues method.\n\t\t\t/**\n\t\t\t * Property representing the alpha that will be applied to a display object.\n\t\t\t * @property alpha\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Property representing the shadow that will be applied to a display object.\n\t\t\t * @property shadow\n\t\t\t * @type Shadow\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Property representing the compositeOperation that will be applied to a display object.\n\t\t\t * You can find a list of valid composite operations at:\n\t\t\t * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\n\t\t\t * @property compositeOperation\n\t\t\t * @type String\n\t\t\t **/\n\t\t\t\n\t\t\t/**\n\t\t\t * Property representing the value for visible that will be applied to a display object.\n\t\t\t * @property visible\n\t\t\t * @type Boolean\n\t\t\t **/\n\t\t\t\n\t\t\t/**\n\t\t\t * The transformation matrix that will be applied to a display object.\n\t\t\t * @property matrix\n\t\t\t * @type Matrix2D\n\t\t\t **/\n\t\t}\n\t\tvar p = DisplayProps.prototype;\n\n\t// initialization:\n\t\t/**\n\t\t * Reinitializes the instance with the specified values.\n\t\t * @method setValues\n\t\t * @param {Number} [visible=true] Visible value.\n\t\t * @param {Number} [alpha=1] Alpha value.\n\t\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n\t\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n\t\t\tthis.visible = visible == null ? true : !!visible;\n\t\t\tthis.alpha = alpha == null ? 1 : alpha;\n\t\t\tthis.shadow = shadow;\n\t\t\tthis.compositeOperation = compositeOperation;\n\t\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\n\t\t\treturn this;\n\t\t};\n\n\t// public methods:\n\t\t/**\n\t\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n\t\t * @method append\n\t\t * @param {Boolean} visible desired visible value\n\t\t * @param {Number} alpha desired alpha value\n\t\t * @param {Shadow} shadow desired shadow value\n\t\t * @param {String} compositeOperation desired composite operation value\n\t\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\t\tthis.alpha *= alpha;\n\t\t\tthis.shadow = shadow || this.shadow;\n\t\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\n\t\t\tthis.visible = this.visible && visible;\n\t\t\tmatrix&&this.matrix.appendMatrix(matrix);\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n\t\t * For example, to get the combined display properties that would be applied to a child, you could use:\n\t\t * \n\t\t * \tvar o = myDisplayObject;\n\t\t * \tvar props = new createjs.DisplayProps();\n\t\t * \tdo {\n\t\t * \t\t// prepend each parent's props in turn:\n\t\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n\t\t * \t} while (o = o.parent);\n\t\t * \t\n\t\t * @method prepend\n\t\t * @param {Boolean} visible desired visible value\n\t\t * @param {Number} alpha desired alpha value\n\t\t * @param {Shadow} shadow desired shadow value\n\t\t * @param {String} compositeOperation desired composite operation value\n\t\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\t\tthis.alpha *= alpha;\n\t\t\tthis.shadow = this.shadow || shadow;\n\t\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\n\t\t\tthis.visible = this.visible && visible;\n\t\t\tmatrix&&this.matrix.prependMatrix(matrix);\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Resets this instance and its matrix to default values.\n\t\t * @method identity\n\t\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.identity = function() {\n\t\t\tthis.visible = true;\n\t\t\tthis.alpha = 1;\n\t\t\tthis.shadow = this.compositeOperation = null;\n\t\t\tthis.matrix.identity();\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n\t\t * @method clone\n\t\t * @return {DisplayProps} a clone of the DisplayProps instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n\t\t};\n\n\t// private methods:\n\n\t\tcreatejs.DisplayProps = DisplayProps;\n\t})();\n\n\t//##############################################################################\n\t// Point.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Represents a point on a 2 dimensional x / y coordinate system.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * \n\t\t *      var point = new createjs.Point(0, 100);\n\t\t * \n\t\t * @class Point\n\t\t * @param {Number} [x=0] X position.\n\t\t * @param {Number} [y=0] Y position.\n\t\t * @constructor\n\t\t **/\n\t\tfunction Point(x, y) {\n\t\t \tthis.setValues(x, y);\n\t\t \t\n\t\t \t\n\t\t// public properties:\n\t\t\t// assigned in the setValues method.\n\t\t\t/**\n\t\t\t * X position.\n\t\t\t * @property x\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Y position.\n\t\t\t * @property y\n\t\t\t * @type Number\n\t\t\t **/\n\t\t}\n\t\tvar p = Point.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\t\n\t// public methods:\n\t\t/** \n\t\t * Sets the specified values on this instance.\n\t\t * @method setValues\n\t\t * @param {Number} [x=0] X position.\n\t\t * @param {Number} [y=0] Y position.\n\t\t * @return {Point} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.setValues = function(x, y) {\n\t\t\tthis.x = x||0;\n\t\t\tthis.y = y||0;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Copies all properties from the specified point to this point.\n\t\t * @method copy\n\t\t * @param {Point} point The point to copy properties from.\n\t\t * @return {Point} This point. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.copy = function(point) {\n\t\t\tthis.x = point.x;\n\t\t\tthis.y = point.y;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a clone of the Point instance.\n\t\t * @method clone\n\t\t * @return {Point} a clone of the Point instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Point(this.x, this.y);\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\n\t\t};\n\t\t\n\t\t\n\t\tcreatejs.Point = Point;\n\t}());\n\n\t//##############################################################################\n\t// Rectangle.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n\t\t *\n\t\t * @class Rectangle\n\t\t * @param {Number} [x=0] X position.\n\t\t * @param {Number} [y=0] Y position.\n\t\t * @param {Number} [width=0] The width of the Rectangle.\n\t\t * @param {Number} [height=0] The height of the Rectangle.\n\t\t * @constructor\n\t\t **/\n\t\tfunction Rectangle(x, y, width, height) {\n\t\t\tthis.setValues(x, y, width, height);\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t// assigned in the setValues method.\n\t\t\t/**\n\t\t\t * X position.\n\t\t\t * @property x\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Y position.\n\t\t\t * @property y\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Width.\n\t\t\t * @property width\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\n\t\t\t/**\n\t\t\t * Height.\n\t\t\t * @property height\n\t\t\t * @type Number\n\t\t\t **/\n\t\t}\n\t\tvar p = Rectangle.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// public methods:\n\t\t/** \n\t\t * Sets the specified values on this instance.\n\t\t * @method setValues\n\t\t * @param {Number} [x=0] X position.\n\t\t * @param {Number} [y=0] Y position.\n\t\t * @param {Number} [width=0] The width of the Rectangle.\n\t\t * @param {Number} [height=0] The height of the Rectangle.\n\t\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.setValues = function(x, y, width, height) {\n\t\t\t// don't forget to update docs in the constructor if these change:\n\t\t\tthis.x = x||0;\n\t\t\tthis.y = y||0;\n\t\t\tthis.width = width||0;\n\t\t\tthis.height = height||0;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/** \n\t\t * Extends the rectangle's bounds to include the described point or rectangle.\n\t\t * @method extend\n\t\t * @param {Number} x X position of the point or rectangle.\n\t\t * @param {Number} y Y position of the point or rectangle.\n\t\t * @param {Number} [width=0] The width of the rectangle.\n\t\t * @param {Number} [height=0] The height of the rectangle.\n\t\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.extend = function(x, y, width, height) {\n\t\t\twidth = width||0;\n\t\t\theight = height||0;\n\t\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\n\t\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\n\t\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\n\t\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/** \n\t\t * Adds the specified padding to the rectangle's bounds.\n\t\t * @method pad\n\t\t * @param {Number} top\n\t\t * @param {Number} left\n\t\t * @param {Number} right\n\t\t * @param {Number} bottom\n\t\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.pad = function(top, left, bottom, right) {\n\t\t\tthis.x -= left;\n\t\t\tthis.y -= top;\n\t\t\tthis.width += left+right;\n\t\t\tthis.height += top+bottom;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Copies all properties from the specified rectangle to this rectangle.\n\t\t * @method copy\n\t\t * @param {Rectangle} rectangle The rectangle to copy properties from.\n\t\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\n\t\t * @chainable\n\t\t*/\n\t\tp.copy = function(rectangle) {\n\t\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t\t};\n\t\t\n\t\t/** \n\t\t * Returns true if this rectangle fully encloses the described point or rectangle.\n\t\t * @method contains\n\t\t * @param {Number} x X position of the point or rectangle.\n\t\t * @param {Number} y Y position of the point or rectangle.\n\t\t * @param {Number} [width=0] The width of the rectangle.\n\t\t * @param {Number} [height=0] The height of the rectangle.\n\t\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n\t\t*/\n\t\tp.contains = function(x, y, width, height) {\n\t\t\twidth = width||0;\n\t\t\theight = height||0;\n\t\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n\t\t};\n\t\t\n\t\t/** \n\t\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\n\t\t * @method union\n\t\t * @param {Rectangle} rect The rectangle to calculate a union with.\n\t\t * @return {Rectangle} A new rectangle describing the union.\n\t\t*/\n\t\tp.union = function(rect) {\n\t\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n\t\t};\n\t\t\n\t\t/** \n\t\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n\t\t * or null if they do not intersect.\n\t\t * @method intersection\n\t\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\n\t\t * @return {Rectangle} A new rectangle describing the intersection or null.\n\t\t*/\n\t\tp.intersection = function(rect) {\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n\t\t\tif (this.x > x1) { x1 = this.x; }\n\t\t\tif (this.y > y1) { y1 = this.y; }\n\t\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\n\t\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\n\t\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n\t\t};\n\t\t\n\t\t/** \n\t\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n\t\t * @method intersects\n\t\t * @param {Rectangle} rect The rectangle to compare.\n\t\t * @return {Boolean} True if the rectangles intersect.\n\t\t*/\n\t\tp.intersects = function(rect) {\n\t\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n\t\t};\n\t\t\n\t\t/** \n\t\t * Returns true if the width or height are equal or less than 0.\n\t\t * @method isEmpty\n\t\t * @return {Boolean} True if the rectangle is empty.\n\t\t*/\n\t\tp.isEmpty = function() {\n\t\t\treturn this.width <= 0 || this.height <= 0;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a clone of the Rectangle instance.\n\t\t * @method clone\n\t\t * @return {Rectangle} a clone of the Rectangle instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n\t\t};\n\t\t\n\t\t\n\t\tcreatejs.Rectangle = Rectangle;\n\t}());\n\n\t//##############################################################################\n\t// ButtonHelper.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n\t\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n\t\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n\t\t *\n\t\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n\t\t * garbage collection.\n\t\t * \n\t\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n\t\t *      myInstance.addEventListener(\"click\", handleClick);\n\t\t *      function handleClick(event) {\n\t\t *          // Click Happened.\n\t\t *      }\n\t\t *\n\t\t * @class ButtonHelper\n\t\t * @param {Sprite|MovieClip} target The instance to manage.\n\t\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n\t\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n\t\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n\t\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n\t\t * states.\n\t\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n\t\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n\t\t * used for the hitState.\n\t\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n\t\t * null, then the default state of the hitArea will be used. *\n\t\t * @constructor\n\t\t */\n\t\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n\t\t\tif (!target.addEventListener) { return; }\n\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The target for this button helper.\n\t\t\t * @property target\n\t\t\t * @type MovieClip | Sprite\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.target = target;\n\t\t\n\t\t\t/**\n\t\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n\t\t\t * @property overLabel\n\t\t\t * @type String | Number\n\t\t\t **/\n\t\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\n\t\t\n\t\t\t/**\n\t\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n\t\t\t * @property outLabel\n\t\t\t * @type String | Number\n\t\t\t **/\n\t\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\n\t\t\n\t\t\t/**\n\t\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n\t\t\t * @property downLabel\n\t\t\t * @type String | Number\n\t\t\t **/\n\t\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\n\t\t\n\t\t\t/**\n\t\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n\t\t\t * @property play\n\t\t\t * @default false\n\t\t\t * @type Boolean\n\t\t\t **/\n\t\t\tthis.play = play;\n\t\t\t\n\t\t\t\n\t\t//  private properties\n\t\t\t/**\n\t\t\t * @property _isPressed\n\t\t\t * @type Boolean\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._isPressed = false;\n\t\t\n\t\t\t/**\n\t\t\t * @property _isOver\n\t\t\t * @type Boolean\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._isOver = false;\n\t\t\n\t\t\t/**\n\t\t\t * @property _enabled\n\t\t\t * @type Boolean\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._enabled = false;\n\t\t\t\n\t\t// setup:\n\t\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n\t\t\tthis.enabled = true;\n\t\t\tthis.handleEvent({});\n\t\t\tif (hitArea) {\n\t\t\t\tif (hitLabel) {\n\t\t\t\t\thitArea.actionsEnabled = false;\n\t\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\n\t\t\t\t}\n\t\t\t\ttarget.hitArea = hitArea;\n\t\t\t}\n\t\t}\n\t\tvar p = ButtonHelper.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\t\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t\t * @method setEnabled\n\t\t * @param {Boolean} value\n\t\t * @deprecated\n\t\t **/\n\t\tp.setEnabled = function(value) { // TODO: deprecated.\n\t\t\tif (value == this._enabled) { return; }\n\t\t\tvar o = this.target;\n\t\t\tthis._enabled = value;\n\t\t\tif (value) {\n\t\t\t\to.cursor = \"pointer\";\n\t\t\t\to.addEventListener(\"rollover\", this);\n\t\t\t\to.addEventListener(\"rollout\", this);\n\t\t\t\to.addEventListener(\"mousedown\", this);\n\t\t\t\to.addEventListener(\"pressup\", this);\n\t\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\n\t\t\t} else {\n\t\t\t\to.cursor = null;\n\t\t\t\to.removeEventListener(\"rollover\", this);\n\t\t\t\to.removeEventListener(\"rollout\", this);\n\t\t\t\to.removeEventListener(\"mousedown\", this);\n\t\t\t\to.removeEventListener(\"pressup\", this);\n\t\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t\t * @method getEnabled\n\t\t * @return {Boolean}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getEnabled = function() {\n\t\t\treturn this._enabled;\n\t\t};\n\n\t\t/**\n\t\t * Enables or disables the button functionality on the target.\n\t\t * @property enabled\n\t\t * @type {Boolean}\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tenabled: { get: p.getEnabled, set: p.setEnabled }\n\t\t\t});\n\t\t} catch (e) {} // TODO: use Log\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[ButtonHelper]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method handleEvent\n\t\t * @param {Object} evt The mouse event to handle.\n\t\t * @protected\n\t\t **/\n\t\tp.handleEvent = function(evt) {\n\t\t\tvar label, t = this.target, type = evt.type;\n\t\t\tif (type == \"mousedown\") {\n\t\t\t\tthis._isPressed = true;\n\t\t\t\tlabel = this.downLabel;\n\t\t\t} else if (type == \"pressup\") {\n\t\t\t\tthis._isPressed = false;\n\t\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\n\t\t\t} else if (type == \"rollover\") {\n\t\t\t\tthis._isOver = true;\n\t\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\n\t\t\t} else { // rollout and default\n\t\t\t\tthis._isOver = false;\n\t\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\n\t\t\t}\n\t\t\tif (this.play) {\n\t\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\n\t\t\t} else {\n\t\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * Injected into target. Preserves the paused state through a reset.\n\t\t * @method _reset\n\t\t * @protected\n\t\t **/\n\t\tp._reset = function() {\n\t\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n\t\t\tvar p = this.paused;\n\t\t\tthis.__reset();\n\t\t\tthis.paused = p;\n\t\t};\n\n\n\t\tcreatejs.ButtonHelper = ButtonHelper;\n\t}());\n\n\t//##############################################################################\n\t// Shadow.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n\t\t * via its <code>shadow</code> property.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n\t\t *\n\t\t * @class Shadow\n\t\t * @constructor\n\t\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\n\t\t * @param {Number} offsetX The x offset of the shadow in pixels.\n\t\t * @param {Number} offsetY The y offset of the shadow in pixels.\n\t\t * @param {Number} blur The size of the blurring effect.\n\t\t **/\n\t\tfunction Shadow(color, offsetX, offsetY, blur) {\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/** \n\t\t\t * The color of the shadow. This can be any valid CSS color value.\n\t\t\t * @property color\n\t\t\t * @type String\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.color = color||\"black\";\n\t\t\n\t\t\t/** The x offset of the shadow.\n\t\t\t * @property offsetX\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.offsetX = offsetX||0;\n\t\t\n\t\t\t/** The y offset of the shadow.\n\t\t\t * @property offsetY\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.offsetY = offsetY||0;\n\t\t\n\t\t\t/** The blur of the shadow.\n\t\t\t * @property blur\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.blur = blur||0;\n\t\t}\n\t\tvar p = Shadow.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// static public properties:\n\t\t/**\n\t\t * An identity shadow object (all properties are set to 0).\n\t\t * @property identity\n\t\t * @type Shadow\n\t\t * @static\n\t\t * @final\n\t\t * @readonly\n\t\t **/\n\t\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Shadow]\";\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this Shadow instance.\n\t\t * @method clone\n\t\t * @return {Shadow} A clone of the current Shadow instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n\t\t};\n\t\t\n\n\t\tcreatejs.Shadow = Shadow;\n\t}());\n\n\t//##############################################################################\n\t// SpriteSheet.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n\t\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n\t\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n\t\t *\n\t\t * The data passed to the SpriteSheet constructor defines:\n\t\t * <ol>\n\t\t * \t<li> The source image or images to use.</li>\n\t\t * \t<li> The positions of individual image frames.</li>\n\t\t * \t<li> Sequences of frames that form named animations. Optional.</li>\n\t\t * \t<li> The target playback framerate. Optional.</li>\n\t\t * </ol>\n\t\t * <h3>SpriteSheet Format</h3>\n\t\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n\t\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n\t\t *\n\t\t * <h4>images</h4>\n\t\t * An array of source images. Images can be either an HTMlimage\n\t\t * instance, or a uri to an image. The former is recommended to control preloading.\n\t\t *\n\t\t * \timages: [image1, \"path/to/image2.png\"],\n\t\t *\n\t\t * <h4>frames</h4>\n\t\t * Defines the individual frames. There are two supported formats for frame data:\n\t\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n\t\t * and `count` properties.\n\t\t *\n\t\t * <ul>\n\t\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n\t\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n\t\t *  <li>`spacing` indicate the spacing between frames</li>\n\t\t *  <li>`margin` specify the margin around the image(s)</li>\n\t\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n\t\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n\t\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\n\t\t * </ul>\n\t\t *\n\t\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n\t\t *\n\t\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n\t\t * with 4 required and 3 optional entries, in the order:\n\t\t *\n\t\t * <ul>\n\t\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n\t\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n\t\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n\t\t * </ul>\n\t\t *\n\t\t * \tframes: [\n\t\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n\t\t * \t\t[64, 0, 96, 64],\n\t\t * \t\t[0, 0, 64, 64, 1, 32, 32]\n\t\t * \t\t// etc.\n\t\t * \t]\n\t\t *\n\t\t * <h4>animations</h4>\n\t\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n\t\t * animation of the same name. Each animation must specify the frames to play, and may\n\t\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n\t\t * the name of the `next` animation to sequence to after it completes.\n\t\t *\n\t\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n\t\t * <ol>\n\t\t * \t<li>for a single frame animation, you can simply specify the frame index\n\t\t *\n\t\t * \t\tanimations: {\n\t\t * \t\t\tsit: 7\n\t\t * \t\t}\n\t\t *\n\t\t * </li>\n\t\t * <li>\n\t\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n\t\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n\t\t *\n\t\t * \t\tanimations: {\n\t\t * \t\t\t// start, end, next*, speed*\n\t\t * \t\t\trun: [0, 8],\n\t\t * \t\t\tjump: [9, 12, \"run\", 2]\n\t\t * \t\t}\n\t\t *\n\t\t *  </li>\n\t\t *  <li>\n\t\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n\t\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\n\t\t *\n\t\t * \t\tanimations: {\n\t\t * \t\t\twalk: {\n\t\t * \t\t\t\tframes: [1,2,3,3,2,1]\n\t\t * \t\t\t},\n\t\t * \t\t\tshoot: {\n\t\t * \t\t\t\tframes: [1,4,5,6],\n\t\t * \t\t\t\tnext: \"walk\",\n\t\t * \t\t\t\tspeed: 0.5\n\t\t * \t\t\t}\n\t\t * \t\t}\n\t\t *\n\t\t *  </li>\n\t\t * </ol>\n\t\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n\t\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n\t\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n\t\t *\n\t\t * <h4>framerate</h4>\n\t\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n\t\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n\t\t *\n\t\t * \t\tframerate: 20\n\t\t *\n\t\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t\t *\n\t\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n\t\t * \t\tfunction handleTick(event) {\n\t\t *\t\t\tstage.update(event);\n\t\t *\t\t}\n\t\t *\n\t\t * <h3>Example</h3>\n\t\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n\t\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n\t\t * sequencing back to run.\n\t\t *\n\t\t * \t\tvar data = {\n\t\t * \t\t\timages: [\"sprites.jpg\"],\n\t\t * \t\t\tframes: {width:50, height:50},\n\t\t * \t\t\tanimations: {\n\t\t * \t\t\t\tstand:0,\n\t\t * \t\t\t\trun:[1,5],\n\t\t * \t\t\t\tjump:[6,8,\"run\"]\n\t\t * \t\t\t}\n\t\t * \t\t};\n\t\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n\t\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n\t\t *\n\t\t * <h3>Generating SpriteSheet Images</h3>\n\t\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n\t\t * coordinates manually, however there are a number of tools that facilitate this.\n\t\t * <ul>\n\t\t *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\n\t\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n\t\t *     EaselJS support.\n\t\t *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\n\t\t * </ul>\n\t\t *\n\t\t * <h3>Cross Origin Issues</h3>\n\t\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n\t\t * using:\n\t\t * <ul>\n\t\t *     <li>a mouse</li>\n\t\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n\t\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n\t\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n\t\t * </ul>\n\t\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n\t\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n\t\t *\n\t\t * \t\tvar image = new Image();\n\t\t * \t\timg.crossOrigin=\"Anonymous\";\n\t\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n\t\t *\n\t\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n\t\t * support cross-origin requests, or this will not work. For more information, check out\n\t\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n\t\t *\n\t\t * @class SpriteSheet\n\t\t * @constructor\n\t\t * @param {Object} data An object describing the SpriteSheet data.\n\t\t * @extends EventDispatcher\n\t\t **/\n\t\tfunction SpriteSheet(data) {\n\t\t\tthis.EventDispatcher_constructor();\n\n\n\t\t\t// public properties:\n\t\t\t/**\n\t\t\t * Indicates whether all images are finished loading.\n\t\t\t * @property complete\n\t\t\t * @type Boolean\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.complete = true;\n\n\t\t\t/**\n\t\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n\t\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n\t\t\t * @property framerate\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.framerate = 0;\n\n\n\t\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _animations\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._animations = null;\n\n\t\t\t/**\n\t\t\t * @property _frames\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._frames = null;\n\n\t\t\t/**\n\t\t\t * @property _images\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._images = null;\n\n\t\t\t/**\n\t\t\t * @property _data\n\t\t\t * @protected\n\t\t\t * @type Object\n\t\t\t **/\n\t\t\tthis._data = null;\n\n\t\t\t/**\n\t\t\t * @property _loadCount\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._loadCount = 0;\n\n\t\t\t// only used for simple frame defs:\n\t\t\t/**\n\t\t\t * @property _frameHeight\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._frameHeight = 0;\n\n\t\t\t/**\n\t\t\t * @property _frameWidth\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._frameWidth = 0;\n\n\t\t\t/**\n\t\t\t * @property _numFrames\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._numFrames = 0;\n\n\t\t\t/**\n\t\t\t * @property _regX\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._regX = 0;\n\n\t\t\t/**\n\t\t\t * @property _regY\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._regY = 0;\n\n\t\t\t/**\n\t\t\t * @property _spacing\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._spacing = 0;\n\n\t\t\t/**\n\t\t\t * @property _margin\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._margin = 0;\n\n\t\t\t// setup:\n\t\t\tthis._parseData(data);\n\t\t}\n\t\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// events:\n\t\t/**\n\t\t * Dispatched when all images are loaded.  Note that this only fires if the images\n\t\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n\t\t * to prior to adding a listener. Ex.\n\t\t *\n\t\t * \tvar sheet = new createjs.SpriteSheet(data);\n\t\t * \tif (!sheet.complete) {\n\t\t * \t\t// not preloaded, listen for the complete event:\n\t\t * \t\tsheet.addEventListener(\"complete\", handler);\n\t\t * \t}\n\t\t *\n\t\t * @event complete\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n\t\t * when doing on-demand rendering.\n\t\t * @event getframe\n\t\t * @param {Number} index The frame index.\n\t\t * @param {Object} frame The frame object that getFrame will return.\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n\t\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n\t\t * event once all images are finished processing, even if an error is encountered.\n\t\t * @event error\n\t\t * @param {String} src The source of the image that failed to load.\n\t\t * @since 0.8.2\n\t\t */\n\n\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n\t\t * @method getAnimations\n\t\t * @return {Array}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getAnimations = function() {\n\t\t\treturn this._animations.slice();\n\t\t};\n\n\t\t/**\n\t\t * Returns an array of all available animation names available on this sprite sheet as strings.\n\t\t * @property animations\n\t\t * @type {Array}\n\t\t * @readonly\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tanimations: { get: p.getAnimations }\n\t\t\t});\n\t\t} catch (e) {}\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns the total number of frames in the specified animation, or in the whole sprite\n\t\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n\t\t * the images have not been fully loaded.\n\t\t * @method getNumFrames\n\t\t * @param {String} animation The name of the animation to get a frame count for.\n\t\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n\t\t */\n\t\tp.getNumFrames = function(animation) {\n\t\t\tif (animation == null) {\n\t\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\n\t\t\t} else {\n\t\t\t\tvar data = this._data[animation];\n\t\t\t\tif (data == null) { return 0; }\n\t\t\t\telse { return data.frames.length; }\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Returns an object defining the specified animation. The returned object contains:<UL>\n\t\t * \t<li>frames: an array of the frame ids in the animation</li>\n\t\t * \t<li>speed: the playback speed for this animation</li>\n\t\t * \t<li>name: the name of the animation</li>\n\t\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n\t\t * \tsame.</li>\n\t\t * </UL>\n\t\t * @method getAnimation\n\t\t * @param {String} name The name of the animation to get.\n\t\t * @return {Object} a generic object with frames, speed, name, and next properties.\n\t\t **/\n\t\tp.getAnimation = function(name) {\n\t\t\treturn this._data[name];\n\t\t};\n\n\t\t/**\n\t\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n\t\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n\t\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n\t\t * \timage.</li>\n\t\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n\t\t * </UL>\n\t\t * @method getFrame\n\t\t * @param {Number} frameIndex The index of the frame.\n\t\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n\t\t **/\n\t\tp.getFrame = function(frameIndex) {\n\t\t\tvar frame;\n\t\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n\t\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n\t\t *\n\t\t * \t[x=-50, y=-40, width=90, height=70]\n\t\t *\n\t\t * @method getFrameBounds\n\t\t * @param {Number} frameIndex The index of the frame.\n\t\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n\t\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n\t\t **/\n\t\tp.getFrameBounds = function(frameIndex, rectangle) {\n\t\t\tvar frame = this.getFrame(frameIndex);\n\t\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[SpriteSheet]\";\n\t\t};\n\n\t\t/**\n\t\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n\t\t * @method clone\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tthrow(\"SpriteSheet cannot be cloned.\")\n\t\t};\n\n\t// private methods:\n\t\t/**\n\t\t * @method _parseData\n\t\t * @param {Object} data An object describing the SpriteSheet data.\n\t\t * @protected\n\t\t **/\n\t\tp._parseData = function(data) {\n\t\t\tvar i,l,o,a;\n\t\t\tif (data == null) { return; }\n\n\t\t\tthis.framerate = data.framerate||0;\n\n\t\t\t// parse images:\n\t\t\tif (data.images && (l=data.images.length) > 0) {\n\t\t\t\ta = this._images = [];\n\t\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\t\tvar img = data.images[i];\n\t\t\t\t\tif (typeof img == \"string\") {\n\t\t\t\t\t\tvar src = img;\n\t\t\t\t\t\timg = document.createElement(\"img\");\n\t\t\t\t\t\timg.src = src;\n\t\t\t\t\t}\n\t\t\t\t\ta.push(img);\n\t\t\t\t\tif (!img.getContext && !img.naturalWidth) {\n\t\t\t\t\t\tthis._loadCount++;\n\t\t\t\t\t\tthis.complete = false;\n\t\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); }; })(this, src);\n\t\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); }; })(this, src);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// parse frames:\n\t\t\tif (data.frames == null) ; else if (Array.isArray(data.frames)) {\n\t\t\t\tthis._frames = [];\n\t\t\t\ta = data.frames;\n\t\t\t\tfor (i=0,l=a.length;i<l;i++) {\n\t\t\t\t\tvar arr = a[i];\n\t\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\to = data.frames;\n\t\t\t\tthis._frameWidth = o.width;\n\t\t\t\tthis._frameHeight = o.height;\n\t\t\t\tthis._regX = o.regX||0;\n\t\t\t\tthis._regY = o.regY||0;\n\t\t\t\tthis._spacing = o.spacing||0;\n\t\t\t\tthis._margin = o.margin||0;\n\t\t\t\tthis._numFrames = o.count;\n\t\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\n\t\t\t}\n\n\t\t\t// parse animations:\n\t\t\tthis._animations = [];\n\t\t\tif ((o=data.animations) != null) {\n\t\t\t\tthis._data = {};\n\t\t\t\tvar name;\n\t\t\t\tfor (name in o) {\n\t\t\t\t\tvar anim = {name:name};\n\t\t\t\t\tvar obj = o[name];\n\t\t\t\t\tif (typeof obj == \"number\") { // single frame\n\t\t\t\t\t\ta = anim.frames = [obj];\n\t\t\t\t\t} else if (Array.isArray(obj)) { // simple\n\t\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tanim.speed = obj[3];\n\t\t\t\t\t\t\tanim.next = obj[2];\n\t\t\t\t\t\t\ta = anim.frames = [];\n\t\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\n\t\t\t\t\t\t\t\ta.push(i);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { // complex\n\t\t\t\t\t\tanim.speed = obj.speed;\n\t\t\t\t\t\tanim.next = obj.next;\n\t\t\t\t\t\tvar frames = obj.frames;\n\t\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\n\t\t\t\t\t}\n\t\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\n\t\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\n\t\t\t\t\tif (!anim.speed) { anim.speed = 1; }\n\t\t\t\t\tthis._animations.push(name);\n\t\t\t\t\tthis._data[name] = anim;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _handleImageLoad\n\t\t * @protected\n\t\t **/\n\t\tp._handleImageLoad = function(src) {\n\t\t\tif (--this._loadCount == 0) {\n\t\t\t\tthis._calculateFrames();\n\t\t\t\tthis.complete = true;\n\t\t\t\tthis.dispatchEvent(\"complete\");\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _handleImageError\n\t\t * @protected\n\t\t */\n\t\tp._handleImageError = function (src) {\n\t\t\tvar errorEvent = new createjs.Event(\"error\");\n\t\t\terrorEvent.src = src;\n\t\t\tthis.dispatchEvent(errorEvent);\n\n\t\t\t// Complete is still dispatched.\n\t\t\tif (--this._loadCount == 0) {\n\t\t\t\tthis.dispatchEvent(\"complete\");\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _calculateFrames\n\t\t * @protected\n\t\t **/\n\t\tp._calculateFrames = function() {\n\t\t\tif (this._frames || this._frameWidth == 0) { return; }\n\n\t\t\tthis._frames = [];\n\n\t\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n\t\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\n\t\t\tvar spacing = this._spacing, margin = this._margin;\n\t\t\t\n\t\t\timgLoop:\n\t\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\n\t\t\t\tvar img = imgs[i], imgW = img.width, imgH = img.height;\n\n\t\t\t\tvar y = margin;\n\t\t\t\twhile (y <= imgH-margin-frameHeight) {\n\t\t\t\t\tvar x = margin;\n\t\t\t\t\twhile (x <= imgW-margin-frameWidth) {\n\t\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\n\t\t\t\t\t\tframeCount++;\n\t\t\t\t\t\tthis._frames.push({\n\t\t\t\t\t\t\t\timage: img,\n\t\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n\t\t\t\t\t\t\t\tregX: this._regX,\n\t\t\t\t\t\t\t\tregY: this._regY\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tx += frameWidth+spacing;\n\t\t\t\t\t}\n\t\t\t\t\ty += frameHeight+spacing;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._numFrames = frameCount;\n\t\t};\n\n\n\t\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n\t}());\n\n\t//##############################################################################\n\t// Graphics.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n\t\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n\t\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n\t\t * context of an EaselJS display list.\n\t\t *\n\t\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n\t\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n\t\t *\n\t\t *      var g = new createjs.Graphics();\n\t\t *      g.setStrokeStyle(1);\n\t\t *      g.beginStroke(\"#000000\");\n\t\t *      g.beginFill(\"red\");\n\t\t *      g.drawCircle(0,0,30);\n\t\t *\n\t\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n\t\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n\t\t *\n\t\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n\t\t *\n\t\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n\t\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n\t\t *\n\t\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\n\t\t *      // ... later, update the fill style/color:\n\t\t *      fillCommand.style = \"blue\";\n\t\t *      // or change it to a bitmap fill:\n\t\t *      fillCommand.bitmap(myImage);\n\t\t *\n\t\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n\t\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n\t\t *\n\t\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n\t\t *      myGraphics.append(createjs.Graphics.beginCmd);\n\t\t *      // we need to define the path before applying the fill:\n\t\t *      var circle = new createjs.Graphics.Circle(0,0,30);\n\t\t *      myGraphics.append(circle);\n\t\t *      // fill the path we just defined:\n\t\t *      var fill = new createjs.Graphics.Fill(\"red\");\n\t\t *      myGraphics.append(fill);\n\t\t *\n\t\t * These approaches can be used together, for example to insert a custom command:\n\t\t *\n\t\t *      myGraphics.beginFill(\"red\");\n\t\t *      var customCommand = new CustomSpiralCommand(etc);\n\t\t *      myGraphics.append(customCommand);\n\t\t *      myGraphics.beginFill(\"blue\");\n\t\t *      myGraphics.drawCircle(0, 0, 30);\n\t\t *\n\t\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n\t\t *\n\t\t * <h4>Tiny API</h4>\n\t\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n\t\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n\t\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n\t\t * descriptions in the docs.\n\t\t *\n\t\t * <table>\n\t\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n\t\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n\t\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n\t\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n\t\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n\t\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n\t\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n\t\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n\t\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n\t\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n\t\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n\t\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n\t\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n\t\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n\t\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n\t\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n\t\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n\t\t * </table>\n\t\t *\n\t\t * Here is the above example, using the tiny API instead.\n\t\t *\n\t\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n\t\t *\n\t\t * @class Graphics\n\t\t * @constructor\n\t\t **/\n\t\tfunction Graphics() {\n\n\n\t\t// public properties\n\t\t\t/**\n\t\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n\t\t\t * to a Fill command in order to dynamically update the color later by using:\n\t\t\t *\n\t\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n\t\t\t * \t\t// update color later:\n\t\t\t * \t\tmyFill.style = \"yellow\";\n\t\t\t *\n\t\t\t * @property command\n\t\t\t * @type Object\n\t\t\t **/\n\t\t\tthis.command = null;\n\n\n\t\t// private properties\n\t\t\t/**\n\t\t\t * @property _stroke\n\t\t\t * @protected\n\t\t\t * @type {Stroke}\n\t\t\t **/\n\t\t\tthis._stroke = null;\n\n\t\t\t/**\n\t\t\t * @property _strokeStyle\n\t\t\t * @protected\n\t\t\t * @type {StrokeStyle}\n\t\t\t **/\n\t\t\tthis._strokeStyle = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _oldStrokeStyle\n\t\t\t * @protected\n\t\t\t * @type {StrokeStyle}\n\t\t\t **/\n\t\t\tthis._oldStrokeStyle = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _strokeDash\n\t\t\t * @protected\n\t\t\t * @type {StrokeDash}\n\t\t\t **/\n\t\t\tthis._strokeDash = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _oldStrokeDash\n\t\t\t * @protected\n\t\t\t * @type {StrokeDash}\n\t\t\t **/\n\t\t\tthis._oldStrokeDash = null;\n\n\t\t\t/**\n\t\t\t * @property _strokeIgnoreScale\n\t\t\t * @protected\n\t\t\t * @type Boolean\n\t\t\t **/\n\t\t\tthis._strokeIgnoreScale = false;\n\n\t\t\t/**\n\t\t\t * @property _fill\n\t\t\t * @protected\n\t\t\t * @type {Fill}\n\t\t\t **/\n\t\t\tthis._fill = null;\n\n\t\t\t/**\n\t\t\t * @property _instructions\n\t\t\t * @protected\n\t\t\t * @type {Array}\n\t\t\t **/\n\t\t\tthis._instructions = [];\n\n\t\t\t/**\n\t\t\t * Indicates the last instruction index that was committed.\n\t\t\t * @property _commitIndex\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t **/\n\t\t\tthis._commitIndex = 0;\n\n\t\t\t/**\n\t\t\t * Uncommitted instructions.\n\t\t\t * @property _activeInstructions\n\t\t\t * @protected\n\t\t\t * @type {Array}\n\t\t\t **/\n\t\t\tthis._activeInstructions = [];\n\n\t\t\t/**\n\t\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n\t\t\t * @property _dirty\n\t\t\t * @protected\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis._dirty = false;\n\n\t\t\t/**\n\t\t\t * Index to draw from if a store operation has happened.\n\t\t\t * @property _storeIndex\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis._storeIndex = 0;\n\n\t\t// setup:\n\t\t\tthis.clear();\n\t\t}\n\t\tvar p = Graphics.prototype;\n\t\tvar G = Graphics; // shortcut\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// static public methods:\n\t\t/**\n\t\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n\t\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n\t\t *\n\t\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n\t\t *      // Returns \"rgba(50,100,150,0.5)\"\n\t\t *\n\t\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n\t\t * param. For example,\n\t\t *\n\t\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n\t\t *      // Returns \"rgba(255,0,255,0.2)\"\n\t\t *\n\t\t * @method getRGB\n\t\t * @static\n\t\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n\t\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n\t\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n\t\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n\t\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n\t\t **/\n\t\tGraphics.getRGB = function(r, g, b, alpha) {\n\t\t\tif (r != null && b == null) {\n\t\t\t\talpha = g;\n\t\t\t\tb = r&0xFF;\n\t\t\t\tg = r>>8&0xFF;\n\t\t\t\tr = r>>16&0xFF;\n\t\t\t}\n\t\t\tif (alpha == null) {\n\t\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\n\t\t\t} else {\n\t\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n\t\t * or if alpha is null then in the format \"hsl(360,100,100)\".\n\t\t *\n\t\t *      createjs.Graphics.getHSL(150, 100, 70);\n\t\t *      // Returns \"hsl(150,100,70)\"\n\t\t *\n\t\t * @method getHSL\n\t\t * @static\n\t\t * @param {Number} hue The hue component for the color, between 0 and 360.\n\t\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\n\t\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\n\t\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n\t\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n\t\t **/\n\t\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\n\t\t\tif (alpha == null) {\n\t\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\n\t\t\t} else {\n\t\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\n\t\t\t}\n\t\t};\n\n\n\t// static properties:\n\t\t/**\n\t\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n\t\t * unnecessary instantiation.\n\t\t * @property beginCmd\n\t\t * @type {Graphics.BeginPath}\n\t\t * @static\n\t\t **/\n\t\t // defined at the bottom of this file.\n\n\t\t/**\n\t\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n\t\t * @property BASE_64\n\t\t * @static\n\t\t * @final\n\t\t * @readonly\n\t\t * @type {Object}\n\t\t **/\n\t\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\n\n\t\t/**\n\t\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t\t * \"butt\", 1 to \"round\", and 2 to \"square\".\n\t\t * For example, to set the line caps to \"square\":\n\t\t *\n\t\t *      myGraphics.ss(16, 2);\n\t\t *\n\t\t * @property STROKE_CAPS_MAP\n\t\t * @static\n\t\t * @final\n\t\t * @readonly\n\t\t * @type {Array}\n\t\t **/\n\t\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n\t\t/**\n\t\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n\t\t * For example, to set the line joints to \"bevel\":\n\t\t *\n\t\t *      myGraphics.ss(16, 0, 2);\n\t\t *\n\t\t * @property STROKE_JOINTS_MAP\n\t\t * @static\n\t\t * @final\n\t\t * @readonly\n\t\t * @type {Array}\n\t\t **/\n\t\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n\t\t/**\n\t\t * @property _ctx\n\t\t * @static\n\t\t * @protected\n\t\t * @type {CanvasRenderingContext2D}\n\t\t **/\n\t\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\t\tif (canvas.getContext) {\n\t\t\tGraphics._ctx = canvas.getContext(\"2d\");\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t}\n\n\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n\t\t * @method getInstructions\n\t\t * @return {Array}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getInstructions = function() {\n\t\t\tthis._updateInstructions();\n\t\t\treturn this._instructions;\n\t\t};\n\n\t\t/**\n\t\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n\t\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n\t\t *\n\t\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n\t\t * @property instructions\n\t\t * @type {Array}\n\t\t * @readonly\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tinstructions: { get: p.getInstructions }\n\t\t\t});\n\t\t} catch (e) {}\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true if this Graphics instance has no drawing commands.\n\t\t * @method isEmpty\n\t\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n\t\t **/\n\t\tp.isEmpty = function() {\n\t\t\treturn !(this._instructions.length || this._activeInstructions.length);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n\t\t **/\n\t\tp.draw = function(ctx, data) {\n\t\t\tthis._updateInstructions();\n\t\t\tvar instr = this._instructions;\n\t\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\n\t\t\t\tinstr[i].exec(ctx, data);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n\t\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method drawAsPath\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t **/\n\t\tp.drawAsPath = function(ctx) {\n\t\t\tthis._updateInstructions();\n\t\t\tvar instr, instrs = this._instructions;\n\t\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\n\t\t\t\t// the first command is always a beginPath command.\n\t\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\n\t\t\t}\n\t\t};\n\n\n\t// public methods that map directly to context 2D calls:\n\t\t/**\n\t\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n\t\t * @method moveTo\n\t\t * @param {Number} x The x coordinate the drawing point should move to.\n\t\t * @param {Number} y The y coordinate the drawing point should move to.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t\t * @chainable\n\t\t **/\n\t\tp.moveTo = function(x, y) {\n\t\t\treturn this.append(new G.MoveTo(x,y), true);\n\t\t};\n\n\t\t/**\n\t\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\n\t\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n\t\t * A tiny API method \"lt\" also exists.\n\t\t *\n\t\t * For detailed information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n\t\t * whatwg spec</a>.\n\t\t * @method lineTo\n\t\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.lineTo = function(x, y) {\n\t\t\treturn this.append(new G.LineTo(x,y));\n\t\t};\n\n\t\t/**\n\t\t * Draws an arc with the specified control points and radius.  For detailed information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n\t\t * whatwg spec</a>. A tiny API method \"at\" also exists.\n\t\t * @method arcTo\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @param {Number} x2\n\t\t * @param {Number} y2\n\t\t * @param {Number} radius\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.arcTo = function(x1, y1, x2, y2, radius) {\n\t\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n\t\t};\n\n\t\t/**\n\t\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n\t\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\n\t\t *\n\t\t *      arc(100, 100, 20, 0, Math.PI*2);\n\t\t *\n\t\t * For detailed information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n\t\t * A tiny API method \"a\" also exists.\n\t\t * @method arc\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} radius\n\t\t * @param {Number} startAngle Measured in radians.\n\t\t * @param {Number} endAngle Measured in radians.\n\t\t * @param {Boolean} anticlockwise\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n\t\t};\n\n\t\t/**\n\t\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n\t\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n\t\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\n\t\t * @method quadraticCurveTo\n\t\t * @param {Number} cpx\n\t\t * @param {Number} cpy\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\n\t\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n\t\t};\n\n\t\t/**\n\t\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n\t\t * cp2y). For detailed information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n\t\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\n\t\t * @method bezierCurveTo\n\t\t * @param {Number} cp1x\n\t\t * @param {Number} cp1y\n\t\t * @param {Number} cp2x\n\t\t * @param {Number} cp2y\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n\t\t};\n\n\t\t/**\n\t\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n\t\t * For detailed information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n\t\t * whatwg spec</a>. A tiny API method \"r\" also exists.\n\t\t * @method rect\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w Width of the rectangle\n\t\t * @param {Number} h Height of the rectangle\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.rect = function(x, y, w, h) {\n\t\t\treturn this.append(new G.Rect(x, y, w, h));\n\t\t};\n\n\t\t/**\n\t\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n\t\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n\t\t * @method closePath\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.closePath = function() {\n\t\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n\t\t};\n\n\n\t// public methods that roughly map to Flash graphics APIs:\n\t\t/**\n\t\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n\t\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n\t\t * @method clear\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.clear = function() {\n\t\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n\t\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n\t\t\tthis._dirty = this._strokeIgnoreScale = false;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n\t\t * @method beginFill\n\t\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t\t * null will result in no fill.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginFill = function(color) {\n\t\t\treturn this._setFill(color ? new G.Fill(color) : null);\n\t\t};\n\n\t\t/**\n\t\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t\t * square to display it:\n\t\t *\n\t\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t\t *\n\t\t * A tiny API method \"lf\" also exists.\n\t\t * @method beginLinearGradientFill\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t\t * drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t\t * the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\n\t\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t\t};\n\n\t\t/**\n\t\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n\t\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n\t\t *\n\t\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n\t\t *\n\t\t * A tiny API method \"rf\" also exists.\n\t\t * @method beginRadialGradientFill\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t\t};\n\n\t\t/**\n\t\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n\t\t * exists.\n\t\t * @method beginBitmapFill\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t\t * will be applied relative to the parent transform.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginBitmapFill = function(image, repetition, matrix) {\n\t\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\n\t\t};\n\n\t\t/**\n\t\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n\t\t * A tiny API method \"ef\" also exists.\n\t\t * @method endFill\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.endFill = function() {\n\t\t\treturn this.beginFill();\n\t\t};\n\n\t\t/**\n\t\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n\t\t * the stroke style and color in a single line of code like so:\n\t\t *\n\t\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n\t\t *\n\t\t * A tiny API method \"ss\" also exists.\n\t\t * @method setStrokeStyle\n\t\t * @param {Number} thickness The width of the stroke.\n\t\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t\t * the tiny API.\n\t\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t\t * for use with the tiny API.\n\t\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t\t * controls at what point a mitered joint will be clipped.\n\t\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t\t * of active transformations.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\n\t\t\tthis._updateInstructions(true);\n\t\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n\t\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n\t\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\n\t\t\tthis._strokeIgnoreScale = ignoreScale;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Sets or clears the stroke dash pattern.\n\t\t *\n\t\t * \tmyGraphics.setStrokeDash([20, 10], 0);\n\t\t *\n\t\t * A tiny API method `sd` also exists.\n\t\t * @method setStrokeDash\n\t\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t\t * Passing null or an empty array will clear the existing stroke dash.\n\t\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.setStrokeDash = function(segments, offset) {\n\t\t\tthis._updateInstructions(true);\n\t\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n\t\t * @method beginStroke\n\t\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t\t * null will result in no stroke.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginStroke = function(color) {\n\t\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\n\t\t};\n\n\t\t/**\n\t\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t\t * square to display it:\n\t\t *\n\t\t *      myGraphics.setStrokeStyle(10).\n\t\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t\t *\n\t\t * A tiny API method \"ls\" also exists.\n\t\t * @method beginLinearGradientStroke\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\n\t\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t\t};\n\n\t\t/**\n\t\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n\t\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n\t\t *\n\t\t *      myGraphics.setStrokeStyle(10)\n\t\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n\t\t *          .drawRect(50, 90, 150, 110);\n\t\t *\n\t\t * A tiny API method \"rs\" also exists.\n\t\t * @method beginRadialGradientStroke\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t\t * to 100%.\n\t\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t\t};\n\n\t\t/**\n\t\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n\t\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n\t\t * also exists.\n\t\t * @method beginBitmapStroke\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.beginBitmapStroke = function(image, repetition) {\n\t\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n\t\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\n\t\t};\n\n\t\t/**\n\t\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n\t\t * A tiny API method \"es\" also exists.\n\t\t * @method endStroke\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.endStroke = function() {\n\t\t\treturn this.beginStroke();\n\t\t};\n\n\t\t/**\n\t\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method quadraticCurveTo\n\t\t * @param {Number} cpx\n\t\t * @param {Number} cpy\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.curveTo = p.quadraticCurveTo;\n\n\t\t/**\n\t\t *\n\t\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method drawRect\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w Width of the rectangle\n\t\t * @param {Number} h Height of the rectangle\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawRect = p.rect;\n\n\t\t/**\n\t\t * Draws a rounded rectangle with all corners with the specified radius.\n\t\t * @method drawRoundRect\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w\n\t\t * @param {Number} h\n\t\t * @param {Number} radius Corner radius.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawRoundRect = function(x, y, w, h, radius) {\n\t\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n\t\t};\n\n\t\t/**\n\t\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n\t\t * method \"rc\" also exists.\n\t\t * @method drawRoundRectComplex\n\t\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t\t * @param {Number} w The width of the round rect.\n\t\t * @param {Number} h The height of the round rect.\n\t\t * @param {Number} radiusTL Top left corner radius.\n\t\t * @param {Number} radiusTR Top right corner radius.\n\t\t * @param {Number} radiusBR Bottom right corner radius.\n\t\t * @param {Number} radiusBL Bottom left corner radius.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n\t\t};\n\n\t\t/**\n\t\t * Draws a circle with the specified radius at (x, y).\n\t\t *\n\t\t *      var g = new createjs.Graphics();\n\t\t *\t    g.setStrokeStyle(1);\n\t\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n\t\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n\t\t *\t    g.drawCircle(0,0,3);\n\t\t *\n\t\t *\t    var s = new createjs.Shape(g);\n\t\t *\t\ts.x = 100;\n\t\t *\t\ts.y = 100;\n\t\t *\n\t\t *\t    stage.addChild(s);\n\t\t *\t    stage.update();\n\t\t *\n\t\t * A tiny API method \"dc\" also exists.\n\t\t * @method drawCircle\n\t\t * @param {Number} x x coordinate center point of circle.\n\t\t * @param {Number} y y coordinate center point of circle.\n\t\t * @param {Number} radius Radius of circle.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawCircle = function(x, y, radius) {\n\t\t\treturn this.append(new G.Circle(x, y, radius));\n\t\t};\n\n\t\t/**\n\t\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n\t\t * except the width and height can be different. A tiny API method \"de\" also exists.\n\t\t * @method drawEllipse\n\t\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t\t * which draws from center.\n\t\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t\t * which draws from the center.\n\t\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t\t * number.\n\t\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawEllipse = function(x, y, w, h) {\n\t\t\treturn this.append(new G.Ellipse(x, y, w, h));\n\t\t};\n\n\t\t/**\n\t\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n\t\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n\t\t * radius of 50:\n\t\t *\n\t\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n\t\t *      // Note: -90 makes the first point vertical\n\t\t *\n\t\t * A tiny API method \"dp\" also exists.\n\t\t *\n\t\t * @method drawPolyStar\n\t\t * @param {Number} x Position of the center of the shape.\n\t\t * @param {Number} y Position of the center of the shape.\n\t\t * @param {Number} radius The outer radius of the shape.\n\t\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t\t * directly to the right of the center.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n\t\t};\n\n\t\t// TODO: deprecated.\n\t\t/**\n\t\t * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t\t * @method inject\n\t\t * @deprecated\n\t\t **/\n\n\t\t/**\n\t\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n\t\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n\t\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n\t\t *\n\t\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n\t\t * built-in or custom graphics commands. For example:\n\t\t *\n\t\t * \t\t// attach data to our shape, so we can access it during the draw:\n\t\t * \t\tmyShape.color = \"red\";\n\t\t *\n\t\t * \t\t// append a Circle command object:\n\t\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n\t\t *\n\t\t * \t\t// append a custom command object with an exec method that sets the fill style\n\t\t * \t\t// based on the shape's data, and then fills the circle.\n\t\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n\t\t * \t\t\tctx.fillStyle = shape.color;\n\t\t * \t\t\tctx.fill();\n\t\t * \t\t}});\n\t\t *\n\t\t * @method append\n\t\t * @param {Object} command A graphics command object exposing an \"exec\" method.\n\t\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.append = function(command, clean) {\n\t\t\tthis._activeInstructions.push(command);\n\t\t\tthis.command = command;\n\t\t\tif (!clean) { this._dirty = true; }\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Decodes a compact encoded path string into a series of draw instructions.\n\t\t * This format is not intended to be human readable, and is meant for use by authoring tools.\n\t\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n\t\t * commands.\n\t\t *\n\t\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n\t\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n\t\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n\t\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n\t\t * latter. Bits 5 and 6 are currently unused.\n\t\t *\n\t\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n\t\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n\t\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n\t\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n\t\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n\t\t * appropriate).\n\t\t *\n\t\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n\t\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n\t\t * parameter.\n\t\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n\t\t * indicate 1500 tenths of a pixel.\n\t\t * <br />AA - 000000000000. Absolute y position of 0.\n\t\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n\t\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n\t\t * provide an absolute position of +150.0px.\n\t\t * <br />AAA - 000000000000000000. A y delta value of 0.\n\t\t *\n\t\t * A tiny API method \"p\" also exists.\n\t\t * @method decodePath\n\t\t * @param {String} str The path string to decode.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.decodePath = function(str) {\n\t\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n\t\t\tvar paramCount = [2, 2, 4, 6, 0];\n\t\t\tvar i=0, l=str.length;\n\t\t\tvar params = [];\n\t\t\tvar x=0, y=0;\n\t\t\tvar base64 = Graphics.BASE_64;\n\n\t\t\twhile (i<l) {\n\t\t\t\tvar c = str.charAt(i);\n\t\t\t\tvar n = base64[c];\n\t\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\n\t\t\t\tvar f = instructions[fi];\n\t\t\t\t// check that we have a valid instruction & that the unused bits are empty:\n\t\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\n\t\t\t\tvar pl = paramCount[fi];\n\t\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\n\t\t\t\tparams.length = 0;\n\t\t\t\ti++;\n\t\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\n\t\t\t\tfor (var p=0; p<pl; p++) {\n\t\t\t\t\tvar num = base64[str.charAt(i)];\n\t\t\t\t\tvar sign = (num>>5) ? -1 : 1;\n\t\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\n\t\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\n\t\t\t\t\tnum = sign*num/10;\n\t\t\t\t\tif (p%2) { x = (num += x); }\n\t\t\t\t\telse { y = (num += y); }\n\t\t\t\t\tparams[p] = num;\n\t\t\t\t\ti += charCount;\n\t\t\t\t}\n\t\t\t\tf.apply(this,params);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n\t\t * the existing store. This also affects `drawAsPath()`.\n\t\t *\n\t\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n\t\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n\t\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n\t\t *\n\t\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n\t\t * the fill or stroke.\n\t\t *\n\t\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n\t\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n\t\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n\t\t *\n\t\t * \t// set up cache:\n\t\t * \tmyShape.cache(0,0,500,500,scale);\n\t\t *\n\t\t * \t// when the user drags, draw a new line:\n\t\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n\t\t * \t// then draw it into the existing cache:\n\t\t * \tmyShape.updateCache(\"source-over\");\n\t\t * \t// store the new line, so it isn't redrawn next time:\n\t\t * \tmyShape.store();\n\t\t *\n\t\t * \t// then, when the window resizes, we can re-render at a different scale:\n\t\t * \t// first, unstore all our lines:\n\t\t * \tmyShape.unstore();\n\t\t * \t// then cache using the new scale:\n\t\t * \tmyShape.cache(0,0,500,500,newScale);\n\t\t * \t// finally, store the existing commands again:\n\t\t * \tmyShape.store();\n\t\t *\n\t\t * @method store\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.store = function() {\n\t\t\tthis._updateInstructions(true);\n\t\t\tthis._storeIndex = this._instructions.length;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n\t\t * so that they will be executed in subsequent draw calls.\n\t\t *\n\t\t * @method unstore\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.unstore = function() {\n\t\t\tthis._storeIndex = 0;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n\t\t * @method clone\n\t\t * @return {Graphics} A clone of the current Graphics instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tvar o = new Graphics();\n\t\t\to.command = this.command;\n\t\t\to._stroke = this._stroke;\n\t\t\to._strokeStyle = this._strokeStyle;\n\t\t\to._strokeDash = this._strokeDash;\n\t\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\n\t\t\to._fill = this._fill;\n\t\t\to._instructions = this._instructions.slice();\n\t\t\to._commitIndex = this._commitIndex;\n\t\t\to._activeInstructions = this._activeInstructions.slice();\n\t\t\to._dirty = this._dirty;\n\t\t\to._storeIndex = this._storeIndex;\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Graphics]\";\n\t\t};\n\n\n\t// tiny API:\n\t\t/**\n\t\t * Shortcut to moveTo.\n\t\t * @method mt\n\t\t * @param {Number} x The x coordinate the drawing point should move to.\n\t\t * @param {Number} y The y coordinate the drawing point should move to.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.mt = p.moveTo;\n\n\t\t/**\n\t\t * Shortcut to lineTo.\n\t\t * @method lt\n\t\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.lt = p.lineTo;\n\n\t\t/**\n\t\t * Shortcut to arcTo.\n\t\t * @method at\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @param {Number} x2\n\t\t * @param {Number} y2\n\t\t * @param {Number} radius\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.at = p.arcTo;\n\n\t\t/**\n\t\t * Shortcut to bezierCurveTo.\n\t\t * @method bt\n\t\t * @param {Number} cp1x\n\t\t * @param {Number} cp1y\n\t\t * @param {Number} cp2x\n\t\t * @param {Number} cp2y\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.bt = p.bezierCurveTo;\n\n\t\t/**\n\t\t * Shortcut to quadraticCurveTo / curveTo.\n\t\t * @method qt\n\t\t * @param {Number} cpx\n\t\t * @param {Number} cpy\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @protected\n\t\t * @chainable\n\t\t **/\n\t\tp.qt = p.quadraticCurveTo;\n\n\t\t/**\n\t\t * Shortcut to arc.\n\t\t * @method a\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} radius\n\t\t * @param {Number} startAngle Measured in radians.\n\t\t * @param {Number} endAngle Measured in radians.\n\t\t * @param {Boolean} anticlockwise\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @protected\n\t\t * @chainable\n\t\t **/\n\t\tp.a = p.arc;\n\n\t\t/**\n\t\t * Shortcut to rect.\n\t\t * @method r\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w Width of the rectangle\n\t\t * @param {Number} h Height of the rectangle\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.r = p.rect;\n\n\t\t/**\n\t\t * Shortcut to closePath.\n\t\t * @method cp\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.cp = p.closePath;\n\n\t\t/**\n\t\t * Shortcut to clear.\n\t\t * @method c\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.c = p.clear;\n\n\t\t/**\n\t\t * Shortcut to beginFill.\n\t\t * @method f\n\t\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t\t * null will result in no fill.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.f = p.beginFill;\n\n\t\t/**\n\t\t * Shortcut to beginLinearGradientFill.\n\t\t * @method lf\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t\t * drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t\t * the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.lf = p.beginLinearGradientFill;\n\n\t\t/**\n\t\t * Shortcut to beginRadialGradientFill.\n\t\t * @method rf\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.rf = p.beginRadialGradientFill;\n\n\t\t/**\n\t\t * Shortcut to beginBitmapFill.\n\t\t * @method bf\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t\t * as the pattern.\n\t\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t\t * will be applied relative to the parent transform.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.bf = p.beginBitmapFill;\n\n\t\t/**\n\t\t * Shortcut to endFill.\n\t\t * @method ef\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.ef = p.endFill;\n\n\t\t/**\n\t\t * Shortcut to setStrokeStyle.\n\t\t * @method ss\n\t\t * @param {Number} thickness The width of the stroke.\n\t\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t\t * the tiny API.\n\t\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t\t * for use with the tiny API.\n\t\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t\t * controls at what point a mitered joint will be clipped.\n\t\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t\t * of active transformations.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.ss = p.setStrokeStyle;\n\t\t\n\t\t/**\n\t\t * Shortcut to setStrokeDash.\n\t\t * @method sd\n\t\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t\t * Passing null or an empty array will clear any existing dash.\n\t\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.sd = p.setStrokeDash;\n\n\t\t/**\n\t\t * Shortcut to beginStroke.\n\t\t * @method s\n\t\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t\t * null will result in no stroke.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.s = p.beginStroke;\n\n\t\t/**\n\t\t * Shortcut to beginLinearGradientStroke.\n\t\t * @method ls\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.ls = p.beginLinearGradientStroke;\n\n\t\t/**\n\t\t * Shortcut to beginRadialGradientStroke.\n\t\t * @method rs\n\t\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t\t * a gradient drawing from red to blue.\n\t\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t\t * to 100%.\n\t\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.rs = p.beginRadialGradientStroke;\n\n\t\t/**\n\t\t * Shortcut to beginBitmapStroke.\n\t\t * @method bs\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t\t * as the pattern.\n\t\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.bs = p.beginBitmapStroke;\n\n\t\t/**\n\t\t * Shortcut to endStroke.\n\t\t * @method es\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.es = p.endStroke;\n\n\t\t/**\n\t\t * Shortcut to drawRect.\n\t\t * @method dr\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w Width of the rectangle\n\t\t * @param {Number} h Height of the rectangle\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.dr = p.drawRect;\n\n\t\t/**\n\t\t * Shortcut to drawRoundRect.\n\t\t * @method rr\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w\n\t\t * @param {Number} h\n\t\t * @param {Number} radius Corner radius.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.rr = p.drawRoundRect;\n\n\t\t/**\n\t\t * Shortcut to drawRoundRectComplex.\n\t\t * @method rc\n\t\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t\t * @param {Number} w The width of the round rect.\n\t\t * @param {Number} h The height of the round rect.\n\t\t * @param {Number} radiusTL Top left corner radius.\n\t\t * @param {Number} radiusTR Top right corner radius.\n\t\t * @param {Number} radiusBR Bottom right corner radius.\n\t\t * @param {Number} radiusBL Bottom left corner radius.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.rc = p.drawRoundRectComplex;\n\n\t\t/**\n\t\t * Shortcut to drawCircle.\n\t\t * @method dc\n\t\t * @param {Number} x x coordinate center point of circle.\n\t\t * @param {Number} y y coordinate center point of circle.\n\t\t * @param {Number} radius Radius of circle.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.dc = p.drawCircle;\n\n\t\t/**\n\t\t * Shortcut to drawEllipse.\n\t\t * @method de\n\t\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t\t * which draws from center.\n\t\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t\t * which draws from the center.\n\t\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t\t * number.\n\t\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.de = p.drawEllipse;\n\n\t\t/**\n\t\t * Shortcut to drawPolyStar.\n\t\t * @method dp\n\t\t * @param {Number} x Position of the center of the shape.\n\t\t * @param {Number} y Position of the center of the shape.\n\t\t * @param {Number} radius The outer radius of the shape.\n\t\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t\t * directly to the right of the center.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.dp = p.drawPolyStar;\n\n\t\t/**\n\t\t * Shortcut to decodePath.\n\t\t * @method p\n\t\t * @param {String} str The path string to decode.\n\t\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t * @protected\n\t\t **/\n\t\tp.p = p.decodePath;\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _updateInstructions\n\t\t * @param commit\n\t\t * @protected\n\t\t **/\n\t\tp._updateInstructions = function(commit) {\n\t\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\n\n\t\t\tif (this._dirty && active.length) {\n\t\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\n\t\t\t\tinstr.push(Graphics.beginCmd);\n\n\t\t\t\tvar l = active.length, ll = instr.length;\n\t\t\t\tinstr.length = ll+l;\n\t\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\n\n\t\t\t\tif (this._fill) { instr.push(this._fill); }\n\t\t\t\tif (this._stroke) {\n\t\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\n\t\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\n\t\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\n\t\t\t\t\t\tinstr.push(this._strokeDash);\n\t\t\t\t\t}\n\t\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\n\t\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\n\t\t\t\t\t\tinstr.push(this._strokeStyle);\n\t\t\t\t\t}\n\t\t\t\t\tinstr.push(this._stroke);\n\t\t\t\t}\n\n\t\t\t\tthis._dirty = false;\n\t\t\t}\n\n\t\t\tif (commit) {\n\t\t\t\tactive.length = 0;\n\t\t\t\tthis._commitIndex = instr.length;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _setFill\n\t\t * @param fill\n\t\t * @protected\n\t\t **/\n\t\tp._setFill = function(fill) {\n\t\t\tthis._updateInstructions(true);\n\t\t\tthis.command = this._fill = fill;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * @method _setStroke\n\t\t * @param stroke\n\t\t * @protected\n\t\t **/\n\t\tp._setStroke = function(stroke) {\n\t\t\tthis._updateInstructions(true);\n\t\t\tif (this.command = this._stroke = stroke) {\n\t\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t// Command Objects:\n\t\t/**\n\t\t * @namespace Graphics\n\t\t */\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class LineTo\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.LineTo = function(x, y) {\n\t\t\tthis.x = x; this.y = y;\n\t\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class MoveTo\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t */\n\t\t(G.MoveTo = function(x, y) {\n\t\t\tthis.x = x; this.y = y;\n\t\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\n\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class ArcTo\n\t\t * @constructor\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @param {Number} x2\n\t\t * @param {Number} y2\n\t\t * @param {Number} radius\n\t\t **/\n\t\t/**\n\t\t * @property x1\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y1\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property x2\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y2\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radius\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\n\t\t\tthis.x1 = x1; this.y1 = y1;\n\t\t\tthis.x2 = x2; this.y2 = y2;\n\t\t\tthis.radius = radius;\n\t\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Arc\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} radius\n\t\t * @param {Number} startAngle\n\t\t * @param {Number} endAngle\n\t\t * @param {Number} anticlockwise\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radius\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property startAngle\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property endAngle\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property anticlockwise\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.radius = radius;\n\t\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\n\t\t\tthis.anticlockwise = !!anticlockwise;\n\t\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class QuadraticCurveTo\n\t\t * @constructor\n\t\t * @param {Number} cpx\n\t\t * @param {Number} cpy\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t **/\n\t\t/**\n\t\t * @property cpx\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property cpy\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\n\t\t\tthis.cpx = cpx; this.cpy = cpy;\n\t\t\tthis.x = x; this.y = y;\n\t\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class BezierCurveTo\n\t\t * @constructor\n\t\t * @param {Number} cp1x\n\t\t * @param {Number} cp1y\n\t\t * @param {Number} cp2x\n\t\t * @param {Number} cp2y\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t **/\n\t\t/**\n\t\t * @property cp1x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property cp1y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property cp2x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property cp2y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\n\t\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\n\t\t\tthis.x = x; this.y = y;\n\t\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Rect\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w\n\t\t * @param {Number} h\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property w\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property h\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.Rect = function(x, y, w, h) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.w = w; this.h = h;\n\t\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class ClosePath\n\t\t * @constructor\n\t\t **/\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.ClosePath = function() {\n\t\t}).prototype.exec = function(ctx) { ctx.closePath(); };\n\n\t\t/**\n\t\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class BeginPath\n\t\t * @constructor\n\t\t **/\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.BeginPath = function() {\n\t\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Fill\n\t\t * @constructor\n\t\t * @param {Object} style A valid Context2D fillStyle.\n\t\t * @param {Matrix2D} matrix\n\t\t **/\n\t\t/**\n\t\t * A valid Context2D fillStyle.\n\t\t * @property style\n\t\t * @type Object\n\t\t */\n\t\t/**\n\t\t * @property matrix\n\t\t * @type Matrix2D\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\tp = (G.Fill = function(style, matrix) {\n\t\t\tthis.style = style;\n\t\t\tthis.matrix = matrix;\n\t\t}).prototype;\n\t\tp.exec = function(ctx) {\n\t\t\tif (!this.style) { return; }\n\t\t\tctx.fillStyle = this.style;\n\t\t\tvar mtx = this.matrix;\n\t\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\n\t\t\tctx.fill();\n\t\t\tif (mtx) { ctx.restore(); }\n\t\t};\n\t\t/**\n\t\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n\t\t * @method linearGradient\n\t\t * @param {Array} colors\n\t\t *\n\t\t * @param {Array} ratios\n\t\t * @param {Number} x0\n\t\t * @param {Number} y0\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t\t */\n\t\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\n\t\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n\t\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\n\t\t\treturn this;\n\t\t};\n\t\t/**\n\t\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n\t\t * @method radialGradient\n\t\t * @param {Array} colors\n\t\t * @param {Array} ratios\n\t\t * @param {Number} x0\n\t\t * @param {Number} y0\n\t\t * @param {Number} r0\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @param {Number} r1\n\t\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t\t */\n\t\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n\t\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\n\t\t\treturn this;\n\t\t};\n\t\t/**\n\t\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n\t\t * @method bitmap\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t\t */\n\t\tp.bitmap = function(image, repetition) {\n\t\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\n\t\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n\t\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\t\tp.path = false;\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Stroke\n\t\t * @constructor\n\t\t * @param {Object} style A valid Context2D fillStyle.\n\t\t * @param {Boolean} ignoreScale\n\t\t **/\n\t\t/**\n\t\t * A valid Context2D strokeStyle.\n\t\t * @property style\n\t\t * @type Object\n\t\t */\n\t\t/**\n\t\t * @property ignoreScale\n\t\t * @type Boolean\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\tp = (G.Stroke = function(style, ignoreScale) {\n\t\t\tthis.style = style;\n\t\t\tthis.ignoreScale = ignoreScale;\n\t\t}).prototype;\n\t\tp.exec = function(ctx) {\n\t\t\tif (!this.style) { return; }\n\t\t\tctx.strokeStyle = this.style;\n\t\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\n\t\t\tctx.stroke();\n\t\t\tif (this.ignoreScale) { ctx.restore(); }\n\t\t};\n\t\t/**\n\t\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n\t\t * @method linearGradient\n\t\t * @param {Array} colors\n\t\t * @param {Array} ratios\n\t\t * @param {Number} x0\n\t\t * @param {Number} y0\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t\t */\n\t\tp.linearGradient = G.Fill.prototype.linearGradient;\n\t\t/**\n\t\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n\t\t * @method radialGradient\n\t\t * @param {Array} colors\n\t\t * @param {Array} ratios\n\t\t * @param {Number} x0\n\t\t * @param {Number} y0\n\t\t * @param {Number} r0\n\t\t * @param {Number} x1\n\t\t * @param {Number} y1\n\t\t * @param {Number} r1\n\t\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t\t */\n\t\tp.radialGradient = G.Fill.prototype.radialGradient;\n\t\t/**\n\t\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n\t\t * @method bitmap\n\t\t * @param {HTMLImageElement} image\n\t\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t\t */\n\t\tp.bitmap = G.Fill.prototype.bitmap;\n\t\tp.path = false;\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class StrokeStyle\n\t\t * @constructor\n\t\t * @param {Number} width\n\t\t * @param {String} [caps=butt]\n\t\t * @param {String} [joints=miter]\n\t\t * @param {Number} [miterLimit=10]\n\t\t * @param {Boolean} [ignoreScale=false]\n\t\t **/\n\t\t/**\n\t\t * @property width\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * One of: butt, round, square\n\t\t * @property caps\n\t\t * @type String\n\t\t */\n\t\t/**\n\t\t * One of: round, bevel, miter\n\t\t * @property joints\n\t\t * @type String\n\t\t */\n\t\t/**\n\t\t * @property miterLimit\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\n\t\t\tthis.width = width;\n\t\t\tthis.caps = caps;\n\t\t\tthis.joints = joints;\n\t\t\tthis.miterLimit = miterLimit;\n\t\t\tthis.ignoreScale = ignoreScale;\n\t\t}).prototype;\n\t\tp.exec = function(ctx) {\n\t\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\n\t\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\n\t\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\n\t\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\n\t\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\n\t\t};\n\t\tp.path = false;\n\t\t\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class StrokeDash\n\t\t * @constructor\n\t\t * @param {Array} [segments]\n\t\t * @param {Number} [offset=0]\n\t\t **/\n\t\t/**\n\t\t * @property segments\n\t\t * @type Array\n\t\t */\n\t\t/**\n\t\t * @property offset\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.StrokeDash = function(segments, offset) {\n\t\t\tthis.segments = segments;\n\t\t\tthis.offset = offset||0;\n\t\t}).prototype.exec = function(ctx) {\n\t\t\tif (ctx.setLineDash) { // feature detection.\n\t\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n\t\t\t\tctx.lineDashOffset = this.offset||0;\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * The default value for segments (ie. no dash).\n\t\t * @property EMPTY_SEGMENTS\n\t\t * @static\n\t\t * @final\n\t\t * @readonly\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tG.StrokeDash.EMPTY_SEGMENTS = [];\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class RoundRect\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w\n\t\t * @param {Number} h\n\t\t * @param {Number} radiusTL\n\t\t * @param {Number} radiusTR\n\t\t * @param {Number} radiusBR\n\t\t * @param {Number} radiusBL\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property w\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property h\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radiusTL\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radiusTR\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radiusBR\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radiusBL\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.w = w; this.h = h;\n\t\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\n\t\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\n\t\t}).prototype.exec = function(ctx) {\n\t\t\tvar max = (w<h?w:h)/2;\n\t\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\n\t\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\n\t\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\n\n\t\t\tif (rTL < 0) { rTL *= (mTL=-1); }\n\t\t\tif (rTL > max) { rTL = max; }\n\t\t\tif (rTR < 0) { rTR *= (mTR=-1); }\n\t\t\tif (rTR > max) { rTR = max; }\n\t\t\tif (rBR < 0) { rBR *= (mBR=-1); }\n\t\t\tif (rBR > max) { rBR = max; }\n\t\t\tif (rBL < 0) { rBL *= (mBL=-1); }\n\t\t\tif (rBL > max) { rBL = max; }\n\n\t\t\tctx.moveTo(x+w-rTR, y);\n\t\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\n\t\t\tctx.lineTo(x+w, y+h-rBR);\n\t\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\n\t\t\tctx.lineTo(x+rBL, y+h);\n\t\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\n\t\t\tctx.lineTo(x, y+rTL);\n\t\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\n\t\t\tctx.closePath();\n\t\t};\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Circle\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} radius\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radius\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.Circle = function(x, y, radius) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.radius = radius;\n\t\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class Ellipse\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} w\n\t\t * @param {Number} h\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property w\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property h\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.Ellipse = function(x, y, w, h) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.w = w; this.h = h;\n\t\t}).prototype.exec = function(ctx) {\n\t\t\tvar x = this.x, y = this.y;\n\t\t\tvar w = this.w, h = this.h;\n\n\t\t\tvar k = 0.5522848;\n\t\t\tvar ox = (w / 2) * k;\n\t\t\tvar oy = (h / 2) * k;\n\t\t\tvar xe = x + w;\n\t\t\tvar ye = y + h;\n\t\t\tvar xm = x + w / 2;\n\t\t\tvar ym = y + h / 2;\n\n\t\t\tctx.moveTo(x, ym);\n\t\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\n\t\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\n\t\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\n\t\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\n\t\t};\n\n\t\t/**\n\t\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t\t * @class PolyStar\n\t\t * @constructor\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} radius\n\t\t * @param {Number} sides\n\t\t * @param {Number} pointSize\n\t\t * @param {Number} angle\n\t\t **/\n\t\t/**\n\t\t * @property x\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property y\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property radius\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property sides\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property pointSize\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * @property angle\n\t\t * @type Number\n\t\t */\n\t\t/**\n\t\t * Execute the Graphics command in the provided Canvas context.\n\t\t * @method exec\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t\t */\n\t\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\t\tthis.x = x; this.y = y;\n\t\t\tthis.radius = radius;\n\t\t\tthis.sides = sides;\n\t\t\tthis.pointSize = pointSize;\n\t\t\tthis.angle = angle;\n\t\t}).prototype.exec = function(ctx) {\n\t\t\tvar x = this.x, y = this.y;\n\t\t\tvar radius = this.radius;\n\t\t\tvar angle = (this.angle||0)/180*Math.PI;\n\t\t\tvar sides = this.sides;\n\t\t\tvar ps = 1-(this.pointSize||0);\n\t\t\tvar a = Math.PI/sides;\n\n\t\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t\tfor (var i=0; i<sides; i++) {\n\t\t\t\tangle += a;\n\t\t\t\tif (ps != 1) {\n\t\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\n\t\t\t\t}\n\t\t\t\tangle += a;\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t\t}\n\t\t\tctx.closePath();\n\t\t};\n\n\t\t// docced above.\n\t\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n\n\t\tcreatejs.Graphics = Graphics;\n\t}());\n\n\t//##############################################################################\n\t// DisplayObject.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n\t\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n\t\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n\t\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n\t\t * caching, and mouse handlers.\n\t\t * @class DisplayObject\n\t\t * @extends EventDispatcher\n\t\t * @constructor\n\t\t **/\n\t\tfunction DisplayObject() {\n\t\t\tthis.EventDispatcher_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n\t\t\t * @property alpha\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t **/\n\t\t\tthis.alpha = 1;\n\t\t\n\t\t\t/**\n\t\t\t * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t\t * for more information.\n\t\t\t * @property cacheCanvas\n\t\t\t * @type {HTMLCanvasElement | Object}\n\t\t\t * @default null\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.cacheCanvas = null;\n\t\t\n\t\t\t/**\n\t\t\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n\t\t\t * determine if the cache has changed since a previous check.\n\t\t\t * @property cacheID\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.cacheID = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Unique ID for this display object. Makes display objects easier for some uses.\n\t\t\t * @property id\n\t\t\t * @type {Number}\n\t\t\t * @default -1\n\t\t\t **/\n\t\t\tthis.id = createjs.UID.get();\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n\t\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n\t\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n\t\t\t * method from returning the child.\n\t\t\t *\n\t\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n\t\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n\t\t\t * provided in the next release of EaselJS.\n\t\t\t * @property mouseEnabled\n\t\t\t * @type {Boolean}\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.mouseEnabled = true;\n\t\t\t\n\t\t\t/**\n\t\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n\t\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t\t * @property tickEnabled\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.tickEnabled = true;\n\t\t\n\t\t\t/**\n\t\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n\t\t\t * debugging.\n\t\t\t * @property name\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.name = null;\n\t\t\n\t\t\t/**\n\t\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n\t\t\t * contains this display object, or null if it has not been added\n\t\t\t * to one.\n\t\t\t * @property parent\n\t\t\t * @final\n\t\t\t * @type {Container}\n\t\t\t * @default null\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.parent = null;\n\t\t\n\t\t\t/**\n\t\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n\t\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n\t\t\t * @property regX\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.regX = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n\t\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n\t\t\t * @property regY\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.regY = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The rotation in degrees for this display object.\n\t\t\t * @property rotation\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.rotation = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n\t\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n\t\t\t * @property scaleX\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t **/\n\t\t\tthis.scaleX = 1;\n\t\t\n\t\t\t/**\n\t\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n\t\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n\t\t\t * @property scaleY\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t **/\n\t\t\tthis.scaleY = 1;\n\t\t\n\t\t\t/**\n\t\t\t * The factor to skew this display object horizontally.\n\t\t\t * @property skewX\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.skewX = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The factor to skew this display object vertically.\n\t\t\t * @property skewY\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.skewY = 0;\n\t\t\n\t\t\t/**\n\t\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n\t\t\t * null, this property is inherited from the parent container.\n\t\t\t * @property shadow\n\t\t\t * @type {Shadow}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.shadow = null;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n\t\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n\t\t\t * @property visible\n\t\t\t * @type {Boolean}\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.visible = true;\n\t\t\n\t\t\t/**\n\t\t\t * The x (horizontal) position of the display object, relative to its parent.\n\t\t\t * @property x\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.x = 0;\n\t\t\n\t\t\t/** The y (vertical) position of the display object, relative to its parent.\n\t\t\t * @property y\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.y = 0;\n\t\t\t\n\t\t\t/**\n\t\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\n\t\t\t * (x, y, rotation, scale, skew).\n\t\t\t * @property transformMatrix\n\t\t\t * @type {Matrix2D}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.transformMatrix = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\n\t\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n\t\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t\t\t * whatwg spec on compositing</a>.\n\t\t\t * @property compositeOperation\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.compositeOperation = null;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the display object should be drawn to a whole pixel when\n\t\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n\t\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n\t\t\t * @property snapToPixel\n\t\t\t * @type {Boolean}\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.snapToPixel = true;\n\t\t\n\t\t\t/**\n\t\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n\t\t\t * cached.\n\t\t\t * @property filters\n\t\t\t * @type {Array}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.filters = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n\t\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n\t\t\t * @property mask\n\t\t\t * @type {Shape}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.mask = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n\t\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n\t\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n\t\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n\t\t\t * ancestors (parents).\n\t\t\t * \n\t\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n\t\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n\t\t\t *\n\t\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n\t\t\t * @property hitArea\n\t\t\t * @type {DisplayObject}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.hitArea = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n\t\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n\t\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n\t\t\t * @property cursor\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.cursor = null;\n\t\t\n\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _cacheOffsetX\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis._cacheOffsetX = 0;\n\t\t\n\t\t\t/**\n\t\t\t * @property _cacheOffsetY\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis._cacheOffsetY = 0;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _filterOffsetX\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis._filterOffsetX = 0;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _filterOffsetY\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis._filterOffsetY = 0;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _cacheScale\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t **/\n\t\t\tthis._cacheScale = 1;\n\t\t\n\t\t\t/**\n\t\t\t* @property _cacheDataURLID\n\t\t\t* @protected\n\t\t\t* @type {Number}\n\t\t\t* @default 0\n\t\t\t*/\n\t\t\tthis._cacheDataURLID = 0;\n\t\t\t\n\t\t\t/**\n\t\t\t* @property _cacheDataURL\n\t\t\t* @protected\n\t\t\t* @type {String}\n\t\t\t* @default null\n\t\t\t*/\n\t\t\tthis._cacheDataURL = null;\n\t\t\n\t\t\t/**\n\t\t\t * @property _props\n\t\t\t * @protected\n\t\t\t * @type {DisplayObject}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis._props = new createjs.DisplayProps();\n\t\t\n\t\t\t/**\n\t\t\t * @property _rectangle\n\t\t\t * @protected\n\t\t\t * @type {Rectangle}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis._rectangle = new createjs.Rectangle();\n\t\t\n\t\t\t/**\n\t\t\t * @property _bounds\n\t\t\t * @protected\n\t\t\t * @type {Rectangle}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis._bounds = null;\n\t\t}\n\t\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\t\n\t// static properties:\n\t\t/**\n\t\t * Listing of mouse event names. Used in _hasMouseEventListener.\n\t\t * @property _MOUSE_EVENTS\n\t\t * @protected\n\t\t * @static\n\t\t * @type {Array}\n\t\t **/\n\t\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\n\n\t\t/**\n\t\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n\t\t * with cross domain content.\n\t\t * @property suppressCrossDomainErrors\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tDisplayObject.suppressCrossDomainErrors = false;\n\t\t\n\t\t/**\n\t\t * @property _snapToPixelEnabled\n\t\t * @protected\n\t\t * @static\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n\t\t/**\n\t\t * @property _hitTestCanvas\n\t\t * @type {HTMLCanvasElement | Object}\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\t/**\n\t\t * @property _hitTestContext\n\t\t * @type {CanvasRenderingContext2D}\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\n\t\tif (canvas.getContext) {\n\t\t\tDisplayObject._hitTestCanvas = canvas;\n\t\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t}\n\n\t\t/**\n\t\t * @property _nextCacheID\n\t\t * @type {Number}\n\t\t * @static\n\t\t * @protected\n\t\t **/\n\t\tDisplayObject._nextCacheID = 1;\n\n\n\t// events:\n\t\t/**\n\t\t * Dispatched when the user presses their left mouse button over the display object. See the \n\t\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event mousedown\n\t\t * @since 0.6.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event click\n\t\t * @since 0.6.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched when the user double clicks their left mouse button over this display object.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event dblclick\n\t\t * @since 0.6.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \n\t\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event mouseover\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n\t\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event mouseout\n\t\t * @since 0.6.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n\t\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t\t * aggregate of their content.\n\t\t * \n\t\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n\t\t * myContainer, two events would be received, each targeting a child element:<OL>\n\t\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n\t\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n\t\t * </OL>\n\t\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n\t\t * the aggregate myContainer content (target=myContainer).\n\t\t * \n\t\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event rollover\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n\t\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t\t * aggregate of their content.\n\t\t * \n\t\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n\t\t * on myContainer, two events would be received, each targeting a child element:<OL>\n\t\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n\t\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n\t\t * </OL>\n\t\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n\t\t * the aggregate myContainer content (target=myContainer).\n\t\t * \n\t\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event rollout\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n\t\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n\t\t * useful for dragging and similar operations.\n\t\t * @event pressmove\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n\t\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n\t\t * operations.\n\t\t * @event pressup\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched when the display object is added to a parent container.\n\t\t * @event added\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched when the display object is removed from its parent container.\n\t\t * @event removed\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n\t\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n\t\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n\t\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n\t\t * dispatched on their parent.\n\t\t * @event tick\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n\t\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n\t\t * @since 0.6.0\n\t\t */\n\t\t\n\t\t\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n\t\t * @method getStage\n\t\t * @return {Stage}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getStage = function() {\n\t\t\t// uses dynamic access to avoid circular dependencies;\n\t\t\tvar o = this, _Stage = createjs[\"Stage\"];\n\t\t\twhile (o.parent) { o = o.parent; }\n\t\t\tif (o instanceof _Stage) { return o; }\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n\t\t * @property stage\n\t\t * @type {Stage}\n\t\t * @readonly\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tstage: { get: p.getStage }\n\t\t\t});\n\t\t} catch (e) {}\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tvar cacheCanvas = this.cacheCanvas;\n\t\t\tif (ignoreCache || !cacheCanvas) { return false; }\n\t\t\tvar scale = this._cacheScale;\n\t\t\tctx.drawImage(cacheCanvas, this._cacheOffsetX+this._filterOffsetX, this._cacheOffsetY+this._filterOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n\t\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n\t\t * @method updateContext\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n\t\t **/\n\t\tp.updateContext = function(ctx) {\n\t\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\n\t\t\t\n\t\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\n\t\t\t\tmask.getMatrix(mtx);\n\t\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t\t\t\n\t\t\t\tmask.graphics.drawAsPath(ctx);\n\t\t\t\tctx.clip();\n\t\t\t\t\n\t\t\t\tmtx.invert();\n\t\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t\t}\n\t\t\t\n\t\t\tthis.getMatrix(mtx);\n\t\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n\t\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n\t\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n\t\t\t}\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\n\t\t\tctx.globalAlpha *= o.alpha;\n\t\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\n\t\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\n\t\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n\t\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n\t\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\n\t\t * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\n\t\t * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\n\t\t * using this display object's coordinates.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n\t\t *\n\t\t *      var shape = new createjs.Shape();\n\t\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t\t *      myShape.cache(-25, -25, 50, 50);\n\t\t *\n\t\t * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\n\t\t * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\n\t\t * \n\t\t * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\n\t\t * will add padding to the canvas dimensions.\n\t\t *\n\t\t * @method cache\n\t\t * @param {Number} x The x coordinate origin for the cache region.\n\t\t * @param {Number} y The y coordinate origin for the cache region.\n\t\t * @param {Number} width The width of the cache region.\n\t\t * @param {Number} height The height of the cache region.\n\t\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n\t\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n\t\t * \tcached elements with greater fidelity. Default is 1.\n\t\t **/\n\t\tp.cache = function(x, y, width, height, scale) {\n\t\t\t// draw to canvas.\n\t\t\tscale = scale||1;\n\t\t\tif (!this.cacheCanvas) { this.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\t\tthis._cacheWidth = width;\n\t\t\tthis._cacheHeight = height;\n\t\t\tthis._cacheOffsetX = x;\n\t\t\tthis._cacheOffsetY = y;\n\t\t\tthis._cacheScale = scale;\n\t\t\tthis.updateCache();\n\t\t};\n\n\t\t/**\n\t\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n\t\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n\t\t * will be drawn over the existing cache using the specified compositeOperation.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n\t\t * will be drawn on top of the old one.\n\t\t *\n\t\t *      // Not shown: Creating the shape, and caching it.\n\t\t *      shapeInstance.clear();\n\t\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n\t\t *      shapeInstance.updateCache();\n\t\t *\n\t\t * @method updateCache\n\t\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t\t * whatwg spec on compositing</a>.\n\t\t **/\n\t\tp.updateCache = function(compositeOperation) {\n\t\t\tvar cacheCanvas = this.cacheCanvas;\n\t\t\tif (!cacheCanvas) { throw \"cache() must be called before updateCache()\"; }\n\t\t\tvar scale = this._cacheScale, offX = this._cacheOffsetX*scale, offY = this._cacheOffsetY*scale;\n\t\t\tvar w = this._cacheWidth, h = this._cacheHeight, ctx = cacheCanvas.getContext(\"2d\");\n\t\t\t\n\t\t\tvar fBounds = this._getFilterBounds();\n\t\t\toffX += (this._filterOffsetX = fBounds.x);\n\t\t\toffY += (this._filterOffsetY = fBounds.y);\n\t\t\t\n\t\t\tw = Math.ceil(w*scale) + fBounds.width;\n\t\t\th = Math.ceil(h*scale) + fBounds.height;\n\t\t\tif (w != cacheCanvas.width || h != cacheCanvas.height) {\n\t\t\t\t// TODO: it would be nice to preserve the content if there is a compositeOperation.\n\t\t\t\tcacheCanvas.width = w;\n\t\t\t\tcacheCanvas.height = h;\n\t\t\t} else if (!compositeOperation) {\n\t\t\t\tctx.clearRect(0, 0, w+1, h+1);\n\t\t\t}\n\t\t\t\n\t\t\tctx.save();\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t\tctx.setTransform(scale, 0, 0, scale, -offX, -offY);\n\t\t\tthis.draw(ctx, true);\n\t\t\t// TODO: filters and cache scale don't play well together at present.\n\t\t\tthis._applyFilters();\n\t\t\tctx.restore();\n\t\t\tthis.cacheID = DisplayObject._nextCacheID++;\n\t\t};\n\n\t\t/**\n\t\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n\t\t * @method uncache\n\t\t **/\n\t\tp.uncache = function() {\n\t\t\tthis._cacheDataURL = this.cacheCanvas = null;\n\t\t\tthis.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\n\t\t\tthis._cacheScale = 1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a data URL for the cache, or null if this display object is not cached.\n\t\t * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\n\t\t * @method getCacheDataURL\n\t\t * @return {String} The image data url for the cache.\n\t\t **/\n\t\tp.getCacheDataURL = function() {\n\t\t\tif (!this.cacheCanvas) { return null; }\n\t\t\tif (this.cacheID != this._cacheDataURLID) { this._cacheDataURL = this.cacheCanvas.toDataURL(); }\n\t\t\treturn this._cacheDataURL;\n\t\t};\n\n\t\t/**\n\t\t * Transforms the specified x and y position from the coordinate space of the display object\n\t\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n\t\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\n\t\t * correlating to the transformed coordinates on the stage.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      displayObject.x = 300;\n\t\t *      displayObject.y = 200;\n\t\t *      stage.addChild(displayObject);\n\t\t *      var point = displayObject.localToGlobal(100, 100);\n\t\t *      // Results in x=400, y=300\n\t\t *\n\t\t * @method localToGlobal\n\t\t * @param {Number} x The x position in the source display object to transform.\n\t\t * @param {Number} y The y position in the source display object to transform.\n\t\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n\t\t * on the stage.\n\t\t **/\n\t\tp.localToGlobal = function(x, y, pt) {\n\t\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\n\t\t};\n\n\t\t/**\n\t\t * Transforms the specified x and y position from the global (stage) coordinate space to the\n\t\t * coordinate space of the display object. For example, this could be used to determine\n\t\t * the current mouse position within the display object. Returns a Point instance with x and y properties\n\t\t * correlating to the transformed position in the display object's coordinate space.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      displayObject.x = 300;\n\t\t *      displayObject.y = 200;\n\t\t *      stage.addChild(displayObject);\n\t\t *      var point = displayObject.globalToLocal(100, 100);\n\t\t *      // Results in x=-200, y=-100\n\t\t *\n\t\t * @method globalToLocal\n\t\t * @param {Number} x The x position on the stage to transform.\n\t\t * @param {Number} y The y position on the stage to transform.\n\t\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n\t\t * display object's coordinate space.\n\t\t **/\n\t\tp.globalToLocal = function(x, y, pt) {\n\t\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\n\t\t};\n\n\t\t/**\n\t\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n\t\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\n\t\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\n\t\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t\t *\n\t\t *      var pt = this.localToGlobal(x, y);\n\t\t *      pt = target.globalToLocal(pt.x, pt.y);\n\t\t *\n\t\t * @method localToLocal\n\t\t * @param {Number} x The x position in the source display object to transform.\n\t\t * @param {Number} y The y position on the source display object to transform.\n\t\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n\t\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n\t\t * in the target's coordinate space.\n\t\t **/\n\t\tp.localToLocal = function(x, y, target, pt) {\n\t\t\tpt = this.localToGlobal(x, y, pt);\n\t\t\treturn target.globalToLocal(pt.x, pt.y, pt);\n\t\t};\n\n\t\t/**\n\t\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n\t\t * Omitted parameters will have the default value set.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      displayObject.setTransform(100, 100, 2, 2);\n\t\t *\n\t\t * @method setTransform\n\t\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\n\t\t * @param {Number} [y=0] The vertical translation (y position) in pixels\n\t\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n\t\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n\t\t * @param {Number} [rotation=0] The rotation, in degrees\n\t\t * @param {Number} [skewX=0] The horizontal skew factor\n\t\t * @param {Number} [skewY=0] The vertical skew factor\n\t\t * @param {Number} [regX=0] The horizontal registration point in pixels\n\t\t * @param {Number} [regY=0] The vertical registration point in pixels\n\t\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n\t\t * @chainable\n\t\t*/\n\t\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\t\tthis.x = x || 0;\n\t\t\tthis.y = y || 0;\n\t\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\n\t\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\n\t\t\tthis.rotation = rotation || 0;\n\t\t\tthis.skewX = skewX || 0;\n\t\t\tthis.skewY = skewY || 0;\n\t\t\tthis.regX = regX || 0;\n\t\t\tthis.regY = regY || 0;\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a matrix based on this object's current transform.\n\t\t * @method getMatrix\n\t\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n\t\t * Matrix object is returned.\n\t\t * @return {Matrix2D} A matrix representing this display object's transform.\n\t\t **/\n\t\tp.getMatrix = function(matrix) {\n\t\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\n\t\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\n\t\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n\t\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t\t * @method getConcatenatedMatrix\n\t\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n\t\t * If null, a new Matrix2D object is returned.\n\t\t * @return {Matrix2D} The combined matrix.\n\t\t **/\n\t\tp.getConcatenatedMatrix = function(matrix) {\n\t\t\tvar o = this, mtx = this.getMatrix(matrix);\n\t\t\twhile (o = o.parent) {\n\t\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\n\t\t\t}\n\t\t\treturn mtx;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n\t\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n\t\t * @method getConcatenatedDisplayProps\n\t\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n\t\t * If null, a new DisplayProps object is returned.\n\t\t * @return {DisplayProps} The combined display properties.\n\t\t **/\n\t\tp.getConcatenatedDisplayProps = function(props) {\n\t\t\tprops = props ? props.identity() : new createjs.DisplayProps();\n\t\t\tvar o = this, mtx = o.getMatrix(props.matrix); \n\t\t\tdo {\n\t\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\t\t\t\t\n\t\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n\t\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n\t\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\n\t\t\t} while (o = o.parent);\n\t\t\treturn props;\n\t\t};\n\n\t\t/**\n\t\t * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\n\t\t * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\n\t\t * of the display object.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \t\tvar myShape = new createjs.Shape();\n\t\t * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\n\t\t *\n\t\t * \t\tconsole.log(myShape.hitTest(10,10); // false\n\t\t * \t\tconsole.log(myShape.hitTest(110, 25); // true\n\t\t *\n\t\t * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\n\t\t * first be converted to local coordinates:\n\t\t *\n\t\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n\t\t *      function handleMouseDown(event) {\n\t\t *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\n\t\t *          var hit = myShape.hitTest(p.x, p.y);\n\t\t *      }\n\t\t *\n\t\t * Shape-to-shape collision is not currently supported by EaselJS.\n\t\t *\n\t\t * @method hitTest\n\t\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n\t\t * local Point.\n\t\t*/\n\t\tp.hitTest = function(x, y) {\n\t\t\tvar ctx = DisplayObject._hitTestContext;\n\t\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\n\t\t\tthis.draw(ctx);\n\n\t\t\tvar hit = this._testHit(ctx);\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\treturn hit;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t\t *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n\t\t *\n\t\t * @method set\n\t\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n\t\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t*/\n\t\tp.set = function(props) {\n\t\t\tfor (var n in props) { this[n] = props[n]; }\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n\t\t * Objects that have been cached will return the bounds of the cache.\n\t\t * \n\t\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t\t * bounds.\n\t\t * \n\t\t * <table>\n\t\t * \t<tr><td><b>All</b></td><td>\n\t\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n\t\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n\t\t * \t\tthe automatic calculations listed below.\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>Bitmap</b></td><td>\n\t\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>Sprite</b></td><td>\n\t\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n\t\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>Container</b></td><td>\n\t\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>Shape</b></td><td>\n\t\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>Text</b></td><td>\n\t\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n\t\t * \t\tnot, especially when using textBaseline values other than \"top\".\n\t\t * \t</td></tr>\n\t\t * \t<tr><td><b>BitmapText</b></td><td>\n\t\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n\t\t * \t\tto (x=0,y=0).\n\t\t * \t</td></tr>\n\t\t* </table>\n\t\t * \n\t\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n\t\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n\t\t * bounds explicitly:\n\t\t * \n\t\t * \tvar bounds = obj.getBounds();\n\t\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n\t\t * \t// getBounds will now use the set values, instead of recalculating\n\t\t * \n\t\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t\t * values if you need to retain it.\n\t\t * \n\t\t * \tvar myBounds = obj.getBounds().clone();\n\t\t * \t// OR:\n\t\t * \tmyRect.copy(obj.getBounds());\n\t\t * \n\t\t * @method getBounds\n\t\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n\t\t * object.\n\t\t **/\n\t\tp.getBounds = function() {\n\t\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\n\t\t\tvar cacheCanvas = this.cacheCanvas;\n\t\t\tif (cacheCanvas) {\n\t\t\t\tvar scale = this._cacheScale;\n\t\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n\t\t * Objects that have been cached will return the transformed bounds of the cache.\n\t\t * \n\t\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t\t * bounds.\n\t\t * \n\t\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t\t * values if you need to retain it.\n\t\t * \n\t\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n\t\t * @method getTransformedBounds\n\t\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n\t\t **/\n\t\tp.getTransformedBounds = function() {\n\t\t\treturn this._getBounds();\n\t\t};\n\t\t\n\t\t/**\n\t\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n\t\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n\t\t * override calculated bounds.\n\t\t * \n\t\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n\t\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n\t\t * @method setBounds\n\t\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n\t\t * @param {Number} y The y origin of the bounds.\n\t\t * @param {Number} width The width of the bounds.\n\t\t * @param {Number} height The height of the bounds.\n\t\t **/\n\t\tp.setBounds = function(x, y, width, height) {\n\t\t\tif (x == null) { this._bounds = x; }\n\t\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n\t\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n\t\t * are copied by reference (masks, individual filter instances, hit area)\n\t\t * @method clone\n\t\t * @return {DisplayObject} A clone of the current DisplayObject instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn this._cloneProps(new DisplayObject());\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\n\t\t};\n\n\n\t// private methods:\n\t\t// separated so it can be used more easily in subclasses:\n\t\t/**\n\t\t * @method _cloneProps\n\t\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n\t\t * instance copied into.\n\t\t * @return {DisplayObject} o\n\t\t * @protected\n\t\t **/\n\t\tp._cloneProps = function(o) {\n\t\t\to.alpha = this.alpha;\n\t\t\to.mouseEnabled = this.mouseEnabled;\n\t\t\to.tickEnabled = this.tickEnabled;\n\t\t\to.name = this.name;\n\t\t\to.regX = this.regX;\n\t\t\to.regY = this.regY;\n\t\t\to.rotation = this.rotation;\n\t\t\to.scaleX = this.scaleX;\n\t\t\to.scaleY = this.scaleY;\n\t\t\to.shadow = this.shadow;\n\t\t\to.skewX = this.skewX;\n\t\t\to.skewY = this.skewY;\n\t\t\to.visible = this.visible;\n\t\t\to.x  = this.x;\n\t\t\to.y = this.y;\n\t\t\to.compositeOperation = this.compositeOperation;\n\t\t\to.snapToPixel = this.snapToPixel;\n\t\t\to.filters = this.filters==null?null:this.filters.slice(0);\n\t\t\to.mask = this.mask;\n\t\t\to.hitArea = this.hitArea;\n\t\t\to.cursor = this.cursor;\n\t\t\to._bounds = this._bounds;\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * @method _applyShadow\n\t\t * @protected\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t * @param {Shadow} shadow\n\t\t **/\n\t\tp._applyShadow = function(ctx, shadow) {\n\t\t\tshadow = shadow || Shadow.identity;\n\t\t\tctx.shadowColor = shadow.color;\n\t\t\tctx.shadowOffsetX = shadow.offsetX;\n\t\t\tctx.shadowOffsetY = shadow.offsetY;\n\t\t\tctx.shadowBlur = shadow.blur;\n\t\t};\n\t\t\n\t\t\n\t\t/**\n\t\t * @method _tick\n\t\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t\t * @protected\n\t\t **/\n\t\tp._tick = function(evtObj) {\n\t\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n\t\t\tvar ls = this._listeners;\n\t\t\tif (ls && ls[\"tick\"]) {\n\t\t\t\t// reset & reuse the event object to avoid construction / GC costs:\n\t\t\t\tevtObj.target = null;\n\t\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n\t\t\t\tthis.dispatchEvent(evtObj);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _testHit\n\t\t * @protected\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp._testHit = function(ctx) {\n\t\t\ttry {\n\t\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n\t\t\t} catch (e) {\n\t\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\n\t\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hit;\n\t\t};\n\n\t\t/**\n\t\t * @method _applyFilters\n\t\t * @protected\n\t\t **/\n\t\tp._applyFilters = function() {\n\t\t\tif (!this.filters || this.filters.length == 0 || !this.cacheCanvas) { return; }\n\t\t\tvar l = this.filters.length;\n\t\t\tvar ctx = this.cacheCanvas.getContext(\"2d\");\n\t\t\tvar w = this.cacheCanvas.width;\n\t\t\tvar h = this.cacheCanvas.height;\n\t\t\tfor (var i=0; i<l; i++) {\n\t\t\t\tthis.filters[i].applyFilter(ctx, 0, 0, w, h);\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getFilterBounds\n\t\t * @return {Rectangle}\n\t\t * @protected\n\t\t **/\n\t\tp._getFilterBounds = function(rect) {\n\t\t\tvar l, filters = this.filters, bounds = this._rectangle.setValues(0,0,0,0);\n\t\t\tif (!filters || !(l=filters.length)) { return bounds; }\n\t\t\t\n\t\t\tfor (var i=0; i<l; i++) {\n\t\t\t\tvar f = this.filters[i];\n\t\t\t\tf.getBounds&&f.getBounds(bounds);\n\t\t\t}\n\t\t\treturn bounds;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getBounds\n\t\t * @param {Matrix2D} matrix\n\t\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t\t * @return {Rectangle}\n\t\t * @protected\n\t\t **/\n\t\tp._getBounds = function(matrix, ignoreTransform){\n\t\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _transformBounds\n\t\t * @param {Rectangle} bounds\n\t\t * @param {Matrix2D} matrix\n\t\t * @param {Boolean} ignoreTransform\n\t\t * @return {Rectangle}\n\t\t * @protected\n\t\t **/\n\t\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\n\t\t\tif (!bounds) { return bounds; }\n\t\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\n\t\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\t\t\n\t\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\n\t\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\t\n\t\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\n\t\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\n\t\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\t\t\n\t\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\n\n\t\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\t\t\n\t\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\t\t\n\t\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Indicates whether the display object has any mouse event listeners or a cursor.\n\t\t * @method _isMouseOpaque\n\t\t * @return {Boolean}\n\t\t * @protected\n\t\t **/\n\t\tp._hasMouseEventListener = function() {\n\t\t\tvar evts = DisplayObject._MOUSE_EVENTS;\n\t\t\tfor (var i= 0, l=evts.length; i<l; i++) {\n\t\t\t\tif (this.hasEventListener(evts[i])) { return true; }\n\t\t\t}\n\t\t\treturn !!this.cursor;\n\t\t};\n\n\t\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n\t}());\n\n\t//##############################################################################\n\t// Container.js\n\t//##############################################################################\n\n\t(function() {\n\t\t\n\n\t// constructor:\n\t/**\n\t * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n\t * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n\t * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n\t * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n\t * Container.\n\t *\n\t * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n\t * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n\t * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var container = new createjs.Container();\n\t *      container.addChild(bitmapInstance, shapeInstance);\n\t *      container.x = 100;\n\t *\n\t * @class Container\n\t * @extends DisplayObject\n\t * @constructor\n\t **/\n\t\tfunction Container() {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The array of children in the display list. You should usually use the child management methods such as\n\t\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n\t\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n\t\t\t * included for advanced uses.\n\t\t\t * @property children\n\t\t\t * @type Array\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.children = [];\n\t\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n\t\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\n\t\t\t * trigger a click event on the container.\n\t\t\t * @property mouseChildren\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.mouseChildren = true;\n\t\t\t\n\t\t\t/**\n\t\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n\t\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t\t * @property tickChildren\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.tickChildren = true;\n\t\t}\n\t\tvar p = createjs.extend(Container, createjs.DisplayObject);\n\t\t\n\t\t\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n\t\t * @method getNumChildren\n\t\t * @return {Number}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getNumChildren = function() {\n\t\t\treturn this.children.length;\n\t\t};\n\n\t\t/**\n\t\t * Returns the number of children in the container.\n\t\t * @property numChildren\n\t\t * @type {Number}\n\t\t * @readonly\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tnumChildren: { get: p.getNumChildren }\n\t\t\t});\n\t\t} catch (e) {}\n\t\t\n\n\t// public methods:\n\t\t/**\n\t\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t\t * @method initialize\n\t\t * @deprecated in favour of `createjs.promote()`\n\t\t **/\n\t\tp.initialize = Container; // TODO: deprecated.\n\t\t\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar hasContent = this.cacheCanvas || this.children.length;\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\t\n\t\t\t// this ensures we don't have issues with display list changes that occur during a draw:\n\t\t\tvar list = this.children.slice();\n\t\t\tfor (var i=0,l=list.length; i<l; i++) {\n\t\t\t\tvar child = list[i];\n\t\t\t\tif (!child.isVisible()) { continue; }\n\t\t\t\t\n\t\t\t\t// draw the child:\n\t\t\t\tctx.save();\n\t\t\t\tchild.updateContext(ctx);\n\t\t\t\tchild.draw(ctx);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Adds a child to the top of the display list.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \t\tcontainer.addChild(bitmapInstance);\n\t\t *\n\t\t * You can also add multiple children at once:\n\t\t *\n\t\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n\t\t *\n\t\t * @method addChild\n\t\t * @param {DisplayObject} child The display object to add.\n\t\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n\t\t **/\n\t\tp.addChild = function(child) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tif (child == null) { return child; }\n\t\t\tvar l = arguments.length;\n\t\t\tif (l > 1) {\n\t\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments$1[i]); }\n\t\t\t\treturn arguments[l-1];\n\t\t\t}\n\t\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\t\tchild.parent = this;\n\t\t\tthis.children.push(child);\n\t\t\tchild.dispatchEvent(\"added\");\n\t\t\treturn child;\n\t\t};\n\n\t\t/**\n\t\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n\t\t * setting its parent to this Container.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      addChildAt(child1, index);\n\t\t *\n\t\t * You can also add multiple children, such as:\n\t\t *\n\t\t *      addChildAt(child1, child2, ..., index);\n\t\t *\n\t\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n\t\t * you could use:\n\t\t *\n\t\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n\t\t *\n\t\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n\t\t *\n\t\t * @method addChildAt\n\t\t * @param {DisplayObject} child The display object to add.\n\t\t * @param {Number} index The index to add the child at.\n\t\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n\t\t **/\n\t\tp.addChildAt = function(child, index) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tvar l = arguments.length;\n\t\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\n\t\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\n\t\t\tif (l > 2) {\n\t\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments$1[i], indx+i); }\n\t\t\t\treturn arguments[l-2];\n\t\t\t}\n\t\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\t\tchild.parent = this;\n\t\t\tthis.children.splice(index, 0, child);\n\t\t\tchild.dispatchEvent(\"added\");\n\t\t\treturn child;\n\t\t};\n\n\t\t/**\n\t\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n\t\t * already known.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      container.removeChild(child);\n\t\t *\n\t\t * You can also remove multiple children:\n\t\t *\n\t\t *      removeChild(child1, child2, ...);\n\t\t *\n\t\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\n\t\t * @method removeChild\n\t\t * @param {DisplayObject} child The child to remove.\n\t\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n\t\t **/\n\t\tp.removeChild = function(child) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tvar l = arguments.length;\n\t\t\tif (l > 1) {\n\t\t\t\tvar good = true;\n\t\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments$1[i]); }\n\t\t\t\treturn good;\n\t\t\t}\n\t\t\treturn this.removeChildAt(createjs.indexOf(this.children, child));\n\t\t};\n\n\t\t/**\n\t\t * Removes the child at the specified index from the display list, and sets its parent to null.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      container.removeChildAt(2);\n\t\t *\n\t\t * You can also remove multiple children:\n\t\t *\n\t\t *      container.removeChild(2, 7, ...)\n\t\t *\n\t\t * Returns true if the child (or children) was removed, or false if any index was out of range.\n\t\t * @method removeChildAt\n\t\t * @param {Number} index The index of the child to remove.\n\t\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n\t\t **/\n\t\tp.removeChildAt = function(index) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tvar l = arguments.length;\n\t\t\tif (l > 1) {\n\t\t\t\tvar a = [];\n\t\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments$1[i]; }\n\t\t\t\ta.sort(function(a, b) { return b-a; });\n\t\t\t\tvar good = true;\n\t\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChildAt(a[i]); }\n\t\t\t\treturn good;\n\t\t\t}\n\t\t\tif (index < 0 || index > this.children.length-1) { return false; }\n\t\t\tvar child = this.children[index];\n\t\t\tif (child) { child.parent = null; }\n\t\t\tthis.children.splice(index, 1);\n\t\t\tchild.dispatchEvent(\"removed\");\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Removes all children from the display list.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \tcontainer.removeAllChildren();\n\t\t *\n\t\t * @method removeAllChildren\n\t\t **/\n\t\tp.removeAllChildren = function() {\n\t\t\tvar kids = this.children;\n\t\t\twhile (kids.length) { this.removeChildAt(0); }\n\t\t};\n\n\t\t/**\n\t\t * Returns the child at the specified index.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      container.getChildAt(2);\n\t\t *\n\t\t * @method getChildAt\n\t\t * @param {Number} index The index of the child to return.\n\t\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n\t\t **/\n\t\tp.getChildAt = function(index) {\n\t\t\treturn this.children[index];\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns the child with the specified name.\n\t\t * @method getChildByName\n\t\t * @param {String} name The name of the child to return.\n\t\t * @return {DisplayObject} The child with the specified name.\n\t\t **/\n\t\tp.getChildByName = function(name) {\n\t\t\tvar kids = this.children;\n\t\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\t\tif(kids[i].name == name) { return kids[i]; }\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Performs an array sort operation on the child list.\n\t\t *\n\t\t * <h4>Example: Display children with a higher y in front.</h4>\n\t\t * \n\t\t *      var sortFunction = function(obj1, obj2, options) {\n\t\t *          if (obj1.y > obj2.y) { return 1; }\n\t\t *          if (obj1.y < obj2.y) { return -1; }\n\t\t *          return 0;\n\t\t *      }\n\t\t *      container.sortChildren(sortFunction);\n\t\t *\n\t\t * @method sortChildren\n\t\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n\t\t * documentation for details.\n\t\t **/\n\t\tp.sortChildren = function(sortFunction) {\n\t\t\tthis.children.sort(sortFunction);\n\t\t};\n\n\t\t/**\n\t\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var index = container.getChildIndex(child);\n\t\t *\n\t\t * @method getChildIndex\n\t\t * @param {DisplayObject} child The child to return the index of.\n\t\t * @return {Number} The index of the specified child. -1 if the child is not found.\n\t\t **/\n\t\tp.getChildIndex = function(child) {\n\t\t\treturn createjs.indexOf(this.children, child);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n\t\t * @method swapChildrenAt\n\t\t * @param {Number} index1\n\t\t * @param {Number} index2\n\t\t **/\n\t\tp.swapChildrenAt = function(index1, index2) {\n\t\t\tvar kids = this.children;\n\t\t\tvar o1 = kids[index1];\n\t\t\tvar o2 = kids[index2];\n\t\t\tif (!o1 || !o2) { return; }\n\t\t\tkids[index1] = o2;\n\t\t\tkids[index2] = o1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n\t\t * Container.\n\t\t * @method swapChildren\n\t\t * @param {DisplayObject} child1\n\t\t * @param {DisplayObject} child2\n\t\t **/\n\t\tp.swapChildren = function(child1, child2) {\n\t\t\tvar kids = this.children;\n\t\t\tvar index1,index2;\n\t\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\t\tif (kids[i] == child1) { index1 = i; }\n\t\t\t\tif (kids[i] == child2) { index2 = i; }\n\t\t\t\tif (index1 != null && index2 != null) { break; }\n\t\t\t}\n\t\t\tif (i==l) { return; } // TODO: throw error?\n\t\t\tkids[index1] = child2;\n\t\t\tkids[index2] = child1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n\t\t * @param {DisplayObject} child\n\t\t * @param {Number} index  \n\t\t * @method setChildIndex\n\t\t **/\n\t\tp.setChildIndex = function(child, index) {\n\t\t\tvar kids = this.children, l=kids.length;\n\t\t\tif (child.parent != this || index < 0 || index >= l) { return; }\n\t\t\tfor (var i=0;i<l;i++) {\n\t\t\t\tif (kids[i] == child) { break; }\n\t\t\t}\n\t\t\tif (i==l || i == index) { return; }\n\t\t\tkids.splice(i,1);\n\t\t\tkids.splice(index,0,child);\n\t\t};\n\n\t\t/**\n\t\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n\t\t * of this container.\n\t\t * @method contains\n\t\t * @param {DisplayObject} child The DisplayObject to be checked.\n\t\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\n\t\t **/\n\t\tp.contains = function(child) {\n\t\t\twhile (child) {\n\t\t\t\tif (child == this) { return true; }\n\t\t\t\tchild = child.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n\t\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n\t\t * transform properties including regX/Y.\n\t\t * @method hitTest\n\t\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n\t\t * coordinates.\n\t\t **/\n\t\tp.hitTest = function(x, y) {\n\t\t\t// TODO: optimize to use the fast cache check where possible.\n\t\t\treturn (this.getObjectUnderPoint(x, y) != null);\n\t\t};\n\n\t\t/**\n\t\t * Returns an array of all display objects under the specified coordinates that are in this container's display\n\t\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n\t\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n\t\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n\t\t * and only if the mouse's position has changed.\n\t\t * \n\t\t * <ul>\n\t\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\n\t\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n\t\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n\t\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n\t\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n\t\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n\t\t * </li>\n\t\t * \n\t\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n\t\t * @method getObjectsUnderPoint\n\t\t * @param {Number} x The x position in the container to test.\n\t\t * @param {Number} y The y position in the container to test.\n\t\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\n\t\t **/\n\t\tp.getObjectsUnderPoint = function(x, y, mode) {\n\t\t\tvar arr = [];\n\t\t\tvar pt = this.localToGlobal(x, y);\n\t\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\n\t\t\treturn arr;\n\t\t};\n\n\t\t/**\n\t\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n\t\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n\t\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n\t\t * @method getObjectUnderPoint\n\t\t * @param {Number} x The x position in the container to test.\n\t\t * @param {Number} y The y position in the container to test.\n\t\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t\t * @return {DisplayObject} The top-most display object under the specified coordinates.\n\t\t **/\n\t\tp.getObjectUnderPoint = function(x, y, mode) {\n\t\t\tvar pt = this.localToGlobal(x, y);\n\t\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tp.getBounds = function() {\n\t\t\treturn this._getBounds(null, true);\n\t\t};\n\t\t\n\t\t\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tp.getTransformedBounds = function() {\n\t\t\treturn this._getBounds();\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n\t\t * reverted to their defaults (for example .parent).\n\t\t * @method clone\n\t\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n\t\t * properties of the container will be cloned, but the new instance will not have any children.\n\t\t * @return {Container} A clone of the current Container instance.\n\t\t **/\n\t\tp.clone = function(recursive) {\n\t\t\tvar o = this._cloneProps(new Container());\n\t\t\tif (recursive) { this._cloneChildren(o); }\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Container (name=\"+  this.name +\")]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _tick\n\t\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t\t * @protected\n\t\t **/\n\t\tp._tick = function(evtObj) {\n\t\t\tif (this.tickChildren) {\n\t\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\n\t\t\t\t\tvar child = this.children[i];\n\t\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.DisplayObject__tick(evtObj);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Recursively clones all children of this container, and adds them to the target container.\n\t\t * @method cloneChildren\n\t\t * @protected\n\t\t * @param {Container} o The target container.\n\t\t **/\n\t\tp._cloneChildren = function(o) {\n\t\t\tif (o.children.length) { o.removeAllChildren(); }\n\t\t\tvar arr = o.children;\n\t\t\tfor (var i=0, l=this.children.length; i<l; i++) {\n\t\t\t\tvar clone = this.children[i].clone(true);\n\t\t\t\tclone.parent = o;\n\t\t\t\tarr.push(clone);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _getObjectsUnderPoint\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Array} arr\n\t\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n\t\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n\t\t * @param {Number} currentDepth Indicates the current depth of the search.\n\t\t * @return {DisplayObject}\n\t\t * @protected\n\t\t **/\n\t\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\n\t\t\tcurrentDepth = currentDepth || 0;\n\t\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\n\t\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\n\t\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\n\n\t\t\t// draw children one at a time, and check if we get a hit:\n\t\t\tvar children = this.children, l = children.length;\n\t\t\tfor (var i=l-1; i>=0; i--) {\n\t\t\t\tvar child = children[i];\n\t\t\t\tvar hitArea = child.hitArea;\n\t\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\n\t\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\n\t\t\t\t\n\t\t\t\t// if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\n\t\t\t\tif (!hitArea && child instanceof Container) {\n\t\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\n\t\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\n\t\t\t\t} else {\n\t\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\n\t\t\t\t\t\n\t\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n\t\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\n\t\t\t\t\tmtx = props.matrix;\n\t\t\t\t\t\n\t\t\t\t\tif (hitArea) {\n\t\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n\t\t\t\t\t\tprops.alpha = hitArea.alpha;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tctx.globalAlpha = props.alpha;\n\t\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\t\t\t(hitArea||child).draw(ctx);\n\t\t\t\t\tif (!this._testHit(ctx)) { continue; }\n\t\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\t\t\tif (arr) { arr.push(child); }\n\t\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _testMask\n\t\t * @param {DisplayObject} target\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @return {Boolean} Indicates whether the x/y is within the masked region.\n\t\t * @protected\n\t\t **/\n\t\tp._testMask = function(target, x, y) {\n\t\t\tvar mask = target.mask;\n\t\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\n\t\t\t\n\t\t\tvar mtx = this._props.matrix, parent = target.parent;\n\t\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n\t\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n\t\t\t\n\t\t\tvar ctx = createjs.DisplayObject._hitTestContext;\n\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\t\n\t\t\t// draw the mask as a solid fill:\n\t\t\tmask.graphics.drawAsPath(ctx);\n\t\t\tctx.fillStyle = \"#000\";\n\t\t\tctx.fill();\n\t\t\t\n\t\t\tif (!this._testHit(ctx)) { return false; }\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\t\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getBounds\n\t\t * @param {Matrix2D} matrix\n\t\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t\t * @return {Rectangle}\n\t\t * @protected\n\t\t **/\n\t\tp._getBounds = function(matrix, ignoreTransform) {\n\t\t\tvar bounds = this.DisplayObject_getBounds();\n\t\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\t\t\n\t\t\tvar mtx = this._props.matrix;\n\t\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\t\n\t\t\tvar l = this.children.length, rect=null;\n\t\t\tfor (var i=0; i<l; i++) {\n\t\t\t\tvar child = this.children[i];\n\t\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\n\t\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\n\t\t\t\telse { rect = bounds.clone(); }\n\t\t\t}\n\t\t\treturn rect;\n\t\t};\n\n\n\t\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// Stage.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t\t * method is called, it will render its display list to its target canvas.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n\t\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasElementId\");\n\t\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t\t *      stage.addChild(image);\n\t\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t\t *      function handleTick(event) {\n\t\t *          image.x += 10;\n\t\t *          stage.update();\n\t\t *      }\n\t\t *\n\t\t * @class Stage\n\t\t * @extends Container\n\t\t * @constructor\n\t\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n\t\t * of a canvas object in the current document.\n\t\t **/\n\t\tfunction Stage(canvas) {\n\t\t\tthis.Container_constructor();\n\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n\t\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n\t\t\t * example).\n\t\t\t *\n\t\t\t * <h4>Example</h4>\n\t\t\t *\n\t\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t\t *      stage.autoClear = false;\n\t\t\t *\n\t\t\t * @property autoClear\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.autoClear = true;\n\t\t\n\t\t\t/**\n\t\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n\t\t\t * first stage that will be ticked (or they will clear each other's render).\n\t\t\t *\n\t\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t\t *\n\t\t\t *      myStage.enableDOMEvents(false);\n\t\t\t *      myStage.canvas = anotherCanvas;\n\t\t\t *      myStage.enableDOMEvents(true);\n\t\t\t *\n\t\t\t * @property canvas\n\t\t\t * @type HTMLCanvasElement | Object\n\t\t\t **/\n\t\t\tthis.canvas = (typeof canvas == \"string\") ? document.getElementById(canvas) : canvas;\n\t\t\n\t\t\t/**\n\t\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t\t * @property mouseX\n\t\t\t * @type Number\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.mouseX = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t\t * @property mouseY\n\t\t\t * @type Number\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.mouseY = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\n\t\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n\t\t\t * @property drawRect\n\t\t\t * @type {Rectangle}\n\t\t\t */\n\t\t\tthis.drawRect = null;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\n\t\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n\t\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\n\t\t\t * @property snapToPixelEnabled\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis.snapToPixelEnabled = false;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\n\t\t\t * @property mouseInBounds\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis.mouseInBounds = false;\n\t\t\n\t\t\t/**\n\t\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n\t\t\t * @property tickOnUpdate\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.tickOnUpdate = true;\n\t\t\n\t\t\t/**\n\t\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n\t\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t\t * x/y/rawX/rawY.\n\t\t\t * @property mouseMoveOutside\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis.mouseMoveOutside = false;\n\t\t\t\n\t\t\t\n\t\t\t/**\n\t\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n\t\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n\t\t\t * @property preventSelection\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t **/\n\t\t\tthis.preventSelection = true;\n\t\t\n\t\t\t/**\n\t\t\t * The hitArea property is not supported for Stage.\n\t\t\t * @property hitArea\n\t\t\t * @type {DisplayObject}\n\t\t\t * @default null\n\t\t\t */\n\t\t\t \n\t\t\t \n\t\t// private properties:\n\t\t\t/**\n\t\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\n\t\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n\t\t\t * @property _pointerData\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._pointerData = {};\n\t\t\n\t\t\t/**\n\t\t\t * Number of active pointers.\n\t\t\t * @property _pointerCount\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._pointerCount = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The ID of the primary pointer.\n\t\t\t * @property _primaryPointerID\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._primaryPointerID = null;\n\t\t\n\t\t\t/**\n\t\t\t * @property _mouseOverIntervalID\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._mouseOverIntervalID = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _nextStage\n\t\t\t * @protected\n\t\t\t * @type Stage\n\t\t\t **/\n\t\t\tthis._nextStage = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _prevStage\n\t\t\t * @protected\n\t\t\t * @type Stage\n\t\t\t **/\n\t\t\tthis._prevStage = null;\n\t\t\t\n\t\t\t\n\t\t// initialize:\n\t\t\tthis.enableDOMEvents(true);\n\t\t}\n\t\tvar p = createjs.extend(Stage, createjs.Container);\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// events:\n\t\t/**\n\t\t * Dispatched when the user moves the mouse over the canvas.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event stagemousemove\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * class for a listing of event properties.\n\t\t * @event stagemousedown\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n\t\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n\t\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t\t * @event stagemouseup\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n\t\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * class for a listing of event properties.\n\t\t * @event mouseleave\n\t\t * @since 0.7.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n\t\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * class for a listing of event properties.\n\t\t * @event mouseenter\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched each update immediately before the tick event is propagated through the display list.\n\t\t * You can call preventDefault on the event object to cancel propagating the tick event.\n\t\t * @event tickstart\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n\t\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\n\t\t * @event tickend\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n\t\t * You can call preventDefault on the event object to cancel the draw.\n\t\t * @event drawstart\n\t\t * @since 0.7.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t\t * @event drawend\n\t\t * @since 0.7.0\n\t\t */\n\n\t\t \n\t// getter / setters:\n\t\t/**\n\t\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n\t\t * This can be useful in cases where you have multiple layered canvases and want user interactions\n\t\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n\t\t *\n\t\t *      topStage.nextStage = bottomStage;\n\t\t *\n\t\t * To disable relaying, set nextStage to null.\n\t\t * \n\t\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n\t\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n\t\t * Considerations when using roll over in relay targets:<OL>\n\t\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n\t\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n\t\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n\t\t * </OL>\n\t\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n\t\t * 30 as it's desired frequency):\n\t\t * \ttopStage.nextStage = targetStage;\n\t\t * \ttopStage.enableMouseOver(10);\n\t\t * \ttargetStage.enableMouseOver(30);\n\t\t * \n\t\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n\t\t * DOM events using:\n\t\t * \n\t\t *\ttargetStage.enableDOMEvents(false);\n\t\t * \n\t\t * @property nextStage\n\t\t * @type {Stage}\n\t\t **/\n\t\tp._get_nextStage = function() {\n\t\t\treturn this._nextStage;\n\t\t};\n\t\tp._set_nextStage = function(value) {\n\t\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\n\t\t\tif (value) { value._prevStage = this; }\n\t\t\tthis._nextStage = value;\n\t\t};\n\t\t\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\n\t\t\t});\n\t\t} catch (e) {} // TODO: use Log\n\n\n\t// public methods:\n\t\t/**\n\t\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n\t\t * and then render the display list to the canvas.\n\t\t *\n\t\t * @method update\n\t\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n\t\t **/\n\t\tp.update = function(props) {\n\t\t\tif (!this.canvas) { return; }\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\n\t\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n\t\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tif (this.autoClear) {\n\t\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\n\t\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\n\t\t\t}\n\t\t\tctx.save();\n\t\t\tif (this.drawRect) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(r.x, r.y, r.width, r.height);\n\t\t\t\tctx.clip();\n\t\t\t}\n\t\t\tthis.updateContext(ctx);\n\t\t\tthis.draw(ctx, false);\n\t\t\tctx.restore();\n\t\t\tthis.dispatchEvent(\"drawend\");\n\t\t};\n\t\t\n\t\t/**\n\t\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n\t\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n\t\t *\n\t\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n\t\t * propagated to listeners.\n\t\t *\n\t\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n\t\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n\t\t * passed as the `props` parameter to `tick()`. For example:\n\t\t *\n\t\t * \tTicker.on(\"tick\", handleTick);\n\t\t * \tfunction handleTick(evtObj) {\n\t\t * \t\t// clone the event object from Ticker, and add some custom data to it:\n\t\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n\t\t * \t\t\n\t\t * \t\t// pass it to stage.update():\n\t\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n\t\t * \t}\n\t\t * \t\n\t\t * \t// ...\n\t\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n\t\t * \tfunction handleDisplayObjectTick(evt) {\n\t\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n\t\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n\t\t * \t}\n\t\t * \n\t\t * @method tick\n\t\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n\t\t **/\n\t\tp.tick = function(props) {\n\t\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\n\t\t\tvar evtObj = new createjs.Event(\"tick\");\n\t\t\tif (props) {\n\t\t\t\tfor (var n in props) {\n\t\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._tick(evtObj);\n\t\t\tthis.dispatchEvent(\"tickend\");\n\t\t};\n\n\t\t/**\n\t\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n\t\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t * directly, using:\n\t\t *\n\t\t *      Ticker.addEventListener(\"tick\", myStage\");\n\t\t *\n\t\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n\t\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n\t\t * @property handleEvent\n\t\t * @type Function\n\t\t **/\n\t\tp.handleEvent = function(evt) {\n\t\t\tif (evt.type == \"tick\") { this.update(evt); }\n\t\t};\n\n\t\t/**\n\t\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n\t\t * @method clear\n\t\t **/\n\t\tp.clear = function() {\n\t\t\tif (!this.canvas) { return; }\n\t\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\n\t\t};\n\n\t\t/**\n\t\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n\t\t * be specified as the src value of an image element.\n\t\t * @method toDataURL\n\t\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n\t\t * value is allowed. The default value is a transparent background.\n\t\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n\t\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n\t\t * @return {String} a Base64 encoded image.\n\t\t **/\n\t\tp.toDataURL = function(backgroundColor, mimeType) {\n\t\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\n\n\t\t\tif (backgroundColor) {\n\t\t\t\tdata = ctx.getImageData(0, 0, w, h);\n\t\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\n\t\t\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\t\t\t\n\t\t\t\tctx.fillStyle = backgroundColor;\n\t\t\t\tctx.fillRect(0, 0, w, h);\n\t\t\t}\n\n\t\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\n\n\t\t\tif(backgroundColor) {\n\t\t\t\tctx.putImageData(data, 0, 0);\n\t\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t\t}\n\n\t\t\treturn dataURL;\n\t\t};\n\n\t\t/**\n\t\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n\t\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n\t\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n\t\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n\t\t * independently of mouse move events via the optional `frequency` parameter.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t *      stage.enableMouseOver(10); // 10 updates per second\n\t\t *\n\t\t * @method enableMouseOver\n\t\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n\t\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n\t\t * responsive, but uses less CPU.\n\t\t **/\n\t\tp.enableMouseOver = function(frequency) {\n\t\t\tif (this._mouseOverIntervalID) {\n\t\t\t\tclearInterval(this._mouseOverIntervalID);\n\t\t\t\tthis._mouseOverIntervalID = null;\n\t\t\t\tif (frequency == 0) {\n\t\t\t\t\tthis._testMouseOver(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (frequency == null) { frequency = 20; }\n\t\t\telse if (frequency <= 0) { return; }\n\t\t\tvar o = this;\n\t\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\n\t\t};\n\n\t\t/**\n\t\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n\t\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n\t\t * events from the page.\n\t\t *\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t *\n\t\t *      myStage.enableDOMEvents(false);\n\t\t *      myStage.canvas = anotherCanvas;\n\t\t *      myStage.enableDOMEvents(true);\n\t\t *\n\t\t * @method enableDOMEvents\n\t\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n\t\t **/\n\t\tp.enableDOMEvents = function(enable) {\n\t\t\tif (enable == null) { enable = true; }\n\t\t\tvar n, o, ls = this._eventListeners;\n\t\t\tif (!enable && ls) {\n\t\t\t\tfor (n in ls) {\n\t\t\t\t\to = ls[n];\n\t\t\t\t\to.t.removeEventListener(n, o.f, false);\n\t\t\t\t}\n\t\t\t\tthis._eventListeners = null;\n\t\t\t} else if (enable && !ls && this.canvas) {\n\t\t\t\tvar t = window.addEventListener ? window : document;\n\t\t\t\tvar _this = this;\n\t\t\t\tls = this._eventListeners = {};\n\t\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e);} };\n\t\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e);} };\n\t\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e);} };\n\t\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e);} };\n\n\t\t\t\tfor (n in ls) {\n\t\t\t\t\to = ls[n];\n\t\t\t\t\to.t.addEventListener(n, o.f, false);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Stage instances cannot be cloned.\n\t\t * @method clone\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tthrow(\"Stage cannot be cloned.\");\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Stage (name=\"+  this.name +\")]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _getElementRect\n\t\t * @protected\n\t\t * @param {HTMLElement} e\n\t\t **/\n\t\tp._getElementRect = function(e) {\n\t\t\tvar bounds;\n\t\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\n\t\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\n\n\t\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n\t\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\n\n\t\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\n\t\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\n\t\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\n\t\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\n\t\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\n\n\t\t\t// note: in some browsers bounds properties are read only.\n\t\t\treturn {\n\t\t\t\tleft: bounds.left+offX+padL,\n\t\t\t\tright: bounds.right+offX-padR,\n\t\t\t\ttop: bounds.top+offY+padT,\n\t\t\t\tbottom: bounds.bottom+offY-padB\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _getPointerData\n\t\t * @protected\n\t\t * @param {Number} id\n\t\t **/\n\t\tp._getPointerData = function(id) {\n\t\t\tvar data = this._pointerData[id];\n\t\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\n\t\t\treturn data;\n\t\t};\n\n\t\t/**\n\t\t * @method _handleMouseMove\n\t\t * @protected\n\t\t * @param {MouseEvent} e\n\t\t **/\n\t\tp._handleMouseMove = function(e) {\n\t\t\tif(!e){ e = window.event; }\n\t\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\n\t\t};\n\n\t\t/**\n\t\t * @method _handlePointerMove\n\t\t * @protected\n\t\t * @param {Number} id\n\t\t * @param {Event} e\n\t\t * @param {Number} pageX\n\t\t * @param {Number} pageY\n\t\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t\t **/\n\t\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\n\t\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\tif (!this.canvas) { return; }\n\t\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\n\n\t\t\tvar inBounds = o.inBounds;\n\t\t\tthis._updatePointerPosition(id, e, pageX, pageY);\n\t\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\n\t\t\t\tif (id === -1 && o.inBounds == !inBounds) {\n\t\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n\t\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n\t\t\t}\n\t\t\t\n\t\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\n\t\t};\n\n\t\t/**\n\t\t * @method _updatePointerPosition\n\t\t * @protected\n\t\t * @param {Number} id\n\t\t * @param {Event} e\n\t\t * @param {Number} pageX\n\t\t * @param {Number} pageY\n\t\t **/\n\t\tp._updatePointerPosition = function(id, e, pageX, pageY) {\n\t\t\tvar rect = this._getElementRect(this.canvas);\n\t\t\tpageX -= rect.left;\n\t\t\tpageY -= rect.top;\n\n\t\t\tvar w = this.canvas.width;\n\t\t\tvar h = this.canvas.height;\n\t\t\tpageX /= (rect.right-rect.left)/w;\n\t\t\tpageY /= (rect.bottom-rect.top)/h;\n\t\t\tvar o = this._getPointerData(id);\n\t\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\n\t\t\t\to.x = pageX;\n\t\t\t\to.y = pageY;\n\t\t\t} else if (this.mouseMoveOutside) {\n\t\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\n\t\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\n\t\t\t}\n\n\t\t\to.posEvtObj = e;\n\t\t\to.rawX = pageX;\n\t\t\to.rawY = pageY;\n\n\t\t\tif (id === this._primaryPointerID || id === -1) {\n\t\t\t\tthis.mouseX = o.x;\n\t\t\t\tthis.mouseY = o.y;\n\t\t\t\tthis.mouseInBounds = o.inBounds;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _handleMouseUp\n\t\t * @protected\n\t\t * @param {MouseEvent} e\n\t\t **/\n\t\tp._handleMouseUp = function(e) {\n\t\t\tthis._handlePointerUp(-1, e, false);\n\t\t};\n\n\t\t/**\n\t\t * @method _handlePointerUp\n\t\t * @protected\n\t\t * @param {Number} id\n\t\t * @param {Event} e\n\t\t * @param {Boolean} clear\n\t\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t\t **/\n\t\tp._handlePointerUp = function(id, e, clear, owner) {\n\t\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\n\t\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\t\n\t\t\tvar target=null, oTarget = o.target;\n\t\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\t\t\t\n\t\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\n\t\t\t\n\t\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\n\t\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n\t\t\t\n\t\t\tif (clear) {\n\t\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\n\t\t\t\tdelete(this._pointerData[id]);\n\t\t\t} else { o.target = null; }\n\t\t\t\n\t\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\n\t\t};\n\n\t\t/**\n\t\t * @method _handleMouseDown\n\t\t * @protected\n\t\t * @param {MouseEvent} e\n\t\t **/\n\t\tp._handleMouseDown = function(e) {\n\t\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\n\t\t};\n\n\t\t/**\n\t\t * @method _handlePointerDown\n\t\t * @protected\n\t\t * @param {Number} id\n\t\t * @param {Event} e\n\t\t * @param {Number} pageX\n\t\t * @param {Number} pageY\n\t\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t\t **/\n\t\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\n\t\t\tif (this.preventSelection) { e.preventDefault(); }\n\t\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\n\t\t\t\n\t\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\n\t\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\n\t\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\n\t\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\n\t\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n\t\t\t\n\t\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n\t\t};\n\n\t\t/**\n\t\t * @method _testMouseOver\n\t\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n\t\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t\t * @param {Stage} eventTarget The stage that the cursor is actively over.\n\t\t * @protected\n\t\t **/\n\t\tp._testMouseOver = function(clear, owner, eventTarget) {\n\t\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\t\n\t\t\tvar nextStage = this._nextStage;\n\t\t\tif (!this._mouseOverIntervalID) {\n\t\t\t\t// not enabled for mouseover, but should still relay the event.\n\t\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar o = this._getPointerData(-1);\n\t\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n\t\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\n\t\t\t\n\t\t\tvar e = o.posEvtObj;\n\t\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\n\t\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\n\t\t\t\n\t\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n\t\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n\t\t\t\tthis._mouseOverX = this.mouseX;\n\t\t\t\tthis._mouseOverY = this.mouseY;\n\t\t\t}\n\n\t\t\tvar oldList = this._mouseOverTarget||[];\n\t\t\tvar oldTarget = oldList[oldList.length-1];\n\t\t\tvar list = this._mouseOverTarget = [];\n\n\t\t\t// generate ancestor list and check for cursor:\n\t\t\tt = target;\n\t\t\twhile (t) {\n\t\t\t\tlist.unshift(t);\n\t\t\t\tif (!cursor) { cursor = t.cursor; }\n\t\t\t\tt = t.parent;\n\t\t\t}\n\t\t\tthis.canvas.style.cursor = cursor;\n\t\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\n\n\t\t\t// find common ancestor:\n\t\t\tfor (i=0,l=list.length; i<l; i++) {\n\t\t\t\tif (list[i] != oldList[i]) { break; }\n\t\t\t\tcommon = i;\n\t\t\t}\n\n\t\t\tif (oldTarget != target) {\n\t\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n\t\t\t}\n\n\t\t\tfor (i=oldList.length-1; i>common; i--) {\n\t\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n\t\t\t}\n\n\t\t\tfor (i=list.length-1; i>common; i--) {\n\t\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n\t\t\t}\n\n\t\t\tif (oldTarget != target) {\n\t\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n\t\t\t}\n\t\t\t\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n\t\t};\n\n\t\t/**\n\t\t * @method _handleDoubleClick\n\t\t * @protected\n\t\t * @param {MouseEvent} e\n\t\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t\t **/\n\t\tp._handleDoubleClick = function(e, owner) {\n\t\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\n\t\t\tif (!owner) {\n\t\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\n\t\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n\t\t\t}\n\t\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\n\t\t};\n\n\t\t/**\n\t\t * @method _dispatchMouseEvent\n\t\t * @protected\n\t\t * @param {DisplayObject} target\n\t\t * @param {String} type\n\t\t * @param {Boolean} bubbles\n\t\t * @param {Number} pointerId\n\t\t * @param {Object} o\n\t\t * @param {MouseEvent} [nativeEvent]\n\t\t * @param {DisplayObject} [relatedTarget]\n\t\t **/\n\t\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n\t\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n\t\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\n\t\t\t/*\n\t\t\t// TODO: account for stage transformations?\n\t\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n\t\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\n\t\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n\t\t\t*/\n\t\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n\t\t\ttarget.dispatchEvent(evt);\n\t\t};\n\n\n\t\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\n\t}());\n\n\t//##############################################################################\n\t// Bitmap.js\n\t//##############################################################################\n\n\t(function() {\n\t\t\n\t\t/**\n\t\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n\t\t * HTML element, or a string.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n\t\t *\n\t\t * <strong>Notes:</strong>\n\t\t * <ol>\n\t\t *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n\t\t *      will be displayed.</li>\n\t\t *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n\t\t *     the Bitmap can be cached.</li>\n\t\t *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n\t\t *     happens in all browsers except recent Firefox builds.</li>\n\t\t *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n\t\t *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n\t\t *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n\t\t * </ol>\n\t\t *\n\t\t * @class Bitmap\n\t\t * @extends DisplayObject\n\t\t * @constructor\n\t\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\n\t\t * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\n\t\t * If it is a URI, a new Image object will be constructed and assigned to the .image property.\n\t\t **/\n\t\tfunction Bitmap(imageOrUri) {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\n\t\t\t * mobile browsers) support drawing video to a canvas.\n\t\t\t * @property image\n\t\t\t * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\n\t\t\t **/\n\t\t\tif (typeof imageOrUri == \"string\") {\n\t\t\t\tthis.image = document.createElement(\"img\");\n\t\t\t\tthis.image.src = imageOrUri;\n\t\t\t} else {\n\t\t\t\tthis.image = imageOrUri;\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n\t\t\t * Note that video sources must have a width / height set to work correctly with `sourceRect`.\n\t\t\t * @property sourceRect\n\t\t\t * @type Rectangle\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.sourceRect = null;\n\t\t}\n\t\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\n\t\t\n\t\t\n\t// public methods:\n\t\t/**\n\t\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t\t * @method initialize\n\t\t * @deprecated in favour of `createjs.promote()`\n\t\t **/\n\t\tp.initialize = Bitmap; // TODO: deprecated.\n\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar image = this.image;\n\t\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t *\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) { return true; }\n\t\t\tvar img = this.image, rect = this.sourceRect;\n\t\t\tif (rect) {\n\t\t\t\t// some browsers choke on out of bound values, so we'll fix them:\n\t\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\n\t\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\n\t\t\t\tif (x2 > w) { x2 = w; }\n\t\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\n\t\t\t\tif (y2 > h) { y2 = h; }\n\t\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\n\t\t\t} else {\n\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t\t//Bitmap. This is why they have no method implementations.\n\t\t\n\t\t/**\n\t\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t\t *\n\t\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method cache\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t\t *\n\t\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method updateCache\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t\t *\n\t\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method uncache\n\t\t **/\n\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tp.getBounds = function() {\n\t\t\tvar rect = this.DisplayObject_getBounds();\n\t\t\tif (rect) { return rect; }\n\t\t\tvar image = this.image, o = this.sourceRect || image;\n\t\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a clone of the Bitmap instance.\n\t\t * @method clone\n\t\t * @return {Bitmap} a clone of the Bitmap instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tvar o = new Bitmap(this.image);\n\t\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\n\t\t\tthis._cloneProps(o);\n\t\t\treturn o;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\n\t\t};\n\n\t\t\n\t\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// Sprite.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n\t\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n\t\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n\t\t * play frames as an animation, and even sequence animations together.\n\t\t *\n\t\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var instance = new createjs.Sprite(spriteSheet);\n\t\t *      instance.gotoAndStop(\"frameName\");\n\t\t *\n\t\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n\t\t * only the first defined frame defined in the sprite sheet will be displayed.\n\t\t *\n\t\t * @class Sprite\n\t\t * @extends DisplayObject\n\t\t * @constructor\n\t\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n\t\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n\t\t **/\n\t\tfunction Sprite(spriteSheet, frameOrAnimation) {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n\t\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\n\t\t\t * @property currentFrame\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.currentFrame = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Returns the name of the currently playing animation.\n\t\t\t * @property currentAnimation\n\t\t\t * @type {String}\n\t\t\t * @final\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.currentAnimation = null;\n\t\t\n\t\t\t/**\n\t\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n\t\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n\t\t\t * @property paused\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis.paused = true;\n\t\t\n\t\t\t/**\n\t\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n\t\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t\t * @property spriteSheet\n\t\t\t * @type {SpriteSheet}\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.spriteSheet = spriteSheet;\n\t\t\n\t\t\t/**\n\t\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n\t\t\t * from 0 to n-1, where n is the number of frames in the current animation.\n\t\t\t *\n\t\t\t * This could be a non-integer value if\n\t\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n\t\t\t * not an integer.\n\t\t\t * @property currentAnimationFrame\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.currentAnimationFrame = 0;\n\t\t\n\t\t\t/**\n\t\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n\t\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t\t * framerate.\n\t\t\t *\n\t\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n\t\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t\t * vary slightly between frames.\n\t\t\t *\n\t\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t\t * @property framerate\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.framerate = 0;\n\t\t\n\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * Current animation object.\n\t\t\t * @property _animation\n\t\t\t * @protected\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis._animation = null;\n\t\t\n\t\t\t/**\n\t\t\t * Current frame index.\n\t\t\t * @property _currentFrame\n\t\t\t * @protected\n\t\t\t * @type {Number}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis._currentFrame = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n\t\t\t * @property _skipAdvance\n\t\t\t * @protected\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t **/\n\t\t\tthis._skipAdvance = false;\n\t\t\t\n\t\t\t\n\t\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\n\t\t}\n\t\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\n\n\t\t/**\n\t\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t\t * @method initialize\n\t\t * @deprecated in favour of `createjs.promote()`\n\t\t **/\n\t\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\n\n\n\t// events:\n\t\t/**\n\t\t * Dispatched when an animation reaches its ends.\n\t\t * @event animationend\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {String} name The name of the animation that just ended.\n\t\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n\t\t * @since 0.6.0\n\t\t */\n\t\t \n\t\t/**\n\t\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n\t\t * or calling gotoAndPlay() or gotoAndStop().\n\t\t * @event change\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t */\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\tthis._normalizeFrame();\n\t\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\n\t\t\tif (!o) { return false; }\n\t\t\tvar rect = o.rect;\n\t\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\n\t\t\treturn true;\n\t\t};\n\n\t\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t\t//Bitmap. This is why they have no method implementations.\n\n\t\t/**\n\t\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t\t * You should not cache Sprite instances as it can degrade performance.\n\t\t * @method cache\n\t\t **/\n\n\t\t/**\n\t\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t\t * You should not cache Sprite instances as it can degrade performance.\n\t\t * @method updateCache\n\t\t **/\n\n\t\t/**\n\t\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t\t * You should not cache Sprite instances as it can degrade performance.\n\t\t * @method uncache\n\t\t **/\n\n\t\t/**\n\t\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n\t\t * unchanged.\n\t\t * @method play\n\t\t **/\n\t\tp.play = function() {\n\t\t\tthis.paused = false;\n\t\t};\n\n\t\t/**\n\t\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n\t\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n\t\t * will resume playback.\n\t\t * @method stop\n\t\t **/\n\t\tp.stop = function() {\n\t\t\tthis.paused = true;\n\t\t};\n\n\t\t/**\n\t\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\n\t\t * @method gotoAndPlay\n\t\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t\t * and begin playing.\n\t\t **/\n\t\tp.gotoAndPlay = function(frameOrAnimation) {\n\t\t\tthis.paused = false;\n\t\t\tthis._skipAdvance = true;\n\t\t\tthis._goto(frameOrAnimation);\n\t\t};\n\n\t\t/**\n\t\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n\t\t * @method gotoAndStop\n\t\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t\t * and stop.\n\t\t **/\n\t\tp.gotoAndStop = function(frameOrAnimation) {\n\t\t\tthis.paused = true;\n\t\t\tthis._goto(frameOrAnimation);\n\t\t};\n\n\t\t/**\n\t\t * Advances the playhead. This occurs automatically each tick by default.\n\t\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n\t\t * or its SpriteSheet.\n\t\t * @method advance\n\t\t*/\n\t\tp.advance = function(time) {\n\t\t\tvar fps = this.framerate || this.spriteSheet.framerate;\n\t\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\n\t\t\tthis._normalizeFrame(t);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n\t\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n\t\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n\t\t *\n\t\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n\t\t * @method getBounds\n\t\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n\t\t * loaded.\n\t\t **/\n\t\tp.getBounds = function() {\n\t\t\t// TODO: should this normalizeFrame?\n\t\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n\t\t * instances.\n\t\t * @method clone\n\t\t * @return {Sprite} a clone of the Sprite instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\n\t\t};\n\n\t// private methods:\n\t\t/**\n\t\t * @method _cloneProps\n\t\t * @param {Sprite} o\n\t\t * @return {Sprite} o\n\t\t * @protected\n\t\t **/\n\t\tp._cloneProps = function(o) {\n\t\t\tthis.DisplayObject__cloneProps(o);\n\t\t\to.currentFrame = this.currentFrame;\n\t\t\to.currentAnimation = this.currentAnimation;\n\t\t\to.paused = this.paused;\n\t\t\to.currentAnimationFrame = this.currentAnimationFrame;\n\t\t\to.framerate = this.framerate;\n\t\t\t\n\t\t\to._animation = this._animation;\n\t\t\to._currentFrame = this._currentFrame;\n\t\t\to._skipAdvance = this._skipAdvance;\n\t\t\treturn o;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n\t\t * ticks.\n\t\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t\t * @protected\n\t\t * @method _tick\n\t\t **/\n\t\tp._tick = function(evtObj) {\n\t\t\tif (!this.paused) {\n\t\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\n\t\t\t\tthis._skipAdvance = false;\n\t\t\t}\n\t\t\tthis.DisplayObject__tick(evtObj);\n\t\t};\n\n\n\t\t/**\n\t\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n\t\t * @protected\n\t\t * @method _normalizeFrame\n\t\t **/\n\t\tp._normalizeFrame = function(frameDelta) {\n\t\t\tframeDelta = frameDelta || 0;\n\t\t\tvar animation = this._animation;\n\t\t\tvar paused = this.paused;\n\t\t\tvar frame = this._currentFrame;\n\t\t\tvar l;\n\t\t\t\n\t\t\tif (animation) {\n\t\t\t\tvar speed = animation.speed || 1;\n\t\t\t\tvar animFrame = this.currentAnimationFrame;\n\t\t\t\tl = animation.frames.length;\n\t\t\t\tif (animFrame + frameDelta * speed >= l) {\n\t\t\t\t\tvar next = animation.next;\n\t\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n\t\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (next) {\n\t\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\n\t\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// end.\n\t\t\t\t\t\tthis.paused = true;\n\t\t\t\t\t\tanimFrame = animation.frames.length - 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tanimFrame += frameDelta * speed;\n\t\t\t\t}\n\t\t\t\tthis.currentAnimationFrame = animFrame;\n\t\t\t\tthis._currentFrame = animation.frames[animFrame | 0];\n\t\t\t} else {\n\t\t\t\tframe = (this._currentFrame += frameDelta);\n\t\t\t\tl = this.spriteSheet.getNumFrames();\n\t\t\t\tif (frame >= l && l > 0) {\n\t\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n\t\t\t\t\t\t// looped.\n\t\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tframe = this._currentFrame | 0;\n\t\t\tif (this.currentFrame != frame) {\n\t\t\t\tthis.currentFrame = frame;\n\t\t\t\tthis.dispatchEvent(\"change\");\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n\t\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n\t\t * @property _dispatchAnimationEnd\n\t\t * @private\n\t\t * @type {Function}\n\t\t **/\n\t\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\n\t\t\tvar name = animation ? animation.name : null;\n\t\t\tif (this.hasEventListener(\"animationend\")) {\n\t\t\t\tvar evt = new createjs.Event(\"animationend\");\n\t\t\t\tevt.name = name;\n\t\t\t\tevt.next = next;\n\t\t\t\tthis.dispatchEvent(evt);\n\t\t\t}\n\t\t\t// did the animation get changed in the event stack?:\n\t\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\n\t\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n\t\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\n\t\t\treturn changed;\n\t\t};\n\n\t\t/**\n\t\t * Moves the playhead to the specified frame number or animation.\n\t\t * @method _goto\n\t\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n\t\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n\t\t * @protected\n\t\t **/\n\t\tp._goto = function(frameOrAnimation, frame) {\n\t\t\tthis.currentAnimationFrame = 0;\n\t\t\tif (isNaN(frameOrAnimation)) {\n\t\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\n\t\t\t\tif (data) {\n\t\t\t\t\tthis._animation = data;\n\t\t\t\t\tthis.currentAnimation = frameOrAnimation;\n\t\t\t\t\tthis._normalizeFrame(frame);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.currentAnimation = this._animation = null;\n\t\t\t\tthis._currentFrame = frameOrAnimation;\n\t\t\t\tthis._normalizeFrame();\n\t\t\t}\n\t\t};\n\n\n\t\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// Shape.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n\t\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n\t\t * instances to display the same vector graphics with different positions or transforms.\n\t\t *\n\t\t * If the vector art will not\n\t\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n\t\t * rendering cost.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t\t *      var shape = new createjs.Shape(graphics);\n\t\t *\n\t\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n\t\t *      var shape = new createjs.Shape();\n\t\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t\t *\n\t\t * @class Shape\n\t\t * @extends DisplayObject\n\t\t * @constructor\n\t\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n\t\t **/\n\t\tfunction Shape(graphics) {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The graphics instance to display.\n\t\t\t * @property graphics\n\t\t\t * @type Graphics\n\t\t\t **/\n\t\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\n\t\t}\n\t\tvar p = createjs.extend(Shape, createjs.DisplayObject);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t\t};\n\n\t\t/**\n\t\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n\t\t * the draw was handled (useful for overriding functionality).\n\t\t *\n\t\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\tthis.graphics.draw(ctx, this);\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n\t\t * their defaults (for example .parent).\n\t\t * @method clone\n\t\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n\t\t * cloned. If false, the Graphics instance will be shared with the new Shape.\n\t\t **/\n\t\tp.clone = function(recursive) {\n\t\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\n\t\t\treturn  this._cloneProps(new Shape(g));\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Shape (name=\"+  this.name +\")]\";\n\t\t};\n\n\n\t\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// Text.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n\t\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n\t\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n\t\t *\n\t\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n\t\t * multiple font styles, you will need to create multiple text instances, and position them manually.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n\t\t *      text.x = 100;\n\t\t *      text.textBaseline = \"alphabetic\";\n\t\t *\n\t\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n\t\t * before it can be displayed.\n\t\t *\n\t\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n\t\t * browsers will render Text exactly the same.\n\t\t * @class Text\n\t\t * @extends DisplayObject\n\t\t * @constructor\n\t\t * @param {String} [text] The text to display.\n\t\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n\t\t * 36px Arial\").\n\t\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n\t\t * \"#F00\", \"red\", or \"#FF0000\").\n\t\t **/\n\t\tfunction Text(text, font, color) {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The text to display.\n\t\t\t * @property text\n\t\t\t * @type String\n\t\t\t **/\n\t\t\tthis.text = text;\n\t\t\n\t\t\t/**\n\t\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n\t\t\t * @property font\n\t\t\t * @type String\n\t\t\t **/\n\t\t\tthis.font = font;\n\t\t\n\t\t\t/**\n\t\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n\t\t\t * It will also accept valid canvas fillStyle values.\n\t\t\t * @property color\n\t\t\t * @type String\n\t\t\t **/\n\t\t\tthis.color = color;\n\t\t\n\t\t\t/**\n\t\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n\t\t\t * information view the\n\t\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t\t * whatwg spec</a>. Default is \"left\".\n\t\t\t * @property textAlign\n\t\t\t * @type String\n\t\t\t **/\n\t\t\tthis.textAlign = \"left\";\n\t\t\n\t\t\t/**\n\t\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n\t\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t\t * whatwg spec</a>. Default is \"top\".\n\t\t\t * @property textBaseline\n\t\t\t * @type String\n\t\t\t*/\n\t\t\tthis.textBaseline = \"top\";\n\t\t\n\t\t\t/**\n\t\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n\t\t\t * shrunk to make it fit in this width. For detailed information view the\n\t\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t\t * whatwg spec</a>.\n\t\t\t * @property maxWidth\n\t\t\t * @type Number\n\t\t\t*/\n\t\t\tthis.maxWidth = null;\n\t\t\n\t\t\t/**\n\t\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n\t\t\t * @property outline\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.outline = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n\t\t\t * the value of getMeasuredLineHeight is used.\n\t\t\t * @property lineHeight\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.lineHeight = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n\t\t\t * the text will not be wrapped.\n\t\t\t * @property lineWidth\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.lineWidth = null;\n\t\t}\n\t\tvar p = createjs.extend(Text, createjs.DisplayObject);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\t\n\t// static properties:\n\t\t/**\n\t\t * @property _workingContext\n\t\t * @type CanvasRenderingContext2D\n\t\t * @private\n\t\t **/\n\t\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\t\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\n\t\t\n\t\t\n\t// constants:\n\t\t/**\n\t\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n\t\t * @property H_OFFSETS\n\t\t * @type Object\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\n\t\t\n\t\t/**\n\t\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n\t\t * @property H_OFFSETS\n\t\t * @type Object\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t\t};\n\n\t\t/**\n\t\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\n\t\t\tvar col = this.color || \"#000\";\n\t\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\n\t\t\telse { ctx.fillStyle = col; }\n\t\t\t\n\t\t\tthis._drawText(this._prepContext(ctx));\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n\t\t * @method getMeasuredWidth\n\t\t * @return {Number} The measured, untransformed width of the text.\n\t\t **/\n\t\tp.getMeasuredWidth = function() {\n\t\t\treturn this._getMeasuredWidth(this.text);\n\t\t};\n\n\t\t/**\n\t\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n\t\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n\t\t * @method getMeasuredLineHeight\n\t\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n\t\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n\t\t **/\n\t\tp.getMeasuredLineHeight = function() {\n\t\t\treturn this._getMeasuredWidth(\"M\")*1.2;\n\t\t};\n\n\t\t/**\n\t\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n\t\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n\t\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\n\t\t * @method getMeasuredHeight\n\t\t * @return {Number} The approximate height of the untransformed multi-line text.\n\t\t **/\n\t\tp.getMeasuredHeight = function() {\n\t\t\treturn this._drawText(null,{}).height;\n\t\t};\n\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tp.getBounds = function() {\n\t\t\tvar rect = this.DisplayObject_getBounds();\n\t\t\tif (rect) { return rect; }\n\t\t\tif (this.text == null || this.text === \"\") { return null; }\n\t\t\tvar o = this._drawText(null, {});\n\t\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\n\t\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\n\t\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\t\treturn this._rectangle.setValues(x, y, w, o.height);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n\t\t * of the drawn text. The lines property contains an array of strings, one for\n\t\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n\t\t * whitespace removed.\n\t\t * @method getMetrics\n\t\t * @return {Object} An object with width, height, and lines properties.\n\t\t **/\n\t\tp.getMetrics = function() {\n\t\t\tvar o = {lines:[]};\n\t\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n\t\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\t\treturn this._drawText(null, o, o.lines);\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of the Text instance.\n\t\t * @method clone\n\t\t * @return {Text} a clone of the Text instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _cloneProps\n\t\t * @param {Text} o\n\t\t * @protected\n\t\t * @return {Text} o\n\t\t **/\n\t\tp._cloneProps = function(o) {\n\t\t\tthis.DisplayObject__cloneProps(o);\n\t\t\to.textAlign = this.textAlign;\n\t\t\to.textBaseline = this.textBaseline;\n\t\t\to.maxWidth = this.maxWidth;\n\t\t\to.outline = this.outline;\n\t\t\to.lineHeight = this.lineHeight;\n\t\t\to.lineWidth = this.lineWidth;\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * @method _getWorkingContext\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t * @return {CanvasRenderingContext2D}\n\t\t * @protected\n\t\t **/\n\t\tp._prepContext = function(ctx) {\n\t\t\tctx.font = this.font||\"10px sans-serif\";\n\t\t\tctx.textAlign = this.textAlign||\"left\";\n\t\t\tctx.textBaseline = this.textBaseline||\"top\";\n\t\t\treturn ctx;\n\t\t};\n\n\t\t/**\n\t\t * Draws multiline text.\n\t\t * @method _drawText\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t * @param {Object} o\n\t\t * @param {Array} lines\n\t\t * @return {Object}\n\t\t * @protected\n\t\t **/\n\t\tp._drawText = function(ctx, o, lines) {\n\t\t\tvar paint = !!ctx;\n\t\t\tif (!paint) {\n\t\t\t\tctx = Text._workingContext;\n\t\t\t\tctx.save();\n\t\t\t\tthis._prepContext(ctx);\n\t\t\t}\n\t\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\t\n\t\t\tvar maxW = 0, count = 0;\n\t\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n\t\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\n\t\t\t\tvar str = hardLines[i];\n\t\t\t\tvar w = null;\n\t\t\t\t\n\t\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n\t\t\t\t\t// text wrapping:\n\t\t\t\t\tvar words = str.split(/(\\s)/);\n\t\t\t\t\tstr = words[0];\n\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\n\t\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\n\t\t\t\t\t\t// Line needs to wrap:\n\t\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\n\t\t\t\t\t\tif (w + wordW > this.lineWidth) {\n\t\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\t\t\t\tstr = words[j+1];\n\t\t\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstr += words[j] + words[j+1];\n\t\t\t\t\t\t\tw += wordW;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\n\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\tcount++;\n\t\t\t}\n\t\t\t\n\t\t\tif (o) {\n\t\t\t\to.width = maxW;\n\t\t\t\to.height = count*lineHeight;\n\t\t\t}\n\t\t\tif (!paint) { ctx.restore(); }\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * @method _drawTextLine\n\t\t * @param {CanvasRenderingContext2D} ctx\n\t\t * @param {String} text\n\t\t * @param {Number} y\n\t\t * @protected\n\t\t **/\n\t\tp._drawTextLine = function(ctx, text, y) {\n\t\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n\t\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\t};\n\t\t\n\t\t\n\t\t/**\n\t\t * @method _getMeasuredWidth\n\t\t * @param {String} text\n\t\t * @protected\n\t\t **/\n\t\tp._getMeasuredWidth = function(text) {\n\t\t\tvar ctx = Text._workingContext;\n\t\t\tctx.save();\n\t\t\tvar w = this._prepContext(ctx).measureText(text).width;\n\t\t\tctx.restore();\n\t\t\treturn w;\n\t\t};\n\n\n\t\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// BitmapText.js\n\t//##############################################################################\n\n\t(function () {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\n\t\t * using new line characters, but automatic wrapping is not supported. See the \n\t\t * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n\t\t * property for more information on defining glyphs.\n\t\t * \n\t\t * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\n\t\t * As such, methods like addChild and removeChild are disabled.\n\t\t * @class BitmapText\n\t\t * @extends DisplayObject\n\t\t * @param {String} [text=\"\"] The text to display.\n\t\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n\t\t * @constructor\n\t\t **/\n\t\tfunction BitmapText(text, spriteSheet) {\n\t\t\tthis.Container_constructor();\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The text to display.\n\t\t\t * @property text\n\t\t\t * @type String\n\t\t\t * @default \"\"\n\t\t\t **/\n\t\t\tthis.text = text||\"\";\n\t\t\t\n\t\t\t/**\n\t\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n\t\t\t * should have a single frame animation defined in the sprite sheet named the same as\n\t\t\t * corresponding character. For example, the following animation definition:\n\t\t\t *\n\t\t\t * \t\t\"A\": {frames: [0]}\n\t\t\t *\n\t\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n\t\t\t * is also acceptable:\n\t\t\t * \n\t\t\t * \t\t\"A\": 0\n\t\t\t *\n\t\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\n\t\t\t * try to use the alternate case (upper or lower).\n\t\t\t *\n\t\t\t * See SpriteSheet for more information on defining sprite sheet data.\n\t\t\t * @property spriteSheet\n\t\t\t * @type SpriteSheet\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.spriteSheet = spriteSheet;\n\t\t\n\t\t\t/**\n\t\t\t * The height of each line of text. If 0, then it will use a line height calculated\n\t\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n\t\t\t * those characters are not defined, it will use the height of the first frame of the\n\t\t\t * sprite sheet.\n\t\t\t * @property lineHeight\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.lineHeight = 0;\n\t\t\n\t\t\t/**\n\t\t\t * This spacing (in pixels) will be added after each character in the output.\n\t\t\t * @property letterSpacing\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.letterSpacing = 0;\n\t\t\n\t\t\t/**\n\t\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\n\t\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n\t\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n\t\t\t * those characters are not defined, it will use the width of the first frame of the\n\t\t\t * sprite sheet.\n\t\t\t * @property spaceWidth\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t **/\n\t\t\tthis.spaceWidth = 0;\n\t\t\t\n\t\t\t\n\t\t// private properties:\n\t\t \t/**\n\t\t\t * @property _oldProps\n\t\t\t * @type Object\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\n\t\t}\n\t\tvar p = createjs.extend(BitmapText, createjs.Container);\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t// static properties:\n\t\t/**\n\t\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n\t\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n\t\t * retained, slightly increasing memory use, but reducing instantiation.\n\t\t * @property maxPoolSize\n\t\t * @type Number\n\t\t * @static\n\t\t * @default 100\n\t\t **/\n\t\tBitmapText.maxPoolSize = 100;\n\t\t\n\t\t/**\n\t\t * Sprite object pool.\n\t\t * @type {Array}\n\t\t * @static\n\t\t * @private\n\t\t */\n\t\tBitmapText._spritePool = [];\n\n\t\t\n\t// public methods:\n\t\t/**\n\t\t * Docced in superclass.\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\n\t\t\tthis._updateText();\n\t\t\tthis.Container_draw(ctx, ignoreCache);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Docced in superclass.\n\t\t **/\n\t\tp.getBounds = function() {\n\t\t\tthis._updateText();\n\t\t\treturn this.Container_getBounds();\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n\t\t};\n\t\t\n\t\tp.clone = function() {\n\t\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n\t\t};\n\t\t\n\t\t/**\n\t\t * <strong>Disabled in BitmapText.</strong>\n\t\t * @method addChild\n\t\t **/\n\t\t/**\n\t\t * <strong>Disabled in BitmapText.</strong>\n\t\t * @method addChildAt\n\t\t **/\n\t\t/**\n\t\t * <strong>Disabled in BitmapText.</strong>\n\t\t * @method removeChild\n\t\t **/\n\t\t/**\n\t\t * <strong>Disabled in BitmapText.</strong>\n\t\t * @method removeChildAt\n\t\t **/\n\t\t/**\n\t\t * <strong>Disabled in BitmapText.</strong>\n\t\t * @method removeAllChildren\n\t\t **/\n\t\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\n\n\n\t// private methods:\n\t \t/**\n\t\t * @method _cloneProps\n\t\t * @param {BitmapText} o\n\t\t * @return {BitmapText} o\n\t\t * @protected\n\t\t **/\n\t\tp._cloneProps = function(o) {\n\t\t\tthis.Container__cloneProps(o);\n\t\t\to.lineHeight = this.lineHeight;\n\t\t\to.letterSpacing = this.letterSpacing;\n\t\t\to.spaceWidth = this.spaceWidth;\n\t\t\treturn o;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getFrameIndex\n\t\t * @param {String} character\n\t\t * @param {SpriteSheet} spriteSheet\n\t\t * @return {Number}\n\t\t * @protected\n\t\t **/\n\t\tp._getFrameIndex = function(character, spriteSheet) {\n\t\t\tvar c, o = spriteSheet.getAnimation(character);\n\t\t\tif (!o) {\n\t\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\n\t\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\n\t\t\t}\n\t\t\treturn o && o.frames[0];\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getFrame\n\t\t * @param {String} character\n\t\t * @param {SpriteSheet} spriteSheet\n\t\t * @return {Object}\n\t\t * @protected\n\t\t **/\n\t\tp._getFrame = function(character, spriteSheet) {\n\t\t\tvar index = this._getFrameIndex(character, spriteSheet);\n\t\t\treturn index == null ? index : spriteSheet.getFrame(index);\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getLineHeight\n\t\t * @param {SpriteSheet} ss\n\t\t * @return {Number}\n\t\t * @protected\n\t\t **/\n\t\tp._getLineHeight = function(ss) {\n\t\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\n\t\t\treturn frame ? frame.rect.height : 1;\n\t\t};\n\t\t/**\n\t\t * @method _getSpaceWidth\n\t\t * @param {SpriteSheet} ss\n\t\t * @return {Number}\n\t\t * @protected\n\t\t **/\n\t\tp._getSpaceWidth = function(ss) {\n\t\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\n\t\t\treturn frame ? frame.rect.width : 1;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _drawText\n\t\t * @protected\n\t\t **/\n\t\tp._updateText = function() {\n\t\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\n\t\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\n\t\t\t\n\t\t\tfor (var n in o) {\n\t\t\t\tif (o[n] != this[n]) {\n\t\t\t\t\to[n] = this[n];\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!change) { return; }\n\t\t\t\n\t\t\tvar hasSpace = !!this._getFrame(\" \", ss);\n\t\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\n\t\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\n\t\t\t\n\t\t\tfor(var i=0, l=this.text.length; i<l; i++) {\n\t\t\t\tvar character = this.text.charAt(i);\n\t\t\t\tif (character == \" \" && !hasSpace) {\n\t\t\t\t\tx += spaceW;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\n\t\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty += lineH;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar index = this._getFrameIndex(character, ss);\n\t\t\t\tif (index == null) { continue; }\n\t\t\t\t\n\t\t\t\tif (childIndex < numKids) {\n\t\t\t\t\tsprite = kids[childIndex];\n\t\t\t\t} else {\n\t\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n\t\t\t\t\tsprite.parent = this;\n\t\t\t\t\tnumKids++;\n\t\t\t\t}\n\t\t\t\tsprite.spriteSheet = ss;\n\t\t\t\tsprite.gotoAndStop(index);\n\t\t\t\tsprite.x = x;\n\t\t\t\tsprite.y = y;\n\t\t\t\tchildIndex++;\n\t\t\t\t\n\t\t\t\tx += sprite.getBounds().width + this.letterSpacing;\n\t\t\t}\n\t\t\twhile (numKids > childIndex) {\n\t\t\t\t // faster than removeChild.\n\t\t\t\tpool.push(sprite = kids.pop());\n\t\t\t\tsprite.parent = null;\n\t\t\t\tnumKids--;\n\t\t\t}\n\t\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\n\t\t};\n\n\n\t\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\n\t}());\n\n\t//##############################################################################\n\t// MovieClip.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n\t\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\n\t\t * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\n\t\t * in the main EaselJS library.\n\t\t *\n\t\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n\t\t * been made to support time-based timelines in the future.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n\t\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvas\");\n\t\t *      createjs.Ticker.addEventListener(\"tick\", stage);\n\t\t *\n\t\t *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\n\t\t *      stage.addChild(mc);\n\t\t *\n\t\t *      var child1 = new createjs.Shape(\n\t\t *          new createjs.Graphics().beginFill(\"#999999\")\n\t\t *              .drawCircle(30,30,30));\n\t\t *      var child2 = new createjs.Shape(\n\t\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n\t\t *              .drawCircle(30,30,30));\n\t\t *\n\t\t *      mc.timeline.addTween(\n\t\t *          createjs.Tween.get(child1)\n\t\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n\t\t *      mc.timeline.addTween(\n\t\t *          createjs.Tween.get(child2)\n\t\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n\t\t *\n\t\t *      mc.gotoAndPlay(\"start\");\n\t\t *\n\t\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n\t\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n\t\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n\t\t *\n\t\t * @class MovieClip\n\t\t * @main MovieClip\n\t\t * @extends Container\n\t\t * @constructor\n\t\t * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\n\t\t * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\n\t\t * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\n\t\t * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\n\t\t * property.\n\t\t * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\n\t\t * property. The default is `true`.\n\t\t * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\n\t\t * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\n\t\t **/\n\t\tfunction MovieClip(mode, startPosition, loop, labels) {\n\t\t\tthis.Container_constructor();\n\t\t\t!MovieClip.inited&&MovieClip.init(); // static init\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n\t\t\t * See each constant for a description of the behaviour.\n\t\t\t * @property mode\n\t\t\t * @type String\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.mode = mode||MovieClip.INDEPENDENT;\n\t\t\n\t\t\t/**\n\t\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n\t\t\t * @property startPosition\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.startPosition = startPosition || 0;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\n\t\t\t * @property loop\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t */\n\t\t\tthis.loop = loop;\n\t\t\n\t\t\t/**\n\t\t\t * The current frame of the movieclip.\n\t\t\t * @property currentFrame\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.currentFrame = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n\t\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n\t\t\t * instances to the timeline.\n\t\t\t *\n\t\t\t * <h4>Example</h4>\n\t\t\t *\n\t\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n\t\t\t *      var mc = new createjs.MovieClip();\n\t\t\t *      mc.timeline.addTween(tween);\n\t\t\t *\n\t\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\n\t\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n\t\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n\t\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\n\t\t\t *\n\t\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\n\t\t\t *          .wait(1).to({_off:true})\n\t\t\t *          .wait(1).to({_off:false});\n\t\t\t *\n\t\t\t * @property timeline\n\t\t\t * @type Timeline\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.timeline = new createjs.Timeline(null, labels, {paused:true, position:startPosition, useTicks:true});\n\t\t\n\t\t\t/**\n\t\t\t * If true, the MovieClip's position will not advance when ticked.\n\t\t\t * @property paused\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.paused = false;\n\t\t\n\t\t\t/**\n\t\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n\t\t\t * @property actionsEnabled\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t */\n\t\t\tthis.actionsEnabled = true;\n\t\t\n\t\t\t/**\n\t\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n\t\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n\t\t\t * <br><br>\n\t\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\n\t\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\n\t\t\t * you can manually change the frame it is on, without worrying that it will be reset\n\t\t\t * automatically.\n\t\t\t * @property autoReset\n\t\t\t * @type Boolean\n\t\t\t * @default true\n\t\t\t */\n\t\t\tthis.autoReset = true;\n\t\t\t\n\t\t\t/**\n\t\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n\t\t\t * @property frameBounds\n\t\t\t * @type Array\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.frameBounds = this.frameBounds||null; // TODO: Deprecated. This is for backwards support of FlashCC\n\t\t\t\n\t\t\t/**\n\t\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n\t\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t\t * framerate.\n\t\t\t *\n\t\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n\t\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t\t * vary slightly between frames.\n\t\t\t *\n\t\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t\t * @property framerate\n\t\t\t * @type {Number}\n\t\t\t * @default null\n\t\t\t **/\n\t\t\tthis.framerate = null;\n\t\t\t\n\t\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _synchOffset\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._synchOffset = 0;\n\t\t\n\t\t\t/**\n\t\t\t * @property _prevPos\n\t\t\t * @type Number\n\t\t\t * @default -1\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\t\t\n\t\t\t/**\n\t\t\t * @property _prevPosition\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._prevPosition = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\n\t\t\t * @property _t\n\t\t\t * @type Number\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._t = 0;\n\t\t\n\t\t\t/**\n\t\t\t * List of display objects that are actively being managed by the MovieClip.\n\t\t\t * @property _managed\n\t\t\t * @type Object\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._managed = {};\n\t\t}\n\t\tvar p = createjs.extend(MovieClip, createjs.Container);\n\n\n\t// constants:\n\t\t/**\n\t\t * The MovieClip will advance independently of its parent, even if its parent is paused.\n\t\t * This is the default mode.\n\t\t * @property INDEPENDENT\n\t\t * @static\n\t\t * @type String\n\t\t * @default \"independent\"\n\t\t * @readonly\n\t\t **/\n\t\tMovieClip.INDEPENDENT = \"independent\";\n\n\t\t/**\n\t\t * The MovieClip will only display a single frame (as determined by the startPosition property).\n\t\t * @property SINGLE_FRAME\n\t\t * @static\n\t\t * @type String\n\t\t * @default \"single\"\n\t\t * @readonly\n\t\t **/\n\t\tMovieClip.SINGLE_FRAME = \"single\";\n\n\t\t/**\n\t\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n\t\t * the parent MovieClip.\n\t\t * @property SYNCHED\n\t\t * @static\n\t\t * @type String\n\t\t * @default \"synched\"\n\t\t * @readonly\n\t\t **/\n\t\tMovieClip.SYNCHED = \"synched\";\n\t\t\n\t\t\n\t// static properties:\n\t\tMovieClip.inited = false;\n\t\t\n\t\t\n\t// static methods:\n\t\tMovieClip.init = function() {\n\t\t\tif (MovieClip.inited) { return; }\n\t\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n\t\t\tMovieClipPlugin.install();\n\t\t\tMovieClip.inited = true;\n\t\t};\n\t\t\n\t\t\n\t// getter / setters:\n\t\t/**\n\t\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n\t\t * @method getLabels\n\t\t * @return {Array}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getLabels = function() {\n\t\t\treturn this.timeline.getLabels();\n\t\t};\n\t\t\n\t\t/**\n\t\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n\t\t * @method getCurrentLabel\n\t\t * @return {String}\n\t\t * @deprecated\n\t\t **/\n\t\tp.getCurrentLabel = function() {\n\t\t\tthis._updateTimeline();\n\t\t\treturn this.timeline.getCurrentLabel();\n\t\t};\n\t\t\n\t\t/**\n\t\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n\t\t * @method getDuration\n\t\t * @return {Number}\n\t\t * @protected\n\t\t **/\n\t\tp.getDuration = function() {\n\t\t\treturn this.timeline.duration;\n\t\t};\n\n\t\t/**\n\t\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n\t\t * Shortcut to TweenJS: Timeline.getLabels();\n\t\t * @property labels\n\t\t * @type {Array}\n\t\t * @readonly\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\n\t\t * for more information.\n\t\t * @property currentLabel\n\t\t * @type {String}\n\t\t * @readonly\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\n\t\t * and provided for Flash API compatibility.\n\t\t * @property totalFrames\n\t\t * @type {Number}\n\t\t * @readonly\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Returns the duration of this MovieClip in seconds or ticks.\n\t\t * @property duration\n\t\t * @type {Number}\n\t\t * @readonly\n\t\t **/\n\t\ttry {\n\t\t\tObject.defineProperties(p, {\n\t\t\t\tlabels: { get: p.getLabels },\n\t\t\t\tcurrentLabel: { get: p.getCurrentLabel },\n\t\t\t\ttotalFrames: { get: p.getDuration },\n\t\t\t\tduration: { get: p.getDuration }\n\t\t\t});\n\t\t} catch (e) {}\n\n\n\t// public methods:\n\t\t/**\n\t\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t\t * @method initialize\n\t\t * @deprecated in favour of `createjs.promote()`\n\t\t **/\n\t\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\n\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t **/\n\t\tp.isVisible = function() {\n\t\t\t// children are placed in draw, so we can't determine if we have content.\n\t\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t **/\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\t// draw to cache first:\n\t\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\tthis._updateTimeline();\n\t\t\tthis.Container_draw(ctx, ignoreCache);\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Sets paused to false.\n\t\t * @method play\n\t\t **/\n\t\tp.play = function() {\n\t\t\tthis.paused = false;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Sets paused to true.\n\t\t * @method stop\n\t\t **/\n\t\tp.stop = function() {\n\t\t\tthis.paused = true;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Advances this movie clip to the specified position or label and sets paused to false.\n\t\t * @method gotoAndPlay\n\t\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t\t **/\n\t\tp.gotoAndPlay = function(positionOrLabel) {\n\t\t\tthis.paused = false;\n\t\t\tthis._goto(positionOrLabel);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Advances this movie clip to the specified position or label and sets paused to true.\n\t\t * @method gotoAndStop\n\t\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\n\t\t **/\n\t\tp.gotoAndStop = function(positionOrLabel) {\n\t\t\tthis.paused = true;\n\t\t\tthis._goto(positionOrLabel);\n\t\t};\n\t\t\n\t\t/**\n\t\t * Advances the playhead. This occurs automatically each tick by default.\n\t\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n\t\t * @method advance\n\t\t*/\n\t\tp.advance = function(time) {\n\t\t\t// TODO: should we worry at all about clips who change their own modes via frame scripts?\n\t\t\tvar independent = MovieClip.INDEPENDENT;\n\t\t\tif (this.mode != independent) { return; }\n\t\t\t\n\t\t\tvar o=this, fps = o.framerate;\n\t\t\twhile ((o = o.parent) && fps == null) {\n\t\t\t\tif (o.mode == independent) { fps = o._framerate; }\n\t\t\t}\n\t\t\tthis._framerate = fps;\n\t\t\t\n\t\t\tvar t = (fps != null && fps != -1 && time != null) ? time/(1000/fps) + this._t : 1;\n\t\t\tvar frames = t|0;\n\t\t\tthis._t = t-frames; // leftover time\n\t\t\t\n\t\t\twhile (!this.paused && frames--) {\n\t\t\t\tthis._prevPosition = (this._prevPos < 0) ? 0 : this._prevPosition+1;\n\t\t\t\tthis._updateTimeline();\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * MovieClip instances cannot be cloned.\n\t\t * @method clone\n\t\t **/\n\t\tp.clone = function() {\n\t\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n\t\t\tthrow(\"MovieClip cannot be cloned.\")\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _tick\n\t\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t\t * function.\n\t\t * @protected\n\t\t **/\n\t\tp._tick = function(evtObj) {\n\t\t\tthis.advance(evtObj&&evtObj.delta);\n\t\t\tthis.Container__tick(evtObj);\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _goto\n\t\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t\t * @protected\n\t\t **/\n\t\tp._goto = function(positionOrLabel) {\n\t\t\tvar pos = this.timeline.resolve(positionOrLabel);\n\t\t\tif (pos == null) { return; }\n\t\t\t// prevent _updateTimeline from overwriting the new position because of a reset:\n\t\t\tif (this._prevPos == -1) { this._prevPos = NaN; }\n\t\t\tthis._prevPosition = pos;\n\t\t\tthis._t = 0;\n\t\t\tthis._updateTimeline();\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _reset\n\t\t * @private\n\t\t **/\n\t\tp._reset = function() {\n\t\t\tthis._prevPos = -1;\n\t\t\tthis._t = this.currentFrame = 0;\n\t\t\tthis.paused = false;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _updateTimeline\n\t\t * @protected\n\t\t **/\n\t\tp._updateTimeline = function() {\n\t\t\tvar tl = this.timeline;\n\t\t\tvar synched = this.mode != MovieClip.INDEPENDENT;\n\t\t\ttl.loop = (this.loop==null) ? true : this.loop;\n\t\t\t\n\t\t\tvar pos = synched ? this.startPosition + (this.mode==MovieClip.SINGLE_FRAME?0:this._synchOffset) : (this._prevPos < 0 ? 0 : this._prevPosition);\n\t\t\tvar mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\n\t\t\t\n\t\t\t// pre-assign currentFrame so it is available to frame scripts:\n\t\t\tthis.currentFrame = tl._calcPosition(pos);\n\t\t\t\n\t\t\t// update timeline position, ignoring actions if this is a graphic.\n\t\t\ttl.setPosition(pos, mode);\n\n\t\t\tthis._prevPosition = tl._prevPosition;\n\t\t\tif (this._prevPos == tl._prevPos) { return; }\n\t\t\tthis.currentFrame = this._prevPos = tl._prevPos;\n\n\t\t\tfor (var n in this._managed) { this._managed[n] = 1; }\n\n\t\t\tvar tweens = tl._tweens;\n\t\t\tfor (var i=0, l=tweens.length; i<l; i++) {\n\t\t\t\tvar tween = tweens[i];\n\t\t\t\tvar target = tween._target;\n\t\t\t\tif (target == this || tween.passive) { continue; } // TODO: this assumes actions tween has this as the target. Valid?\n\t\t\t\tvar offset = tween._stepPosition;\n\n\t\t\t\tif (target instanceof createjs.DisplayObject) {\n\t\t\t\t\t// motion tween.\n\t\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t\t} else {\n\t\t\t\t\t// state tween.\n\t\t\t\t\tthis._setState(target.state, offset);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar kids = this.children;\n\t\t\tfor (i=kids.length-1; i>=0; i--) {\n\t\t\t\tvar id = kids[i].id;\n\t\t\t\tif (this._managed[id] == 1) {\n\t\t\t\t\tthis.removeChildAt(i);\n\t\t\t\t\tdelete(this._managed[id]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _setState\n\t\t * @param {Array} state\n\t\t * @param {Number} offset\n\t\t * @protected\n\t\t **/\n\t\tp._setState = function(state, offset) {\n\t\t\tif (!state) { return; }\n\t\t\tfor (var i=state.length-1;i>=0;i--) {\n\t\t\t\tvar o = state[i];\n\t\t\t\tvar target = o.t;\n\t\t\t\tvar props = o.p;\n\t\t\t\tfor (var n in props) { target[n] = props[n]; }\n\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Adds a child to the timeline, and sets it up as a managed child.\n\t\t * @method _addManagedChild\n\t\t * @param {MovieClip} child The child MovieClip to manage\n\t\t * @param {Number} offset\n\t\t * @private\n\t\t **/\n\t\tp._addManagedChild = function(child, offset) {\n\t\t\tif (child._off) { return; }\n\t\t\tthis.addChildAt(child,0);\n\n\t\t\tif (child instanceof MovieClip) {\n\t\t\t\tchild._synchOffset = offset;\n\t\t\t\t// TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n\t\t\t\tif (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) { child._reset(); }\n\t\t\t}\n\t\t\tthis._managed[child.id] = 2;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _getBounds\n\t\t * @param {Matrix2D} matrix\n\t\t * @param {Boolean} ignoreTransform\n\t\t * @return {Rectangle}\n\t\t * @protected\n\t\t **/\n\t\tp._getBounds = function(matrix, ignoreTransform) {\n\t\t\tvar bounds = this.DisplayObject_getBounds();\n\t\t\tif (!bounds) {\n\t\t\t\tthis._updateTimeline();\n\t\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\n\t\t\t}\n\t\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\t\treturn this.Container__getBounds(matrix, ignoreTransform);\n\t\t};\n\n\n\t\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n\n\n\t// MovieClipPlugin for TweenJS:\n\t\t/**\n\t\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n\t\t * property from tweening.\n\t\t * @private\n\t\t * @class MovieClipPlugin\n\t\t * @constructor\n\t\t **/\n\t\tfunction MovieClipPlugin() {\n\t\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\n\t\t}\n\t\t\n\t\t/**\n\t\t * @method priority\n\t\t * @private\n\t\t **/\n\t\tMovieClipPlugin.priority = 100; // very high priority, should run first\n\n\t\t/**\n\t\t * @method install\n\t\t * @private\n\t\t **/\n\t\tMovieClipPlugin.install = function() {\n\t\t\tcreatejs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method init\n\t\t * @param {Tween} tween\n\t\t * @param {String} prop\n\t\t * @param {String|Number|Boolean} value\n\t\t * @private\n\t\t **/\n\t\tMovieClipPlugin.init = function(tween, prop, value) {\n\t\t\treturn value;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method step\n\t\t * @private\n\t\t **/\n\t\tMovieClipPlugin.step = function() {\n\t\t\t// unused.\n\t\t};\n\n\t\t/**\n\t\t * @method tween\n\t\t * @param {Tween} tween\n\t\t * @param {String} prop\n\t\t * @param {String | Number | Boolean} value\n\t\t * @param {Array} startValues\n\t\t * @param {Array} endValues\n\t\t * @param {Number} ratio\n\t\t * @param {Object} wait\n\t\t * @param {Object} end\n\t\t * @return {*}\n\t\t */\n\t\tMovieClipPlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\n\t\t\tif (!(tween.target instanceof MovieClip)) { return value; }\n\t\t\treturn (ratio == 1 ? endValues[prop] : startValues[prop]);\n\t\t};\n\n\t}());\n\n\t//##############################################################################\n\t// SpriteSheetUtils.js\n\t//##############################################################################\n\n\t(function() {\n\t\t\n\t\t\n\t// constructor:\n\t\t/**\n\t\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n\t\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n\t\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n\t\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n\t\t * @class SpriteSheetUtils\n\t\t * @static\n\t\t **/\n\t\tfunction SpriteSheetUtils() {\n\t\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\n\t\t}\n\n\n\t// private static properties:\n\t\t/**\n\t\t * @property _workingCanvas\n\t\t * @static\n\t\t * @type HTMLCanvasElement | Object\n\t\t * @protected\n\t\t*/\n\t\t/**\n\t\t * @property _workingContext\n\t\t * @static\n\t\t * @type CanvasRenderingContext2D\n\t\t * @protected\n\t\t*/\n\t\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\t\tif (canvas.getContext) {\n\t\t\tSpriteSheetUtils._workingCanvas = canvas;\n\t\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t}\n\n\n\t// public static methods:\n\t\t/**\n\t\t * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\n\t\t * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\n\t\t * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\n\t\t * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\n\t\t * <br/><br/>\n\t\t * For example:<br/>\n\t\t * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\n\t\t * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\n\t\t * <br/><br/>\n\t\t * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\n\t\t * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\n\t\t * which is why addFlippedFrames is available.\n\t\t * @method addFlippedFrames\n\t\t * @static\n\t\t * @param {SpriteSheet} spriteSheet\n\t\t * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\n\t\t * @param {Boolean} vertical If true, vertically flipped frames will be added.\n\t\t * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\n\t\t * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\n\t\t **/\n\t\tSpriteSheetUtils.addFlippedFrames = function(spriteSheet, horizontal, vertical, both) {\n\t\t\tif (!horizontal && !vertical && !both) { return; }\n\n\t\t\tvar count = 0;\n\t\t\tif (horizontal) { SpriteSheetUtils._flip(spriteSheet,++count,true,false); }\n\t\t\tif (vertical) { SpriteSheetUtils._flip(spriteSheet,++count,false,true); }\n\t\t\tif (both) { SpriteSheetUtils._flip(spriteSheet,++count,true,true); }\n\t\t};\n\n\t\t/**\n\t\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n\t\t * to use a spritesheet frame as the source for a bitmap fill.\n\t\t *\n\t\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n\t\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n\t\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n\t\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t\t *\n\t\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n\t\t * @method extractFrame\n\t\t * @static\n\t\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n\t\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n\t\t * name is specified, only the first frame of the animation will be extracted.\n\t\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n\t\t*/\n\t\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\n\t\t\tif (isNaN(frameOrAnimation)) {\n\t\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n\t\t\t}\n\t\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\n\t\t\tif (!data) { return null; }\n\t\t\tvar r = data.rect;\n\t\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\t\tcanvas.width = r.width;\n\t\t\tcanvas.height = r.height;\n\t\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\t\treturn img;\n\t\t};\n\n\t\t/**\n\t\t * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\n\t\t * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\n\t\t * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\n\t\t * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\n\t\t * @method mergeAlpha\n\t\t * @static\n\t\t * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\n\t\t * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\n\t\t * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\n\t\t * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\n\t\t * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\n\t\t*/\n\t\tSpriteSheetUtils.mergeAlpha = function(rgbImage, alphaImage, canvas) {\n\t\t\tif (!canvas) { canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\t\tcanvas.width = Math.max(alphaImage.width, rgbImage.width);\n\t\t\tcanvas.height = Math.max(alphaImage.height, rgbImage.height);\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tctx.save();\n\t\t\tctx.drawImage(rgbImage,0,0);\n\t\t\tctx.globalCompositeOperation = \"destination-in\";\n\t\t\tctx.drawImage(alphaImage,0,0);\n\t\t\tctx.restore();\n\t\t\treturn canvas;\n\t\t};\n\n\n\t// private static methods:\n\t\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\n\t\t\tvar imgs = spriteSheet._images;\n\t\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\t\tvar ctx = SpriteSheetUtils._workingContext;\n\t\t\tvar il = imgs.length/count;\n\t\t\tfor (var i=0;i<il;i++) {\n\t\t\t\tvar src = imgs[i];\n\t\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n\t\t\t\tctx.setTransform(1,0,0,1,0,0);\n\t\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\n\t\t\t\tcanvas.width = src.width;\n\t\t\t\tcanvas.height = src.height;\n\t\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\n\t\t\t\tctx.drawImage(src,0,0);\n\t\t\t\tvar img = document.createElement(\"img\");\n\t\t\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\t\t\t// work around a strange bug in Safari:\n\t\t\t\timg.width = src.width;\n\t\t\t\timg.height = src.height;\n\t\t\t\timgs.push(img);\n\t\t\t}\n\n\t\t\tvar frames = spriteSheet._frames;\n\t\t\tvar fl = frames.length/count;\n\t\t\tfor (i=0;i<fl;i++) {\n\t\t\t\tsrc = frames[i];\n\t\t\t\tvar rect = src.rect.clone();\n\t\t\t\timg = imgs[src.image.__tmp+il*count];\n\n\t\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\n\t\t\t\tif (h) {\n\t\t\t\t\trect.x = img.width-rect.x-rect.width; // update rect\n\t\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\n\t\t\t\t}\n\t\t\t\tif (v) {\n\t\t\t\t\trect.y = img.height-rect.y-rect.height;  // update rect\n\t\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\n\t\t\t\t}\n\t\t\t\tframes.push(frame);\n\t\t\t}\n\n\t\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\n\t\t\tvar names = spriteSheet._animations;\n\t\t\tvar data = spriteSheet._data;\n\t\t\tvar al = names.length/count;\n\t\t\tfor (i=0;i<al;i++) {\n\t\t\t\tvar name = names[i];\n\t\t\t\tsrc = data[name];\n\t\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\n\t\t\t\tif (src.next) { anim.next += sfx; }\n\t\t\t\tframes = src.frames;\n\t\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\n\t\t\t\t\tanim.frames.push(frames[j]+fl*count);\n\t\t\t\t}\n\t\t\t\tdata[anim.name] = anim;\n\t\t\t\tnames.push(anim.name);\n\t\t\t}\n\t\t};\n\n\n\t\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\n\t}());\n\n\t//##############################################################################\n\t// SpriteSheetBuilder.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n\t\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n\t\t * render them at run time as SpriteSheets for better performance.\n\t\t *\n\t\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n\t\t * without locking the UI.\n\t\t *\n\t\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n\t\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n\t\t * @class SpriteSheetBuilder\n\t\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n\t\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n\t\t * @extends EventDispatcher\n\t\t * @constructor\n\t\t **/\n\t\tfunction SpriteSheetBuilder(framerate) {\n\t\t\tthis.EventDispatcher_constructor();\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t\t * dimensions, then additional images will be created as needed.\n\t\t\t * @property maxWidth\n\t\t\t * @type Number\n\t\t\t * @default 2048\n\t\t\t*/\n\t\t\tthis.maxWidth = 2048;\n\t\t\n\t\t\t/**\n\t\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t\t * dimensions, then additional images will be created as needed.\n\t\t\t * @property maxHeight\n\t\t\t * @type Number\n\t\t\t * @default 2048\n\t\t\t **/\n\t\t\tthis.maxHeight = 2048;\n\t\t\n\t\t\t/**\n\t\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n\t\t\t * @property spriteSheet\n\t\t\t * @type SpriteSheet\n\t\t\t **/\n\t\t\tthis.spriteSheet = null;\n\t\t\n\t\t\t/**\n\t\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n\t\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n\t\t\t * to the a specific device resolution (ex. tablet vs mobile).\n\t\t\t * @property scale\n\t\t\t * @type Number\n\t\t\t * @default 1\n\t\t\t **/\n\t\t\tthis.scale = 1;\n\t\t\n\t\t\t/**\n\t\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n\t\t\t* @property padding\n\t\t\t* @type Number\n\t\t\t* @default 1\n\t\t\t**/\n\t\t\tthis.padding = 1;\n\t\t\n\t\t\t/**\n\t\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n\t\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n\t\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n\t\t\t * Defaults to 0.3.\n\t\t\t * @property timeSlice\n\t\t\t * @type Number\n\t\t\t * @default 0.3\n\t\t\t **/\n\t\t\tthis.timeSlice = 0.3;\n\t\t\n\t\t\t/**\n\t\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n\t\t\t * been initiated.\n\t\t\t * @property progress\n\t\t\t * @type Number\n\t\t\t * @default -1\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.progress = -1;\n\n\t\t\t/**\n\t\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n\t\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t\t * framerate.\n\t\t\t * @property framerate\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.framerate = framerate || 0;\n\t\t\n\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _frames\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._frames = [];\n\t\t\n\t\t\t/**\n\t\t\t * @property _animations\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._animations = {};\n\t\t\n\t\t\t/**\n\t\t\t * @property _data\n\t\t\t * @protected\n\t\t\t * @type Array\n\t\t\t **/\n\t\t\tthis._data = null;\n\t\t\n\t\t\t/**\n\t\t\t * @property _nextFrameIndex\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._nextFrameIndex = 0;\n\t\t\n\t\t\t/**\n\t\t\t * @property _index\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._index = 0;\n\t\t\n\t\t\t/**\n\t\t\t * @property _timerID\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._timerID = null;\n\t\t\n\t\t\t/**\n\t\t\t * @property _scale\n\t\t\t * @protected\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis._scale = 1;\n\t\t}\n\t\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// constants:\n\t\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n\t\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n\t// events:\n\t\t/**\n\t\t * Dispatched when a build completes.\n\t\t * @event complete\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when an asynchronous build has progress.\n\t\t * @event progress\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {Number} progress The current progress value (0-1).\n\t\t * @since 0.6.0\n\t\t */\n\n\n\t// public methods:\n\t\t/**\n\t\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n\t\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n\t\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n\t\t * times, but manipulate it or its children to change it to generate different frames.\n\t\t *\n\t\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n\t\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n\t\t * and pass in the Container as the source.\n\t\t * @method addFrame\n\t\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n\t\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n\t\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n\t\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n\t\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n\t\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n\t\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n\t\t **/\n\t\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\n\t\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\t\tif (!rect) { return null; }\n\t\t\tscale = scale||1;\n\t\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\n\t\t};\n\n\t\t/**\n\t\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n\t\t * @method addAnimation\n\t\t * @param {String} name The name for the animation.\n\t\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n\t\t * that played frame indexes 3, 6, and 5 in that order.\n\t\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n\t\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n\t\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n\t\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n\t\t * the opposite effect.\n\t\t **/\n\t\tp.addAnimation = function(name, frames, next, speed) {\n\t\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\n\t\t};\n\n\t\t/**\n\t\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n\t\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n\t\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n\t\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n\t\t * frame index 10 to 14.\n\t\t *\n\t\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n\t\t * set to `false`, ending on the last frame.\n\t\t * @method addMovieClip\n\t\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n\t\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n\t\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n\t\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n\t\t * found, the MovieClip will be skipped.\n\t\t * @param {Number} [scale=1] The scale to draw the movie clip at.\n\t\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n\t\t * with three parameters: the source, setupData, and the frame index.\n\t\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n\t\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n\t\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n\t\t **/\n\t\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n\t\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\t\tvar rects = source.frameBounds;\n\t\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\t\tif (!rect && !rects) { return; }\n\n\t\t\tvar i, l, baseFrameIndex = this._frames.length;\n\t\t\tvar duration = source.timeline.duration;\n\t\t\tfor (i=0; i<duration; i++) {\n\t\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\n\t\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\n\t\t\t}\n\t\t\tvar labels = source.timeline._labels;\n\t\t\tvar lbls = [];\n\t\t\tfor (var n in labels) {\n\t\t\t\tlbls.push({index:labels[n], label:n});\n\t\t\t}\n\t\t\tif (lbls.length) {\n\t\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\n\t\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\n\t\t\t\t\tvar label = lbls[i].label;\n\t\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\n\t\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\n\t\t\t\t\tvar frames = [];\n\t\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\n\t\t\t\t\tif (labelFunction) {\n\t\t\t\t\t\tlabel = labelFunction(label, source, start, end);\n\t\t\t\t\t\tif (!label) { continue; }\n\t\t\t\t\t}\n\t\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n\t\t * @method build\n\t\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n\t\t * occurred.\n\t\t **/\n\t\tp.build = function() {\n\t\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\t\tthis._startBuild();\n\t\t\twhile (this._drawNext()) {}\n\t\t\tthis._endBuild();\n\t\t\treturn this.spriteSheet;\n\t\t};\n\n\t\t/**\n\t\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n\t\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n\t\t * specified callback.\n\t\t * @method buildAsync\n\t\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n\t\t **/\n\t\tp.buildAsync = function(timeSlice) {\n\t\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\t\tthis.timeSlice = timeSlice;\n\t\t\tthis._startBuild();\n\t\t\tvar _this = this;\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\n\t\t};\n\n\t\t/**\n\t\t * Stops the current asynchronous build.\n\t\t * @method stopAsync\n\t\t **/\n\t\tp.stopAsync = function() {\n\t\t\tclearTimeout(this._timerID);\n\t\t\tthis._data = null;\n\t\t};\n\n\t\t/**\n\t\t * SpriteSheetBuilder instances cannot be cloned.\n\t\t * @method clone\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[SpriteSheetBuilder]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _startBuild\n\t\t * @protected\n\t\t **/\n\t\tp._startBuild = function() {\n\t\t\tvar pad = this.padding||0;\n\t\t\tthis.progress = 0;\n\t\t\tthis.spriteSheet = null;\n\t\t\tthis._index = 0;\n\t\t\tthis._scale = this.scale;\n\t\t\tvar dataFrames = [];\n\t\t\tthis._data = {\n\t\t\t\timages: [],\n\t\t\t\tframes: dataFrames,\n\t\t\t\tframerate: this.framerate,\n\t\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n\t\t\t};\n\n\t\t\tvar frames = this._frames.slice();\n\t\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\n\n\t\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\tvar y=0, x=0;\n\t\t\tvar img = 0;\n\t\t\twhile (frames.length) {\n\t\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\n\t\t\t\tif (o.w > x) { x = o.w; }\n\t\t\t\ty += o.h;\n\t\t\t\tif (!o.h || !frames.length) {\n\t\t\t\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\n\t\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\n\t\t\t\t\tthis._data.images[img] = canvas;\n\t\t\t\t\tif (!o.h) {\n\t\t\t\t\t\tx=y=0;\n\t\t\t\t\t\timg++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _setupMovieClipFrame\n\t\t * @protected\n\t\t * @return {Number} The width & height of the row.\n\t\t **/\n\t\tp._setupMovieClipFrame = function(source, data) {\n\t\t\tvar ae = source.actionsEnabled;\n\t\t\tsource.actionsEnabled = false;\n\t\t\tsource.gotoAndStop(data.i);\n\t\t\tsource.actionsEnabled = ae;\n\t\t\tdata.f&&data.f(source, data.d, data.i);\n\t\t};\n\n\t\t/**\n\t\t * @method _getSize\n\t\t * @protected\n\t\t * @return {Number} The width & height of the row.\n\t\t **/\n\t\tp._getSize = function(size,max) {\n\t\t\tvar pow = 4;\n\t\t\twhile (Math.pow(2,++pow) < size){}\n\t\t\treturn Math.min(max,Math.pow(2,pow));\n\t\t};\n\n\t\t/**\n\t\t * @method _fillRow\n\t\t * @param {Array} frames\n\t\t * @param {Number} y\n\t\t * @param {HTMLImageElement} img\n\t\t * @param {Object} dataFrames\n\t\t * @param {Number} pad\n\t\t * @protected\n\t\t * @return {Number} The width & height of the row.\n\t\t **/\n\t\tp._fillRow = function(frames, y, img, dataFrames, pad) {\n\t\t\tvar w = this.maxWidth;\n\t\t\tvar maxH = this.maxHeight;\n\t\t\ty += pad;\n\t\t\tvar h = maxH-y;\n\t\t\tvar x = pad;\n\t\t\tvar height = 0;\n\t\t\tfor (var i=frames.length-1; i>=0; i--) {\n\t\t\t\tvar frame = frames[i];\n\t\t\t\tvar sc = this._scale*frame.scale;\n\t\t\t\tvar rect = frame.sourceRect;\n\t\t\t\tvar source = frame.source;\n\t\t\t\tvar rx = Math.floor(sc*rect.x-pad);\n\t\t\t\tvar ry = Math.floor(sc*rect.y-pad);\n\t\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\n\t\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\n\t\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\t\tif (rh > h || x+rw > w) { continue; }\n\t\t\t\tframe.img = img;\n\t\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\n\t\t\t\theight = height || rh;\n\t\t\t\tframes.splice(i,1);\n\t\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\n\t\t\t\tx += rw;\n\t\t\t}\n\t\t\treturn {w:x, h:height};\n\t\t};\n\n\t\t/**\n\t\t * @method _endBuild\n\t\t * @protected\n\t\t **/\n\t\tp._endBuild = function() {\n\t\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\n\t\t\tthis._data = null;\n\t\t\tthis.progress = 1;\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t};\n\n\t\t/**\n\t\t * @method _run\n\t\t * @protected\n\t\t **/\n\t\tp._run = function() {\n\t\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\n\t\t\tvar t = (new Date()).getTime()+ts;\n\t\t\tvar complete = false;\n\t\t\twhile (t > (new Date()).getTime()) {\n\t\t\t\tif (!this._drawNext()) { complete = true; break; }\n\t\t\t}\n\t\t\tif (complete) {\n\t\t\t\tthis._endBuild();\n\t\t\t} else {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\n\t\t\t}\n\t\t\tvar p = this.progress = this._index/this._frames.length;\n\t\t\tif (this.hasEventListener(\"progress\")) {\n\t\t\t\tvar evt = new createjs.Event(\"progress\");\n\t\t\t\tevt.progress = p;\n\t\t\t\tthis.dispatchEvent(evt);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _drawNext\n\t\t * @protected\n\t\t * @return Boolean Returns false if this is the last draw.\n\t\t **/\n\t\tp._drawNext = function() {\n\t\t\tvar frame = this._frames[this._index];\n\t\t\tvar sc = frame.scale*this._scale;\n\t\t\tvar rect = frame.rect;\n\t\t\tvar sourceRect = frame.sourceRect;\n\t\t\tvar canvas = this._data.images[frame.img];\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tframe.funct&&frame.funct(frame.source, frame.data);\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\t\tctx.clip();\n\t\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\n\t\t\tctx.scale(sc,sc);\n\t\t\tframe.source.draw(ctx); // display object will draw itself.\n\t\t\tctx.restore();\n\t\t\treturn (++this._index) < this._frames.length;\n\t\t};\n\n\n\t\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n\t}());\n\n\t//##############################################################################\n\t// DOMElement.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n\t\t *\n\t\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n\t\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n\t\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n\t\t * drawn in front of or behind the canvas).\n\t\t *\n\t\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n\t\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\n\t\t * on the page.\n\t\t *\n\t\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n\t\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n\t\t * content.\n\t\t *\n\t\t * <h4>Mouse Interaction</h4>\n\t\t *\n\t\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n\t\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n\t\t * the htmlElement (note, this does not support EventDispatcher)\n\t\t *\n\t\t *      var domElement = new createjs.DOMElement(htmlElement);\n\t\t *      domElement.htmlElement.onclick = function() {\n\t\t *          console.log(\"clicked\");\n\t\t *      }\n\t\t *\n\t\t * @class DOMElement\n\t\t * @extends DisplayObject\n\t\t * @constructor\n\t\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n\t\t */\n\t\tfunction DOMElement(htmlElement) {\n\t\t\tthis.DisplayObject_constructor();\n\t\t\t\n\t\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\n\t\t\tthis.mouseEnabled = false;\n\t\t\t\n\t\t\tvar style = htmlElement.style;\n\t\t\tstyle.position = \"absolute\";\n\t\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\t\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The DOM object to manage.\n\t\t\t * @property htmlElement\n\t\t\t * @type HTMLElement\n\t\t\t */\n\t\t\tthis.htmlElement = htmlElement;\n\t\t\n\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _oldMtx\n\t\t\t * @type Matrix2D\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._oldProps = null;\n\t\t}\n\t\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// public methods:\n\t\t/**\n\t\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method isVisible\n\t\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t\t */\n\t\tp.isVisible = function() {\n\t\t\treturn this.htmlElement != null;\n\t\t};\n\n\t\t/**\n\t\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t\t * Returns true if the draw was handled (useful for overriding functionality).\n\t\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t\t * @method draw\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t\t * into itself).\n\t\t * @return {Boolean}\n\t\t */\n\t\tp.draw = function(ctx, ignoreCache) {\n\t\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\n\t\t\t// the actual update happens in _handleDrawEnd\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method cache\n\t\t */\n\t\tp.cache = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method uncache\n\t\t */\n\t\tp.uncache = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method updateCache\n\t\t */\n\t\tp.updateCache = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method hitTest\n\t\t */\n\t\tp.hitTest = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method localToGlobal\n\t\t */\n\t\tp.localToGlobal = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method globalToLocal\n\t\t */\n\t\tp.globalToLocal = function() {};\n\n\t\t/**\n\t\t * Not applicable to DOMElement.\n\t\t * @method localToLocal\n\t\t */\n\t\tp.localToLocal = function() {};\n\n\t\t/**\n\t\t * DOMElement cannot be cloned. Throws an error.\n\t\t * @method clone\n\t\t */\n\t\tp.clone = function() {\n\t\t\tthrow(\"DOMElement cannot be cloned.\")\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t */\n\t\tp.toString = function() {\n\t\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\n\t\t};\n\n\t\t/**\n\t     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t\t * @event click\n\t\t */\n\n\t     /**\n\t     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t\t * @event dblClick\n\t\t */\n\n\t     /**\n\t      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t\t  * @event mousedown\n\t\t  */\n\n\t     /**\n\t      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n\t      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t      * @event mouseover\n\t\t  */\n\n\t     /**\n\t      * Not applicable to DOMElement.\n\t\t  * @event tick\n\t\t  */\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _tick\n\t\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t\t * function.\n\t\t * @protected\n\t\t */\n\t\tp._tick = function(evtObj) {\n\t\t\tvar stage = this.getStage();\n\t\t\tstage&&stage.on(\"drawend\", this._handleDrawEnd, this, true);\n\t\t\tthis.DisplayObject__tick(evtObj);\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _handleDrawEnd\n\t\t * @param {Event} evt\n\t\t * @protected\n\t\t */\n\t\tp._handleDrawEnd = function(evt) {\n\t\t\tvar o = this.htmlElement;\n\t\t\tif (!o) { return; }\n\t\t\tvar style = o.style;\n\t\t\t\n\t\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\n\t\t\t\n\t\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\n\t\t\tif (visibility != style.visibility) { style.visibility = visibility; }\n\t\t\tif (!props.visible) { return; }\n\t\t\t\n\t\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\n\t\t\tvar n = 10000; // precision\n\t\t\t\n\t\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\n\t\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\n\t\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\n\t\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\n\t\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, NaN); }\n\t\t\t\toldProps.matrix.copy(mtx);\n\t\t\t}\n\t\t\t\n\t\t\tif (oldProps.alpha != props.alpha) {\n\t\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\n\t\t\t\toldProps.alpha = props.alpha;\n\t\t\t}\n\t\t};\n\n\n\t\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n\t}());\n\n\t//##############################################################################\n\t// Filter.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n\t\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n\t\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      myInstance.filters = [\n\t\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n\t\t *          new createjs.BlurFilter(5, 5, 10)\n\t\t *      ];\n\t\t *      myInstance.cache(0,0, 100, 100);\n\t\t *\n\t\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n\t\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n\t\t * will cause an object to feather outwards, resulting in a margin around the shape.\n\t\t *\n\t\t * <h4>EaselJS Filters</h4>\n\t\t * EaselJS comes with a number of pre-built filters:\n\t\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n\t\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n\t\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n\t\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n\t\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n\t\t * </ul>\n\t\t *\n\t\t * @class Filter\n\t\t * @constructor\n\t\t **/\n\t\tfunction Filter() {}\n\t\tvar p = Filter.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// public methods:\n\t\t/**\n\t\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n\t\t * @method getBounds\n\t\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n\t\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n\t\t **/\n\t\tp.getBounds = function(rect) {\n\t\t\treturn rect;\n\t\t};\n\n\t\t/**\n\t\t * Applies the filter to the specified context.\n\t\t * @method applyFilter\n\t\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t\t * @param {Number} x The x position to use for the source rect.\n\t\t * @param {Number} y The y position to use for the source rect.\n\t\t * @param {Number} width The width to use for the source rect.\n\t\t * @param {Number} height The height to use for the source rect.\n\t\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n\t\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n\t\t * @return {Boolean} If the filter was applied successfully.\n\t\t **/\n\t\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n\t\t\ttargetCtx = targetCtx || ctx;\n\t\t\tif (targetX == null) { targetX = x; }\n\t\t\tif (targetY == null) { targetY = y; }\n\t\t\ttry {\n\t\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this._applyFilter(imageData)) {\n\t\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[Filter]\";\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this Filter instance.\n\t\t * @method clone\n\t\t * @return {Filter} A clone of the current Filter instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new Filter();\n\t\t};\n\t\t\n\t// private methods:\n\t\t/**\n\t\t * @method _applyFilter\n\t\t * @param {ImageData} imageData Target ImageData instance.\n\t\t * @return {Boolean}\n\t\t **/\n\t\tp._applyFilter = function(imageData) { return true; };\n\n\n\t\tcreatejs.Filter = Filter;\n\t}());\n\n\t//##############################################################################\n\t// BlurFilter.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\n\t\t * set higher than 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n\t\t * method to account for the spread that the blur causes.\n\t\t *\n\t\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t\t *\n\t\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n\t\t *      shape.filters = [blurFilter];\n\t\t *      var bounds = blurFilter.getBounds();\n\t\t *\n\t\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t\t * @class BlurFilter\n\t\t * @extends Filter\n\t\t * @constructor\n\t\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n\t\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\n\t\t * @param {Number} [quality=1] The number of blur iterations.\n\t\t **/\n\t\tfunction BlurFilter( blurX, blurY, quality) {\n\t\t\tif ( isNaN(blurX) || blurX < 0 ) { blurX = 0; }\n\t\t\tif ( isNaN(blurY) || blurY < 0 ) { blurY = 0; }\n\t\t\tif ( isNaN(quality) || quality < 1  ) { quality = 1; }\n\n\n\t\t\t// public properties:\n\t\t\t/**\n\t\t\t * Horizontal blur radius in pixels\n\t\t\t * @property blurX\n\t\t\t * @default 0\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.blurX = blurX | 0;\n\n\t\t\t/**\n\t\t\t * Vertical blur radius in pixels\n\t\t\t * @property blurY\n\t\t\t * @default 0\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.blurY = blurY | 0;\n\n\t\t\t/**\n\t\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n\t\t\t * smoother blur, but take twice as long to run.\n\t\t\t * @property quality\n\t\t\t * @default 1\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.quality = quality | 0;\n\t\t}\n\t\tvar p = createjs.extend(BlurFilter, createjs.Filter);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// constants:\n\t\t/**\n\t\t * Array of multiply values for blur calculations.\n\t\t * @property MUL_TABLE\n\t\t * @type Array\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n\t\t/**\n\t\t * Array of shift values for blur calculations.\n\t\t * @property SHG_TABLE\n\t\t * @type Array\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n\t// public methods:\n\t\t/** docced in super class **/\n\t\tp.getBounds = function (rect) {\n\t\t\tvar x = this.blurX|0, y = this.blurY| 0;\n\t\t\tif (x <= 0 && y <= 0) { return rect; }\n\t\t\tvar q = Math.pow(this.quality, 0.2);\n\t\t\treturn (rect || new createjs.Rectangle()).pad(x*q+1,y*q+1,x*q+1,y*q+1);\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.clone = function() {\n\t\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.toString = function() {\n\t\t\treturn \"[BlurFilter]\";\n\t\t};\n\n\n\t// private methods:\n\n\t\t/** docced in super class **/\n\t\tp._applyFilter = function (imageData) {\n\n\t\t\tvar radiusX = this.blurX >> 1;\n\t\t\tif (isNaN(radiusX) || radiusX < 0) { return false; }\n\t\t\tvar radiusY = this.blurY >> 1;\n\t\t\tif (isNaN(radiusY) || radiusY < 0) { return false; }\n\t\t\tif (radiusX == 0 && radiusY == 0) { return false; }\n\n\t\t\tvar iterations = this.quality;\n\t\t\tif (isNaN(iterations) || iterations < 1) { iterations = 1; }\n\t\t\titerations |= 0;\n\t\t\tif (iterations > 3) { iterations = 3; }\n\t\t\tif (iterations < 1) { iterations = 1; }\n\n\t\t\tvar px = imageData.data;\n\t\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\n\n\t\t\tvar divx = (radiusX + radiusX + 1) | 0;\n\t\t\tvar divy = (radiusY + radiusY + 1) | 0;\n\t\t\tvar w = imageData.width | 0;\n\t\t\tvar h = imageData.height | 0;\n\n\t\t\tvar w1 = (w - 1) | 0;\n\t\t\tvar h1 = (h - 1) | 0;\n\t\t\tvar rxp1 = (radiusX + 1) | 0;\n\t\t\tvar ryp1 = (radiusY + 1) | 0;\n\n\t\t\tvar ssx = {r:0,b:0,g:0,a:0};\n\t\t\tvar sx = ssx;\n\t\t\tfor ( i = 1; i < divx; i++ )\n\t\t\t{\n\t\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\n\t\t\t}\n\t\t\tsx.n = ssx;\n\n\t\t\tvar ssy = {r:0,b:0,g:0,a:0};\n\t\t\tvar sy = ssy;\n\t\t\tfor ( i = 1; i < divy; i++ )\n\t\t\t{\n\t\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\n\t\t\t}\n\t\t\tsy.n = ssy;\n\n\t\t\tvar si = null;\n\n\n\t\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n\t\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n\t\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n\t\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n\n\t\t\twhile (iterations-- > 0) {\n\n\t\t\t\tyw = yi = 0;\n\t\t\t\tvar ms = mtx;\n\t\t\t\tvar ss = stx;\n\t\t\t\tfor (y = h; --y > -1;) {\n\t\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\n\t\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\n\t\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\n\t\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\n\n\t\t\t\t\tsx = ssx;\n\n\t\t\t\t\tfor( i = rxp1; --i > -1; )\n\t\t\t\t\t{\n\t\t\t\t\t\tsx.r = pr;\n\t\t\t\t\t\tsx.g = pg;\n\t\t\t\t\t\tsx.b = pb;\n\t\t\t\t\t\tsx.a = pa;\n\t\t\t\t\t\tsx = sx.n;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor( i = 1; i < rxp1; i++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\n\t\t\t\t\t\tr += ( sx.r = px[p]);\n\t\t\t\t\t\tg += ( sx.g = px[p+1]);\n\t\t\t\t\t\tb += ( sx.b = px[p+2]);\n\t\t\t\t\t\ta += ( sx.a = px[p+3]);\n\n\t\t\t\t\t\tsx = sx.n;\n\t\t\t\t\t}\n\n\t\t\t\t\tsi = ssx;\n\t\t\t\t\tfor ( x = 0; x < w; x++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\n\t\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\n\t\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\n\t\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\n\n\t\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t}\n\t\t\t\t\tyw += w;\n\t\t\t\t}\n\n\t\t\t\tms = mty;\n\t\t\t\tss = sty;\n\t\t\t\tfor (x = 0; x < w; x++) {\n\t\t\t\t\tyi = (x << 2) | 0;\n\n\t\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\n\t\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\n\t\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\n\t\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\n\n\t\t\t\t\tsy = ssy;\n\t\t\t\t\tfor( i = 0; i < ryp1; i++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tsy.r = pr;\n\t\t\t\t\t\tsy.g = pg;\n\t\t\t\t\t\tsy.b = pb;\n\t\t\t\t\t\tsy.a = pa;\n\t\t\t\t\t\tsy = sy.n;\n\t\t\t\t\t}\n\n\t\t\t\t\typ = w;\n\n\t\t\t\t\tfor( i = 1; i <= radiusY; i++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\t\t\t\tr += ( sy.r = px[yi]);\n\t\t\t\t\t\tg += ( sy.g = px[yi+1]);\n\t\t\t\t\t\tb += ( sy.b = px[yi+2]);\n\t\t\t\t\t\ta += ( sy.a = px[yi+3]);\n\n\t\t\t\t\t\tsy = sy.n;\n\n\t\t\t\t\t\tif( i < h1 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\typ += w;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tyi = x;\n\t\t\t\t\tsi = ssy;\n\t\t\t\t\tif ( iterations > 0 )\n\t\t\t\t\t{\n\t\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\n\t\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\n\t\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\t\tyi += w;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpa = 255 / pa;\n\t\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\t\tyi += w;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n\t}());\n\n\t//##############################################################################\n\t// AlphaMapFilter.js\n\t//##############################################################################\n\n\t(function () {\n\t\t\n\t\t\n\t// constructor:\n\t\t/**\n\t\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n\t\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n\t\t *\n\t\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n\t\t * better performance.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n\t\t *\n\t\t *       var box = new createjs.Shape();\n\t\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n\t\t *       box.graphics.drawRect(0, 0, 100, 100);\n\t\t *       box.cache(0, 0, 100, 100);\n\t\t *\n\t\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t\t *       bmp.filters = [\n\t\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\n\t\t *       ];\n\t\t *       bmp.cache(0, 0, 100, 100);\n\t\t *       stage.addChild(bmp);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t\t * @class AlphaMapFilter\n\t\t * @extends Filter\n\t\t * @constructor\n\t\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n\t\t * result. This should be exactly the same dimensions as the target.\n\t\t **/\n\t\tfunction AlphaMapFilter(alphaMap) {\n\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n\t\t\t * dimensions as the target.\n\t\t\t * @property alphaMap\n\t\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t\t **/\n\t\t\tthis.alphaMap = alphaMap;\n\t\t\t\n\t\t\t\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _alphaMap\n\t\t\t * @protected\n\t\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t\t **/\n\t\t\tthis._alphaMap = null;\n\t\t\t\n\t\t\t/**\n\t\t\t * @property _mapData\n\t\t\t * @protected\n\t\t\t * @type Uint8ClampedArray\n\t\t\t **/\n\t\t\tthis._mapData = null;\n\t\t}\n\t\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// public methods:\n\t\t/** docced in super class **/\n\t\tp.clone = function () {\n\t\t\tvar o = new AlphaMapFilter(this.alphaMap);\n\t\t\to._alphaMap = this._alphaMap;\n\t\t\to._mapData = this._mapData;\n\t\t\treturn o;\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.toString = function () {\n\t\t\treturn \"[AlphaMapFilter]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/** docced in super class **/\n\t\tp._applyFilter = function (imageData) {\n\t\t\tif (!this.alphaMap) { return true; }\n\t\t\tif (!this._prepAlphaMap()) { return false; }\n\t\t\t\n\t\t\t// TODO: update to support scenarios where the target has different dimensions.\n\t\t\tvar data = imageData.data;\n\t\t\tvar map = this._mapData;\n\t\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\n\t\t\t\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * @method _prepAlphaMap\n\t\t * @protected\n\t\t **/\n\t\tp._prepAlphaMap = function () {\n\t\t\tif (!this.alphaMap) { return false; }\n\t\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\n\n\t\t\tthis._mapData = null;\n\t\t\tvar map = this._alphaMap = this.alphaMap;\n\t\t\tvar canvas = map;\n\t\t\tvar ctx;\n\t\t\tif (map instanceof HTMLCanvasElement) {\n\t\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\t} else {\n\t\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = map.width;\n\t\t\t\tcanvas.height = map.height;\n\t\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\t\tctx.drawImage(map, 0, 0);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\n\t\t\t} catch (e) {\n\t\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tthis._mapData = imgData.data;\n\t\t\treturn true;\n\t\t};\n\n\n\t\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n\t}());\n\n\t//##############################################################################\n\t// AlphaMaskFilter.js\n\t//##############################################################################\n\n\t(function () {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n\t\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n\t\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n\t\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n\t\t *\n\t\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n\t\t *\n\t\t *      var box = new createjs.Shape();\n\t\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n\t\t *      box.graphics.drawRect(0, 0, 100, 100);\n\t\t *      box.cache(0, 0, 100, 100);\n\t\t *\n\t\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t\t *      bmp.filters = [\n\t\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n\t\t *      ];\n\t\t *      bmp.cache(0, 0, 100, 100);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t\t * @class AlphaMaskFilter\n\t\t * @extends Filter\n\t\t * @constructor\n\t\t * @param {HTMLImageElement|HTMLCanvasElement} mask\n\t\t **/\n\t\tfunction AlphaMaskFilter(mask) {\n\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The image (or canvas) to use as the mask.\n\t\t\t * @property mask\n\t\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t\t **/\n\t\t\tthis.mask = mask;\n\t\t}\n\t\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\t\n\n\t// public methods:\n\t\t/**\n\t\t * Applies the filter to the specified context.\n\t\t *\n\t\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n\t\t * correctly.</strong>\n\t\t * @method applyFilter\n\t\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t\t * @param {Number} x The x position to use for the source rect.\n\t\t * @param {Number} y The y position to use for the source rect.\n\t\t * @param {Number} width The width to use for the source rect.\n\t\t * @param {Number} height The height to use for the source rect.\n\t\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n\t\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n\t\t * @return {Boolean} If the filter was applied successfully.\n\t\t **/\n\t\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t\tif (!this.mask) { return true; }\n\t\t\ttargetCtx = targetCtx || ctx;\n\t\t\tif (targetX == null) { targetX = x; }\n\t\t\tif (targetY == null) { targetY = y; }\n\n\t\t\ttargetCtx.save();\n\t\t\tif (ctx != targetCtx) {\n\t\t\t\t// TODO: support targetCtx and targetX/Y\n\t\t\t\t// clearRect, then draw the ctx in?\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\n\t\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\n\t\t\ttargetCtx.restore();\n\t\t\treturn true;\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.clone = function () {\n\t\t\treturn new AlphaMaskFilter(this.mask);\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.toString = function () {\n\t\t\treturn \"[AlphaMaskFilter]\";\n\t\t};\n\n\n\t\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n\t}());\n\n\t//##############################################################################\n\t// ColorFilter.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Applies a color transform to DisplayObjects.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n\t\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n\t\t *\n\t\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t\t *\n\t\t *      shape.filters = [\n\t\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n\t\t *      ];\n\t\t *      shape.cache(-50, -50, 100, 100);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t\t * @class ColorFilter\n\t\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n\t\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n\t\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n\t\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n\t\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n\t\t * between -255 and 255.\n\t\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n\t\t  * between -255 and 255.\n\t\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n\t\t  * between -255 and 255.\n\t\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n\t\t  * between -255 and 255.\n\t\t * @constructor\n\t\t * @extends Filter\n\t\t **/\n\t\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n\t\t\t\n\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * Red channel multiplier.\n\t\t\t * @property redMultiplier\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\t\t\n\t\t\t/**\n\t\t\t * Green channel multiplier.\n\t\t\t * @property greenMultiplier\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\t\t\n\t\t\t/**\n\t\t\t * Blue channel multiplier.\n\t\t\t * @property blueMultiplier\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\t\t\n\t\t\t/**\n\t\t\t * Alpha channel multiplier.\n\t\t\t * @property alphaMultiplier\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\t\t\n\t\t\t/**\n\t\t\t * Red channel offset (added to value).\n\t\t\t * @property redOffset\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.redOffset = redOffset || 0;\n\t\t\n\t\t\t/**\n\t\t\t * Green channel offset (added to value).\n\t\t\t * @property greenOffset\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.greenOffset = greenOffset || 0;\n\t\t\n\t\t\t/**\n\t\t\t * Blue channel offset (added to value).\n\t\t\t * @property blueOffset\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.blueOffset = blueOffset || 0;\n\t\t\n\t\t\t/**\n\t\t\t * Alpha channel offset (added to value).\n\t\t\t * @property alphaOffset\n\t\t\t * @type Number\n\t\t\t **/\n\t\t\tthis.alphaOffset = alphaOffset || 0;\n\t\t}\n\t\tvar p = createjs.extend(ColorFilter, createjs.Filter);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// public methods:\n\t\t/** docced in super class **/\n\t\tp.toString = function() {\n\t\t\treturn \"[ColorFilter]\";\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.clone = function() {\n\t\t\treturn new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\n\t\t};\n\t\t\n\n\t// private methods:\n\t\t/** docced in super class **/\n\t\tp._applyFilter = function(imageData) {\n\t\t\tvar data = imageData.data;\n\t\t\tvar l = data.length;\n\t\t\tfor (var i=0; i<l; i+=4) {\n\t\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\n\t\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\n\t\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\n\t\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\n\t\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n\t}());\n\n\t//##############################################################################\n\t// ColorMatrix.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n\t\t * Most methods return the instance to facilitate chained calls.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n\t\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\n\t\t * @class ColorMatrix\n\t\t * @param {Number} brightness\n\t\t * @param {Number} contrast\n\t\t * @param {Number} saturation\n\t\t * @param {Number} hue\n\t\t * @constructor\n\t\t **/\n\t\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\n\t\t\tthis.setColor(brightness, contrast, saturation, hue);\n\t\t}\n\t\tvar p = ColorMatrix.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// constants:\n\t\t/**\n\t\t * Array of delta values for contrast calculations.\n\t\t * @property DELTA_INDEX\n\t\t * @type Array\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tColorMatrix.DELTA_INDEX = [\n\t\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\n\t\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\n\t\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\n\t\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\n\t\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\n\t\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\n\t\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\n\t\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\n\t\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\n\t\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\n\t\t\t10.0\n\t\t];\n\n\t\t/**\n\t\t * Identity matrix values.\n\t\t * @property IDENTITY_MATRIX\n\t\t * @type Array\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tColorMatrix.IDENTITY_MATRIX = [\n\t\t\t1,0,0,0,0,\n\t\t\t0,1,0,0,0,\n\t\t\t0,0,1,0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t];\n\n\t\t/**\n\t\t * The constant length of a color matrix.\n\t\t * @property LENGTH\n\t\t * @type Number\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n\n\t// public methods:\n\t\t/**\n\t\t * Resets the instance with the specified values.\n\t\t * @method setColor\n\t\t * @param {Number} brightness\n\t\t * @param {Number} contrast\n\t\t * @param {Number} saturation\n\t\t * @param {Number} hue\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t */\n\t\tp.setColor = function(brightness,contrast,saturation,hue) {\n\t\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\n\t\t};\n\n\t\t/**\n\t\t * Resets the matrix to identity values.\n\t\t * @method reset\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t */\n\t\tp.reset = function() {\n\t\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\n\t\t};\n\n\t\t/**\n\t\t * Shortcut method to adjust brightness, contrast, saturation and hue.\n\t\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n\t\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n\t\t * @method adjustColor\n\t\t * @param {Number} brightness\n\t\t * @param {Number} contrast\n\t\t * @param {Number} saturation\n\t\t * @param {Number} hue\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.adjustColor = function(brightness,contrast,saturation,hue) {\n\t\t\tthis.adjustHue(hue);\n\t\t\tthis.adjustContrast(contrast);\n\t\t\tthis.adjustBrightness(brightness);\n\t\t\treturn this.adjustSaturation(saturation);\n\t\t};\n\n\t\t/**\n\t\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n\t\t * Positive values will make the image brighter, negative values will make it darker.\n\t\t * @method adjustBrightness\n\t\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.adjustBrightness = function(value) {\n\t\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\t\tvalue = this._cleanValue(value,255);\n\t\t\tthis._multiplyMatrix([\n\t\t\t\t1,0,0,0,value,\n\t\t\t\t0,1,0,0,value,\n\t\t\t\t0,0,1,0,value,\n\t\t\t\t0,0,0,1,0,\n\t\t\t\t0,0,0,0,1\n\t\t\t]);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Adjusts the contrast of pixel color.\n\t\t * Positive values will increase contrast, negative values will decrease contrast.\n\t\t * @method adjustContrast\n\t\t * @param {Number} value A value between -100 & 100.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.adjustContrast = function(value) {\n\t\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\t\tvalue = this._cleanValue(value,100);\n\t\t\tvar x;\n\t\t\tif (value<0) {\n\t\t\t\tx = 127+value/100*127;\n\t\t\t} else {\n\t\t\t\tx = value%1;\n\t\t\t\tif (x == 0) {\n\t\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\n\t\t\t\t} else {\n\t\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\n\t\t\t\t}\n\t\t\t\tx = x*127+127;\n\t\t\t}\n\t\t\tthis._multiplyMatrix([\n\t\t\t\tx/127,0,0,0,0.5*(127-x),\n\t\t\t\t0,x/127,0,0,0.5*(127-x),\n\t\t\t\t0,0,x/127,0,0.5*(127-x),\n\t\t\t\t0,0,0,1,0,\n\t\t\t\t0,0,0,0,1\n\t\t\t]);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Adjusts the color saturation of the pixel.\n\t\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n\t\t * @method adjustSaturation\n\t\t * @param {Number} value A value between -100 & 100.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.adjustSaturation = function(value) {\n\t\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\t\tvalue = this._cleanValue(value,100);\n\t\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\n\t\t\tvar lumR = 0.3086;\n\t\t\tvar lumG = 0.6094;\n\t\t\tvar lumB = 0.0820;\n\t\t\tthis._multiplyMatrix([\n\t\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\n\t\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\n\t\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\n\t\t\t\t0,0,0,1,0,\n\t\t\t\t0,0,0,0,1\n\t\t\t]);\n\t\t\treturn this;\n\t\t};\n\n\n\t\t/**\n\t\t * Adjusts the hue of the pixel color.\n\t\t * @method adjustHue\n\t\t * @param {Number} value A value between -180 & 180.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.adjustHue = function(value) {\n\t\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\n\t\t\tvar cosVal = Math.cos(value);\n\t\t\tvar sinVal = Math.sin(value);\n\t\t\tvar lumR = 0.213;\n\t\t\tvar lumG = 0.715;\n\t\t\tvar lumB = 0.072;\n\t\t\tthis._multiplyMatrix([\n\t\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\n\t\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\n\t\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\n\t\t\t\t0,0,0,1,0,\n\t\t\t\t0,0,0,0,1\n\t\t\t]);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Concatenates (multiplies) the specified matrix with this one.\n\t\t * @method concat\n\t\t * @param {Array} matrix An array or ColorMatrix instance.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.concat = function(matrix) {\n\t\t\tmatrix = this._fixMatrix(matrix);\n\t\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\n\t\t\tthis._multiplyMatrix(matrix);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Returns a clone of this ColorMatrix.\n\t\t * @method clone\n\t\t * @return {ColorMatrix} A clone of this ColorMatrix.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn (new ColorMatrix()).copy(this);\n\t\t};\n\n\t\t/**\n\t\t * Return a length 25 (5x5) array instance containing this matrix's values.\n\t\t * @method toArray\n\t\t * @return {Array} An array holding this matrix's values.\n\t\t **/\n\t\tp.toArray = function() {\n\t\t\tvar arr = [];\n\t\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\n\t\t\t\tarr[i] = this[i];\n\t\t\t}\n\t\t\treturn arr;\n\t\t};\n\n\t\t/**\n\t\t * Copy the specified matrix's values to this matrix.\n\t\t * @method copy\n\t\t * @param {Array} matrix An array or ColorMatrix instance.\n\t\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t\t * @chainable\n\t\t **/\n\t\tp.copy = function(matrix) {\n\t\t\tvar l = ColorMatrix.LENGTH;\n\t\t\tfor (var i=0;i<l;i++) {\n\t\t\t\tthis[i] = matrix[i];\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t **/\n\t\tp.toString = function() {\n\t\t\treturn \"[ColorMatrix]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * @method _multiplyMatrix\n\t\t * @param {Array} matrix\n\t\t * @protected\n\t\t **/\n\t\tp._multiplyMatrix = function(matrix) {\n\t\t\tvar i, j, k, col = [];\n\n\t\t\tfor (i=0;i<5;i++) {\n\t\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\t\tcol[j] = this[j+i*5];\n\t\t\t\t}\n\t\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\t\tvar val=0;\n\t\t\t\t\tfor (k=0;k<5;k++) {\n\t\t\t\t\t\tval += matrix[j+k*5]*col[k];\n\t\t\t\t\t}\n\t\t\t\t\tthis[j+i*5] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n\t\t * @method _cleanValue\n\t\t * @param {Number} value The raw number\n\t\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n\t\t * @protected\n\t\t **/\n\t\tp._cleanValue = function(value, limit) {\n\t\t\treturn Math.min(limit,Math.max(-limit,value));\n\t\t};\n\n\t\t/**\n\t\t * Makes sure matrixes are 5x5 (25 long).\n\t\t * @method _fixMatrix\n\t\t * @param {Array} matrix\n\t\t * @protected\n\t\t **/\n\t\tp._fixMatrix = function(matrix) {\n\t\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\n\t\t\tif (matrix.length < ColorMatrix.LENGTH) {\n\t\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\n\t\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\n\t\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\n\t\t\t}\n\t\t\treturn matrix;\n\t\t};\n\n\n\t\tcreatejs.ColorMatrix = ColorMatrix;\n\t}());\n\n\t//##############################################################################\n\t// ColorMatrixFilter.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n\t\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n\t\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n\t\t *\n\t\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t\t *\n\t\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n\t\t *      shape.filters = [\n\t\t *          new createjs.ColorMatrixFilter(matrix)\n\t\t *      ];\n\t\t *\n\t\t *      shape.cache(-50, -50, 100, 100);\n\t\t *\n\t\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t\t * @class ColorMatrixFilter\n\t\t * @constructor\n\t\t * @extends Filter\n\t\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t * class.\n\t\t **/\n\t\tfunction ColorMatrixFilter(matrix) {\n\t\t\n\t\t\t\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t\t * @property matrix\n\t\t\t * @type Array | ColorMatrix\n\t\t\t **/\n\t\t\tthis.matrix = matrix;\n\t\t}\n\t\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\t\n\n\t// public methods:\n\t\t/** docced in super class **/\n\t\tp.toString = function() {\n\t\t\treturn \"[ColorMatrixFilter]\";\n\t\t};\n\n\t\t/** docced in super class **/\n\t\tp.clone = function() {\n\t\t\treturn new ColorMatrixFilter(this.matrix);\n\t\t};\n\n\t// private methods:\n\t\t/** docced in super class **/\n\t\tp._applyFilter = function(imageData) { \n\t\t\tvar data = imageData.data;\n\t\t\tvar l = data.length;\n\t\t\tvar r,g,b,a;\n\t\t\tvar mtx = this.matrix;\n\t\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\n\t\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\n\t\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\n\t\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\n\n\t\t\tfor (var i=0; i<l; i+=4) {\n\t\t\t\tr = data[i];\n\t\t\t\tg = data[i+1];\n\t\t\t\tb = data[i+2];\n\t\t\t\ta = data[i+3];\n\t\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\n\t\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\n\t\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\n\t\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\n\t\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n\t}());\n\n\t//##############################################################################\n\t// Touch.js\n\t//##############################################################################\n\n\t(function() {\n\n\n\t// constructor:\n\t\t/**\n\t * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n\t * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n\t *\n\t * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n\t * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var stage = new createjs.Stage(\"canvasId\");\n\t *      createjs.Touch.enable(stage);\n\t *\n\t * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n\t *\n\t *      createjs.Touch.disable(stage);\n\t *\n\t * @class Touch\n\t * @static\n\t **/\n\t\tfunction Touch() {\n\t\t\tthrow \"Touch cannot be instantiated\";\n\t\t}\n\n\n\t// public static methods:\n\t\t/**\n\t\t * Returns `true` if touch is supported in the current browser.\n\t\t * @method isSupported\n\t\t * @return {Boolean} Indicates whether touch is supported in the current browser.\n\t\t * @static\n\t\t **/\n\t\tTouch.isSupported = function() {\n\t\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\n\t\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\n\t\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\n\t\t};\n\n\t\t/**\n\t\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n\t\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n\t\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n\t\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n\t\t * for more information.\n\t\t * @method enable\n\t\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n\t\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n\t\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n\t\t * allowed when the user is interacting with the target canvas.\n\t\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n\t\t * @static\n\t\t **/\n\t\tTouch.enable = function(stage, singleTouch, allowDefault) {\n\t\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\n\t\t\tif (stage.__touch) { return true; }\n\n\t\t\t// inject required properties on stage:\n\t\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\n\n\t\t\t// note that in the future we may need to disable the standard mouse event model before adding\n\t\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n\t\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\n\t\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n\t\t * @method disable\n\t\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n\t\t * @static\n\t\t **/\n\t\tTouch.disable = function(stage) {\n\t\t\tif (!stage) { return; }\n\t\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\n\t\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\n\t\t\t\n\t\t\tdelete stage.__touch;\n\t\t};\n\n\n\t// Private static methods:\n\t\t/**\n\t\t * @method _IOS_enable\n\t\t * @protected\n\t\t * @param {Stage} stage\n\t\t * @static\n\t\t **/\n\t\tTouch._IOS_enable = function(stage) {\n\t\t\tvar canvas = stage.canvas;\n\t\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\n\t\t\tcanvas.addEventListener(\"touchstart\", f, false);\n\t\t\tcanvas.addEventListener(\"touchmove\", f, false);\n\t\t\tcanvas.addEventListener(\"touchend\", f, false);\n\t\t\tcanvas.addEventListener(\"touchcancel\", f, false);\n\t\t};\n\n\t\t/**\n\t\t * @method _IOS_disable\n\t\t * @protected\n\t\t * @param {Stage} stage\n\t\t * @static\n\t\t **/\n\t\tTouch._IOS_disable = function(stage) {\n\t\t\tvar canvas = stage.canvas;\n\t\t\tif (!canvas) { return; }\n\t\t\tvar f = stage.__touch.f;\n\t\t\tcanvas.removeEventListener(\"touchstart\", f, false);\n\t\t\tcanvas.removeEventListener(\"touchmove\", f, false);\n\t\t\tcanvas.removeEventListener(\"touchend\", f, false);\n\t\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\n\t\t};\n\n\t\t/**\n\t\t * @method _IOS_handleEvent\n\t\t * @param {Stage} stage\n\t\t * @param {Object} e The event to handle\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tTouch._IOS_handleEvent = function(stage, e) {\n\t\t\tif (!stage) { return; }\n\t\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\n\t\t\tvar touches = e.changedTouches;\n\t\t\tvar type = e.type;\n\t\t\tfor (var i= 0,l=touches.length; i<l; i++) {\n\t\t\t\tvar touch = touches[i];\n\t\t\t\tvar id = touch.identifier;\n\t\t\t\tif (touch.target != stage.canvas) { continue; }\n\n\t\t\t\tif (type == \"touchstart\") {\n\t\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t\t} else if (type == \"touchmove\") {\n\t\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\n\t\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _IE_enable\n\t\t * @protected\n\t\t * @param {Stage} stage\n\t\t * @static\n\t\t **/\n\t\tTouch._IE_enable = function(stage) {\n\t\t\tvar canvas = stage.canvas;\n\t\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\n\n\t\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\n\t\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\n\t\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\n\t\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\n\t\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\n\t\t\t} else {\n\t\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\n\t\t\t\twindow.addEventListener(\"pointermove\", f, false);\n\t\t\t\twindow.addEventListener(\"pointerup\", f, false);\n\t\t\t\twindow.addEventListener(\"pointercancel\", f, false);\n\t\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\n\n\t\t\t}\n\t\t\tstage.__touch.activeIDs = {};\n\t\t};\n\n\t\t/**\n\t\t * @method _IE_disable\n\t\t * @protected\n\t\t * @param {Stage} stage\n\t\t * @static\n\t\t **/\n\t\tTouch._IE_disable = function(stage) {\n\t\t\tvar f = stage.__touch.f;\n\n\t\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\n\t\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\n\t\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\n\t\t\t\tif (stage.canvas) {\n\t\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twindow.removeEventListener(\"pointermove\", f, false);\n\t\t\t\twindow.removeEventListener(\"pointerup\", f, false);\n\t\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\n\t\t\t\tif (stage.canvas) {\n\t\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _IE_handleEvent\n\t\t * @param {Stage} stage\n\t\t * @param {Object} e The event to handle.\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tTouch._IE_handleEvent = function(stage, e) {\n\t\t\tif (!stage) { return; }\n\t\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\n\t\t\tvar type = e.type;\n\t\t\tvar id = e.pointerId;\n\t\t\tvar ids = stage.__touch.activeIDs;\n\n\t\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\n\t\t\t\tif (e.srcElement != stage.canvas) { return; }\n\t\t\t\tids[id] = true;\n\t\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\n\t\t\t} else if (ids[id]) { // it's an id we're watching\n\t\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\n\t\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\n\t\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\n\t\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\n\t\t\t\t\tdelete(ids[id]);\n\t\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _handleStart\n\t\t * @param {Stage} stage\n\t\t * @param {String|Number} id\n\t\t * @param {Object} e\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @protected\n\t\t **/\n\t\tTouch._handleStart = function(stage, id, e, x, y) {\n\t\t\tvar props = stage.__touch;\n\t\t\tif (!props.multitouch && props.count) { return; }\n\t\t\tvar ids = props.pointers;\n\t\t\tif (ids[id]) { return; }\n\t\t\tids[id] = true;\n\t\t\tprops.count++;\n\t\t\tstage._handlePointerDown(id, e, x, y);\n\t\t};\n\n\t\t/**\n\t\t * @method _handleMove\n\t\t * @param {Stage} stage\n\t\t * @param {String|Number} id\n\t\t * @param {Object} e\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @protected\n\t\t **/\n\t\tTouch._handleMove = function(stage, id, e, x, y) {\n\t\t\tif (!stage.__touch.pointers[id]) { return; }\n\t\t\tstage._handlePointerMove(id, e, x, y);\n\t\t};\n\n\t\t/**\n\t\t * @method _handleEnd\n\t\t * @param {Stage} stage\n\t\t * @param {String|Number} id\n\t\t * @param {Object} e\n\t\t * @protected\n\t\t **/\n\t\tTouch._handleEnd = function(stage, id, e) {\n\t\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n\t\t\tvar props = stage.__touch;\n\t\t\tvar ids = props.pointers;\n\t\t\tif (!ids[id]) { return; }\n\t\t\tprops.count--;\n\t\t\tstage._handlePointerUp(id, e, true);\n\t\t\tdelete(ids[id]);\n\t\t};\n\n\n\t\tcreatejs.Touch = Touch;\n\t}());\n\n\t//##############################################################################\n\t// version.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * Static class holding library specific information such as the version and buildDate of\n\t\t * the library.\n\t\t * @class EaselJS\n\t\t **/\n\t\tvar s = createjs.EaselJS = createjs.EaselJS || {};\n\n\t\t/**\n\t\t * The version string for this release.\n\t\t * @property version\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.version = /*=version*/\"0.8.2\"; // injected by build process\n\n\t\t/**\n\t\t * The build date for this release in UTC format.\n\t\t * @property buildDate\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\n\n\t})();\n\n\t//##############################################################################\n\t// version.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Static class holding library specific information such as the version and buildDate of the library.\n\t\t * @class PreloadJS\n\t\t **/\n\t\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n\t\t/**\n\t\t * The version string for this release.\n\t\t * @property version\n\t\t * @type {String}\n\t\t * @static\n\t\t **/\n\t\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t\t/**\n\t\t * The build date for this release in UTC format.\n\t\t * @property buildDate\n\t\t * @type {String}\n\t\t * @static\n\t\t **/\n\t\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n\t})();\n\n\t//##############################################################################\n\t// proxy.js\n\t//##############################################################################\n\n\t/**\n\t * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n\t * createjs namespace directly.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n\t *\n\t * @class Utility Methods\n\t * @main Utility Methods\n\t */\n\n\t(function() {\n\n\t\t/**\n\t\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t\t * method gets called in the correct scope.\n\t\t *\n\t\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t\t *\n\t\t *      function myHandler(arg1, arg2) {\n\t\t *           // This gets called when myObject.myCallback is executed.\n\t\t *      }\n\t\t *\n\t\t * @method proxy\n\t\t * @param {Function} method The function to call\n\t\t * @param {Object} scope The scope to call the method name on\n\t\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t\t * @public\n\t\t * @static\n\t\t */\n\t\tcreatejs.proxy = function (method, scope) {\n\t\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\t\treturn function () {\n\t\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t\t};\n\t\t};\n\n\t}());\n\n\t//##############################################################################\n\t// ErrorEvent.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t\t * @class ErrorEvent\n\t\t * @param {String} [title] The error title\n\t\t * @param {String} [message] The error description\n\t\t * @param {Object} [data] Additional error data\n\t\t * @constructor\n\t\t */\n\t\tfunction ErrorEvent(title, message, data) {\n\t\t\tthis.Event_constructor(\"error\");\n\n\t\t\t/**\n\t\t\t * The short error title, which indicates the type of error that occurred.\n\t\t\t * @property title\n\t\t\t * @type String\n\t\t\t */\n\t\t\tthis.title = title;\n\n\t\t\t/**\n\t\t\t * The verbose error message, containing details about the error.\n\t\t\t * @property message\n\t\t\t * @type String\n\t\t\t */\n\t\t\tthis.message = message;\n\n\t\t\t/**\n\t\t\t * Additional data attached to an error.\n\t\t\t * @property data\n\t\t\t * @type {Object}\n\t\t\t */\n\t\t\tthis.data = data;\n\t\t}\n\n\t\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\t\tp.clone = function() {\n\t\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t\t};\n\n\t\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n\t}());\n\n\t//##############################################################################\n\t// ProgressEvent.js\n\t//##############################################################################\n\n\t(function (scope) {\n\n\t\t// constructor\n\t\t/**\n\t\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t\t * @class ProgressEvent\n\t\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t\t * a percentage (between 0 and 1), it can be omitted.\n\t\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t\t * @constructor\n\t\t */\n\t\tfunction ProgressEvent(loaded, total) {\n\t\t\tthis.Event_constructor(\"progress\");\n\n\t\t\t/**\n\t\t\t * The amount that has been loaded (out of a total amount)\n\t\t\t * @property loaded\n\t\t\t * @type {Number}\n\t\t\t */\n\t\t\tthis.loaded = loaded;\n\n\t\t\t/**\n\t\t\t * The total \"size\" of the load.\n\t\t\t * @property total\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t */\n\t\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t\t/**\n\t\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t\t * @property progress\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t\t}\n\t\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t\t/**\n\t\t * Returns a clone of the ProgressEvent instance.\n\t\t * @method clone\n\t\t * @return {ProgressEvent} a clone of the Event instance.\n\t\t **/\n\t\tp.clone = function() {\n\t\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t\t};\n\n\t\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n\t}());\n(function () {\n\t  // Detect the `define` function exposed by asynchronous module loaders. The\n\t  // strict `define` check is necessary for compatibility with `r.js`.\n\t  var isLoader = typeof undefined === \"function\" ;\n\n\t  // A set of types used to distinguish objects from primitives.\n\t  var objectTypes = {\n\t    \"function\": true,\n\t    \"object\": true\n\t  };\n\n\t  // Detect the `exports` object exposed by CommonJS implementations.\n\t  var freeExports = exports && !exports.nodeType && exports;\n\n\t  // Use the `global` object exposed by Node (including Browserify via\n\t  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n\t  // and the `window` object in browsers. Rhino exports a `global` function\n\t  // instead.\n\t  var root = objectTypes[typeof window] && window || this,\n\t      freeGlobal = freeExports && objectTypes['object'] && module && !module.nodeType && typeof commonjsGlobal == \"object\" && commonjsGlobal;\n\n\t  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n\t    root = freeGlobal;\n\t  }\n\n\t  // Public: Initializes JSON 3 using the given `context` object, attaching the\n\t  // `stringify` and `parse` functions to the specified `exports` object.\n\t  function runInContext(context, exports) {\n\t    context || (context = root[\"Object\"]());\n\t    exports || (exports = root[\"Object\"]());\n\n\t    // Native constructor aliases.\n\t    var Number = context[\"Number\"] || root[\"Number\"],\n\t        String = context[\"String\"] || root[\"String\"],\n\t        Object = context[\"Object\"] || root[\"Object\"],\n\t        Date = context[\"Date\"] || root[\"Date\"],\n\t        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n\t        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n\t        Math = context[\"Math\"] || root[\"Math\"],\n\t        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n\t    // Delegate to the native `stringify` and `parse` implementations.\n\t    if (typeof nativeJSON == \"object\" && nativeJSON) {\n\t      exports.stringify = nativeJSON.stringify;\n\t      exports.parse = nativeJSON.parse;\n\t    }\n\n\t    // Convenience aliases.\n\t    var objectProto = Object.prototype,\n\t        getClass = objectProto.toString,\n\t        isProperty, forEach, undef;\n\n\t    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\t    var isExtended = new Date(-3509827334573292);\n\t    try {\n\t      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n\t      // results for certain dates in Opera >= 10.53.\n\t      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n\t        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n\t        // but clips the values returned by the date methods to the range of\n\t        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n\t        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n\t    } catch (exception) {}\n\n\t    // Internal: Determines whether the native `JSON.stringify` and `parse`\n\t    // implementations are spec-compliant. Based on work by Ken Snyder.\n\t    function has(name) {\n\t      if (has[name] !== undef) {\n\t        // Return cached feature test result.\n\t        return has[name];\n\t      }\n\t      var isSupported;\n\t      if (name == \"bug-string-char-index\") {\n\t        // IE <= 7 doesn't support accessing string characters using square\n\t        // bracket notation. IE 8 only supports this for primitives.\n\t        isSupported = \"a\"[0] != \"a\";\n\t      } else if (name == \"json\") {\n\t        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n\t        // supported.\n\t        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n\t      } else {\n\t        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n\t        // Test `JSON.stringify`.\n\t        if (name == \"json-stringify\") {\n\t          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n\t          if (stringifySupported) {\n\t            // A test function object with a custom `toJSON` method.\n\t            (value = function () {\n\t              return 1;\n\t            }).toJSON = value;\n\t            try {\n\t              stringifySupported =\n\t                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n\t                // primitives as object literals.\n\t                stringify(0) === \"0\" &&\n\t                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n\t                // literals.\n\t                stringify(new Number()) === \"0\" &&\n\t                stringify(new String()) == '\"\"' &&\n\t                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n\t                // does not define a canonical JSON representation (this applies to\n\t                // objects with `toJSON` properties as well, *unless* they are nested\n\t                // within an object or array).\n\t                stringify(getClass) === undef &&\n\t                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n\t                // FF 3.1b3 pass this test.\n\t                stringify(undef) === undef &&\n\t                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n\t                // respectively, if the value is omitted entirely.\n\t                stringify() === undef &&\n\t                // FF 3.1b1, 2 throw an error if the given value is not a number,\n\t                // string, array, object, Boolean, or `null` literal. This applies to\n\t                // objects with custom `toJSON` methods as well, unless they are nested\n\t                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n\t                // methods entirely.\n\t                stringify(value) === \"1\" &&\n\t                stringify([value]) == \"[1]\" &&\n\t                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n\t                // `\"[null]\"`.\n\t                stringify([undef]) == \"[null]\" &&\n\t                // YUI 3.0.0b1 fails to serialize `null` literals.\n\t                stringify(null) == \"null\" &&\n\t                // FF 3.1b1, 2 halts serialization if an array contains a function:\n\t                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n\t                // elides non-JSON values from objects and arrays, unless they\n\t                // define custom `toJSON` methods.\n\t                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n\t                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n\t                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n\t                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n\t                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n\t                stringify(null, value) === \"1\" &&\n\t                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n\t                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n\t                // serialize extended years.\n\t                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n\t                // The milliseconds are optional in ES 5, but required in 5.1.\n\t                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n\t                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n\t                // four-digit years instead of six-digit years. Credits: @Yaffle.\n\t                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n\t                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n\t                // values less than 1000. Credits: @Yaffle.\n\t                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n\t            } catch (exception) {\n\t              stringifySupported = false;\n\t            }\n\t          }\n\t          isSupported = stringifySupported;\n\t        }\n\t        // Test `JSON.parse`.\n\t        if (name == \"json-parse\") {\n\t          var parse = exports.parse;\n\t          if (typeof parse == \"function\") {\n\t            try {\n\t              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n\t              // Conforming implementations should also coerce the initial argument to\n\t              // a string prior to parsing.\n\t              if (parse(\"0\") === 0 && !parse(false)) {\n\t                // Simple parsing test.\n\t                value = parse(serialized);\n\t                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\t                if (parseSupported) {\n\t                  try {\n\t                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n\t                    parseSupported = !parse('\"\\t\"');\n\t                  } catch (exception$1) {}\n\t                  if (parseSupported) {\n\t                    try {\n\t                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n\t                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n\t                      // certain octal literals.\n\t                      parseSupported = parse(\"01\") !== 1;\n\t                    } catch (exception$2) {}\n\t                  }\n\t                  if (parseSupported) {\n\t                    try {\n\t                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n\t                      // points. These environments, along with FF 3.1b1 and 2,\n\t                      // also allow trailing commas in JSON objects and arrays.\n\t                      parseSupported = parse(\"1.\") !== 1;\n\t                    } catch (exception$3) {}\n\t                  }\n\t                }\n\t              }\n\t            } catch (exception$4) {\n\t              parseSupported = false;\n\t            }\n\t          }\n\t          isSupported = parseSupported;\n\t        }\n\t      }\n\t      return has[name] = !!isSupported;\n\t    }\n\n\t    if (!has(\"json\")) {\n\t      // Common `[[Class]]` name aliases.\n\t      var functionClass = \"[object Function]\",\n\t          dateClass = \"[object Date]\",\n\t          numberClass = \"[object Number]\",\n\t          stringClass = \"[object String]\",\n\t          arrayClass = \"[object Array]\",\n\t          booleanClass = \"[object Boolean]\";\n\n\t      // Detect incomplete support for accessing string characters by index.\n\t      var charIndexBuggy = has(\"bug-string-char-index\");\n\n\t      // Define additional utility methods if the `Date` methods are buggy.\n\t      if (!isExtended) {\n\t        var floor = Math.floor;\n\t        // A mapping between the months of the year and the number of days between\n\t        // January 1st and the first of the respective month.\n\t        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n\t        // Internal: Calculates the number of days between the Unix epoch and the\n\t        // first day of the given month.\n\t        var getDay = function (year, month) {\n\t          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n\t        };\n\t      }\n\n\t      // Internal: Determines if a property is a direct property of the given\n\t      // object. Delegates to the native `Object#hasOwnProperty` method.\n\t      if (!(isProperty = objectProto.hasOwnProperty)) {\n\t        isProperty = function (property) {\n\t          var members = {}, constructor;\n\t          if ((members.__proto__ = null, members.__proto__ = {\n\t            // The *proto* property cannot be set multiple times in recent\n\t            // versions of Firefox and SeaMonkey.\n\t            \"toString\": 1\n\t          }, members).toString != getClass) {\n\t            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n\t            // supports the mutable *proto* property.\n\t            isProperty = function (property) {\n\t              // Capture and break the object's prototype chain (see section 8.6.2\n\t              // of the ES 5.1 spec). The parenthesized expression prevents an\n\t              // unsafe transformation by the Closure Compiler.\n\t              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n\t              // Restore the original prototype chain.\n\t              this.__proto__ = original;\n\t              return result;\n\t            };\n\t          } else {\n\t            // Capture a reference to the top-level `Object` constructor.\n\t            constructor = members.constructor;\n\t            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n\t            // other environments.\n\t            isProperty = function (property) {\n\t              var parent = (this.constructor || constructor).prototype;\n\t              return property in this && !(property in parent && this[property] === parent[property]);\n\t            };\n\t          }\n\t          members = null;\n\t          return isProperty.call(this, property);\n\t        };\n\t      }\n\n\t      // Internal: Normalizes the `for...in` iteration algorithm across\n\t      // environments. Each enumerated key is yielded to a `callback` function.\n\t      forEach = function (object, callback) {\n\t        var size = 0, Properties, members, property;\n\n\t        // Tests for bugs in the current environment's `for...in` algorithm. The\n\t        // `valueOf` property inherits the non-enumerable flag from\n\t        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\t        (Properties = function () {\n\t          this.valueOf = 0;\n\t        }).prototype.valueOf = 0;\n\n\t        // Iterate over a new instance of the `Properties` class.\n\t        members = new Properties();\n\t        for (property in members) {\n\t          // Ignore all properties inherited from `Object.prototype`.\n\t          if (isProperty.call(members, property)) {\n\t            size++;\n\t          }\n\t        }\n\t        Properties = members = null;\n\n\t        // Normalize the iteration algorithm.\n\t        if (!size) {\n\t          // A list of non-enumerable properties inherited from `Object.prototype`.\n\t          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n\t          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n\t          // properties.\n\t          forEach = function (object, callback) {\n\t            var isFunction = getClass.call(object) == functionClass, property, length;\n\t            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n\t            for (property in object) {\n\t              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n\t              // certain conditions; IE does not.\n\t              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n\t                callback(property);\n\t              }\n\t            }\n\t            // Manually invoke the callback for each non-enumerable property.\n\t            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property)){ }\n\t          };\n\t        } else if (size == 2) {\n\t          // Safari <= 2.0.4 enumerates shadowed properties twice.\n\t          forEach = function (object, callback) {\n\t            // Create a set of iterated properties.\n\t            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n\t            for (property in object) {\n\t              // Store each property name to prevent double enumeration. The\n\t              // `prototype` property of functions is not enumerated due to cross-\n\t              // environment inconsistencies.\n\t              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n\t                callback(property);\n\t              }\n\t            }\n\t          };\n\t        } else {\n\t          // No bugs detected; use the standard `for...in` algorithm.\n\t          forEach = function (object, callback) {\n\t            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n\t            for (property in object) {\n\t              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n\t                callback(property);\n\t              }\n\t            }\n\t            // Manually invoke the callback for the `constructor` property due to\n\t            // cross-environment inconsistencies.\n\t            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n\t              callback(property);\n\t            }\n\t          };\n\t        }\n\t        return forEach(object, callback);\n\t      };\n\n\t      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n\t      // `filter` argument may specify either a function that alters how object and\n\t      // array members are serialized, or an array of strings and numbers that\n\t      // indicates which properties should be serialized. The optional `width`\n\t      // argument may be either a string or number that specifies the indentation\n\t      // level of the output.\n\t      if (!has(\"json-stringify\")) {\n\t        // Internal: A map of control characters and their escaped equivalents.\n\t        var Escapes = {\n\t          92: \"\\\\\\\\\",\n\t          34: '\\\\\"',\n\t          8: \"\\\\b\",\n\t          12: \"\\\\f\",\n\t          10: \"\\\\n\",\n\t          13: \"\\\\r\",\n\t          9: \"\\\\t\"\n\t        };\n\n\t        // Internal: Converts `value` into a zero-padded string such that its\n\t        // length is at least equal to `width`. The `width` must be <= 6.\n\t        var leadingZeroes = \"000000\";\n\t        var toPaddedString = function (width, value) {\n\t          // The `|| 0` expression is necessary to work around a bug in\n\t          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n\t          return (leadingZeroes + (value || 0)).slice(-width);\n\t        };\n\n\t        // Internal: Double-quotes a string `value`, replacing all ASCII control\n\t        // characters (characters with code unit values between 0 and 31) with\n\t        // their escaped equivalents. This is an implementation of the\n\t        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n\t        var unicodePrefix = \"\\\\u00\";\n\t        var quote = function (value) {\n\t          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n\t          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n\t          for (; index < length; index++) {\n\t            var charCode = value.charCodeAt(index);\n\t            // If the character is a control character, append its Unicode or\n\t            // shorthand escape sequence; otherwise, append the character as-is.\n\t            switch (charCode) {\n\t              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n\t                result += Escapes[charCode];\n\t                break;\n\t              default:\n\t                if (charCode < 32) {\n\t                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n\t                  break;\n\t                }\n\t                result += useCharIndex ? symbols[index] : value.charAt(index);\n\t            }\n\t          }\n\t          return result + '\"';\n\t        };\n\n\t        // Internal: Recursively serializes an object. Implements the\n\t        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\t        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n\t          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n\t          try {\n\t            // Necessary for host object support.\n\t            value = object[property];\n\t          } catch (exception) {}\n\t          if (typeof value == \"object\" && value) {\n\t            className = getClass.call(value);\n\t            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n\t              if (value > -1 / 0 && value < 1 / 0) {\n\t                // Dates are serialized according to the `Date#toJSON` method\n\t                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n\t                // for the ISO 8601 date time string format.\n\t                if (getDay) {\n\t                  // Manually compute the year, month, date, hours, minutes,\n\t                  // seconds, and milliseconds if the `getUTC*` methods are\n\t                  // buggy. Adapted from @Yaffle's `date-shim` project.\n\t                  date = floor(value / 864e5);\n\t                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++){ }\n\t                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++){ }\n\t                  date = 1 + date - getDay(year, month);\n\t                  // The `time` value specifies the time within the day (see ES\n\t                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n\t                  // to compute `A modulo B`, as the `%` operator does not\n\t                  // correspond to the `modulo` operation for negative numbers.\n\t                  time = (value % 864e5 + 864e5) % 864e5;\n\t                  // The hours, minutes, seconds, and milliseconds are obtained by\n\t                  // decomposing the time within the day. See section 15.9.1.10.\n\t                  hours = floor(time / 36e5) % 24;\n\t                  minutes = floor(time / 6e4) % 60;\n\t                  seconds = floor(time / 1e3) % 60;\n\t                  milliseconds = time % 1e3;\n\t                } else {\n\t                  year = value.getUTCFullYear();\n\t                  month = value.getUTCMonth();\n\t                  date = value.getUTCDate();\n\t                  hours = value.getUTCHours();\n\t                  minutes = value.getUTCMinutes();\n\t                  seconds = value.getUTCSeconds();\n\t                  milliseconds = value.getUTCMilliseconds();\n\t                }\n\t                // Serialize extended years correctly.\n\t                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n\t                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n\t                  // Months, dates, hours, minutes, and seconds should have two\n\t                  // digits; milliseconds should have three.\n\t                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n\t                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n\t                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n\t              } else {\n\t                value = null;\n\t              }\n\t            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n\t              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n\t              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n\t              // ignores all `toJSON` methods on these objects unless they are\n\t              // defined directly on an instance.\n\t              value = value.toJSON(property);\n\t            }\n\t          }\n\t          if (callback) {\n\t            // If a replacement function was provided, call it to obtain the value\n\t            // for serialization.\n\t            value = callback.call(object, property, value);\n\t          }\n\t          if (value === null) {\n\t            return \"null\";\n\t          }\n\t          className = getClass.call(value);\n\t          if (className == booleanClass) {\n\t            // Booleans are represented literally.\n\t            return \"\" + value;\n\t          } else if (className == numberClass) {\n\t            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n\t            // `\"null\"`.\n\t            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\t          } else if (className == stringClass) {\n\t            // Strings are double-quoted and escaped.\n\t            return quote(\"\" + value);\n\t          }\n\t          // Recursively serialize objects and arrays.\n\t          if (typeof value == \"object\") {\n\t            // Check for cyclic structures. This is a linear search; performance\n\t            // is inversely proportional to the number of unique nested objects.\n\t            for (length = stack.length; length--;) {\n\t              if (stack[length] === value) {\n\t                // Cyclic structures cannot be serialized by `JSON.stringify`.\n\t                throw TypeError();\n\t              }\n\t            }\n\t            // Add the object to the stack of traversed objects.\n\t            stack.push(value);\n\t            results = [];\n\t            // Save the current indentation level and indent one additional level.\n\t            prefix = indentation;\n\t            indentation += whitespace;\n\t            if (className == arrayClass) {\n\t              // Recursively serialize array elements.\n\t              for (index = 0, length = value.length; index < length; index++) {\n\t                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n\t                results.push(element === undef ? \"null\" : element);\n\t              }\n\t              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n\t            } else {\n\t              // Recursively serialize object members. Members are selected from\n\t              // either a user-specified list of property names, or the object\n\t              // itself.\n\t              forEach(properties || value, function (property) {\n\t                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\t                if (element !== undef) {\n\t                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n\t                  // is not the empty string, let `member` {quote(property) + \":\"}\n\t                  // be the concatenation of `member` and the `space` character.\"\n\t                  // The \"`space` character\" refers to the literal space\n\t                  // character, not the `space` {width} argument provided to\n\t                  // `JSON.stringify`.\n\t                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n\t                }\n\t              });\n\t              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n\t            }\n\t            // Remove the object from the traversed object stack.\n\t            stack.pop();\n\t            return result;\n\t          }\n\t        };\n\n\t        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\t        exports.stringify = function (source, filter, width) {\n\t          var whitespace, callback, properties, className;\n\t          if (objectTypes[typeof filter] && filter) {\n\t            if ((className = getClass.call(filter)) == functionClass) {\n\t              callback = filter;\n\t            } else if (className == arrayClass) {\n\t              // Convert the property names array into a makeshift set.\n\t              properties = {};\n\t              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1)){ }\n\t            }\n\t          }\n\t          if (width) {\n\t            if ((className = getClass.call(width)) == numberClass) {\n\t              // Convert the `width` to an integer and create a string containing\n\t              // `width` number of space characters.\n\t              if ((width -= width % 1) > 0) {\n\t                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \"){ }\n\t              }\n\t            } else if (className == stringClass) {\n\t              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n\t            }\n\t          }\n\t          // Opera <= 7.54u2 discards the values associated with empty string keys\n\t          // (`\"\"`) only if they are used directly within an object member list\n\t          // (e.g., `!(\"\" in { \"\": 1})`).\n\t          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n\t        };\n\t      }\n\n\t      // Public: Parses a JSON source string.\n\t      if (!has(\"json-parse\")) {\n\t        var fromCharCode = String.fromCharCode;\n\n\t        // Internal: A map of escaped control characters and their unescaped\n\t        // equivalents.\n\t        var Unescapes = {\n\t          92: \"\\\\\",\n\t          34: '\"',\n\t          47: \"/\",\n\t          98: \"\\b\",\n\t          116: \"\\t\",\n\t          110: \"\\n\",\n\t          102: \"\\f\",\n\t          114: \"\\r\"\n\t        };\n\n\t        // Internal: Stores the parser state.\n\t        var Index, Source;\n\n\t        // Internal: Resets the parser state and throws a `SyntaxError`.\n\t        var abort = function () {\n\t          Index = Source = null;\n\t          throw SyntaxError();\n\t        };\n\n\t        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n\t        // the end of the source string. A token may be a string, number, `null`\n\t        // literal, or Boolean literal.\n\t        var lex = function () {\n\t          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n\t          while (Index < length) {\n\t            charCode = source.charCodeAt(Index);\n\t            switch (charCode) {\n\t              case 9: case 10: case 13: case 32:\n\t                // Skip whitespace tokens, including tabs, carriage returns, line\n\t                // feeds, and space characters.\n\t                Index++;\n\t                break;\n\t              case 123: case 125: case 91: case 93: case 58: case 44:\n\t                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n\t                // the current position.\n\t                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n\t                Index++;\n\t                return value;\n\t              case 34:\n\t                // `\"` delimits a JSON string; advance to the next character and\n\t                // begin parsing the string. String tokens are prefixed with the\n\t                // sentinel `@` character to distinguish them from punctuators and\n\t                // end-of-string tokens.\n\t                for (value = \"@\", Index++; Index < length;) {\n\t                  charCode = source.charCodeAt(Index);\n\t                  if (charCode < 32) {\n\t                    // Unescaped ASCII control characters (those with a code unit\n\t                    // less than the space character) are not permitted.\n\t                    abort();\n\t                  } else if (charCode == 92) {\n\t                    // A reverse solidus (`\\`) marks the beginning of an escaped\n\t                    // control character (including `\"`, `\\`, and `/`) or Unicode\n\t                    // escape sequence.\n\t                    charCode = source.charCodeAt(++Index);\n\t                    switch (charCode) {\n\t                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n\t                        // Revive escaped control characters.\n\t                        value += Unescapes[charCode];\n\t                        Index++;\n\t                        break;\n\t                      case 117:\n\t                        // `\\u` marks the beginning of a Unicode escape sequence.\n\t                        // Advance to the first character and validate the\n\t                        // four-digit code point.\n\t                        begin = ++Index;\n\t                        for (position = Index + 4; Index < position; Index++) {\n\t                          charCode = source.charCodeAt(Index);\n\t                          // A valid sequence comprises four hexdigits (case-\n\t                          // insensitive) that form a single hexadecimal value.\n\t                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n\t                            // Invalid Unicode escape sequence.\n\t                            abort();\n\t                          }\n\t                        }\n\t                        // Revive the escaped character.\n\t                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n\t                        break;\n\t                      default:\n\t                        // Invalid escape sequence.\n\t                        abort();\n\t                    }\n\t                  } else {\n\t                    if (charCode == 34) {\n\t                      // An unescaped double-quote character marks the end of the\n\t                      // string.\n\t                      break;\n\t                    }\n\t                    charCode = source.charCodeAt(Index);\n\t                    begin = Index;\n\t                    // Optimize for the common case where a string is valid.\n\t                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n\t                      charCode = source.charCodeAt(++Index);\n\t                    }\n\t                    // Append the string as-is.\n\t                    value += source.slice(begin, Index);\n\t                  }\n\t                }\n\t                if (source.charCodeAt(Index) == 34) {\n\t                  // Advance to the next character and return the revived string.\n\t                  Index++;\n\t                  return value;\n\t                }\n\t                // Unterminated string.\n\t                abort();\n\t              default:\n\t                // Parse numbers and literals.\n\t                begin = Index;\n\t                // Advance past the negative sign, if one is specified.\n\t                if (charCode == 45) {\n\t                  isSigned = true;\n\t                  charCode = source.charCodeAt(++Index);\n\t                }\n\t                // Parse an integer or floating-point value.\n\t                if (charCode >= 48 && charCode <= 57) {\n\t                  // Leading zeroes are interpreted as octal literals.\n\t                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n\t                    // Illegal octal literal.\n\t                    abort();\n\t                  }\n\t                  isSigned = false;\n\t                  // Parse the integer component.\n\t                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++){ }\n\t                  // Floats cannot contain a leading decimal point; however, this\n\t                  // case is already accounted for by the parser.\n\t                  if (source.charCodeAt(Index) == 46) {\n\t                    position = ++Index;\n\t                    // Parse the decimal component.\n\t                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++){ }\n\t                    if (position == Index) {\n\t                      // Illegal trailing decimal.\n\t                      abort();\n\t                    }\n\t                    Index = position;\n\t                  }\n\t                  // Parse exponents. The `e` denoting the exponent is\n\t                  // case-insensitive.\n\t                  charCode = source.charCodeAt(Index);\n\t                  if (charCode == 101 || charCode == 69) {\n\t                    charCode = source.charCodeAt(++Index);\n\t                    // Skip past the sign following the exponent, if one is\n\t                    // specified.\n\t                    if (charCode == 43 || charCode == 45) {\n\t                      Index++;\n\t                    }\n\t                    // Parse the exponential component.\n\t                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++){ }\n\t                    if (position == Index) {\n\t                      // Illegal empty exponent.\n\t                      abort();\n\t                    }\n\t                    Index = position;\n\t                  }\n\t                  // Coerce the parsed value to a JavaScript number.\n\t                  return +source.slice(begin, Index);\n\t                }\n\t                // A negative sign may only precede numbers.\n\t                if (isSigned) {\n\t                  abort();\n\t                }\n\t                // `true`, `false`, and `null` literals.\n\t                if (source.slice(Index, Index + 4) == \"true\") {\n\t                  Index += 4;\n\t                  return true;\n\t                } else if (source.slice(Index, Index + 5) == \"false\") {\n\t                  Index += 5;\n\t                  return false;\n\t                } else if (source.slice(Index, Index + 4) == \"null\") {\n\t                  Index += 4;\n\t                  return null;\n\t                }\n\t                // Unrecognized token.\n\t                abort();\n\t            }\n\t          }\n\t          // Return the sentinel `$` character if the parser has reached the end\n\t          // of the source string.\n\t          return \"$\";\n\t        };\n\n\t        // Internal: Parses a JSON `value` token.\n\t        var get = function (value) {\n\t          var results, hasMembers;\n\t          if (value == \"$\") {\n\t            // Unexpected end of input.\n\t            abort();\n\t          }\n\t          if (typeof value == \"string\") {\n\t            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n\t              // Remove the sentinel `@` character.\n\t              return value.slice(1);\n\t            }\n\t            // Parse object and array literals.\n\t            if (value == \"[\") {\n\t              // Parses a JSON array, returning a new JavaScript array.\n\t              results = [];\n\t              for (;; hasMembers || (hasMembers = true)) {\n\t                value = lex();\n\t                // A closing square bracket marks the end of the array literal.\n\t                if (value == \"]\") {\n\t                  break;\n\t                }\n\t                // If the array literal contains elements, the current token\n\t                // should be a comma separating the previous element from the\n\t                // next.\n\t                if (hasMembers) {\n\t                  if (value == \",\") {\n\t                    value = lex();\n\t                    if (value == \"]\") {\n\t                      // Unexpected trailing `,` in array literal.\n\t                      abort();\n\t                    }\n\t                  } else {\n\t                    // A `,` must separate each array element.\n\t                    abort();\n\t                  }\n\t                }\n\t                // Elisions and leading commas are not permitted.\n\t                if (value == \",\") {\n\t                  abort();\n\t                }\n\t                results.push(get(value));\n\t              }\n\t              return results;\n\t            } else if (value == \"{\") {\n\t              // Parses a JSON object, returning a new JavaScript object.\n\t              results = {};\n\t              for (;; hasMembers || (hasMembers = true)) {\n\t                value = lex();\n\t                // A closing curly brace marks the end of the object literal.\n\t                if (value == \"}\") {\n\t                  break;\n\t                }\n\t                // If the object literal contains members, the current token\n\t                // should be a comma separator.\n\t                if (hasMembers) {\n\t                  if (value == \",\") {\n\t                    value = lex();\n\t                    if (value == \"}\") {\n\t                      // Unexpected trailing `,` in object literal.\n\t                      abort();\n\t                    }\n\t                  } else {\n\t                    // A `,` must separate each object member.\n\t                    abort();\n\t                  }\n\t                }\n\t                // Leading commas are not permitted, object property names must be\n\t                // double-quoted strings, and a `:` must separate each property\n\t                // name and value.\n\t                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n\t                  abort();\n\t                }\n\t                results[value.slice(1)] = get(lex());\n\t              }\n\t              return results;\n\t            }\n\t            // Unexpected token encountered.\n\t            abort();\n\t          }\n\t          return value;\n\t        };\n\n\t        // Internal: Updates a traversed object member.\n\t        var update = function (source, property, callback) {\n\t          var element = walk(source, property, callback);\n\t          if (element === undef) {\n\t            delete source[property];\n\t          } else {\n\t            source[property] = element;\n\t          }\n\t        };\n\n\t        // Internal: Recursively traverses a parsed JSON object, invoking the\n\t        // `callback` function for each value. This is an implementation of the\n\t        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\t        var walk = function (source, property, callback) {\n\t          var value = source[property], length;\n\t          if (typeof value == \"object\" && value) {\n\t            // `forEach` can't be used to traverse an array in Opera <= 8.54\n\t            // because its `Object#hasOwnProperty` implementation returns `false`\n\t            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n\t            if (getClass.call(value) == arrayClass) {\n\t              for (length = value.length; length--;) {\n\t                update(value, length, callback);\n\t              }\n\t            } else {\n\t              forEach(value, function (property) {\n\t                update(value, property, callback);\n\t              });\n\t            }\n\t          }\n\t          return callback.call(source, property, value);\n\t        };\n\n\t        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\t        exports.parse = function (source, callback) {\n\t          var result, value;\n\t          Index = 0;\n\t          Source = \"\" + source;\n\t          result = get(lex());\n\t          // If a JSON string contains multiple tokens, it is invalid.\n\t          if (lex() != \"$\") {\n\t            abort();\n\t          }\n\t          // Reset the parser state.\n\t          Index = Source = null;\n\t          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n\t        };\n\t      }\n\t    }\n\n\t    exports[\"runInContext\"] = runInContext;\n\t    return exports;\n\t  }\n\n\t  if (freeExports && !isLoader) {\n\t    // Export for CommonJS environments.\n\t    runInContext(root, freeExports);\n\t  } else {\n\t    // Export for web browsers and JavaScript engines.\n\t    var nativeJSON = root.JSON,\n\t        previousJSON = root[\"JSON3\"],\n\t        isRestored = false;\n\n\t    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n\t      // Public: Restores the original value of the global `JSON` object and\n\t      // returns a reference to the `JSON3` object.\n\t      \"noConflict\": function () {\n\t        if (!isRestored) {\n\t          isRestored = true;\n\t          root.JSON = nativeJSON;\n\t          root[\"JSON3\"] = previousJSON;\n\t          nativeJSON = previousJSON = null;\n\t        }\n\t        return JSON3;\n\t      }\n\t    }));\n\n\t    root.JSON = {\n\t      \"parse\": JSON3.parse,\n\t      \"stringify\": JSON3.stringify\n\t    };\n\t  }\n\t}).call(commonjsGlobal);\n\n\t//##############################################################################\n\t// DomUtils.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * A few utilities for interacting with the dom.\n\t\t * @class DomUtils\n\t\t */\n\t\tvar s = {};\n\n\t\ts.appendToHead = function (el) {\n\t\t\ts.getHead().appendChild(el);\n\t\t};\n\n\t\ts.getHead = function () {\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t\t};\n\n\t\ts.getBody = function () {\n\t\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t\t};\n\n\t\tcreatejs.DomUtils = s;\n\n\t}());\n\n\t//##############################################################################\n\t// DataUtils.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * A few data utilities for formatting different data types.\n\t\t * @class DataUtils\n\t\t */\n\t\tvar s = {};\n\n\t\t// static methods\n\t\t/**\n\t\t * Parse XML using the DOM. This is required when preloading XML or SVG.\n\t\t * @method parseXML\n\t\t * @param {String} text The raw text or XML that is loaded by XHR.\n\t\t * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\n\t\t * @return {XML} An XML document\n\t\t * @static\n\t\t */\n\t\ts.parseXML = function (text, type) {\n\t\t\tvar xml = null;\n\t\t\t// CocoonJS does not support XML parsing with either method.\n\n\t\t\t// Most browsers will use DOMParser\n\t\t\t// IE fails on certain SVG files, so we have a fallback below.\n\t\t\ttry {\n\t\t\t\tif (window.DOMParser) {\n\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\txml = parser.parseFromString(text, type);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t}\n\n\t\t\t// Fallback for IE support.\n\t\t\tif (!xml) {\n\t\t\t\ttry {\n\t\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\t\txml.async = false;\n\t\t\t\t\txml.loadXML(text);\n\t\t\t\t} catch (e$1) {\n\t\t\t\t\txml = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn xml;\n\t\t};\n\n\t\t/**\n\t\t * Parse a string into an Object.\n\t\t * @method parseJSON\n\t\t * @param {String} value The loaded JSON string\n\t\t * @returns {Object} A JavaScript object.\n\t\t */\n\t\ts.parseJSON = function (value) {\n\t\t\tif (value == null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(value);\n\t\t\t} catch (e) {\n\t\t\t\t// TODO; Handle this with a custom error?\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.DataUtils = s;\n\n\t}());\n\n\t//##############################################################################\n\t// LoadItem.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t\t * @class LoadItem\n\t\t * @constructor\n\t\t * @since 0.6.0\n\t\t */\n\t\tfunction LoadItem() {\n\t\t\t/**\n\t\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t\t * string (recommended), or an HTML tag.\n\t\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t\t * @property src\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.src = null;\n\n\t\t\t/**\n\t\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t\t * @property type\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.type = null;\n\n\t\t\t/**\n\t\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t\t * @property id\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.id = null;\n\n\t\t\t/**\n\t\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t\t * @property maintainOrder\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.maintainOrder = false;\n\n\t\t\t/**\n\t\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t\t * @property callback\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.callback = null;\n\n\t\t\t/**\n\t\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t\t * @property data\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.data = null;\n\n\t\t\t/**\n\t\t\t * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\n\t\t\t * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t\t * @property method\n\t\t\t * @type {String}\n\t\t\t * @default get\n\t\t\t */\n\t\t\tthis.method = createjs.LoadItem.GET;\n\n\t\t\t/**\n\t\t\t * An object hash of name/value pairs to send to the server.\n\t\t\t * @property values\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.values = null;\n\n\t\t\t/**\n\t\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t\t * default headers by including them in your headers object.\n\t\t\t * @property headers\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.headers = null;\n\n\t\t\t/**\n\t\t\t * Enable credentials for XHR requests.\n\t\t\t * @property withCredentials\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.withCredentials = false;\n\n\t\t\t/**\n\t\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t\t * based files (json, xml, text, css, js).\n\t\t\t * @property mimeType\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.mimeType = null;\n\n\t\t\t/**\n\t\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t\t * @property crossOrigin\n\t\t\t * @type {boolean}\n\t\t\t * @default Anonymous\n\t\t\t */\n\t\t\tthis.crossOrigin = null;\n\n\t\t\t/**\n\t\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t\t * @property loadTimeout\n\t\t\t * @type {Number}\n\t\t\t * @default 8000 (8 seconds)\n\t\t\t */\n\t\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t}\n\t\tvar p = LoadItem.prototype = {};\n\t\tvar s = LoadItem;\n\n\t\t/**\n\t\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property LOAD_TIMEOUT_DEFAULT\n\t\t * @type {number}\n\t\t * @static\n\t\t */\n\t\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t\t/**\n\t\t * Create a LoadItem.\n\t\t * <ul>\n\t\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t\t *     <li>LoadItem instances are returned as-is</li>\n\t\t *     <li>Objects are returned with any needed properties added</li>\n\t\t * </ul>\n\t\t * @method create\n\t\t * @param {LoadItem|String|Object} value The load item value\n\t\t * @returns {LoadItem|Object}\n\t\t * @static\n\t\t */\n\t\ts.create = function (value) {\n\t\t\tif (typeof value == \"string\") {\n\t\t\t\tvar item = new LoadItem();\n\t\t\t\titem.src = value;\n\t\t\t\treturn item;\n\t\t\t} else if (value instanceof s) {\n\t\t\t\treturn value;\n\t\t\t} else if (value instanceof Object && value.src) {\n\t\t\t\tif (value.loadTimeout == null) {\n\t\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t\t *\n\t\t * @method set\n\t\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t\t*/\n\t\tp.set = function(props) {\n\t\t\tfor (var n in props) { this[n] = props[n]; }\n\t\t\treturn this;\n\t\t};\n\n\t\tcreatejs.LoadItem = s;\n\n\t}());\n\n\t//##############################################################################\n\t// RequestUtils.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t\t * @class RequestUtils\n\t\t */\n\t\tvar s = {};\n\n\t\t/**\n\t\t * The Regular Expression used to test file URLS for an absolute path.\n\t\t * @property ABSOLUTE_PATH\n\t\t * @type {RegExp}\n\t\t * @static\n\t\t */\n\t\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t\t/**\n\t\t * The Regular Expression used to test file URLS for a relative path.\n\t\t * @property RELATIVE_PATH\n\t\t * @type {RegExp}\n\t\t * @static\n\t\t */\n\t\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t\t/**\n\t\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t\t * removed.\n\t\t * @property EXTENSION_PATT\n\t\t * @type {RegExp}\n\t\t * @static\n\t\t */\n\t\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t\t/**\n\t\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t\t * <ul>\n\t\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t\t *     `//networkPath`)</li>\n\t\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t\t *     the file path is expected to follow the format `name.ext`.</li>\n\t\t * </ul>\n\t\t * @method parseURI\n\t\t * @param {String} path\n\t\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\n\t\t * property, which is the lowercase extension.\n\t\t * @static\n\t\t */\n\t\ts.parseURI = function (path) {\n\t\t\tvar info = {absolute: false, relative: false};\n\t\t\tif (path == null) { return info; }\n\n\t\t\t// Drop the query string\n\t\t\tvar queryIndex = path.indexOf(\"?\");\n\t\t\tif (queryIndex > -1) {\n\t\t\t\tpath = path.substr(0, queryIndex);\n\t\t\t}\n\n\t\t\t// Absolute\n\t\t\tvar match;\n\t\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\t\tinfo.absolute = true;\n\n\t\t\t\t// Relative\n\t\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\t\tinfo.relative = true;\n\t\t\t}\n\n\t\t\t// Extension\n\t\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t\t}\n\t\t\treturn info;\n\t\t};\n\n\t\t/**\n\t\t * Formats an object into a query string for either a POST or GET request.\n\t\t * @method formatQueryString\n\t\t * @param {Object} data The data to convert to a query string.\n\t\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t\t * @static\n\t\t */\n\t\ts.formatQueryString = function (data, query) {\n\t\t\tif (data == null) {\n\t\t\t\tthrow new Error('You must specify data.');\n\t\t\t}\n\t\t\tvar params = [];\n\t\t\tfor (var n in data) {\n\t\t\t\tparams.push(n + '=' + escape(data[n]));\n\t\t\t}\n\t\t\tif (query) {\n\t\t\t\tparams = params.concat(query);\n\t\t\t}\n\t\t\treturn params.join('&');\n\t\t};\n\n\t\t/**\n\t\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t\t * @method buildPath\n\t\t * @param {String} src The source path to add values to.\n\t\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t\t * path will be preserved.\n\t\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t\t * @static\n\t\t */\n\t\ts.buildPath = function (src, data) {\n\t\t\tif (data == null) {\n\t\t\t\treturn src;\n\t\t\t}\n\n\t\t\tvar query = [];\n\t\t\tvar idx = src.indexOf('?');\n\n\t\t\tif (idx != -1) {\n\t\t\t\tvar q = src.slice(idx + 1);\n\t\t\t\tquery = query.concat(q.split('&'));\n\t\t\t}\n\n\t\t\tif (idx != -1) {\n\t\t\t\treturn src.slice(0, idx) + '?' + this.formatQueryString(data, query);\n\t\t\t} else {\n\t\t\t\treturn src + '?' + this.formatQueryString(data, query);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method isCrossDomain\n\t\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t\t * @static\n\t\t */\n\t\ts.isCrossDomain = function (item) {\n\t\t\tvar target = document.createElement(\"a\");\n\t\t\ttarget.href = item.src;\n\n\t\t\tvar host = document.createElement(\"a\");\n\t\t\thost.href = location.href;\n\n\t\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t\t\t\t\t  (target.port != host.port ||\n\t\t\t\t\t\t\t   target.protocol != host.protocol ||\n\t\t\t\t\t\t\t   target.hostname != host.hostname);\n\t\t\treturn crossdomain;\n\t\t};\n\n\t\t/**\n\t\t * @method isLocal\n\t\t * @param {LoadItem|Object} item A load item with a `src` property\n\t\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t\t * well.\n\t\t * @static\n\t\t */\n\t\ts.isLocal = function (item) {\n\t\t\tvar target = document.createElement(\"a\");\n\t\t\ttarget.href = item.src;\n\t\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t\t};\n\n\t\t/**\n\t\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @method isBinary\n\t\t * @param {String} type The item type.\n\t\t * @return {Boolean} If the specified type is binary.\n\t\t * @static\n\t\t */\n\t\ts.isBinary = function (type) {\n\t\t\tswitch (type) {\n\t\t\t\tcase createjs.AbstractLoader.IMAGE:\n\t\t\t\tcase createjs.AbstractLoader.BINARY:\n\t\t\t\t\treturn true;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Check if item is a valid HTMLImageElement\n\t\t * @method isImageTag\n\t\t * @param {Object} item\n\t\t * @returns {Boolean}\n\t\t * @static\n\t\t */\n\t\ts.isImageTag = function(item) {\n\t\t\treturn item instanceof HTMLImageElement;\n\t\t};\n\n\t\t/**\n\t\t * Check if item is a valid HTMLAudioElement\n\t\t * @method isAudioTag\n\t\t * @param {Object} item\n\t\t * @returns {Boolean}\n\t\t * @static\n\t\t */\n\t\ts.isAudioTag = function(item) {\n\t\t\tif (window.HTMLAudioElement) {\n\t\t\t\treturn item instanceof HTMLAudioElement;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Check if item is a valid HTMLVideoElement\n\t\t * @method isVideoTag\n\t\t * @param {Object} item\n\t\t * @returns {Boolean}\n\t\t * @static\n\t\t */\n\t\ts.isVideoTag = function(item) {\n\t\t\tif (window.HTMLVideoElement) {\n\t\t\t\treturn item instanceof HTMLVideoElement;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t\t * @method isText\n\t\t * @param {String} type The item type.\n\t\t * @return {Boolean} If the specified type is text.\n\t\t * @static\n\t\t */\n\t\ts.isText = function (type) {\n\t\t\tswitch (type) {\n\t\t\t\tcase createjs.AbstractLoader.TEXT:\n\t\t\t\tcase createjs.AbstractLoader.JSON:\n\t\t\t\tcase createjs.AbstractLoader.MANIFEST:\n\t\t\t\tcase createjs.AbstractLoader.XML:\n\t\t\t\tcase createjs.AbstractLoader.CSS:\n\t\t\t\tcase createjs.AbstractLoader.SVG:\n\t\t\t\tcase createjs.AbstractLoader.JAVASCRIPT:\n\t\t\t\tcase createjs.AbstractLoader.SPRITESHEET:\n\t\t\t\t\treturn true;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t\t * if it is an unusual extension.\n\t\t * @method getTypeByExtension\n\t\t * @param {String} extension The file extension to use to determine the load type.\n\t\t * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\n\t\t * the type can not be determined by the extension.\n\t\t * @static\n\t\t */\n\t\ts.getTypeByExtension = function (extension) {\n\t\t\tif (extension == null) {\n\t\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t\t}\n\n\t\t\tswitch (extension.toLowerCase()) {\n\t\t\t\tcase \"jpeg\":\n\t\t\t\tcase \"jpg\":\n\t\t\t\tcase \"gif\":\n\t\t\t\tcase \"png\":\n\t\t\t\tcase \"webp\":\n\t\t\t\tcase \"bmp\":\n\t\t\t\t\treturn createjs.AbstractLoader.IMAGE;\n\t\t\t\tcase \"ogg\":\n\t\t\t\tcase \"mp3\":\n\t\t\t\tcase \"webm\":\n\t\t\t\t\treturn createjs.AbstractLoader.SOUND;\n\t\t\t\tcase \"mp4\":\n\t\t\t\tcase \"webm\":\n\t\t\t\tcase \"ts\":\n\t\t\t\t\treturn createjs.AbstractLoader.VIDEO;\n\t\t\t\tcase \"json\":\n\t\t\t\t\treturn createjs.AbstractLoader.JSON;\n\t\t\t\tcase \"xml\":\n\t\t\t\t\treturn createjs.AbstractLoader.XML;\n\t\t\t\tcase \"css\":\n\t\t\t\t\treturn createjs.AbstractLoader.CSS;\n\t\t\t\tcase \"js\":\n\t\t\t\t\treturn createjs.AbstractLoader.JAVASCRIPT;\n\t\t\t\tcase 'svg':\n\t\t\t\t\treturn createjs.AbstractLoader.SVG;\n\t\t\t\tdefault:\n\t\t\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.RequestUtils = s;\n\n\t}());\n\n\t//##############################################################################\n\t// AbstractLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t// constructor\n\t\t/**\n\t\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t\t * @class AbstractLoader\n\t\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t\t * other, so this is a suggested directive.\n\t\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t\t * @extends EventDispatcher\n\t\t */\n\t\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\t\tthis.EventDispatcher_constructor();\n\n\t\t\t// public properties\n\t\t\t/**\n\t\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t\t * @property loaded\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.loaded = false;\n\n\t\t\t/**\n\t\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t\t * instead.\n\t\t\t * @property canceled\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.canceled = false;\n\n\t\t\t/**\n\t\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t\t *\n\t\t\t * <h4>Example</h4>\n\t\t\t *\n\t\t\t *     var queue = new createjs.LoadQueue();\n\t\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t\t *     queue.on(\"progress\", function() {\n\t\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t\t *     });\n\t\t\t *\n\t\t\t * @property progress\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.progress = 0;\n\n\t\t\t/**\n\t\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t\t * supported types.\n\t\t\t * @property type\n\t\t\t * @type {String}\n\t\t\t */\n\t\t\tthis.type = type;\n\n\t\t\t/**\n\t\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t\t * can be overridden to provide custom formatting.\n\t\t\t *\n\t\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t\t *\n\t\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t\t *\n\t\t\t * \tfunction _formatResult(loader) {\n\t\t\t * \t\treturn function(success, error) {\n\t\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t\t * \t\t\tsuccess(result);\n\t\t\t * \t\t}\n\t\t\t * \t}\n\t\t\t * @property resultFormatter\n\t\t\t * @type {Function}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.resultFormatter = null;\n\n\t\t\t// protected properties\n\t\t\t/**\n\t\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t\t * @property _item\n\t\t\t * @type {LoadItem|Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tif (loadItem) {\n\t\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t\t} else {\n\t\t\t\tthis._item = null;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t\t * @property _preferXHR\n\t\t\t * @type {Boolean}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._preferXHR = preferXHR;\n\n\t\t\t/**\n\t\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t\t * @property _result\n\t\t\t * @type {Object|String}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._result = null;\n\n\t\t\t/**\n\t\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t\t * method, and passing `true`.\n\t\t\t * @property _rawResult\n\t\t\t * @type {Object|String}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._rawResult = null;\n\n\t\t\t/**\n\t\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t\t * @property _loadItems\n\t\t\t * @type {null}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._loadedItems = null;\n\n\t\t\t/**\n\t\t\t * The attribute the items loaded using tags use for the source.\n\t\t\t * @type {string}\n\t\t\t * @default null\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._tagSrcAttribute = null;\n\n\t\t\t/**\n\t\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t\t * @property _tag\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._tag = null;\n\t\t}\n\t\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\t\tvar s = AbstractLoader;\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t\t/**\n\t\t * Defines a POST request, use for a method value when loading data.\n\t\t * @property POST\n\t\t * @type {string}\n\t\t * @default post\n\t\t * @static\n\t\t */\n\t\ts.POST = \"POST\";\n\n\t\t/**\n\t\t * Defines a GET request, use for a method value when loading data.\n\t\t * @property GET\n\t\t * @type {string}\n\t\t * @default get\n\t\t * @static\n\t\t */\n\t\ts.GET = \"GET\";\n\n\t\t/**\n\t\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t\t * @property BINARY\n\t\t * @type {String}\n\t\t * @default binary\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.BINARY = \"binary\";\n\n\t\t/**\n\t\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t\t * &lt;style&gt; tag when loaded with tags.\n\t\t * @property CSS\n\t\t * @type {String}\n\t\t * @default css\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.CSS = \"css\";\n\n\t\t/**\n\t\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t\t * @property IMAGE\n\t\t * @type {String}\n\t\t * @default image\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.IMAGE = \"image\";\n\n\t\t/**\n\t\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t\t * &lt;script&gt; tag.\n\t\t *\n\t\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t\t * only tag-loaded scripts are injected.\n\t\t * @property JAVASCRIPT\n\t\t * @type {String}\n\t\t * @default javascript\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.JAVASCRIPT = \"javascript\";\n\n\t\t/**\n\t\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t\t * must contain a matching wrapper function.\n\t\t * @property JSON\n\t\t * @type {String}\n\t\t * @default json\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.JSON = \"json\";\n\n\t\t/**\n\t\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t\t * property is set to.\n\t\t * @property JSONP\n\t\t * @type {String}\n\t\t * @default jsonp\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.JSONP = \"jsonp\";\n\n\t\t/**\n\t\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t\t * @property MANIFEST\n\t\t * @type {String}\n\t\t * @default manifest\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.MANIFEST = \"manifest\";\n\n\t\t/**\n\t\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t\t * &lt;audio&gt; tag.\n\t\t * @property SOUND\n\t\t * @type {String}\n\t\t * @default sound\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.SOUND = \"sound\";\n\n\t\t/**\n\t\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t\t * &lt;video&gt; tag.\n\t\t * @property VIDEO\n\t\t * @type {String}\n\t\t * @default video\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.VIDEO = \"video\";\n\n\t\t/**\n\t\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t\t * @property SPRITESHEET\n\t\t * @type {String}\n\t\t * @default spritesheet\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.SPRITESHEET = \"spritesheet\";\n\n\t\t/**\n\t\t * The preload type for SVG files.\n\t\t * @property SVG\n\t\t * @type {String}\n\t\t * @default svg\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.SVG = \"svg\";\n\n\t\t/**\n\t\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t\t * loaded as raw text.\n\t\t * @property TEXT\n\t\t * @type {String}\n\t\t * @default text\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.TEXT = \"text\";\n\n\t\t/**\n\t\t * The preload type for xml files. XML is loaded into an XML document.\n\t\t * @property XML\n\t\t * @type {String}\n\t\t * @default xml\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.XML = \"xml\";\n\n\t// Events\n\t\t/**\n\t\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @event progress\n\t\t * @since 0.3.0\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t\t * @event loadstart\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.3.1\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t\t * @event complete\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.3.0\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @event error\n\t\t * @since 0.3.0\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t\t * @event fileerror\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The even type (\"fileerror\")\n\t\t * @param {LoadItem|object} The item that encountered the error\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t\t * @event fileload\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type (\"fileload\")\n\t\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t\t * object will contain that value as a `src` property.\n\t\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t\t * to a usable object.\n\t\t * @since 0.6.0\n\t\t */\n\n\t\t/**\n\t\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t\t * @event initialize\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type (\"initialize\")\n\t\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t\t */\n\n\n\t\t/**\n\t\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @method getItem\n\t\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getItem = function () {\n\t\t\treturn this._item;\n\t\t};\n\n\t\t/**\n\t\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t\t * event is dispatched.\n\t\t * @method getResult\n\t\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t\t * data (if it exists).\n\t\t * @return {Object}\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getResult = function (raw) {\n\t\t\treturn raw ? this._rawResult : this._result;\n\t\t};\n\n\t\t/**\n\t\t * Return the `tag` this object creates or uses for loading.\n\t\t * @method getTag\n\t\t * @return {Object} The tag instance\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getTag = function () {\n\t\t\treturn this._tag;\n\t\t};\n\n\t\t/**\n\t\t * Set the `tag` this item uses for loading.\n\t\t * @method setTag\n\t\t * @param {Object} tag The tag instance\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.setTag = function(tag) {\n\t\t  this._tag = tag;\n\t\t};\n\n\t\t/**\n\t\t * Begin loading the item. This method is required when using a loader by itself.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.on(\"complete\", handleComplete);\n\t\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t\t *      queue.load();\n\t\t *\n\t\t * @method load\n\t\t */\n\t\tp.load = function () {\n\t\t\tthis._createRequest();\n\n\t\t\tthis._request.on(\"complete\", this, this);\n\t\t\tthis._request.on(\"progress\", this, this);\n\t\t\tthis._request.on(\"loadStart\", this, this);\n\t\t\tthis._request.on(\"abort\", this, this);\n\t\t\tthis._request.on(\"timeout\", this, this);\n\t\t\tthis._request.on(\"error\", this, this);\n\n\t\t\tvar evt = new createjs.Event(\"initialize\");\n\t\t\tevt.loader = this._request;\n\t\t\tthis.dispatchEvent(evt);\n\n\t\t\tthis._request.load();\n\t\t};\n\n\t\t/**\n\t\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t\t * the background), but events will not longer be dispatched.\n\t\t * @method cancel\n\t\t */\n\t\tp.cancel = function () {\n\t\t\tthis.canceled = true;\n\t\t\tthis.destroy();\n\t\t};\n\n\t\t/**\n\t\t * Clean up the loader.\n\t\t * @method destroy\n\t\t */\n\t\tp.destroy = function() {\n\t\t\tif (this._request) {\n\t\t\t\tthis._request.removeAllEventListeners();\n\t\t\t\tthis._request.destroy();\n\t\t\t}\n\n\t\t\tthis._request = null;\n\n\t\t\tthis._item = null;\n\t\t\tthis._rawResult = null;\n\t\t\tthis._result = null;\n\n\t\t\tthis._loadItems = null;\n\n\t\t\tthis.removeAllEventListeners();\n\t\t};\n\n\t\t/**\n\t\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t\t * to expose items it loads internally.\n\t\t * @method getLoadedItems\n\t\t * @return {Array} A list of the items loaded by the loader.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getLoadedItems = function () {\n\t\t\treturn this._loadedItems;\n\t\t};\n\n\n\t\t// Private methods\n\t\t/**\n\t\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t\t * @method _createRequest\n\t\t * @protected\n\t\t */\n\t\tp._createRequest = function() {\n\t\t\tif (!this._preferXHR) {\n\t\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t\t} else {\n\t\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t\t * by loaders that require tag loading.\n\t\t * @method _createTag\n\t\t * @param {String} src The tag source\n\t\t * @return {HTMLElement} The tag that was created\n\t\t * @protected\n\t\t */\n\t\tp._createTag = function(src) { return null; };\n\n\t\t/**\n\t\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t\t * event for details on the event payload.\n\t\t * @method _sendLoadStart\n\t\t * @protected\n\t\t */\n\t\tp._sendLoadStart = function () {\n\t\t\tif (this._isCanceled()) { return; }\n\t\t\tthis.dispatchEvent(\"loadstart\");\n\t\t};\n\n\t\t/**\n\t\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t\t * @method _sendProgress\n\t\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t\t * and <code>total</code> properties.\n\t\t * @protected\n\t\t */\n\t\tp._sendProgress = function (value) {\n\t\t\tif (this._isCanceled()) { return; }\n\t\t\tvar event = null;\n\t\t\tif (typeof(value) == \"number\") {\n\t\t\t\tthis.progress = value;\n\t\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t\t} else {\n\t\t\t\tevent = value;\n\t\t\t\tthis.progress = value.loaded / value.total;\n\t\t\t\tevent.progress = this.progress;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t}\n\t\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t\t * @method _sendComplete\n\t\t * @protected\n\t\t */\n\t\tp._sendComplete = function () {\n\t\t\tif (this._isCanceled()) { return; }\n\n\t\t\tthis.loaded = true;\n\n\t\t\tvar event = new createjs.Event(\"complete\");\n\t\t\tevent.rawResult = this._rawResult;\n\n\t\t\tif (this._result != null) {\n\t\t\t\tevent.result = this._result;\n\t\t\t}\n\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t\t * event for details on the event payload.\n\t\t * @method _sendError\n\t\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t\t * @protected\n\t\t */\n\t\tp._sendError = function (event) {\n\t\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\t\tif (event == null) {\n\t\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t\t}\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t\t * do not cause issues after the queue has been cleaned up.\n\t\t * @method _isCanceled\n\t\t * @return {Boolean} If the loader has been canceled.\n\t\t * @protected\n\t\t */\n\t\tp._isCanceled = function () {\n\t\t\tif (window.createjs == null || this.canceled) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t\t * @property resultFormatter\n\t\t * @type Function\n\t\t * @return {Object} The formatted result\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.resultFormatter = null;\n\n\t\t/**\n\t\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t\t * this method can be overridden for custom behaviours.\n\t\t * @method handleEvent\n\t\t * @param {Event} event The event that the internal request dispatches.\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.handleEvent = function (event) {\n\t\t\tswitch (event.type) {\n\t\t\t\tcase \"complete\":\n\t\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\t\tthis._sendComplete();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"progress\":\n\t\t\t\t\tthis._sendProgress(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"error\":\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"loadstart\":\n\t\t\t\t\tthis._sendLoadStart();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"abort\":\n\t\t\t\tcase \"timeout\":\n\t\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t\t * functions.\n\t\t * @method _resultFormatSuccess\n\t\t * @param {Object} result The formatted result\n\t\t * @private\n\t\t */\n\t\tp._resultFormatSuccess = function (result) {\n\t\t\tthis._result = result;\n\t\t\tthis._sendComplete();\n\t\t};\n\n\t\t/**\n\t\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t\t * functions.\n\t\t * @method _resultFormatSuccess\n\t\t * @param {Object} error The error event\n\t\t * @private\n\t\t */\n\t\tp._resultFormatFailed = function (event) {\n\t\t\tthis._sendError(event);\n\t\t};\n\n\t\t/**\n\t\t * @method buildPath\n\t\t * @protected\n\t\t * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\n\t\t * instead.\n\t\t */\n\t\tp.buildPath = function (src, data) {\n\t\t\treturn createjs.RequestUtils.buildPath(src, data);\n\t\t};\n\n\t\t/**\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t */\n\t\tp.toString = function () {\n\t\t\treturn \"[PreloadJS AbstractLoader]\";\n\t\t};\n\n\t\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n\t}());\n\n\t//##############################################################################\n\t// AbstractMediaLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t\t * handle HTML media elements, such as Video and Audio.\n\t\t * @class AbstractMediaLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\n\t\t\t// protected properties\n\t\t\tthis._tagSrcAttribute = \"src\";\n\n\t        this.on(\"initialize\", this._updateXHR, this);\n\t\t}\n\t\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t\t// static properties\n\t\t// public methods\n\t\tp.load = function () {\n\t\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\t\tif (!this._tag) {\n\t\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t\t}\n\n\t\t\tthis._tag.preload = \"auto\";\n\t\t\tthis._tag.load();\n\n\t\t\tthis.AbstractLoader_load();\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * Creates a new tag for loading if it doesn't exist yet.\n\t\t * @method _createTag\n\t\t * @private\n\t\t */\n\t\tp._createTag = function () {};\n\n\n\t\tp._createRequest = function() {\n\t\t\tif (!this._preferXHR) {\n\t\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t\t} else {\n\t\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t\t}\n\t\t};\n\n\t    // protected methods\n\t    /**\n\t     * Before the item loads, set its mimeType and responseType.\n\t     * @property _updateXHR\n\t     * @param {Event} event\n\t     * @private\n\t     */\n\t    p._updateXHR = function (event) {\n\t        // Only exists for XHR\n\t        if (event.loader.setResponseType) {\n\t            event.loader.setResponseType(\"blob\");\n\t        }\n\t    };\n\n\t\t/**\n\t\t * The result formatter for media files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\t\tthis._tag.onstalled = null;\n\t\t\tif (this._preferXHR) {\n\t            var URL = window.URL || window.webkitURL;\n\t            var result = loader.getResult(true);\n\n\t\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t\t}\n\t\t\treturn loader.getTag();\n\t\t};\n\n\t\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// AbstractRequest.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t\t * hood to get data.\n\t\t * @class AbstractRequest\n\t\t * @param {LoadItem} item\n\t\t * @constructor\n\t\t */\n\t\tvar AbstractRequest = function (item) {\n\t\t\tthis._item = item;\n\t\t};\n\n\t\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t\t// public methods\n\t\t/**\n\t\t * Begin a load.\n\t\t * @method load\n\t\t */\n\t\tp.load =  function() {};\n\n\t\t/**\n\t\t * Clean up a request.\n\t\t * @method destroy\n\t\t */\n\t\tp.destroy = function() {};\n\n\t\t/**\n\t\t * Cancel an in-progress request.\n\t\t * @method cancel\n\t\t */\n\t\tp.cancel = function() {};\n\n\t\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n\t}());\n\n\t//##############################################################################\n\t// TagRequest.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t\t * @class TagRequest\n\t\t * @param {LoadItem} loadItem\n\t\t * @param {HTMLElement} tag\n\t\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t */\n\t\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t\t// protected properties\n\t\t\t/**\n\t\t\t * The HTML tag instance that is used to load.\n\t\t\t * @property _tag\n\t\t\t * @type {HTMLElement}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._tag = tag;\n\n\t\t\t/**\n\t\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t\t * @property _tagSrcAttribute\n\t\t\t * @type {String}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t\t/**\n\t\t\t * A method closure used for handling the tag load event.\n\t\t\t * @property _loadedHandler\n\t\t\t * @type {Function}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t\t/**\n\t\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t\t * @property _addedToDOM\n\t\t\t * @type {Boolean}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._addedToDOM = false;\n\n\t\t\t/**\n\t\t\t * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\n\t\t\t *\n\t\t\t * @type {null}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._startTagVisibility = null;\n\t\t}\n\t\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t\t// public methods\n\t\tp.load = function () {\n\t\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\t\tvar evt = new createjs.Event(\"initialize\");\n\t\t\tevt.loader = this._tag;\n\n\t\t\tthis.dispatchEvent(evt);\n\n\t\t\tthis._hideTag();\n\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\t\tif (this._tag.parentNode == null) {\n\t\t\t\twindow.document.body.appendChild(this._tag);\n\t\t\t\tthis._addedToDOM = true;\n\t\t\t}\n\t\t};\n\n\t\tp.destroy = function() {\n\t\t\tthis._clean();\n\t\t\tthis._tag = null;\n\n\t\t\tthis.AbstractRequest_destroy();\n\t\t};\n\n\t\t// private methods\n\t\t/**\n\t\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t\t * and LINK tags), but other cases may exist.\n\t\t * @method _handleReadyStateChange\n\t\t * @private\n\t\t */\n\t\tp._handleReadyStateChange = function () {\n\t\t\tclearTimeout(this._loadTimeout);\n\t\t\t// This is strictly for tags in browsers that do not support onload.\n\t\t\tvar tag = this._tag;\n\n\t\t\t// Complete is for old IE support.\n\t\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\t\tthis._handleTagComplete();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Handle any error events from the tag.\n\t\t * @method _handleError\n\t\t * @protected\n\t\t */\n\t\tp._handleError = function() {\n\t\t\tthis._clean();\n\t\t\tthis.dispatchEvent(\"error\");\n\t\t};\n\n\t\t/**\n\t\t * Handle the tag's onload callback.\n\t\t * @method _handleTagComplete\n\t\t * @private\n\t\t */\n\t\tp._handleTagComplete = function () {\n\t\t\tthis._rawResult = this._tag;\n\t\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\t\tthis._clean();\n\t\t\tthis._showTag();\n\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t};\n\n\t\t/**\n\t\t * The tag request has not loaded within the time specified in loadTimeout.\n\t\t * @method _handleError\n\t\t * @param {Object} event The XHR error event.\n\t\t * @private\n\t\t */\n\t\tp._handleTimeout = function () {\n\t\t\tthis._clean();\n\t\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t\t};\n\n\t\t/**\n\t\t * Remove event listeners, but don't destroy the request object\n\t\t * @method _clean\n\t\t * @private\n\t\t */\n\t\tp._clean = function() {\n\t\t\tthis._tag.onload = null;\n\t\t\tthis._tag.onreadystatechange = null;\n\t\t\tthis._tag.onerror = null;\n\t\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t\t}\n\t\t\tclearTimeout(this._loadTimeout);\n\t\t};\n\n\t\tp._hideTag = function() {\n\t\t\tthis._startTagVisibility = this._tag.style.visibility;\n\t\t\tthis._tag.style.visibility = \"hidden\";\n\t\t};\n\n\t\tp._showTag = function() {\n\t\t\tthis._tag.style.visibility = this._startTagVisibility;\n\t\t};\n\n\t\t/**\n\t\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t\t * that is already in a load, but not complete.\n\t\t * @method _handleStalled\n\t\t * @private\n\t\t */\n\t\tp._handleStalled = function () {\n\t\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t\t};\n\n\t\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n\t}());\n\n\t//##############################################################################\n\t// MediaTagRequest.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t\t * @class MediaTagRequest\n\t\t * @param {LoadItem} loadItem\n\t\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @constructor\n\t\t */\n\t\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t\t// protected properties\n\t\t\tthis._tag = tag;\n\t\t\tthis._tagSrcAttribute = srcAttribute;\n\t\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t\t}\n\t\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\n\t\t// public methods\n\t\tp.load = function () {\n\t\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\t\tthis._stalledCallback = sc;\n\n\t\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\t\tthis._handleProgress = pc;\n\n\t\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\t\tthis.TagRequest_load();\n\t\t};\n\n\t\t// private methods\n\t\tp._handleReadyStateChange = function () {\n\t\t\tclearTimeout(this._loadTimeout);\n\t\t\t// This is strictly for tags in browsers that do not support onload.\n\t\t\tvar tag = this._tag;\n\n\t\t\t// Complete is for old IE support.\n\t\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\t\tthis._handleTagComplete();\n\t\t\t}\n\t\t};\n\n\t\tp._handleStalled = function () {\n\t\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t\t};\n\n\t\t/**\n\t\t * An XHR request has reported progress.\n\t\t * @method _handleProgress\n\t\t * @param {Object} event The XHR progress event.\n\t\t * @private\n\t\t */\n\t\tp._handleProgress = function (event) {\n\t\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t\t}\n\n\t\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\t\tthis.dispatchEvent(newEvent);\n\t\t};\n\n\t\t// protected methods\n\t\tp._clean = function () {\n\t\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\t\tthis.TagRequest__clean();\n\t\t};\n\n\t\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n\t}());\n\n\t//##############################################################################\n\t// XHRRequest.js\n\t//##############################################################################\n\n\t(function () {\n\n\t// constructor\n\t\t/**\n\t\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t\t * cross-domain loading.\n\t\t * @class XHRRequest\n\t\t * @constructor\n\t\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t\t * for an overview of supported file properties.\n\t\t * @extends AbstractLoader\n\t\t */\n\t\tfunction XHRRequest (item) {\n\t\t\tthis.AbstractRequest_constructor(item);\n\n\t\t\t// protected properties\n\t\t\t/**\n\t\t\t * A reference to the XHR request used to load the content.\n\t\t\t * @property _request\n\t\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._request = null;\n\n\t\t\t/**\n\t\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t\t * typically IE9).\n\t\t\t * @property _loadTimeout\n\t\t\t * @type {Number}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadTimeout = null;\n\n\t\t\t/**\n\t\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t\t * the version, so we use capabilities to make a best guess.\n\t\t\t * @property _xhrLevel\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._xhrLevel = 1;\n\n\t\t\t/**\n\t\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t\t * null until the file is loaded.\n\t\t\t * @property _response\n\t\t\t * @type {mixed}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._response = null;\n\n\t\t\t/**\n\t\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t\t * want to access the raw content as it was loaded.\n\t\t\t * @property _rawResponse\n\t\t\t * @type {String|Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._rawResponse = null;\n\n\t\t\tthis._canceled = false;\n\n\t\t\t// Setup our event handlers now.\n\t\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\t\tif (!this._createXHR(item)) ;\n\t\t}\n\t\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n\t// static properties\n\t\t/**\n\t\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t\t * @property ACTIVEX_VERSIONS\n\t\t * @type {Array}\n\t\t * @since 0.4.2\n\t\t * @private\n\t\t */\n\t\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\t\"MSXML2.XMLHTTP\",\n\t\t\t\"Microsoft.XMLHTTP\"\n\t\t];\n\n\t// Public methods\n\t\t/**\n\t\t * Look up the loaded result.\n\t\t * @method getResult\n\t\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t\t * returned instead.\n\t\t * @return {Object} A result object containing the content that was loaded, such as:\n\t\t * <ul>\n\t\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t\t *      HTML head.</li>\n\t\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t\t *      <li>Raw text for TEXT</li>\n\t\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t\t *      <li>An XML document</li>\n\t\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t\t * </ul>\n\t\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t\t */\n\t\tp.getResult = function (raw) {\n\t\t\tif (raw && this._rawResponse) {\n\t\t\t\treturn this._rawResponse;\n\t\t\t}\n\t\t\treturn this._response;\n\t\t};\n\n\t\t// Overrides abstract method in AbstractRequest\n\t\tp.cancel = function () {\n\t\t\tthis.canceled = true;\n\t\t\tthis._clean();\n\t\t\tthis._request.abort();\n\t\t};\n\n\t\t// Overrides abstract method in AbstractLoader\n\t\tp.load = function () {\n\t\t\tif (this._request == null) {\n\t\t\t\tthis._handleError();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//Events\n\t\t\tif (this._request.addEventListener != null) {\n\t\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t\t} else {\n\t\t\t\t// IE9 support\n\t\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t\t}\n\n\t\t\t// Set up a timeout if we don't have XHR2\n\t\t\tif (this._xhrLevel == 1) {\n\t\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t\t}\n\n\t\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\t\ttry {\n\t\t\t\tif (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\n\t\t\t\t\tthis._request.send();\n\t\t\t\t} else if (this._item.method == createjs.AbstractLoader.POST) {\n\t\t\t\t\tthis._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t\t}\n\t\t};\n\n\t\tp.setResponseType = function (type) {\n\t\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\t\tif (type === 'blob') {\n\t\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\t\tthis._responseType = type;\n\t\t\t}\n\t\t\tthis._request.responseType = type;\n\t\t};\n\n\t\t/**\n\t\t * Get all the response headers from the XmlHttpRequest.\n\t\t *\n\t\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t\t * pair.\n\t\t * @method getAllResponseHeaders\n\t\t * @return {String}\n\t\t * @since 0.4.1\n\t\t */\n\t\tp.getAllResponseHeaders = function () {\n\t\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\t\treturn this._request.getAllResponseHeaders();\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Get a specific response header from the XmlHttpRequest.\n\t\t *\n\t\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t\t * @method getResponseHeader\n\t\t * @param {String} header The header name to retrieve.\n\t\t * @return {String}\n\t\t * @since 0.4.1\n\t\t */\n\t\tp.getResponseHeader = function (header) {\n\t\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\t\treturn this._request.getResponseHeader(header);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t// protected methods\n\t\t/**\n\t\t * The XHR request has reported progress.\n\t\t * @method _handleProgress\n\t\t * @param {Object} event The XHR progress event.\n\t\t * @private\n\t\t */\n\t\tp._handleProgress = function (event) {\n\t\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t\t}\n\n\t\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\t\tthis.dispatchEvent(newEvent);\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has reported a load start.\n\t\t * @method _handleLoadStart\n\t\t * @param {Object} event The XHR loadStart event.\n\t\t * @private\n\t\t */\n\t\tp._handleLoadStart = function (event) {\n\t\t\tclearTimeout(this._loadTimeout);\n\t\t\tthis.dispatchEvent(\"loadstart\");\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has reported an abort event.\n\t\t * @method handleAbort\n\t\t * @param {Object} event The XHR abort event.\n\t\t * @private\n\t\t */\n\t\tp._handleAbort = function (event) {\n\t\t\tthis._clean();\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has reported an error event.\n\t\t * @method _handleError\n\t\t * @param {Object} event The XHR error event.\n\t\t * @private\n\t\t */\n\t\tp._handleError = function (event) {\n\t\t\tthis._clean();\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t\t * @method _handleReadyStateChange\n\t\t * @param {Object} event The XHR readyStateChange event.\n\t\t * @private\n\t\t */\n\t\tp._handleReadyStateChange = function (event) {\n\t\t\tif (this._request.readyState == 4) {\n\t\t\t\tthis._handleLoad();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t\t * @method _handleLoad\n\t\t * @param {Object} event The XHR load event.\n\t\t * @private\n\t\t */\n\t\tp._handleLoad = function (event) {\n\t\t\tif (this.loaded) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.loaded = true;\n\n\t\t\tvar error = this._checkError();\n\t\t\tif (error) {\n\t\t\t\tthis._handleError(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._response = this._getResponse();\n\t\t\t// Convert arraybuffer back to blob\n\t\t\tif (this._responseType === 'arraybuffer') {\n\t\t\t\ttry {\n\t\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._clean();\n\n\t\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t\t};\n\n\t\t/**\n\t\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t\t * callback.\n\t\t * @method _handleTimeout\n\t\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t\t * @private\n\t\t */\n\t\tp._handleTimeout = function (event) {\n\t\t\tthis._clean();\n\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t\t};\n\n\t// Protected\n\t\t/**\n\t\t * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\n\t\t * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\n\t\t * @method _checkError\n\t\t * @return {int} If the request status returns an error code.\n\t\t * @private\n\t\t */\n\t\tp._checkError = function () {\n\t\t\t//LM: Probably need additional handlers here, maybe 501\n\t\t\tvar status = parseInt(this._request.status);\n\n\t\t\tswitch (status) {\n\t\t\t\tcase 404:   // Not Found\n\t\t\t\tcase 0:     // Not Loaded\n\t\t\t\t\treturn new Error(status);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t\t * @method _getResponse\n\t\t * @private\n\t\t */\n\t\tp._getResponse = function () {\n\t\t\tif (this._response != null) {\n\t\t\t\treturn this._response;\n\t\t\t}\n\n\t\t\tif (this._request.response != null) {\n\t\t\t\treturn this._request.response;\n\t\t\t}\n\n\t\t\t// Android 2.2 uses .responseText\n\t\t\ttry {\n\t\t\t\tif (this._request.responseText != null) {\n\t\t\t\t\treturn this._request.responseText;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t}\n\n\t\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\t\ttry {\n\t\t\t\tif (this._request.responseXML != null) {\n\t\t\t\t\treturn this._request.responseXML;\n\t\t\t\t}\n\t\t\t} catch (e$1) {\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t\t *      <li>XMLHttpRequest are created when available.</li>\n\t\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t\t *      <li>Text requests override the mime type if possible</li>\n\t\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t\t * @method _createXHR\n\t\t * @param {Object} item The requested item that is being loaded.\n\t\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t\t * @private\n\t\t */\n\t\tp._createXHR = function (item) {\n\t\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\t\tvar crossdomain = createjs.RequestUtils.isCrossDomain(item);\n\t\t\tvar headers = {};\n\n\t\t\t// Create the request. Fallback to whatever support we have.\n\t\t\tvar req = null;\n\t\t\tif (window.XMLHttpRequest) {\n\t\t\t\treq = new XMLHttpRequest();\n\t\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\t\treq = new XDomainRequest();\n\t\t\t\t}\n\t\t\t} else { // Old IE versions use a different approach\n\t\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\t\ttry {\n\t\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (req == null) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Default to utf-8 for Text requests.\n\t\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t\t}\n\n\t\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\t\treq.overrideMimeType(item.mimeType);\n\t\t\t}\n\n\t\t\t// Determine the XHR level\n\t\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\t\tvar src = null;\n\t\t\tif (item.method == createjs.AbstractLoader.GET) {\n\t\t\t\tsrc = createjs.RequestUtils.buildPath(item.src, item.values);\n\t\t\t} else {\n\t\t\t\tsrc = item.src;\n\t\t\t}\n\n\t\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\t\treq.open(item.method || createjs.AbstractLoader.GET, src, true);\n\n\t\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\t\theaders[\"Origin\"] = location.origin;\n\t\t\t}\n\n\t\t\t// To send data we need to set the Content-type header)\n\t\t\tif (item.values && item.method == createjs.AbstractLoader.POST) {\n\t\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t\t}\n\n\t\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif (item.headers) {\n\t\t\t\tfor (var n in item.headers) {\n\t\t\t\t\theaders[n] = item.headers[n];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (n in headers) {\n\t\t\t\treq.setRequestHeader(n, headers[n]);\n\t\t\t}\n\n\t\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\t\treq.withCredentials = item.withCredentials;\n\t\t\t}\n\n\t\t\tthis._request = req;\n\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t\t * @method _clean\n\t\t * @private\n\t\t */\n\t\tp._clean = function () {\n\t\t\tclearTimeout(this._loadTimeout);\n\n\t\t\tif (this._request.removeEventListener != null) {\n\t\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t\t} else {\n\t\t\t\tthis._request.onloadstart = null;\n\t\t\t\tthis._request.onprogress = null;\n\t\t\t\tthis._request.onabort = null;\n\t\t\t\tthis._request.onerror = null;\n\t\t\t\tthis._request.ontimeout = null;\n\t\t\t\tthis._request.onload = null;\n\t\t\t\tthis._request.onreadystatechange = null;\n\t\t\t}\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[PreloadJS XHRRequest]\";\n\t\t};\n\n\t\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n\t}());\n\n\t//##############################################################################\n\t// LoadQueue.js\n\t//##############################################################################\n\n\t/*\n\t TODO: WINDOWS ISSUES\n\t * No error for HTML audio in IE 678\n\t * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n\t * No script complete handler in IE 67 TAGS (XHR is fine)\n\t * No XML/JSON in IE6 TAGS\n\t * Need to hide loading SVG in Opera TAGS\n\t * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n\t * SVG no load or failure in Opera XHR\n\t * Reported issues with IE7/8\n\t */\n\n\t(function () {\n\n\t// constructor\n\t\t/**\n\t\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n\t\t * a single file, or queue of files.\n\t\t *\n\t\t * <b>Creating a Queue</b><br />\n\t\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n\t\t * argument to false.\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue(true);\n\t\t *\n\t\t * <b>Listening for Events</b><br />\n\t\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n\t\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n\t\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n\t\t *     files</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n\t\t *     any file.</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n\t\t *     changed.</li>\n\t\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n\t\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n\t\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n\t\t * </ul>\n\t\t *\n\t\t *      queue.on(\"fileload\", handleFileLoad, this);\n\t\t *      queue.on(\"complete\", handleComplete, this);\n\t\t *\n\t\t * <b>Adding files and manifests</b><br />\n\t\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n\t\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n\t\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n\t\t * like.\n\t\t *\n\t\t *      queue.loadFile(\"filePath/file.jpg\");\n\t\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n\t\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n\t\t *\n\t\t *      // Use an external manifest\n\t\t *      queue.loadManifest(\"path/to/manifest.json\");\n\t\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n\t\t *\n\t\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n\t\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n\t\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n\t\t * `loadNow` argument of `true`.\n\t\t *\n\t\t *      queue.load();\n\t\t *\n\t\t * <b>File Types</b><br />\n\t\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n\t\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n\t\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n\t\t * <code>type</code> property with any manifest item.\n\t\t *\n\t\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\n\t\t *\n\t\t *      // Note that PreloadJS will not read a file extension from the query string\n\t\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\n\t\t *\n\t\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n\t\t * <ul>\n\t\t *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n\t\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n\t\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n\t     *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n\t\t *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\n\t\t * </ul>\n\t\t *\n\t\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\n\t\t * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\n\t\t * are deprecated.</em>\n\t\t *\n\t\t * <b>Handling Results</b><br />\n\t\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n\t\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n\t\t * formatted object that can be used immediately, including:\n\t\t * <ul>\n\t\t *     <li>Binary: The binary loaded result</li>\n\t\t *     <li>CSS: A &lt;link /&gt; tag</li>\n\t\t *     <li>Image: An &lt;img /&gt; tag</li>\n\t\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\n\t\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n\t\t *     <li>Manifest: A JavaScript object.\n\t\t *     <li>Sound: An &lt;audio /&gt; tag</a>\n\t\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n\t\t *     <li>SVG: An &lt;object /&gt; tag</li>\n\t\t *     <li>Text: Raw text</li>\n\t     *     <li>Video: A Video DOM node</li>\n\t\t *     <li>XML: An XML DOM node</li>\n\t\t * </ul>\n\t\t *\n\t\t *      function handleFileLoad(event) {\n\t\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n\t\t *          var type = item.type;\n\t\t *\n\t\t *          // Add any images to the page body.\n\t\t *          if (type == createjs.LoadQueue.IMAGE) {\n\t\t *              document.body.appendChild(event.result);\n\t\t *          }\n\t\t *      }\n\t\t *\n\t\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n\t\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n\t\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n\t\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n\t\t *\n\t\t *      var image = queue.getResult(\"image\");\n\t\t *      document.body.appendChild(image);\n\t\t *\n\t\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n\t\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n\t\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n\t\t *\n\t\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n\t\t *\n\t\t * <b>Plugins</b><br />\n\t\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n\t\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n\t\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n\t\t *\n\t\t *      queue.installPlugin(createjs.Sound);\n\t\t *\n\t\t * <h4>Known Browser Issues</h4>\n\t\t * <ul>\n\t\t *     <li>Browsers without audio support can not load audio files.</li>\n\t\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n\t\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n\t\t *     than Chrome will continue to download in the background.</li>\n\t\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n\t\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n\t\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n\t\t *     XHR to work.</li>\n\t\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n\t\t *     canceled, although no events will be dispatched.</li>\n\t\t * </ul>\n\t\t *\n\t\t * @class LoadQueue\n\t\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n\t\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n\t\t * when necessary.\n\t\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n\t\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n\t\t * will not receive a base path.\n\t\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n\t\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n\t\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n\t\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n\t\t *\n\t\t * @constructor\n\t\t * @extends AbstractLoader\n\t\t */\n\t\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\n\t\t\tthis.AbstractLoader_constructor();\n\n\t\t\t/**\n\t\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n\t\t\t * @property _plugins\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t * @since 0.6.1\n\t\t\t */\n\t\t\tthis._plugins = [];\n\n\t\t\t/**\n\t\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n\t\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t\t * method for more information.\n\t\t\t * @property _typeCallbacks\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._typeCallbacks = {};\n\n\t\t\t/**\n\t\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n\t\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t\t * method for more information.\n\t\t\t * @property _extensionCallbacks\n\t\t\t * @type {null}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._extensionCallbacks = {};\n\n\t\t\t/**\n\t\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n\t\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n\t\t\t * @property next\n\t\t\t * @type {LoadQueue}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.next = null;\n\n\t\t\t/**\n\t\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n\t\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n\t\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n\t\t\t * specified.\n\t\t\t *\n\t\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n\t\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\n\t\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n\t\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n\t\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n\t\t\t *\n\t\t\t * <h4>Example</h4>\n\t\t\t *\n\t\t\t *      var queue = new createjs.LoadQueue();\n\t\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n\t\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n\t\t\t *      queue.loadManifest([\n\t\t\t *          \"script1.js\",\n\t\t\t *          \"script2.js\",\n\t\t\t *          \"image.png\", // Load any time\n\t\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n\t\t\t *          \"image3.png\",\n\t\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n\t\t\t *      ]);\n\t\t\t *\n\t\t\t * @property maintainScriptOrder\n\t\t\t * @type {Boolean}\n\t\t\t * @default true\n\t\t\t */\n\t\t\tthis.maintainScriptOrder = true;\n\n\t\t\t/**\n\t\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n\t\t\t * @property stopOnError\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.stopOnError = false;\n\n\t\t\t/**\n\t\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\n\t\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n\t\t\t * @property _maxConnections\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._maxConnections = 1;\n\n\t\t\t/**\n\t\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n\t\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n\t\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n\t\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n\t\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n\t\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n\t\t\t *\n\t\t\t * Loaders can be removed from PreloadJS by simply not including them.\n\t\t\t *\n\t\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n\t\t\t * so that they are checked first.\n\t\t\t * @property _availableLoaders\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._availableLoaders = [\n\t\t\t\tcreatejs.ImageLoader,\n\t\t\t\tcreatejs.JavaScriptLoader,\n\t\t\t\tcreatejs.CSSLoader,\n\t\t\t\tcreatejs.JSONLoader,\n\t\t\t\tcreatejs.JSONPLoader,\n\t\t\t\tcreatejs.SoundLoader,\n\t\t\t\tcreatejs.ManifestLoader,\n\t\t\t\tcreatejs.SpriteSheetLoader,\n\t\t\t\tcreatejs.XMLLoader,\n\t\t\t\tcreatejs.SVGLoader,\n\t\t\t\tcreatejs.BinaryLoader,\n\t\t\t\tcreatejs.VideoLoader,\n\t\t\t\tcreatejs.TextLoader\n\t\t\t];\n\n\t\t\t/**\n\t\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n\t\t\t\t\t * @property _defaultLoaderLength\n\t\t\t * @type {Number}\n\t\t\t * @private\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._defaultLoaderLength = this._availableLoaders.length;\n\n\t\t\tthis.init(preferXHR, basePath, crossOrigin);\n\t\t}\n\n\t\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n\t\tvar s = LoadQueue;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\t/**\n\t\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n\t\t * @method init\n\t\t * @param preferXHR\n\t\t * @param basePath\n\t\t * @param crossOrigin\n\t\t * @private\n\t\t */\n\t\tp.init = function (preferXHR, basePath, crossOrigin) {\n\n\t\t\t// public properties\n\t\t\t/**\n\t\t\t * @property useXHR\n\t\t\t * @type {Boolean}\n\t\t\t * @readonly\n\t\t\t * @default true\n\t\t\t * @deprecated Use preferXHR instead.\n\t\t\t */\n\t\t\tthis.useXHR = true;\n\n\t\t\t/**\n\t\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n\t\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n\t\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n\t\t\t * user-defined type.\n\t\t\t * @type {Boolean}\n\t\t\t * @default true\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis.preferXHR = true; //TODO: Get/Set\n\t\t\tthis._preferXHR = true;\n\t\t\tthis.setPreferXHR(preferXHR);\n\n\t\t\t// protected properties\n\t\t\t/**\n\t\t\t * Whether the queue is currently paused or not.\n\t\t\t * @property _paused\n\t\t\t * @type {boolean}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._paused = false;\n\n\t\t\t/**\n\t\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n\t\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n\t\t\t * as `http://`, or a relative path such as `../`.\n\t\t\t * @property _basePath\n\t\t\t * @type {String}\n\t\t\t * @private\n\t\t\t * @since 0.3.1\n\t\t\t */\n\t\t\tthis._basePath = basePath;\n\n\t\t\t/**\n\t\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n\t\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n\t\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n\t\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n\t\t\t * and \"Anonymous\".\n\t\t\t * @property _crossOrigin\n\t\t\t * @type {String}\n\t\t\t * @default \"\"\n\t\t\t * @private\n\t\t\t * @since 0.4.1\n\t\t\t */\n\t\t\tthis._crossOrigin = crossOrigin;\n\n\t\t\t/**\n\t\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n\t\t\t * file is requested.\n\t\t\t * @property _loadStartWasDispatched\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadStartWasDispatched = false;\n\n\t\t\t/**\n\t\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n\t\t\t * using a script tag to do preloading.\n\t\t\t * @property _currentlyLoadingScript\n\t\t\t * @type {Boolean}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._currentlyLoadingScript = null;\n\n\t\t\t/**\n\t\t\t * An array containing the currently downloading files.\n\t\t\t * @property _currentLoads\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._currentLoads = [];\n\n\t\t\t/**\n\t\t\t * An array containing the queued items that have not yet started downloading.\n\t\t\t * @property _loadQueue\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadQueue = [];\n\n\t\t\t/**\n\t\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n\t\t\t * @property _loadQueueBackup\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadQueueBackup = [];\n\n\t\t\t/**\n\t\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t\t * id.\n\t\t\t * @property _loadItemsById\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadItemsById = {};\n\n\t\t\t/**\n\t\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t\t * source.\n\t\t\t * @property _loadItemsBySrc\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadItemsBySrc = {};\n\n\t\t\t/**\n\t\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t\t * @property _loadedResults\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadedResults = {};\n\n\t\t\t/**\n\t\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t\t * @property _loadedRawResults\n\t\t\t * @type {Object}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadedRawResults = {};\n\n\t\t\t/**\n\t\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\n\t\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\n\t\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t\t * @property _numItems\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._numItems = 0;\n\n\t\t\t/**\n\t\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n\t\t\t * the files are before they are downloaded.\n\t\t\t * @property _numItemsLoaded\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._numItemsLoaded = 0;\n\n\t\t\t/**\n\t\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n\t\t\t * order.\n\t\t\t * @property _scriptOrder\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._scriptOrder = [];\n\n\t\t\t/**\n\t\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n\t\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n\t\t\t * once they are complete and have been dispatched.\n\t\t\t * @property _loadedScripts\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._loadedScripts = [];\n\n\t\t\t/**\n\t\t\t * The last progress amount. This is used to suppress duplicate progress events.\n\t\t\t * @property _lastProgress\n\t\t\t * @type {Number}\n\t\t\t * @private\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._lastProgress = NaN;\n\n\t\t};\n\n\t// static properties\n\t\t/**\n\t\t * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t\t * event is dispatched if the timeout is reached before any data is received.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\n\t\t */\n\t\ts.loadTimeout = 8000;\n\n\t\t/**\n\t\t * The time in milliseconds to assume a load has failed.\n\t\t * @property LOAD_TIMEOUT\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\n\t\t */\n\t\ts.LOAD_TIMEOUT = 0;\n\n\t// Preload Types\n\t\t/**\n\t\t * @property BINARY\n\t\t * @type {String}\n\t\t * @default binary\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.BINARY = createjs.AbstractLoader.BINARY;\n\n\t\t/**\n\t\t * @property CSS\n\t\t * @type {String}\n\t\t * @default css\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.CSS = createjs.AbstractLoader.CSS;\n\n\t\t/**\n\t\t * @property IMAGE\n\t\t * @type {String}\n\t\t * @default image\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.IMAGE = createjs.AbstractLoader.IMAGE;\n\n\t\t/**\n\t\t * @property JAVASCRIPT\n\t\t * @type {String}\n\t\t * @default javascript\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\n\n\t\t/**\n\t\t * @property JSON\n\t\t * @type {String}\n\t\t * @default json\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.JSON = createjs.AbstractLoader.JSON;\n\n\t\t/**\n\t\t * @property JSONP\n\t\t * @type {String}\n\t\t * @default jsonp\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.JSONP = createjs.AbstractLoader.JSONP;\n\n\t\t/**\n\t\t * @property MANIFEST\n\t\t * @type {String}\n\t\t * @default manifest\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.MANIFEST = createjs.AbstractLoader.MANIFEST;\n\n\t\t/**\n\t\t * @property SOUND\n\t\t * @type {String}\n\t\t * @default sound\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.SOUND = createjs.AbstractLoader.SOUND;\n\n\t\t/**\n\t\t * @property VIDEO\n\t\t * @type {String}\n\t\t * @default video\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.VIDEO = createjs.AbstractLoader.VIDEO;\n\n\t\t/**\n\t\t * @property SVG\n\t\t * @type {String}\n\t\t * @default svg\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.SVG = createjs.AbstractLoader.SVG;\n\n\t\t/**\n\t\t * @property TEXT\n\t\t * @type {String}\n\t\t * @default text\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.TEXT = createjs.AbstractLoader.TEXT;\n\n\t\t/**\n\t\t * @property XML\n\t\t * @type {String}\n\t\t * @default xml\n\t\t * @static\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.XML = createjs.AbstractLoader.XML;\n\n\t\t/**\n\t\t * @property POST\n\t\t * @type {string}\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.POST = createjs.AbstractLoader.POST;\n\n\t\t/**\n\t\t * @property GET\n\t\t * @type {string}\n\t\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\n\t\t */\n\t\ts.GET = createjs.AbstractLoader.GET;\n\n\t// events\n\t\t/**\n\t\t * This event is fired when an individual file has loaded, and been processed.\n\t\t * @event fileload\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t\t * object will contain that value as a `src` property.\n\t\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t\t * to a usable object.\n\t\t * @since 0.3.0\n\t\t */\n\n\t\t/**\n\t\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n\t\t * @event fileprogress\n\t\t * @since 0.3.0\n\t\t */\n\n\t\t/**\n\t\t * This event is fired when an individual file starts to load.\n\t\t * @event filestart\n\t\t * @param {Object} The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t\t * object will contain that value as a property.\n\t\t */\n\n\t\t/**\n\t\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n\t\t * a LoadQueue instance.\n\t\t * @event initialize\n\t\t * @private\n\t\t */\n\n\t// public methods\n\t\t/**\n\t\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n\t\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n\t\t * once, and will be prepended to the list of available loaders.\n\t\t * @method registerLoader\n\t\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.registerLoader = function (loader) {\n\t\t\tif (!loader || !loader.canLoadItem) {\n\t\t\t\tthrow new Error(\"loader is of an incorrect type.\");\n\t\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\n\t\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n\t\t\t}\n\n\t\t\tthis._availableLoaders.unshift(loader);\n\t\t};\n\n\t\t/**\n\t\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n\t\t * unregistered, the default loaders will always be available.\n\t\t * @method unregisterLoader\n\t\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n\t\t */\n\t\tp.unregisterLoader = function (loader) {\n\t\t\tvar idx = this._availableLoaders.indexOf(loader);\n\t\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\n\t\t\t\tthis._availableLoaders.splice(idx, 1);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method setUseXHR\n\t\t * @param {Boolean} value The new useXHR value to set.\n\t\t * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\n\t\t * the provided value argument was true.\n\t\t * @since 0.3.0\n\t\t * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\n\t\t * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\n\t\t */\n\t\tp.setUseXHR = function (value) {\n\t\t\treturn this.setPreferXHR(value);\n\t\t};\n\n\t\t/**\n\t\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n\t\t * fail, or be ignored depending on the browser's capabilities and the load type.\n\t\t * @method setPreferXHR\n\t\t * @param {Boolean} value\n\t\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.setPreferXHR = function (value) {\n\t\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n\t\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n\t\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\n\t\t\treturn this.preferXHR;\n\t\t};\n\n\t\t/**\n\t\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n\t\t * content, and allows the queue to be used again.\n\t\t * @method removeAll\n\t\t * @since 0.3.0\n\t\t */\n\t\tp.removeAll = function () {\n\t\t\tthis.remove();\n\t\t};\n\n\t\t/**\n\t\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n\t\t * This also removes internal references to loaded item(s).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      queue.loadManifest([\n\t\t *          {src:\"test.png\", id:\"png\"},\n\t\t *          {src:\"test.jpg\", id:\"jpg\"},\n\t\t *          {src:\"test.mp3\", id:\"mp3\"}\n\t\t *      ]);\n\t\t *      queue.remove(\"png\"); // Single item by ID\n\t\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n\t\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n\t\t *\n\t\t * @method remove\n\t\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n\t\t * items, or multiple items as arguments.\n\t\t * @since 0.3.0\n\t\t */\n\t\tp.remove = function (idsOrUrls) {\n\t\t\tvar args = null;\n\n\t\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\n\t\t\t\targs = [idsOrUrls];\n\t\t\t} else if (idsOrUrls) {\n\t\t\t\targs = idsOrUrls;\n\t\t\t} else if (arguments.length > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar itemsWereRemoved = false;\n\n\t\t\t// Destroy everything\n\t\t\tif (!args) {\n\t\t\t\tthis.close();\n\t\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t\t}\n\t\t\t\tthis.init(this.preferXHR, this._basePath);\n\n\t\t\t\t// Remove specific items\n\t\t\t} else {\n\t\t\t\twhile (args.length) {\n\t\t\t\t\tvar item = args.pop();\n\t\t\t\t\tvar r = this.getResult(item);\n\n\t\t\t\t\t//Remove from the main load Queue\n\t\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Remove from the backup queue\n\t\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\tthis._disposeItem(this.getItem(item));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\n\t\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\t\titemsWereRemoved = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If this was called during a load, try to load the next item.\n\t\t\t\tif (itemsWereRemoved) {\n\t\t\t\t\tthis._loadNext();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n\t\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n\t\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n\t\t * @method reset\n\t\t * @since 0.3.0\n\t\t */\n\t\tp.reset = function () {\n\t\t\tthis.close();\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t}\n\n\t\t\t//Reset the queue to its start state\n\t\t\tvar a = [];\n\t\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n\t\t\t\ta.push(this._loadQueueBackup[i].getItem());\n\t\t\t}\n\n\t\t\tthis.loadManifest(a, false);\n\t\t};\n\n\t\t/**\n\t\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n\t\t * Currently, only one plugin can exist per type/extension.\n\t\t *\n\t\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n\t\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n\t\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n\t\t *\n\t\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n\t\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n\t\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n\t\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n\t\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n\t\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n\t\t *\n\t\t * @method installPlugin\n\t\t * @param {Function} plugin The plugin class to install.\n\t\t */\n\t\tp.installPlugin = function (plugin) {\n\t\t\tif (plugin == null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (plugin.getPreloadHandlers != null) {\n\t\t\t\tthis._plugins.push(plugin);\n\t\t\t\tvar map = plugin.getPreloadHandlers();\n\t\t\t\tmap.scope = plugin;\n\n\t\t\t\tif (map.types != null) {\n\t\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\n\t\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (map.extensions != null) {\n\t\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\n\t\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n\t\t * number of open connections, so any additional connections may remain in a pending state until the browser\n\t\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n\t\t * is `true`, only one script is loaded at a time due to browser limitations.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n\t\t *\n\t\t * @method setMaxConnections\n\t\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n\t\t * is open at any time.\n\t\t */\n\t\tp.setMaxConnections = function (value) {\n\t\t\tthis._maxConnections = value;\n\t\t\tif (!this._paused && this._loadQueue.length > 0) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t\t * method.\n\t\t *\n\t\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t\t * @method loadFile\n\t\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n\t\t * <ul>\n\t\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t *     in the background.</li>\n\t\t * </ul>\n\t\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n\t\t * `true`, the queue will resume automatically.\n\t\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\n\t\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t\t * constructor, or a `path` property in a manifest definition.\n\t\t */\n\t\tp.loadFile = function (file, loadNow, basePath) {\n\t\t\tif (file == null) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._addItem(file, null, basePath);\n\n\t\t\tif (loadNow !== false) {\n\t\t\t\tthis.setPaused(false);\n\t\t\t} else {\n\t\t\t\tthis.setPaused(true);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n\t\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\n\t\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n\t\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n\t\t * default).\n\t\t *\n\t\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t\t * @method loadManifest\n\t\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n\t\t * manifests:\n\t\t * <ol>\n\t\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n\t\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n\t\t *     prepended to each file in the list.</li>\n\t\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n\t\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n\t\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n\t\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t\t *     <li>An Array of files to load.</li>\n\t\t * </ol>\n\t\t *\n\t\t * Each \"file\" in a manifest can be either:\n\t\t * <ul>\n\t\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t *     in the background.</li>\n\t\t * </ul>\n\t\t *\n\t\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n\t\t * `true`, the queue will resume automatically.\n\t\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n\t\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t\t * constructor, or a `path` property in a manifest definition.\n\t\t */\n\t\tp.loadManifest = function (manifest, loadNow, basePath) {\n\t\t\tvar fileList = null;\n\t\t\tvar path = null;\n\n\t\t\t// Array-based list of items\n\t\t\tif (Array.isArray(manifest)) {\n\t\t\t\tif (manifest.length == 0) {\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfileList = manifest;\n\n\t\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n\t\t\t} else if (typeof(manifest) === \"string\") {\n\t\t\t\tfileList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tsrc: manifest,\n\t\t\t\t\t\ttype: s.MANIFEST\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\t} else if (typeof(manifest) == \"object\") {\n\n\t\t\t\t// An object that defines a manifest path\n\t\t\t\tif (manifest.src !== undefined) {\n\t\t\t\t\tif (manifest.type == null) {\n\t\t\t\t\t\tmanifest.type = s.MANIFEST;\n\t\t\t\t\t} else if (manifest.type != s.MANIFEST) {\n\t\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n\t\t\t\t\t\tthis._sendError(event);\n\t\t\t\t\t}\n\t\t\t\t\tfileList = [manifest];\n\n\t\t\t\t\t// An object that defines a manifest\n\t\t\t\t} else if (manifest.manifest !== undefined) {\n\t\t\t\t\tfileList = manifest.manifest;\n\t\t\t\t\tpath = manifest.path;\n\t\t\t\t}\n\n\t\t\t\t// Unsupported. This will throw an error.\n\t\t\t} else {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\n\t\t\t\tthis._addItem(fileList[i], path, basePath);\n\t\t\t}\n\n\t\t\tif (loadNow !== false) {\n\t\t\t\tthis.setPaused(false);\n\t\t\t} else {\n\t\t\t\tthis.setPaused(true);\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Start a LoadQueue that was created, but not automatically started.\n\t\t * @method load\n\t\t */\n\t\tp.load = function () {\n\t\t\tthis.setPaused(false);\n\t\t};\n\n\t\t/**\n\t\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n\t\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t\t * `basePath` will not be part of the ID.\n\t\t * @method getItem\n\t\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t\t * event as the `item` parameter.\n\t\t */\n\t\tp.getItem = function (value) {\n\t\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\t};\n\n\t\t/**\n\t\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n\t\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t\t * `basePath` will not be part of the ID.\n\t\t * @method getResult\n\t\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n\t\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t\t * returned instead.\n\t\t * @return {Object} A result object containing the content that was loaded, such as:\n\t\t * <ul>\n\t\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n\t\t *      DOM.</li>\n\t\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n\t\t *      <li>Raw text for TEXT</li>\n\t\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t\t *      <li>An XML document</li>\n\t\t *      <li>A binary arraybuffer loaded by XHR</li>\n\t\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n\t\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n\t\t *      which can not be used to play audio back.</li>\n\t\t * </ul>\n\t\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n\t\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n\t\t */\n\t\tp.getResult = function (value, rawResult) {\n\t\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\t\tif (item == null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar id = item.id;\n\t\t\tif (rawResult && this._loadedRawResults[id]) {\n\t\t\t\treturn this._loadedRawResults[id];\n\t\t\t}\n\t\t\treturn this._loadedResults[id];\n\t\t};\n\n\t\t/**\n\t\t * Generate an list of items loaded by this queue.\n\t\t * @method getItems\n\t\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n\t\t * and failed load items will also be included.\n\t\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n\t\t * result, and rawResult.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getItems = function (loaded) {\n\t\t\tvar arr = [];\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tvar item = this._loadItemsById[n];\n\t\t\t\tvar result = this.getResult(n);\n\t\t\t\tif (loaded === true && result == null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tarr.push({\n\t\t\t\t\titem: item,\n\t\t\t\t\tresult: result,\n\t\t\t\t\trawResult: this.getResult(n, true)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn arr;\n\t\t};\n\n\t\t/**\n\t\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n\t\t * be processed when active loads complete. LoadQueues are not paused by default.\n\t\t *\n\t\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n\t\t * argument is `false`.\n\t\t * @method setPaused\n\t\t * @param {Boolean} value Whether the queue should be paused or not.\n\t\t */\n\t\tp.setPaused = function (value) {\n\t\t\tthis._paused = value;\n\t\t\tif (!this._paused) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n\t\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\n\t\t *\n\t\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n\t\t * @method close\n\t\t */\n\t\tp.close = function () {\n\t\t\twhile (this._currentLoads.length) {\n\t\t\t\tthis._currentLoads.pop().cancel();\n\t\t\t}\n\t\t\tthis._scriptOrder.length = 0;\n\t\t\tthis._loadedScripts.length = 0;\n\t\t\tthis.loadStartWasDispatched = false;\n\t\t\tthis._itemCount = 0;\n\t\t\tthis._lastProgress = NaN;\n\t\t};\n\n\t// protected methods\n\t\t/**\n\t\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n\t\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n\t\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @method _addItem\n\t\t * @param {String|Object} value The item to add to the queue.\n\t\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n\t\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n\t\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n\t\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n\t\t * version.\n\t\t * @private\n\t\t */\n\t\tp._addItem = function (value, path, basePath) {\n\t\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n\t\t\tif (item == null) {\n\t\t\t\treturn;\n\t\t\t} // Sometimes plugins or types should be skipped.\n\t\t\tvar loader = this._createLoader(item);\n\t\t\tif (loader != null) {\n\t\t\t\tif (\"plugins\" in loader) {\n\t\t\t\t\tloader.plugins = this._plugins;\n\t\t\t\t}\n\t\t\t\titem._loader = loader;\n\t\t\t\tthis._loadQueue.push(loader);\n\t\t\t\tthis._loadQueueBackup.push(loader);\n\n\t\t\t\tthis._numItems++;\n\t\t\t\tthis._updateProgress();\n\n\t\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n\t\t\t\tif ((this.maintainScriptOrder\n\t\t\t\t\t\t&& item.type == createjs.LoadQueue.JAVASCRIPT\n\t\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n\t\t\t\t\t\t)\n\t\t\t\t\t\t|| item.maintainOrder === true) {\n\t\t\t\t\tthis._scriptOrder.push(item);\n\t\t\t\t\tthis._loadedScripts.push(null);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n\t\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n\t\t * XHR is only used for file types that support it in new browsers.\n\t\t *\n\t\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n\t\t * alter the load item.\n\t\t * @method _createLoadItem\n\t\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n\t\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n\t\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n\t\t * when it is added.\n\t\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n\t\t * the path argument.\n\t\t * @return {Object} The loader instance that will be used.\n\t\t * @private\n\t\t */\n\t\tp._createLoadItem = function (value, path, basePath) {\n\t\t\tvar item = createjs.LoadItem.create(value);\n\t\t\tif (item == null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar bp = \"\"; // Store the generated basePath\n\t\t\tvar useBasePath = basePath || this._basePath;\n\n\t\t\tif (item.src instanceof Object) {\n\t\t\t\tif (!item.type) {\n\t\t\t\t\treturn null;\n\t\t\t\t} // the the src is an object, type is required to pass off to plugin\n\t\t\t\tif (path) {\n\t\t\t\t\tbp = path;\n\t\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t\t// Also append basePath\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t}\n\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\tbp = useBasePath;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Determine Extension, etc.\n\t\t\t\tvar match = createjs.RequestUtils.parseURI(item.src);\n\t\t\t\tif (match.extension) {\n\t\t\t\t\titem.ext = match.extension;\n\t\t\t\t}\n\t\t\t\tif (item.type == null) {\n\t\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n\t\t\t\t}\n\n\t\t\t\t// Inject path & basePath\n\t\t\t\tvar autoId = item.src;\n\t\t\t\tif (!match.absolute && !match.relative) {\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tbp = path;\n\t\t\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t\t\tautoId = path + autoId;\n\t\t\t\t\t\t// Also append basePath\n\t\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\t\tbp = useBasePath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem.src = bp + item.src;\n\t\t\t}\n\t\t\titem.path = bp;\n\n\t\t\t// If there's no id, set one now.\n\t\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\n\t\t\t\titem.id = autoId;\n\t\t\t}\n\n\t\t\t// Give plugins a chance to modify the loadItem:\n\t\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n\t\t\tif (customHandler) {\n\t\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n\t\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\n\n\t\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\n\t\t\t\tif (result === false) {\n\t\t\t\t\treturn null;\n\n\t\t\t\t\t// Load as normal:\n\t\t\t\t} else if (result === true) ; else if (result != null) {\n\t\t\t\t\titem._loader = result;\n\t\t\t\t}\n\n\t\t\t\t// Update the extension in case the type changed:\n\t\t\t\tmatch = createjs.RequestUtils.parseURI(item.src);\n\t\t\t\tif (match.extension != null) {\n\t\t\t\t\titem.ext = match.extension;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Store the item for lookup. This also helps clean-up later.\n\t\t\tthis._loadItemsById[item.id] = item;\n\t\t\tthis._loadItemsBySrc[item.src] = item;\n\n\t\t\tif (item.crossOrigin == null) {\n\t\t\t\titem.crossOrigin = this._crossOrigin;\n\t\t\t}\n\n\t\t\treturn item;\n\t\t};\n\n\t\t/**\n\t\t * Create a loader for a load item.\n\t\t * @method _createLoader\n\t\t * @param {Object} item A formatted load item that can be used to generate a loader.\n\t\t * @return {AbstractLoader} A loader that can be used to load content.\n\t\t * @private\n\t\t */\n\t\tp._createLoader = function (item) {\n\t\t\tif (item._loader != null) { // A plugin already specified a loader\n\t\t\t\treturn item._loader;\n\t\t\t}\n\n\t\t\t// Initially, try and use the provided/supported XHR mode:\n\t\t\tvar preferXHR = this.preferXHR;\n\n\t\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\n\t\t\t\tvar loader = this._availableLoaders[i];\n\t\t\t\tif (loader && loader.canLoadItem(item)) {\n\t\t\t\t\treturn new loader(item, preferXHR);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: Log error (requires createjs.log)\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n\t\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n\t\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n\t\t * using tags, which have to be loaded one at a time to maintain load order.\n\t\t * @method _loadNext\n\t\t * @private\n\t\t */\n\t\tp._loadNext = function () {\n\t\t\tif (this._paused) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only dispatch loadstart event when the first file is loaded.\n\t\t\tif (!this._loadStartWasDispatched) {\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tthis._loadStartWasDispatched = true;\n\t\t\t}\n\n\t\t\t// The queue has completed.\n\t\t\tif (this._numItems == this._numItemsLoaded) {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis._sendComplete();\n\n\t\t\t\t// Load the next queue, if it has been defined.\n\t\t\t\tif (this.next && this.next.load) {\n\t\t\t\t\tthis.next.load();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.loaded = false;\n\t\t\t}\n\n\t\t\t// Must iterate forwards to load in the right order.\n\t\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\n\t\t\t\tif (this._currentLoads.length >= this._maxConnections) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar loader = this._loadQueue[i];\n\n\t\t\t\t// Determine if we should be only loading one tag-script at a time:\n\t\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n\t\t\t\tif (!this._canStartLoad(loader)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis._loadQueue.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tthis._loadItem(loader);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n\t\t * @method _loadItem\n\t\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n\t\t * @private\n\t\t */\n\t\tp._loadItem = function (loader) {\n\t\t\tloader.on(\"fileload\", this._handleFileLoad, this);\n\t\t\tloader.on(\"progress\", this._handleProgress, this);\n\t\t\tloader.on(\"complete\", this._handleFileComplete, this);\n\t\t\tloader.on(\"error\", this._handleError, this);\n\t\t\tloader.on(\"fileerror\", this._handleFileError, this);\n\t\t\tthis._currentLoads.push(loader);\n\t\t\tthis._sendFileStart(loader.getItem());\n\t\t\tloader.load();\n\t\t};\n\n\t\t/**\n\t\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n\t\t * events.\n\t\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._handleFileLoad = function (event) {\n\t\t\tevent.target = null;\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n\t\t * loaders like M\n\t\t * @param event\n\t\t * @private\n\t\t */\n\t\tp._handleFileError = function (event) {\n\t\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n\t\t\tthis._sendError(newEvent);\n\t\t};\n\n\t\t/**\n\t\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n\t\t * is set to `true`.\n\t\t * @method _handleError\n\t\t * @param {ErrorEvent} event The error event, containing relevant error information.\n\t\t * @private\n\t\t */\n\t\tp._handleError = function (event) {\n\t\t\tvar loader = event.target;\n\t\t\tthis._numItemsLoaded++;\n\n\t\t\tthis._finishOrderedItem(loader, true);\n\t\t\tthis._updateProgress();\n\n\t\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n\t\t\t// TODO: Propagate actual error message.\n\n\t\t\tthis._sendError(newEvent);\n\n\t\t\tif (!this.stopOnError) {\n\t\t\t\tthis._removeLoadItem(loader);\n\t\t\t\tthis._cleanLoadItem(loader);\n\t\t\t\tthis._loadNext();\n\t\t\t} else {\n\t\t\t\tthis.setPaused(true);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n\t\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n\t\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n\t\t * @method _handleFileComplete\n\t\t * @param {Event} event The event object from the loader.\n\t\t * @private\n\t\t */\n\t\tp._handleFileComplete = function (event) {\n\t\t\tvar loader = event.target;\n\t\t\tvar item = loader.getItem();\n\n\t\t\tvar result = loader.getResult();\n\t\t\tthis._loadedResults[item.id] = result;\n\t\t\tvar rawResult = loader.getResult(true);\n\t\t\tif (rawResult != null && rawResult !== result) {\n\t\t\t\tthis._loadedRawResults[item.id] = rawResult;\n\t\t\t}\n\n\t\t\tthis._saveLoadedItems(loader);\n\n\t\t\t// Remove the load item\n\t\t\tthis._removeLoadItem(loader);\n\n\t\t\tif (!this._finishOrderedItem(loader)) {\n\t\t\t\t// The item was NOT managed, so process it now\n\t\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\t}\n\n\t\t\t// Clean up the load item\n\t\t\tthis._cleanLoadItem(loader);\n\t\t};\n\n\t\t/**\n\t\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n\t\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n\t\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * methods.\n\t\t * @method _saveLoadedItems\n\t\t * @param {AbstractLoader} loader\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._saveLoadedItems = function (loader) {\n\t\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\n\t\t\t// Loaders may load sub-items. This adds them to this queue\n\t\t\tvar list = loader.getLoadedItems();\n\t\t\tif (list === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\tvar item = list[i].item;\n\n\t\t\t\t// Store item lookups\n\t\t\t\tthis._loadItemsBySrc[item.src] = item;\n\t\t\t\tthis._loadItemsById[item.id] = item;\n\n\t\t\t\t// Store loaded content\n\t\t\t\tthis._loadedResults[item.id] = list[i].result;\n\t\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n\t\t * so, trigger prior items to trigger as well.\n\t\t * @method _finishOrderedItem\n\t\t * @param {AbstractLoader} loader\n\t\t * @param {Boolean} loadFailed\n\t\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n\t\t * behaviour if it is.\n\t\t * @private\n\t\t */\n\t\tp._finishOrderedItem = function (loader, loadFailed) {\n\t\t\tvar item = loader.getItem();\n\n\t\t\tif ((this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT)\n\t\t\t\t\t|| item.maintainOrder) {\n\n\t\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\n\t\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\n\t\t\t\t\tthis._currentlyLoadingScript = false;\n\t\t\t\t}\n\n\t\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\n\t\t\t\tif (index == -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t} // This loader no longer exists\n\t\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\n\n\t\t\t\tthis._checkScriptLoadOrder();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n\t\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n\t\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\n\t\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n\t\t * dispatched.\n\t\t * @method _checkScriptLoadOrder\n\t\t * @private\n\t\t */\n\t\tp._checkScriptLoadOrder = function () {\n\t\t\tvar l = this._loadedScripts.length;\n\n\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\tvar item = this._loadedScripts[i];\n\t\t\t\tif (item === null) {\n\t\t\t\t\tbreak;\n\t\t\t\t} // This is still loading. Do not process further.\n\t\t\t\tif (item === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} // This has completed, and been processed. Move on.\n\n\t\t\t\tvar loadItem = this._loadedResults[item.id];\n\t\t\t\tif (item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\t\t\t// Append script tags to the head automatically.\n\t\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\n\t\t\t\t}\n\n\t\t\t\tvar loader = item._loader;\n\t\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\t\tthis._loadedScripts[i] = true;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n\t\t * the next item.\n\t\t * @method _processFinishedLoad\n\t\t * @param {LoadItem|Object} item\n\t\t * @param {AbstractLoader} loader\n\t\t * @protected\n\t\t */\n\t\tp._processFinishedLoad = function (item, loader) {\n\t\t\tthis._numItemsLoaded++;\n\n\t\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\n\t\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\n\t\t\tif (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\t\tvar tag = loader.getTag();\n\t\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\t\t\t}\n\n\t\t\tthis._updateProgress();\n\t\t\tthis._sendFileComplete(item, loader);\n\t\t\tthis._loadNext();\n\t\t};\n\n\t\t/**\n\t\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n\t\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n\t\t * the script can even be started, since it exist in the DOM while loading.\n\t\t * @method _canStartLoad\n\t\t * @param {AbstractLoader} loader The loader for the item\n\t\t * @return {Boolean} Whether the item can start a load or not.\n\t\t * @private\n\t\t */\n\t\tp._canStartLoad = function (loader) {\n\t\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar item = loader.getItem();\n\t\t\tif (item.type != createjs.LoadQueue.JAVASCRIPT) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this._currentlyLoadingScript) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar index = this._scriptOrder.indexOf(item);\n\t\t\tvar i = 0;\n\t\t\twhile (i < index) {\n\t\t\t\tvar checkItem = this._loadedScripts[i];\n\t\t\t\tif (checkItem == null) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tthis._currentlyLoadingScript = true;\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n\t\t * @method _removeLoadItem\n\t\t * @param {AbstractLoader} loader A loader instance to remove.\n\t\t * @private\n\t\t */\n\t\tp._removeLoadItem = function (loader) {\n\t\t\tvar l = this._currentLoads.length;\n\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\tif (this._currentLoads[i] == loader) {\n\t\t\t\t\tthis._currentLoads.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Remove unneeded references from a loader.\n\t\t *\n\t\t * @param loader\n\t\t * @private\n\t\t */\n\t\tp._cleanLoadItem = function(loader) {\n\t\t\tvar item = loader.getItem();\n\t\t\tif (item) {\n\t\t\t\tdelete item._loader;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n\t\t * @method _handleProgress\n\t\t * @param {ProgressEvent} event The progress event from the item.\n\t\t * @private\n\t\t */\n\t\tp._handleProgress = function (event) {\n\t\t\tvar loader = event.target;\n\t\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\n\t\t\tthis._updateProgress();\n\t\t};\n\n\t\t/**\n\t\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n\t\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n\t\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n\t\t * loaded progress on top of the already-loaded items.\n\t\t *\n\t\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n\t\t * <ul>\n\t\t *      <li>5/10 of the items in the queue (50%)</li>\n\t\t *      <li>plus 20% of item 6's slot (2%)</li>\n\t\t *      <li>equals 52%</li>\n\t\t * </ul>\n\t\t * @method _updateProgress\n\t\t * @private\n\t\t */\n\t\tp._updateProgress = function () {\n\t\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n\t\t\tvar remaining = this._numItems - this._numItemsLoaded;\n\t\t\tif (remaining > 0) {\n\t\t\t\tvar chunk = 0;\n\t\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\n\t\t\t\t\tchunk += this._currentLoads[i].progress;\n\t\t\t\t}\n\t\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\n\t\t\t}\n\n\t\t\tif (this._lastProgress != loaded) {\n\t\t\t\tthis._sendProgress(loaded);\n\t\t\t\tthis._lastProgress = loaded;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n\t\t * hashes.\n\t\t * @method _disposeItem\n\t\t * @param {LoadItem|Object} item The item that was passed in for preloading.\n\t\t * @private\n\t\t */\n\t\tp._disposeItem = function (item) {\n\t\t\tdelete this._loadedResults[item.id];\n\t\t\tdelete this._loadedRawResults[item.id];\n\t\t\tdelete this._loadItemsById[item.id];\n\t\t\tdelete this._loadItemsBySrc[item.src];\n\t\t};\n\n\t\t/**\n\t\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n\t\t * event for details on the event payload.\n\t\t * @method _sendFileProgress\n\t\t * @param {LoadItem|Object} item The item that is being loaded.\n\t\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n\t\t * @protected\n\t\t */\n\t\tp._sendFileProgress = function (item, progress) {\n\t\t\tif (this._isCanceled() || this._paused) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.hasEventListener(\"fileprogress\")) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//LM: Rework ProgressEvent to support this?\n\t\t\tvar event = new createjs.Event(\"fileprogress\");\n\t\t\tevent.progress = progress;\n\t\t\tevent.loaded = progress;\n\t\t\tevent.total = 1;\n\t\t\tevent.item = item;\n\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n\t\t * details on the event payload.\n\t\t * @method _sendFileComplete\n\t\t * @param {LoadItemObject} item The item that is being loaded.\n\t\t * @param {AbstractLoader} loader\n\t\t * @protected\n\t\t */\n\t\tp._sendFileComplete = function (item, loader) {\n\t\t\tif (this._isCanceled() || this._paused) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\tevent.loader = loader;\n\t\t\tevent.item = item;\n\t\t\tevent.result = this._loadedResults[item.id];\n\t\t\tevent.rawResult = this._loadedRawResults[item.id];\n\n\t\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n\t\t\tif (item.completeHandler) {\n\t\t\t\titem.completeHandler(event);\n\t\t\t}\n\n\t\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n\t\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n\t\t * @method _sendFileStart\n\t\t * @param {LoadItem|Object} item The item that is being loaded.\n\t\t * @protected\n\t\t */\n\t\tp._sendFileStart = function (item) {\n\t\t\tvar event = new createjs.Event(\"filestart\");\n\t\t\tevent.item = item;\n\t\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[PreloadJS LoadQueue]\";\n\t\t};\n\n\t\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n\t}());\n\n\t//##############################################################################\n\t// TextLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for Text files.\n\t\t * @class TextLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction TextLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\n\t\t}\n\t\tcreatejs.extend(TextLoader, createjs.AbstractLoader);\n\t\tvar s = TextLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\n\t\t * but is also the default loader if a file type can not be determined.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.TEXT;\n\t\t};\n\n\t\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// BinaryLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n\t\t * @class BinaryLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction BinaryLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\n\t\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t\t}\n\t\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n\t\tvar s = BinaryLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.BINARY;\n\t\t};\n\n\t\t// private methods\n\t\t/**\n\t\t * Before the item loads, set the response type to \"arraybuffer\"\n\t\t * @property _updateXHR\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._updateXHR = function (event) {\n\t\t\tevent.loader.setResponseType(\"arraybuffer\");\n\t\t};\n\n\t\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// CSSLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for CSS files.\n\t\t * @class CSSLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction CSSLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\n\t\t\t// protected properties\n\t\t\tthis._tagSrcAttribute = \"href\";\n\n\t\t\tif (preferXHR) {\n\t\t\t\tthis._tag = document.createElement(\"style\");\n\t\t\t} else {\n\t\t\t\tthis._tag = document.createElement(\"link\");\n\t\t\t}\n\n\t\t\tthis._tag.rel = \"stylesheet\";\n\t\t\tthis._tag.type = \"text/css\";\n\t\t}\n\t\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n\t\tvar s = CSSLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.CSS;\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * The result formatter for CSS files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\tif (this._preferXHR) {\n\t\t\t\tvar tag = loader.getTag();\n\n\t\t\t\tif (tag.styleSheet) { // IE\n\t\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\n\t\t\t\t} else {\n\t\t\t\t\tvar textNode = document.createTextNode(loader.getResult(true));\n\t\t\t\t\ttag.appendChild(textNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttag = this._tag;\n\t\t\t}\n\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\n\t\t\treturn tag;\n\t\t};\n\n\t\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// ImageLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for image files.\n\t\t * @class ImageLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction ImageLoader (loadItem, preferXHR) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\n\t\t\t// protected properties\n\t\t\tthis._tagSrcAttribute = \"src\";\n\n\t\t\t// Check if the preload item is already a tag.\n\t\t\tif (createjs.RequestUtils.isImageTag(loadItem)) {\n\t\t\t\tthis._tag = loadItem;\n\t\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\n\t\t\t\tthis._tag = loadItem.src;\n\t\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\n\t\t\t\tthis._tag = loadItem.tag;\n\t\t\t}\n\n\t\t\tif (this._tag != null) {\n\t\t\t\tthis._preferXHR = false;\n\t\t\t} else {\n\t\t\t\tthis._tag = document.createElement(\"img\");\n\t\t\t}\n\n\t\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t\t}\n\t\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n\t\tvar s = ImageLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.IMAGE;\n\t\t};\n\n\t\t// public methods\n\t\tp.load = function () {\n\t\t\tif (this._tag.src != \"\" && this._tag.complete) {\n\t\t\t\tthis._sendComplete();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar crossOrigin = this._item.crossOrigin;\n\t\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\n\t\t\tif (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\n\t\t\t\tthis._tag.crossOrigin = crossOrigin;\n\t\t\t}\n\n\t\t\tthis.AbstractLoader_load();\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * Before the item loads, set its mimeType and responseType.\n\t\t * @property _updateXHR\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._updateXHR = function (event) {\n\t\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n\t\t\t// Only exists for XHR\n\t\t\tif (event.loader.setResponseType) {\n\t\t\t\tevent.loader.setResponseType(\"blob\");\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * The result formatter for Image files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {HTMLImageElement}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\treturn this._formatImage;\n\t\t};\n\n\t\t/**\n\t\t * The asynchronous image formatter function. This is required because images have\n\t\t * a short delay before they are ready.\n\t\t * @method _formatImage\n\t\t * @param {Function} successCallback The method to call when the result has finished formatting\n\t\t * @param {Function} errorCallback The method to call if an error occurs during formatting\n\t\t * @private\n\t\t */\n\t\tp._formatImage = function (successCallback, errorCallback) {\n\t\t\tvar tag = this._tag;\n\t\t\tvar URL = window.URL || window.webkitURL;\n\n\t\t\tif (!this._preferXHR) ; else if (URL) {\n\t\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\n\t\t\t\ttag.src = objURL;\n\n\t\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\n\t\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\n\t\t\t} else {\n\t\t\t\ttag.src = this._item.src;\n\t\t\t}\n\n\t\t\tif (tag.complete) {\n\t\t\t\tsuccessCallback(tag);\n\t\t\t} else {\n\t            tag.onload = createjs.proxy(function() {\n\t                successCallback(this._tag);\n\t            }, this);\n\n\t            tag.onerror = createjs.proxy(function() {\n\t                errorCallback(_this._tag);\n\t            }, this);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n\t\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\n\t\t * include any functionality that requires scope without changing it.\n\t\t * @method _cleanUpURL\n\t\t * @param event\n\t\t * @private\n\t\t */\n\t\tp._cleanUpURL = function (event) {\n\t\t\tvar URL = window.URL || window.webkitURL;\n\t\t\tURL.revokeObjectURL(event.target.src);\n\t\t};\n\n\t\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// JavaScriptLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for JavaScript files.\n\t\t * @class JavaScriptLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction JavaScriptLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\n\t\t\t// protected properties\n\t\t\tthis._tagSrcAttribute = \"src\";\n\t\t\tthis.setTag(document.createElement(\"script\"));\n\t\t}\n\t\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n\t\tvar s = JavaScriptLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.JAVASCRIPT;\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * The result formatter for JavaScript files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\tvar tag = loader.getTag();\n\t\t\tif (this._preferXHR) {\n\t\t\t\ttag.text = loader.getResult(true);\n\t\t\t}\n\t\t\treturn tag;\n\t\t};\n\n\t\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// JSONLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n\t\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n\t\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t\t * @class JSONLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction JSONLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\t\t}\n\t\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n\t\tvar s = JSONLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.JSON;\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * The result formatter for JSON files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\tvar json = null;\n\t\t\ttry {\n\t\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\n\t\t\t} catch (e) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn e;\n\t\t\t}\n\n\t\t\treturn json;\n\t\t};\n\n\t\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// JSONPLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n\t\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n\t\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n\t\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t\t *\n\t\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n\t\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n\t\t * JSONP must match the callback passed to the loadItem.\n\t\t *\n\t\t * <h4>Example JSONP</h4>\n\t\t *\n\t\t * \t\tcallbackName({\n\t\t * \t\t\t\"name\": \"value\",\n\t\t *\t \t\t\"num\": 3,\n\t\t *\t\t\t\"obj\": { \"bool\":true }\n\t\t * \t\t});\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n\t\t * \t\tvar queue = new createjs.LoadQueue();\n\t\t * \t\tqueue.on(\"complete\", handleComplete);\n\t\t * \t\tqueue.loadItem(loadItem);\n\t\t *\n\t\t * \t\tfunction handleComplete(event) }\n\t\t * \t\t\tvar json = queue.getResult(\"json\");\n\t\t * \t\t\tconsole.log(json.obj.bool); // true\n\t\t * \t\t}\n\t\t *\n\t\t * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\n\t\t * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\n\t\t * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n\t\t *\n\t\t * @class JSONPLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction JSONPLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\n\t\t\tthis.setTag(document.createElement(\"script\"));\n\t\t\tthis.getTag().type = \"text/javascript\";\n\t\t}\n\t\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n\t\tvar s = JSONPLoader;\n\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.JSONP;\n\t\t};\n\n\t\t// public methods\n\t\tp.cancel = function () {\n\t\t\tthis.AbstractLoader_cancel();\n\t\t\tthis._dispose();\n\t\t};\n\n\t\t/**\n\t\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\n\t\t * we don't use the AbstractLoader.load() method.\n\t\t *\n\t\t * @method load\n\t\t *\n\t\t */\n\t\tp.load = function () {\n\t\t\tif (this._item.callback == null) {\n\t\t\t\tthrow new Error('callback is required for loading JSONP requests.');\n\t\t\t}\n\n\t\t\t// TODO: Look into creating our own iFrame to handle the load\n\t\t\t// In the first attempt, FF did not get the result\n\t\t\t//   result instanceof Object did not work either\n\t\t\t//   so we would need to clone the result.\n\t\t\tif (window[this._item.callback] != null) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"JSONP callback '\" +\n\t\t\t\t\tthis._item.callback +\n\t\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\n\t\t\t}\n\n\t\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\n\t\t\twindow.document.body.appendChild(this._tag);\n\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t\t// Load the tag\n\t\t\tthis._tag.src = this._item.src;\n\t\t};\n\n\t\t// private methods\n\t\t/**\n\t\t * Handle the JSONP callback, which is a public method defined on `window`.\n\t\t * @method _handleLoad\n\t\t * @param {Object} data The formatted JSON data.\n\t\t * @private\n\t\t */\n\t\tp._handleLoad = function (data) {\n\t\t\tthis._result = this._rawResult = data;\n\t\t\tthis._sendComplete();\n\n\t\t\tthis._dispose();\n\t\t};\n\n\t\t/**\n\t\t * The tag request has not loaded within the time specfied in loadTimeout.\n\t\t * @method _handleError\n\t\t * @param {Object} event The XHR error event.\n\t\t * @private\n\t\t */\n\t\tp._handleTimeout = function () {\n\t\t\tthis._dispose();\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n\t\t};\n\n\t\t/**\n\t\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n\t\t * @method _dispose\n\t\t * @private\n\t\t */\n\t\tp._dispose = function () {\n\t\t\twindow.document.body.removeChild(this._tag);\n\t\t\tdelete window[this._item.callback];\n\n\t\t\tclearTimeout(this._loadTimeout);\n\t\t};\n\n\t\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// ManifestLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n\t\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n\t\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t *\n\t\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n\t\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n\t\t *\n\t\t * \t\t{\n\t\t * \t\t\t\"path\": \"assets/\",\n\t\t *\t \t    \"manifest\": [\n\t\t *\t\t\t\t\"image.png\",\n\t\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n\t\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n\t\t *\t \t    ]\n\t\t *\t \t}\n\t\t *\n\t\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n\t\t *\n\t\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n\t\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\n\t\t * @class ManifestLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction ManifestLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\n\n\t\t// Public Properties\n\t\t\t/**\n\t\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n\t\t\t * used to pass plugins to new LoadQueues that may be created.\n\t\t\t * @property _plugins\n\t\t\t * @type {Array}\n\t\t\t * @private\n\t\t\t * @since 0.6.1\n\t\t\t */\n\t\t\tthis.plugins = null;\n\n\n\t\t// Protected Properties\n\t\t\t/**\n\t\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n\t\t\t * @property _manifestQueue\n\t\t\t * @type {LoadQueue}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._manifestQueue = null;\n\t\t}\n\t\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n\t\tvar s = ManifestLoader;\n\n\t\t// static properties\n\t\t/**\n\t\t * The amount of progress that the manifest itself takes up.\n\t\t * @property MANIFEST_PROGRESS\n\t\t * @type {number}\n\t\t * @default 0.25 (25%)\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\ts.MANIFEST_PROGRESS = 0.25;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.MANIFEST;\n\t\t};\n\n\t\t// public methods\n\t\tp.load = function () {\n\t\t\tthis.AbstractLoader_load();\n\t\t};\n\n\t\t// protected methods\n\t\tp._createRequest = function() {\n\t\t\tvar callback = this._item.callback;\n\t\t\tif (callback != null) {\n\t\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t\t} else {\n\t\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t\t}\n\t\t};\n\n\t\tp.handleEvent = function (event) {\n\t\t\tswitch (event.type) {\n\t\t\t\tcase \"complete\":\n\t\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\n\t\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\t\treturn;\n\t\t\t\tcase \"progress\":\n\t\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\n\t\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\t\tthis._sendProgress(event);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.AbstractLoader_handleEvent(event);\n\t\t};\n\n\t\tp.destroy = function() {\n\t\t\tthis.AbstractLoader_destroy();\n\t\t\tthis._manifestQueue.close();\n\t\t};\n\n\t\t/**\n\t\t * Create and load the manifest items once the actual manifest has been loaded.\n\t\t * @method _loadManifest\n\t\t * @param {Object} json\n\t\t * @private\n\t\t */\n\t\tp._loadManifest = function (json) {\n\t\t\tif (json && json.manifest) {\n\t\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue();\n\t\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\n\t\t\t\t\tqueue.installPlugin(this.plugins[i]);\n\t\t\t\t}\n\t\t\t\tqueue.loadManifest(json);\n\t\t\t} else {\n\t\t\t\tthis._sendComplete();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t\t * @method _handleManifestFileLoad\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestFileLoad = function (event) {\n\t\t\tevent.target = null;\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n\t\t * @method _handleManifestComplete\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestComplete = function (event) {\n\t\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\t\tthis._sendComplete();\n\t\t};\n\n\t\t/**\n\t\t * The manifest has reported progress.\n\t\t * @method _handleManifestProgress\n\t\t * @param {ProgressEvent} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestProgress = function (event) {\n\t\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n\t\t\tthis._sendProgress(this.progress);\n\t\t};\n\n\t\t/**\n\t\t * The manifest has reported an error with one of the files.\n\t\t * @method _handleManifestError\n\t\t * @param {ErrorEvent} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestError = function (event) {\n\t\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\t\tnewEvent.item = event.data;\n\t\t\tthis.dispatchEvent(newEvent);\n\t\t};\n\n\t\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// SoundLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t\t * @class SoundLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractMediaLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction SoundLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\n\n\t\t\t// protected properties\n\t\t\tif (createjs.RequestUtils.isAudioTag(loadItem)) {\n\t\t\t\tthis._tag = loadItem;\n\t\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\n\t\t\t\tthis._tag = loadItem;\n\t\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\n\t\t\t\tthis._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t\t}\n\n\t\t\tif (this._tag != null) {\n\t\t\t\tthis._preferXHR = false;\n\t\t\t}\n\t\t}\n\t\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\t\tvar s = SoundLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.SOUND;\n\t\t};\n\n\t\t// protected methods\n\t\tp._createTag = function (src) {\n\t\t\tvar tag = document.createElement(\"audio\");\n\t\t\ttag.autoplay = false;\n\t\t\ttag.preload = \"none\";\n\n\t\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\t\ttag.src = src;\n\t\t\treturn tag;\n\t\t};\n\n\t\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// VideoLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for video files.\n\t\t * @class VideoLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractMediaLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction VideoLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\n\n\t\t\tif (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\n\t\t\t\tthis.setTag(createjs.RequestUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\n\n\t\t\t\t// We can't use XHR for a tag that's passed in.\n\t\t\t\tthis._preferXHR = false;\n\t\t\t} else {\n\t\t\t\tthis.setTag(this._createTag());\n\t\t\t}\n\t\t}\n\t\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n\t\tvar s = VideoLoader;\n\n\t\t/**\n\t\t * Create a new video tag\n\t\t *\n\t\t * @returns {HTMLElement}\n\t\t * @private\n\t\t */\n\t\tp._createTag = function () {\n\t\t\treturn document.createElement(\"video\");\n\t\t};\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.VIDEO;\n\t\t};\n\n\t\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// SpriteSheetLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n\t\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n\t\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n\t\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n\t\t * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n\t\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n\t\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n\t\t * the SpriteSheet images.\n\t\t *\n\t\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n\t\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n\t\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n\t\t * @class SpriteSheetLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction SpriteSheetLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\n\n\t\t\t// protected properties\n\t\t\t/**\n\t\t\t * An internal queue which loads the SpriteSheet's images.\n\t\t\t * @method _manifestQueue\n\t\t\t * @type {LoadQueue}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._manifestQueue = null;\n\t\t}\n\n\t\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n\t\tvar s = SpriteSheetLoader;\n\n\t\t// static properties\n\t\t/**\n\t\t * The amount of progress that the manifest itself takes up.\n\t\t * @property SPRITESHEET_PROGRESS\n\t\t * @type {number}\n\t\t * @default 0.25 (25%)\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\ts.SPRITESHEET_PROGRESS = 0.25;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.SPRITESHEET;\n\t\t};\n\n\t\t// public methods\n\t\tp.destroy = function() {\n\t\t\tthis.AbstractLoader_destroy;\n\t\t\tthis._manifestQueue.close();\n\t\t};\n\n\t\t// protected methods\n\t\tp._createRequest = function() {\n\t\t\tvar callback = this._item.callback;\n\t\t\tif (callback != null) {\n\t\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t\t} else {\n\t\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t\t}\n\t\t};\n\n\t\tp.handleEvent = function (event) {\n\t\t\tswitch (event.type) {\n\t\t\t\tcase \"complete\":\n\t\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\n\t\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\t\treturn;\n\t\t\t\tcase \"progress\":\n\t\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\n\t\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\t\tthis._sendProgress(event);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.AbstractLoader_handleEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Create and load the images once the SpriteSheet JSON has been loaded.\n\t\t * @method _loadManifest\n\t\t * @param {Object} json\n\t\t * @private\n\t\t */\n\t\tp._loadManifest = function (json) {\n\t\t\tif (json && json.images) {\n\t\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n\t\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\t\tqueue.loadManifest(json.images);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t\t * @method _handleManifestFileLoad\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestFileLoad = function (event) {\n\t\t\tvar image = event.result;\n\t\t\tif (image != null) {\n\t\t\t\tvar images = this.getResult().images;\n\t\t\t\tvar pos = images.indexOf(event.item.src);\n\t\t\t\timages[pos] = image;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n\t\t * @method _handleManifestComplete\n\t\t * @param {Event} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestComplete = function (event) {\n\t\t\tthis._result = new createjs.SpriteSheet(this._result);\n\t\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\t\tthis._sendComplete();\n\t\t};\n\n\t\t/**\n\t\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n\t\t * @method _handleManifestProgress\n\t\t * @param {ProgressEvent} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestProgress = function (event) {\n\t\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n\t\t\tthis._sendProgress(this.progress);\n\t\t};\n\n\t\t/**\n\t\t * An image has reported an error.\n\t\t * @method _handleManifestError\n\t\t * @param {ErrorEvent} event\n\t\t * @private\n\t\t */\n\t\tp._handleManifestError = function (event) {\n\t\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\t\tnewEvent.item = event.data;\n\t\t\tthis.dispatchEvent(newEvent);\n\t\t};\n\n\t\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// SVGLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for SVG files.\n\t\t * @class SVGLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @param {Boolean} preferXHR\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction SVGLoader(loadItem, preferXHR) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\n\t\t\t// protected properties\n\t\t\tthis._tagSrcAttribute = \"data\";\n\n\t\t\tif (preferXHR) {\n\t\t\t\tthis.setTag(document.createElement(\"svg\"));\n\t\t\t} else {\n\t\t\t\tthis.setTag(document.createElement(\"object\"));\n\t\t\t\tthis.getTag().type = \"image/svg+xml\";\n\t\t\t}\n\t\t}\n\t\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n\t\tvar s = SVGLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.SVG;\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * The result formatter for SVG files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {Object}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\t// mime should be image/svg+xml, but Opera requires text/xml\n\t\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t\t\tvar tag = loader.getTag();\n\n\t\t\tif (!this._preferXHR && document.body.contains(tag)) {\n\t\t\t\tdocument.body.removeChild(tag);\n\t\t\t}\n\n\t\t\tif (xml.documentElement != null) {\n\t\t\t\ttag.appendChild(xml.documentElement);\n\t\t\t\ttag.style.visibility = \"visible\";\n\t\t\t\treturn tag;\n\t\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n\t\t\t\treturn xml;\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// XMLLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t// constructor\n\t\t/**\n\t\t * A loader for CSS files.\n\t\t * @class XMLLoader\n\t\t * @param {LoadItem|Object} loadItem\n\t\t * @extends AbstractLoader\n\t\t * @constructor\n\t\t */\n\t\tfunction XMLLoader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\n\n\t\t\t// public properties\n\t\t\tthis.resultFormatter = this._formatResult;\n\t\t}\n\t\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n\t\tvar s = XMLLoader;\n\n\t\t// static methods\n\t\t/**\n\t\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t\t * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\n\t\t * @method canLoadItem\n\t\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t\t * @returns {Boolean} Whether the loader can load the item.\n\t\t * @static\n\t\t */\n\t\ts.canLoadItem = function (item) {\n\t\t\treturn item.type == createjs.AbstractLoader.XML;\n\t\t};\n\n\t\t// protected methods\n\t\t/**\n\t\t * The result formatter for XML files.\n\t\t * @method _formatResult\n\t\t * @param {AbstractLoader} loader\n\t\t * @returns {XMLDocument}\n\t\t * @private\n\t\t */\n\t\tp._formatResult = function (loader) {\n\t\t\treturn createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t\t};\n\n\t\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n\n\t}());\n\n\t//##############################################################################\n\t// version.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Static class holding library specific information such as the version and buildDate of the library.\n\t\t * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\n\t\t * for information on using sound.\n\t\t * @class SoundJS\n\t\t **/\n\t\tvar s = createjs.SoundJS = createjs.SoundJS || {};\n\n\t\t/**\n\t\t * The version string for this release.\n\t\t * @property version\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t\t/**\n\t\t * The build date for this release in UTC format.\n\t\t * @property buildDate\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n\t})();\n\n\t//##############################################################################\n\t// IndexOf.js\n\t//##############################################################################\n\n\t/**\n\t * @class Utility Methods\n\t */\n\n\t/**\n\t * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n\t * that value.  Returns -1 if value is not found.\n\t *\n\t *      var i = createjs.indexOf(myArray, myElementToFind);\n\t *\n\t * @method indexOf\n\t * @param {Array} array Array to search for searchElement\n\t * @param searchElement Element to find in array.\n\t * @return {Number} The first index of searchElement in array.\n\t */\n\tcreatejs.indexOf = function (array, searchElement){\n\n\t\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\t\tif (searchElement === array[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\t//##############################################################################\n\t// Proxy.js\n\t//##############################################################################\n\n\t/**\n\t * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n\t * createjs namespace directly.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n\t *\n\t * @class Utility Methods\n\t * @main Utility Methods\n\t */\n\n\t(function() {\n\n\t\t/**\n\t\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t\t * method gets called in the correct scope.\n\t\t *\n\t\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t\t *\n\t\t *      function myHandler(arg1, arg2) {\n\t\t *           // This gets called when myObject.myCallback is executed.\n\t\t *      }\n\t\t *\n\t\t * @method proxy\n\t\t * @param {Function} method The function to call\n\t\t * @param {Object} scope The scope to call the method name on\n\t\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t\t * @public\n\t\t * @static\n\t\t */\n\t\tcreatejs.proxy = function (method, scope) {\n\t\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\t\treturn function () {\n\t\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t\t};\n\t\t};\n\n\t}());\n\n\t//##############################################################################\n\t// BrowserDetect.js\n\t//##############################################################################\n\n\t/**\n\t * @class Utility Methods\n\t */\n\t(function() {\n\n\t\t/**\n\t\t * An object that determines the current browser, version, operating system, and other environment\n\t\t * variables via user agent string.\n\t\t *\n\t\t * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      if (createjs.BrowserDetect.isIOS) { // do stuff }\n\t\t *\n\t\t * @property BrowserDetect\n\t\t * @type {Object}\n\t\t * @param {Boolean} isFirefox True if our browser is Firefox.\n\t\t * @param {Boolean} isOpera True if our browser is opera.\n\t\t * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\n\t\t * completely different browser with different abilities.\n\t\t * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\n\t\t * @param {Boolean} isAndroid True if our browser is Android.\n\t\t * @param {Boolean} isBlackberry True if our browser is Blackberry.\n\t\t * @constructor\n\t\t * @static\n\t\t */\n\t\tfunction BrowserDetect() {\n\t\t\tthrow \"BrowserDetect cannot be instantiated\";\n\t\t}\n\t\tvar agent = BrowserDetect.agent = window.navigator.userAgent;\n\t\tBrowserDetect.isWindowPhone = (agent.indexOf(\"IEMobile\") > -1) || (agent.indexOf(\"Windows Phone\") > -1);\n\t\tBrowserDetect.isFirefox = (agent.indexOf(\"Firefox\") > -1);\n\t\tBrowserDetect.isOpera = (window.opera != null);\n\t\tBrowserDetect.isChrome = (agent.indexOf(\"Chrome\") > -1);  // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\n\t\tBrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\n\t\tBrowserDetect.isAndroid = (agent.indexOf(\"Android\") > -1) && !BrowserDetect.isWindowPhone;\n\t\tBrowserDetect.isBlackberry = (agent.indexOf(\"Blackberry\") > -1);\n\n\t\tcreatejs.BrowserDetect = BrowserDetect;\n\n\t}());\n\n\t//##############################################################################\n\t// AudioSprite.js\n\t//##############################################################################\n\n\t//  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\n\n\n\t/**\n\t * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\n\t * out here for quick reference.</strong>\n\t *\n\t * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\n\t * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\n\t * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\n\t * accidentally playing bits of the neighbouring clips.\n\t *\n\t * <strong>Benefits of Audio Sprites:</strong>\n\t * <ul>\n\t *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\n\t *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\n\t *     sounds that could be loaded at once.</li>\n\t *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\n\t * where the network round trip for each file can add significant latency.</li>\n\t * </ul>\n\t *\n\t * <strong>Drawbacks of Audio Sprites</strong>\n\t * <ul>\n\t *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\n\t * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\n\t * \t\tit.</li>\n\t *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\n\t *     (Chrome!), HTML audio will only load enough to play through at the current download speed  so we rely on the\n\t *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\n\t *     sounds, the audio may not yet have downloaded fully.</li>\n\t *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\n\t * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\n\t * </ul>\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\t\tcreatejs.Sound.initializeDefaultPlugins();\n\t *\t\tvar assetsPath = \"./assets/\";\n\t *\t\tvar sounds = [{\n\t *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n\t *\t\t\t\taudioSprite: [\n\t *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n\t *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n\t *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n\t *\t\t\t\t]}\n\t *\t\t\t}\n\t *\t\t];\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n\t *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n\t *\t\t// after load is complete\n\t *\t\tcreatejs.Sound.play(\"sound2\");\n\t *\n\t * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\n\t *\n\t * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\n\t *\n\t * The excellent CreateJS community has created a tool to create audio sprites, available at\n\t * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\n\t * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\n\t * to SoundJS format.\n\t *\n\t * @class AudioSprite\n\t * @since 0.6.0\n\t */\n\n\t//##############################################################################\n\t// PlayPropsConfig.js\n\t//##############################################################################\n\n\t(function () {\n\t\t/**\n\t\t * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\n\t\t *\n\t\t * Optional Play Properties Include:\n\t\t * <ul>\n\t\t * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\n\t\t * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\n\t\t * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\n\t\t * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t * loops), and -1 can be used for infinite playback.</li>\n\t\t * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t * against the individual volume.</li>\n\t\t * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\n\t\t * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\n\t\t * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\n\t\t * </ul>\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \tvar ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\n\t\t * \tcreatejs.Sound.play(\"mySound\", ppc);\n\t\t * \tmySoundInstance.play(ppc);\n\t\t *\n\t\t * @class PlayPropsConfig\n\t\t * @constructor\n\t\t * @since 0.6.1\n\t\t */\n\t\t// TODO think of a better name for this class\n\t\tvar PlayPropsConfig = function () {\n\t// Public Properties\n\t\t\t/**\n\t\t\t * How to interrupt any currently playing instances of audio with the same source,\n\t\t\t * if the maximum number of instances of the sound are already playing. Values are defined as\n\t\t\t * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\n\t\t\t * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t\t\t * @property interrupt\n\t\t\t * @type {string}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.interrupt = null;\n\n\t\t\t/**\n\t\t\t * The amount of time to delay the start of audio playback, in milliseconds.\n\t\t\t * @property delay\n\t\t\t * @type {Number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.delay = null;\n\n\t\t\t/**\n\t\t\t * The offset from the start of the audio to begin playback, in milliseconds.\n\t\t\t * @property offset\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.offset = null;\n\n\t\t\t/**\n\t\t\t * How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t\t * loops), and -1 can be used for infinite playback.\n\t\t\t * @property loop\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.loop = null;\n\n\t\t\t/**\n\t\t\t * The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t\t * against the individual volume.\n\t\t\t * @property volume\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.volume = null;\n\n\t\t\t/**\n\t\t\t * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t\t\t * @property pan\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.pan = null;\n\n\t\t\t/**\n\t\t\t * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t\t\t * @property startTime\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.startTime = null;\n\n\t\t\t/**\n\t\t\t * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t\t\t * @property duration\n\t\t\t * @type {number}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.duration = null;\n\t\t};\n\t\tvar p = PlayPropsConfig.prototype = {};\n\t\tvar s = PlayPropsConfig;\n\n\n\t// Static Methods\n\t\t/**\n\t\t * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\n\t\t *\n\t\t * @method create\n\t\t * @param {PlayPropsConfig|Object} value The play properties\n\t\t * @returns {PlayPropsConfig}\n\t\t * @static\n\t\t */\n\t\ts.create = function (value) {\n\t\t\tif (value instanceof s || value instanceof Object) {\n\t\t\t\tvar ppc = new createjs.PlayPropsConfig();\n\t\t\t\tppc.set(value);\n\t\t\t\treturn ppc;\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t\t}\n\t\t};\n\n\t// Public Methods\n\t\t/**\n\t\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\n\t\t *\n\t\t * @method set\n\t\t * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\n\t\t * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\n\t\t*/\n\t\tp.set = function(props) {\n\t\t\tfor (var n in props) { this[n] = props[n]; }\n\t\t\treturn this;\n\t\t};\n\n\t\tp.toString = function() {\n\t\t\treturn \"[PlayPropsConfig]\";\n\t\t};\n\n\t\tcreatejs.PlayPropsConfig = s;\n\n\t}());\n\n\t//##############################################################################\n\t// Sound.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\n\t\t * All Sound APIs on this class are static.\n\t\t *\n\t\t * <b>Registering and Preloading</b><br />\n\t\t * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\n\t\t * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\n\t\t * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\n\t\t * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\n\t\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\n\t\t * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\n\t\t * PreloadJS so they are ready when you want to use them.\n\t\t *\n\t\t * <b>Playback</b><br />\n\t\t * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\n\t\t * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\n\t\t * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\n\t\t *\n\t\t * <b>Plugins</b><br />\n\t\t * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\n\t\t * are used (when available), although developers can change plugin priority or add new plugins (such as the\n\t\t * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\n\t\t * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\n\t\t * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\n\t\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\n\t\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t\t *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n\t\t *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n\t\t *      function loadHandler(event) {\n\t     *          // This is fired for each sound that is registered.\n\t     *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\n\t     *          instance.on(\"complete\", this.handleComplete, this);\n\t     *          instance.volume = 0.5;\n\t\t *      }\n\t\t *\n\t\t * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\n\t\t * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\n\t\t * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\n\t\t * default limit of 100.\n\t\t *\n\t\t *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\n\t\t *\n\t\t * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\n\t\t * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\n\t\t * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\n\t\t * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\n\t\t * preloading. It is recommended that all audio is preloaded before it is played.\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *\t\tqueue.installPlugin(createjs.Sound);\n\t\t *\n\t\t * <b>Audio Sprites</b><br />\n\t\t * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\n\t\t * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\n\t\t * grouped into a single file.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tvar assetsPath = \"./assets/\";\n\t\t *\t\tvar sounds = [{\n\t\t *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n\t\t *\t\t\t\taudioSprite: [\n\t\t *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n\t\t *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n\t\t *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n\t\t *\t\t\t\t]}\n\t \t *\t\t\t}\n\t\t *\t\t];\n\t\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t\t *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n\t\t *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n\t\t *\t\t// after load is complete\n\t\t *\t\tcreatejs.Sound.play(\"sound2\");\n\t\t *\n\t\t * <b>Mobile Playback</b><br />\n\t\t * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\n\t\t * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\n\t\t * longer necessary as of SoundJS 0.6.2.\n\t\t * <ul>\n\t\t *     <li>\n\t\t *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\n\t\t *         method in the call stack of a user input event to manually unlock the audio context.\n\t\t *     </li>\n\t\t *     <li>\n\t\t *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\n\t\t *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\n\t\t *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\n\t\t *     </li>\n\t\t *     <li>\n\t\t *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\n\t\t *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\n\t\t *         as a \"click\", so if the user long-presses the button, it will no longer work.\n\t\t *     </li>\n\t\t *     <li>\n\t\t *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\n\t\t *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\n\t\t *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\n\t\t *         <ol>\n\t\t *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\n\t\t *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\n\t\t *         </ol>\n\t\t *         These settings may change how your application behaves, and are not recommended.\n\t\t *     </li>\n\t\t * </ul>\n\t\t *\n\t\t * <b>Loading Alternate Paths and Extension-less Files</b><br />\n\t\t * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\n\t\t * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\n\t\t * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\n\t\t * different folders, or on CDNs, which often has completely different filenames for each file.\n\t\t *\n\t\t * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\n\t\t * and loading with PreloadJS.\n\t\t *\n\t\t * <em>Note: an id is required for playback.</em>\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tvar sounds = {path:\"./audioPath/\",\n\t\t * \t\t\t\tmanifest: [\n\t\t *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\n\t\t *\t\t]};\n\t\t *\n\t\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t\t *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\n\t\t *\t\tcreatejs.Sound.registerSounds(sounds);\n\t\t *\n\t\t * <h3>Known Browser and OS issues</h3>\n\t\t * <b>IE 9 HTML Audio limitations</b><br />\n\t\t * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n\t\t * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n\t\t * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n\t     * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\n\t\t * encoding with 64kbps works.</li>\n\t\t * <li>Occasionally very short samples will get cut off.</li>\n\t\t * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\n\t\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\n\t\t * estimate.</li></ul>\n\t\t *\n\t\t * <b>Firefox 25 Web Audio limitations</b>\n\t\t * <ul><li>mp3 audio files do not load properly on all windows machines, reported\n\t\t * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\n\t\t * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\n\t\t * possible.</li></ul>\n\n\t\t * <b>Safari limitations</b><br />\n\t\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t\t *\n\t\t * <b>iOS 6 Web Audio limitations</b><br />\n\t\t * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\n\t\t * Mobile Playback above.</li>\n\t\t * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\n\t\t * at a different sampleRate.</li>\n\t\t * </ul>\n\t\t *\n\t\t * <b>Android HTML Audio limitations</b><br />\n\t\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t\t * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\n\t\t * a delay.</li></ul>\n\t\t *\n\t\t * <b>Web Audio and PreloadJS</b><br />\n\t\t * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\n\t\t * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\n\t\t *\n\t\t * @class Sound\n\t\t * @static\n\t\t * @uses EventDispatcher\n\t\t */\n\t\tfunction Sound() {\n\t\t\tthrow \"Sound cannot be instantiated\";\n\t\t}\n\n\t\tvar s = Sound;\n\n\n\t// Static Properties\n\t\t/**\n\t\t * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\n\t\t * instances of the sound are already playing.\n\t\t * @property INTERRUPT_ANY\n\t\t * @type {String}\n\t\t * @default any\n\t\t * @static\n\t\t */\n\t\ts.INTERRUPT_ANY = \"any\";\n\n\t\t/**\n\t\t * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\n\t\t * least distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t\t * @property INTERRUPT_EARLY\n\t\t * @type {String}\n\t\t * @default early\n\t\t * @static\n\t\t */\n\t\ts.INTERRUPT_EARLY = \"early\";\n\n\t\t/**\n\t\t * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\n\t\t * distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t\t * @property INTERRUPT_LATE\n\t\t * @type {String}\n\t\t * @default late\n\t\t * @static\n\t\t */\n\t\ts.INTERRUPT_LATE = \"late\";\n\n\t\t/**\n\t\t * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\n\t\t * instances of the sound are already playing.\n\t\t * @property INTERRUPT_NONE\n\t\t * @type {String}\n\t\t * @default none\n\t\t * @static\n\t\t */\n\t\ts.INTERRUPT_NONE = \"none\";\n\n\t\t/**\n\t\t * Defines the playState of an instance that is still initializing.\n\t\t * @property PLAY_INITED\n\t\t * @type {String}\n\t\t * @default playInited\n\t\t * @static\n\t\t */\n\t\ts.PLAY_INITED = \"playInited\";\n\n\t\t/**\n\t\t * Defines the playState of an instance that is currently playing or paused.\n\t\t * @property PLAY_SUCCEEDED\n\t\t * @type {String}\n\t\t * @default playSucceeded\n\t\t * @static\n\t\t */\n\t\ts.PLAY_SUCCEEDED = \"playSucceeded\";\n\n\t\t/**\n\t\t * Defines the playState of an instance that was interrupted by another instance.\n\t\t * @property PLAY_INTERRUPTED\n\t\t * @type {String}\n\t\t * @default playInterrupted\n\t\t * @static\n\t\t */\n\t\ts.PLAY_INTERRUPTED = \"playInterrupted\";\n\n\t\t/**\n\t\t * Defines the playState of an instance that completed playback.\n\t\t * @property PLAY_FINISHED\n\t\t * @type {String}\n\t\t * @default playFinished\n\t\t * @static\n\t\t */\n\t\ts.PLAY_FINISHED = \"playFinished\";\n\n\t\t/**\n\t\t * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\n\t\t * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\n\t\t * @property PLAY_FAILED\n\t\t * @type {String}\n\t\t * @default playFailed\n\t\t * @static\n\t\t */\n\t\ts.PLAY_FAILED = \"playFailed\";\n\n\t\t/**\n\t\t * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\n\t\t * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\n\t\t * support additional media types.\n\t\t *\n\t\t * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t\t *\n\t\t * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\n\t\t * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\n\t\t * @property SUPPORTED_EXTENSIONS\n\t\t * @type {Array[String]}\n\t\t * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\n\t\t * @since 0.4.0\n\t\t * @static\n\t\t */\n\t\ts.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\n\n\t\t/**\n\t\t * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\n\t\t * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\n\t\t * plugins determine more accurately if an extension is supported.\n\t\t *\n\t \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\n\t\t * @property EXTENSION_MAP\n\t\t * @type {Object}\n\t\t * @since 0.4.0\n\t\t * @default {m4a:\"mp4\"}\n\t\t * @static\n\t\t */\n\t\ts.EXTENSION_MAP = {\n\t\t\tm4a:\"mp4\"\n\t\t};\n\n\t\t/**\n\t\t * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\n\t\t * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\n\t\t * @property FILE_PATTERN\n\t\t * @type {RegExp}\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\n\n\n\t// Class Public properties\n\t\t/**\n\t\t * Determines the default behavior for interrupting other currently playing instances with the same source, if the\n\t\t * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\n\t\t * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t\t * is called without passing a value for interrupt.\n\t\t * @property defaultInterruptBehavior\n\t\t * @type {String}\n\t\t * @default Sound.INTERRUPT_NONE, or \"none\"\n\t\t * @static\n\t\t * @since 0.4.0\n\t\t */\n\t\ts.defaultInterruptBehavior = s.INTERRUPT_NONE;  // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\n\n\t\t/**\n\t\t * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\n\t\t * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\n\t\t * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\n\t\t * to exist in the same location, as only the extension is altered.\n\t\t *\n\t\t * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\n\t\t * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\tvar sounds = [\n\t\t *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\n\t\t *\t];\n\t\t *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\n\t\t *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t\t *\tcreatejs.Sound.registerSounds(sounds, assetPath);\n\t\t *\t// ...\n\t\t *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\n\t\t *\n\t\t * @property alternateExtensions\n\t\t * @type {Array}\n\t\t * @since 0.5.2\n\t\t * @static\n\t\t */\n\t\ts.alternateExtensions = [];\n\n\t\t/**\n\t\t * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\n\t\t * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\n\t\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t\t * @property activePlugin\n\t\t * @type {Object}\n\t\t * @static\n\t\t */\n\t    s.activePlugin = null;\n\n\n\t// class getter / setter properties\n\t\t/**\n\t\t * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\n\t\t * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\n\t\t * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     createjs.Sound.volume = 0.5;\n\t\t *\n\t\t *\n\t\t * @property volume\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @since 0.6.1\n\t\t */\n\t\ts._masterVolume = 1;\n\t\tObject.defineProperty(s, \"volume\", {\n\t\t\tget: function () {return this._masterVolume;},\n\t\t\tset: function (value) {\n\t\t\t\t\tif (Number(value) == null) {return false;}\n\t\t\t\t\tvalue = Math.max(0, Math.min(1, value));\n\t\t\t\t\ts._masterVolume = value;\n\t\t\t\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n\t\t\t\t\t\tvar instances = this._instances;\n\t\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\t\t\tinstances[i].setMasterVolume(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\n\t\t * separately and when set will override, but not change the mute property of individual instances. To mute an individual\n\t\t * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     createjs.Sound.muted = true;\n\t\t *\n\t\t *\n\t\t * @property muted\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @since 0.6.1\n\t\t */\n\t\ts._masterMute = false;\n\t\t// OJR references to the methods were not working, so the code had to be duplicated here\n\t\tObject.defineProperty(s, \"muted\", {\n\t\t\tget: function () {return this._masterMute;},\n\t\t\tset: function (value) {\n\t\t\t\t\tif (value == null) {return false;}\n\n\t\t\t\t\tthis._masterMute = value;\n\t\t\t\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n\t\t\t\t\t\tvar instances = this._instances;\n\t\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\t\t\tinstances[i].setMasterMute(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\n\t\t * or if the plugin supports a specific feature. Capabilities include:\n\t\t * <ul>\n\t\t *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\n\t\t *     <li><b>volume;</b> If the plugin can control audio volume.</li>\n\t\t *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\n\t\t *     if there is no known limit.</li>\n\t\t * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\n\t\t *     <li><b>mp3:</b> If MP3 audio is supported.</li>\n\t\t *     <li><b>ogg:</b> If OGG audio is supported.</li>\n\t\t *     <li><b>wav:</b> If WAV audio is supported.</li>\n\t\t *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\n\t\t *     <li><b>m4a:</b> If M4A audio is supported.</li>\n\t\t *     <li><b>mp4:</b> If MP4 audio is supported.</li>\n\t\t *     <li><b>aiff:</b> If aiff audio is supported.</li>\n\t\t *     <li><b>wma:</b> If wma audio is supported.</li>\n\t\t *     <li><b>mid:</b> If mid audio is supported.</li>\n\t\t * </ul>\n\t\t *\n\t\t * You can get a specific capability of the active plugin using standard object notation\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var mp3 = createjs.Sound.capabilities.mp3;\n\t\t *\n\t\t * Note this property is read only.\n\t\t *\n\t\t * @property capabilities\n\t\t * @type {Object}\n\t\t * @static\n\t\t * @readOnly\n\t\t * @since 0.6.1\n\t\t */\n\t\tObject.defineProperty(s, \"capabilities\", {\n\t\t\tget: function () {\n\t\t\t\t\t\tif (s.activePlugin == null) {return null;}\n\t\t\t\t\t\treturn s.activePlugin._capabilities;\n\t\t\t\t\t},\n\t\t\tset: function (value) { return false;}\n\t\t});\n\n\n\t// Class Private properties\n\t\t/**\n\t\t * Determines if the plugins have been registered. If false, the first call to play() will instantiate the default\n\t\t * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\n\t\t * If plugins have been registered, but none are applicable, then sound playback will fail.\n\t\t * @property _pluginsRegistered\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._pluginsRegistered = false;\n\n\t\t/**\n\t\t * Used internally to assign unique IDs to each AbstractSoundInstance.\n\t\t * @property _lastID\n\t\t * @type {Number}\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._lastID = 0;\n\n\t\t/**\n\t\t * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\n\t\t * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/setVolume\"}}{{/crossLink}}.\n\t\t * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\n\t\t * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\n\t\t * method.\n\t\t * @property _instances\n\t\t * @type {Array}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._instances = [];\n\n\t\t/**\n\t\t * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\n\t\t * @property _idHash\n\t\t * @type {Object}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._idHash = {};\n\n\t\t/**\n\t\t * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\n\t\t * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\n\t\t * and data.\n\t\t * @property _preloadHash\n\t\t * @type {Object}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._preloadHash = {};\n\n\t\t/**\n\t\t * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\n\t\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t\t * @property _defaultPlayPropsHash\n\t\t * @type {Object}\n\t\t * @protected\n\t\t * @static\n\t\t * @since 0.6.1\n\t\t */\n\t\ts._defaultPlayPropsHash = {};\n\n\n\t// EventDispatcher methods:\n\t\ts.addEventListener = null;\n\t\ts.removeEventListener = null;\n\t\ts.removeAllEventListeners = null;\n\t\ts.dispatchEvent = null;\n\t\ts.hasEventListener = null;\n\t\ts._listeners = null;\n\n\t\tcreatejs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\n\n\n\t// Events\n\t\t/**\n\t\t * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\n\t\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t\t * @event fileload\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {String} src The source of the sound that was loaded.\n\t\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t\t * @since 0.4.1\n\t\t */\n\n\t\t/**\n\t\t * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\n\t\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t\t * @event fileerror\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @param {String} src The source of the sound that was loaded.\n\t\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t\t * @since 0.6.0\n\t\t */\n\n\n\t// Class Public Methods\n\t\t/**\n\t\t * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t\t * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\n\t\t * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\n\t\t * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\n\t\t * @method getPreloadHandlers\n\t\t * @return {Object} An object containing:\n\t\t * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\n\t\t *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\n\t\t *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\n\t\t *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts.getPreloadHandlers = function () {\n\t\t\treturn {\n\t\t\t\tcallback:createjs.proxy(s.initLoad, s),\n\t\t\t\ttypes:[\"sound\"],\n\t\t\t\textensions:s.SUPPORTED_EXTENSIONS\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Used to dispatch fileload events from internal loading.\n\t\t * @method _handleLoadComplete\n\t\t * @param event A loader event.\n\t\t * @protected\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts._handleLoadComplete = function(event) {\n\t\t\tvar src = event.target.getItem().src;\n\t\t\tif (!s._preloadHash[src]) {return;}\n\n\t\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\t\tvar item = s._preloadHash[src][i];\n\t\t\t\ts._preloadHash[src][i] = true;\n\n\t\t\t\tif (!s.hasEventListener(\"fileload\")) { continue; }\n\n\t\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\t\tevent.src = item.src;\n\t\t\t\tevent.id = item.id;\n\t\t\t\tevent.data = item.data;\n\t\t\t\tevent.sprite = item.sprite;\n\n\t\t\t\ts.dispatchEvent(event);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Used to dispatch error events from internal preloading.\n\t\t * @param event\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t * @static\n\t\t */\n\t\ts._handleLoadError = function(event) {\n\t\t\tvar src = event.target.getItem().src;\n\t\t\tif (!s._preloadHash[src]) {return;}\n\n\t\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\t\tvar item = s._preloadHash[src][i];\n\t\t\t\ts._preloadHash[src][i] = false;\n\n\t\t\t\tif (!s.hasEventListener(\"fileerror\")) { continue; }\n\n\t\t\t\tvar event = new createjs.Event(\"fileerror\");\n\t\t\t\tevent.src = item.src;\n\t\t\t\tevent.id = item.id;\n\t\t\t\tevent.data = item.data;\n\t\t\t\tevent.sprite = item.sprite;\n\n\t\t\t\ts.dispatchEvent(event);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\n\t\t *\n\t\t * @method _registerPlugin\n\t\t * @param {Object} plugin The plugin class to install.\n\t\t * @return {Boolean} Whether the plugin was successfully initialized.\n\t\t * @static\n\t\t * @private\n\t\t */\n\t\ts._registerPlugin = function (plugin) {\n\t\t\t// Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\n\t\t\tif (plugin.isSupported()) {\n\t\t\t\ts.activePlugin = new plugin();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t\t *\n\t\t * @method registerPlugins\n\t\t * @param {Array} plugins An array of plugins classes to install.\n\t\t * @return {Boolean} Whether a plugin was successfully initialized.\n\t\t * @static\n\t\t */\n\t\ts.registerPlugins = function (plugins) {\n\t\t\ts._pluginsRegistered = true;\n\t\t\tfor (var i = 0, l = plugins.length; i < l; i++) {\n\t\t\t\tif (s._registerPlugin(plugins[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Initialize the default plugins. This method is automatically called when any audio is played or registered before\n\t\t * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\n\t\t * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \tif (!createjs.initializeDefaultPlugins()) { return; }\n\t\t *\n\t\t * @method initializeDefaultPlugins\n\t\t * @returns {Boolean} True if a plugin was initialized, false otherwise.\n\t\t * @since 0.4.0\n\t\t * @static\n\t\t */\n\t\ts.initializeDefaultPlugins = function () {\n\t\t\tif (s.activePlugin != null) {return true;}\n\t\t\tif (s._pluginsRegistered) {return false;}\n\t\t\tif (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {return true;}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Determines if Sound has been initialized, and a plugin has been activated.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t * This example sets up a Flash fallback, but only if there is no plugin specified yet.\n\t\t *\n\t\t * \tif (!createjs.Sound.isReady()) {\n\t\t *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t\t * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t\t *\t}\n\t\t *\n\t\t * @method isReady\n\t\t * @return {Boolean} If Sound has initialized a plugin.\n\t\t * @static\n\t\t */\n\t\ts.isReady = function () {\n\t\t\treturn (s.activePlugin != null);\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method getCapabilities\n\t\t * @return {Object} An object containing the capabilities of the active plugin.\n\t\t * @static\n\t\t * @deprecated\n\t\t */\n\t\ts.getCapabilities = function () {\n\t\t\tif (s.activePlugin == null) {return null;}\n\t\t\treturn s.activePlugin._capabilities;\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method getCapability\n\t\t * @param {String} key The capability to retrieve\n\t\t * @return {Number|Boolean} The value of the capability.\n\t\t * @static\n\t\t * @see getCapabilities\n\t\t * @deprecated\n\t\t */\n\t\ts.getCapability = function (key) {\n\t\t\tif (s.activePlugin == null) {return null;}\n\t\t\treturn s.activePlugin._capabilities[key];\n\t\t};\n\n\t\t/**\n\t\t * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\n\t\t * for usage by a plugin, and not for direct interaction.\n\t\t * @method initLoad\n\t\t * @param {Object} src The object to load.\n\t\t * @return {Object|AbstractLoader} An instance of AbstractLoader.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts.initLoad = function (loadItem) {\n\t\t\treturn s._registerSound(loadItem);\n\t\t};\n\n\t\t/**\n\t\t * Internal method for loading sounds.  This should not be called directly.\n\t\t *\n\t\t * @method _registerSound\n\t\t * @param {Object} src The object to load, containing src property and optionally containing id and data.\n\t\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t\t * Returns true if the source is already loaded.\n\t\t * @static\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\n\t\ts._registerSound = function (loadItem) {\n\t\t\tif (!s.initializeDefaultPlugins()) {return false;}\n\n\t\t\tvar details;\n\t\t\tif (loadItem.src instanceof Object) {\n\t\t\t\tdetails = s._parseSrc(loadItem.src);\n\t\t\t\tdetails.src = loadItem.path + details.src;\n\t\t\t} else {\n\t\t\t\tdetails = s._parsePath(loadItem.src);\n\t\t\t}\n\t\t\tif (details == null) {return false;}\n\t\t\tloadItem.src = details.src;\n\t\t\tloadItem.type = \"sound\";\n\n\t\t\tvar data = loadItem.data;\n\t\t\tvar numChannels = null;\n\t\t\tif (data != null) {\n\t\t\t\tif (!isNaN(data.channels)) {\n\t\t\t\t\tnumChannels = parseInt(data.channels);\n\t\t\t\t} else if (!isNaN(data)) {\n\t\t\t\t\tnumChannels = parseInt(data);\n\t\t\t\t}\n\n\t\t\t\tif(data.audioSprite) {\n\t\t\t\t\tvar sp;\n\t\t\t\t\tfor(var i = data.audioSprite.length; i--; ) {\n\t\t\t\t\t\tsp = data.audioSprite[i];\n\t\t\t\t\t\ts._idHash[sp.id] = {src: loadItem.src, startTime: parseInt(sp.startTime), duration: parseInt(sp.duration)};\n\n\t\t\t\t\t\tif (sp.defaultPlayProps) {\n\t\t\t\t\t\t\ts._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (loadItem.id != null) {s._idHash[loadItem.id] = {src: loadItem.src};}\t\t\tvar loader = s.activePlugin.register(loadItem);\n\n\t\t\tSoundChannel.create(loadItem.src, numChannels);\n\n\t\t\t// return the number of instances to the user.  This will also be returned in the load event.\n\t\t\tif (data == null || !isNaN(data)) {\n\t\t\t\tloadItem.data = numChannels || SoundChannel.maxPerChannel();\n\t\t\t} else {\n\t\t\t\tloadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\n\t\t\t}\n\n\t\t\tif (loader.type) {loadItem.type = loader.type;}\n\n\t\t\tif (loadItem.defaultPlayProps) {\n\t\t\t\ts._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\n\t\t\t}\n\t\t\treturn loader;\n\t\t};\n\n\t\t/**\n\t\t * Register an audio file for loading and future playback in Sound. This is automatically called when using\n\t\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\n\t\t * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t\t *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\n\t\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\n\t\t *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\n\t\t *\n\t\t *\n\t\t * @method registerSound\n\t\t * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\n\t\t * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\n\t\t * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\n\t\t * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\n\t\t * for other information. The audio channels will set a default based on plugin if no value is found.\n\t\t * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\n\t\t *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\n\t\t *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\n\t\t *   duration is the amount of time to play the clip for, in milliseconds.<br/>\n\t\t * This allows Sound to support audio sprites that are played back by id.\n\t\t * @param {string} basePath Set a path that will be prepended to src for loading.\n\t\t * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\n\t\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\n\t\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t\t * Returns true if the source is already loaded.\n\t\t * @static\n\t\t * @since 0.4.0\n\t\t */\n\t\ts.registerSound = function (src, id, data, basePath, defaultPlayProps) {\n\t\t\tvar loadItem = {src: src, id: id, data:data, defaultPlayProps:defaultPlayProps};\n\t\t\tif (src instanceof Object && src.src) {\n\t\t\t\tbasePath = id;\n\t\t\t\tloadItem = src;\n\t\t\t}\n\t\t\tloadItem = createjs.LoadItem.create(loadItem);\n\t\t\tloadItem.path = basePath;\n\n\t\t\tif (basePath != null && !(loadItem.src instanceof Object)) {loadItem.src = basePath + src;}\n\n\t\t\tvar loader = s._registerSound(loadItem);\n\t\t\tif(!loader) {return false;}\n\n\t\t\tif (!s._preloadHash[loadItem.src]) { s._preloadHash[loadItem.src] = [];}\n\t\t\ts._preloadHash[loadItem.src].push(loadItem);\n\t\t\tif (s._preloadHash[loadItem.src].length == 1) {\n\t\t\t\t// OJR note this will disallow reloading a sound if loading fails or the source changes\n\t\t\t\tloader.on(\"complete\", createjs.proxy(this._handleLoadComplete, this));\n\t\t\t\tloader.on(\"error\", createjs.proxy(this._handleLoadError, this));\n\t\t\t\ts.activePlugin.preload(loader);\n\t\t\t} else {\n\t\t\t\tif (s._preloadHash[loadItem.src][0] == true) {return true;}\n\t\t\t}\n\n\t\t\treturn loadItem;\n\t\t};\n\n\t\t/**\n\t\t * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\n\t\t * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\n\t\t * when required.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \t\tvar assetPath = \"./myAudioPath/\";\n\t\t *      var sounds = [\n\t\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t\t *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension}, id:\"better\"}\n\t\t *      ];\n\t\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\n\t\t *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t\t *      createjs.Sound.registerSounds(sounds, assetPath);\n\t\t *\n\t\t * @method registerSounds\n\t\t * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\n\t\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\n\t\t * with \"id\" and \"data\" being optional.\n\t\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\n\t\t * Note id is required if src is an object with extension labeled src properties.\n\t\t * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\n\t\t * audio that was loaded with a basePath by src, the basePath must be included.\n\t\t * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\n\t\t * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\n\t\t * Also, it will return true for any values when the source is already loaded.\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.registerSounds = function (sounds, basePath) {\n\t\t\tvar returnValues = [];\n\t\t\tif (sounds.path) {\n\t\t\t\tif (!basePath) {\n\t\t\t\t\tbasePath = sounds.path;\n\t\t\t\t} else {\n\t\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t\t}\n\t\t\t\tsounds = sounds.manifest;\n\t\t\t\t// TODO document this feature\n\t\t\t}\n\t\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\t\treturnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\n\t\t\t}\n\t\t\treturn returnValues;\n\t\t};\n\n\t\t/**\n\t\t * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t\t * <br />Note this will stop playback on active instances playing this sound before deleting them.\n\t\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Sound.removeSound(\"myID\");\n\t\t *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\n\t\t *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\n\t\t *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\n\t\t *\n\t\t * @method removeSound\n\t\t * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\n\t\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t\t * @return {Boolean} True if sound is successfully removed.\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t */\n\t\ts.removeSound = function(src, basePath) {\n\t\t\tif (s.activePlugin == null) {return false;}\n\n\t\t\tif (src instanceof Object && src.src) {src = src.src;}\n\n\t\t\tvar details;\n\t\t\tif (src instanceof Object) {\n\t\t\t\tdetails = s._parseSrc(src);\n\t\t\t} else {\n\t\t\t\tsrc = s._getSrcById(src).src;\n\t\t\t\tdetails = s._parsePath(src);\n\t\t\t}\n\t\t\tif (details == null) {return false;}\n\t\t\tsrc = details.src;\n\t\t\tif (basePath != null) {src = basePath + src;}\n\n\t\t\tfor(var prop in s._idHash){\n\t\t\t\tif(s._idHash[prop].src == src) {\n\t\t\t\t\tdelete(s._idHash[prop]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// clear from SoundChannel, which also stops and deletes all instances\n\t\t\tSoundChannel.removeSrc(src);\n\n\t\t\tdelete(s._preloadHash[src]);\n\n\t\t\ts.activePlugin.removeSound(src);\n\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t\t * <br />Note this will stop playback on active instances playing this audio before deleting them.\n\t\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t * \t\tassetPath = \"./myPath/\";\n\t\t *      var sounds = [\n\t\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t\t *      ];\n\t\t *      createjs.Sound.removeSounds(sounds, assetPath);\n\t\t *\n\t\t * @method removeSounds\n\t\t * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\n\t\t * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\n\t\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\n\t\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t\t * @return {Object} An array of Boolean values representing if the sounds with the same array index were\n\t\t * successfully removed.\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t */\n\t\ts.removeSounds = function (sounds, basePath) {\n\t\t\tvar returnValues = [];\n\t\t\tif (sounds.path) {\n\t\t\t\tif (!basePath) {\n\t\t\t\t\tbasePath = sounds.path;\n\t\t\t\t} else {\n\t\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t\t}\n\t\t\t\tsounds = sounds.manifest;\n\t\t\t}\n\t\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\t\treturnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\n\t\t\t}\n\t\t\treturn returnValues;\n\t\t};\n\n\t\t/**\n\t\t * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t\t * <br />Note this will stop playback on all active sound instances before deleting them.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     createjs.Sound.removeAllSounds();\n\t\t *\n\t\t * @method removeAllSounds\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t */\n\t\ts.removeAllSounds = function() {\n\t\t\ts._idHash = {};\n\t\t\ts._preloadHash = {};\n\t\t\tSoundChannel.removeAll();\n\t\t\tif (s.activePlugin) {s.activePlugin.removeAllSounds();}\n\t\t};\n\n\t\t/**\n\t\t * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\n\t\t * not completed preloading will not kick off a new internal preload if they are played.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var mySound = \"assetPath/asset0.ogg\";\n\t\t *     if(createjs.Sound.loadComplete(mySound) {\n\t\t *         createjs.Sound.play(mySound);\n\t\t *     }\n\t\t *\n\t\t * @method loadComplete\n\t\t * @param {String} src The src or id that is being loaded.\n\t\t * @return {Boolean} If the src is already loaded.\n\t\t * @since 0.4.0\n\t\t * @static\n\t\t */\n\t\ts.loadComplete = function (src) {\n\t\t\tif (!s.isReady()) { return false; }\n\t\t\tvar details = s._parsePath(src);\n\t\t\tif (details) {\n\t\t\t\tsrc = s._getSrcById(details.src).src;\n\t\t\t} else {\n\t\t\t\tsrc = s._getSrcById(src).src;\n\t\t\t}\n\t\t\tif(s._preloadHash[src] == undefined) {return false;}\n\t\t\treturn (s._preloadHash[src][0] == true);  // src only loads once, so if it's true for the first it's true for all\n\t\t};\n\n\t\t/**\n\t\t * Parse the path of a sound. Alternate extensions will be attempted in order if the\n\t\t * current extension is not supported\n\t\t * @method _parsePath\n\t\t * @param {String} value The path to an audio source.\n\t\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._parsePath = function (value) {\n\t\t\tif (typeof(value) != \"string\") {value = value.toString();}\n\n\t\t\tvar match = value.match(s.FILE_PATTERN);\n\t\t\tif (match == null) {return false;}\n\n\t\t\tvar name = match[4];\n\t\t\tvar ext = match[5];\n\t\t\tvar c = s.capabilities;\n\t\t\tvar i = 0;\n\t\t\twhile (!c[ext]) {\n\t\t\t\text = s.alternateExtensions[i++];\n\t\t\t\tif (i > s.alternateExtensions.length) { return null;}\t// no extensions are supported\n\t\t\t}\n\t\t\tvalue = value.replace(\".\"+match[5], \".\"+ext);\n\n\t\t\tvar ret = {name:name, src:value, extension:ext};\n\t\t\treturn ret;\n\t\t};\n\n\t\t/**\n\t\t * Parse the path of a sound based on properties of src matching with supported extensions.\n\t\t * Returns false if none of the properties are supported\n\t\t * @method _parseSrc\n\t\t * @param {Object} value The paths to an audio source, indexed by extension type.\n\t\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._parseSrc = function (value) {\n\t\t\tvar ret = {name:undefined, src:undefined, extension:undefined};\n\t\t\tvar c = s.capabilities;\n\n\t\t\tfor (var prop in value) {\n\t\t\t  if(value.hasOwnProperty(prop) && c[prop]) {\n\t\t\t\t\tret.src = value[prop];\n\t\t\t\t\tret.extension = prop;\n\t\t\t\t\tbreak;\n\t\t\t  }\n\t\t\t}\n\t\t\tif (!ret.src) {return false;}\t// no matches\n\n\t\t\tvar i = ret.src.lastIndexOf(\"/\");\n\t\t\tif (i != -1) {\n\t\t\t\tret.name = ret.src.slice(i+1);\n\t\t\t} else {\n\t\t\t\tret.name = ret.src;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t};\n\n\t\t/* ---------------\n\t\t Static API.\n\t\t --------------- */\n\t\t/**\n\t\t * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to play, a\n\t\t * AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\n\t\t * Note that even on sounds with failed playback, you may still be able to call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\n\t\t * since the failure could be due to lack of available channels. If the src does not have a supported extension or\n\t\t * if there is no available plugin, a default AbstractSoundInstance will be returned which will not play any audio, but will not generate errors.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t\t *      function handleLoad(event) {\n\t\t *      \tcreatejs.Sound.play(\"myID\");\n\t\t *      \t// store off AbstractSoundInstance for controlling\n\t\t *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\n\t\t *      }\n\t\t *\n\t\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t\t *\n\t\t * <b>Parameters Deprecated</b><br />\n\t\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n\t\t *\n\t\t * @method play\n\t\t * @param {String} src The src or ID of the audio.\n\t\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n\t\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n\t\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n\t\t * <br /><strong>OR</strong><br />\n\t\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n\t\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n\t\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t * loops), and -1 can be used for infinite playback.\n\t\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t * against the individual volume.\n\t\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t\t * @param {Number} [startTime=null] <b>Deprecated</b> To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t\t * @param {Number} [duration=null] <b>Deprecated</b> To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n\t\t * @static\n\t\t */\n\t\ts.play = function (src, interrupt, delay, offset, loop, volume, pan, startTime, duration) {\n\t\t\tvar playProps;\n\t\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n\t\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\n\t\t\t} else {\n\t\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan, startTime:startTime, duration:duration});\n\t\t\t}\n\t\t\tvar instance = s.createInstance(src, playProps.startTime, playProps.duration);\n\t\t\tvar ok = s._playInstance(instance, playProps);\n\t\t\tif (!ok) {instance._playFailed();}\n\t\t\treturn instance;\n\t\t};\n\n\t\t/**\n\t\t * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\n\t\t * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\n\t\t * called safely but does nothing.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var myInstance = null;\n\t\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t\t *      function handleLoad(event) {\n\t\t *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\n\t\t *      \t// alternately we could call the following\n\t\t *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\n\t\t *      }\n\t\t *\n\t\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t\t *\n\t\t * @method createInstance\n\t\t * @param {String} src The src or ID of the audio.\n\t\t * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t\t * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n\t\t * Unsupported extensions will return the default AbstractSoundInstance.\n\t\t * @since 0.4.0\n\t\t * @static\n\t\t */\n\t\ts.createInstance = function (src, startTime, duration) {\n\t\t\tif (!s.initializeDefaultPlugins()) {return new createjs.DefaultSoundInstance(src, startTime, duration);}\n\n\t\t\tvar defaultPlayProps = s._defaultPlayPropsHash[src];\t// for audio sprites, which create and store defaults by id\n\t\t\tsrc = s._getSrcById(src);\n\n\t\t\tvar details = s._parsePath(src.src);\n\n\t\t\tvar instance = null;\n\t\t\tif (details != null && details.src != null) {\n\t\t\t\tSoundChannel.create(details.src);\n\t\t\t\tif (startTime == null) {startTime = src.startTime;}\n\t\t\t\tinstance = s.activePlugin.create(details.src, startTime, duration || src.duration);\n\n\t\t\t\tdefaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\n\t\t\t\tif(defaultPlayProps) {\n\t\t\t\t\tinstance.applyPlayProps(defaultPlayProps);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinstance = new createjs.DefaultSoundInstance(src, startTime, duration);\n\t\t\t}\n\n\t\t\tinstance.uniqueId = s._lastID++;\n\n\t\t\treturn instance;\n\t\t};\n\n\t\t/**\n\t\t * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\n\t\t * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     createjs.Sound.stop();\n\t\t *\n\t\t * @method stop\n\t\t * @static\n\t\t */\n\t\ts.stop = function () {\n\t\t\tvar instances = this._instances;\n\t\t\tfor (var i = instances.length; i--; ) {\n\t\t\t\tinstances[i].stop();  // NOTE stop removes instance from this._instances\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method setVolume\n\t\t * @param {Number} value The master volume value. The acceptable range is 0-1.\n\t\t * @static\n\t\t * @deprecated\n\t\t */\n\t\ts.setVolume = function (value) {\n\t\t\tif (Number(value) == null) {return false;}\n\t\t\tvalue = Math.max(0, Math.min(1, value));\n\t\t\ts._masterVolume = value;\n\t\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n\t\t\t\tvar instances = this._instances;\n\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\tinstances[i].setMasterVolume(value);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method getVolume\n\t\t * @return {Number} The master volume, in a range of 0-1.\n\t\t * @static\n\t\t * @deprecated\n\t\t */\n\t\ts.getVolume = function () {\n\t\t\treturn this._masterVolume;\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method setMute\n\t\t * @param {Boolean} value Whether the audio should be muted or not.\n\t\t * @return {Boolean} If the mute was set.\n\t\t * @static\n\t\t * @since 0.4.0\n\t\t * @deprecated\n\t\t */\n\t\ts.setMute = function (value) {\n\t\t\tif (value == null) {return false;}\n\n\t\t\tthis._masterMute = value;\n\t\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n\t\t\t\tvar instances = this._instances;\n\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\tinstances[i].setMasterMute(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n\t\t *\n\t\t * @method getMute\n\t\t * @return {Boolean} The mute value of Sound.\n\t\t * @static\n\t\t * @since 0.4.0\n\t\t * @deprecated\n\t\t */\n\t\ts.getMute = function () {\n\t\t\treturn this._masterMute;\n\t\t};\n\n\t\t/**\n\t\t * Set the default playback properties for all new SoundInstances of the passed in src or ID.\n\t\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\n\t\t *\n\t\t * @method setDefaultPlayProps\n\t\t * @param {String} src The src or ID used to register the audio.\n\t\t * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\n\t\t * @since 0.6.1\n\t\t */\n\t\ts.setDefaultPlayProps = function(src, playProps) {\n\t\t\tsrc = s._getSrcById(src);\n\t\t\ts._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\n\t\t};\n\n\t\t/**\n\t\t * Get the default playback properties for the passed in src or ID.  These properties are applied to all\n\t\t * new SoundInstances.  Returns null if default does not exist.\n\t\t *\n\t\t * @method getDefaultPlayProps\n\t\t * @param {String} src The src or ID used to register the audio.\n\t\t * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\n\t\t * @since 0.6.1\n\t\t */\n\t\ts.getDefaultPlayProps = function(src) {\n\t\t\tsrc = s._getSrcById(src);\n\t\t\treturn s._defaultPlayPropsHash[s._parsePath(src.src).src];\n\t\t};\n\n\n\t\t/* ---------------\n\t\t Internal methods\n\t\t --------------- */\n\t\t/**\n\t\t * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\n\t\t * control delays.\n\t\t * @method _playInstance\n\t\t * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\n\t\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t\t * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\n\t\t * have a delay will return true, but may still fail to play.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._playInstance = function (instance, playProps) {\n\t\t\tvar defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\n\t\t\tif (playProps.interrupt == null) {playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior;}\t\t\tif (playProps.delay == null) {playProps.delay = defaultPlayProps.delay || 0;}\n\t\t\tif (playProps.offset == null) {playProps.offset = instance.getPosition();}\n\t\t\tif (playProps.loop == null) {playProps.loop = instance.loop;}\n\t\t\tif (playProps.volume == null) {playProps.volume = instance.volume;}\n\t\t\tif (playProps.pan == null) {playProps.pan = instance.pan;}\n\n\t\t\tif (playProps.delay == 0) {\n\t\t\t\tvar ok = s._beginPlaying(instance, playProps);\n\t\t\t\tif (!ok) {return false;}\n\t\t\t} else {\n\t\t\t\t//Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\n\t\t\t\t// OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\n\t\t\t\tvar delayTimeoutId = setTimeout(function () {\n\t\t\t\t\ts._beginPlaying(instance, playProps);\n\t\t\t\t}, playProps.delay);\n\t\t\t\tinstance.delayTimeoutId = delayTimeoutId;\n\t\t\t}\n\n\t\t\tthis._instances.push(instance);\n\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\n\t\t * @method _beginPlaying\n\t\t * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\n\t\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t\t * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\n\t\t * start, this will return false.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._beginPlaying = function (instance, playProps) {\n\t\t\tif (!SoundChannel.add(instance, playProps.interrupt)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar result = instance._beginPlaying(playProps);\n\t\t\tif (!result) {\n\t\t\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\t\t\tif (index > -1) {this._instances.splice(index, 1);}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\n\t\t * instead.\n\t\t * @method _getSrcById\n\t\t * @param {String} value The ID the sound was registered with.\n\t\t * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._getSrcById = function (value) {\n\t\t\treturn s._idHash[value] || {src: value};\n\t\t};\n\n\t\t/**\n\t\t * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\n\t\t * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\n\t\t * instances themselves.\n\t\t * @method _playFinished\n\t\t * @param {AbstractSoundInstance} instance The instance that finished playback.\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._playFinished = function (instance) {\n\t\t\tSoundChannel.remove(instance);\n\t\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\t\tif (index > -1) {this._instances.splice(index, 1);}\t// OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\n\t\t};\n\n\t\tcreatejs.Sound = Sound;\n\n\t\t/**\n\t\t * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\n\t\t * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\n\t\t *\n\t\t * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\n\t\t * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\n\t\t * browser support.\n\t\t *\n\t\t * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\n\t\t * sound that is already playing.\n\t\t * #class SoundChannel\n\t\t * @param {String} src The source of the instances\n\t\t * @param {Number} [max=1] The number of instances allowed\n\t\t * @constructor\n\t\t * @protected\n\t\t */\n\t\tfunction SoundChannel(src, max) {\n\t\t\tthis.init(src, max);\n\t\t}\n\n\t\t/* ------------\n\t\t Static API\n\t\t ------------ */\n\t\t/**\n\t\t * A hash of channel instances indexed by source.\n\t\t * #property channels\n\t\t * @type {Object}\n\t\t * @static\n\t\t */\n\t\tSoundChannel.channels = {};\n\n\t\t/**\n\t\t * Create a sound channel. Note that if the sound channel already exists, this will fail.\n\t\t * #method create\n\t\t * @param {String} src The source for the channel\n\t\t * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\n\t\t * @return {Boolean} If the channels were created.\n\t\t * @static\n\t\t */\n\t\tSoundChannel.create = function (src, max) {\n\t\t\tvar channel = SoundChannel.get(src);\n\t\t\tif (channel == null) {\n\t\t\t\tSoundChannel.channels[src] = new SoundChannel(src, max);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\t/**\n\t\t * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\n\t\t * #method remove\n\t\t * @param {String} src The source for the channel\n\t\t * @return {Boolean} If the channels were deleted.\n\t\t * @static\n\t\t */\n\t\tSoundChannel.removeSrc = function (src) {\n\t\t\tvar channel = SoundChannel.get(src);\n\t\t\tif (channel == null) {return false;}\n\t\t\tchannel._removeAll();\t// this stops and removes all active instances\n\t\t\tdelete(SoundChannel.channels[src]);\n\t\t\treturn true;\n\t\t};\n\t\t/**\n\t\t * Delete all sound channels, stop and delete all related instances.\n\t\t * #method removeAll\n\t\t * @static\n\t\t */\n\t\tSoundChannel.removeAll = function () {\n\t\t\tfor(var channel in SoundChannel.channels) {\n\t\t\t\tSoundChannel.channels[channel]._removeAll();\t// this stops and removes all active instances\n\t\t\t}\n\t\t\tSoundChannel.channels = {};\n\t\t};\n\t\t/**\n\t\t * Add an instance to a sound channel.\n\t\t * #method add\n\t\t * @param {AbstractSoundInstance} instance The instance to add to the channel\n\t\t * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t\t * for details on interrupt modes.\n\t\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t\t * @static\n\t\t */\n\t\tSoundChannel.add = function (instance, interrupt) {\n\t\t\tvar channel = SoundChannel.get(instance.src);\n\t\t\tif (channel == null) {return false;}\n\t\t\treturn channel._add(instance, interrupt);\n\t\t};\n\t\t/**\n\t\t * Remove an instance from the channel.\n\t\t * #method remove\n\t\t * @param {AbstractSoundInstance} instance The instance to remove from the channel\n\t\t * @return The success of the method call. If there is no channel, it will return false.\n\t\t * @static\n\t\t */\n\t\tSoundChannel.remove = function (instance) {\n\t\t\tvar channel = SoundChannel.get(instance.src);\n\t\t\tif (channel == null) {return false;}\n\t\t\tchannel._remove(instance);\n\t\t\treturn true;\n\t\t};\n\t\t/**\n\t\t * Get the maximum number of sounds you can have in a channel.\n\t\t * #method maxPerChannel\n\t\t * @return {Number} The maximum number of sounds you can have in a channel.\n\t\t */\n\t\tSoundChannel.maxPerChannel = function () {\n\t\t\treturn p.maxDefault;\n\t\t};\n\t\t/**\n\t\t * Get a channel instance by its src.\n\t\t * #method get\n\t\t * @param {String} src The src to use to look up the channel\n\t\t * @static\n\t\t */\n\t\tSoundChannel.get = function (src) {\n\t\t\treturn SoundChannel.channels[src];\n\t\t};\n\n\t\tvar p = SoundChannel.prototype;\n\t\tp.constructor = SoundChannel;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t\t/**\n\t\t * The source of the channel.\n\t\t * #property src\n\t\t * @type {String}\n\t\t */\n\t\tp.src = null;\n\n\t\t/**\n\t\t * The maximum number of instances in this channel.  -1 indicates no limit\n\t\t * #property max\n\t\t * @type {Number}\n\t\t */\n\t\tp.max = null;\n\n\t\t/**\n\t\t * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\n\t\t * #property maxDefault\n\t\t * @type {Number}\n\t\t * @default 100\n\t\t * @since 0.4.0\n\t\t */\n\t\tp.maxDefault = 100;\n\n\t\t/**\n\t\t * The current number of active instances.\n\t\t * #property length\n\t\t * @type {Number}\n\t\t */\n\t\tp.length = 0;\n\n\t\t/**\n\t\t * Initialize the channel.\n\t\t * #method init\n\t\t * @param {String} src The source of the channel\n\t\t * @param {Number} max The maximum number of instances in the channel\n\t\t * @protected\n\t\t */\n\t\tp.init = function (src, max) {\n\t\t\tthis.src = src;\n\t\t\tthis.max = max || this.maxDefault;\n\t\t\tif (this.max == -1) {this.max = this.maxDefault;}\n\t\t\tthis._instances = [];\n\t\t};\n\n\t\t/**\n\t\t * Get an instance by index.\n\t\t * #method get\n\t\t * @param {Number} index The index to return.\n\t\t * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\n\t\t */\n\t\tp._get = function (index) {\n\t\t\treturn this._instances[index];\n\t\t};\n\n\t\t/**\n\t\t * Add a new instance to the channel.\n\t\t * #method add\n\t\t * @param {AbstractSoundInstance} instance The instance to add.\n\t\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t\t */\n\t\tp._add = function (instance, interrupt) {\n\t\t\tif (!this._getSlot(interrupt, instance)) {return false;}\n\t\t\tthis._instances.push(instance);\n\t\t\tthis.length++;\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\n\t\t * #method remove\n\t\t * @param {AbstractSoundInstance} instance The instance to remove\n\t\t * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\n\t\t * return false.\n\t\t */\n\t\tp._remove = function (instance) {\n\t\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\t\tif (index == -1) {return false;}\n\t\t\tthis._instances.splice(index, 1);\n\t\t\tthis.length--;\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\n\t\t * #method removeAll\n\t\t */\n\t\tp._removeAll = function () {\n\t\t\t// Note that stop() removes the item from the list\n\t\t\tfor (var i=this.length-1; i>=0; i--) {\n\t\t\t\tthis._instances[i].stop();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Get an available slot depending on interrupt value and if slots are available.\n\t\t * #method getSlot\n\t\t * @param {String} interrupt The interrupt value to use.\n\t\t * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\n\t\t * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\n\t\t * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\n\t\t */\n\t\tp._getSlot = function (interrupt, instance) {\n\t\t\tvar target, replacement;\n\n\t\t\tif (interrupt != Sound.INTERRUPT_NONE) {\n\t\t\t\t// First replacement candidate\n\t\t\t\treplacement = this._get(0);\n\t\t\t\tif (replacement == null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = this.max; i < l; i++) {\n\t\t\t\ttarget = this._get(i);\n\n\t\t\t\t// Available Space\n\t\t\t\tif (target == null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Audio is complete or not playing\n\t\t\t\tif (target.playState == Sound.PLAY_FINISHED ||\n\t\t\t\t\ttarget.playState == Sound.PLAY_INTERRUPTED ||\n\t\t\t\t\ttarget.playState == Sound.PLAY_FAILED) {\n\t\t\t\t\treplacement = target;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (interrupt == Sound.INTERRUPT_NONE) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Audio is a better candidate than the current target, according to playhead\n\t\t\t\tif ((interrupt == Sound.INTERRUPT_EARLY && target.getPosition() < replacement.getPosition()) ||\n\t\t\t\t\t(interrupt == Sound.INTERRUPT_LATE && target.getPosition() > replacement.getPosition())) {\n\t\t\t\t\t\treplacement = target;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (replacement != null) {\n\t\t\t\treplacement._interrupt();\n\t\t\t\tthis._remove(replacement);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[Sound SoundChannel]\";\n\t\t};\n\t\t// do not add SoundChannel to namespace\n\n\t}());\n\n\t//##############################################################################\n\t// AbstractSoundInstance.js\n\t//##############################################################################\n\n\t/**\n\t * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\n\t * for control by the user.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n\t *\n\t * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\n\t * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\n\t *\n\t * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\n\t * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\n\t * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\n\t * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\n\t * will rebuild the references the Sound class need to control it.\n\t *\n\t *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\n\t *      myInstance.on(\"loop\", handleLoop);\n\t *      function handleLoop(event) {\n\t *          myInstance.volume = myInstance.volume * 0.5;\n\t *      }\n\t *\n\t * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\n\t *\n\t *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n\t *      myInstance.on(\"complete\", handleComplete);\n\t *      myInstance.on(\"loop\", handleLoop);\n\t *      myInstance.on(\"failed\", handleFailed);\n\t *\n\t *\n\t * @class AbstractSoundInstance\n\t * @param {String} src The path to and file name of the sound.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n\t * @extends EventDispatcher\n\t * @constructor\n\t */\n\n\t(function () {\n\n\n\t// Constructor:\n\t\tvar AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\n\t\t\tthis.EventDispatcher_constructor();\n\n\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * The source of the sound.\n\t\t\t * @property src\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.src = src;\n\n\t\t\t/**\n\t\t\t * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t\t * @property uniqueId\n\t\t\t * @type {String} | Number\n\t\t\t * @default -1\n\t\t\t */\n\t\t\tthis.uniqueId = -1;\n\n\t\t\t/**\n\t\t\t * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t\t * @property playState\n\t\t\t * @type {String}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis.playState = null;\n\n\t\t\t/**\n\t\t\t * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\n\t\t\t * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\n\t\t\t * @property delayTimeoutId\n\t\t\t * @type {timeoutVariable}\n\t\t\t * @default null\n\t\t\t * @protected\n\t\t\t * @since 0.4.0\n\t\t\t */\n\t\t\tthis.delayTimeoutId = null;\n\t\t\t// TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\n\n\n\t\t// private properties\n\t\t// Getter / Setter Properties\n\t\t\t// OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\n\t\t\t/**\n\t\t\t * The volume of the sound, between 0 and 1.\n\t\t\t *\n\t\t\t * The actual output volume of a sound can be calculated using:\n\t\t\t * <code>myInstance.volume * createjs.Sound.getVolume();</code>\n\t\t\t *\n\t\t\t * @property volume\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t */\n\t\t\tthis._volume =  1;\n\t\t\tObject.defineProperty(this, \"volume\", {\n\t\t\t\tget: this.getVolume,\n\t\t\t\tset: this.setVolume\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\n\t\t\t *\n\t\t\t * <br />Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio.\n\t\t\t *\n\t\t\t * @property pan\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis._pan =  0;\n\t\t\tObject.defineProperty(this, \"pan\", {\n\t\t\t\tget: this.getPan,\n\t\t\t\tset: this.setPan\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Audio sprite property used to determine the starting offset.\n\t\t\t * @property startTime\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @since 0.6.1\n\t\t\t */\n\t\t\tthis._startTime = Math.max(0, startTime || 0);\n\t\t\tObject.defineProperty(this, \"startTime\", {\n\t\t\t\tget: this.getStartTime,\n\t\t\t\tset: this.setStartTime\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Sets or gets the length of the audio clip, value is in milliseconds.\n\t\t\t *\n\t\t\t * @property duration\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._duration = Math.max(0, duration || 0);\n\t\t\tObject.defineProperty(this, \"duration\", {\n\t\t\t\tget: this.getDuration,\n\t\t\t\tset: this.setDuration\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Object that holds plugin specific resource need for audio playback.\n\t\t\t * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\n\t\t\t * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\n\t\t\t *\n\t\t\t * @property playbackResource\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t */\n\t\t\tthis._playbackResource = null;\n\t\t\tObject.defineProperty(this, \"playbackResource\", {\n\t\t\t\tget: this.getPlaybackResource,\n\t\t\t\tset: this.setPlaybackResource\n\t\t\t});\n\t\t\tif(playbackResource !== false && playbackResource !== true) { this.setPlaybackResource(playbackResource); }\n\n\t\t\t/**\n\t\t\t * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\n\t\t\t *\n\t\t\t * @property position\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._position = 0;\n\t\t\tObject.defineProperty(this, \"position\", {\n\t\t\t\tget: this.getPosition,\n\t\t\t\tset: this.setPosition\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * The number of play loops remaining. Negative values will loop infinitely.\n\t\t\t *\n\t\t\t * @property loop\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @public\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._loop = 0;\n\t\t\tObject.defineProperty(this, \"loop\", {\n\t\t\t\tget: this.getLoop,\n\t\t\t\tset: this.setLoop\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Mutes or unmutes the current audio instance.\n\t\t\t *\n\t\t\t * @property muted\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @since 0.6.0\n\t\t\t */\n\t\t\tthis._muted = false;\n\t\t\tObject.defineProperty(this, \"muted\", {\n\t\t\t\tget: this.getMuted,\n\t\t\t\tset: this.setMuted\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Pauses or resumes the current audio instance.\n\t\t\t *\n\t\t\t * @property paused\n\t\t\t * @type {Boolean}\n\t\t\t */\n\t\t\tthis._paused = false;\n\t\t\tObject.defineProperty(this, \"paused\", {\n\t\t\t\tget: this.getPaused,\n\t\t\t\tset: this.setPaused\n\t\t\t});\n\n\n\t\t// Events\n\t\t\t/**\n\t\t\t * The event that is fired when playback has started successfully.\n\t\t\t * @event succeeded\n\t\t\t * @param {Object} target The object that dispatched the event.\n\t\t\t * @param {String} type The event type.\n\t\t\t * @since 0.4.0\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * The event that is fired when playback is interrupted. This happens when another sound with the same\n\t\t\t * src property is played using an interrupt value that causes this instance to stop playing.\n\t\t\t * @event interrupted\n\t\t\t * @param {Object} target The object that dispatched the event.\n\t\t\t * @param {String} type The event type.\n\t\t\t * @since 0.4.0\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * The event that is fired when playback has failed. This happens when there are too many channels with the same\n\t\t\t * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\n\t\t\t * the sound could not be played, perhaps due to a 404 error.\n\t\t\t * @event failed\n\t\t\t * @param {Object} target The object that dispatched the event.\n\t\t\t * @param {String} type The event type.\n\t\t\t * @since 0.4.0\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * The event that is fired when a sound has completed playing but has loops remaining.\n\t\t\t * @event loop\n\t\t\t * @param {Object} target The object that dispatched the event.\n\t\t\t * @param {String} type The event type.\n\t\t\t * @since 0.4.0\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * The event that is fired when playback completes. This means that the sound has finished playing in its\n\t\t\t * entirety, including its loop iterations.\n\t\t\t * @event complete\n\t\t\t * @param {Object} target The object that dispatched the event.\n\t\t\t * @param {String} type The event type.\n\t\t\t * @since 0.4.0\n\t\t\t */\n\t\t};\n\n\t\tvar p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// Public Methods:\n\t\t/**\n\t\t * Play an instance. This method is intended to be called on SoundInstances that already exist (created\n\t\t * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var myInstance = createjs.Sound.createInstance(mySrc);\n\t\t *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\n\t\t *\n\t\t * Note that if this sound is already playing, this call will still set the passed in parameters.\n\n\t\t * <b>Parameters Deprecated</b><br />\n\t\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n\t\t *\n\t\t * @method play\n\t\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n\t\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n\t\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n\t\t * <br /><strong>OR</strong><br />\n\t\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n\t\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n\t\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t * loops), and -1 can be used for infinite playback.\n\t\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t * against the individual volume.\n\t\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t\t * Note that pan is not supported for HTML Audio.\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t */\n\t\tp.play = function (interrupt, delay, offset, loop, volume, pan) {\n\t\t\tvar playProps;\n\t\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n\t\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\n\t\t\t} else {\n\t\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan});\n\t\t\t}\n\n\t\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis.applyPlayProps(playProps);\n\t\t\t\tif (this._paused) {\tthis.setPaused(false); }\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._cleanUp();\n\t\t\tcreatejs.Sound._playInstance(this, playProps);\t// make this an event dispatch??\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\n\t\t * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n\t     *\n\t     * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     myInstance.stop();\n\t\t *\n\t\t * @method stop\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t */\n\t\tp.stop = function () {\n\t\t\tthis._position = 0;\n\t\t\tthis._paused = false;\n\t\t\tthis._handleStop();\n\t\t\tthis._cleanUp();\n\t\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\n\t\t * @method destroy\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.destroy = function() {\n\t\t\tthis._cleanUp();\n\t\t\tthis.src = null;\n\t\t\tthis.playbackResource = null;\n\n\t\t\tthis.removeAllEventListeners();\n\t\t};\n\n\t\t/**\n\t\t * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\n\t\t * @method applyPlayProps\n\t\t * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\n\t\t * @since 0.6.1\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t */\n\t\tp.applyPlayProps = function(playProps) {\n\t\t\tif (playProps.offset != null) { this.setPosition(playProps.offset); }\n\t\t\tif (playProps.loop != null) { this.setLoop(playProps.loop); }\n\t\t\tif (playProps.volume != null) { this.setVolume(playProps.volume); }\n\t\t\tif (playProps.pan != null) { this.setPan(playProps.pan); }\n\t\t\tif (playProps.startTime != null) {\n\t\t\t\tthis.setStartTime(playProps.startTime);\n\t\t\t\tthis.setDuration(playProps.duration);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[AbstractSoundInstance]\";\n\t\t};\n\n\t// get/set methods that allow support for IE8\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property,\n\t\t *\n\t\t * @deprecated\n\t\t * @method getPaused\n\t\t * @returns {boolean} If the instance is currently paused\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getPaused = function() {\n\t\t\treturn this._paused;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setPaused\n\t\t * @param {boolean} value\n\t\t * @since 0.6.0\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t */\n\t\tp.setPaused = function (value) {\n\t\t\tif ((value !== true && value !== false) || this._paused == value) {return;}\n\t\t\tif (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {return;}\n\t\t\tthis._paused = value;\n\t\t\tif(value) {\n\t\t\t\tthis._pause();\n\t\t\t} else {\n\t\t\t\tthis._resume();\n\t\t\t}\n\t\t\tclearTimeout(this.delayTimeoutId);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setVolume\n\t\t * @param {Number} value The volume to set, between 0 and 1.\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t */\n\t\tp.setVolume = function (value) {\n\t\t\tif (value == this._volume) { return this; }\n\t\t\tthis._volume = Math.max(0, Math.min(1, value));\n\t\t\tif (!this._muted) {\n\t\t\t\tthis._updateVolume();\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getVolume\n\t\t * @return {Number} The current volume of the sound instance.\n\t\t */\n\t\tp.getVolume = function () {\n\t\t\treturn this._volume;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setMuted\n\t\t * @param {Boolean} value If the sound should be muted.\n\t\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.setMuted = function (value) {\n\t\t\tif (value !== true && value !== false) {return;}\n\t\t\tthis._muted = value;\n\t\t\tthis._updateVolume();\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getMuted\n\t\t * @return {Boolean} If the sound is muted.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.getMuted = function () {\n\t\t\treturn this._muted;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setPan\n\t\t * @param {Number} value The pan value, between -1 (left) and 1 (right).\n\t\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t\t */\n\t\tp.setPan = function (value) {\n\t\t\tif(value == this._pan) { return this; }\n\t\t\tthis._pan = Math.max(-1, Math.min(1, value));\n\t\t\tthis._updatePan();\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getPan\n\t\t * @return {Number} The value of the pan, between -1 (left) and 1 (right).\n\t\t */\n\t\tp.getPan = function () {\n\t\t\treturn this._pan;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getPosition\n\t\t * @return {Number} The position of the playhead in the sound, in milliseconds.\n\t\t */\n\t\tp.getPosition = function () {\n\t\t\tif (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis._position = this._calculateCurrentPosition();\n\t\t\t}\n\t\t\treturn this._position;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setPosition\n\t\t * @param {Number} value The position to place the playhead, in milliseconds.\n\t\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t\t */\n\t\tp.setPosition = function (value) {\n\t\t\tthis._position = Math.max(0, value);\n\t\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis._updatePosition();\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getStartTime\n\t\t * @return {Number} The startTime of the sound instance in milliseconds.\n\t\t */\n\t\tp.getStartTime = function () {\n\t\t\treturn this._startTime;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setStartTime\n\t\t * @param {number} value The new startTime time in milli seconds.\n\t\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t\t */\n\t\tp.setStartTime = function (value) {\n\t\t\tif (value == this._startTime) { return this; }\n\t\t\tthis._startTime = Math.max(0, value || 0);\n\t\t\tthis._updateStartTime();\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getDuration\n\t\t * @return {Number} The duration of the sound instance in milliseconds.\n\t\t */\n\t\tp.getDuration = function () {\n\t\t\treturn this._duration;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setDuration\n\t\t * @param {number} value The new duration time in milli seconds.\n\t\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.setDuration = function (value) {\n\t\t\tif (value == this._duration) { return this; }\n\t\t\tthis._duration = Math.max(0, value || 0);\n\t\t\tthis._updateDuration();\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setPlayback\n\t\t * @param {Object} value The new playback resource.\n\t\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t\t * @since 0.6.0\n\t\t **/\n\t\tp.setPlaybackResource = function (value) {\n\t\t\tthis._playbackResource = value;\n\t\t\tif (this._duration == 0) { this._setDurationFromSource(); }\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method setPlayback\n\t\t * @param {Object} value The new playback resource.\n\t\t * @return {Object} playback resource used for playing audio\n\t\t * @since 0.6.0\n\t\t **/\n\t\tp.getPlaybackResource = function () {\n\t\t\treturn this._playbackResource;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n\t\t *\n\t\t * @deprecated\n\t\t * @method getLoop\n\t\t * @return {number}\n\t\t * @since 0.6.0\n\t\t **/\n\t\tp.getLoop = function () {\n\t\t\treturn this._loop;\n\t\t};\n\n\t\t/**\n\t\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property,\n\t\t *\n\t\t * @deprecated\n\t\t * @method setLoop\n\t\t * @param {number} value The number of times to loop after play.\n\t\t * @since 0.6.0\n\t\t */\n\t\tp.setLoop = function (value) {\n\t\t\tif(this._playbackResource != null) {\n\t\t\t\t// remove looping\n\t\t\t\tif (this._loop != 0 && value == 0) {\n\t\t\t\t\tthis._removeLooping(value);\n\t\t\t\t}\n\t\t\t\t// add looping\n\t\t\t\telse if (this._loop == 0 && value != 0) {\n\t\t\t\t\tthis._addLooping(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._loop = value;\n\t\t};\n\n\n\t// Private Methods:\n\t\t/**\n\t\t * A helper method that dispatches all events for AbstractSoundInstance.\n\t\t * @method _sendEvent\n\t\t * @param {String} type The event type\n\t\t * @protected\n\t\t */\n\t\tp._sendEvent = function (type) {\n\t\t\tvar event = new createjs.Event(type);\n\t\t\tthis.dispatchEvent(event);\n\t\t};\n\n\t\t/**\n\t\t * Clean up the instance. Remove references and clean up any additional properties such as timers.\n\t\t * @method _cleanUp\n\t\t * @protected\n\t\t */\n\t\tp._cleanUp = function () {\n\t\t\tclearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\n\t\t\tthis._handleCleanUp();\n\t\t\tthis._paused = false;\n\n\t\t\tcreatejs.Sound._playFinished(this);\t// TODO change to an event\n\t\t};\n\n\t\t/**\n\t\t * The sound has been interrupted.\n\t\t * @method _interrupt\n\t\t * @protected\n\t\t */\n\t\tp._interrupt = function () {\n\t\t\tthis._cleanUp();\n\t\t\tthis.playState = createjs.Sound.PLAY_INTERRUPTED;\n\t\t\tthis._sendEvent(\"interrupted\");\n\t\t};\n\n\t\t/**\n\t\t * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\n\t\t * src is loaded, otherwise playback will fail.\n\t\t * @method _beginPlaying\n\t\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t\t * @return {Boolean} If playback succeeded.\n\t\t * @protected\n\t\t */\n\t\t// OJR FlashAudioSoundInstance overwrites\n\t\tp._beginPlaying = function (playProps) {\n\t\t\tthis.setPosition(playProps.offset);\n\t\t\tthis.setLoop(playProps.loop);\n\t\t\tthis.setVolume(playProps.volume);\n\t\t\tthis.setPan(playProps.pan);\n\t\t\tif (playProps.startTime != null) {\n\t\t\t\tthis.setStartTime(playProps.startTime);\n\t\t\t\tthis.setDuration(playProps.duration);\n\t\t\t}\n\n\t\t\tif (this._playbackResource != null && this._position < this._duration) {\n\t\t\t\tthis._paused = false;\n\t\t\t\tthis._handleSoundReady();\n\t\t\t\tthis.playState = createjs.Sound.PLAY_SUCCEEDED;\n\t\t\t\tthis._sendEvent(\"succeeded\");\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tthis._playFailed();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Play has failed, which can happen for a variety of reasons.\n\t\t * Cleans up instance and dispatches failed event\n\t\t * @method _playFailed\n\t\t * @private\n\t\t */\n\t\tp._playFailed = function () {\n\t\t\tthis._cleanUp();\n\t\t\tthis.playState = createjs.Sound.PLAY_FAILED;\n\t\t\tthis._sendEvent(\"failed\");\n\t\t};\n\n\t\t/**\n\t\t * Audio has finished playing. Manually loop it if required.\n\t\t * @method _handleSoundComplete\n\t\t * @param event\n\t\t * @protected\n\t\t */\n\t\tp._handleSoundComplete = function (event) {\n\t\t\tthis._position = 0;  // have to set this as it can be set by pause during playback\n\n\t\t\tif (this._loop != 0) {\n\t\t\t\tthis._loop--;  // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\n\t\t\t\tthis._handleLoop();\n\t\t\t\tthis._sendEvent(\"loop\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._cleanUp();\n\t\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\t\tthis._sendEvent(\"complete\");\n\t\t};\n\n\t// Plugin specific code\n\t\t/**\n\t\t * Handles starting playback when the sound is ready for playing.\n\t\t * @method _handleSoundReady\n\t\t * @protected\n\t \t */\n\t\tp._handleSoundReady = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\n\t\t * and master mute value.\n\t\t * @method _updateVolume\n\t\t * @protected\n\t\t */\n\t\tp._updateVolume = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to update the pan\n\t\t * @method _updatePan\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._updatePan = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to update the startTime of the audio.\n\t\t * @method _updateStartTime\n\t\t * @protected\n\t\t * @since 0.6.1\n\t\t */\n\t\tp._updateStartTime = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to update the duration of the audio.\n\t\t * @method _updateDuration\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._updateDuration = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to get the duration of the audio from the source we'll be playing.\n\t\t * @method _updateDuration\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._setDurationFromSource = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function that calculates the current position of the playhead and sets this._position to that value\n\t\t * @method _calculateCurrentPosition\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._calculateCurrentPosition = function () {\n\t\t\t// plugin specific code that sets this.position\n\t\t};\n\n\t\t/**\n\t\t * Internal function used to update the position of the playhead.\n\t\t * @method _updatePosition\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._updatePosition = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when looping is removed during playback.\n\t\t * @method _removeLooping\n\t\t * @param {number} value The number of times to loop after play.\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._removeLooping = function (value) {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when looping is added during playback.\n\t\t * @method _addLooping\n\t\t * @param {number} value The number of times to loop after play.\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._addLooping = function (value) {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when pausing playback\n\t\t * @method _pause\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._pause = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when resuming playback\n\t\t * @method _resume\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._resume = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when stopping playback\n\t\t * @method _handleStop\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._handleStop = function() {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when AbstractSoundInstance is being cleaned up\n\t\t * @method _handleCleanUp\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._handleCleanUp = function() {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\t/**\n\t\t * Internal function called when AbstractSoundInstance has played to end and is looping\n\t\t * @method _handleLoop\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._handleLoop = function () {\n\t\t\t// plugin specific code\n\t\t};\n\n\t\tcreatejs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\n\t\tcreatejs.DefaultSoundInstance = createjs.AbstractSoundInstance;\t// used when no plugin is supported\n\t}());\n\n\t//##############################################################################\n\t// AbstractPlugin.js\n\t//##############################################################################\n\n\t(function () {\n\n\n\t// constructor:\n\t \t/**\n\t\t * A default plugin class used as a base for all other plugins.\n\t\t * @class AbstractPlugin\n\t\t * @constructor\n\t\t * @since 0.6.0\n\t\t */\n\n\t\tvar AbstractPlugin = function () {\n\t\t// private properties:\n\t\t\t/**\n\t\t\t * The capabilities of the plugin.\n\t\t\t * method and is used internally.\n\t\t\t * @property _capabilities\n\t\t\t * @type {Object}\n\t\t\t * @default null\n\t\t\t * @protected\n\t\t\t * @static\n\t\t\t */\n\t\t\tthis._capabilities = null;\n\n\t\t\t/**\n\t\t\t * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._loaders = {};\n\n\t\t\t/**\n\t\t\t * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\n\t\t\t * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\n\t\t\t * is complete (for example arrayBuffers for web audio).\n\t\t\t * @property _audioSources\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._audioSources = {};\n\n\t\t\t/**\n\t\t\t * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\n\t\t\t * and properly destroy them if sources are removed\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._soundInstances = {};\n\n\t\t\t/**\n\t\t\t * The internal master volume value of the plugin.\n\t\t\t * @property _volume\n\t\t\t * @type {Number}\n\t\t\t * @default 1\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._volume = 1;\n\n\t\t\t/**\n\t\t\t * A reference to a loader class used by a plugin that must be set.\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._loaderClass;\n\n\t\t\t/**\n\t\t\t * A reference to an AbstractSoundInstance class used by a plugin that must be set.\n\t\t\t * @type {Object}\n\t\t\t * @protected;\n\t\t\t */\n\t\t\tthis._soundInstanceClass;\n\t\t};\n\t\tvar p = AbstractPlugin.prototype;\n\n\t\t/**\n\t\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t\t * for details.\n\t\t *\n\t\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t\t *\n\t\t * @method initialize\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t// Static Properties:\n\t// NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\n\t\t/**\n\t\t * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\n\t\t * @property _capabilities\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\tAbstractPlugin._capabilities = null;\n\n\t\t/**\n\t\t * Determine if the plugin can be used in the current browser/OS.\n\t\t * @method isSupported\n\t\t * @return {Boolean} If the plugin can be initialized.\n\t\t * @static\n\t\t */\n\t\tAbstractPlugin.isSupported = function () {\n\t\t\treturn true;\n\t\t};\n\n\n\t// public methods:\n\t\t/**\n\t\t * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\n\t\t * can use to assist with preloading.\n\t\t * @method register\n\t\t * @param {String} loadItem An Object containing the source of the audio\n\t\t * Note that not every plugin will manage this value.\n\t\t * @return {Object} A result object, containing a \"tag\" for preloading purposes.\n\t\t */\n\t\tp.register = function (loadItem) {\n\t\t\tvar loader = this._loaders[loadItem.src];\n\t\t\tif(loader && !loader.canceled) {return this._loaders[loadItem.src];}\t// already loading/loaded this, so don't load twice\n\t\t\t// OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\n\t\t\tthis._audioSources[loadItem.src] = true;\n\t\t\tthis._soundInstances[loadItem.src] = [];\n\t\t\tloader = new this._loaderClass(loadItem);\n\t\t\tloader.on(\"complete\", this._handlePreloadComplete, this);\n\t\t\tthis._loaders[loadItem.src] = loader;\n\t\t\treturn loader;\n\t\t};\n\n\t\t// note sound calls register before calling preload\n\t\t/**\n\t\t * Internally preload a sound.\n\t\t * @method preload\n\t\t * @param {Loader} loader The sound URI to load.\n\t\t */\n\t\tp.preload = function (loader) {\n\t\t\tloader.on(\"error\", this._handlePreloadError, this);\n\t\t\tloader.load();\n\t\t};\n\n\t\t/**\n\t\t * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\n\t\t * or has already finished loading.\n\t\t * @method isPreloadStarted\n\t\t * @param {String} src The sound URI to check.\n\t\t * @return {Boolean}\n\t\t */\n\t\tp.isPreloadStarted = function (src) {\n\t\t\treturn (this._audioSources[src] != null);\n\t\t};\n\n\t\t/**\n\t\t * Checks if preloading has finished for a specific source.\n\t\t * @method isPreloadComplete\n\t\t * @param {String} src The sound URI to load.\n\t\t * @return {Boolean}\n\t\t */\n\t\tp.isPreloadComplete = function (src) {\n\t\t\treturn (!(this._audioSources[src] == null || this._audioSources[src] == true));\n\t\t};\n\n\t\t/**\n\t\t * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t\t * @method removeSound\n\t\t * @param {String} src The sound URI to unload.\n\t\t */\n\t\tp.removeSound = function (src) {\n\t\t\tif (!this._soundInstances[src]) { return; }\n\t\t\tfor (var i = this._soundInstances[src].length; i--; ) {\n\t\t\t\tvar item = this._soundInstances[src][i];\n\t\t\t\titem.destroy();\n\t\t\t}\n\t\t\tdelete(this._soundInstances[src]);\n\t\t\tdelete(this._audioSources[src]);\n\t\t\tif(this._loaders[src]) { this._loaders[src].destroy(); }\n\t\t\tdelete(this._loaders[src]);\n\t\t};\n\n\t\t/**\n\t\t * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t\t * @method removeAllSounds\n\t\t * @param {String} src The sound URI to unload.\n\t\t */\n\t\tp.removeAllSounds = function () {\n\t\t\tfor(var key in this._audioSources) {\n\t\t\t\tthis.removeSound(key);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\n\t\t * @method create\n\t\t * @param {String} src The sound source to use.\n\t\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t\t * @return {AbstractSoundInstance} A sound instance for playback and control.\n\t\t */\n\t\tp.create = function (src, startTime, duration) {\n\t\t\tif (!this.isPreloadStarted(src)) {\n\t\t\t\tthis.preload(this.register(src));\n\t\t\t}\n\t\t\tvar si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\n\t\t\tthis._soundInstances[src].push(si);\n\t\t\treturn si;\n\t\t};\n\n\t\t// if a plugin does not support volume and mute, it should set these to null\n\t\t/**\n\t\t * Set the master volume of the plugin, which affects all SoundInstances.\n\t\t * @method setVolume\n\t\t * @param {Number} value The volume to set, between 0 and 1.\n\t\t * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\n\t\t * instances manually otherwise.\n\t\t */\n\t\tp.setVolume = function (value) {\n\t\t\tthis._volume = value;\n\t\t\tthis._updateVolume();\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Get the master volume of the plugin, which affects all SoundInstances.\n\t\t * @method getVolume\n\t\t * @return {Number} The volume level, between 0 and 1.\n\t\t */\n\t\tp.getVolume = function () {\n\t\t\treturn this._volume;\n\t\t};\n\n\t\t/**\n\t\t * Mute all sounds via the plugin.\n\t\t * @method setMute\n\t\t * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\n\t\t * the mute value of Sound {{#crossLink \"Sound/getMute\"}}{{/crossLink}}, so this property is not used here.\n\t\t * @return {Boolean} If the mute call succeeds.\n\t\t */\n\t\tp.setMute = function (value) {\n\t\t\tthis._updateVolume();\n\t\t\treturn true;\n\t\t};\n\n\t\t// plugins should overwrite this method\n\t\tp.toString = function () {\n\t\t\treturn \"[AbstractPlugin]\";\n\t\t};\n\n\n\t// private methods:\n\t\t/**\n\t\t * Handles internal preload completion.\n\t\t * @method _handlePreloadComplete\n\t\t * @protected\n\t\t */\n\t\tp._handlePreloadComplete = function (event) {\n\t\t\tvar src = event.target.getItem().src;\n\t\t\tthis._audioSources[src] = event.result;\n\t\t\tfor (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\n\t\t\t\tvar item = this._soundInstances[src][i];\n\t\t\t\titem.setPlaybackResource(this._audioSources[src]);\n\t\t\t\t// ToDo consider adding play call here if playstate == playfailed\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Handles internal preload erros\n\t\t * @method _handlePreloadError\n\t\t * @param event\n\t\t * @protected\n\t\t */\n\t\tp._handlePreloadError = function(event) {\n\t\t\t//delete(this._audioSources[src]);\n\t\t};\n\n\t\t/**\n\t\t * Set the gain value for master audio. Should not be called externally.\n\t\t * @method _updateVolume\n\t\t * @protected\n\t\t */\n\t\tp._updateVolume = function () {\n\t\t\t// Plugin Specific code\n\t\t};\n\n\t\tcreatejs.AbstractPlugin = AbstractPlugin;\n\t}());\n\n\t//##############################################################################\n\t// WebAudioLoader.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\n\t\t * the preloader, and the load method is called when the asset needs to be requested.\n\t\t *\n\t\t * @class WebAudioLoader\n\t\t * @param {String} loadItem The item to be loaded\n\t\t * @extends XHRRequest\n\t\t * @protected\n\t\t */\n\t\tfunction Loader(loadItem) {\n\t\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.SOUND);\n\n\t\t}\t\tvar p = createjs.extend(Loader, createjs.AbstractLoader);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t\t/**\n\t\t * web audio context required for decoding audio\n\t\t * @property context\n\t\t * @type {AudioContext}\n\t\t * @static\n\t\t */\n\t\tLoader.context = null;\n\n\n\t// public methods\n\t\tp.toString = function () {\n\t\t\treturn \"[WebAudioLoader]\";\n\t\t};\n\n\n\t// private methods\n\t\tp._createRequest = function() {\n\t\t\tthis._request = new createjs.XHRRequest(this._item, false);\n\t\t\tthis._request.setResponseType(\"arraybuffer\");\n\t\t};\n\n\t\tp._sendComplete = function (event) {\n\t\t\t// OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\n\t\t\tLoader.context.decodeAudioData(this._rawResult,\n\t\t         createjs.proxy(this._handleAudioDecoded, this),\n\t\t         createjs.proxy(this._sendError, this));\n\t\t};\n\n\n\t\t/**\n\t\t* The audio has been decoded.\n\t\t* @method handleAudioDecoded\n\t\t* @param decoded\n\t\t* @protected\n\t\t*/\n\t\tp._handleAudioDecoded = function (decodedAudio) {\n\t\t\tthis._result = decodedAudio;\n\t\t\tthis.AbstractLoader__sendComplete();\n\t\t};\n\n\t\tcreatejs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\n\t}());\n\n\t//##############################################################################\n\t// WebAudioSoundInstance.js\n\t//##############################################################################\n\n\t/**\n\t * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n\t * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * WebAudioSoundInstance exposes audioNodes for advanced users.\n\t *\n\t * @param {String} src The path to and file name of the sound.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n\t * @class WebAudioSoundInstance\n\t * @extends AbstractSoundInstance\n\t * @constructor\n\t */\n\t(function () {\n\n\t\tfunction WebAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n\t// public properties\n\t\t\t/**\n\t\t\t * NOTE this is only intended for use by advanced users.\n\t\t\t * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\n\t\t\t * @property gainNode\n\t\t\t * @type {AudioGainNode}\n\t\t\t * @since 0.4.0\n\t\t\t *\n\t\t\t */\n\t\t\tthis.gainNode = s.context.createGain();\n\n\t\t\t/**\n\t\t\t * NOTE this is only intended for use by advanced users.\n\t\t\t * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t\t * @property panNode\n\t\t\t * @type {AudioPannerNode}\n\t\t\t * @since 0.4.0\n\t\t\t */\n\t\t\tthis.panNode = s.context.createPanner();\n\t\t\tthis.panNode.panningModel = s._panningModel;\n\t\t\tthis.panNode.connect(this.gainNode);\n\t\t\tthis._updatePan();\n\n\t\t\t/**\n\t\t\t * NOTE this is only intended for use by advanced users.\n\t\t\t * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\n\t\t\t * @property sourceNode\n\t\t\t * @type {AudioNode}\n\t\t\t * @since 0.4.0\n\t\t\t *\n\t\t\t */\n\t\t\tthis.sourceNode = null;\n\n\n\t// private properties\n\t\t\t/**\n\t\t\t * Timeout that is created internally to handle sound playing to completion.\n\t\t\t * Stored so we can remove it when stop, pause, or cleanup are called\n\t\t\t * @property _soundCompleteTimeout\n\t\t\t * @type {timeoutVariable}\n\t\t\t * @default null\n\t\t\t * @protected\n\t\t\t * @since 0.4.0\n\t\t\t */\n\t\t\tthis._soundCompleteTimeout = null;\n\n\t\t\t/**\n\t\t\t * NOTE this is only intended for use by very advanced users.\n\t\t\t * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\n\t\t\t * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t\t * @property _sourceNodeNext\n\t\t\t * @type {AudioNode}\n\t\t\t * @default null\n\t\t\t * @protected\n\t\t\t * @since 0.4.1\n\t\t\t *\n\t\t\t */\n\t\t\tthis._sourceNodeNext = null;\n\n\t\t\t/**\n\t\t\t * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\n\t\t\t * @property _playbackStartTime\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @protected\n\t\t\t * @since 0.4.0\n\t\t\t */\n\t\t\tthis._playbackStartTime = 0;\n\n\t\t\t// Proxies, make removing listeners easier.\n\t\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t\t}\t\tvar p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\n\t\tvar s = WebAudioSoundInstance;\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t\t/**\n\t\t * Note this is only intended for use by advanced users.\n\t\t * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n\t  \t * @property context\n\t\t * @type {AudioContext}\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.context = null;\n\n\t\t/**\n\t\t * Note this is only intended for use by advanced users.\n\t\t * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \n\t\t * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n\t  \t * @property _scratchBuffer\n\t\t * @type {AudioBufferSourceNode}\n\t\t * @static\n\t\t */\n\t\ts._scratchBuffer = null;\n\n\t\t/**\n\t\t * Note this is only intended for use by advanced users.\n\t\t * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\n\t\t * @property destinationNode\n\t\t * @type {AudioNode}\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts.destinationNode = null;\n\n\t\t/**\n\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t\t * @property _panningModel\n\t\t * @type {Number / String}\n\t\t * @protected\n\t\t * @static\n\t\t * @since 0.6.0\n\t\t */\n\t\ts._panningModel = \"equalpower\";\n\n\n\t// Public methods\n\t\tp.destroy = function() {\n\t\t\tthis.AbstractSoundInstance_destroy();\n\n\t\t\tthis.panNode.disconnect(0);\n\t\t\tthis.panNode = null;\n\t\t\tthis.gainNode.disconnect(0);\n\t\t\tthis.gainNode = null;\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[WebAudioSoundInstance]\";\n\t\t};\n\n\n\t// Private Methods\n\t\tp._updatePan = function() {\n\t\t\tthis.panNode.setPosition(this._pan, 0, -0.5);\n\t\t\t// z need to be -0.5 otherwise the sound only plays in left, right, or center\n\t\t};\n\n\t\tp._removeLooping = function(value) {\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\t};\n\n\t\tp._addLooping = function(value) {\n\t\t\tif (this.playState != createjs.Sound.PLAY_SUCCEEDED) { return; }\n\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\t};\n\n\t\tp._setDurationFromSource = function () {\n\t\t\tthis._duration = this.playbackResource.duration * 1000;\n\t\t};\n\n\t\tp._handleCleanUp = function () {\n\t\t\tif (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\t\t}\n\n\t\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\t\t\t// OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\n\n\t\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\t\tthis._playbackStartTime = 0;\t// This is used by getPosition\n\t\t};\n\n\t\t/**\n\t\t * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\n\t\t * @method _cleanUpAudioNode\n\t\t * @param audioNode\n\t\t * @return {audioNode}\n\t\t * @protected\n\t\t * @since 0.4.1\n\t\t */\n\t\tp._cleanUpAudioNode = function(audioNode) {\n\t\t\tif(audioNode) {\n\t\t\t\taudioNode.stop(0);\n\t\t\t\taudioNode.disconnect(0);\n\t\t\t\t// necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\n\t\t\t\t// browser implementations.\n\t\t\t\ttry { audioNode.buffer = s._scratchBuffer; } catch(e) {}\n\t\t\t\taudioNode = null;\n\t\t\t}\n\t\t\treturn audioNode;\n\t\t};\n\n\t\tp._handleSoundReady = function (event) {\n\t\t\tthis.gainNode.connect(s.destinationNode);  // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\n\n\t\t\tvar dur = this._duration * 0.001;\n\t\t\tvar pos = this._position * 0.001;\n\t\t\tif (pos > dur) {pos = dur;}\n\t\t\tthis.sourceNode = this._createAndPlayAudioNode((s.context.currentTime - dur), pos);\n\t\t\tthis._playbackStartTime = this.sourceNode.startTime - pos;\n\n\t\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\n\n\t\t\tif(this._loop != 0) {\n\t\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\n\t\t * @method _createAndPlayAudioNode\n\t\t * @param {Number} startTime The time to add this to the web audio context, in seconds.\n\t\t * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\n\t\t * @return {audioNode}\n\t\t * @protected\n\t\t * @since 0.4.1\n\t\t */\n\t\tp._createAndPlayAudioNode = function(startTime, offset) {\n\t\t\tvar audioNode = s.context.createBufferSource();\n\t\t\taudioNode.buffer = this.playbackResource;\n\t\t\taudioNode.connect(this.panNode);\n\t\t\tvar dur = this._duration * 0.001;\n\t\t\taudioNode.startTime = startTime + dur;\n\t\t\taudioNode.start(audioNode.startTime, offset+(this._startTime*0.001), dur - offset);\n\t\t\treturn audioNode;\n\t\t};\n\n\t\tp._pause = function () {\n\t\t\tthis._position = (s.context.currentTime - this._playbackStartTime) * 1000;  // * 1000 to give milliseconds, lets us restart at same point\n\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\n\t\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\n\t\t\tclearTimeout(this._soundCompleteTimeout);\n\t\t};\n\n\t\tp._resume = function () {\n\t\t\tthis._handleSoundReady();\n\t\t};\n\n\t\t/*\n\t\tp._handleStop = function () {\n\t\t\t// web audio does not need to do anything extra\n\t\t};\n\t\t*/\n\n\t\tp._updateVolume = function () {\n\t\t\tvar newVolume = this._muted ? 0 : this._volume;\n\t\t  \tif (newVolume != this.gainNode.gain.value) {\n\t\t\t  this.gainNode.gain.value = newVolume;\n\t  \t\t}\n\t\t};\n\n\t\tp._calculateCurrentPosition = function () {\n\t\t\treturn ((s.context.currentTime - this._playbackStartTime) * 1000); // pos in seconds * 1000 to give milliseconds\n\t\t};\n\n\t\tp._updatePosition = function () {\n\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\t\tif (!this._paused) {this._handleSoundReady();}\n\t\t};\n\n\t\t// OJR we are using a look ahead approach to ensure smooth looping.\n\t\t// We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\n\t\t// This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\n\t\t// NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\n\t\tp._handleLoop = function () {\n\t\t\tthis._cleanUpAudioNode(this.sourceNode);\n\t\t\tthis.sourceNode = this._sourceNodeNext;\n\t\t\tthis._playbackStartTime = this.sourceNode.startTime;\n\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\n\t\t};\n\n\t\tp._updateDuration = function () {\n\t\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis._pause();\n\t\t\t\tthis._resume();\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\n\t}());\n\n\t//##############################################################################\n\t// WebAudioPlugin.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\n\t\t * anywhere that it is supported. To change plugin priority, check out the Sound API\n\t\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\n\n\t\t * <h4>Known Browser and OS issues for Web Audio</h4>\n\t\t * <b>Firefox 25</b>\n\t\t * <li>\n\t\t *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\n\t\t *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\n\t\t *     extension, until this bug is resolved\n\t\t * </li>\n\t\t *\n\t\t * <b>Webkit (Chrome and Safari)</b>\n\t\t * <li>\n\t\t *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\n\t\t * \t   are playing a lot of audio files.\n\t\t * </li>\n\t\t *\n\t\t * <b>iOS 6 limitations</b>\n\t\t * <ul>\n\t\t *     <li>\n\t\t *         Sound is initially muted and will only unmute through play being called inside a user initiated event\n\t\t *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\n\t\t *         class for a full overview of the limitations, and how to get around them.\n\t\t *     </li>\n\t\t *\t   <li>\n\t\t *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\n\t\t *\t       this bug by ensuring the audio and video audio share the same sample rate.\n\t\t *\t   </li>\n\t\t * </ul>\n\t\t * @class WebAudioPlugin\n\t\t * @extends AbstractPlugin\n\t\t * @constructor\n\t\t * @since 0.4.0\n\t\t */\n\t\tfunction WebAudioPlugin() {\n\t\t\tthis.AbstractPlugin_constructor();\n\n\n\t// Private Properties\n\t\t\t/**\n\t\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t\t\t * @property _panningModel\n\t\t\t * @type {Number / String}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._panningModel = s._panningModel;\n\t\t\t/**\n\t\t\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t\t\t * need to be created within this context.\n\t\t\t * @property context\n\t\t\t * @type {AudioContext}\n\t\t\t */\n\t\t\tthis.context = s.context;\n\n\t\t\t/**\n\t\t\t * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\n\t\t\t * It is connected to <code>context.destination</code>.\n\t\t\t *\n\t\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\n\t\t\t * @property dynamicsCompressorNode\n\t\t\t * @type {AudioNode}\n\t\t\t */\n\t\t\tthis.dynamicsCompressorNode = this.context.createDynamicsCompressor();\n\t\t\tthis.dynamicsCompressorNode.connect(this.context.destination);\n\n\t\t\t/**\n\t\t\t * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\n\t\t\t *\n\t\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\n\t\t\t * @property gainNode\n\t\t\t * @type {AudioGainNode}\n\t\t\t */\n\t\t\tthis.gainNode = this.context.createGain();\n\t\t\tthis.gainNode.connect(this.dynamicsCompressorNode);\n\t\t\tcreatejs.WebAudioSoundInstance.destinationNode = this.gainNode;\n\n\t\t\tthis._capabilities = s._capabilities;\n\n\t\t\tthis._loaderClass = createjs.WebAudioLoader;\n\t\t\tthis._soundInstanceClass = createjs.WebAudioSoundInstance;\n\n\t\t\tthis._addPropsToClasses();\n\t\t}\n\t\tvar p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// Static Properties\n\t\tvar s = WebAudioPlugin;\n\t\t/**\n\t\t * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\n\t\t * method and is used internally.\n\t\t * @property _capabilities\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._capabilities = null;\n\n\t\t/**\n\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t\t * @property _panningModel\n\t\t * @type {Number / String}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._panningModel = \"equalpower\";\n\n\t\t/**\n\t\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t\t * need to be created within this context.\n\t\t *\n\t\t * Advanced users can set this to an existing context, but <b>must</b> do so before they call\n\t\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t\t *\n\t\t * @property context\n\t\t * @type {AudioContext}\n\t\t * @static\n\t\t */\n\t\ts.context = null;\n\n\t\t/**\n\t\t * The scratch buffer that will be assigned to the buffer property of a source node on close.\n\t\t * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\n\t\t *\n\t\t * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\n\t\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t\t *\n\t\t * @property _scratchBuffer\n\t\t * @type {AudioBuffer}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\t s._scratchBuffer = null;\n\n\t\t/**\n\t\t * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n\t\t * empty sound.\n\t\t * @property _unlocked\n\t\t * @type {boolean}\n\t\t * @since 0.6.2\n\t\t * @private\n\t\t */\n\t\ts._unlocked = false;\n\n\n\t// Static Public Methods\n\t\t/**\n\t\t * Determine if the plugin can be used in the current browser/OS.\n\t\t * @method isSupported\n\t\t * @return {Boolean} If the plugin can be initialized.\n\t\t * @static\n\t\t */\n\t\ts.isSupported = function () {\n\t\t\t// check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\n\t\t\tvar isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\n\t\t\t// OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\n\t\t\tif (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) { return false; }  // Web Audio requires XHR, which is not usually available locally\n\t\t\ts._generateCapabilities();\n\t\t\tif (s.context == null) {return false;}\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n\t\t * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\n\t\t * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\n\t\t * for example).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     function handleTouch(event) {\n\t\t *         createjs.WebAudioPlugin.playEmptySound();\n\t\t *     }\n\t\t *\n\t\t * @method playEmptySound\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t */\n\t\ts.playEmptySound = function() {\n\t\t\tif (s.context == null) {return;}\n\t\t\tvar source = s.context.createBufferSource();\n\t\t\tsource.buffer = s._scratchBuffer;\n\t\t\tsource.connect(s.context.destination);\n\t\t\tsource.start(0, 0, 0);\n\t\t};\n\n\n\t// Static Private Methods\n\t\t/**\n\t\t * Determine if XHR is supported, which is necessary for web audio.\n\t\t * @method _isFileXHRSupported\n\t\t * @return {Boolean} If XHR is supported.\n\t\t * @since 0.4.2\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._isFileXHRSupported = function() {\n\t\t\t// it's much easier to detect when something goes wrong, so let's start optimistically\n\t\t\tvar supported = true;\n\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\ttry {\n\t\t\t\txhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\n\t\t\t} catch (error) {\n\t\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\t\tsupported = false;\n\t\t\t\treturn supported;\n\t\t\t}\n\t\t\txhr.onerror = function() { supported = false; }; // cause irrelevant\n\t\t\t// with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\n\t\t\txhr.onload = function() { supported = this.status == 404 || (this.status == 200 || (this.status == 0 && this.response != \"\")); };\n\t\t\ttry {\n\t\t\t\txhr.send();\n\t\t\t} catch (error$1) {\n\t\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\t\tsupported = false;\n\t\t\t}\n\n\t\t\treturn supported;\n\t\t};\n\n\t\t/**\n\t\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n\t\t * method for an overview of plugin capabilities.\n\t\t * @method _generateCapabilities\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._generateCapabilities = function () {\n\t\t\tif (s._capabilities != null) {return;}\n\t\t\t// Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\n\t\t\tvar t = document.createElement(\"audio\");\n\t\t\tif (t.canPlayType == null) {return null;}\n\n\t\t\tif (s.context == null) {\n\t\t\t\tif (window.AudioContext) {\n\t\t\t\t\ts.context = new AudioContext();\n\t\t\t\t} else if (window.webkitAudioContext) {\n\t\t\t\t\ts.context = new webkitAudioContext();\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s._scratchBuffer == null) {\n\t\t\t\ts._scratchBuffer = s.context.createBuffer(1, 1, 22050);\n\t\t\t}\n\n\t\t\ts._compatibilitySetUp();\n\n\t\t\t// Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\n\t\t\tif (\"ontouchstart\" in window && s.context.state != \"running\") {\n\t\t\t\ts._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n\t\t\t\tdocument.addEventListener(\"mousedown\", s._unlock, true);\n\t\t\t\tdocument.addEventListener(\"touchend\", s._unlock, true);\n\t\t\t}\n\n\n\t\t\ts._capabilities = {\n\t\t\t\tpanning:true,\n\t\t\t\tvolume:true,\n\t\t\t\ttracks:-1\n\t\t\t};\n\n\t\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\t\tvar ext = supportedExtensions[i];\n\t\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\n\t\t\t// 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\n\t\t\t// See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\n\t\t\tif (s.context.destination.numberOfChannels < 2) {\n\t\t\t\ts._capabilities.panning = false;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Set up compatibility if only deprecated web audio calls are supported.\n\t\t * See http://www.w3.org/TR/webaudio/#DeprecationNotes\n\t\t * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\n\t\t * don't support new calls.\n\t\t *\n\t\t * @method _compatibilitySetUp\n\t\t * @static\n\t\t * @protected\n\t\t * @since 0.4.2\n\t\t */\n\t\ts._compatibilitySetUp = function() {\n\t\t\ts._panningModel = \"equalpower\";\n\t\t\t//assume that if one new call is supported, they all are\n\t\t\tif (s.context.createGain) { return; }\n\n\t\t\t// simple name change, functionality the same\n\t\t\ts.context.createGain = s.context.createGainNode;\n\n\t\t\t// source node, add to prototype\n\t\t\tvar audioNode = s.context.createBufferSource();\n\t\t\taudioNode.__proto__.start = audioNode.__proto__.noteGrainOn;\t// note that noteGrainOn requires all 3 parameters\n\t\t\taudioNode.__proto__.stop = audioNode.__proto__.noteOff;\n\n\t\t\t// panningModel\n\t\t\ts._panningModel = 0;\n\t\t};\n\n\t\t/**\n\t\t * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n\t\t * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n\t\t * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n\t\t *\n\t\t * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n\t\t * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n\t\t * stick with `mousedown` and `touchend`.\n\t\t * @method _unlock\n\t\t * @since 0.6.2\n\t\t * @private\n\t\t */\n\t\ts._unlock = function() {\n\t\t\tif (s._unlocked) { return; }\n\t\t\ts.playEmptySound();\n\t\t\tif (s.context.state == \"running\") {\n\t\t\t\tdocument.removeEventListener(\"mousedown\", s._unlock, true);\n\t\t\t\tdocument.removeEventListener(\"touchend\", s._unlock, true);\n\t\t\t\ts._unlocked = true;\n\t\t\t}\n\t\t};\n\n\n\t// Public Methods\n\t\tp.toString = function () {\n\t\t\treturn \"[WebAudioPlugin]\";\n\t\t};\n\n\n\t// Private Methods\n\t\t/**\n\t\t * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\n\t\t * @method _addPropsToClasses\n\t\t * @static\n\t\t * @protected\n\t\t * @since 0.6.0\n\t\t */\n\t\tp._addPropsToClasses = function() {\n\t\t\tvar c = this._soundInstanceClass;\n\t\t\tc.context = this.context;\n\t\t\tc._scratchBuffer = s._scratchBuffer;\n\t\t\tc.destinationNode = this.gainNode;\n\t\t\tc._panningModel = this._panningModel;\n\n\t\t\tthis._loaderClass.context = this.context;\n\t\t};\n\n\n\t\t/**\n\t\t * Set the gain value for master audio. Should not be called externally.\n\t\t * @method _updateVolume\n\t\t * @protected\n\t\t */\n\t\tp._updateVolume = function () {\n\t\t\tvar newVolume = createjs.Sound._masterMute ? 0 : this._volume;\n\t\t\tif (newVolume != this.gainNode.gain.value) {\n\t\t\t\tthis.gainNode.gain.value = newVolume;\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\n\t}());\n\n\t//##############################################################################\n\t// HTMLAudioTagPool.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\n\t\t * @class HTMLAudioTagPool\n\t\t * @param {String} src The source of the channel.\n\t\t * @protected\n\t\t */\n\t\tfunction HTMLAudioTagPool() {\n\t\t\t\tthrow \"HTMLAudioTagPool cannot be instantiated\";\n\t\t}\n\n\t\tvar s = HTMLAudioTagPool;\n\n\t// Static Properties\n\t\t/**\n\t\t * A hash lookup of each base audio tag, indexed by the audio source.\n\t\t * @property _tags\n\t\t * @type {{}}\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._tags = {};\n\n\t\t/**\n\t\t * An object pool for html audio tags\n\t\t * @property _tagPool\n\t\t * @type {TagPool}\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._tagPool = new TagPool();\n\n\t\t/**\n\t\t * A hash lookup of if a base audio tag is available, indexed by the audio source\n\t\t * @property _tagsUsed\n\t\t * @type {{}}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._tagUsed = {};\n\n\t// Static Methods\n\t\t/**\n\t\t  * Get an audio tag with the given source.\n\t\t  * @method get\n\t\t  * @param {String} src The source file used by the audio tag.\n\t\t  * @static\n\t\t  */\n\t\t s.get = function (src) {\n\t\t\tvar t = s._tags[src];\n\t\t\tif (t == null) {\n\t\t\t\t// create new base tag\n\t\t\t\tt = s._tags[src] = s._tagPool.get();\n\t\t\t\tt.src = src;\n\t\t\t} else {\n\t\t\t\t// get base or pool\n\t\t\t\tif (s._tagUsed[src]) {\n\t\t\t\t\tt = s._tagPool.get();\n\t\t\t\t\tt.src = src;\n\t\t\t\t} else {\n\t\t\t\t\ts._tagUsed[src] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn t;\n\t\t };\n\n\t\t /**\n\t\t  * Return an audio tag to the pool.\n\t\t  * @method set\n\t\t  * @param {String} src The source file used by the audio tag.\n\t\t  * @param {HTMLElement} tag Audio tag to set.\n\t\t  * @static\n\t\t  */\n\t\t s.set = function (src, tag) {\n\t\t\t // check if this is base, if yes set boolean if not return to pool\n\t\t\t if(tag == s._tags[src]) {\n\t\t\t\t s._tagUsed[src] = false;\n\t\t\t } else {\n\t\t\t\t s._tagPool.set(tag);\n\t\t\t }\n\t\t };\n\n\t\t/**\n\t\t * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\n\t\t * @method remove\n\t\t * @param {String} src The source for the tag\n\t\t * @return {Boolean} If the TagPool was deleted.\n\t\t * @static\n\t\t */\n\t\ts.remove = function (src) {\n\t\t\tvar tag = s._tags[src];\n\t\t\tif (tag == null) {return false;}\n\t\t\ts._tagPool.set(tag);\n\t\t\tdelete(s._tags[src]);\n\t\t\tdelete(s._tagUsed[src]);\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Gets the duration of the src audio in milliseconds\n\t\t * @method getDuration\n\t\t * @param {String} src The source file used by the audio tag.\n\t\t * @return {Number} Duration of src in milliseconds\n\t\t * @static\n\t\t */\n\t\ts.getDuration= function (src) {\n\t\t\tvar t = s._tags[src];\n\t\t\tif (t == null || !t.duration) {return 0;}\t// OJR duration is NaN if loading has not completed\n\t\t\treturn t.duration * 1000;\n\t\t};\n\n\t\tcreatejs.HTMLAudioTagPool = HTMLAudioTagPool;\n\n\n\t// ************************************************************************************************************\n\t\t/**\n\t\t * The TagPool is an object pool for HTMLAudio tag instances.\n\t\t * #class TagPool\n\t\t * @param {String} src The source of the channel.\n\t\t * @protected\n\t\t */\n\t\tfunction TagPool(src) {\n\n\t// Public Properties\n\t\t\t/**\n\t\t\t * A list of all available tags in the pool.\n\t\t\t * #property tags\n\t\t\t * @type {Array}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._tags = [];\n\t\t}\n\t\tvar p = TagPool.prototype;\n\t\tp.constructor = TagPool;\n\n\n\t// Public Methods\n\t\t/**\n\t\t * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\n\t\t * #method get\n\t\t * @return {HTMLAudioElement} An HTML audio tag.\n\t\t */\n\t\tp.get = function () {\n\t\t\tvar tag;\n\t\t\tif (this._tags.length == 0) {\n\t\t\t\ttag = this._createTag();\n\t\t\t} else {\n\t\t\t\ttag = this._tags.pop();\n\t\t\t}\n\t\t\tif (tag.parentNode == null) {document.body.appendChild(tag);}\n\t\t\treturn tag;\n\t\t};\n\n\t\t/**\n\t\t * Put an HTMLAudioElement back in the pool for use.\n\t\t * #method set\n\t\t * @param {HTMLAudioElement} tag HTML audio tag\n\t\t */\n\t\tp.set = function (tag) {\n\t\t\t// OJR this first step seems unnecessary\n\t\t\tvar index = createjs.indexOf(this._tags, tag);\n\t\t\tif (index == -1) {\n\t\t\t\tthis._tags.src = null;\n\t\t\t\tthis._tags.push(tag);\n\t\t\t}\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[TagPool]\";\n\t\t};\n\n\n\t// Private Methods\n\t\t/**\n\t\t * Create an HTML audio tag.\n\t\t * #method _createTag\n\t\t * @param {String} src The source file to set for the audio tag.\n\t\t * @return {HTMLElement} Returns an HTML audio tag.\n\t\t * @protected\n\t\t */\n\t\tp._createTag = function () {\n\t\t\tvar tag = document.createElement(\"audio\");\n\t\t\ttag.autoplay = false;\n\t\t\ttag.preload = \"none\";\n\t\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\t\treturn tag;\n\t\t};\n\n\t}());\n\n\t//##############################################################################\n\t// HTMLAudioSoundInstance.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n\t\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t\t *\n\t\t * @param {String} src The path to and file name of the sound.\n\t\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n\t\t * @class HTMLAudioSoundInstance\n\t\t * @extends AbstractSoundInstance\n\t\t * @constructor\n\t\t */\n\t\tfunction HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n\t// Private Properties\n\t\t\tthis._audioSpriteStopTime = null;\n\t\t\tthis._delayTimeoutId = null;\n\n\t\t\t// Proxies, make removing listeners easier.\n\t\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t\t\tthis._readyHandler = createjs.proxy(this._handleTagReady, this);\n\t\t\tthis._stalledHandler = createjs.proxy(this._playFailed, this);\n\t\t\tthis._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\n\t\t\tthis._loopHandler = createjs.proxy(this._handleSoundComplete, this);\n\n\t\t\tif (duration) {\n\t\t\t\tthis._audioSpriteStopTime = (startTime + duration) * 0.001;\n\t\t\t} else {\n\t\t\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\t\t}\n\t\t}\n\t\tvar p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// Public Methods\n\t\t/**\n\t\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\n\t\t * undoc'd because it is not meant to be used outside of Sound\n\t\t * #method setMasterVolume\n\t\t * @param value\n\t\t */\n\t\tp.setMasterVolume = function (value) {\n\t\t\tthis._updateVolume();\n\t\t};\n\n\t\t/**\n\t\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\n\t\t * undoc'd because it is not meant to be used outside of Sound\n\t\t * #method setMasterMute\n\t\t * @param value\n\t\t */\n\t\tp.setMasterMute = function (isMuted) {\n\t\t\tthis._updateVolume();\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[HTMLAudioSoundInstance]\";\n\t\t};\n\n\t//Private Methods\n\t\tp._removeLooping = function() {\n\t\t\tif(this._playbackResource == null) {return;}\n\t\t\tthis._playbackResource.loop = false;\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t};\n\n\t\tp._addLooping = function() {\n\t\t\tif(this._playbackResource == null  || this._audioSpriteStopTime) {return;}\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\tthis._playbackResource.loop = true;\n\t\t};\n\n\t\tp._handleCleanUp = function () {\n\t\t\tvar tag = this._playbackResource;\n\t\t\tif (tag != null) {\n\t\t\t\ttag.pause();\n\t\t\t\ttag.loop = false;\n\t\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\n\t\t\t\ttry {\n\t\t\t\t\ttag.currentTime = this._startTime;\n\t\t\t\t} catch (e) {\n\t\t\t\t} // Reset Position\n\t\t\t\tcreatejs.HTMLAudioTagPool.set(this.src, tag);\n\t\t\t\tthis._playbackResource = null;\n\t\t\t}\n\t\t};\n\n\t\tp._beginPlaying = function (playProps) {\n\t\t\tthis._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\n\t\t\treturn this.AbstractSoundInstance__beginPlaying(playProps);\n\t\t};\n\n\t\tp._handleSoundReady = function (event) {\n\t\t\tif (this._playbackResource.readyState !== 4) {\n\t\t\t\tvar tag = this._playbackResource;\n\t\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\t\ttag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\n\t\t\t\ttag.load();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._updateVolume();\n\t\t\tthis._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\n\t\t\tif (this._audioSpriteStopTime) {\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t\t} else {\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\t\tif(this._loop != 0) {\n\t\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\t\t\tthis._playbackResource.loop = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._playbackResource.play();\n\t\t};\n\n\t\t/**\n\t\t * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\n\t\t * @method _handleTagReady\n\t\t * @param event\n\t\t * @protected\n\t\t */\n\t\tp._handleTagReady = function (event) {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\n\t\t\tthis._handleSoundReady();\n\t\t};\n\n\t\tp._pause = function () {\n\t\t\tthis._playbackResource.pause();\n\t\t};\n\n\t\tp._resume = function () {\n\t\t\tthis._playbackResource.play();\n\t\t};\n\n\t\tp._updateVolume = function () {\n\t\t\tif (this._playbackResource != null) {\n\t\t\t\tvar newVolume = (this._muted || createjs.Sound._masterMute) ? 0 : this._volume * createjs.Sound._masterVolume;\n\t\t\t\tif (newVolume != this._playbackResource.volume) {this._playbackResource.volume = newVolume;}\n\t\t\t}\n\t\t};\n\n\t\tp._calculateCurrentPosition = function() {\n\t\t\treturn (this._playbackResource.currentTime * 1000) - this._startTime;\n\t\t};\n\n\t\tp._updatePosition = function() {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\t\ttry {\n\t\t\t\tthis._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\n\t\t\t} catch (error) { // Out of range\n\t\t\t\tthis._handleSetPositionSeek(null);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\n\t\t * @method _handleSetPositionSeek\n\t\t * @param event\n\t\t * @protected\n\t\t */\n\t\tp._handleSetPositionSeek = function(event) {\n\t\t\tif (this._playbackResource == null) { return; }\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t};\n\n\t\t/**\n\t\t * Timer used to loop audio sprites.\n\t\t * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\n\t\t * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\n\t\t *\n\t\t * @method _handleAudioSpriteLoop\n\t\t * @param event\n\t\t * @private\n\t\t */\n\t\tp._handleAudioSpriteLoop = function (event) {\n\t\t\tif(this._playbackResource.currentTime <= this._audioSpriteStopTime) {return;}\n\t\t\tthis._playbackResource.pause();\n\t\t\tif(this._loop == 0) {\n\t\t\t\tthis._handleSoundComplete(null);\n\t\t\t} else {\n\t\t\t\tthis._position = 0;\n\t\t\t\tthis._loop--;\n\t\t\t\tthis._playbackResource.currentTime = this._startTime * 0.001;\n\t\t\t\tif(!this._paused) {this._playbackResource.play();}\n\t\t\t\tthis._sendEvent(\"loop\");\n\t\t\t}\n\t\t};\n\n\t\t// NOTE with this approach audio will loop as reliably as the browser allows\n\t\t// but we could end up sending the loop event after next loop playback begins\n\t\tp._handleLoop = function (event) {\n\t\t\tif(this._loop == 0) {\n\t\t\t\tthis._playbackResource.loop = false;\n\t\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\t}\n\t\t};\n\n\t\tp._updateStartTime = function () {\n\t\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t\t}\n\t\t};\n\n\t\tp._updateDuration = function () {\n\t\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t\t}\n\t\t};\n\n\t\tp._setDurationFromSource = function () {\n\t\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\t\tthis._playbackResource = null;\n\t\t};\n\n\t\tcreatejs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\n\t}());\n\n\t//##############################################################################\n\t// HTMLAudioPlugin.js\n\t//##############################################################################\n\n\t(function () {\n\n\t\t/**\n\t\t * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\n\t\t * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\n\t\t * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t\t *\n\t\t * <h4>Known Browser and OS issues for HTML Audio</h4>\n\t\t * <b>All browsers</b><br />\n\t\t * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\n\t\t * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\n\t\t * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\n\t\t *\n\t     * <b>IE html limitations</b><br />\n\t     * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n\t     * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n\t     * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n\t     * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\n\t     * 64kbps works.</li>\n\t\t * <li>Occasionally very short samples will get cut off.</li>\n\t\t * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\n\t\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\n\t\t * Note that audio sprites can be used as a solution to this issue.</li></ul>\n\t\t *\n\t\t * <b>Safari limitations</b><br />\n\t\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t\t *\n\t\t * <b>iOS 6 limitations</b><br />\n\t\t * <ul><li>can only have one &lt;audio&gt; tag</li>\n\t\t * \t\t<li>can not preload or autoplay the audio</li>\n\t\t * \t\t<li>can not cache the audio</li>\n\t\t * \t\t<li>can not play the audio except inside a user initiated event.</li>\n\t\t *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\n\t\t * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\n\t\t * </ul>\n\t\t *\n\t\t * <b>Android Native Browser limitations</b><br />\n\t\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t\t *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\n\t\t * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\n\t\t * <ul> <li>Can only play 1 sound at a time.</li>\n\t\t *      <li>Sound is not cached.</li>\n\t\t *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\n\t\t *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\n\t\t * </ul>\n\t\t *\n\t\t * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\n\t\t *\n\t\t * @class HTMLAudioPlugin\n\t\t * @extends AbstractPlugin\n\t\t * @constructor\n\t\t */\n\t\tfunction HTMLAudioPlugin() {\n\t\t\tthis.AbstractPlugin_constructor();\n\n\n\t\t// Public Properties\n\t\t\t/**\n\t\t\t * This is no longer needed as we are now using object pooling for tags.\n\t\t\t *\n\t\t\t * <b>NOTE this property only exists as a limitation of HTML audio.</b>\n\t\t\t * @property defaultNumChannels\n\t\t\t * @type {Number}\n\t\t\t * @default 2\n\t\t\t * @since 0.4.0\n\t\t\t * @deprecated\n\t\t\t */\n\t\t\tthis.defaultNumChannels = 2;\n\n\t\t\tthis._capabilities = s._capabilities;\n\n\t\t\tthis._loaderClass = createjs.SoundLoader;\n\t\t\tthis._soundInstanceClass = createjs.HTMLAudioSoundInstance;\n\t\t}\n\n\t\tvar p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\n\t\tvar s = HTMLAudioPlugin;\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t// Static Properties\n\t\t/**\n\t\t * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\n\t\t * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\n\t\t * Audio sprites work around this limitation.\n\t\t * @property MAX_INSTANCES\n\t\t * @type {Number}\n\t\t * @default 30\n\t\t * @static\n\t\t */\n\t\ts.MAX_INSTANCES = 30;\n\n\t\t/**\n\t\t * Event constant for the \"canPlayThrough\" event for cleaner code.\n\t\t * @property _AUDIO_READY\n\t\t * @type {String}\n\t\t * @default canplaythrough\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._AUDIO_READY = \"canplaythrough\";\n\n\t\t/**\n\t\t * Event constant for the \"ended\" event for cleaner code.\n\t\t * @property _AUDIO_ENDED\n\t\t * @type {String}\n\t\t * @default ended\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._AUDIO_ENDED = \"ended\";\n\n\t\t/**\n\t\t * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\n\t\t * @property _AUDIO_SEEKED\n\t\t * @type {String}\n\t\t * @default seeked\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._AUDIO_SEEKED = \"seeked\";\n\n\t\t/**\n\t\t * Event constant for the \"stalled\" event for cleaner code.\n\t\t * @property _AUDIO_STALLED\n\t\t * @type {String}\n\t\t * @default stalled\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._AUDIO_STALLED = \"stalled\";\n\n\t\t/**\n\t\t * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\n\t\t * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\n\t\t * @property _TIME_UPDATE\n\t\t * @type {String}\n\t\t * @default timeupdate\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._TIME_UPDATE = \"timeupdate\";\n\n\t\t/**\n\t\t * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\n\t\t * method. Please see the Sound {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}} method for an overview of all\n\t\t * of the available properties.\n\t\t * @property _capabilities\n\t\t * @type {Object}\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\ts._capabilities = null;\n\n\n\t// Static Methods\n\t\t/**\n\t\t * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\n\t\t * browsers, but is disabled in iOS because of its limitations.\n\t\t * @method isSupported\n\t\t * @return {Boolean} If the plugin can be initialized.\n\t\t * @static\n\t\t */\n\t\ts.isSupported = function () {\n\t\t\ts._generateCapabilities();\n\t\t\treturn (s._capabilities != null);\n\t\t};\n\n\t\t/**\n\t\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n\t\t * method for an overview of plugin capabilities.\n\t\t * @method _generateCapabilities\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\ts._generateCapabilities = function () {\n\t\t\tif (s._capabilities != null) {return;}\n\t\t\tvar t = document.createElement(\"audio\");\n\t\t\tif (t.canPlayType == null) {return null;}\n\n\t\t\ts._capabilities = {\n\t\t\t\tpanning:false,\n\t\t\t\tvolume:true,\n\t\t\t\ttracks:-1\n\t\t\t};\n\n\t\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\t\tvar ext = supportedExtensions[i];\n\t\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\t\t};\n\n\n\t// public methods\n\t\tp.register = function (loadItem) {\n\t\t\tvar tag = createjs.HTMLAudioTagPool.get(loadItem.src);\n\t\t\tvar loader = this.AbstractPlugin_register(loadItem);\n\t\t\tloader.setTag(tag);\n\n\t\t\treturn loader;\n\t\t};\n\n\t\tp.removeSound = function (src) {\n\t\t\tthis.AbstractPlugin_removeSound(src);\n\t\t\tcreatejs.HTMLAudioTagPool.remove(src);\n\t\t};\n\n\t\tp.create = function (src, startTime, duration) {\n\t\t\tvar si = this.AbstractPlugin_create(src, startTime, duration);\n\t\t\tsi.setPlaybackResource(null);\n\t\t\treturn si;\n\t\t};\n\n\t\tp.toString = function () {\n\t\t\treturn \"[HTMLAudioPlugin]\";\n\t\t};\n\n\t\t// plugin does not support these\n\t\tp.setVolume = p.getVolume = p.setMute = null;\n\n\n\t\tcreatejs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\n\t}());\n\n\t//##############################################################################\n\t// Tween.js\n\t//##############################################################################\n\n\t// TODO: possibly add a END actionsMode (only runs actions that == position)?\n\t// TODO: evaluate a way to decouple paused from tick registration.\n\n\n\n\n\t(function() {\n\n\n\t// constructor\n\t\t/**\n\t\t * A Tween instance tweens properties for a single target. Instance methods can be chained for easy construction and sequencing:\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      target.alpha = 1;\n\t\t *\t    createjs.Tween.get(target)\n\t\t *\t         .wait(500)\n\t\t *\t         .to({alpha:0, visible:false}, 1000)\n\t\t *\t         .call(handleComplete);\n\t\t *\t    function handleComplete() {\n\t\t *\t    \t//Tween complete\n\t\t *\t    }\n\t\t *\n\t\t * Multiple tweens can point to the same instance, however if they affect the same properties there could be unexpected\n\t\t * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\n\t\t * in the props argument.\n\t\t *\n\t\t *      createjs.Tween.get(target, {override:true}).to({x:100});\n\t\t *\n\t\t * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to get notified when a property of the\n\t\t * target is changed.\n\t\t *\n\t\t *      createjs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\n\t\t *      function handleChange(event) {\n\t\t *          // The tween changed.\n\t\t *      }\n\t\t *\n\t\t * See the Tween {{#crossLink \"Tween/get\"}}{{/crossLink}} method for additional param documentation.\n\t\t * @class Tween\n\t\t * @param {Object} target The target object that will have its properties tweened.\n\t\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`.\n\t\t * All properties default to false. Supported props are:<UL>\n\t\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on this tween.</LI>\n\t\t *    <LI> override: if true, `Tween.removeTweens(target)` will be called to remove any other tweens with the same target.\n\t\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t\t *    <LI> position: indicates the initial position for this tween.</LI>\n\t\t *    <LI> onChange: specifies a listener for the \"change\" event.</LI>\n\t\t * </UL>\n\t\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual\n\t\t * plugins' documentation for details.\n\t\t * @extends EventDispatcher\n\t\t * @constructor\n\t\t */\n\t\tfunction Tween(target, props, pluginData) {\n\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\n\t\t\t * then setting this to true (the default) will cause this tween to be paused when <code>Ticker.setPaused(true)</code>\n\t\t\t * is called. See the Tween {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the props\n\t\t\t * parameter.\n\t\t\t * @property ignoreGlobalPause\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.ignoreGlobalPause = false;\n\t\t\n\t\t\t/**\n\t\t\t * If true, the tween will loop when it reaches the end. Can be set via the props param.\n\t\t\t * @property loop\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t */\n\t\t\tthis.loop = false;\n\t\t\n\t\t\t/**\n\t\t\t * Specifies the total duration of this tween in milliseconds (or ticks if useTicks is true).\n\t\t\t * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\n\t\t\t * behaviour.\n\t\t\t * @property duration\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.duration = 0;\n\t\t\n\t\t\t/**\n\t\t\t * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\n\t\t\t * you specify data by setting it to a property of pluginData with the same name as the plugin class.\n\t\t\t * @example\n\t\t\t *\tmyTween.pluginData.PluginClassName = data;\n\t\t\t * <br/>\n\t\t\t * Also, most plugins support a property to enable or disable them. This is typically the plugin class name followed by \"_enabled\".<br/>\n\t\t\t * @example\n\t\t\t *\tmyTween.pluginData.PluginClassName_enabled = false;<br/>\n\t\t\t * <br/>\n\t\t\t * Some plugins also store instance data in this object, usually in a property named _PluginClassName.\n\t\t\t * See the documentation for individual plugins for more details.\n\t\t\t * @property pluginData\n\t\t\t * @type {Object}\n\t\t\t */\n\t\t\tthis.pluginData = pluginData || {};\n\t\t\n\t\t\t/**\n\t\t\t * The target of this tween. This is the object on which the tweened properties will be changed. Changing\n\t\t\t * this property after the tween is created will not have any effect.\n\t\t\t * @property target\n\t\t\t * @type {Object}\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.target = target;\n\t\t\n\t\t\t/**\n\t\t\t * The current normalized position of the tween. This will always be a value between 0 and duration.\n\t\t\t * Changing this property directly will have no effect.\n\t\t\t * @property position\n\t\t\t * @type {Object}\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tthis.position = null;\n\t\t\n\t\t\t/**\n\t\t\t * Indicates the tween's current position is within a passive wait.\n\t\t\t * @property passive\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.passive = false;\n\t\t\n\t\t// private properties:\t\n\t\t\t/**\n\t\t\t * @property _paused\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._paused = false;\n\t\t\n\t\t\t/**\n\t\t\t * @property _curQueueProps\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._curQueueProps = {};\n\t\t\n\t\t\t/**\n\t\t\t * @property _initQueueProps\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._initQueueProps = {};\n\t\t\n\t\t\t/**\n\t\t\t * @property _steps\n\t\t\t * @type {Array}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._steps = [];\n\t\t\n\t\t\t/**\n\t\t\t * @property _actions\n\t\t\t * @type {Array}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._actions = [];\n\t\t\n\t\t\t/**\n\t\t\t * Raw position.\n\t\t\t * @property _prevPosition\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._prevPosition = 0;\n\t\t\n\t\t\t/**\n\t\t\t * The position within the current step.\n\t\t\t * @property _stepPosition\n\t\t\t * @type {Number}\n\t\t\t * @default 0\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._stepPosition = 0; // this is needed by MovieClip.\n\t\t\n\t\t\t/**\n\t\t\t * Normalized position.\n\t\t\t * @property _prevPos\n\t\t\t * @type {Number}\n\t\t\t * @default -1\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._prevPos = -1;\n\t\t\n\t\t\t/**\n\t\t\t * @property _target\n\t\t\t * @type {Object}\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._target = target;\n\t\t\n\t\t\t/**\n\t\t\t * @property _useTicks\n\t\t\t * @type {Boolean}\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._useTicks = false;\n\t\t\n\t\t\t/**\n\t\t\t * @property _inited\n\t\t\t * @type {boolean}\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._inited = false;\n\t\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the tween is currently registered with Tween.\n\t\t\t * @property _registered\n\t\t\t * @type {boolean}\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._registered = false;\n\n\n\t\t\tif (props) {\n\t\t\t\tthis._useTicks = props.useTicks;\n\t\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\n\t\t\t\tthis.loop = props.loop;\n\t\t\t\tprops.onChange && this.addEventListener(\"change\", props.onChange);\n\t\t\t\tif (props.override) { Tween.removeTweens(target); }\n\t\t\t}\n\t\t\tif (props&&props.paused) { this._paused=true; }\n\t\t\telse { createjs.Tween._register(this,true); }\n\t\t\tif (props&&props.position!=null) { this.setPosition(props.position, Tween.NONE); }\n\n\t\t}\n\t\tvar p = createjs.extend(Tween, createjs.EventDispatcher);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\t\n\n\t// static properties\n\t\t/**\n\t\t * Constant defining the none actionsMode for use with setPosition.\n\t\t * @property NONE\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @static\n\t\t */\n\t\tTween.NONE = 0;\n\n\t\t/**\n\t\t * Constant defining the loop actionsMode for use with setPosition.\n\t\t * @property LOOP\n\t\t * @type Number\n\t\t * @default 1\n\t\t * @static\n\t\t */\n\t\tTween.LOOP = 1;\n\n\t\t/**\n\t\t * Constant defining the reverse actionsMode for use with setPosition.\n\t\t * @property REVERSE\n\t\t * @type Number\n\t\t * @default 2\n\t\t * @static\n\t\t */\n\t\tTween.REVERSE = 2;\n\n\t\t/**\n\t\t * Constant returned by plugins to tell the tween not to use default assignment.\n\t\t * @property IGNORE\n\t\t * @type Object\n\t\t * @static\n\t\t */\n\t\tTween.IGNORE = {};\n\n\t\t/**\n\t\t * @property _listeners\n\t\t * @type Array[Tween]\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\tTween._tweens = [];\n\n\t\t/**\n\t\t * @property _plugins\n\t\t * @type Object\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\tTween._plugins = {};\n\n\n\t// static methods\t\n\t\t/**\n\t\t * Returns a new tween instance. This is functionally identical to using \"new Tween(...)\", but looks cleaner\n\t\t * with the chained syntax of TweenJS.\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tvar tween = createjs.Tween.get(target);\n\t\t *\n\t\t * @method get\n\t\t * @param {Object} target The target object that will have its properties tweened.\n\t\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`).\n\t\t * All properties default to `false`. Supported props are:\n\t\t * <UL>\n\t\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on\n\t\t *    this tween.</LI>\n\t\t *    <LI> override: if true, `createjs.Tween.removeTweens(target)` will be called to remove any other tweens with\n\t\t *    the same target.\n\t\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t\t *    <LI> position: indicates the initial position for this tween.</LI>\n\t\t *    <LI> onChange: specifies a listener for the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event.</LI>\n\t\t * </UL>\n\t\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual plugins'\n\t\t * documentation for details.\n\t\t * @param {Boolean} [override=false] If true, any previous tweens on the same target will be removed. This is the\n\t\t * same as calling `Tween.removeTweens(target)`.\n\t\t * @return {Tween} A reference to the created tween. Additional chained tweens, method calls, or callbacks can be\n\t\t * applied to the returned tween instance.\n\t\t * @static\n\t\t */\n\t\tTween.get = function(target, props, pluginData, override) {\n\t\t\tif (override) { Tween.removeTweens(target); }\n\t\t\treturn new Tween(target, props, pluginData);\n\t\t};\n\n\t\t/**\n\t\t * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\n\t\t * manually if you prefer to use your own \"heartbeat\" implementation.\n\t\t * @method tick\n\t\t * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\n\t\t * `useTicks` set to true.\n\t\t * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\n\t\t * will ignore this, but all others will pause if this is `true`.\n\t\t * @static\n\t\t */\n\t\tTween.tick = function(delta, paused) {\n\t\t\tvar tweens = Tween._tweens.slice(); // to avoid race conditions.\n\t\t\tfor (var i=tweens.length-1; i>=0; i--) {\n\t\t\t\tvar tween = tweens[i];\n\t\t\t\tif ((paused && !tween.ignoreGlobalPause) || tween._paused) { continue; }\n\t\t\t\ttween.tick(tween._useTicks?1:delta);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\n\t\t * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t\t * No other events are handled in Tween.\n\t\t * @method handleEvent\n\t\t * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\n\t\t * usually be of type \"tick\".\n\t\t * @private\n\t\t * @static\n\t\t * @since 0.4.2\n\t\t */\n\t\tTween.handleEvent = function(event) {\n\t\t\tif (event.type == \"tick\") {\n\t\t\t\tthis.tick(event.delta, event.paused);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\n\t\t * property is `true`.\n\t\t * @method removeTweens\n\t\t * @param {Object} target The target object to remove existing tweens from.\n\t\t * @static\n\t\t */\n\t\tTween.removeTweens = function(target) {\n\t\t\tif (!target.tweenjs_count) { return; }\n\t\t\tvar tweens = Tween._tweens;\n\t\t\tfor (var i=tweens.length-1; i>=0; i--) {\n\t\t\t\tvar tween = tweens[i];\n\t\t\t\tif (tween._target == target) {\n\t\t\t\t\ttween._paused = true;\n\t\t\t\t\ttweens.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget.tweenjs_count = 0;\n\t\t};\n\n\t\t/**\n\t\t * Stop and remove all existing tweens.\n\t\t * @method removeAllTweens\n\t\t * @static\n\t\t * @since 0.4.1\n\t\t */\n\t\tTween.removeAllTweens = function() {\n\t\t\tvar tweens = Tween._tweens;\n\t\t\tfor (var i= 0, l=tweens.length; i<l; i++) {\n\t\t\t\tvar tween = tweens[i];\n\t\t\t\ttween._paused = true;\n\t\t\t\ttween.target&&(tween.target.tweenjs_count = 0);\n\t\t\t}\n\t\t\ttweens.length = 0;\n\t\t};\n\n\t\t/**\n\t\t * Indicates whether there are any active tweens (and how many) on the target object (if specified) or in general.\n\t\t * @method hasActiveTweens\n\t\t * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\n\t\t * if there are any active tweens on any target.\n\t\t * @return {Boolean} If there are active tweens.\n\t\t * @static\n\t\t */\n\t\tTween.hasActiveTweens = function(target) {\n\t\t\tif (target) { return target.tweenjs_count != null && !!target.tweenjs_count; }\n\t\t\treturn Tween._tweens && !!Tween._tweens.length;\n\t\t};\n\n\t\t/**\n\t\t * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"CSSPlugin\"}}{{/crossLink}}\n\t\t * for an example of how to write TweenJS plugins.\n\t\t * @method installPlugin\n\t\t * @static\n\t\t * @param {Object} plugin The plugin class to install\n\t\t * @param {Array} properties An array of properties that the plugin will handle.\n\t\t */\n\t\tTween.installPlugin = function(plugin, properties) {\n\t\t\tvar priority = plugin.priority;\n\t\t\tif (priority == null) { plugin.priority = priority = 0; }\n\t\t\tfor (var i=0,l=properties.length,p=Tween._plugins;i<l;i++) {\n\t\t\t\tvar n = properties[i];\n\t\t\t\tif (!p[n]) { p[n] = [plugin]; }\n\t\t\t\telse {\n\t\t\t\t\tvar arr = p[n];\n\t\t\t\t\tfor (var j=0,jl=arr.length;j<jl;j++) {\n\t\t\t\t\t\tif (priority < arr[j].priority) { break; }\n\t\t\t\t\t}\n\t\t\t\t\tp[n].splice(j,0,plugin);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Registers or unregisters a tween with the ticking system.\n\t\t * @method _register\n\t\t * @param {Tween} tween The tween instance to register or unregister.\n\t\t * @param {Boolean} value If `true`, the tween is registered. If `false` the tween is unregistered.\n\t\t * @static\n\t\t * @protected\n\t\t */\n\t\tTween._register = function(tween, value) {\n\t\t\tvar target = tween._target;\n\t\t\tvar tweens = Tween._tweens;\n\t\t\tif (value && !tween._registered) {\n\t\t\t\t// TODO: this approach might fail if a dev is using sealed objects in ES5\n\t\t\t\tif (target) { target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count+1 : 1; }\n\t\t\t\ttweens.push(tween);\n\t\t\t\tif (!Tween._inited && createjs.Ticker) { createjs.Ticker.addEventListener(\"tick\", Tween); Tween._inited = true; }\n\t\t\t} else if (!value && tween._registered) {\n\t\t\t\tif (target) { target.tweenjs_count--; }\n\t\t\t\tvar i = tweens.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tif (tweens[i] == tween) {\n\t\t\t\t\t\ttweens.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttween._registered = value;\n\t\t};\n\n\n\t// events:\n\t\t/**\n\t\t * Called whenever the tween's position changes.\n\t\t * @event change\n\t\t * @since 0.4.0\n\t\t **/\n\t\t\n\n\t// public methods:\n\t\t/**\n\t\t * Queues a wait (essentially an empty tween).\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\t//This tween will wait 1s before alpha is faded to 0.\n\t\t *\t\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\n\t\t *\n\t\t * @method wait\n\t\t * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n\t\t * @param {Boolean} [passive] Tween properties will not be updated during a passive wait. This\n\t\t * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\n\t\t * affecting the same target at different times.\n\t\t * @return {Tween} This tween instance (for chaining calls).\n\t\t **/\n\t\tp.wait = function(duration, passive) {\n\t\t\tif (duration == null || duration <= 0) { return this; }\n\t\t\tvar o = this._cloneProps(this._curQueueProps);\n\t\t\treturn this._addStep({d:duration, p0:o, e:this._linearEase, p1:o, v:passive});\n\t\t};\n\n\t\t/**\n\t\t * Queues a tween from the current values to the target properties. Set duration to 0 to jump to these value.\n\t\t * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\n\t\t * properties will be set at the end of the specified duration.\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tcreatejs.Tween.get(target).to({alpha:0}, 1000);\n\t\t *\n\t\t * @method to\n\t\t * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\n\t\t * property of the target to 300).\n\t\t * @param {Number} [duration=0] The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n\t\t * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\n\t\t * class for a list of built-in ease functions.\n\t\t * @return {Tween} This tween instance (for chaining calls).\n\t\t */\n\t\tp.to = function(props, duration, ease) {\n\t\t\tif (isNaN(duration) || duration < 0) { duration = 0; }\n\t\t\treturn this._addStep({d:duration||0, p0:this._cloneProps(this._curQueueProps), e:ease, p1:this._cloneProps(this._appendQueueProps(props))});\n\t\t};\n\n\t\t/**\n\t\t * Queues an action to call the specified function.\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *   \t//would call myFunction() after 1 second.\n\t\t *   \tmyTween.wait(1000).call(myFunction);\n\t\t *\n\t\t * @method call\n\t\t * @param {Function} callback The function to call.\n\t\t * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\n\t\t *      will be called with a single param pointing to this tween.\n\t\t * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's\n\t\t *      scope.\n\t\t * @return {Tween} This tween instance (for chaining calls).\n\t\t */\n\t\tp.call = function(callback, params, scope) {\n\t\t\treturn this._addAction({f:callback, p:params ? params : [this], o:scope ? scope : this._target});\n\t\t};\n\n\t\t// TODO: add clarification between this and a 0 duration .to:\n\t\t/**\n\t\t * Queues an action to set the specified props on the specified target. If target is null, it will use this tween's\n\t\t * target.\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tmyTween.wait(1000).set({visible:false},foo);\n\t\t *\n\t\t * @method set\n\t\t * @param {Object} props The properties to set (ex. `{visible:false}`).\n\t\t * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\n\t\t * @return {Tween} This tween instance (for chaining calls).\n\t\t */\n\t\tp.set = function(props, target) {\n\t\t\treturn this._addAction({f:this._set, o:this, p:[props, target ? target : this._target]});\n\t\t};\n\n\t\t/**\n\t\t * Queues an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *\t\tmyTween.to({x:100},500).play(otherTween);\n\t\t *\n\t\t * @method play\n\t\t * @param {Tween} tween The tween to play.\n\t\t * @return {Tween} This tween instance (for chaining calls).\n\t\t */\n\t\tp.play = function(tween) {\n\t\t\tif (!tween) { tween = this; }\n\t\t\treturn this.call(tween.setPaused, [false], tween);\n\t\t};\n\n\t\t/**\n\t\t * Queues an action to pause the specified tween.\n\t\t * @method pause\n\t\t * @param {Tween} tween The tween to pause. If null, it pauses this tween.\n\t\t * @return {Tween} This tween instance (for chaining calls)\n\t\t */\n\t\tp.pause = function(tween) {\n\t\t\tif (!tween) { tween = this; }\n\t\t\treturn this.call(tween.setPaused, [true], tween);\n\t\t};\n\n\t\t/**\n\t\t * Advances the tween to a specified position.\n\t\t * @method setPosition\n\t\t * @param {Number} value The position to seek to in milliseconds (or ticks if useTicks is true).\n\t\t * @param {Number} [actionsMode=1] Specifies how actions are handled (ie. call, set, play, pause):\n\t\t * <ul>\n\t\t *      <li>{{#crossLink \"Tween/NONE:property\"}}{{/crossLink}} (0) - run no actions.</li>\n\t\t *      <li>{{#crossLink \"Tween/LOOP:property\"}}{{/crossLink}} (1) - if new position is less than old, then run all\n\t\t *      actions between old and duration, then all actions between 0 and new.</li>\n\t\t *      <li>{{#crossLink \"Tween/REVERSE:property\"}}{{/crossLink}} (2) - if new position is less than old, run all\n\t\t *      actions between them in reverse.</li>\n\t\t * </ul>\n\t\t * @return {Boolean} Returns `true` if the tween is complete (ie. the full tween has run & {{#crossLink \"Tween/loop:property\"}}{{/crossLink}}\n\t\t * is `false`).\n\t\t */\n\t\tp.setPosition = function(value, actionsMode) {\n\t\t\tif (value < 0) { value = 0; }\n\t\t\tif (actionsMode == null) { actionsMode = 1; }\n\n\t\t\t// normalize position:\n\t\t\tvar t = value;\n\t\t\tvar end = false;\n\t\t\tif (t >= this.duration) {\n\t\t\t\tif (this.loop) { t = t%this.duration; }\n\t\t\t\telse {\n\t\t\t\t\tt = this.duration;\n\t\t\t\t\tend = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (t == this._prevPos) { return end; }\n\n\n\t\t\tvar prevPos = this._prevPos;\n\t\t\tthis.position = this._prevPos = t; // set this in advance in case an action modifies position.\n\t\t\tthis._prevPosition = value;\n\n\t\t\t// handle tweens:\n\t\t\tif (this._target) {\n\t\t\t\tif (end) {\n\t\t\t\t\t// addresses problems with an ending zero length step.\n\t\t\t\t\tthis._updateTargetProps(null,1);\n\t\t\t\t} else if (this._steps.length > 0) {\n\t\t\t\t\t// find our new tween index:\n\t\t\t\t\tfor (var i=0, l=this._steps.length; i<l; i++) {\n\t\t\t\t\t\tif (this._steps[i].t > t) { break; }\n\t\t\t\t\t}\n\t\t\t\t\tvar step = this._steps[i-1];\n\t\t\t\t\tthis._updateTargetProps(step,(this._stepPosition = t-step.t)/step.d);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// run actions:\n\t\t\tif (actionsMode != 0 && this._actions.length > 0) {\n\t\t\t\tif (this._useTicks) {\n\t\t\t\t\t// only run the actions we landed on.\n\t\t\t\t\tthis._runActions(t,t);\n\t\t\t\t} else if (actionsMode == 1 && t<prevPos) {\n\t\t\t\t\tif (prevPos != this.duration) { this._runActions(prevPos, this.duration); }\n\t\t\t\t\tthis._runActions(0, t, true);\n\t\t\t\t} else {\n\t\t\t\t\tthis._runActions(prevPos, t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (end) { this.setPaused(true); }\n\n\t        this.dispatchEvent(\"change\");\n\t\t\treturn end;\n\t\t};\n\n\t\t/**\n\t\t * Advances this tween by the specified amount of time in milliseconds (or ticks if`useTicks` is `true`).\n\t\t * This is normally called automatically by the Tween engine (via {{#crossLink \"Tween/tick\"}}{{/crossLink}}), but is\n\t\t * exposed for advanced uses.\n\t\t * @method tick\n\t\t * @param {Number} delta The time to advance in milliseconds (or ticks if `useTicks` is `true`).\n\t\t */\n\t\tp.tick = function(delta) {\n\t\t\tif (this._paused) { return; }\n\t\t\tthis.setPosition(this._prevPosition+delta);\n\t\t};\n\n\t\t/**\n\t\t * Pauses or plays this tween.\n\t\t * @method setPaused\n\t\t * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\n\t\t * @return {Tween} This tween instance (for chaining calls)\n\t\t */\n\t\tp.setPaused = function(value) {\n\t\t\tif (this._paused === !!value) { return this; }\n\t\t\tthis._paused = !!value;\n\t\t\tTween._register(this, !value);\n\t\t\treturn this;\n\t\t};\n\n\t\t// tiny api (primarily for tool output):\n\t\tp.w = p.wait;\n\t\tp.t = p.to;\n\t\tp.c = p.call;\n\t\tp.s = p.set;\n\n\t\t/**\n\t\t * Returns a string representation of this object.\n\t\t * @method toString\n\t\t * @return {String} a string representation of the instance.\n\t\t */\n\t\tp.toString = function() {\n\t\t\treturn \"[Tween]\";\n\t\t};\n\n\t\t/**\n\t\t * @method clone\n\t\t * @protected\n\t\t */\n\t\tp.clone = function() {\n\t\t\tthrow(\"Tween can not be cloned.\")\n\t\t};\n\n\t// private methods:\n\t\t/**\n\t\t * @method _updateTargetProps\n\t\t * @param {Object} step\n\t\t * @param {Number} ratio\n\t\t * @protected\n\t\t */\n\t\tp._updateTargetProps = function(step, ratio) {\n\t\t\tvar p0,p1,v,v0,v1,arr;\n\t\t\tif (!step && ratio == 1) {\n\t\t\t\t// GDS: when does this run? Just at the very end? Shouldn't.\n\t\t\t\tthis.passive = false;\n\t\t\t\tp0 = p1 = this._curQueueProps;\n\t\t\t} else {\n\t\t\t\tthis.passive = !!step.v;\n\t\t\t\tif (this.passive) { return; } // don't update props.\n\t\t\t\t// apply ease to ratio.\n\t\t\t\tif (step.e) { ratio = step.e(ratio,0,1,1); }\n\t\t\t\tp0 = step.p0;\n\t\t\t\tp1 = step.p1;\n\t\t\t}\n\n\t\t\tfor (var n in this._initQueueProps) {\n\t\t\t\tif ((v0 = p0[n]) == null) { p0[n] = v0 = this._initQueueProps[n]; }\n\t\t\t\tif ((v1 = p1[n]) == null) { p1[n] = v1 = v0; }\n\t\t\t\tif (v0 == v1 || ratio == 0 || ratio == 1 || (typeof(v0) != \"number\")) {\n\t\t\t\t\t// no interpolation - either at start, end, values don't change, or the value is non-numeric.\n\t\t\t\t\tv = ratio == 1 ? v1 : v0;\n\t\t\t\t} else {\n\t\t\t\t\tv = v0+(v1-v0)*ratio;\n\t\t\t\t}\n\n\t\t\t\tvar ignore = false;\n\t\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\t\tfor (var i=0,l=arr.length;i<l;i++) {\n\t\t\t\t\t\tvar v2 = arr[i].tween(this, n, v, p0, p1, ratio, !!step&&p0==p1, !step);\n\t\t\t\t\t\tif (v2 == Tween.IGNORE) { ignore = true; }\n\t\t\t\t\t\telse { v = v2; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!ignore) { this._target[n] = v; }\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * @method _runActions\n\t\t * @param {Number} startPos\n\t\t * @param {Number} endPos\n\t\t * @param {Boolean} includeStart\n\t\t * @protected\n\t\t */\n\t\tp._runActions = function(startPos, endPos, includeStart) {\n\t\t\tvar sPos = startPos;\n\t\t\tvar ePos = endPos;\n\t\t\tvar i = -1;\n\t\t\tvar j = this._actions.length;\n\t\t\tvar k = 1;\n\t\t\tif (startPos > endPos) {\n\t\t\t\t// running backwards, flip everything:\n\t\t\t\tsPos = endPos;\n\t\t\t\tePos = startPos;\n\t\t\t\ti = j;\n\t\t\t\tj = k = -1;\n\t\t\t}\n\t\t\twhile ((i+=k) != j) {\n\t\t\t\tvar action = this._actions[i];\n\t\t\t\tvar pos = action.t;\n\t\t\t\tif (pos == ePos || (pos > sPos && pos < ePos) || (includeStart && pos == startPos) ) {\n\t\t\t\t\taction.f.apply(action.o, action.p);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method _appendQueueProps\n\t\t * @param {Object} o\n\t\t * @protected\n\t\t */\n\t\tp._appendQueueProps = function(o) {\n\t\t\tvar arr,oldValue,i, l, injectProps;\n\t\t\tfor (var n in o) {\n\t\t\t\tif (this._initQueueProps[n] === undefined) {\n\t\t\t\t\toldValue = this._target[n];\n\n\t\t\t\t\t// init plugins:\n\t\t\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\t\t\tfor (i=0,l=arr.length;i<l;i++) {\n\t\t\t\t\t\t\toldValue = arr[i].init(this, n, oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._initQueueProps[n] = this._curQueueProps[n] = (oldValue===undefined) ? null : oldValue;\n\t\t\t\t} else {\n\t\t\t\t\toldValue = this._curQueueProps[n];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var n in o) {\n\t\t\t\toldValue = this._curQueueProps[n];\n\t\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\t\tinjectProps = injectProps||{};\n\t\t\t\t\tfor (i=0, l=arr.length;i<l;i++) {\n\t\t\t\t\t\t// TODO: remove the check for .step in the next version. It's here for backwards compatibility.\n\t\t\t\t\t\tif (arr[i].step) { arr[i].step(this, n, oldValue, o[n], injectProps); }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._curQueueProps[n] = o[n];\n\t\t\t}\n\t\t\tif (injectProps) { this._appendQueueProps(injectProps); }\n\t\t\treturn this._curQueueProps;\n\t\t};\n\n\t\t/**\n\t\t * @method _cloneProps\n\t\t * @param {Object} props\n\t\t * @protected\n\t\t */\n\t\tp._cloneProps = function(props) {\n\t\t\tvar o = {};\n\t\t\tfor (var n in props) {\n\t\t\t\to[n] = props[n];\n\t\t\t}\n\t\t\treturn o;\n\t\t};\n\n\t\t/**\n\t\t * @method _addStep\n\t\t * @param {Object} o\n\t\t * @protected\n\t\t */\n\t\tp._addStep = function(o) {\n\t\t\tif (o.d > 0) {\n\t\t\t\tthis._steps.push(o);\n\t\t\t\to.t = this.duration;\n\t\t\t\tthis.duration += o.d;\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * @method _addAction\n\t\t * @param {Object} o\n\t\t * @protected\n\t\t */\n\t\tp._addAction = function(o) {\n\t\t\to.t = this.duration;\n\t\t\tthis._actions.push(o);\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t * @method _set\n\t\t * @param {Object} props\n\t\t * @param {Object} o\n\t\t * @protected\n\t\t */\n\t\tp._set = function(props, o) {\n\t\t\tfor (var n in props) {\n\t\t\t\to[n] = props[n];\n\t\t\t}\n\t\t};\n\n\t\tcreatejs.Tween = createjs.promote(Tween, \"EventDispatcher\");\n\n\t}());\n\n\t//##############################################################################\n\t// Timeline.js\n\t//##############################################################################\n\n\t(function() {\n\t\t\n\n\t// constructor\t\n\t\t/**\n\t\t * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\n\t\t * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\n\t\t * @class Timeline\n\t\t * @param {Array} tweens An array of Tweens to add to this timeline. See {{#crossLink \"Timeline/addTween\"}}{{/crossLink}}\n\t\t * for more info.\n\t\t * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n\t\t * See {{#crossLink \"Timeline/setLabels\"}}{{/crossLink}}\n\t\t * for details.\n\t\t * @param {Object} props The configuration properties to apply to this tween instance (ex. `{loop:true}`). All properties\n\t\t * default to false. Supported props are:<UL>\n\t\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t\t *    <LI> ignoreGlobalPause: sets the ignoreGlobalPause property on this tween.</LI>\n\t\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t\t *    <LI> position: indicates the initial position for this timeline.</LI>\n\t\t *    <LI> onChange: specifies a listener to add for the {{#crossLink \"Timeline/change:event\"}}{{/crossLink}} event.</LI>\n\t\t * </UL>\n\t\t * @extends EventDispatcher\n\t\t * @constructor\n\t\t **/\n\t\tfunction Timeline(tweens, labels, props) {\n\t\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties:\n\t\t\t/**\n\t\t\t * Causes this timeline to continue playing when a global pause is active.\n\t\t\t * @property ignoreGlobalPause\n\t\t\t * @type Boolean\n\t\t\t **/\n\t\t\tthis.ignoreGlobalPause = false;\n\n\t\t\t/**\n\t\t\t * The total duration of this timeline in milliseconds (or ticks if `useTicks `is `true`). This value is usually\n\t\t\t * automatically updated as you modify the timeline. See {{#crossLink \"Timeline/updateDuration\"}}{{/crossLink}}\n\t\t\t * for more information.\n\t\t\t * @property duration\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.duration = 0;\n\n\t\t\t/**\n\t\t\t * If true, the timeline will loop when it reaches the end. Can be set via the props param.\n\t\t\t * @property loop\n\t\t\t * @type Boolean\n\t\t\t **/\n\t\t\tthis.loop = false;\n\n\t\t\t/**\n\t\t\t * The current normalized position of the timeline. This will always be a value between 0 and\n\t\t\t * {{#crossLink \"Timeline/duration:property\"}}{{/crossLink}}.\n\t\t\t * Changing this property directly will have no effect.\n\t\t\t * @property position\n\t\t\t * @type Object\n\t\t\t * @readonly\n\t\t\t **/\n\t\t\tthis.position = null;\n\n\t\t\t// private properties:\n\t\t\t/**\n\t\t\t * @property _paused\n\t\t\t * @type Boolean\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._paused = false;\n\n\t\t\t/**\n\t\t\t * @property _tweens\n\t\t\t * @type Array[Tween]\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._tweens = [];\n\n\t\t\t/**\n\t\t\t * @property _labels\n\t\t\t * @type Object\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._labels = null;\n\n\t\t\t/**\n\t\t\t * @property _labelList\n\t\t\t * @type Array[Object]\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._labelList = null;\n\n\t\t\t/**\n\t\t\t * @property _prevPosition\n\t\t\t * @type Number\n\t\t\t * @default 0\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._prevPosition = 0;\n\n\t\t\t/**\n\t\t\t * @property _prevPos\n\t\t\t * @type Number\n\t\t\t * @default -1\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._prevPos = -1;\n\n\t\t\t/**\n\t\t\t * @property _useTicks\n\t\t\t * @type Boolean\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t **/\n\t\t\tthis._useTicks = false;\n\t\t\t\n\t\t\t/**\n\t\t\t * Indicates whether the timeline is currently registered with Tween.\n\t\t\t * @property _registered\n\t\t\t * @type {boolean}\n\t\t\t * @default false\n\t\t\t * @protected\n\t\t\t */\n\t\t\tthis._registered = false;\n\n\n\t\t\tif (props) {\n\t\t\t\tthis._useTicks = props.useTicks;\n\t\t\t\tthis.loop = props.loop;\n\t\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\n\t\t\t\tprops.onChange&&this.addEventListener(\"change\", props.onChange);\n\t\t\t}\n\t\t\tif (tweens) { this.addTween.apply(this, tweens); }\n\t\t\tthis.setLabels(labels);\n\t\t\tif (props&&props.paused) { this._paused=true; }\n\t\t\telse { createjs.Tween._register(this,true); }\n\t\t\tif (props&&props.position!=null) { this.setPosition(props.position, createjs.Tween.NONE); }\n\t\t\t\n\t\t}\t\t\n\t\tvar p = createjs.extend(Timeline, createjs.EventDispatcher);\n\n\t\t// TODO: deprecated\n\t\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\t\n\t// events:\n\t\t/**\n\t\t * Called whenever the timeline's position changes.\n\t\t * @event change\n\t\t * @since 0.5.0\n\t\t **/\n\n\n\t// public methods:\n\t\t/**\n\t\t * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\n\t\t * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\n\t\t * unexpected behaviour.\n\t\t * @method addTween\n\t\t * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\n\t\t * @return {Tween} The first tween that was passed in.\n\t\t **/\n\t\tp.addTween = function(tween) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tvar l = arguments.length;\n\t\t\tif (l > 1) {\n\t\t\t\tfor (var i=0; i<l; i++) { this.addTween(arguments$1[i]); }\n\t\t\t\treturn arguments[0];\n\t\t\t} else if (l == 0) { return null; }\n\t\t\tthis.removeTween(tween);\n\t\t\tthis._tweens.push(tween);\n\t\t\ttween.setPaused(true);\n\t\t\ttween._paused = false;\n\t\t\ttween._useTicks = this._useTicks;\n\t\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\n\t\t\tif (this._prevPos >= 0) { tween.setPosition(this._prevPos, createjs.Tween.NONE); }\n\t\t\treturn tween;\n\t\t};\n\n\t\t/**\n\t\t * Removes one or more tweens from this timeline.\n\t\t * @method removeTween\n\t\t * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\n\t\t * @return Boolean Returns `true` if all of the tweens were successfully removed.\n\t\t **/\n\t\tp.removeTween = function(tween) {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tvar l = arguments.length;\n\t\t\tif (l > 1) {\n\t\t\t\tvar good = true;\n\t\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeTween(arguments$1[i]); }\n\t\t\t\treturn good;\n\t\t\t} else if (l == 0) { return false; }\n\n\t\t\tvar tweens = this._tweens;\n\t\t\tvar i = tweens.length;\n\t\t\twhile (i--) {\n\t\t\t\tif (tweens[i] == tween) {\n\t\t\t\t\ttweens.splice(i, 1);\n\t\t\t\t\tif (tween.duration >= this.duration) { this.updateDuration(); }\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n\t\t * @method addLabel\n\t\t * @param {String} label The label name.\n\t\t * @param {Number} position The position this label represents.\n\t\t **/\n\t\tp.addLabel = function(label, position) {\n\t\t\tthis._labels[label] = position;\n\t\t\tvar list = this._labelList;\n\t\t\tif (list) {\n\t\t\t\tfor (var i= 0,l=list.length; i<l; i++) { if (position < list[i].position) { break; } }\n\t\t\t\tlist.splice(i, 0, {label:label, position:position});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\n\t\t * @method setLabels\n\t\t * @param {Object} o An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\n\t\t * in the form `{labelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\n\t\t **/\n\t\tp.setLabels = function(o) {\n\t\t\tthis._labels = o ?  o : {};\n\t\t};\n\n\t\t/**\n\t\t * Returns a sorted list of the labels defined on this timeline.\n\t\t * @method getLabels\n\t\t * @return {Array[Object]} A sorted array of objects with label and position properties.\n\t\t **/\n\t\tp.getLabels = function() {\n\t\t\tvar list = this._labelList;\n\t\t\tif (!list) {\n\t\t\t\tlist = this._labelList = [];\n\t\t\t\tvar labels = this._labels;\n\t\t\t\tfor (var n in labels) {\n\t\t\t\t\tlist.push({label:n, position:labels[n]});\n\t\t\t\t}\n\t\t\t\tlist.sort(function (a,b) { return a.position- b.position; });\n\t\t\t}\n\t\t\treturn list;\n\t\t};\n\n\t\t/**\n\t\t * Returns the name of the label on or immediately before the current position. For example, given a timeline with\n\t\t * two labels, \"first\" on frame index 4, and \"second\" on frame 8, getCurrentLabel would return:\n\t\t * <UL>\n\t\t * \t\t<LI>null if the current position is 2.</LI>\n\t\t * \t\t<LI>\"first\" if the current position is 4.</LI>\n\t\t * \t\t<LI>\"first\" if the current position is 7.</LI>\n\t\t * \t\t<LI>\"second\" if the current position is 15.</LI>\n\t\t * </UL>\n\t\t * @method getCurrentLabel\n\t\t * @return {String} The name of the current label or null if there is no label\n\t\t **/\n\t\tp.getCurrentLabel = function() {\n\t\t\tvar labels = this.getLabels();\n\t\t\tvar pos = this.position;\n\t\t\tvar l = labels.length;\n\t\t\tif (l) {\n\t\t\t\tfor (var i = 0; i<l; i++) { if (pos < labels[i].position) { break; } }\n\t\t\t\treturn (i==0) ? null : labels[i-1].label;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Unpauses this timeline and jumps to the specified position or label.\n\t\t * @method gotoAndPlay\n\t\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\n\t\t * or label to jump to.\n\t\t **/\n\t\tp.gotoAndPlay = function(positionOrLabel) {\n\t\t\tthis.setPaused(false);\n\t\t\tthis._goto(positionOrLabel);\n\t\t};\n\n\t\t/**\n\t\t * Pauses this timeline and jumps to the specified position or label.\n\t\t * @method gotoAndStop\n\t\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\n\t\t * to jump to.\n\t\t **/\n\t\tp.gotoAndStop = function(positionOrLabel) {\n\t\t\tthis.setPaused(true);\n\t\t\tthis._goto(positionOrLabel);\n\t\t};\n\n\t\t/**\n\t\t * Advances the timeline to the specified position.\n\t\t * @method setPosition\n\t\t * @param {Number} value The position to seek to in milliseconds (or ticks if `useTicks` is `true`).\n\t\t * @param {Number} [actionsMode] parameter specifying how actions are handled. See the Tween {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}\n\t\t * method for more details.\n\t\t * @return {Boolean} Returns `true` if the timeline is complete (ie. the full timeline has run & {{#crossLink \"Timeline/loop:property\"}}{{/crossLink}}\n\t\t * is `false`).\n\t\t **/\n\t\tp.setPosition = function(value, actionsMode) {\n\t\t\tvar t = this._calcPosition(value);\n\t\t\tvar end = !this.loop && value >= this.duration;\n\t\t\tif (t == this._prevPos) { return end; }\n\t\t\tthis._prevPosition = value;\n\t\t\tthis.position = this._prevPos = t; // in case an action changes the current frame.\n\t\t\tfor (var i=0, l=this._tweens.length; i<l; i++) {\n\t\t\t\tthis._tweens[i].setPosition(t, actionsMode);\n\t\t\t\tif (t != this._prevPos) { return false; } // an action changed this timeline's position.\n\t\t\t}\n\t\t\tif (end) { this.setPaused(true); }\n\t\t\tthis.dispatchEvent(\"change\");\n\t\t\treturn end;\n\t\t};\n\n\t\t/**\n\t\t * Pauses or plays this timeline.\n\t\t * @method setPaused\n\t\t * @param {Boolean} value Indicates whether the tween should be paused (`true`) or played (`false`).\n\t\t **/\n\t\tp.setPaused = function(value) {\n\t\t\tthis._paused = !!value; \n\t\t\tcreatejs.Tween._register(this, !value);\n\t\t};\n\n\t\t/**\n\t\t * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\n\t\t * but this method is useful if you modify a tween after it was added to the timeline.\n\t\t * @method updateDuration\n\t\t **/\n\t\tp.updateDuration = function() {\n\t\t\tthis.duration = 0;\n\t\t\tfor (var i=0,l=this._tweens.length; i<l; i++) {\n\t\t\t\tvar tween = this._tweens[i];\n\t\t\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Advances this timeline by the specified amount of time in milliseconds (or ticks if `useTicks` is `true`).\n\t\t * This is normally called automatically by the Tween engine (via the {{#crossLink \"Tween/tick:event\"}}{{/crossLink}}\n\t\t * event), but is exposed for advanced uses.\n\t\t * @method tick\n\t\t * @param {Number} delta The time to advance in milliseconds (or ticks if useTicks is true).\n\t\t **/\n\t\tp.tick = function(delta) {\n\t\t\tthis.setPosition(this._prevPosition+delta);\n\t\t};\n\n\t\t/**\n\t\t * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\n\t\t * corresponding frame label will be returned, or `null` if a matching label is not defined.\n\t\t * @method resolve\n\t\t * @param {String|Number} positionOrLabel A numeric position value or label string.\n\t\t **/\n\t\tp.resolve = function(positionOrLabel) {\n\t\t\tvar pos = Number(positionOrLabel);\n\t\t\tif (isNaN(pos)) { pos = this._labels[positionOrLabel]; }\n\t\t\treturn pos;\n\t\t};\n\n\t\t/**\n\t\t* Returns a string representation of this object.\n\t\t* @method toString\n\t\t* @return {String} a string representation of the instance.\n\t\t**/\n\t\tp.toString = function() {\n\t\t\treturn \"[Timeline]\";\n\t\t};\n\n\t\t/**\n\t\t * @method clone\n\t\t * @protected\n\t\t **/\n\t\tp.clone = function() {\n\t\t\tthrow(\"Timeline can not be cloned.\")\n\t\t};\n\n\t// private methods:\n\t\t/**\n\t\t * @method _goto\n\t\t * @param {String | Number} positionOrLabel\n\t\t * @protected\n\t\t **/\n\t\tp._goto = function(positionOrLabel) {\n\t\t\tvar pos = this.resolve(positionOrLabel);\n\t\t\tif (pos != null) { this.setPosition(pos); }\n\t\t};\n\t\t\n\t\t/**\n\t\t * @method _calcPosition\n\t\t * @param {Number} value\n\t\t * @return {Number}\n\t\t * @protected\n\t\t **/\n\t\tp._calcPosition = function(value) {\n\t\t\tif (value < 0) { return 0; }\n\t\t\tif (value < this.duration) { return value; }\n\t\t\treturn this.loop ? value%this.duration : this.duration;\n\t\t};\n\n\t\tcreatejs.Timeline = createjs.promote(Timeline, \"EventDispatcher\");\n\n\t}());\n\n\t//##############################################################################\n\t// Ease.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\n\t\t * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\n\t\t *\n\t\t * Most methods on Ease can be passed directly as easing functions:\n\t\t *\n\t\t *      Tween.get(target).to({x:100}, 500, Ease.linear);\n\t\t *\n\t\t * However, methods beginning with \"get\" will return an easing function based on parameter values:\n\t\t *\n\t\t *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\n\t\t *\n\t\t * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\n\t\t * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\n\t\t *\n\t\t * <em>Equations derived from work by Robert Penner.</em>\n\t\t * @class Ease\n\t\t * @static\n\t\t **/\n\t\tfunction Ease() {\n\t\t\tthrow \"Ease cannot be instantiated.\";\n\t\t}\n\n\n\t// static methods and properties\n\t\t/**\n\t\t * @method linear\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.linear = function(t) { return t; };\n\n\t\t/**\n\t\t * Identical to linear.\n\t\t * @method none\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.none = Ease.linear;\n\n\t\t/**\n\t\t * Mimics the simple -100 to 100 easing in Flash Pro.\n\t\t * @method get\n\t\t * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.get = function(amount) {\n\t\t\tif (amount < -1) { amount = -1; }\n\t\t\tif (amount > 1) { amount = 1; }\n\t\t\treturn function(t) {\n\t\t\t\tif (amount==0) { return t; }\n\t\t\t\tif (amount<0) { return t*(t*-amount+1+amount); }\n\t\t\t\treturn t*((2-t)*amount+(1-amount));\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Configurable exponential ease.\n\t\t * @method getPowIn\n\t\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getPowIn = function(pow) {\n\t\t\treturn function(t) {\n\t\t\t\treturn Math.pow(t,pow);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Configurable exponential ease.\n\t\t * @method getPowOut\n\t\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getPowOut = function(pow) {\n\t\t\treturn function(t) {\n\t\t\t\treturn 1-Math.pow(1-t,pow);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Configurable exponential ease.\n\t\t * @method getPowInOut\n\t\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getPowInOut = function(pow) {\n\t\t\treturn function(t) {\n\t\t\t\tif ((t*=2)<1) { return 0.5*Math.pow(t,pow); }\n\t\t\t\treturn 1-0.5*Math.abs(Math.pow(2-t,pow));\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * @method quadIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quadIn = Ease.getPowIn(2);\n\t\t/**\n\t\t * @method quadOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quadOut = Ease.getPowOut(2);\n\t\t/**\n\t\t * @method quadInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quadInOut = Ease.getPowInOut(2);\n\n\t\t/**\n\t\t * @method cubicIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.cubicIn = Ease.getPowIn(3);\n\t\t/**\n\t\t * @method cubicOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.cubicOut = Ease.getPowOut(3);\n\t\t/**\n\t\t * @method cubicInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.cubicInOut = Ease.getPowInOut(3);\n\n\t\t/**\n\t\t * @method quartIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quartIn = Ease.getPowIn(4);\n\t\t/**\n\t\t * @method quartOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quartOut = Ease.getPowOut(4);\n\t\t/**\n\t\t * @method quartInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quartInOut = Ease.getPowInOut(4);\n\n\t\t/**\n\t\t * @method quintIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quintIn = Ease.getPowIn(5);\n\t\t/**\n\t\t * @method quintOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quintOut = Ease.getPowOut(5);\n\t\t/**\n\t\t * @method quintInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.quintInOut = Ease.getPowInOut(5);\n\n\t\t/**\n\t\t * @method sineIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.sineIn = function(t) {\n\t\t\treturn 1-Math.cos(t*Math.PI/2);\n\t\t};\n\n\t\t/**\n\t\t * @method sineOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.sineOut = function(t) {\n\t\t\treturn Math.sin(t*Math.PI/2);\n\t\t};\n\n\t\t/**\n\t\t * @method sineInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.sineInOut = function(t) {\n\t\t\treturn -0.5*(Math.cos(Math.PI*t) - 1);\n\t\t};\n\n\t\t/**\n\t\t * Configurable \"back in\" ease.\n\t\t * @method getBackIn\n\t\t * @param {Number} amount The strength of the ease.\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getBackIn = function(amount) {\n\t\t\treturn function(t) {\n\t\t\t\treturn t*t*((amount+1)*t-amount);\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method backIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.backIn = Ease.getBackIn(1.7);\n\n\t\t/**\n\t\t * Configurable \"back out\" ease.\n\t\t * @method getBackOut\n\t\t * @param {Number} amount The strength of the ease.\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getBackOut = function(amount) {\n\t\t\treturn function(t) {\n\t\t\t\treturn (--t*t*((amount+1)*t + amount) + 1);\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method backOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.backOut = Ease.getBackOut(1.7);\n\n\t\t/**\n\t\t * Configurable \"back in out\" ease.\n\t\t * @method getBackInOut\n\t\t * @param {Number} amount The strength of the ease.\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getBackInOut = function(amount) {\n\t\t\tamount*=1.525;\n\t\t\treturn function(t) {\n\t\t\t\tif ((t*=2)<1) { return 0.5*(t*t*((amount+1)*t-amount)); }\n\t\t\t\treturn 0.5*((t-=2)*t*((amount+1)*t+amount)+2);\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method backInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.backInOut = Ease.getBackInOut(1.7);\n\n\t\t/**\n\t\t * @method circIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.circIn = function(t) {\n\t\t\treturn -(Math.sqrt(1-t*t)- 1);\n\t\t};\n\n\t\t/**\n\t\t * @method circOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.circOut = function(t) {\n\t\t\treturn Math.sqrt(1-(--t)*t);\n\t\t};\n\n\t\t/**\n\t\t * @method circInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.circInOut = function(t) {\n\t\t\tif ((t*=2) < 1) { return -0.5*(Math.sqrt(1-t*t)-1); }\n\t\t\treturn 0.5*(Math.sqrt(1-(t-=2)*t)+1);\n\t\t};\n\n\t\t/**\n\t\t * @method bounceIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.bounceIn = function(t) {\n\t\t\treturn 1-Ease.bounceOut(1-t);\n\t\t};\n\n\t\t/**\n\t\t * @method bounceOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.bounceOut = function(t) {\n\t\t\tif (t < 1/2.75) {\n\t\t\t\treturn (7.5625*t*t);\n\t\t\t} else if (t < 2/2.75) {\n\t\t\t\treturn (7.5625*(t-=1.5/2.75)*t+0.75);\n\t\t\t} else if (t < 2.5/2.75) {\n\t\t\t\treturn (7.5625*(t-=2.25/2.75)*t+0.9375);\n\t\t\t} else {\n\t\t\t\treturn (7.5625*(t-=2.625/2.75)*t +0.984375);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method bounceInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.bounceInOut = function(t) {\n\t\t\tif (t<0.5) { return Ease.bounceIn (t*2) * .5; }\n\t\t\treturn Ease.bounceOut(t*2-1)*0.5+0.5;\n\t\t};\n\n\t\t/**\n\t\t * Configurable elastic ease.\n\t\t * @method getElasticIn\n\t\t * @param {Number} amplitude\n\t\t * @param {Number} period\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getElasticIn = function(amplitude,period) {\n\t\t\tvar pi2 = Math.PI*2;\n\t\t\treturn function(t) {\n\t\t\t\tif (t==0 || t==1) { return t; }\n\t\t\t\tvar s = period/pi2*Math.asin(1/amplitude);\n\t\t\t\treturn -(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period));\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method elasticIn\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.elasticIn = Ease.getElasticIn(1,0.3);\n\n\t\t/**\n\t\t * Configurable elastic ease.\n\t\t * @method getElasticOut\n\t\t * @param {Number} amplitude\n\t\t * @param {Number} period\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getElasticOut = function(amplitude,period) {\n\t\t\tvar pi2 = Math.PI*2;\n\t\t\treturn function(t) {\n\t\t\t\tif (t==0 || t==1) { return t; }\n\t\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\t\treturn (amplitude*Math.pow(2,-10*t)*Math.sin((t-s)*pi2/period )+1);\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method elasticOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.elasticOut = Ease.getElasticOut(1,0.3);\n\n\t\t/**\n\t\t * Configurable elastic ease.\n\t\t * @method getElasticInOut\n\t\t * @param {Number} amplitude\n\t\t * @param {Number} period\n\t\t * @static\n\t\t * @return {Function}\n\t\t **/\n\t\tEase.getElasticInOut = function(amplitude,period) {\n\t\t\tvar pi2 = Math.PI*2;\n\t\t\treturn function(t) {\n\t\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\t\tif ((t*=2)<1) { return -0.5*(amplitude*Math.pow(2,10*(t-=1))*Math.sin( (t-s)*pi2/period )); }\n\t\t\t\treturn amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*pi2/period)*0.5+1;\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * @method elasticInOut\n\t\t * @param {Number} t\n\t\t * @static\n\t\t * @return {Number}\n\t\t **/\n\t\tEase.elasticInOut = Ease.getElasticInOut(1,0.3*1.5);\n\n\t\tcreatejs.Ease = Ease;\n\n\t}());\n\n\t//##############################################################################\n\t// MotionGuidePlugin.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * A TweenJS plugin for working with motion guides.\n\t\t *\n\t\t * To use, install the plugin after TweenJS has loaded. Next tween the 'guide' property with an object as detailed below.\n\t\t *\n\t\t *       createjs.MotionGuidePlugin.install();\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      // Using a Motion Guide\n\t\t *\t    createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\n\t\t *\t    // Visualizing the line\n\t\t *\t    graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\n\t\t *\n\t\t * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\n\t\t * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\n\t\t *      <LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\n\t\t *      <LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\n\t\t *      <LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\n\t\t *      <LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\n\t\t *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\n\t\t *      \t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\n\t\t *      \t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including flash like behaviour</LI>\n\t\t * \t\t</UL></LI>\n\t\t * </UL>\n\t\t * Guide objects should not be shared between tweens even if all properties are identical, the library stores\n\t\t * information on these objects in the background and sharing them can cause unexpected behaviour. Values\n\t\t * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\n\t\t *\n\t\t * @class MotionGuidePlugin\n\t\t * @constructor\n\t\t **/\n\t\tfunction MotionGuidePlugin() {\n\t\t\tthrow(\"MotionGuidePlugin cannot be instantiated.\")\n\t\t}\n\n\t// static properties:\n\t\t/**\n\t\t * @property priority\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.priority = 0; // high priority, should run sooner\n\n\t\t/**\n\t\t * @property temporary variable storage\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\tMotionGuidePlugin._rotOffS;\n\t\t/**\n\t\t * @property temporary variable storage\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\tMotionGuidePlugin._rotOffE;\n\t\t/**\n\t\t * @property temporary variable storage\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\tMotionGuidePlugin._rotNormS;\n\t\t/**\n\t\t * @property temporary variable storage\n\t\t * @private\n\t\t * @static\n\t\t */\n\t\tMotionGuidePlugin._rotNormE;\n\n\n\t// static methods\n\t\t/**\n\t\t * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\n\t\t * @method install\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.install = function() {\n\t\t\tcreatejs.Tween.installPlugin(MotionGuidePlugin, [\"guide\", \"x\", \"y\", \"rotation\"]);\n\t\t\treturn createjs.Tween.IGNORE;\n\t\t};\n\n\t\t/**\n\t\t * @method init\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.init = function(tween, prop, value) {\n\t\t\tvar target = tween.target;\n\t\t\tif(!target.hasOwnProperty(\"x\")){ target.x = 0; }\n\t\t\tif(!target.hasOwnProperty(\"y\")){ target.y = 0; }\n\t\t\tif(!target.hasOwnProperty(\"rotation\")){ target.rotation = 0; }\n\n\t\t\tif(prop==\"rotation\"){ tween.__needsRot = true; }\n\t\t\treturn prop==\"guide\"?null:value;\n\t\t};\n\n\t\t/**\n\t\t * @method step\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.step = function(tween, prop, startValue, endValue, injectProps) {\n\t\t\t// other props\n\t\t\tif(prop == \"rotation\"){\n\t\t\t\ttween.__rotGlobalS = startValue;\n\t\t\t\ttween.__rotGlobalE = endValue;\n\t\t\t\tMotionGuidePlugin.testRotData(tween, injectProps);\n\t\t\t}\n\t\t\tif(prop != \"guide\"){ return endValue; }\n\n\t\t\t// guide only information - Start -\n\t\t\tvar temp, data = endValue;\n\t\t\tif(!data.hasOwnProperty(\"path\")){ data.path = []; }\n\t\t\tvar path = data.path;\n\t\t\tif(!data.hasOwnProperty(\"end\")){ data.end = 1; }\n\t\t\tif(!data.hasOwnProperty(\"start\")){\n\t\t\t\tdata.start = (startValue&&startValue.hasOwnProperty(\"end\")&&startValue.path===path)?startValue.end:0;\n\t\t\t}\n\n\t\t\t// Figure out subline information\n\t\t\tif(data.hasOwnProperty(\"_segments\") && data._length){ return endValue; }\n\t\t\tvar l = path.length;\n\t\t\tvar accuracy = 10;\t\t// Adjust to improve line following precision but sacrifice performance (# of seg)\n\t\t\tif(l >= 6 && (l-2) % 4 == 0){\t// Enough points && contains correct number per entry ignoring start\n\t\t\t\tdata._segments = [];\n\t\t\t\tdata._length = 0;\n\t\t\t\tfor(var i=2; i<l; i+=4){\n\t\t\t\t\tvar sx = path[i-2], sy = path[i-1];\n\t\t\t\t\tvar cx = path[i+0], cy = path[i+1];\n\t\t\t\t\tvar ex = path[i+2], ey = path[i+3];\n\t\t\t\t\tvar oldX = sx, oldY = sy;\n\t\t\t\t\tvar tempX, tempY, total = 0;\n\t\t\t\t\tvar sublines = [];\n\t\t\t\t\tfor(var j=1; j<=accuracy; j++){\n\t\t\t\t\t\tvar t = j/accuracy;\n\t\t\t\t\t\tvar inv = 1 - t;\n\t\t\t\t\t\ttempX = inv*inv * sx + 2 * inv * t * cx + t*t * ex;\n\t\t\t\t\t\ttempY = inv*inv * sy + 2 * inv * t * cy + t*t * ey;\n\t\t\t\t\t\ttotal += sublines[sublines.push(Math.sqrt((temp=tempX-oldX)*temp + (temp=tempY-oldY)*temp))-1];\n\t\t\t\t\t\toldX = tempX;\n\t\t\t\t\t\toldY = tempY;\n\t\t\t\t\t}\n\t\t\t\t\tdata._segments.push(total);\n\t\t\t\t\tdata._segments.push(sublines);\n\t\t\t\t\tdata._length += total;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow(\"invalid 'path' data, please see documentation for valid paths\");\n\t\t\t}\n\n\t\t\t// Setup x/y tweens\n\t\t\ttemp = data.orient;\n\t\t\tdata.orient = true;\n\t\t\tvar o = {};\n\t\t\tMotionGuidePlugin.calc(data, data.start, o);\n\t\t\ttween.__rotPathS = Number(o.rotation.toFixed(5));\n\t\t\tMotionGuidePlugin.calc(data, data.end, o);\n\t\t\ttween.__rotPathE = Number(o.rotation.toFixed(5));\n\t\t\tdata.orient = false;\t//here and now we don't know if we need to\n\t\t\tMotionGuidePlugin.calc(data, data.end, injectProps);\n\t\t\tdata.orient = temp;\n\n\t\t\t// Setup rotation properties\n\t\t\tif(!data.orient){ return endValue; }\n\t\t\ttween.__guideData = data;\n\t\t\tMotionGuidePlugin.testRotData(tween, injectProps);\n\t\t\treturn endValue;\n\t\t};\n\n\t\t/**\n\t\t * @method testRotData\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.testRotData = function(tween, injectProps){\n\n\t\t\t// no rotation informat? if we need it come back, if we don't use 0 & ensure we have guide data\n\t\t\tif(tween.__rotGlobalS === undefined || tween.__rotGlobalE === undefined){\n\t\t\t\tif(tween.__needsRot){ return; }\n\t\t\t\tif(tween._curQueueProps.rotation !== undefined){\n\t\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween._curQueueProps.rotation;\n\t\t\t\t} else {\n\t\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = injectProps.rotation = tween.target.rotation || 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(tween.__guideData === undefined){ return; }\n\n\t\t\t// Process rotation properties\n\t\t\tvar data = tween.__guideData;\n\t\t\tvar rotGlobalD = tween.__rotGlobalE - tween.__rotGlobalS;\n\t\t\tvar rotPathD = tween.__rotPathE - tween.__rotPathS;\n\t\t\tvar rot = rotGlobalD - rotPathD;\n\n\t\t\tif(data.orient == \"auto\"){\n\t\t\t\tif(rot > 180){\t\t\trot -= 360; }\n\t\t\t\telse if(rot < -180){\trot += 360; }\n\n\t\t\t} else if(data.orient == \"cw\"){\n\t\t\t\twhile(rot < 0){ rot += 360; }\n\t\t\t\tif(rot == 0 && rotGlobalD > 0 && rotGlobalD != 180){ rot += 360; }\n\n\t\t\t} else if(data.orient == \"ccw\"){\n\t\t\t\trot = rotGlobalD - ((rotPathD > 180)?(360-rotPathD):(rotPathD));\t// sign flipping on path\n\t\t\t\twhile(rot > 0){ rot -= 360; }\n\t\t\t\tif(rot == 0 && rotGlobalD < 0 && rotGlobalD != -180){ rot -= 360; }\n\t\t\t}\n\n\t\t\tdata.rotDelta = rot;\n\t\t\tdata.rotOffS = tween.__rotGlobalS - tween.__rotPathS;\n\n\t\t\t// reset\n\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween.__guideData = tween.__needsRot = undefined;\n\t\t};\n\n\t\t/**\n\t\t * @method tween\n\t\t * @protected\n\t\t * @static\n\t\t **/\n\t\tMotionGuidePlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\n\t\t\tvar data = endValues.guide;\n\t\t\tif(data == undefined || data === startValues.guide){ return value; }\n\t\t\tif(data.lastRatio != ratio){\n\t\t\t\t// first time through so calculate what I need to\n\t\t\t\tvar t = ((data.end-data.start)*(wait?data.end:ratio)+data.start);\n\t\t\t\tMotionGuidePlugin.calc(data, t, tween.target);\n\t\t\t\tswitch(data.orient){\n\t\t\t\t\tcase \"cw\":\t\t// mix in the original rotation\n\t\t\t\t\tcase \"ccw\":\n\t\t\t\t\tcase \"auto\": tween.target.rotation += data.rotOffS + data.rotDelta*ratio; break;\n\t\t\t\t\tcase \"fixed\":\t// follow fixed behaviour to solve potential issues\n\t\t\t\t\tdefault: tween.target.rotation += data.rotOffS; break;\n\t\t\t\t}\n\t\t\t\tdata.lastRatio = ratio;\n\t\t\t}\n\t\t\tif(prop == \"rotation\" && ((!data.orient) || data.orient == \"false\")){ return value; }\n\t\t\treturn tween.target[prop];\n\t\t};\n\n\t\t/**\n\t\t * Determine the appropriate x/y/rotation information about a path for a given ratio along the path.\n\t\t * Assumes a path object with all optional parameters specified.\n\t\t * @param data Data object you would pass to the \"guide:\" property in a Tween\n\t\t * @param ratio 0-1 Distance along path, values outside 0-1 are \"best guess\"\n\t\t * @param target Object to copy the results onto, will use a new object if not supplied.\n\t\t * @return {Object} The target object or a new object w/ the tweened properties\n\t\t * @static\n\t\t */\n\t\tMotionGuidePlugin.calc = function(data, ratio, target) {\n\t\t\tif(data._segments == undefined){ throw(\"Missing critical pre-calculated information, please file a bug\"); }\n\t\t\tif(target == undefined){ target = {x:0, y:0, rotation:0}; }\n\t\t\tvar seg = data._segments;\n\t\t\tvar path = data.path;\n\n\t\t\t// find segment\n\t\t\tvar pos = data._length * ratio;\n\t\t\tvar cap = seg.length - 2;\n\t\t\tvar n = 0;\n\t\t\twhile(pos > seg[n] && n < cap){\n\t\t\t\tpos -= seg[n];\n\t\t\t\tn+=2;\n\t\t\t}\n\n\t\t\t// find subline\n\t\t\tvar sublines = seg[n+1];\n\t\t\tvar i = 0;\n\t\t\tcap = sublines.length-1;\n\t\t\twhile(pos > sublines[i] && i < cap){\n\t\t\t\tpos -= sublines[i];\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tvar t = (i/++cap)+(pos/(cap*sublines[i]));\n\n\t\t\t// find x/y\n\t\t\tn = (n*2)+2;\n\t\t\tvar inv = 1 - t;\n\t\t\ttarget.x = inv*inv * path[n-2] + 2 * inv * t * path[n+0] + t*t * path[n+2];\n\t\t\ttarget.y = inv*inv * path[n-1] + 2 * inv * t * path[n+1] + t*t * path[n+3];\n\n\t\t\t// orientation\n\t\t\tif(data.orient){\n\t\t\t\ttarget.rotation = 57.2957795 * Math.atan2(\n\t\t\t\t\t(path[n+1]-path[n-1])*inv + (path[n+3]-path[n+1])*t,\n\t\t\t\t\t(path[n+0]-path[n-2])*inv + (path[n+2]-path[n+0])*t);\n\t\t\t}\n\n\t\t\treturn target;\n\t\t};\n\n\t\tcreatejs.MotionGuidePlugin = MotionGuidePlugin;\n\n\t}());\n\n\t//##############################################################################\n\t// version.js\n\t//##############################################################################\n\n\t(function() {\n\n\t\t/**\n\t\t * Static class holding library specific information such as the version and buildDate of\n\t\t * the library.\n\t\t * @class TweenJS\n\t\t **/\n\t\tvar s = createjs.TweenJS = createjs.TweenJS || {};\n\n\t\t/**\n\t\t * The version string for this release.\n\t\t * @property version\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t\t/**\n\t\t * The build date for this release in UTC format.\n\t\t * @property buildDate\n\t\t * @type String\n\t\t * @static\n\t\t **/\n\t\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n\t})();\n\t{ module.exports = commonjsGlobal.createjs; } \n} (createjs, createjs.exports));\n\nvar createjsExports = createjs.exports;\n\n// convert the given global Stage coordinates to ROS coordinates\ncreatejsExports.Stage.prototype.globalToRos = function(x, y) {\n  var rosX = (x - this.x) / this.scaleX;\n  var rosY = (this.y - y) / this.scaleY;\n  return new ROSLIB.Vector3({\n    x : rosX,\n    y : rosY\n  });\n};\n\n// convert the given ROS coordinates to global Stage coordinates\ncreatejsExports.Stage.prototype.rosToGlobal = function(pos) {\n  var x = pos.x * this.scaleX + this.x;\n  var y = pos.y * this.scaleY + this.y;\n  return {\n    x : x,\n    y : y\n  };\n};\n\n// convert a ROS quaternion to theta in degrees\ncreatejsExports.Stage.prototype.rosQuaternionToGlobalTheta = function(orientation) {\n  // See https://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Rotation_matrices\n  // here we use [x y z] = R * [1 0 0]\n  var q0 = orientation.w;\n  var q1 = orientation.x;\n  var q2 = orientation.y;\n  var q3 = orientation.z;\n  // Canvas rotation is clock wise and in degrees\n  return -Math.atan2(2 * (q0 * q3 + q1 * q2), 1 - 2 * (q2 * q2 + q3 * q3)) * 180.0 / Math.PI;\n};\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar ImageMap = /*@__PURE__*/(function (superclass) {\n  function ImageMap(options) {\n    options = options || {};\n    var message = options.message;\n    var image = options.image;\n\n    // create the bitmap\n    superclass.call(this, image);\n\n    // save the metadata we need\n    this.pose = new ROSLIB.Pose({\n      position : message.origin.position,\n      orientation : message.origin.orientation\n    });\n\n    // set the size\n    this.width = message.width;\n    this.height = message.height;\n\n    // change Y direction\n    this.y = -this.height * message.resolution;\n\n    // scale the image\n    this.scaleX = message.resolution;\n    this.scaleY = message.resolution;\n    this.width *= this.scaleX;\n    this.height *= this.scaleY;\n\n    // set the pose\n    this.x += this.pose.position.x;\n    this.y -= this.pose.position.y;\n  }\n\n  if ( superclass ) ImageMap.__proto__ = superclass;\n  ImageMap.prototype = Object.create( superclass && superclass.prototype );\n  ImageMap.prototype.constructor = ImageMap;\n\n  return ImageMap;\n}(createjsExports.Bitmap));\n\nvar eventemitter2 = {exports: {}};\n\n/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\neventemitter2.exports;\n\n(function (module, exports) {\n!function(undefined$1) {\n\t  var hasOwnProperty= Object.hasOwnProperty;\n\t  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n\t    return Object.prototype.toString.call(obj) === \"[object Array]\";\n\t  };\n\t  var defaultMaxListeners = 10;\n\t  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n\t  var symbolsSupported= typeof Symbol==='function';\n\t  var reflectSupported= typeof Reflect === 'object';\n\t  var setImmediateSupported= typeof setImmediate === 'function';\n\t  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n\t  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n\t    var arr= Object.getOwnPropertyNames(obj);\n\t    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n\t    return arr;\n\t  }) : Object.keys;\n\n\t  function init() {\n\t    this._events = {};\n\t    if (this._conf) {\n\t      configure.call(this, this._conf);\n\t    }\n\t  }\n\n\t  function configure(conf) {\n\t    if (conf) {\n\t      this._conf = conf;\n\n\t      conf.delimiter && (this.delimiter = conf.delimiter);\n\n\t      if(conf.maxListeners!==undefined$1){\n\t          this._maxListeners= conf.maxListeners;\n\t      }\n\n\t      conf.wildcard && (this.wildcard = conf.wildcard);\n\t      conf.newListener && (this._newListener = conf.newListener);\n\t      conf.removeListener && (this._removeListener = conf.removeListener);\n\t      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n\t      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n\t      if (this.wildcard) {\n\t        this.listenerTree = {};\n\t      }\n\t    }\n\t  }\n\n\t  function logPossibleMemoryLeak(count, eventName) {\n\t    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n\t        'leak detected. ' + count + ' listeners added. ' +\n\t        'Use emitter.setMaxListeners() to increase limit.';\n\n\t    if(this.verboseMemoryLeak){\n\t      errorMsg += ' Event name: ' + eventName + '.';\n\t    }\n\n\t    if(typeof process !== 'undefined' && process.emitWarning){\n\t      var e = new Error(errorMsg);\n\t      e.name = 'MaxListenersExceededWarning';\n\t      e.emitter = this;\n\t      e.count = count;\n\t      process.emitWarning(e);\n\t    } else {\n\t      console.error(errorMsg);\n\n\t      if (console.trace){\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\n\t  var toArray = function (a, b, c) {\n\t    var arguments$1 = arguments;\n\n\t    var n = arguments.length;\n\t    switch (n) {\n\t      case 0:\n\t        return [];\n\t      case 1:\n\t        return [a];\n\t      case 2:\n\t        return [a, b];\n\t      case 3:\n\t        return [a, b, c];\n\t      default:\n\t        var arr = new Array(n);\n\t        while (n--) {\n\t          arr[n] = arguments$1[n];\n\t        }\n\t        return arr;\n\t    }\n\t  };\n\n\t  function toObject(keys, values) {\n\t    var obj = {};\n\t    var key;\n\t    var len = keys.length;\n\t    var valuesCount = values ? value.length : 0;\n\t    for (var i = 0; i < len; i++) {\n\t      key = keys[i];\n\t      obj[key] = i < valuesCount ? values[i] : undefined$1;\n\t    }\n\t    return obj;\n\t  }\n\n\t  function TargetObserver(emitter, target, options) {\n\t    this._emitter = emitter;\n\t    this._target = target;\n\t    this._listeners = {};\n\t    this._listenersCount = 0;\n\n\t    var on, off;\n\n\t    if (options.on || options.off) {\n\t      on = options.on;\n\t      off = options.off;\n\t    }\n\n\t    if (target.addEventListener) {\n\t      on = target.addEventListener;\n\t      off = target.removeEventListener;\n\t    } else if (target.addListener) {\n\t      on = target.addListener;\n\t      off = target.removeListener;\n\t    } else if (target.on) {\n\t      on = target.on;\n\t      off = target.off;\n\t    }\n\n\t    if (!on && !off) {\n\t      throw Error('target does not implement any known event API');\n\t    }\n\n\t    if (typeof on !== 'function') {\n\t      throw TypeError('on method must be a function');\n\t    }\n\n\t    if (typeof off !== 'function') {\n\t      throw TypeError('off method must be a function');\n\t    }\n\n\t    this._on = on;\n\t    this._off = off;\n\n\t    var _observers= emitter._observers;\n\t    if(_observers){\n\t      _observers.push(this);\n\t    }else {\n\t      emitter._observers= [this];\n\t    }\n\t  }\n\n\t  Object.assign(TargetObserver.prototype, {\n\t    subscribe: function(event, localEvent, reducer){\n\t      var observer= this;\n\t      var target= this._target;\n\t      var emitter= this._emitter;\n\t      var listeners= this._listeners;\n\t      var handler= function(){\n\t        var args= toArray.apply(null, arguments);\n\t        var eventObj= {\n\t          data: args,\n\t          name: localEvent,\n\t          original: event\n\t        };\n\t        if(reducer){\n\t          var result= reducer.call(target, eventObj);\n\t          if(result!==false){\n\t            emitter.emit.apply(emitter, [eventObj.name].concat(args));\n\t          }\n\t          return;\n\t        }\n\t        emitter.emit.apply(emitter, [localEvent].concat(args));\n\t      };\n\n\n\t      if(listeners[event]){\n\t        throw Error('Event \\'' + event + '\\' is already listening');\n\t      }\n\n\t      this._listenersCount++;\n\n\t      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n\t        this._onNewListener = function (_event) {\n\t          if (_event === localEvent && listeners[event] === null) {\n\t            listeners[event] = handler;\n\t            observer._on.call(target, event, handler);\n\t          }\n\t        };\n\n\t        emitter.on('newListener', this._onNewListener);\n\n\t        this._onRemoveListener= function(_event){\n\t          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n\t            listeners[event]= null;\n\t            observer._off.call(target, event, handler);\n\t          }\n\t        };\n\n\t        listeners[event]= null;\n\n\t        emitter.on('removeListener', this._onRemoveListener);\n\t      }else {\n\t        listeners[event]= handler;\n\t        observer._on.call(target, event, handler);\n\t      }\n\t    },\n\n\t    unsubscribe: function(event){\n\t      var observer= this;\n\t      var listeners= this._listeners;\n\t      var emitter= this._emitter;\n\t      var handler;\n\t      var events;\n\t      var off= this._off;\n\t      var target= this._target;\n\t      var i;\n\n\t      if(event && typeof event!=='string'){\n\t        throw TypeError('event must be a string');\n\t      }\n\n\t      function clearRefs(){\n\t        if(observer._onNewListener){\n\t          emitter.off('newListener', observer._onNewListener);\n\t          emitter.off('removeListener', observer._onRemoveListener);\n\t          observer._onNewListener= null;\n\t          observer._onRemoveListener= null;\n\t        }\n\t        var index= findTargetIndex.call(emitter, observer);\n\t        emitter._observers.splice(index, 1);\n\t      }\n\n\t      if(event){\n\t        handler= listeners[event];\n\t        if(!handler) { return; }\n\t        off.call(target, event, handler);\n\t        delete listeners[event];\n\t        if(!--this._listenersCount){\n\t          clearRefs();\n\t        }\n\t      }else {\n\t        events= ownKeys(listeners);\n\t        i= events.length;\n\t        while(i-->0){\n\t          event= events[i];\n\t          off.call(target, event, listeners[event]);\n\t        }\n\t        this._listeners= {};\n\t        this._listenersCount= 0;\n\t        clearRefs();\n\t      }\n\t    }\n\t  });\n\n\t  function resolveOptions(options, schema, reducers, allowUnknown) {\n\t    var computedOptions = Object.assign({}, schema);\n\n\t    if (!options) { return computedOptions; }\n\n\t    if (typeof options !== 'object') {\n\t      throw TypeError('options must be an object')\n\t    }\n\n\t    var keys = Object.keys(options);\n\t    var length = keys.length;\n\t    var option, value;\n\t    var reducer;\n\n\t    function reject(reason) {\n\t      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n\t    }\n\n\t    for (var i = 0; i < length; i++) {\n\t      option = keys[i];\n\t      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n\t        throw Error('Unknown \"' + option + '\" option');\n\t      }\n\t      value = options[option];\n\t      if (value !== undefined$1) {\n\t        reducer = reducers[option];\n\t        computedOptions[option] = reducer ? reducer(value, reject) : value;\n\t      }\n\t    }\n\t    return computedOptions;\n\t  }\n\n\t  function constructorReducer(value, reject) {\n\t    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n\t      reject('value must be a constructor');\n\t    }\n\t    return value;\n\t  }\n\n\t  function makeTypeReducer(types) {\n\t    var message= 'value must be type of ' + types.join('|');\n\t    var len= types.length;\n\t    var firstType= types[0];\n\t    var secondType= types[1];\n\n\t    if (len === 1) {\n\t      return function (v, reject) {\n\t        if (typeof v === firstType) {\n\t          return v;\n\t        }\n\t        reject(message);\n\t      }\n\t    }\n\n\t    if (len === 2) {\n\t      return function (v, reject) {\n\t        var kind= typeof v;\n\t        if (kind === firstType || kind === secondType) { return v; }\n\t        reject(message);\n\t      }\n\t    }\n\n\t    return function (v, reject) {\n\t      var kind = typeof v;\n\t      var i = len;\n\t      while (i-- > 0) {\n\t        if (kind === types[i]) { return v; }\n\t      }\n\t      reject(message);\n\t    }\n\t  }\n\n\t  var functionReducer= makeTypeReducer(['function']);\n\n\t  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n\t  function makeCancelablePromise(Promise, executor, options) {\n\t    var isCancelable;\n\t    var callbacks;\n\t    var timer= 0;\n\t    var subscriptionClosed;\n\n\t    var promise = new Promise(function (resolve, reject, onCancel) {\n\t      options= resolveOptions(options, {\n\t        timeout: 0,\n\t        overload: false\n\t      }, {\n\t        timeout: function(value, reject){\n\t          value*= 1;\n\t          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n\t            reject('timeout must be a positive number');\n\t          }\n\t          return value;\n\t        }\n\t      });\n\n\t      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n\t      function cleanup() {\n\t        if (callbacks) {\n\t          callbacks = null;\n\t        }\n\t        if (timer) {\n\t          clearTimeout(timer);\n\t          timer = 0;\n\t        }\n\t      }\n\n\t      var _resolve= function(value){\n\t        cleanup();\n\t        resolve(value);\n\t      };\n\n\t      var _reject= function(err){\n\t        cleanup();\n\t        reject(err);\n\t      };\n\n\t      if (isCancelable) {\n\t        executor(_resolve, _reject, onCancel);\n\t      } else {\n\t        callbacks = [function(reason){\n\t          _reject(reason || Error('canceled'));\n\t        }];\n\t        executor(_resolve, _reject, function (cb) {\n\t          if (subscriptionClosed) {\n\t            throw Error('Unable to subscribe on cancel event asynchronously')\n\t          }\n\t          if (typeof cb !== 'function') {\n\t            throw TypeError('onCancel callback must be a function');\n\t          }\n\t          callbacks.push(cb);\n\t        });\n\t        subscriptionClosed= true;\n\t      }\n\n\t      if (options.timeout > 0) {\n\t        timer= setTimeout(function(){\n\t          var reason= Error('timeout');\n\t          reason.code = 'ETIMEDOUT';\n\t          timer= 0;\n\t          promise.cancel(reason);\n\t          reject(reason);\n\t        }, options.timeout);\n\t      }\n\t    });\n\n\t    if (!isCancelable) {\n\t      promise.cancel = function (reason) {\n\t        if (!callbacks) {\n\t          return;\n\t        }\n\t        var length = callbacks.length;\n\t        for (var i = 1; i < length; i++) {\n\t          callbacks[i](reason);\n\t        }\n\t        // internal callback to reject the promise\n\t        callbacks[0](reason);\n\t        callbacks = null;\n\t      };\n\t    }\n\n\t    return promise;\n\t  }\n\n\t  function findTargetIndex(observer) {\n\t    var observers = this._observers;\n\t    if(!observers){\n\t      return -1;\n\t    }\n\t    var len = observers.length;\n\t    for (var i = 0; i < len; i++) {\n\t      if (observers[i]._target === observer) { return i; }\n\t    }\n\t    return -1;\n\t  }\n\n\t  // Attention, function return type now is array, always !\n\t  // It has zero elements if no any matches found and one or more\n\t  // elements (leafs) if there are matches\n\t  //\n\t  function searchListenerTree(handlers, type, tree, i, typeLength) {\n\t    if (!tree) {\n\t      return null;\n\t    }\n\n\t    if (i === 0) {\n\t      var kind = typeof type;\n\t      if (kind === 'string') {\n\t        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n\t        if ((n = type.indexOf(delimiter)) !== -1) {\n\t          ns = new Array(5);\n\t          do {\n\t            ns[l++] = type.slice(j, n);\n\t            j = n + dl;\n\t          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n\t          ns[l++] = type.slice(j);\n\t          type = ns;\n\t          typeLength = l;\n\t        } else {\n\t          type = [type];\n\t          typeLength = 1;\n\t        }\n\t      } else if (kind === 'object') {\n\t        typeLength = type.length;\n\t      } else {\n\t        type = [type];\n\t        typeLength = 1;\n\t      }\n\t    }\n\n\t    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n\t        nextType = type[i + 1], branches, _listeners;\n\n\t    if (i === typeLength) {\n\t      //\n\t      // If at the end of the event(s) list and the tree has listeners\n\t      // invoke those listeners.\n\t      //\n\n\t      if(tree._listeners) {\n\t        if (typeof tree._listeners === 'function') {\n\t          handlers && handlers.push(tree._listeners);\n\t          listeners = [tree];\n\t        } else {\n\t          handlers && handlers.push.apply(handlers, tree._listeners);\n\t          listeners = [tree];\n\t        }\n\t      }\n\t    } else {\n\n\t      if (currentType === '*') {\n\t        //\n\t        // If the event emitted is '*' at this part\n\t        // or there is a concrete match at this patch\n\t        //\n\t        branches = ownKeys(tree);\n\t        n = branches.length;\n\t        while (n-- > 0) {\n\t          branch = branches[n];\n\t          if (branch !== '_listeners') {\n\t            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n\t            if (_listeners) {\n\t              if (listeners) {\n\t                listeners.push.apply(listeners, _listeners);\n\t              } else {\n\t                listeners = _listeners;\n\t              }\n\t            }\n\t          }\n\t        }\n\t        return listeners;\n\t      } else if (currentType === '**') {\n\t        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n\t        if (endReached && tree._listeners) {\n\t          // The next element has a _listeners, add it to the handlers.\n\t          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n\t        }\n\n\t        branches = ownKeys(tree);\n\t        n = branches.length;\n\t        while (n-- > 0) {\n\t          branch = branches[n];\n\t          if (branch !== '_listeners') {\n\t            if (branch === '*' || branch === '**') {\n\t              if (tree[branch]._listeners && !endReached) {\n\t                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n\t                if (_listeners) {\n\t                  if (listeners) {\n\t                    listeners.push.apply(listeners, _listeners);\n\t                  } else {\n\t                    listeners = _listeners;\n\t                  }\n\t                }\n\t              }\n\t              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n\t            } else if (branch === nextType) {\n\t              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n\t            } else {\n\t              // No match on this one, shift into the tree but not in the type array.\n\t              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n\t            }\n\t            if (_listeners) {\n\t              if (listeners) {\n\t                listeners.push.apply(listeners, _listeners);\n\t              } else {\n\t                listeners = _listeners;\n\t              }\n\t            }\n\t          }\n\t        }\n\t        return listeners;\n\t      } else if (tree[currentType]) {\n\t        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n\t      }\n\t    }\n\n\t      xTree = tree['*'];\n\t    if (xTree) {\n\t      //\n\t      // If the listener tree will allow any match for this part,\n\t      // then recursively explore all branches of the tree\n\t      //\n\t      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n\t    }\n\n\t    xxTree = tree['**'];\n\t    if (xxTree) {\n\t      if (i < typeLength) {\n\t        if (xxTree._listeners) {\n\t          // If we have a listener on a '**', it will catch all, so add its handler.\n\t          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n\t        }\n\n\t        // Build arrays of matching next branches and others.\n\t        branches= ownKeys(xxTree);\n\t        n= branches.length;\n\t        while(n-->0){\n\t          branch= branches[n];\n\t          if (branch !== '_listeners') {\n\t            if (branch === nextType) {\n\t              // We know the next element will match, so jump twice.\n\t              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n\t            } else if (branch === currentType) {\n\t              // Current node matches, move into the tree.\n\t              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n\t            } else {\n\t              isolatedBranch = {};\n\t              isolatedBranch[branch] = xxTree[branch];\n\t              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n\t            }\n\t          }\n\t        }\n\t      } else if (xxTree._listeners) {\n\t        // We have reached the end and still on a '**'\n\t        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n\t      } else if (xxTree['*'] && xxTree['*']._listeners) {\n\t        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n\t      }\n\t    }\n\n\t    return listeners;\n\t  }\n\n\t  function growListenerTree(type, listener, prepend) {\n\t    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n\t    if(typeof type==='string') {\n\t      if ((i = type.indexOf(delimiter)) !== -1) {\n\t        ns = new Array(5);\n\t        do {\n\t          ns[len++] = type.slice(j, i);\n\t          j = i + dl;\n\t        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n\t        ns[len++] = type.slice(j);\n\t      }else {\n\t        ns= [type];\n\t        len= 1;\n\t      }\n\t    }else {\n\t      ns= type;\n\t      len= type.length;\n\t    }\n\n\t    //\n\t    // Looks for two consecutive '**', if so, don't add the event at all.\n\t    //\n\t    if (len > 1) {\n\t      for (i = 0; i + 1 < len; i++) {\n\t        if (ns[i] === '**' && ns[i + 1] === '**') {\n\t          return;\n\t        }\n\t      }\n\t    }\n\n\n\n\t    var tree = this.listenerTree, name;\n\n\t    for (i = 0; i < len; i++) {\n\t      name = ns[i];\n\n\t      tree = tree[name] || (tree[name] = {});\n\n\t      if (i === len - 1) {\n\t        if (!tree._listeners) {\n\t          tree._listeners = listener;\n\t        } else {\n\t          if (typeof tree._listeners === 'function') {\n\t            tree._listeners = [tree._listeners];\n\t          }\n\n\t          if (prepend) {\n\t            tree._listeners.unshift(listener);\n\t          } else {\n\t            tree._listeners.push(listener);\n\t          }\n\n\t          if (\n\t              !tree._listeners.warned &&\n\t              this._maxListeners > 0 &&\n\t              tree._listeners.length > this._maxListeners\n\t          ) {\n\t            tree._listeners.warned = true;\n\t            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n\t          }\n\t        }\n\t        return true;\n\t      }\n\t    }\n\n\t    return true;\n\t  }\n\n\t  function collectTreeEvents(tree, events, root, asArray){\n\t     var branches= ownKeys(tree);\n\t     var i= branches.length;\n\t     var branch, branchName, path;\n\t     var hasListeners= tree['_listeners'];\n\t     var isArrayPath;\n\n\t     while(i-->0){\n\t         branchName= branches[i];\n\n\t         branch= tree[branchName];\n\n\t         if(branchName==='_listeners'){\n\t             path= root;\n\t         }else {\n\t             path = root ? root.concat(branchName) : [branchName];\n\t         }\n\n\t         isArrayPath= asArray || typeof branchName==='symbol';\n\n\t         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n\t         if(typeof branch==='object'){\n\t             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n\t         }\n\t     }\n\n\t     return events;\n\t  }\n\n\t  function recursivelyGarbageCollect(root) {\n\t    var keys = ownKeys(root);\n\t    var i= keys.length;\n\t    var obj, key, flag;\n\t    while(i-->0){\n\t      key = keys[i];\n\t      obj = root[key];\n\n\t      if(obj){\n\t          flag= true;\n\t          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n\t             delete root[key];\n\t          }\n\t      }\n\t    }\n\n\t    return flag;\n\t  }\n\n\t  function Listener(emitter, event, listener){\n\t    this.emitter= emitter;\n\t    this.event= event;\n\t    this.listener= listener;\n\t  }\n\n\t  Listener.prototype.off= function(){\n\t    this.emitter.off(this.event, this.listener);\n\t    return this;\n\t  };\n\n\t  function setupListener(event, listener, options){\n\t      if (options === true) {\n\t        promisify = true;\n\t      } else if (options === false) {\n\t        async = true;\n\t      } else {\n\t        if (!options || typeof options !== 'object') {\n\t          throw TypeError('options should be an object or true');\n\t        }\n\t        var async = options.async;\n\t        var promisify = options.promisify;\n\t        var nextTick = options.nextTick;\n\t        var objectify = options.objectify;\n\t      }\n\n\t      if (async || nextTick || promisify) {\n\t        var _listener = listener;\n\t        var _origin = listener._origin || listener;\n\n\t        if (nextTick && !nextTickSupported) {\n\t          throw Error('process.nextTick is not supported');\n\t        }\n\n\t        if (promisify === undefined$1) {\n\t          promisify = listener.constructor.name === 'AsyncFunction';\n\t        }\n\n\t        listener = function () {\n\t          var args = arguments;\n\t          var context = this;\n\t          var event = this.event;\n\n\t          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n\t            _setImmediate(resolve);\n\t          }).then(function () {\n\t            context.event = event;\n\t            return _listener.apply(context, args)\n\t          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n\t            context.event = event;\n\t            _listener.apply(context, args);\n\t          });\n\t        };\n\n\t        listener._async = true;\n\t        listener._origin = _origin;\n\t      }\n\n\t    return [listener, objectify? new Listener(this, event, listener): this];\n\t  }\n\n\t  function EventEmitter(conf) {\n\t    this._events = {};\n\t    this._newListener = false;\n\t    this._removeListener = false;\n\t    this.verboseMemoryLeak = false;\n\t    configure.call(this, conf);\n\t  }\n\n\t  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n\t  EventEmitter.prototype.listenTo= function(target, events, options){\n\t    if(typeof target!=='object'){\n\t      throw TypeError('target musts be an object');\n\t    }\n\n\t    var emitter= this;\n\n\t    options = resolveOptions(options, {\n\t      on: undefined$1,\n\t      off: undefined$1,\n\t      reducers: undefined$1\n\t    }, {\n\t      on: functionReducer,\n\t      off: functionReducer,\n\t      reducers: objectFunctionReducer\n\t    });\n\n\t    function listen(events){\n\t      if(typeof events!=='object'){\n\t        throw TypeError('events must be an object');\n\t      }\n\n\t      var reducers= options.reducers;\n\t      var index= findTargetIndex.call(emitter, target);\n\t      var observer;\n\n\t      if(index===-1){\n\t        observer= new TargetObserver(emitter, target, options);\n\t      }else {\n\t        observer= emitter._observers[index];\n\t      }\n\n\t      var keys= ownKeys(events);\n\t      var len= keys.length;\n\t      var event;\n\t      var isSingleReducer= typeof reducers==='function';\n\n\t      for(var i=0; i<len; i++){\n\t        event= keys[i];\n\t        observer.subscribe(\n\t            event,\n\t            events[event] || event,\n\t            isSingleReducer ? reducers : reducers && reducers[event]\n\t        );\n\t      }\n\t    }\n\n\t    isArray(events)?\n\t        listen(toObject(events)) :\n\t        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n\t    return this;\n\t  };\n\n\t  EventEmitter.prototype.stopListeningTo = function (target, event) {\n\t    var observers = this._observers;\n\n\t    if(!observers){\n\t      return false;\n\t    }\n\n\t    var i = observers.length;\n\t    var observer;\n\t    var matched= false;\n\n\t    if(target && typeof target!=='object'){\n\t      throw TypeError('target should be an object');\n\t    }\n\n\t    while (i-- > 0) {\n\t      observer = observers[i];\n\t      if (!target || observer._target === target) {\n\t        observer.unsubscribe(event);\n\t        matched= true;\n\t      }\n\t    }\n\n\t    return matched;\n\t  };\n\n\t  // By default EventEmitters will print a warning if more than\n\t  // 10 listeners are added to it. This is a useful default which\n\t  // helps finding memory leaks.\n\t  //\n\t  // Obviously not all Emitters should be limited to 10. This function allows\n\t  // that to be increased. Set to zero for unlimited.\n\n\t  EventEmitter.prototype.delimiter = '.';\n\n\t  EventEmitter.prototype.setMaxListeners = function(n) {\n\t    if (n !== undefined$1) {\n\t      this._maxListeners = n;\n\t      if (!this._conf) { this._conf = {}; }\n\t      this._conf.maxListeners = n;\n\t    }\n\t  };\n\n\t  EventEmitter.prototype.getMaxListeners = function() {\n\t    return this._maxListeners;\n\t  };\n\n\t  EventEmitter.prototype.event = '';\n\n\t  EventEmitter.prototype.once = function(event, fn, options) {\n\t    return this._once(event, fn, false, options);\n\t  };\n\n\t  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n\t    return this._once(event, fn, true, options);\n\t  };\n\n\t  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n\t    return this._many(event, 1, fn, prepend, options);\n\t  };\n\n\t  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n\t    return this._many(event, ttl, fn, false, options);\n\t  };\n\n\t  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n\t    return this._many(event, ttl, fn, true, options);\n\t  };\n\n\t  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n\t    var self = this;\n\n\t    if (typeof fn !== 'function') {\n\t      throw new Error('many only accepts instances of Function');\n\t    }\n\n\t    function listener() {\n\t      if (--ttl === 0) {\n\t        self.off(event, listener);\n\t      }\n\t      return fn.apply(this, arguments);\n\t    }\n\n\t    listener._origin = fn;\n\n\t    return this._on(event, listener, prepend, options);\n\t  };\n\n\t  EventEmitter.prototype.emit = function() {\n\t    var arguments$1 = arguments;\n\n\t    if (!this._events && !this._all) {\n\t      return false;\n\t    }\n\n\t    this._events || init.call(this);\n\n\t    var type = arguments[0], ns, wildcard= this.wildcard;\n\t    var args,l,i,j, containsSymbol;\n\n\t    if (type === 'newListener' && !this._newListener) {\n\t      if (!this._events.newListener) {\n\t        return false;\n\t      }\n\t    }\n\n\t    if (wildcard) {\n\t      ns= type;\n\t      if(type!=='newListener' && type!=='removeListener'){\n\t        if (typeof type === 'object') {\n\t          l = type.length;\n\t          if (symbolsSupported) {\n\t            for (i = 0; i < l; i++) {\n\t              if (typeof type[i] === 'symbol') {\n\t                containsSymbol = true;\n\t                break;\n\t              }\n\t            }\n\t          }\n\t          if (!containsSymbol) {\n\t            type = type.join(this.delimiter);\n\t          }\n\t        }\n\t      }\n\t    }\n\n\t    var al = arguments.length;\n\t    var handler;\n\n\t    if (this._all && this._all.length) {\n\t      handler = this._all.slice();\n\n\t      for (i = 0, l = handler.length; i < l; i++) {\n\t        this.event = type;\n\t        switch (al) {\n\t        case 1:\n\t          handler[i].call(this, type);\n\t          break;\n\t        case 2:\n\t          handler[i].call(this, type, arguments$1[1]);\n\t          break;\n\t        case 3:\n\t          handler[i].call(this, type, arguments$1[1], arguments$1[2]);\n\t          break;\n\t        default:\n\t          handler[i].apply(this, arguments$1);\n\t        }\n\t      }\n\t    }\n\n\t    if (wildcard) {\n\t      handler = [];\n\t      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n\t    } else {\n\t      handler = this._events[type];\n\t      if (typeof handler === 'function') {\n\t        this.event = type;\n\t        switch (al) {\n\t        case 1:\n\t          handler.call(this);\n\t          break;\n\t        case 2:\n\t          handler.call(this, arguments[1]);\n\t          break;\n\t        case 3:\n\t          handler.call(this, arguments[1], arguments[2]);\n\t          break;\n\t        default:\n\t          args = new Array(al - 1);\n\t          for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\n\t          handler.apply(this, args);\n\t        }\n\t        return true;\n\t      } else if (handler) {\n\t        // need to make copy of handlers because list can change in the middle\n\t        // of emit call\n\t        handler = handler.slice();\n\t      }\n\t    }\n\n\t    if (handler && handler.length) {\n\t      if (al > 3) {\n\t        args = new Array(al - 1);\n\t        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\n\t      }\n\t      for (i = 0, l = handler.length; i < l; i++) {\n\t        this.event = type;\n\t        switch (al) {\n\t        case 1:\n\t          handler[i].call(this);\n\t          break;\n\t        case 2:\n\t          handler[i].call(this, arguments$1[1]);\n\t          break;\n\t        case 3:\n\t          handler[i].call(this, arguments$1[1], arguments$1[2]);\n\t          break;\n\t        default:\n\t          handler[i].apply(this, args);\n\t        }\n\t      }\n\t      return true;\n\t    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n\t      if (arguments[1] instanceof Error) {\n\t        throw arguments[1]; // Unhandled 'error' event\n\t      } else {\n\t        throw new Error(\"Uncaught, unspecified 'error' event.\");\n\t      }\n\t    }\n\n\t    return !!this._all;\n\t  };\n\n\t  EventEmitter.prototype.emitAsync = function() {\n\t    var arguments$1 = arguments;\n\n\t    if (!this._events && !this._all) {\n\t      return false;\n\t    }\n\n\t    this._events || init.call(this);\n\n\t    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n\t    var args,l,i,j;\n\n\t    if (type === 'newListener' && !this._newListener) {\n\t        if (!this._events.newListener) { return Promise.resolve([false]); }\n\t    }\n\n\t    if (wildcard) {\n\t      ns= type;\n\t      if(type!=='newListener' && type!=='removeListener'){\n\t        if (typeof type === 'object') {\n\t          l = type.length;\n\t          if (symbolsSupported) {\n\t            for (i = 0; i < l; i++) {\n\t              if (typeof type[i] === 'symbol') {\n\t                containsSymbol = true;\n\t                break;\n\t              }\n\t            }\n\t          }\n\t          if (!containsSymbol) {\n\t            type = type.join(this.delimiter);\n\t          }\n\t        }\n\t      }\n\t    }\n\n\t    var promises= [];\n\n\t    var al = arguments.length;\n\t    var handler;\n\n\t    if (this._all) {\n\t      for (i = 0, l = this._all.length; i < l; i++) {\n\t        this.event = type;\n\t        switch (al) {\n\t        case 1:\n\t          promises.push(this._all[i].call(this, type));\n\t          break;\n\t        case 2:\n\t          promises.push(this._all[i].call(this, type, arguments$1[1]));\n\t          break;\n\t        case 3:\n\t          promises.push(this._all[i].call(this, type, arguments$1[1], arguments$1[2]));\n\t          break;\n\t        default:\n\t          promises.push(this._all[i].apply(this, arguments$1));\n\t        }\n\t      }\n\t    }\n\n\t    if (wildcard) {\n\t      handler = [];\n\t      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n\t    } else {\n\t      handler = this._events[type];\n\t    }\n\n\t    if (typeof handler === 'function') {\n\t      this.event = type;\n\t      switch (al) {\n\t      case 1:\n\t        promises.push(handler.call(this));\n\t        break;\n\t      case 2:\n\t        promises.push(handler.call(this, arguments[1]));\n\t        break;\n\t      case 3:\n\t        promises.push(handler.call(this, arguments[1], arguments[2]));\n\t        break;\n\t      default:\n\t        args = new Array(al - 1);\n\t        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\n\t        promises.push(handler.apply(this, args));\n\t      }\n\t    } else if (handler && handler.length) {\n\t      handler = handler.slice();\n\t      if (al > 3) {\n\t        args = new Array(al - 1);\n\t        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\n\t      }\n\t      for (i = 0, l = handler.length; i < l; i++) {\n\t        this.event = type;\n\t        switch (al) {\n\t        case 1:\n\t          promises.push(handler[i].call(this));\n\t          break;\n\t        case 2:\n\t          promises.push(handler[i].call(this, arguments$1[1]));\n\t          break;\n\t        case 3:\n\t          promises.push(handler[i].call(this, arguments$1[1], arguments$1[2]));\n\t          break;\n\t        default:\n\t          promises.push(handler[i].apply(this, args));\n\t        }\n\t      }\n\t    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n\t      if (arguments[1] instanceof Error) {\n\t        return Promise.reject(arguments[1]); // Unhandled 'error' event\n\t      } else {\n\t        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n\t      }\n\t    }\n\n\t    return Promise.all(promises);\n\t  };\n\n\t  EventEmitter.prototype.on = function(type, listener, options) {\n\t    return this._on(type, listener, false, options);\n\t  };\n\n\t  EventEmitter.prototype.prependListener = function(type, listener, options) {\n\t    return this._on(type, listener, true, options);\n\t  };\n\n\t  EventEmitter.prototype.onAny = function(fn) {\n\t    return this._onAny(fn, false);\n\t  };\n\n\t  EventEmitter.prototype.prependAny = function(fn) {\n\t    return this._onAny(fn, true);\n\t  };\n\n\t  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n\t  EventEmitter.prototype._onAny = function(fn, prepend){\n\t    if (typeof fn !== 'function') {\n\t      throw new Error('onAny only accepts instances of Function');\n\t    }\n\n\t    if (!this._all) {\n\t      this._all = [];\n\t    }\n\n\t    // Add the function to the event listener collection.\n\t    if(prepend){\n\t      this._all.unshift(fn);\n\t    }else {\n\t      this._all.push(fn);\n\t    }\n\n\t    return this;\n\t  };\n\n\t  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n\t    if (typeof type === 'function') {\n\t      this._onAny(type, listener);\n\t      return this;\n\t    }\n\n\t    if (typeof listener !== 'function') {\n\t      throw new Error('on only accepts instances of Function');\n\t    }\n\t    this._events || init.call(this);\n\n\t    var returnValue= this, temp;\n\n\t    if (options !== undefined$1) {\n\t      temp = setupListener.call(this, type, listener, options);\n\t      listener = temp[0];\n\t      returnValue = temp[1];\n\t    }\n\n\t    // To avoid recursion in the case that type == \"newListeners\"! Before\n\t    // adding it to the listeners, first emit \"newListeners\".\n\t    if (this._newListener) {\n\t      this.emit('newListener', type, listener);\n\t    }\n\n\t    if (this.wildcard) {\n\t      growListenerTree.call(this, type, listener, prepend);\n\t      return returnValue;\n\t    }\n\n\t    if (!this._events[type]) {\n\t      // Optimize the case of one listener. Don't need the extra array object.\n\t      this._events[type] = listener;\n\t    } else {\n\t      if (typeof this._events[type] === 'function') {\n\t        // Change to array.\n\t        this._events[type] = [this._events[type]];\n\t      }\n\n\t      // If we've already got an array, just add\n\t      if(prepend){\n\t        this._events[type].unshift(listener);\n\t      }else {\n\t        this._events[type].push(listener);\n\t      }\n\n\t      // Check for listener leak\n\t      if (\n\t        !this._events[type].warned &&\n\t        this._maxListeners > 0 &&\n\t        this._events[type].length > this._maxListeners\n\t      ) {\n\t        this._events[type].warned = true;\n\t        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n\t      }\n\t    }\n\n\t    return returnValue;\n\t  };\n\n\t  EventEmitter.prototype.off = function(type, listener) {\n\t    if (typeof listener !== 'function') {\n\t      throw new Error('removeListener only takes instances of Function');\n\t    }\n\n\t    var handlers,leafs=[];\n\n\t    if(this.wildcard) {\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n\t      if(!leafs) { return this; }\n\t    } else {\n\t      // does not use listeners(), so no side effect of creating _events[type]\n\t      if (!this._events[type]) { return this; }\n\t      handlers = this._events[type];\n\t      leafs.push({_listeners:handlers});\n\t    }\n\n\t    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n\t      var leaf = leafs[iLeaf];\n\t      handlers = leaf._listeners;\n\t      if (isArray(handlers)) {\n\n\t        var position = -1;\n\n\t        for (var i = 0, length = handlers.length; i < length; i++) {\n\t          if (handlers[i] === listener ||\n\t            (handlers[i].listener && handlers[i].listener === listener) ||\n\t            (handlers[i]._origin && handlers[i]._origin === listener)) {\n\t            position = i;\n\t            break;\n\t          }\n\t        }\n\n\t        if (position < 0) {\n\t          continue;\n\t        }\n\n\t        if(this.wildcard) {\n\t          leaf._listeners.splice(position, 1);\n\t        }\n\t        else {\n\t          this._events[type].splice(position, 1);\n\t        }\n\n\t        if (handlers.length === 0) {\n\t          if(this.wildcard) {\n\t            delete leaf._listeners;\n\t          }\n\t          else {\n\t            delete this._events[type];\n\t          }\n\t        }\n\t        if (this._removeListener)\n\t          { this.emit(\"removeListener\", type, listener); }\n\n\t        return this;\n\t      }\n\t      else if (handlers === listener ||\n\t        (handlers.listener && handlers.listener === listener) ||\n\t        (handlers._origin && handlers._origin === listener)) {\n\t        if(this.wildcard) {\n\t          delete leaf._listeners;\n\t        }\n\t        else {\n\t          delete this._events[type];\n\t        }\n\t        if (this._removeListener)\n\t          { this.emit(\"removeListener\", type, listener); }\n\t      }\n\t    }\n\n\t    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n\t    return this;\n\t  };\n\n\t  EventEmitter.prototype.offAny = function(fn) {\n\t    var i = 0, l = 0, fns;\n\t    if (fn && this._all && this._all.length > 0) {\n\t      fns = this._all;\n\t      for(i = 0, l = fns.length; i < l; i++) {\n\t        if(fn === fns[i]) {\n\t          fns.splice(i, 1);\n\t          if (this._removeListener)\n\t            { this.emit(\"removeListenerAny\", fn); }\n\t          return this;\n\t        }\n\t      }\n\t    } else {\n\t      fns = this._all;\n\t      if (this._removeListener) {\n\t        for(i = 0, l = fns.length; i < l; i++)\n\t          { this.emit(\"removeListenerAny\", fns[i]); }\n\t      }\n\t      this._all = [];\n\t    }\n\t    return this;\n\t  };\n\n\t  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n\t  EventEmitter.prototype.removeAllListeners = function (type) {\n\t    if (type === undefined$1) {\n\t      !this._events || init.call(this);\n\t      return this;\n\t    }\n\n\t    if (this.wildcard) {\n\t      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n\t      if (!leafs) { return this; }\n\t      for (i = 0; i < leafs.length; i++) {\n\t        leaf = leafs[i];\n\t        leaf._listeners = null;\n\t      }\n\t      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\t    } else if (this._events) {\n\t      this._events[type] = null;\n\t    }\n\t    return this;\n\t  };\n\n\t  EventEmitter.prototype.listeners = function (type) {\n\t    var _events = this._events;\n\t    var keys, listeners, allListeners;\n\t    var i;\n\t    var listenerTree;\n\n\t    if (type === undefined$1) {\n\t      if (this.wildcard) {\n\t        throw Error('event name required for wildcard emitter');\n\t      }\n\n\t      if (!_events) {\n\t        return [];\n\t      }\n\n\t      keys = ownKeys(_events);\n\t      i = keys.length;\n\t      allListeners = [];\n\t      while (i-- > 0) {\n\t        listeners = _events[keys[i]];\n\t        if (typeof listeners === 'function') {\n\t          allListeners.push(listeners);\n\t        } else {\n\t          allListeners.push.apply(allListeners, listeners);\n\t        }\n\t      }\n\t      return allListeners;\n\t    } else {\n\t      if (this.wildcard) {\n\t        listenerTree= this.listenerTree;\n\t        if(!listenerTree) { return []; }\n\t        var handlers = [];\n\t        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n\t        return handlers;\n\t      }\n\n\t      if (!_events) {\n\t        return [];\n\t      }\n\n\t      listeners = _events[type];\n\n\t      if (!listeners) {\n\t        return [];\n\t      }\n\t      return typeof listeners === 'function' ? [listeners] : listeners;\n\t    }\n\t  };\n\n\t  EventEmitter.prototype.eventNames = function(nsAsArray){\n\t    var _events= this._events;\n\t    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n\t  };\n\n\t  EventEmitter.prototype.listenerCount = function(type) {\n\t    return this.listeners(type).length;\n\t  };\n\n\t  EventEmitter.prototype.hasListeners = function (type) {\n\t    if (this.wildcard) {\n\t      var handlers = [];\n\t      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\t      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n\t      return handlers.length > 0;\n\t    }\n\n\t    var _events = this._events;\n\t    var _all = this._all;\n\n\t    return !!(_all && _all.length || _events && (type === undefined$1 ? ownKeys(_events).length : _events[type]));\n\t  };\n\n\t  EventEmitter.prototype.listenersAny = function() {\n\n\t    if(this._all) {\n\t      return this._all;\n\t    }\n\t    else {\n\t      return [];\n\t    }\n\n\t  };\n\n\t  EventEmitter.prototype.waitFor = function (event, options) {\n\t    var self = this;\n\t    var type = typeof options;\n\t    if (type === 'number') {\n\t      options = {timeout: options};\n\t    } else if (type === 'function') {\n\t      options = {filter: options};\n\t    }\n\n\t    options= resolveOptions(options, {\n\t      timeout: 0,\n\t      filter: undefined$1,\n\t      handleError: false,\n\t      Promise: Promise,\n\t      overload: false\n\t    }, {\n\t      filter: functionReducer,\n\t      Promise: constructorReducer\n\t    });\n\n\t    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n\t      function listener() {\n\t        var filter= options.filter;\n\t        if (filter && !filter.apply(self, arguments)) {\n\t          return;\n\t        }\n\t        self.off(event, listener);\n\t        if (options.handleError) {\n\t          var err = arguments[0];\n\t          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n\t        } else {\n\t          resolve(toArray.apply(null, arguments));\n\t        }\n\t      }\n\n\t      onCancel(function(){\n\t        self.off(event, listener);\n\t      });\n\n\t      self._on(event, listener, false);\n\t    }, {\n\t      timeout: options.timeout,\n\t      overload: options.overload\n\t    })\n\t  };\n\n\t  function once(emitter, name, options) {\n\t    options= resolveOptions(options, {\n\t      Promise: Promise,\n\t      timeout: 0,\n\t      overload: false\n\t    }, {\n\t      Promise: constructorReducer\n\t    });\n\n\t    var _Promise= options.Promise;\n\n\t    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n\t      var handler;\n\t      if (typeof emitter.addEventListener === 'function') {\n\t        handler=  function () {\n\t          resolve(toArray.apply(null, arguments));\n\t        };\n\n\t        onCancel(function(){\n\t          emitter.removeEventListener(name, handler);\n\t        });\n\n\t        emitter.addEventListener(\n\t            name,\n\t            handler,\n\t            {once: true}\n\t        );\n\t        return;\n\t      }\n\n\t      var eventListener = function(){\n\t        errorListener && emitter.removeListener('error', errorListener);\n\t        resolve(toArray.apply(null, arguments));\n\t      };\n\n\t      var errorListener;\n\n\t      if (name !== 'error') {\n\t        errorListener = function (err){\n\t          emitter.removeListener(name, eventListener);\n\t          reject(err);\n\t        };\n\n\t        emitter.once('error', errorListener);\n\t      }\n\n\t      onCancel(function(){\n\t        errorListener && emitter.removeListener('error', errorListener);\n\t        emitter.removeListener(name, eventListener);\n\t      });\n\n\t      emitter.once(name, eventListener);\n\t    }, {\n\t      timeout: options.timeout,\n\t      overload: options.overload\n\t    });\n\t  }\n\n\t  var prototype= EventEmitter.prototype;\n\n\t  Object.defineProperties(EventEmitter, {\n\t    defaultMaxListeners: {\n\t      get: function () {\n\t        return prototype._maxListeners;\n\t      },\n\t      set: function (n) {\n\t        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n\t          throw TypeError('n must be a non-negative number')\n\t        }\n\t        prototype._maxListeners = n;\n\t      },\n\t      enumerable: true\n\t    },\n\t    once: {\n\t      value: once,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\n\t  Object.defineProperties(prototype, {\n\t      _maxListeners: {\n\t          value: defaultMaxListeners,\n\t          writable: true,\n\t          configurable: true\n\t      },\n\t      _observers: {value: null, writable: true, configurable: true}\n\t  });\n\n\t  if (typeof undefined$1 === 'function' && undefined$1.amd) {\n\t     // AMD. Register as an anonymous module.\n\t    undefined$1(function() {\n\t      return EventEmitter;\n\t    });\n\t  } else {\n\t    // CommonJS\n\t    module.exports = EventEmitter;\n\t  }\n\t}(); \n} (eventemitter2, eventemitter2.exports));\n\nvar eventemitter2Exports = eventemitter2.exports;\nvar EventEmitter2 = /*@__PURE__*/getDefaultExportFromCjs(eventemitter2Exports);\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar ImageMapClient = /*@__PURE__*/(function (EventEmitter2) {\n  function ImageMapClient(options) {\n    EventEmitter2.call(this);\n    options = options || {};\n    var ros = options.ros;\n    var topic = options.topic || '/map';\n    this.image = options.image;\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // create an empty shape to start with\n    this.currentImage = new createjsExports.Shape();\n\n    // subscribe to the topic\n    var rosTopic = new ROSLIB.Topic({\n      ros : ros,\n      name : topic,\n      messageType : 'nav_msgs/OccupancyGrid'\n    });\n\n    rosTopic.subscribe(function(message) {\n      // we only need this once\n      rosTopic.unsubscribe();\n\n      // create the image\n      this.currentImage = new ImageMap({\n        message : message,\n        image : this.image\n      });\n      this.rootObject.addChild(this.currentImage);\n\n      this.emit('change');\n    }.bind(this));\n  }\n\n  if ( EventEmitter2 ) ImageMapClient.__proto__ = EventEmitter2;\n  ImageMapClient.prototype = Object.create( EventEmitter2 && EventEmitter2.prototype );\n  ImageMapClient.prototype.constructor = ImageMapClient;\n\n  return ImageMapClient;\n}(EventEmitter2));\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGrid = /*@__PURE__*/(function (superclass) {\n  function OccupancyGrid(options) {\n    options = options || {};\n    var message = options.message;\n\n    // internal drawing canvas\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    // set the size\n    canvas.width = message.info.width;\n    canvas.height = message.info.height;\n\n    var imageData = context.createImageData(canvas.width, canvas.height);\n    for ( var row = 0; row < canvas.height; row++) {\n      for ( var col = 0; col < canvas.width; col++) {\n        // determine the index into the map data\n        var mapI = col + ((canvas.height - row - 1) * canvas.width);\n        // determine the value\n        var data = message.data[mapI];\n        var val;\n        if (data === 100) {\n          val = 0;\n        } else if (data === 0) {\n          val = 255;\n        } else {\n          val = 127;\n        }\n\n        // determine the index into the image data array\n        var i = (col + (row * canvas.width)) * 4;\n        // r\n        imageData.data[i] = val;\n        // g\n        imageData.data[++i] = val;\n        // b\n        imageData.data[++i] = val;\n        // a\n        imageData.data[++i] = 255;\n      }\n    }\n    context.putImageData(imageData, 0, 0);\n\n    // create the bitmap\n    superclass.call(this, canvas);\n\n    this.width = canvas.width;\n    this.height = canvas.height;\n\n    // save the metadata we need\n    this.pose = new ROSLIB.Pose({\n      position : message.info.origin.position,\n      orientation : message.info.origin.orientation\n    });\n\n    // change Y direction\n    this.y = -this.height * message.info.resolution;\n\n    // scale the image\n    this.scaleX = message.info.resolution;\n    this.scaleY = message.info.resolution;\n    this.width *= this.scaleX;\n    this.height *= this.scaleY;\n\n    // set the pose\n    this.x += this.pose.position.x;\n    this.y -= this.pose.position.y;\n  }\n\n  if ( superclass ) OccupancyGrid.__proto__ = superclass;\n  OccupancyGrid.prototype = Object.create( superclass && superclass.prototype );\n  OccupancyGrid.prototype.constructor = OccupancyGrid;\n\n  return OccupancyGrid;\n}(createjsExports.Bitmap));\n\n/**\n * @fileOverview\n * @author Raffaello Bonghi - raffaello.bonghi@officinerobotiche.it\n */\n\nvar Grid = /*@__PURE__*/(function (superclass) {\n  function Grid(options) {\n      options = options || {};\n      var size = options.size || 10;\n      var cellSize = options.cellSize || 0.1;\n      var lineWidth = options.lineWidth || 0.001;\n      // draw the arrow\n      var graphics = new createjsExports.Graphics();\n      // line width\n      graphics.setStrokeStyle(lineWidth*5);\n      graphics.beginStroke(createjsExports.Graphics.getRGB(0, 0, 0));\n      graphics.beginFill(createjsExports.Graphics.getRGB(255, 0, 0));\n      graphics.moveTo(-size*cellSize, 0);\n      graphics.lineTo(size*cellSize, 0);\n      graphics.moveTo(0, -size*cellSize);\n      graphics.lineTo(0, size*cellSize);\n      graphics.endFill();\n      graphics.endStroke();\n\n      graphics.setStrokeStyle(lineWidth);\n      graphics.beginStroke(createjsExports.Graphics.getRGB(0, 0, 0));\n      graphics.beginFill(createjsExports.Graphics.getRGB(255, 0, 0));\n      for (var i = -size; i <= size; i++) {\n          graphics.moveTo(-size*cellSize, i * cellSize);\n          graphics.lineTo(size*cellSize, i * cellSize);\n          graphics.moveTo(i * cellSize, -size*cellSize);\n          graphics.lineTo(i * cellSize, size*cellSize);\n      }\n      graphics.endFill();\n      graphics.endStroke();\n      // create the shape\n      superclass.call(this, graphics);\n\n  }\n\n  if ( superclass ) Grid.__proto__ = superclass;\n  Grid.prototype = Object.create( superclass && superclass.prototype );\n  Grid.prototype.constructor = Grid;\n\n  return Grid;\n}(createjsExports.Shape));\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGridClient = /*@__PURE__*/(function (EventEmitter2) {\n  function OccupancyGridClient(options) {\n    EventEmitter2.call(this);\n    var that = this;\n    options = options || {};\n    var ros = options.ros;\n    var topic = options.topic || '/map';\n    this.continuous = options.continuous;\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // current grid that is displayed\n    // create an empty shape to start with, so that the order remains correct.\n    this.currentGrid = new createjsExports.Shape();\n    this.rootObject.addChild(this.currentGrid);\n    // work-around for a bug in easeljs -- needs a second object to render correctly\n    this.rootObject.addChild(new Grid({size:1}));\n\n    // subscribe to the topic\n    var rosTopic = new ROSLIB.Topic({\n      ros : ros,\n      name : topic,\n      messageType : 'nav_msgs/OccupancyGrid'\n      // compression : 'png'\n    });\n\n    rosTopic.subscribe(function(message) {\n      // check for an old map\n      var index = null;\n      if (that.currentGrid) {\n        index = that.rootObject.getChildIndex(that.currentGrid);\n        that.rootObject.removeChild(that.currentGrid);\n      }\n\n      that.currentGrid = new OccupancyGrid({\n        message : message\n      });\n      if (index !== null) {\n        that.rootObject.addChildAt(that.currentGrid, index);\n      }\n      else {\n        that.rootObject.addChild(that.currentGrid);\n      }\n\n      that.emit('change');\n\n      // check if we should unsubscribe\n      if (!that.continuous) {\n        rosTopic.unsubscribe();\n      }\n    });\n  }\n\n  if ( EventEmitter2 ) OccupancyGridClient.__proto__ = EventEmitter2;\n  OccupancyGridClient.prototype = Object.create( EventEmitter2 && EventEmitter2.prototype );\n  OccupancyGridClient.prototype.constructor = OccupancyGridClient;\n\n  return OccupancyGridClient;\n}(EventEmitter2));\n\n/**\n * @fileOverview\n * @author Jihoon Lee- jihoonlee.in@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar OccupancyGridSrvClient = /*@__PURE__*/(function (EventEmitter2) {\n  function OccupancyGridSrvClient(options) {\n    EventEmitter2.call(this);\n    var that = this;\n    options = options || {};\n    var ros = options.ros;\n    var service = options.service || '/static_map';\n    this.rootObject = options.rootObject || new createjsExports.Container();\n\n    // current grid that is displayed\n    this.currentGrid = null;\n\n    // Setting up to the service\n    var rosService = new ROSLIB.Service({\n      ros : ros,\n      name : service,\n      serviceType : 'nav_msgs/GetMap',\n      compression : 'png'\n    });\n\n    rosService.callService(new ROSLIB.ServiceRequest(),function(response) {\n      // check for an old map\n      if (that.currentGrid) {\n        that.rootObject.removeChild(that.currentGrid);\n      }\n\n      that.currentGrid = new OccupancyGrid({\n        message : response.map\n      });\n      that.rootObject.addChild(that.currentGrid);\n\n      that.emit('change', that.currentGrid);\n    });\n  }\n\n  if ( EventEmitter2 ) OccupancyGridSrvClient.__proto__ = EventEmitter2;\n  OccupancyGridSrvClient.prototype = Object.create( EventEmitter2 && EventEmitter2.prototype );\n  OccupancyGridSrvClient.prototype.constructor = OccupancyGridSrvClient;\n\n  return OccupancyGridSrvClient;\n}(EventEmitter2));\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar ArrowShape = /*@__PURE__*/(function (superclass) {\n  function ArrowShape(options) {\n  \tvar that = this;\n  \toptions = options || {};\n  \tvar size = options.size || 10;\n  \tvar strokeSize = options.strokeSize || 3;\n  \tvar strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n  \tvar fillColor = options.fillColor || createjsExports.Graphics.getRGB(255, 0, 0);\n  \tvar pulse = options.pulse;\n\n  \t// draw the arrow\n  \tvar graphics = new createjsExports.Graphics();\n\n  \tvar headLen = size / 3.0;\n  \tvar headWidth = headLen * 2.0 / 3.0;\n\n  \tgraphics.setStrokeStyle(strokeSize);\n  \tgraphics.beginStroke(strokeColor);\n  \tgraphics.moveTo(0, 0);\n  \tgraphics.lineTo(size-headLen, 0);\n\n  \tgraphics.beginFill(fillColor);\n  \tgraphics.moveTo(size, 0);\n  \tgraphics.lineTo(size-headLen, headWidth / 2.0);\n  \tgraphics.lineTo(size-headLen, -headWidth / 2.0);\n  \tgraphics.closePath();\n  \tgraphics.endFill();\n  \tgraphics.endStroke();\n\n  \t// create the shape\n  \tsuperclass.call(this, graphics);\n\n  \t// check if we are pulsing\n  \tif (pulse) {\n  \t\t// have the model \"pulse\"\n  \t\tvar growCount = 0;\n  \t\tvar growing = true;\n  \t\tcreatejsExports.Ticker.addEventListener('tick', function() {\n  \t\t\tif (growing) {\n  \t\t\t\tthat.scaleX *= 1.035;\n  \t\t\t\tthat.scaleY *= 1.035;\n  \t\t\t\tgrowing = (++growCount < 10);\n  \t\t\t} else {\n  \t\t\t\tthat.scaleX /= 1.035;\n  \t\t\t\tthat.scaleY /= 1.035;\n  \t\t\t\tgrowing = (--growCount < 0);\n  \t\t\t}\n  \t\t});\n  \t}\n  }\n\n  if ( superclass ) ArrowShape.__proto__ = superclass;\n  ArrowShape.prototype = Object.create( superclass && superclass.prototype );\n  ArrowShape.prototype.constructor = ArrowShape;\n\n  return ArrowShape;\n}(createjsExports.Shape));\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar NavigationArrow = /*@__PURE__*/(function (superclass) {\n  function NavigationArrow(options) {\n    var that = this;\n    options = options || {};\n    var size = options.size || 10;\n    var strokeSize = options.strokeSize || 3;\n    var strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n    var fillColor = options.fillColor || createjsExports.Graphics.getRGB(255, 0, 0);\n    var pulse = options.pulse;\n\n    // draw the arrow\n    var graphics = new createjsExports.Graphics();\n    // line width\n    graphics.setStrokeStyle(strokeSize);\n    graphics.moveTo(-size / 2.0, -size / 2.0);\n    graphics.beginStroke(strokeColor);\n    graphics.beginFill(fillColor);\n    graphics.lineTo(size, 0);\n    graphics.lineTo(-size / 2.0, size / 2.0);\n    graphics.closePath();\n    graphics.endFill();\n    graphics.endStroke();\n\n    // create the shape\n    superclass.call(this, graphics);\n\n    // check if we are pulsing\n    if (pulse) {\n      // have the model \"pulse\"\n      var growCount = 0;\n      var growing = true;\n      createjsExports.Ticker.addEventListener('tick', function() {\n        if (growing) {\n          that.scaleX *= 1.035;\n          that.scaleY *= 1.035;\n          growing = (++growCount < 10);\n        } else {\n          that.scaleX /= 1.035;\n          that.scaleY /= 1.035;\n          growing = (--growCount < 0);\n        }\n      });\n    }\n  }\n\n  if ( superclass ) NavigationArrow.__proto__ = superclass;\n  NavigationArrow.prototype = Object.create( superclass && superclass.prototype );\n  NavigationArrow.prototype.constructor = NavigationArrow;\n\n  return NavigationArrow;\n}(createjsExports.Shape));\n\n/**\n * @fileOverview\n * @author Inigo Gonzalez - ingonza85@gmail.com\n */\n\nvar NavigationImage = /*@__PURE__*/(function (superclass) {\n  function NavigationImage(options) {\n    options = options || {};\n    var size = options.size || 10;\n    var image_url = options.image;\n    var pulse = options.pulse;\n    var alpha = options.alpha || 1;\n\n    var originals = {};\n\n    var image = new Image();\n\n    superclass.call(this, image);\n\n    var paintImage = function() {\n      var scale = calculateScale(size);\n      this.alpha = alpha;\n      this.scaleX = scale;\n      this.scaleY = scale;\n      this.regY = this.image.height/2;\n      this.regX = this.image.width/2;\n      originals['rotation'] = this.rotation;\n      Object.defineProperty(this, 'rotation', {\n        get: function(){ return originals['rotation'] + 90; },\n        set: function(value){ originals['rotation'] = value; }\n      });\n      if (pulse) {\n        // have the model \"pulse\"\n        var growCount = 0;\n        var growing = true;\n        var SCALE_SIZE = 1.020;\n        createjsExports.Ticker.addEventListener('tick', function() {\n          if (growing) {\n            this.scaleX *= SCALE_SIZE;\n            this.scaleY *= SCALE_SIZE;\n            growing = (++growCount < 10);\n          } else {\n            this.scaleX /= SCALE_SIZE;\n            this.scaleY /= SCALE_SIZE;\n            growing = (--growCount < 0);\n          }\n        });\n      }\n    };\n\n    image.onload = paintImage.bind(this);\n    image.src = image_url;\n\n    var calculateScale = function(_size){\n      return _size / image.width;\n    };\n\n  }\n\n  if ( superclass ) NavigationImage.__proto__ = superclass;\n  NavigationImage.prototype = Object.create( superclass && superclass.prototype );\n  NavigationImage.prototype.constructor = NavigationImage;\n\n  return NavigationImage;\n}(createjsExports.Bitmap));\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PathShape = /*@__PURE__*/(function (superclass) {\n  function PathShape(options) {\n  \toptions = options || {};\n  \tvar path = options.path;\n  \tthis.strokeSize = options.strokeSize || 3;\n  \tthis.strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n\n  \t// draw the line\n  \tthis.graphics = new createjsExports.Graphics();\n\n  \tif (path !== null && typeof path !== 'undefined') {\n  \t\tthis.graphics.setStrokeStyle(this.strokeSize);\n  \t\tthis.graphics.beginStroke(this.strokeColor);\n  \t\tthis.graphics.moveTo(path.poses[0].pose.position.x / this.scaleX, path.poses[0].pose.position.y / -this.scaleY);\n  \t\tfor (var i=1; i<path.poses.length; ++i) {\n  \t\t\tthis.graphics.lineTo(path.poses[i].pose.position.x / this.scaleX, path.poses[i].pose.position.y / -this.scaleY);\n  \t\t}\n  \t\tthis.graphics.endStroke();\n  \t}\n\n  \t// create the shape\n  \tsuperclass.call(this, this.graphics);\n  }\n\n  if ( superclass ) PathShape.__proto__ = superclass;\n  PathShape.prototype = Object.create( superclass && superclass.prototype );\n  PathShape.prototype.constructor = PathShape;\n  /**\n   * Set the path to draw\n   *\n   * @param path of type nav_msgs/Path\n   */\n  PathShape.prototype.setPath = function setPath (path) {\n  \tthis.graphics.clear();\n  \tif (path !== null && typeof path !== 'undefined') {\n  \t\tthis.graphics.setStrokeStyle(this.strokeSize);\n  \t\tthis.graphics.beginStroke(this.strokeColor);\n  \t\tthis.graphics.moveTo(path.poses[0].pose.position.x / this.scaleX, path.poses[0].pose.position.y / -this.scaleY);\n  \t\tfor (var i=1; i<path.poses.length; ++i) {\n  \t\t\tthis.graphics.lineTo(path.poses[i].pose.position.x / this.scaleX, path.poses[i].pose.position.y / -this.scaleY);\n  \t\t}\n  \t\tthis.graphics.endStroke();\n  \t}\n  };\n\n  return PathShape;\n}(createjsExports.Shape));\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PolygonMarker = /*@__PURE__*/(function (superclass) {\n  function PolygonMarker(options) {\n  //  var that = this;\n      superclass.call(this);\n      options = options || {};\n      this.lineSize = options.lineSize || 3;\n      this.lineColor = options.lineColor || createjsExports.Graphics.getRGB(0, 0, 255, 0.66);\n      this.pointSize = options.pointSize || 10;\n      this.pointColor = options.pointColor || createjsExports.Graphics.getRGB(255, 0, 0, 0.66);\n      this.fillColor = options.pointColor || createjsExports.Graphics.getRGB(0, 255, 0, 0.33);\n      this.lineCallBack = options.lineCallBack;\n      this.pointCallBack = options.pointCallBack;\n\n      // Array of point shapes\n  //  this.points = [];\n      this.pointContainer = new createjsExports.Container();\n\n      // Array of line shapes\n  //  this.lines = [];\n      this.lineContainer = new createjsExports.Container();\n\n      this.fillShape = new createjsExports.Shape();\n\n      // Container with all the lines and points\n      this.addChild(this.fillShape);\n      this.addChild(this.lineContainer);\n      this.addChild(this.pointContainer);\n  }\n\n  if ( superclass ) PolygonMarker.__proto__ = superclass;\n  PolygonMarker.prototype = Object.create( superclass && superclass.prototype );\n  PolygonMarker.prototype.constructor = PolygonMarker;\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.createLineShape = function createLineShape (startPoint, endPoint) {\n      var line = new createjsExports.Shape();\n  //  line.graphics.setStrokeStyle(this.strokeSize);\n  //  line.graphics.beginStroke(this.strokeColor);\n  //  line.graphics.moveTo(startPoint.x, startPoint.y);\n  //  line.graphics.lineTo(endPoint.x, endPoint.y);\n      this.editLineShape(line, startPoint, endPoint);\n\n      var that = this;\n      line.addEventListener('mousedown', function(event) {\n          if (that.lineCallBack !== null && typeof that.lineCallBack !== 'undefined') {\n              that.lineCallBack('mousedown', event, that.lineContainer.getChildIndex(event.target));\n          }\n      });\n\n      return line;\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.editLineShape = function editLineShape (line, startPoint, endPoint) {\n      line.graphics.clear();\n      line.graphics.setStrokeStyle(this.lineSize);\n      line.graphics.beginStroke(this.lineColor);\n      line.graphics.moveTo(startPoint.x, startPoint.y);\n      line.graphics.lineTo(endPoint.x, endPoint.y);\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.createPointShape = function createPointShape (pos) {\n      var point = new createjsExports.Shape();\n      point.graphics.beginFill(this.pointColor);\n      point.graphics.drawCircle(0, 0, this.pointSize);\n      point.x = pos.x;\n      point.y = -pos.y;\n\n      var that = this;\n      point.addEventListener('mousedown', function(event) {\n          if (that.pointCallBack !== null && typeof that.pointCallBack !== 'undefined') {\n              that.pointCallBack('mousedown', event, that.pointContainer.getChildIndex(event.target));\n          }\n      });\n\n      return point;\n  };\n  /**\n   * Adds a point to the polygon\n   *\n   * @param position of type ROSLIB.Vector3\n   */\n  PolygonMarker.prototype.addPoint = function addPoint (pos) {\n      var point = this.createPointShape(pos);\n      this.pointContainer.addChild(point);\n      var numPoints = this.pointContainer.numChildren;\n\n      // 0 points -> 1 point, 0 lines\n      // 1 point  -> 2 points, lines: add line between previous and new point, add line between new point and first point\n      // 2 points -> 3 points, 3 lines: change last line, add line between new point and first point\n      // 3 points -> 4 points, 4 lines: change last line, add line between new point and first point\n      // etc\n\n      if (numPoints < 2) ;\n      else if (numPoints < 3) {\n          // Now 2 points: add line between previous and new point\n          var line = this.createLineShape(this.pointContainer.getChildAt(numPoints-2), point);\n          this.lineContainer.addChild(line);\n      }\n      if (numPoints > 2) {\n          // Now 3 or more points: change last line\n          this.editLineShape(this.lineContainer.getChildAt(numPoints-2), this.pointContainer.getChildAt(numPoints-2), point);\n      }\n      if (numPoints > 1) {\n          // Now 2 or more points: add line between new point and first point\n          var lineEnd = this.createLineShape(point, this.pointContainer.getChildAt(0));\n          this.lineContainer.addChild(lineEnd);\n      }\n\n      this.drawFill();\n  };\n  /**\n   * Removes a point from the polygon\n   *\n   * @param obj either an index (integer) or a point shape of the polygon\n   */\n  PolygonMarker.prototype.remPoint = function remPoint (obj) {\n      var index;\n  //  var point;\n      if (obj instanceof createjsExports.Shape) {\n          index = this.pointContainer.getChildIndex(obj);\n  //      point = obj;\n      }\n      else {\n          index = obj;\n  //      point = this.pointContainer.getChildAt(index);\n      }\n\n      // 0 points -> 0 points, 0 lines\n      // 1 point  -> 0 points, 0 lines\n      // 2 points -> 1 point,  0 lines: remove all lines\n      // 3 points -> 2 points, 2 lines: change line before point to remove, remove line after point to remove\n      // 4 points -> 3 points, 3 lines: change line before point to remove, remove line after point to remove\n      // etc\n\n      var numPoints = this.pointContainer.numChildren;\n\n      if (numPoints < 2) ;\n      else if (numPoints < 3) {\n          // 2 points: remove all lines\n          this.lineContainer.removeAllChildren();\n      }\n      else {\n          // 3 or more points: change line before point to remove, remove line after point to remove\n          this.editLineShape(\n              this.lineContainer.getChildAt((index-1+numPoints)%numPoints),\n              this.pointContainer.getChildAt((index-1+numPoints)%numPoints),\n              this.pointContainer.getChildAt((index+1)%numPoints)\n          );\n          this.lineContainer.removeChildAt(index);\n      }\n      this.pointContainer.removeChildAt(index);\n  //  this.points.splice(index, 1);\n\n      this.drawFill();\n  };\n  /**\n   * Moves a point of the polygon\n   *\n   * @param obj either an index (integer) or a point shape of the polygon\n   * @param position of type ROSLIB.Vector3\n   */\n  PolygonMarker.prototype.movePoint = function movePoint (obj, newPos) {\n      var index;\n      var point;\n      if (obj instanceof createjsExports.Shape) {\n          index = this.pointContainer.getChildIndex(obj);\n          point = obj;\n      }\n      else {\n          index = obj;\n          point = this.pointContainer.getChildAt(index);\n      }\n      point.x = newPos.x;\n      point.y = -newPos.y;\n\n      var numPoints = this.pointContainer.numChildren;\n      if (numPoints > 1) {\n          // line before moved point\n          var line1 = this.lineContainer.getChildAt((index-1+numPoints)%numPoints);\n          this.editLineShape(line1, this.pointContainer.getChildAt((index-1+numPoints)%numPoints), point);\n\n          // line after moved point\n          var line2 = this.lineContainer.getChildAt(index);\n          this.editLineShape(line2, point, this.pointContainer.getChildAt((index+1)%numPoints));\n      }\n\n      this.drawFill();\n  };\n  /**\n   * Splits a line of the polygon: inserts a point at the center of the line\n   *\n   * @param obj either an index (integer) or a line shape of the polygon\n   */\n  PolygonMarker.prototype.splitLine = function splitLine (obj) {\n      var index;\n      var line;\n      if (obj instanceof createjsExports.Shape) {\n          index = this.lineContainer.getChildIndex(obj);\n          line = obj;\n      }\n      else {\n          index = obj;\n          line = this.lineContainer.getChildAt(index);\n      }\n      var numPoints = this.pointContainer.numChildren;\n      var xs = this.pointContainer.getChildAt(index).x;\n      var ys = this.pointContainer.getChildAt(index).y;\n      var xe = this.pointContainer.getChildAt((index+1)%numPoints).x;\n      var ye = this.pointContainer.getChildAt((index+1)%numPoints).y;\n      var xh = (xs+xe)/2.0;\n      var yh = (ys+ye)/2.0;\n      var pos = new ROSLIB.Vector3({ x:xh, y:-yh });\n\n      // Add a point in the center of the line to split\n      var point = this.createPointShape(pos);\n      this.pointContainer.addChildAt(point, index+1);\n      ++numPoints;\n\n      // Add a line between the new point and the end of the line to split\n      var lineNew = this.createLineShape(point, this.pointContainer.getChildAt((index+2)%numPoints));\n      this.lineContainer.addChildAt(lineNew, index+1);\n\n      // Set the endpoint of the line to split to the new point\n      this.editLineShape(line, this.pointContainer.getChildAt(index), point);\n\n      this.drawFill();\n  };\n  /**\n   * Internal use only\n   */\n  PolygonMarker.prototype.drawFill = function drawFill () {\n      var numPoints = this.pointContainer.numChildren;\n      if (numPoints > 2) {\n          var g = this.fillShape.graphics;\n          g.clear();\n          g.setStrokeStyle(0);\n          g.beginStroke();\n          g.beginFill(this.fillColor);\n          g.moveTo(this.pointContainer.getChildAt(0).x, this.pointContainer.getChildAt(0).y);\n          for (var i=1; i<numPoints; ++i) {\n              g.lineTo(this.pointContainer.getChildAt(i).x, this.pointContainer.getChildAt(i).y);\n          }\n          g.closePath();\n          g.endFill();\n          g.endStroke();\n      }\n      else {\n          this.fillShape.graphics.clear();\n      }\n  };\n\n  return PolygonMarker;\n}(createjsExports.Container));\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar TraceShape = /*@__PURE__*/(function (superclass) {\n  function TraceShape(options) {\n  //\tvar that = this;\n  \toptions = options || {};\n  \tvar pose = options.pose;\n  \tthis.strokeSize = options.strokeSize || 3;\n  \tthis.strokeColor = options.strokeColor || createjsExports.Graphics.getRGB(0, 0, 0);\n  \tthis.maxPoses = (options.maxPoses || options.maxPoses === 0) ? options.maxPoses : 100;\n  \tthis.minDist = options.minDist || 0.05;\n\n  \t// Store minDist as the square of it\n  \tthis.minDist = this.minDist*this.minDist;\n\n  \t// Array of the poses\n  \t// TODO: do we need this?\n  \tthis.poses = [];\n\n  \t// Create the graphics\n  \tthis.graphics = new createjsExports.Graphics();\n  \tthis.graphics.setStrokeStyle(this.strokeSize);\n  \tthis.graphics.beginStroke(this.strokeColor);\n\n  \t// Add first pose if given\n  \tif (pose !== null && typeof pose !== 'undefined') {\n  \t\tthis.poses.push(pose);\n  \t}\n\n  \t// Create the shape\n  \tsuperclass.call(this, this.graphics);\n  }\n\n  if ( superclass ) TraceShape.__proto__ = superclass;\n  TraceShape.prototype = Object.create( superclass && superclass.prototype );\n  TraceShape.prototype.constructor = TraceShape;\n  /**\n   * Adds a pose to the trace and updates the graphics\n   *\n   * @param pose of type ROSLIB.Pose\n   */\n  TraceShape.prototype.addPose = function addPose (pose) {\n  \tvar last = this.poses.length-1;\n  \tif (last < 0) {\n  \t\tthis.poses.push(pose);\n  \t\tthis.graphics.moveTo(pose.position.x / this.scaleX, pose.position.y / -this.scaleY);\n  \t}\n  \telse {\n  \t\tvar prevX = this.poses[last].position.x;\n  \t\tvar prevY = this.poses[last].position.y;\n  \t\tvar dx = (pose.position.x - prevX);\n  \t\tvar dy = (pose.position.y - prevY);\n  \t\tif (dx*dx + dy*dy > this.minDist) {\n  \t\t\tthis.graphics.lineTo(pose.position.x / this.scaleX, pose.position.y / -this.scaleY);\n  \t\t\tthis.poses.push(pose);\n  \t\t}\n  \t}\n  \tif (this.maxPoses > 0 && this.maxPoses < this.poses.length) {\n  \t\tthis.popFront();\n  \t}\n  };\n  /**\n   * Removes front pose and updates the graphics\n   */\n  TraceShape.prototype.popFront = function popFront () {\n  \tif (this.poses.length > 0) {\n  \t\tthis.poses.shift();\n  \t\t// TODO: shift drawing instructions rather than doing it all over\n  \t\tthis.graphics.clear();\n  \t\tthis.graphics.setStrokeStyle(this.strokeSize);\n  \t\tthis.graphics.beginStroke(this.strokeColor);\n  \t\tthis.graphics.lineTo(this.poses[0].position.x / this.scaleX, this.poses[0].position.y / -this.scaleY);\n  \t\tfor (var i=1; i<this.poses.length; ++i) {\n  \t\t\tthis.graphics.lineTo(this.poses[i].position.x / this.scaleX, this.poses[i].position.y / -this.scaleY);\n  \t\t}\n  \t}\n  };\n\n  return TraceShape;\n}(createjsExports.Shape));\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar PanView = function PanView(options) {\n  \toptions = options || {};\n  \tthis.rootObject = options.rootObject;\n\n  \t// get a handle to the stage\n  \tif (this.rootObject instanceof createjsExports.Stage) {\n  \t\tthis.stage = this.rootObject;\n  \t}\n  \telse {\n  \t\tthis.stage = this.rootObject.getStage();\n  \t}\n\n  \tthis.startPos = new ROSLIB.Vector3();\n};\n\nPanView.prototype.startPan = function startPan (startX, startY) {\n  \tthis.startPos.x = startX;\n  \tthis.startPos.y = startY;\n};\nPanView.prototype.pan = function pan (curX, curY) {\n  \tthis.stage.x += curX - this.startPos.x;\n  \tthis.startPos.x = curX;\n  \tthis.stage.y += curY - this.startPos.y;\n  \tthis.startPos.y = curY;\n};\n\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Viewer = function Viewer(options) {\n  options = options || {};\n  var divID = options.divID;\n  this.width = options.width;\n  this.height = options.height;\n  var background = options.background || '#111111';\n\n  // create the canvas to render to\n  var canvas = document.createElement('canvas');\n  canvas.width = this.width;\n  canvas.height = this.height;\n  canvas.style.background = background;\n  document.getElementById(divID).appendChild(canvas);\n  // create the easel to use\n  this.scene = new createjsExports.Stage(canvas);\n\n  // change Y axis center\n  this.scene.y = this.height;\n\n  // add the renderer to the page\n  document.getElementById(divID).appendChild(canvas);\n\n  // update at 30fps\n  createjsExports.Ticker.framerate = 30;\n  createjsExports.Ticker.addEventListener('tick', this.scene);\n};\n/**\n * Add the given createjs object to the global scene in the viewer.\n *\n * @param object - the object to add\n */\nViewer.prototype.addObject = function addObject (object) {\n  this.scene.addChild(object);\n};\n/**\n * Scale the scene to fit the given width and height into the current canvas.\n *\n * @param width - the width to scale to in meters\n * @param height - the height to scale to in meters\n */\nViewer.prototype.scaleToDimensions = function scaleToDimensions (width, height) {\n  // restore to values before shifting, if ocurred\n  this.scene.x = typeof this.scene.x_prev_shift !== 'undefined' ? this.scene.x_prev_shift : this.scene.x;\n  this.scene.y = typeof this.scene.y_prev_shift !== 'undefined' ? this.scene.y_prev_shift : this.scene.y;\n\n  // save scene scaling\n  this.scene.scaleX = this.width / width;\n  this.scene.scaleY = this.height / height;\n};\n/**\n * Shift the main view of the canvas by the given amount. This is based on the\n * ROS coordinate system. That is, Y is opposite that of a traditional canvas.\n *\n * @param x - the amount to shift by in the x direction in meters\n * @param y - the amount to shift by in the y direction in meters\n */\nViewer.prototype.shift = function shift (x, y) {\n  // save current offset\n  this.scene.x_prev_shift = this.scene.x;\n  this.scene.y_prev_shift = this.scene.y;\n\n  // shift scene by scaling the desired offset\n  this.scene.x -= (x * this.scene.scaleX);\n  this.scene.y += (y * this.scene.scaleY);\n};\n\n/**\n * @fileOverview\n * @author Bart van Vliet - bart@dobots.nl\n */\n\nvar ZoomView = function ZoomView(options) {\n  \toptions = options || {};\n  \tthis.rootObject = options.rootObject;\n  \tthis.minScale = options.minScale || 0.001;\n\n  \t// get a handle to the stage\n  \tif (this.rootObject instanceof createjsExports.Stage) {\n  \t\tthis.stage = this.rootObject;\n  \t}\n  \telse {\n  \t\tthis.stage = this.rootObject.getStage();\n  \t}\n\n  \tthis.center = new ROSLIB.Vector3();\n  \tthis.startShift = new ROSLIB.Vector3();\n  \tthis.startScale = new ROSLIB.Vector3();\n};\n\nZoomView.prototype.startZoom = function startZoom (centerX, centerY) {\n  \tthis.center.x = centerX;\n  \tthis.center.y = centerY;\n  \tthis.startShift.x = this.stage.x;\n  \tthis.startShift.y = this.stage.y;\n  \tthis.startScale.x = this.stage.scaleX;\n  \tthis.startScale.y = this.stage.scaleY;\n};\nZoomView.prototype.zoom = function zoom (zoom$1) {\n  \t// Make sure scale doesn't become too small\n  \tif (this.startScale.x*zoom$1 < this.minScale) {\n  \t\tzoom$1 = this.minScale/this.startScale.x;\n  \t}\n  \tif (this.startScale.y*zoom$1 < this.minScale) {\n  \t\tzoom$1 = this.minScale/this.startScale.y;\n  \t}\n\n  \tthis.stage.scaleX = this.startScale.x*zoom$1;\n  \tthis.stage.scaleY = this.startScale.y*zoom$1;\n\n  \tthis.stage.x = this.startShift.x - (this.center.x-this.startShift.x) * (this.stage.scaleX/this.startScale.x - 1);\n  \tthis.stage.y = this.startShift.y - (this.center.y-this.startShift.y) * (this.stage.scaleY/this.startScale.y - 1);\n};\n\nexport { ArrowShape, Grid, ImageMap, ImageMapClient, NavigationArrow, NavigationImage, OccupancyGrid, OccupancyGridClient, OccupancyGridSrvClient, PanView, PathShape, PolygonMarker, TraceShape, Viewer, ZoomView };\n"],"mappings":"AAAA,OAAO,KAAKA,MAAM,MAAM,QAAQ;AAEhC,IAAIC,cAAc,GAAG,OAAOC,UAAU,KAAK,WAAW,GAAGA,UAAU,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,GAAG,OAAOC,IAAI,KAAK,WAAW,GAAGA,IAAI,GAAG,CAAC,CAAC;AAE/L,SAASC,uBAAuBA,CAAEC,CAAC,EAAE;EACpC,OAAOA,CAAC,IAAIA,CAAC,CAACC,UAAU,IAAIC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACL,CAAC,EAAE,SAAS,CAAC,GAAGA,CAAC,CAAC,SAAS,CAAC,GAAGA,CAAC;AAClG;AAEA,IAAIM,QAAQ,GAAG;EAACC,OAAO,EAAE,CAAC;AAAC,CAAC;AAE5BD,QAAQ,CAACC,OAAO;AAEf,WAAUC,MAAM,EAAED,OAAO,EAAE;EAC3B,IAAID,QAAQ,GAAIZ,cAAc,CAACY,QAAQ,GAAIZ,cAAc,CAACY,QAAQ,IAAI,CAAC,CAAG;EAC1E;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAECZ,cAAc,CAACY,QAAQ,GAAGZ,cAAc,CAACY,QAAQ,IAAE,CAAC,CAAC;;EAGrD;EACA;EACA;;EAEA;AACD;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCA,QAAQ,CAACG,MAAM,GAAG,UAASC,QAAQ,EAAEC,UAAU,EAAE;IAEhD,SAASC,CAACA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGH,QAAQ;IAAE;IAC5CE,CAAC,CAACT,SAAS,GAAGQ,UAAU,CAACR,SAAS;IAClC,OAAQO,QAAQ,CAACP,SAAS,GAAG,IAAIS,CAAC,CAAC,CAAC;EACrC,CAAC;;EAED;EACA;EACA;;EAEA;AACD;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCN,QAAQ,CAACQ,OAAO,GAAG,UAASJ,QAAQ,EAAEK,MAAM,EAAE;IAE7C,IAAIC,IAAI,GAAGN,QAAQ,CAACP,SAAS;MAAEc,IAAI,GAAIf,MAAM,CAACgB,cAAc,IAAEhB,MAAM,CAACgB,cAAc,CAACF,IAAI,CAAC,IAAGA,IAAI,CAACG,SAAS;IAC1G,IAAIF,IAAI,EAAE;MACTD,IAAI,CAAC,CAACD,MAAM,IAAE,GAAG,IAAI,aAAa,CAAC,GAAGE,IAAI,CAACJ,WAAW,CAAC,CAAC;MACxD,KAAK,IAAIO,CAAC,IAAIH,IAAI,EAAE;QACnB,IAAID,IAAI,CAACZ,cAAc,CAACgB,CAAC,CAAC,IAAK,OAAOH,IAAI,CAACG,CAAC,CAAC,IAAI,UAAW,EAAE;UAAEJ,IAAI,CAACD,MAAM,GAAGK,CAAC,CAAC,GAAGH,IAAI,CAACG,CAAC,CAAC;QAAE;MAC7F;IACD;IACA,OAAOV,QAAQ;EAChB,CAAC;;EAED;EACA;EACA;;EAEA;AACD;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCJ,QAAQ,CAACe,OAAO,GAAG,UAAUC,KAAK,EAAEC,aAAa,EAAC;IAEjD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAACC,CAAC,GAACH,KAAK,CAACI,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MAC1C,IAAID,aAAa,KAAKD,KAAK,CAACE,CAAC,CAAC,EAAE;QAC/B,OAAOA,CAAC;MACT;IACD;IACA,OAAO,CAAC,CAAC;EACV,CAAC;;EAED;EACA;EACA;;EAEC,aAAW;IAEZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASG,KAAKA,CAACC,IAAI,EAAEC,OAAO,EAAEC,UAAU,EAAE;MAG1C;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACF,IAAI,GAAGA,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACG,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,IAAI;;MAEzB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,CAAC;;MAEnB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACJ,OAAO,GAAG,CAAC,CAACA,OAAO;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,CAAC,CAACA,UAAU;;MAE9B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACI,SAAS,GAAI,IAAIC,IAAI,CAAC,CAAC,CAAEC,OAAO,CAAC,CAAC;;MAEvC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,KAAK;;MAE7B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,kBAAkB,GAAG,KAAK;;MAE/B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,2BAA2B,GAAG,KAAK;;MAExC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,KAAK;IACrB;IACA,IAAIC,CAAC,GAAGd,KAAK,CAACxB,SAAS;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAED;IACC;AACF;AACA;AACA;AACA;AACA;IACEsC,CAAC,CAACC,cAAc,GAAG,YAAW;MAC7B,IAAI,CAACL,gBAAgB,GAAG,IAAI,CAACP,UAAU,IAAE,IAAI;IAC9C,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEW,CAAC,CAACE,eAAe,GAAG,YAAW;MAC9B,IAAI,CAACL,kBAAkB,GAAG,IAAI;IAC/B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEG,CAAC,CAACG,wBAAwB,GAAG,YAAW;MACvC,IAAI,CAACL,2BAA2B,GAAG,IAAI,CAACD,kBAAkB,GAAG,IAAI;IAClE,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEG,CAAC,CAACI,MAAM,GAAG,YAAW;MACrB,IAAI,CAACL,OAAO,GAAG,IAAI;IACpB,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEC,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,OAAO,IAAInB,KAAK,CAAC,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,UAAU,CAAC;IAC3D,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEW,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;MACvB,KAAK,IAAI5B,CAAC,IAAI4B,KAAK,EAAE;QAAE,IAAI,CAAC5B,CAAC,CAAC,GAAG4B,KAAK,CAAC5B,CAAC,CAAC;MAAE;MAC3C,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEqB,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,eAAe,GAAC,IAAI,CAACrB,IAAI,GAAC,IAAI;IACtC,CAAC;IAEDtB,QAAQ,CAACqB,KAAK,GAAGA,KAAK;EACvB,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASuB,eAAeA,CAAA,EAAG;MAG3B;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,IAAI;;MAEtB;AACH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AACnC,2BAA2B,EAAEf,CAAC,EAAE,EAAE;UAChE,IAAIZ,CAAC,GAAGsD,GAAG,CAAC1C,CAAC,CAAC;UACd,IAAIZ,CAAC,CAAC2D,WAAW,EAAE;YAAE3D,CAAC,CAAC2D,WAAW,CAACG,QAAQ,CAAC;UAAE,CAAC,MAC1C;YAAE9D,CAAC,CAAC8D,QAAQ,CAAC;UAAE;UACpB,IAAIA,QAAQ,CAAClC,OAAO,EAAE;YACrB,IAAI,CAACiB,GAAG,CAACiB,QAAQ,CAAC9C,IAAI,EAAEhB,CAAC,EAAEqB,UAAU,IAAE,CAAC,CAAC;YACzCyC,QAAQ,CAAClC,OAAO,GAAG,KAAK;UACzB;QACD;MACD;IACD,CAAC;IAGDlC,QAAQ,CAAC4C,eAAe,GAAGA,eAAe;EAC3C,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASgC,MAAMA,CAAA,EAAG;MACjB,MAAM,gCAAgC;IACvC;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEA,MAAM,CAACC,WAAW,GAAG,SAAS;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACED,MAAM,CAACE,GAAG,GAAG,KAAK;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEF,MAAM,CAACG,OAAO,GAAG,SAAS;;IAG3B;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEH,MAAM,CAACI,MAAM,GAAG,KAAK;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAC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SAAS,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,IAAI,CAAC;IAChK,CAAC;;IAED;AACF;AACA;AACA;AACA;IACElI,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,oBAAoB,GAAC,IAAI,CAACrB,IAAI,GAAC,UAAU,GAAC,IAAI,CAACyI,MAAM,GAAC,UAAU,GAAC,IAAI,CAACC,MAAM,GAAC,IAAI;IACzF,CAAC;IAGDhK,QAAQ,CAAC8J,UAAU,GAAG9J,QAAQ,CAACQ,OAAO,CAACsJ,UAAU,EAAE,OAAO,CAAC;EAC5D,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASkB,QAAQA,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAEC,EAAE,EAAE;MACrC,IAAI,CAACC,SAAS,CAACN,CAAC,EAACC,CAAC,EAACC,CAAC,EAACC,CAAC,EAACC,EAAE,EAACC,EAAE,CAAC;;MAE9B;MACC;MACA;AACH;AACA;AACA;AACA;;MAEG;AACH;AACA;AACA;AACA;;MAEG;AACH;AACA;AACA;AACA;;MAEG;AACH;AACA;AACA;AACA;;MAEG;AACH;AACA;AACA;AACA;;MAEG;AACH;AACA;AACA;AACA;IACE;IACA,IAAInJ,CAAC,GAAG6I,QAAQ,CAACnL,SAAS;;IAE1B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEmL,QAAQ,CAACQ,UAAU,GAAG5D,IAAI,CAAC6D,EAAE,GAAC,GAAG;;IAGlC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACET,QAAQ,CAACU,QAAQ,GAAG,IAAI,CAAC,CAAC;;IAG3B;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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AAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,IAAI,CAAC;IACrE,CAAC;IAGDnR,QAAQ,CAAC+Q,MAAM,GAAGA,MAAM;EACzB,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASK,WAAWA,CAACpN,IAAI,EAAE;MAC1B,IAAI,CAACqN,2BAA2B,CAAC,CAAC;;MAGlC;MACA;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC1K,SAAS,GAAG,CAAC;;MAGlB;MACA;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC2K,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAG,IAAI;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,CAAC;;MAEnB;MACA;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,CAAC;;MAErB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,CAAC;;MAEpB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,CAAC;;MAEnB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,CAAC;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,CAAC;;MAEhB;MACA,IAAI,CAACC,UAAU,CAACnO,IAAI,CAAC;IACtB;IACA,IAAI7B,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACiR,WAAW,EAAEpR,QAAQ,CAAC4C,eAAe,CAAC;;IAE9D;IACA;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;IACET,CAAC,CAACiQ,aAAa,GAAG,YAAW;MAC5B,OAAO,IAAI,CAACb,WAAW,CAAC5M,KAAK,CAAC,CAAC;IAChC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE,IAAI;MACH/E,MAAM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AAI,EAAE,IAAI,CAACoF,KAAK;cAChBnF,IAAI,EAAE,IAAI,CAACoF;YACZ,CAAC,CAAC;YACHtS,CAAC,IAAI+U,UAAU,GAACZ,OAAO;UACxB;UACAlJ,CAAC,IAAI+J,WAAW,GAACb,OAAO;QACzB;MACD;MACA,IAAI,CAAC/B,UAAU,GAAG0C,UAAU;IAC7B,CAAC;IAGDxU,QAAQ,CAACoR,WAAW,GAAGpR,QAAQ,CAACQ,OAAO,CAAC4Q,WAAW,EAAE,iBAAiB,CAAC;EACxE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS2D,QAAQA,CAAA,EAAG;MAGpB;MACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAGpB;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,IAAI;;MAExB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,IAAI;;MAE3B;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;MACG,IAAI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AACgb,EAAE,GAAGhb,CAAC,CAACoV,MAAM;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEpV,CAAC,CAACib,EAAE,GAAGjb,CAAC,CAACsV,KAAK;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEtV,CAAC,CAACkb,EAAE,GAAGlb,CAAC,CAACkW,aAAa;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACElW,CAAC,CAACmb,EAAE,GAAGnb,CAAC,CAAC8V,gBAAgB;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE9V,CAAC,CAAC8I,CAAC,GAAG9I,CAAC,CAACyV,GAAG;;IAEX;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEzV,CAAC,CAAC0K,CAAC,GAAG1K,CAAC,CAAC8M,IAAI;;IAEZ;AACF;AACA;AACA;AACA;AACA;AACA;IACE9M,CAAC,CAACob,EAAE,GAAGpb,CAAC,CAAC2W,SAAS;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE3W,CAAC,CAACgJ,CAAC,GAAGhJ,CAAC,CAAC0T,KAAK;;IAEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE1T,CAAC,CAAC8E,CAAC,GAAG9E,CAAC,CAAC6W,SAAS;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE7W,CAAC,CAACqb,EAAE,GAAGrb,CAAC,CAACgX,uBAAuB;;IAEhC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEhX,CAAC,CAACsb,EAAE,GAAGtb,CAAC,CAACsX,uBAAuB;;IAEhC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEtX,CAAC,CAACub,EAAE,GAAGvb,CAAC,CAAC0X,eAAe;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE1X,CAAC,CAACwb,EAAE,GAAGxb,CAAC,CAAC6X,OAAO;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE7X,CAAC,CAACyb,EAAE,GAAGzb,CAAC,CAAC8X,cAAc;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE9X,CAAC,CAAC0b,EAAE,GAAG1b,CAAC,CAACqY,aAAa;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErY,CAAC,CAAC2b,CAAC,GAAG3b,CAAC,CAACyY,WAAW;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEzY,CAAC,CAAC4b,EAAE,GAAG5b,CAAC,CAAC4Y,yBAAyB;;IAElC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE5Y,CAAC,CAAC6b,EAAE,GAAG7b,CAAC,CAAC6Y,yBAAyB;;IAElC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE7Y,CAAC,CAAC8b,EAAE,GAAG9b,CAAC,CAAC8Y,iBAAiB;;IAE1B;AACF;AACA;AACA;AACA;AACA;AACA;IACE9Y,CAAC,CAAC+b,EAAE,GAAG/b,CAAC,CAAC+Y,SAAS;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE/Y,CAAC,CAACgc,EAAE,GAAGhc,CAAC,CAACiZ,QAAQ;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEjZ,CAAC,CAACic,EAAE,GAAGjc,CAAC,CAACkZ,aAAa;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACElZ,CAAC,CAACkc,EAAE,GAAGlc,CAAC,CAACmZ,oBAAoB;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEnZ,CAAC,CAACmc,EAAE,GAAGnc,CAAC,CAACyZ,UAAU;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEzZ,CAAC,CAACoc,EAAE,GAAGpc,CAAC,CAAC2Z,WAAW;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE3Z,CAAC,CAACqc,EAAE,GAAGrc,CAAC,CAAC6Z,YAAY;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE7Z,CAAC,CAACA,CAAC,GAAGA,CAAC,CAACka,UAAU;;IAGnB;IACC;AACF;AACA;AACA;AACA;IACEla,CAAC,CAACyU,mBAAmB,GAAG,UAAS6H,MAAM,EAAE;MACxC,IAAIzH,KAAK,GAAG,IAAI,CAACxB,aAAa;QAAEkJ,MAAM,GAAG,IAAI,CAAChJ,mBAAmB;QAAEiJ,WAAW,GAAG,IAAI,CAAClJ,YAAY;MAElG,IAAI,IAAI,CAACE,MAAM,IAAI+I,MAAM,CAACtd,MAAM,EAAE;QACjC4V,KAAK,CAAC5V,MAAM,GAAGud,WAAW,CAAC,CAAC;QAC5B3H,KAAK,CAACnT,IAAI,CAACkR,QAAQ,CAAC6J,QAAQ,CAAC;QAE7B,IAAIzd,CAAC,GAAGud,MAAM,CAACtd,MAAM;UAAEyd,EAAE,GAAG7H,KAAK,CAAC5V,MAAM;QACxC4V,KAAK,CAAC5V,MAAM,GAAGyd,EAAE,GAAC1d,CAAC;QACnB,KAAK,IAAID,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UAAE8V,KAAK,CAAC9V,CAAC,GAAC2d,EAAE,CAAC,GAAGH,MAAM,CAACxd,CAAC,CAAC;QAAE;QAEnD,IAAI,IAAI,CAACqU,KAAK,EAAE;UAAEyB,KAAK,CAACnT,IAAI,CAAC,IAAI,CAAC0R,KAAK,CAAC;QAAE;QAC1C,IAAI,IAAI,CAACN,OAAO,EAAE;UACjB;UACA,IAAI,IAAI,CAACG,WAAW,KAAK,IAAI,CAACC,cAAc,EAAE;YAC7C,IAAI,CAACA,cAAc,GAAG,IAAI,CAACD,WAAW;YACtC4B,KAAK,CAACnT,IAAI,CAAC,IAAI,CAACuR,WAAW,CAAC;UAC7B;UACA,IAAI,IAAI,CAACF,YAAY,KAAK,IAAI,CAACC,eAAe,EAAE;YAC/C,IAAI,CAACA,eAAe,GAAG,IAAI,CAACD,YAAY;YACxC8B,KAAK,CAACnT,IAAI,CAAC,IAAI,CAACqR,YAAY,CAAC;UAC9B;UACA8B,KAAK,CAACnT,IAAI,CAAC,IAAI,CAACoR,OAAO,CAAC;QACzB;QAEA,IAAI,CAACU,MAAM,GAAG,KAAK;MACpB;MAEA,IAAI8I,MAAM,EAAE;QACXC,MAAM,CAACtd,MAAM,GAAG,CAAC;QACjB,IAAI,CAACqU,YAAY,GAAGuB,KAAK,CAAC5V,MAAM;MACjC;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEe,CAAC,CAAC8W,QAAQ,GAAG,UAAS6F,IAAI,EAAE;MAC3B,IAAI,CAAClI,mBAAmB,CAAC,IAAI,CAAC;MAC9B,IAAI,CAAC5B,OAAO,GAAG,IAAI,CAACO,KAAK,GAAGuJ,IAAI;MAChC,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE3c,CAAC,CAAC0Y,UAAU,GAAG,UAASkE,MAAM,EAAE;MAC/B,IAAI,CAACnI,mBAAmB,CAAC,IAAI,CAAC;MAC9B,IAAI,IAAI,CAAC5B,OAAO,GAAG,IAAI,CAACC,OAAO,GAAG8J,MAAM,EAAE;QACzCA,MAAM,CAACzE,WAAW,GAAG,IAAI,CAAChF,kBAAkB;MAC7C;MACA,OAAO,IAAI;IACZ,CAAC;;IAEF;IACC;AACF;AACA;IACE;AACF;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACQ,CAAC,CAAC0B,MAAM,GAAG,UAAS9X,CAAC,EAAEiL,CAAC,EAAE;MAC1B,IAAI,CAACjL,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE9K,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACQ,MAAM,CAAC,IAAI,CAAC7X,CAAC,EAAC,IAAI,CAACiL,CAAC,CAAC;IAAE,CAAC;;IAEhE;AACF;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE,CAACmL,CAAC,CAACwB,MAAM,GAAG,UAAS5X,CAAC,EAAEiL,CAAC,EAAE;MAC1B,IAAI,CAACjL,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE9K,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACM,MAAM,CAAC,IAAI,CAAC3X,CAAC,EAAE,IAAI,CAACiL,CAAC,CAAC;IAAE,CAAC;;IAGjE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACmL,CAAC,CAAC6B,KAAK,GAAG,UAASxI,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEoI,MAAM,EAAE;MAC3C,IAAI,CAACvI,EAAE,GAAGA,EAAE;MAAE,IAAI,CAACC,EAAE,GAAGA,EAAE;MAC1B,IAAI,CAACC,EAAE,GAAGA,EAAE;MAAE,IAAI,CAACC,EAAE,GAAGA,EAAE;MAC1B,IAAI,CAACoI,MAAM,GAAGA,MAAM;IACrB,CAAC,EAAE7X,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACU,KAAK,CAAC,IAAI,CAACtI,EAAE,EAAE,IAAI,CAACC,EAAE,EAAE,IAAI,CAACC,EAAE,EAAE,IAAI,CAACC,EAAE,EAAE,IAAI,CAACoI,MAAM,CAAC;IAAE,CAAC;;IAEjG;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAAC5B,CAAC,CAACkC,GAAG,GAAG,UAAStY,CAAC,EAAEiL,CAAC,EAAE+M,MAAM,EAAEG,UAAU,EAAEC,QAAQ,EAAEC,aAAa,EAAE;MACpE,IAAI,CAACrY,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAAC+M,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACG,UAAU,GAAGA,UAAU;MAAE,IAAI,CAACC,QAAQ,GAAGA,QAAQ;MACtD,IAAI,CAACC,aAAa,GAAG,CAAC,CAACA,aAAa;IACrC,CAAC,EAAElY,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACa,GAAG,CAAC,IAAI,CAAClY,CAAC,EAAE,IAAI,CAACiL,CAAC,EAAE,IAAI,CAAC+M,MAAM,EAAE,IAAI,CAACG,UAAU,EAAE,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACC,aAAa,CAAC;IAAE,CAAC;;IAE/H;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACjC,CAAC,CAACsC,gBAAgB,GAAG,UAASF,GAAG,EAAEC,GAAG,EAAEzY,CAAC,EAAEiL,CAAC,EAAE;MAC9C,IAAI,CAACuN,GAAG,GAAGA,GAAG;MAAE,IAAI,CAACC,GAAG,GAAGA,GAAG;MAC9B,IAAI,CAACzY,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE9K,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACkB,gBAAgB,CAAC,IAAI,CAACC,GAAG,EAAE,IAAI,CAACC,GAAG,EAAE,IAAI,CAACzY,CAAC,EAAE,IAAI,CAACiL,CAAC,CAAC;IAAE,CAAC;;IAE/F;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACmL,CAAC,CAAC4C,aAAa,GAAG,UAASJ,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAE/Y,CAAC,EAAEiL,CAAC,EAAE;MACzD,IAAI,CAAC2N,IAAI,GAAGA,IAAI;MAAE,IAAI,CAACC,IAAI,GAAGA,IAAI;MAClC,IAAI,CAACC,IAAI,GAAGA,IAAI;MAAE,IAAI,CAACC,IAAI,GAAGA,IAAI;MAClC,IAAI,CAAC/Y,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE9K,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACsB,aAAa,CAAC,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAAC/Y,CAAC,EAAE,IAAI,CAACiL,CAAC,CAAC;IAAE,CAAC;;IAEpH;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACmL,CAAC,CAAC+C,IAAI,GAAG,UAASnZ,CAAC,EAAEiL,CAAC,EAAEgO,CAAC,EAAEC,CAAC,EAAE;MAC9B,IAAI,CAAClZ,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAACgO,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACC,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE/Y,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAAC9H,IAAI,CAAC,IAAI,CAACvP,CAAC,EAAE,IAAI,CAACiL,CAAC,EAAE,IAAI,CAACgO,CAAC,EAAE,IAAI,CAACC,CAAC,CAAC;IAAE,CAAC;;IAE/E;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAAC9C,CAAC,CAACiD,SAAS,GAAG,YAAW,CAC1B,CAAC,EAAElZ,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAAC+B,SAAS,CAAC,CAAC;IAAE,CAAC;;IAEtD;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAAChD,CAAC,CAACkJ,SAAS,GAAG,YAAW,CAC1B,CAAC,EAAEnf,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACkI,SAAS,CAAC,CAAC;IAAE,CAAC;;IAEtD;AACF;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE9c,CAAC,GAAG,CAAC2T,CAAC,CAACoD,IAAI,GAAG,UAASgG,KAAK,EAAE/S,MAAM,EAAE;MACrC,IAAI,CAAC+S,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC/S,MAAM,GAAGA,MAAM;IACrB,CAAC,EAAEtM,SAAS;IACZsC,CAAC,CAAC8U,IAAI,GAAG,UAASF,GAAG,EAAE;MACtB,IAAI,CAAC,IAAI,CAACmI,KAAK,EAAE;QAAE;MAAQ;MAC3BnI,GAAG,CAACoI,SAAS,GAAG,IAAI,CAACD,KAAK;MAC1B,IAAIE,GAAG,GAAG,IAAI,CAACjT,MAAM;MACrB,IAAIiT,GAAG,EAAE;QAAErI,GAAG,CAACsI,IAAI,CAAC,CAAC;QAAEtI,GAAG,CAACuI,SAAS,CAACF,GAAG,CAACnU,CAAC,EAAEmU,GAAG,CAAClU,CAAC,EAAEkU,GAAG,CAACjU,CAAC,EAAEiU,GAAG,CAAChU,CAAC,EAAEgU,GAAG,CAAC/T,EAAE,EAAE+T,GAAG,CAAC9T,EAAE,CAAC;MAAE;MAClFyL,GAAG,CAAC+H,IAAI,CAAC,CAAC;MACV,IAAIM,GAAG,EAAE;QAAErI,GAAG,CAACwI,OAAO,CAAC,CAAC;MAAE;IAC3B,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEpd,CAAC,CAACqX,cAAc,GAAG,UAASJ,MAAM,EAAEC,MAAM,EAAEC,EAAE,EAAEC,EAAE,EAAEpK,EAAE,EAAEC,EAAE,EAAE;MAC3D,IAAI9O,CAAC,GAAG,IAAI,CAAC4e,KAAK,GAAInK,QAAQ,CAAC2B,IAAI,CAAC8I,oBAAoB,CAAClG,EAAE,EAAEC,EAAE,EAAEpK,EAAE,EAAEC,EAAE,CAAC;MACxE,KAAK,IAAIlO,CAAC,GAAC,CAAC,EAAEC,CAAC,GAACiY,MAAM,CAAChY,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QAAEZ,CAAC,CAACmf,YAAY,CAACpG,MAAM,CAACnY,CAAC,CAAC,EAAEkY,MAAM,CAAClY,CAAC,CAAC,CAAC;MAAE;MACjFZ,CAAC,CAACoC,KAAK,GAAG;QAAC0W,MAAM,EAACA,MAAM;QAAEC,MAAM,EAACA,MAAM;QAAEC,EAAE,EAACA,EAAE;QAAEC,EAAE,EAACA,EAAE;QAAEpK,EAAE,EAACA,EAAE;QAAEC,EAAE,EAACA,EAAE;QAAE9N,IAAI,EAAC;MAAQ,CAAC;MACnF,OAAO,IAAI;IACZ,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEa,CAAC,CAACyX,cAAc,GAAG,UAASR,MAAM,EAAEC,MAAM,EAAEC,EAAE,EAAEC,EAAE,EAAEG,EAAE,EAAEvK,EAAE,EAAEC,EAAE,EAAEuK,EAAE,EAAE;MACnE,IAAIrZ,CAAC,GAAG,IAAI,CAAC4e,KAAK,GAAInK,QAAQ,CAAC2B,IAAI,CAACgJ,oBAAoB,CAACpG,EAAE,EAAEC,EAAE,EAAEG,EAAE,EAAEvK,EAAE,EAAEC,EAAE,EAAEuK,EAAE,CAAC;MAChF,KAAK,IAAIzY,CAAC,GAAC,CAAC,EAAEC,CAAC,GAACiY,MAAM,CAAChY,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QAAEZ,CAAC,CAACmf,YAAY,CAACpG,MAAM,CAACnY,CAAC,CAAC,EAAEkY,MAAM,CAAClY,CAAC,CAAC,CAAC;MAAE;MACjFZ,CAAC,CAACoC,KAAK,GAAG;QAAC0W,MAAM,EAACA,MAAM;QAAEC,MAAM,EAACA,MAAM;QAAEC,EAAE,EAACA,EAAE;QAAEC,EAAE,EAACA,EAAE;QAAEG,EAAE,EAACA,EAAE;QAAEvK,EAAE,EAACA,EAAE;QAAEC,EAAE,EAACA,EAAE;QAAEuK,EAAE,EAACA,EAAE;QAAErY,IAAI,EAAC;MAAQ,CAAC;MACjG,OAAO,IAAI;IACZ,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEa,CAAC,CAAC4X,MAAM,GAAG,UAASnG,KAAK,EAAEkG,UAAU,EAAE;MACtC,IAAIlG,KAAK,CAACP,YAAY,IAAIO,KAAK,CAACR,UAAU,IAAIQ,KAAK,CAAC+L,UAAU,IAAI,CAAC,EAAE;QACpE,IAAIrf,CAAC,GAAG,IAAI,CAAC4e,KAAK,GAAGnK,QAAQ,CAAC2B,IAAI,CAACkJ,aAAa,CAAChM,KAAK,EAAEkG,UAAU,IAAI,EAAE,CAAC;QACzExZ,CAAC,CAACoC,KAAK,GAAG;UAACkR,KAAK,EAAEA,KAAK;UAAEkG,UAAU,EAAEA,UAAU;UAAExY,IAAI,EAAE;QAAQ,CAAC;MACjE;MACA,OAAO,IAAI;IACZ,CAAC;IACDa,CAAC,CAACiV,IAAI,GAAG,KAAK;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACEjV,CAAC,GAAG,CAAC2T,CAAC,CAACgF,MAAM,GAAG,UAASoE,KAAK,EAAE5E,WAAW,EAAE;MAC5C,IAAI,CAAC4E,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC5E,WAAW,GAAGA,WAAW;IAC/B,CAAC,EAAEza,SAAS;IACZsC,CAAC,CAAC8U,IAAI,GAAG,UAASF,GAAG,EAAE;MACtB,IAAI,CAAC,IAAI,CAACmI,KAAK,EAAE;QAAE;MAAQ;MAC3BnI,GAAG,CAAC8I,WAAW,GAAG,IAAI,CAACX,KAAK;MAC5B,IAAI,IAAI,CAAC5E,WAAW,EAAE;QAAEvD,GAAG,CAACsI,IAAI,CAAC,CAAC;QAAEtI,GAAG,CAAC+I,YAAY,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;MAAE;MACnE/I,GAAG,CAACgI,MAAM,CAAC,CAAC;MACZ,IAAI,IAAI,CAACzE,WAAW,EAAE;QAAEvD,GAAG,CAACwI,OAAO,CAAC,CAAC;MAAE;IACxC,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEpd,CAAC,CAACqX,cAAc,GAAG1D,CAAC,CAACoD,IAAI,CAACrZ,SAAS,CAAC2Z,cAAc;IAClD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErX,CAAC,CAACyX,cAAc,GAAG9D,CAAC,CAACoD,IAAI,CAACrZ,SAAS,CAAC+Z,cAAc;IAClD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEzX,CAAC,CAAC4X,MAAM,GAAGjE,CAAC,CAACoD,IAAI,CAACrZ,SAAS,CAACka,MAAM;IAClC5X,CAAC,CAACiV,IAAI,GAAG,KAAK;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACEjV,CAAC,GAAG,CAAC2T,CAAC,CAACyE,WAAW,GAAG,UAAS/L,KAAK,EAAE2L,IAAI,EAAEC,MAAM,EAAEC,UAAU,EAAEC,WAAW,EAAE;MAC3E,IAAI,CAAC9L,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC2L,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACC,UAAU,GAAGA,UAAU;MAC5B,IAAI,CAACC,WAAW,GAAGA,WAAW;IAC/B,CAAC,EAAEza,SAAS;IACZsC,CAAC,CAAC8U,IAAI,GAAG,UAASF,GAAG,EAAE;MACtBA,GAAG,CAACgJ,SAAS,GAAI,IAAI,CAACvR,KAAK,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,CAACA,KAAM;MACvDuI,GAAG,CAACiJ,OAAO,GAAI,IAAI,CAAC7F,IAAI,IAAI,IAAI,GAAG,MAAM,GAAI8F,KAAK,CAAC,IAAI,CAAC9F,IAAI,CAAC,GAAG,IAAI,CAACA,IAAI,GAAGpF,QAAQ,CAACuB,eAAe,CAAC,IAAI,CAAC6D,IAAI,CAAG;MACjHpD,GAAG,CAACmJ,QAAQ,GAAI,IAAI,CAAC9F,MAAM,IAAI,IAAI,GAAG,OAAO,GAAI6F,KAAK,CAAC,IAAI,CAAC7F,MAAM,CAAC,GAAG,IAAI,CAACA,MAAM,GAAGrF,QAAQ,CAACwB,iBAAiB,CAAC,IAAI,CAAC6D,MAAM,CAAG;MAC7HrD,GAAG,CAACsD,UAAU,GAAI,IAAI,CAACA,UAAU,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,CAACA,UAAW;MACnEtD,GAAG,CAACuD,WAAW,GAAI,IAAI,CAACA,WAAW,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,CAACA,WAAY;IACxE,CAAC;IACDnY,CAAC,CAACiV,IAAI,GAAG,KAAK;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACtB,CAAC,CAAC6E,UAAU,GAAG,UAASF,QAAQ,EAAEC,MAAM,EAAE;MAC1C,IAAI,CAACD,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACC,MAAM,GAAGA,MAAM,IAAE,CAAC;IACxB,CAAC,EAAE7a,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MACjC,IAAIA,GAAG,CAACoJ,WAAW,EAAE;QAAE;QACtBpJ,GAAG,CAACoJ,WAAW,CAAC,IAAI,CAAC1F,QAAQ,IAAG3E,CAAC,CAAC6E,UAAU,CAACyF,cAAc,CAAC,CAAC,CAAC;QAC9DrJ,GAAG,CAACsJ,cAAc,GAAG,IAAI,CAAC3F,MAAM,IAAE,CAAC;MACpC;IACD,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE5E,CAAC,CAAC6E,UAAU,CAACyF,cAAc,GAAG,EAAE;;IAEhC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACtK,CAAC,CAAC6F,SAAS,GAAG,UAASjc,CAAC,EAAEiL,CAAC,EAAEgO,CAAC,EAAEC,CAAC,EAAE2C,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;MAC3E,IAAI,CAAChc,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAACgO,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACC,CAAC,GAAGA,CAAC;MACtB,IAAI,CAAC2C,QAAQ,GAAGA,QAAQ;MAAE,IAAI,CAACC,QAAQ,GAAGA,QAAQ;MAClD,IAAI,CAACC,QAAQ,GAAGA,QAAQ;MAAE,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACnD,CAAC,EAAE7b,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MACjC,IAAIuJ,GAAG,GAAG,CAAC3H,CAAC,GAACC,CAAC,GAACD,CAAC,GAACC,CAAC,IAAE,CAAC;MACrB,IAAI2H,GAAG,GAAC,CAAC;QAAEC,GAAG,GAAC,CAAC;QAAEC,GAAG,GAAC,CAAC;QAAEC,GAAG,GAAC,CAAC;MAC9B,IAAIhhB,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEiL,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEgO,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEC,CAAC,GAAG,IAAI,CAACA,CAAC;MAClD,IAAI+H,GAAG,GAAG,IAAI,CAACpF,QAAQ;QAAEqF,GAAG,GAAG,IAAI,CAACpF,QAAQ;QAAEqF,GAAG,GAAG,IAAI,CAACpF,QAAQ;QAAEqF,GAAG,GAAG,IAAI,CAACpF,QAAQ;MAEtF,IAAIiF,GAAG,GAAG,CAAC,EAAE;QAAEA,GAAG,IAAKJ,GAAG,GAAC,CAAC,CAAE;MAAE;MAChC,IAAII,GAAG,GAAGL,GAAG,EAAE;QAAEK,GAAG,GAAGL,GAAG;MAAE;MAC5B,IAAIM,GAAG,GAAG,CAAC,EAAE;QAAEA,GAAG,IAAKJ,GAAG,GAAC,CAAC,CAAE;MAAE;MAChC,IAAII,GAAG,GAAGN,GAAG,EAAE;QAAEM,GAAG,GAAGN,GAAG;MAAE;MAC5B,IAAIO,GAAG,GAAG,CAAC,EAAE;QAAEA,GAAG,IAAKJ,GAAG,GAAC,CAAC,CAAE;MAAE;MAChC,IAAII,GAAG,GAAGP,GAAG,EAAE;QAAEO,GAAG,GAAGP,GAAG;MAAE;MAC5B,IAAIQ,GAAG,GAAG,CAAC,EAAE;QAAEA,GAAG,IAAKJ,GAAG,GAAC,CAAC,CAAE;MAAE;MAChC,IAAII,GAAG,GAAGR,GAAG,EAAE;QAAEQ,GAAG,GAAGR,GAAG;MAAE;MAE5BvJ,GAAG,CAACM,MAAM,CAAC3X,CAAC,GAACiZ,CAAC,GAACiI,GAAG,EAAEjW,CAAC,CAAC;MACtBoM,GAAG,CAACU,KAAK,CAAC/X,CAAC,GAACiZ,CAAC,GAACiI,GAAG,GAACJ,GAAG,EAAE7V,CAAC,GAACiW,GAAG,GAACJ,GAAG,EAAE9gB,CAAC,GAACiZ,CAAC,EAAEhO,CAAC,GAACiW,GAAG,EAAEA,GAAG,CAAC;MAClD7J,GAAG,CAACQ,MAAM,CAAC7X,CAAC,GAACiZ,CAAC,EAAEhO,CAAC,GAACiO,CAAC,GAACiI,GAAG,CAAC;MACxB9J,GAAG,CAACU,KAAK,CAAC/X,CAAC,GAACiZ,CAAC,GAACkI,GAAG,GAACJ,GAAG,EAAE9V,CAAC,GAACiO,CAAC,GAACiI,GAAG,GAACJ,GAAG,EAAE/gB,CAAC,GAACiZ,CAAC,GAACkI,GAAG,EAAElW,CAAC,GAACiO,CAAC,EAAEiI,GAAG,CAAC;MACtD9J,GAAG,CAACQ,MAAM,CAAC7X,CAAC,GAACohB,GAAG,EAAEnW,CAAC,GAACiO,CAAC,CAAC;MACtB7B,GAAG,CAACU,KAAK,CAAC/X,CAAC,GAACohB,GAAG,GAACJ,GAAG,EAAE/V,CAAC,GAACiO,CAAC,GAACkI,GAAG,GAACJ,GAAG,EAAEhhB,CAAC,EAAEiL,CAAC,GAACiO,CAAC,GAACkI,GAAG,EAAEA,GAAG,CAAC;MAClD/J,GAAG,CAACQ,MAAM,CAAC7X,CAAC,EAAEiL,CAAC,GAACgW,GAAG,CAAC;MACpB5J,GAAG,CAACU,KAAK,CAAC/X,CAAC,GAACihB,GAAG,GAACJ,GAAG,EAAE5V,CAAC,GAACgW,GAAG,GAACJ,GAAG,EAAE7gB,CAAC,GAACihB,GAAG,EAAEhW,CAAC,EAAEgW,GAAG,CAAC;MAC9C5J,GAAG,CAAC+B,SAAS,CAAC,CAAC;IAChB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAAChD,CAAC,CAAC+F,MAAM,GAAG,UAASnc,CAAC,EAAEiL,CAAC,EAAE+M,MAAM,EAAE;MAClC,IAAI,CAAChY,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAAC+M,MAAM,GAAGA,MAAM;IACrB,CAAC,EAAE7X,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MAAEA,GAAG,CAACa,GAAG,CAAC,IAAI,CAAClY,CAAC,EAAE,IAAI,CAACiL,CAAC,EAAE,IAAI,CAAC+M,MAAM,EAAE,CAAC,EAAE9P,IAAI,CAAC6D,EAAE,GAAC,CAAC,CAAC;IAAE,CAAC;;IAEzF;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACqK,CAAC,CAACiG,OAAO,GAAG,UAASrc,CAAC,EAAEiL,CAAC,EAAEgO,CAAC,EAAEC,CAAC,EAAE;MACjC,IAAI,CAAClZ,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAACgO,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACC,CAAC,GAAGA,CAAC;IACvB,CAAC,EAAE/Y,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MACjC,IAAIrX,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEiL,CAAC,GAAG,IAAI,CAACA,CAAC;MAC1B,IAAIgO,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEC,CAAC,GAAG,IAAI,CAACA,CAAC;MAE1B,IAAImI,CAAC,GAAG,SAAS;MACjB,IAAIC,EAAE,GAAIrI,CAAC,GAAG,CAAC,GAAIoI,CAAC;MACpB,IAAIE,EAAE,GAAIrI,CAAC,GAAG,CAAC,GAAImI,CAAC;MACpB,IAAIG,EAAE,GAAGxhB,CAAC,GAAGiZ,CAAC;MACd,IAAIwI,EAAE,GAAGxW,CAAC,GAAGiO,CAAC;MACd,IAAIwI,EAAE,GAAG1hB,CAAC,GAAGiZ,CAAC,GAAG,CAAC;MAClB,IAAI0I,EAAE,GAAG1W,CAAC,GAAGiO,CAAC,GAAG,CAAC;MAElB7B,GAAG,CAACM,MAAM,CAAC3X,CAAC,EAAE2hB,EAAE,CAAC;MACjBtK,GAAG,CAACsB,aAAa,CAAC3Y,CAAC,EAAE2hB,EAAE,GAACJ,EAAE,EAAEG,EAAE,GAACJ,EAAE,EAAErW,CAAC,EAAEyW,EAAE,EAAEzW,CAAC,CAAC;MAC5CoM,GAAG,CAACsB,aAAa,CAAC+I,EAAE,GAACJ,EAAE,EAAErW,CAAC,EAAEuW,EAAE,EAAEG,EAAE,GAACJ,EAAE,EAAEC,EAAE,EAAEG,EAAE,CAAC;MAC9CtK,GAAG,CAACsB,aAAa,CAAC6I,EAAE,EAAEG,EAAE,GAACJ,EAAE,EAAEG,EAAE,GAACJ,EAAE,EAAEG,EAAE,EAAEC,EAAE,EAAED,EAAE,CAAC;MAC/CpK,GAAG,CAACsB,aAAa,CAAC+I,EAAE,GAACJ,EAAE,EAAEG,EAAE,EAAEzhB,CAAC,EAAE2hB,EAAE,GAACJ,EAAE,EAAEvhB,CAAC,EAAE2hB,EAAE,CAAC;IAC9C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;IACE;AACF;AACA;AACA;AACA;IACE,CAACvL,CAAC,CAACqG,QAAQ,GAAG,UAASzc,CAAC,EAAEiL,CAAC,EAAE+M,MAAM,EAAEuE,KAAK,EAAEC,SAAS,EAAEhP,KAAK,EAAE;MAC7D,IAAI,CAACxN,CAAC,GAAGA,CAAC;MAAE,IAAI,CAACiL,CAAC,GAAGA,CAAC;MACtB,IAAI,CAAC+M,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACuE,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACC,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAAChP,KAAK,GAAGA,KAAK;IACnB,CAAC,EAAErN,SAAS,CAACoX,IAAI,GAAG,UAASF,GAAG,EAAE;MACjC,IAAIrX,CAAC,GAAG,IAAI,CAACA,CAAC;QAAEiL,CAAC,GAAG,IAAI,CAACA,CAAC;MAC1B,IAAI+M,MAAM,GAAG,IAAI,CAACA,MAAM;MACxB,IAAIxK,KAAK,GAAG,CAAC,IAAI,CAACA,KAAK,IAAE,CAAC,IAAE,GAAG,GAACtF,IAAI,CAAC6D,EAAE;MACvC,IAAIwQ,KAAK,GAAG,IAAI,CAACA,KAAK;MACtB,IAAIqF,EAAE,GAAG,CAAC,IAAE,IAAI,CAACpF,SAAS,IAAE,CAAC,CAAC;MAC9B,IAAIjR,CAAC,GAAGrD,IAAI,CAAC6D,EAAE,GAACwQ,KAAK;MAErBlF,GAAG,CAACM,MAAM,CAAC3X,CAAC,GAACkI,IAAI,CAACkF,GAAG,CAACI,KAAK,CAAC,GAACwK,MAAM,EAAE/M,CAAC,GAAC/C,IAAI,CAACmF,GAAG,CAACG,KAAK,CAAC,GAACwK,MAAM,CAAC;MAC9D,KAAK,IAAIxW,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC+a,KAAK,EAAE/a,CAAC,EAAE,EAAE;QAC3BgM,KAAK,IAAIjC,CAAC;QACV,IAAIqW,EAAE,IAAI,CAAC,EAAE;UACZvK,GAAG,CAACQ,MAAM,CAAC7X,CAAC,GAACkI,IAAI,CAACkF,GAAG,CAACI,KAAK,CAAC,GAACwK,MAAM,GAAC4J,EAAE,EAAE3W,CAAC,GAAC/C,IAAI,CAACmF,GAAG,CAACG,KAAK,CAAC,GAACwK,MAAM,GAAC4J,EAAE,CAAC;QACrE;QACApU,KAAK,IAAIjC,CAAC;QACV8L,GAAG,CAACQ,MAAM,CAAC7X,CAAC,GAACkI,IAAI,CAACkF,GAAG,CAACI,KAAK,CAAC,GAACwK,MAAM,EAAE/M,CAAC,GAAC/C,IAAI,CAACmF,GAAG,CAACG,KAAK,CAAC,GAACwK,MAAM,CAAC;MAC/D;MACAX,GAAG,CAAC+B,SAAS,CAAC,CAAC;IAChB,CAAC;;IAED;IACA/D,QAAQ,CAAC6J,QAAQ,GAAG,IAAI9I,CAAC,CAACkJ,SAAS,CAAC,CAAC,CAAC,CAAC;;IAGvChf,QAAQ,CAAC+U,QAAQ,GAAGA,QAAQ;EAC7B,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASwM,aAAaA,CAAA,EAAG;MACxB,IAAI,CAAClQ,2BAA2B,CAAC,CAAC;;MAGnC;MACC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACnD,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACsT,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,CAAC;;MAEhB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,EAAE,GAAG1hB,QAAQ,CAAC4J,GAAG,CAACjD,GAAG,CAAC,CAAC;;MAE5B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACgb,YAAY,GAAG,IAAI;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAClP,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACpO,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACqI,IAAI,GAAG,CAAC;;MAEb;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,IAAI,GAAG,CAAC;;MAEb;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACJ,QAAQ,GAAG,CAAC;;MAEjB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACF,MAAM,GAAG,CAAC;;MAEf;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,CAAC;;MAEf;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACE,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACyB,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACF,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACvO,CAAC,GAAG,CAAC;;MAEV;AACH;AACA;AACA;AACA;MACG,IAAI,CAACiL,CAAC,GAAG,CAAC;;MAEV;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACkX,eAAe,GAAG,IAAI;;MAE3B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACzT,kBAAkB,GAAG,IAAI;;MAE9B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC0T,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAClS,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACU,MAAM,GAAG,IAAI;;MAGnB;MACC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACyR,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,CAAC;;MAEvB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,CAAC;;MAEvB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,CAAC;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,IAAI;;MAEzB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,IAAIxiB,QAAQ,CAACgO,YAAY,CAAC,CAAC;;MAEzC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACyU,UAAU,GAAG,IAAIziB,QAAQ,CAACuO,SAAS,CAAC,CAAC;;MAE1C;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACmU,OAAO,GAAG,IAAI;IACpB;IACA,IAAIvgB,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACohB,aAAa,EAAEvhB,QAAQ,CAAC4C,eAAe,CAAC;;IAEhE;IACA;;IAED;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACE2e,aAAa,CAACoB,aAAa,GAAG,CAAC,OAAO,EAAC,UAAU,EAAC,WAAW,EAAC,UAAU,EAAC,WAAW,EAAC,WAAW,EAAC,SAAS,EAAC,SAAS,EAAC,UAAU,CAAC;;IAEhI;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEpB,aAAa,CAACqB,yBAAyB,GAAG,KAAK;;IAE/C;AACF;AACA;AACA;AACA;AACA;AACA;IACErB,aAAa,CAACsB,mBAAmB,GAAG,KAAK,CAAC,CAAC;;IAE3C;AACF;AACA;AACA;AACA;AACA;IACE;AACF;AACA;AACA;AACA;AACA;IACE,IAAIrM,MAAM,GAAGxW,QAAQ,CAACyW,YAAY,GAACzW,QAAQ,CAACyW,YAAY,CAAC,CAAC,GAACvD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC7F,IAAIqD,MAAM,CAACpD,UAAU,EAAE;MACtBmO,aAAa,CAACuB,cAAc,GAAGtM,MAAM;MACrC+K,aAAa,CAACwB,eAAe,GAAGvM,MAAM,CAACpD,UAAU,CAAC,IAAI,CAAC;MACvDoD,MAAM,CAAChI,KAAK,GAAGgI,MAAM,CAAC/H,MAAM,GAAG,CAAC;IACjC;;IAEA;AACF;AACA;AACA;AACA;AACA;IACE8S,aAAa,CAACyB,YAAY,GAAG,CAAC;;IAG/B;IACC;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;;IAEE;AACF;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AA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AC,IAAI4B,KAAK,EAAE;QAAE,IAAI,CAAC5B,CAAC,CAAC,GAAG4B,KAAK,CAAC5B,CAAC,CAAC;MAAE;MAC3C,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEqB,CAAC,CAACgjB,SAAS,GAAG,YAAW;MACxB,IAAI,IAAI,CAACzC,OAAO,EAAE;QAAE,OAAO,IAAI,CAACD,UAAU,CAAC1U,IAAI,CAAC,IAAI,CAAC2U,OAAO,CAAC;MAAE;MAC/D,IAAIlB,WAAW,GAAG,IAAI,CAACA,WAAW;MAClC,IAAIA,WAAW,EAAE;QAChB,IAAIpU,KAAK,GAAG,IAAI,CAACiV,WAAW;QAC5B,OAAO,IAAI,CAACI,UAAU,CAAClX,SAAS,CAAC,IAAI,CAAC0W,aAAa,EAAE,IAAI,CAACC,aAAa,EAAEV,WAAW,CAAChT,KAAK,GAACpB,KAAK,EAAEoU,WAAW,CAAC/S,MAAM,GAACrB,KAAK,CAAC;MAC5H;MACA,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEjL,CAAC,CAACijB,oBAAoB,GAAG,YAAW;MACnC,OAAO,IAAI,CAACC,UAAU,CAAC,CAAC;IACzB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEljB,CAAC,CAACmjB,SAAS,GAAG,UAAS5lB,CAAC,EAAEiL,CAAC,EAAE6D,KAAK,EAAEC,MAAM,EAAE;MAC3C,IAAI/O,CAAC,IAAI,IAAI,EAAE;QAAE,IAAI,CAACgjB,OAAO,GAAGhjB,CAAC;MAAE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AAC3O,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC4O,kBAAkB,GAAG,KAAK;;MAE/B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,KAAK;;MAE1B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,IAAI;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,KAAK;;MAG7B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,IAAI;;MAE5B;AACH;AACA;AACA;AACA;AACA;;MAGE;MACC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,iBAAiB,GAAG,IAAI;;MAE7B;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,oBAAoB,GAAG,IAAI;;MAEhC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,IAAI;;MAEtB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,IAAI;;MAGvB;MACC,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC;IAC3B;IACA,IAAIxoB,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACupB,KAAK,EAAE1pB,QAAQ,CAAC4mB,SAAS,CAAC;;IAElD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;A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,CAACC,WAAW,EAAEC,gBAAgB,EAAE;MAC9C,IAAI,CAAC7I,yBAAyB,CAAC,CAAC;;MAGjC;MACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC8I,YAAY,GAAG,CAAC;;MAErB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,IAAI;;MAE5B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACzqB,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACsqB,WAAW,GAAGA,WAAW;;MAE9B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACI,qBAAqB,GAAG,CAAC;;MAE9B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACjpB,SAAS,GAAG,CAAC;;MAGnB;MACC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACkpB,UAAU,GAAG,IAAI;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,IAAI;;MAEzB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,KAAK;MAGzB,IAAIN,gBAAgB,IAAI,IAAI,EAAE;QAAE,IAAI,CAAC5e,WAAW,CAAC4e,gBAAgB,CAAC;MAAE;IACrE;IACA,IAAIvtB,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACqvB,MAAM,EAAExvB,QAAQ,CAACuhB,aAAa,CAAC;;IAEvD;AACF;AACA;AACA;AACA;AACA;IACEpf,CAAC,CAACY,UAAU,GAAGysB,MAAM,CAAC,CAAC;;IAGxB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACErtB,CAAC,CAACihB,SAAS,GAAG,YAAW;MACxB,IAAI8D,UAAU,GA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8yB,UAAU,EAAE,WAAW,CAAC;EAChE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASyB,SAASA,CAACtsB,IAAI,EAAEusB,aAAa,EAAEC,IAAI,EAAEC,MAAM,EAAE;MACrD,IAAI,CAACvL,qBAAqB,CAAC,CAAC;MAC5B,CAACoL,SAAS,CAACI,MAAM,IAAEJ,SAAS,CAACzvB,IAAI,CAAC,CAAC,CAAC,CAAC;;MAGtC;MACC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACmD,IAAI,GAAGA,IAAI,IAAEssB,SAAS,CAACK,WAAW;;MAEvC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACJ,aAAa,GAAGA,aAAa,IAAI,CAAC;;MAEvC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,IAAI,GAAGA,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACtF,YAAY,GAAG,CAAC;;MAErB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC0F,QAAQ,GAAG,IAAIr1B,QAAQ,CAACs1B,QAAQ,CAAC,IAAI,EAAEJ,MAAM,EAAE;QAAC/vB,MAAM,EAAC,IAAI;QAAEowB,QAAQ,EAACP,aAAa;QAAEQ,QAAQ,EAAC;MAAI,CAAC,CAAC;;MAEzG;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACrwB,MAAM,GAAG,KAAK;;MAEnB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACkL,cAAc,GAAG,IAAI;;MAE1B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAColB,SAAS,GAAG,IAAI;;MAErB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,IAAI,CAACA,WAAW,IAAE,IAAI,CAAC,CAAC;;MAE3C;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC9uB,SAAS,GAAG,IAAI;;MAGtB;MACC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC+uB,YAAY,GAAG,CAAC;;MAErB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,EAAE,GAAG,CAAC;;MAEX;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IACnB;IACA,IAAI5zB,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAAC40B,SAAS,EAAE/0B,QAAQ,CAAC4mB,SAAS,CAAC;;IAGvD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEmO,SAAS,CAACK,WAAW,GAAG,aAAa;;IAErC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEL,SAAS,CAACiB,YAAY,GAAG,QAAQ;;IAEjC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEjB,SAAS,CAACkB,OAAO,GAAG,SAAS;;IAG9B;IACClB,SAAS,CAACI,MAAM,GAAG,KAAK;;IAGzB;IACCJ,SAAS,CAACzvB,IAAI,GAAG,YAAW;MAC3B,IAAIyvB,SAAS,CAACI,MAAM,EAAE;QAAE;MAAQ;MAChC;MACAe,eAAe,CAACC,OAAO,CAAC,CAAC;MACzBpB,SAAS,CAACI,MAAM,GAAG,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AAC2O,MAAM,CAACwgB,CAAC,CAAC,GAACyG,EAAE,GAAC1lB,KAAK,CAAC;QACrC;QACA/P,IAAI,CAACiQ,IAAI,CAACvB,IAAI,CAAC,GAAGuB,IAAI;QACtB0lB,KAAK,CAAC91B,IAAI,CAACoQ,IAAI,CAACvB,IAAI,CAAC;MACtB;IACD,CAAC;IAGD1S,QAAQ,CAAC24B,gBAAgB,GAAGA,gBAAgB;EAC7C,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASkB,kBAAkBA,CAACjzB,SAAS,EAAE;MACtC,IAAI,CAACyK,2BAA2B,CAAC,CAAC;;MAEnC;MACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC6f,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC4I,SAAS,GAAG,IAAI;;MAErB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACrK,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACriB,KAAK,GAAG,CAAC;;MAEd;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC2sB,OAAO,GAAG,CAAC;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,SAAS,GAAG,GAAG;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACrzB,SAAS,GAAGA,SAAS,IAAI,CAAC;;MAGhC;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC4K,OAAO,GAAG,EAAE;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACD,WAAW,GAAG,CAAC,CAAC;;MAErB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACG,KAAK,GAAG,IAAI;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACwoB,eAAe,GAAG,CAAC;;MAExB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,CAAC;;MAEf;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,CAAC;IAChB;IACA,IAAIl4B,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAAC05B,kBAAkB,EAAE75B,QAAQ,CAAC4C,eAAe,CAAC;;IAErE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAGD;IACCi3B,kBAAkB,CAACS,cAAc,GAAG,oDAAoD;IACxFT,kBAAkB,CAACU,WAAW,GAAG,4BAA4B;;IAE9D;IACC;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEp4B,CAAC,CAACq4B,QAAQ,GAAG,UAASC,MAAM,EAAElL,UAAU,EAAEniB,KAAK,EAAEstB,aAAa,EAAEC,SAAS,EAAE;MAC1E,IAAI,IAAI,CAACjpB,KAAK,EAAE;QAAE,MAAMmoB,kBAAkB,CAACU,WAAW;MAAE;MACxD,IAAItrB,IAAI,GAAGsgB,UAAU,IAAEkL,MAAM,CAAC1U,MAAM,IAAE0U,MAAM,CAACG,aAAa;MAC1D,IAAI,CAAC3rB,IAAI,IAAEwrB,MAAM,CAACtV,SAAS,EAAE;QAAElW,IAAI,GAAGwrB,MAAM,CAACtV,SAAS,CAAC,CAAC;MAAE;MAC1D,IAAI,CAAClW,IAAI,EAAE;QAAE,OAAO,IAAI;MAAE;MAC1B7B,KAAK,GAAGA,KAAK,IAAE,CAAC;MAChB,OAAO,IAAI,CAACoE,OAAO,CAAC3N,IAAI,CAAC;QAAC42B,MAAM,EAACA,MAAM;QAAElL,UAAU,EAACtgB,IAAI;QAAE7B,KAAK,EAACA,KAAK;QAAEytB,KAAK,EAACH,aAAa;QAAE12B,IAAI,EAAC22B,SAAS;QAAElT,KAAK,EAAC,IAAI,CAACjW,OAAO,CAACpQ,MAAM;QAAEqN,MAAM,EAACQ,IAAI,CAACR,MAAM,GAACrB;MAAK,CAAC,CAAC,GAAC,CAAC;IACpK,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEjL,CAAC,CAAC24B,YAAY,GAAG,UAASpoB,IAAI,EAAEF,MAAM,EAAE4B,IAAI,EAAED,KAAK,EAAE;MACpD,IAAI,IAAI,CAACzC,KAAK,EAAE;QAAE,MAAMmoB,kBAAkB,CAACU,WAAW;MAAE;MACxD,IAAI,CAAChpB,WAAW,CAACmB,IAAI,CAAC,GAAG;QAACF,MAAM,EAACA,MAAM;QAAE4B,IAAI,EAACA,IAAI;QAAED,KAAK,EAACA;MAAK,CAAC;IACjE,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEhS,CAAC,CAAC44B,YAAY,GAAG,UAASN,MAAM,EAAElL,UAAU,EAAEniB,KAAK,EAAEstB,aAAa,EAAEC,SAAS,EAAEK,aAAa,EAAE;MAC7F,IAAI,IAAI,CAACtpB,KAAK,EAAE;QAAE,MAAMmoB,kBAAkB,CAACU,WAAW;MAAE;MACxD,IAAIU,KAAK,GAAGR,MAAM,CAAC/E,WAAW;MAC9B,IAAIzmB,IAAI,GAAGsgB,UAAU,IAAEkL,MAAM,CAAC1U,MAAM,IAAE0U,MAAM,CAACG,aAAa;MAC1D,IAAI,CAAC3rB,IAAI,IAAEwrB,MAAM,CAACtV,SAAS,EAAE;QAAElW,IAAI,GAAGwrB,MAAM,CAACtV,SAAS,CAAC,CAAC;MAAE;MAC1D,IAAI,CAAClW,IAAI,IAAI,CAACgsB,KAAK,EAAE;QAAE;MAAQ;MAE/B,IAAI/5B,CAAC;QAAEC,CAAC;QAAE+5B,cAAc,GAAG,IAAI,CAAC1pB,OAAO,CAACpQ,MAAM;MAC9C,IAAIo1B,QAAQ,GAAGiE,MAAM,CAACpF,QAAQ,CAACmB,QAAQ;MACvC,KAAKt1B,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACs1B,QAAQ,EAAEt1B,CAAC,EAAE,EAAE;QAC1B,IAAI2L,CAAC,GAAIouB,KAAK,IAAEA,KAAK,CAAC/5B,CAAC,CAAC,GAAI+5B,KAAK,CAAC/5B,CAAC,CAAC,GAAG+N,IAAI;QAC3C,IAAI,CAACurB,QAAQ,CAACC,MAAM,EAAE5tB,CAAC,EAAEO,KAAK,EAAE,IAAI,CAAC+tB,oBAAoB,EAAE;UAACj6B,CAAC,EAACA,CAAC;UAAE+F,CAAC,EAACyzB,aAAa;UAAEtvB,CAAC,EAACuvB;QAAS,CAAC,CAAC;MAChG;MACA,IAAIzF,MAAM,GAAGuF,MAAM,CAACpF,QAAQ,CAAC+F,OAAO;MACpC,IAAIC,IAAI,GAAG,EAAE;MACb,KAAK,IAAIv6B,CAAC,IAAIo0B,MAAM,EAAE;QACrBmG,IAAI,CAACx3B,IAAI,CAAC;UAAC4jB,KAAK,EAACyN,MAAM,CAACp0B,CAAC,CAAC;UAAE8P,KAAK,EAAC9P;QAAC,CAAC,CAAC;MACtC;MACA,IAAIu6B,IAAI,CAACj6B,MAAM,EAAE;QAChBi6B,IAAI,CAACxT,IAAI,CAAC,UAAS5c,CAAC,EAACC,CAAC,EAAC;UAAE,OAAOD,CAAC,CAACwc,KAAK,GAACvc,CAAC,CAACuc,KAAK;QAAE,CAAC,CAAC;QACnD,KAAKvmB,CAAC,GAAC,CAAC,EAACC,CAAC,GAACk6B,IAAI,CAACj6B,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UACjC,IAAI0P,KAAK,GAAGyqB,IAAI,CAACn6B,CAAC,CAAC,CAAC0P,KAAK;UACzB,IAAI2gB,KAAK,GAAG2J,cAAc,GAACG,IAAI,CAACn6B,CAAC,CAAC,CAACumB,KAAK;UACxC,IAAIiJ,GAAG,GAAGwK,cAAc,IAAGh6B,CAAC,IAAIC,CAAC,GAAC,CAAC,GAAIq1B,QAAQ,GAAG6E,IAAI,CAACn6B,CAAC,GAAC,CAAC,CAAC,CAACumB,KAAK,CAAC;UAClE,IAAIjV,MAAM,GAAG,EAAE;UACf,KAAK,IAAIwgB,CAAC,GAACzB,KAAK,EAAEyB,CAAC,GAACtC,GAAG,EAAEsC,CAAC,EAAE,EAAE;YAAExgB,MAAM,CAAC3O,IAAI,CAACmvB,CAAC,CAAC;UAAE;UAChD,IAAIgI,aAAa,EAAE;YAClBpqB,KAAK,GAAGoqB,aAAa,CAACpqB,KAAK,EAAE6pB,MAAM,EAAElJ,KAAK,EAAEb,GAAG,CAAC;YAChD,IAAI,CAAC9f,KAAK,EAAE;cAAE;YAAU;UACzB;UACA,IAAI,CAACkqB,YAAY,CAAClqB,KAAK,EAAE4B,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;QACzC;MACD;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACErQ,CAAC,CAACm5B,KAAK,GAAG,YAAW;MACpB,IAAI,IAAI,CAAC5pB,KAAK,EAAE;QAAE,MAAMmoB,kBAAkB,CAACU,WAAW;MAAE;MACxD,IAAI,CAACgB,WAAW,CAAC,CAAC;MAClB,OAAO,IAAI,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;MAC1B,IAAI,CAACC,SAAS,CAAC,CAAC;MAChB,OAAO,IAAI,CAAChM,WAAW;IACxB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEttB,CAAC,CAACu5B,UAAU,GAAG,UAAS1B,SAAS,EAAE;MAClC,IAAI,IAAI,CAACtoB,KAAK,EAAE;QAAE,MAAMmoB,kBAAkB,CAACU,WAAW;MAAE;MACxD,IAAI,CAACP,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACuB,WAAW,CAAC,CAAC;MAClB,IAAI3P,KAAK,GAAG,IAAI;MAChB,IAAI,CAACwO,QAAQ,GAAGrxB,UAAU,CAAC,YAAW;QAAE6iB,KAAK,CAAC+P,IAAI,CAAC,CAAC;MAAE,CAAC,EAAE,EAAE,GAAC/zB,IAAI,CAAC0Y,GAAG,CAAC,IAAI,EAAE1Y,IAAI,CAACC,GAAG,CAAC,IAAI,EAAE,IAAI,CAACmyB,SAAS,IAAE,GAAG,CAAC,CAAC,GAAC,EAAE,CAAC;IACpH,CAAC;;IAED;AACF;AACA;AACA;IACE73B,CAAC,CAACy5B,SAAS,GAAG,YAAW;MACxBr0B,YAAY,CAAC,IAAI,CAAC6yB,QAAQ,CAAC;MAC3B,IAAI,CAAC1oB,KAAK,GAAG,IAAI;IAClB,CAAC;;IAED;AACF;AACA;AACA;IACEvP,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,MAAM,sCAAsC;IAC7C,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEL,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,sBAAsB;IAC9B,CAAC;;IAGF;IACC;AACF;AACA;AACA;IACER,CAAC,CAACo5B,WAAW,GAAG,YAAW;MAC1B,IAAI7sB,GAAG,GAAG,IAAI,CAACqrB,OAAO,IAAE,CAAC;MACzB,IAAI,CAACE,QAAQ,GAAG,CAAC;MACjB,IAAI,CAACxK,WAAW,GAAG,IAAI;MACvB,IAAI,CAAC0K,MAAM,GAAG,CAAC;MACf,IAAI,CAACE,MAAM,GAAG,IAAI,CAACjtB,KAAK;MACxB,IAAIyuB,UAAU,GAAG,EAAE;MACnB,IAAI,CAACnqB,KAAK,GAAG;QACZqB,MAAM,EAAE,EAAE;QACVP,MAAM,EAAEqpB,UAAU;QAClBj1B,SAAS,EAAE,IAAI,CAACA,SAAS;QACzByL,UAAU,EAAE,IAAI,CAACd,WAAW,CAAC;MAC9B,CAAC;MAED,IAAIiB,MAAM,GAAG,IAAI,CAAChB,OAAO,CAAC7M,KAAK,CAAC,CAAC;MACjC6N,MAAM,CAACqV,IAAI,CAAC,UAAS5c,CAAC,EAACC,CAAC,EAAE;QAAE,OAAQD,CAAC,CAACwD,MAAM,IAAEvD,CAAC,CAACuD,MAAM,GAAI,CAAC,CAAC,GAAG,CAAC;MAAE,CAAC,CAAC;MAEpE,IAAI+D,MAAM,CAACA,MAAM,CAACpR,MAAM,GAAC,CAAC,CAAC,CAACqN,MAAM,GAACC,GAAG,GAAC,CAAC,GAAG,IAAI,CAACorB,SAAS,EAAE;QAAE,MAAMD,kBAAkB,CAACS,cAAc;MAAE;MACtG,IAAI3vB,CAAC,GAAC,CAAC;QAAEjL,CAAC,GAAC,CAAC;MACZ,IAAIsT,GAAG,GAAG,CAAC;MACX,OAAOR,MAAM,CAACpR,MAAM,EAAE;QACrB,IAAId,CAAC,GAAG,IAAI,CAACw7B,QAAQ,CAACtpB,MAAM,EAAE7H,CAAC,EAAEqI,GAAG,EAAE6oB,UAAU,EAAEntB,GAAG,CAAC;QACtD,IAAIpO,CAAC,CAACqY,CAAC,GAAGjZ,CAAC,EAAE;UAAEA,CAAC,GAAGY,CAAC,CAACqY,CAAC;QAAE;QACxBhO,CAAC,IAAIrK,CAAC,CAACsY,CAAC;QACR,IAAI,CAACtY,CAAC,CAACsY,CAAC,IAAI,CAACpG,MAAM,CAACpR,MAAM,EAAE;UAC3B,IAAIoV,MAAM,GAAGxW,QAAQ,CAACyW,YAAY,GAACzW,QAAQ,CAACyW,YAAY,CAAC,CAAC,GAACvD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;UAC3FqD,MAAM,CAAChI,KAAK,GAAG,IAAI,CAACutB,QAAQ,CAACr8B,CAAC,EAAC,IAAI,CAACwxB,QAAQ,CAAC;UAC7C1a,MAAM,CAAC/H,MAAM,GAAG,IAAI,CAACstB,QAAQ,CAACpxB,CAAC,EAAC,IAAI,CAACmvB,SAAS,CAAC;UAC/C,IAAI,CAACpoB,KAAK,CAACqB,MAAM,CAACC,GAAG,CAAC,GAAGwD,MAAM;UAC/B,IAAI,CAAClW,CAAC,CAACsY,CAAC,EAAE;YACTlZ,CAAC,GAACiL,CAAC,GAAC,CAAC;YACLqI,GAAG,EAAE;UACN;QACD;MACD;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE7Q,CAAC,CAACg5B,oBAAoB,GAAG,UAASV,MAAM,EAAEz2B,IAAI,EAAE;MAC/C,IAAIg4B,EAAE,GAAGvB,MAAM,CAACpqB,cAAc;MAC9BoqB,MAAM,CAACpqB,cAAc,GAAG,KAAK;MAC7BoqB,MAAM,CAACnqB,WAAW,CAACtM,IAAI,CAAC9C,CAAC,CAAC;MAC1Bu5B,MAAM,CAACpqB,cAAc,GAAG2rB,EAAE;MAC1Bh4B,IAAI,CAACiD,CAAC,IAAEjD,IAAI,CAACiD,CAAC,CAACwzB,MAAM,EAAEz2B,IAAI,CAACoH,CAAC,EAAEpH,IAAI,CAAC9C,CAAC,CAAC;IACvC,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEiB,CAAC,CAAC45B,QAAQ,GAAG,UAASE,IAAI,EAAC3b,GAAG,EAAE;MAC/B,IAAI4b,GAAG,GAAG,CAAC;MACX,OAAOt0B,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAAC,EAAEA,GAAG,CAAC,GAAGD,IAAI,EAAC,CAAC;MACjC,OAAOr0B,IAAI,CAACC,GAAG,CAACyY,GAAG,EAAC1Y,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAACA,GAAG,CAAC,CAAC;IACrC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE/5B,CAAC,CAAC25B,QAAQ,GAAG,UAAStpB,MAAM,EAAE7H,CAAC,EAAEqI,GAAG,EAAE6oB,UAAU,EAAEntB,GAAG,EAAE;MACtD,IAAIiK,CAAC,GAAG,IAAI,CAACuY,QAAQ;MACrB,IAAIiL,IAAI,GAAG,IAAI,CAACrC,SAAS;MACzBnvB,CAAC,IAAI+D,GAAG;MACR,IAAIkK,CAAC,GAAGujB,IAAI,GAACxxB,CAAC;MACd,IAAIjL,CAAC,GAAGgP,GAAG;MACX,IAAID,MAAM,GAAG,CAAC;MACd,KAAK,IAAIvN,CAAC,GAACsR,MAAM,CAACpR,MAAM,GAAC,CAAC,EAAEF,CAAC,IAAE,CAAC,EAAEA,CAAC,EAAE,EAAE;QACtC,IAAI2R,KAAK,GAAGL,MAAM,CAACtR,CAAC,CAAC;QACrB,IAAIk7B,EAAE,GAAG,IAAI,CAAC/B,MAAM,GAACxnB,KAAK,CAACzF,KAAK;QAChC,IAAI6B,IAAI,GAAG4D,KAAK,CAAC0c,UAAU;QAC3B,IAAIkL,MAAM,GAAG5nB,KAAK,CAAC4nB,MAAM;QACzB,IAAI4B,EAAE,GAAGz0B,IAAI,CAAC00B,KAAK,CAACF,EAAE,GAACntB,IAAI,CAACvP,CAAC,GAACgP,GAAG,CAAC;QAClC,IAAI6tB,EAAE,GAAG30B,IAAI,CAAC00B,KAAK,CAACF,EAAE,GAACntB,IAAI,CAACtE,CAAC,GAAC+D,GAAG,CAAC;QAClC,IAAI8tB,EAAE,GAAG50B,IAAI,CAAC0c,IAAI,CAAC8X,EAAE,GAACntB,IAAI,CAACR,MAAM,GAACC,GAAG,GAAC,CAAC,CAAC;QACxC,IAAI+tB,EAAE,GAAG70B,IAAI,CAAC0c,IAAI,CAAC8X,EAAE,GAACntB,IAAI,CAACT,KAAK,GAACE,GAAG,GAAC,CAAC,CAAC;QACvC,IAAI+tB,EAAE,GAAG9jB,CAAC,EAAE;UAAE,MAAMkhB,kBAAkB,CAACS,cAAc;QAAE;QACvD,IAAIkC,EAAE,GAAG5jB,CAAC,IAAIlZ,CAAC,GAAC+8B,EAAE,GAAG9jB,CAAC,EAAE;UAAE;QAAU;QACpC9F,KAAK,CAACG,GAAG,GAAGA,GAAG;QACfH,KAAK,CAAC5D,IAAI,GAAG,IAAIjP,QAAQ,CAACuO,SAAS,CAAC7O,CAAC,EAACiL,CAAC,EAAC8xB,EAAE,EAACD,EAAE,CAAC;QAC9C/tB,MAAM,GAAGA,MAAM,IAAI+tB,EAAE;QACrBhqB,MAAM,CAACrO,MAAM,CAACjD,CAAC,EAAC,CAAC,CAAC;QAClB26B,UAAU,CAAChpB,KAAK,CAAC4U,KAAK,CAAC,GAAG,CAAC/nB,CAAC,EAACiL,CAAC,EAAC8xB,EAAE,EAACD,EAAE,EAACxpB,GAAG,EAACpL,IAAI,CAAC80B,KAAK,CAAC,CAACL,EAAE,GAACD,EAAE,GAAC3B,MAAM,CAAC9tB,IAAI,GAAC+B,GAAG,CAAC,EAAC9G,IAAI,CAAC80B,KAAK,CAAC,CAACH,EAAE,GAACH,EAAE,GAAC3B,MAAM,CAAC7tB,IAAI,GAAC8B,GAAG,CAAC,CAAC;QAC/GhP,CAAC,IAAI+8B,EAAE;MACR;MACA,OAAO;QAAC9jB,CAAC,EAACjZ,CAAC;QAAEkZ,CAAC,EAACnK;MAAM,CAAC;IACvB,CAAC;;IAED;AACF;AACA;AACA;IACEtM,CAAC,CAACs5B,SAAS,GAAG,YAAW;MACxB,IAAI,CAAChM,WAAW,GAAG,IAAIzvB,QAAQ,CAACoR,WAAW,CAAC,IAAI,CAACM,KAAK,CAAC;MACvD,IAAI,CAACA,KAAK,GAAG,IAAI;MACjB,IAAI,CAACuoB,QAAQ,GAAG,CAAC;MACjB,IAAI,CAAC32B,aAAa,CAAC,UAAU,CAAC;IAC/B,CAAC;;IAED;AACF;AACA;AACA;IACEnB,CAAC,CAACw5B,IAAI,GAAG,YAAW;MACnB,IAAIgB,EAAE,GAAG/0B,IAAI,CAAC0Y,GAAG,CAAC,IAAI,EAAE1Y,IAAI,CAACC,GAAG,CAAC,IAAI,EAAE,IAAI,CAACmyB,SAAS,IAAE,GAAG,CAAC,CAAC,GAAC,EAAE;MAC/D,IAAInpB,CAAC,GAAI,IAAIhP,IAAI,CAAC,CAAC,CAAEC,OAAO,CAAC,CAAC,GAAC66B,EAAE;MACjC,IAAIrrB,QAAQ,GAAG,KAAK;MACpB,OAAOT,CAAC,GAAI,IAAIhP,IAAI,CAAC,CAAC,CAAEC,OAAO,CAAC,CAAC,EAAE;QAClC,IAAI,CAAC,IAAI,CAAC05B,SAAS,CAAC,CAAC,EAAE;UAAElqB,QAAQ,GAAG,IAAI;UAAE;QAAO;MAClD;MACA,IAAIA,QAAQ,EAAE;QACb,IAAI,CAACmqB,SAAS,CAAC,CAAC;MACjB,CAAC,MAAM;QACN,IAAI7P,KAAK,GAAG,IAAI;QAChB,IAAI,CAACwO,QAAQ,GAAGrxB,UAAU,CAAC,YAAW;UAAE6iB,KAAK,CAAC+P,IAAI,CAAC,CAAC;QAAE,CAAC,EAAE,EAAE,GAACgB,EAAE,CAAC;MAChE;MACA,IAAIx6B,CAAC,GAAG,IAAI,CAAC83B,QAAQ,GAAG,IAAI,CAACE,MAAM,GAAC,IAAI,CAAC3oB,OAAO,CAACpQ,MAAM;MACvD,IAAI,IAAI,CAACiC,gBAAgB,CAAC,UAAU,CAAC,EAAE;QACtC,IAAIa,GAAG,GAAG,IAAIlE,QAAQ,CAACqB,KAAK,CAAC,UAAU,CAAC;QACxC6C,GAAG,CAAC+1B,QAAQ,GAAG93B,CAAC;QAChB,IAAI,CAACmB,aAAa,CAACY,GAAG,CAAC;MACxB;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE/B,CAAC,CAACq5B,SAAS,GAAG,YAAW;MACxB,IAAI3oB,KAAK,GAAG,IAAI,CAACrB,OAAO,CAAC,IAAI,CAAC2oB,MAAM,CAAC;MACrC,IAAIiC,EAAE,GAAGvpB,KAAK,CAACzF,KAAK,GAAC,IAAI,CAACitB,MAAM;MAChC,IAAIprB,IAAI,GAAG4D,KAAK,CAAC5D,IAAI;MACrB,IAAIsgB,UAAU,GAAG1c,KAAK,CAAC0c,UAAU;MACjC,IAAI/Y,MAAM,GAAG,IAAI,CAAC9E,KAAK,CAACqB,MAAM,CAACF,KAAK,CAACG,GAAG,CAAC;MACzC,IAAI+D,GAAG,GAAGP,MAAM,CAACpD,UAAU,CAAC,IAAI,CAAC;MACjCP,KAAK,CAACgoB,KAAK,IAAEhoB,KAAK,CAACgoB,KAAK,CAAChoB,KAAK,CAAC4nB,MAAM,EAAE5nB,KAAK,CAAC7O,IAAI,CAAC;MAClD+S,GAAG,CAACsI,IAAI,CAAC,CAAC;MACVtI,GAAG,CAACkI,SAAS,CAAC,CAAC;MACflI,GAAG,CAAC9H,IAAI,CAACA,IAAI,CAACvP,CAAC,EAAEuP,IAAI,CAACtE,CAAC,EAAEsE,IAAI,CAACT,KAAK,EAAES,IAAI,CAACR,MAAM,CAAC;MACjDsI,GAAG,CAAC2M,IAAI,CAAC,CAAC;MACV3M,GAAG,CAAC1J,SAAS,CAACzF,IAAI,CAAC0c,IAAI,CAACrV,IAAI,CAACvP,CAAC,GAAC6vB,UAAU,CAAC7vB,CAAC,GAAC08B,EAAE,CAAC,EAAEx0B,IAAI,CAAC0c,IAAI,CAACrV,IAAI,CAACtE,CAAC,GAAC4kB,UAAU,CAAC5kB,CAAC,GAACyxB,EAAE,CAAC,CAAC;MACnFrlB,GAAG,CAAC3J,KAAK,CAACgvB,EAAE,EAACA,EAAE,CAAC;MAChBvpB,KAAK,CAAC4nB,MAAM,CAAC3jB,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;MACxBA,GAAG,CAACwI,OAAO,CAAC,CAAC;MACb,OAAQ,EAAE,IAAI,CAAC4a,MAAM,GAAI,IAAI,CAAC3oB,OAAO,CAACpQ,MAAM;IAC7C,CAAC;IAGDpB,QAAQ,CAAC65B,kBAAkB,GAAG75B,QAAQ,CAACQ,OAAO,CAACq5B,kBAAkB,EAAE,iBAAiB,CAAC;EACtF,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS+C,UAAUA,CAACC,WAAW,EAAE;MAChC,IAAI,CAAChW,yBAAyB,CAAC,CAAC;MAEhC,IAAI,OAAOgW,WAAY,IAAE,QAAQ,EAAE;QAAEA,WAAW,GAAG3pB,QAAQ,CAAC2W,cAAc,CAACgT,WAAW,CAAC;MAAE;MACzF,IAAI,CAAClb,YAAY,GAAG,KAAK;MAEzB,IAAIzC,KAAK,GAAG2d,WAAW,CAAC3d,KAAK;MAC7BA,KAAK,CAACqW,QAAQ,GAAG,UAAU;MAC3BrW,KAAK,CAAC4d,eAAe,GAAG5d,KAAK,CAAC6d,qBAAqB,GAAG7d,KAAK,CAAC8d,iBAAiB,GAAG9d,KAAK,CAAC+d,kBAAkB,GAAG/d,KAAK,CAACge,gBAAgB,GAAG,OAAO;;MAG5I;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACL,WAAW,GAAGA,WAAW;;MAG/B;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAACpJ,SAAS,GAAG,IAAI;IACtB;IACA,IAAItxB,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACy8B,UAAU,EAAE58B,QAAQ,CAACuhB,aAAa,CAAC;;IAE3D;IACA;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACEpf,CAAC,CAACihB,SAAS,GAAG,YAAW;MACxB,OAAO,IAAI,CAACyZ,WAAW,IAAI,IAAI;IAChC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE16B,CAAC,CAAC2U,IAAI,GAAG,UAASC,GAAG,EAAEsM,WAAW,EAAE;MACnC;MACA;MACA,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;IACElhB,CAAC,CAAC2hB,KAAK,GAAG,YAAW,CAAC,CAAC;;IAEvB;AACF;AACA;AACA;IACE3hB,CAAC,CAACsiB,OAAO,GAAG,YAAW,CAAC,CAAC;;IAEzB;AACF;AACA;AACA;IACEtiB,CAAC,CAAC8hB,WAAW,GAAG,YAAW,CAAC,CAAC;;IAE7B;AACF;AACA;AACA;IACE9hB,CAAC,CAAC6iB,OAAO,GAAG,YAAW,CAAC,CAAC;;IAEzB;AACF;AACA;AACA;IACE7iB,CAAC,CAACyiB,aAAa,GAAG,YAAW,CAAC,CAAC;;IAE/B;AACF;AACA;AACA;IACEziB,CAAC,CAACsI,aAAa,GAAG,YAAW,CAAC,CAAC;;IAE/B;AACF;AACA;AACA;IACEtI,CAAC,CAAC2iB,YAAY,GAAG,YAAW,CAAC,CAAC;;IAE9B;AACF;AACA;AACA;IACE3iB,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,MAAM,8BAA8B;IACrC,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEL,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,oBAAoB,GAAG,IAAI,CAAC+P,IAAI,GAAE,IAAI;IAC9C,CAAC;;IAED;AACF;AACA;AACA;AACA;;IAEM;AACN;AACA;AACA;AACA;;IAEM;AACN;AACA;AACA;AACA;;IAEM;AACN;AACA;AACA;AACA;;IAEM;AACN;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;IACEvQ,CAAC,CAACmG,KAAK,GAAG,UAASsd,MAAM,EAAE;MAC1B,IAAIzC,KAAK,GAAG,IAAI,CAACF,QAAQ,CAAC,CAAC;MAC3BE,KAAK,IAAEA,KAAK,CAAClgB,EAAE,CAAC,SAAS,EAAE,IAAI,CAACk6B,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC;MAC3D,IAAI,CAAChU,mBAAmB,CAACvD,MAAM,CAAC;IACjC,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEzjB,CAAC,CAACg7B,cAAc,GAAG,UAASj5B,GAAG,EAAE;MAChC,IAAI5D,CAAC,GAAG,IAAI,CAACu8B,WAAW;MACxB,IAAI,CAACv8B,CAAC,EAAE;QAAE;MAAQ;MAClB,IAAI4e,KAAK,GAAG5e,CAAC,CAAC4e,KAAK;MAEnB,IAAIxc,KAAK,GAAG,IAAI,CAACqiB,2BAA2B,CAAC,IAAI,CAACvC,MAAM,CAAC;QAAEpD,GAAG,GAAG1c,KAAK,CAACyJ,MAAM;MAE7E,IAAIixB,UAAU,GAAG16B,KAAK,CAACuL,OAAO,GAAG,SAAS,GAAG,QAAQ;MACrD,IAAImvB,UAAU,IAAIle,KAAK,CAACke,UAAU,EAAE;QAAEle,KAAK,CAACke,UAAU,GAAGA,UAAU;MAAE;MACrE,IAAI,CAAC16B,KAAK,CAACuL,OAAO,EAAE;QAAE;MAAQ;MAE9B,IAAIovB,QAAQ,GAAG,IAAI,CAAC5J,SAAS;QAAE6J,MAAM,GAAGD,QAAQ,IAAEA,QAAQ,CAAClxB,MAAM;MACjE,IAAIrL,CAAC,GAAG,KAAK,CAAC,CAAC;;MAEf,IAAI,CAACw8B,MAAM,IAAI,CAACA,MAAM,CAAC9vB,MAAM,CAAC4R,GAAG,CAAC,EAAE;QACnC,IAAI9C,GAAG,GAAG,SAAS,GAAG,CAAC8C,GAAG,CAACnU,CAAC,GAACnK,CAAC,GAAC,CAAC,IAAEA,CAAC,GAAE,GAAG,GAAE,CAACse,GAAG,CAAClU,CAAC,GAACpK,CAAC,GAAC,CAAC,IAAEA,CAAC,GAAE,GAAG,GAAE,CAACse,GAAG,CAACjU,CAAC,GAACrK,CAAC,GAAC,CAAC,IAAEA,CAAC,GAAE,GAAG,GAAE,CAACse,GAAG,CAAChU,CAAC,GAACtK,CAAC,GAAC,CAAC,IAAEA,CAAC,GAAE,GAAG,IAAGse,GAAG,CAAC/T,EAAE,GAAC,GAAG,GAAC,CAAC,CAAC;QACpH6T,KAAK,CAACI,SAAS,GAAGJ,KAAK,CAACqe,eAAe,GAAGre,KAAK,CAACse,UAAU,GAAGte,KAAK,CAACue,WAAW,GAAGnhB,GAAG,GAAE,GAAG,IAAG8C,GAAG,CAAC9T,EAAE,GAAC,GAAG,GAAC,CAAC,CAAC,GAAE,GAAG;QAC9G4T,KAAK,CAACwe,YAAY,GAAGphB,GAAG,GAAE,KAAK,IAAG8C,GAAG,CAAC9T,EAAE,GAAC,GAAG,GAAC,CAAC,CAAC,GAAE,KAAK;QACtD,IAAI,CAAC+xB,QAAQ,EAAE;UAAEA,QAAQ,GAAG,IAAI,CAAC5J,SAAS,GAAG,IAAIzzB,QAAQ,CAACgO,YAAY,CAAC,IAAI,EAAEipB,GAAG,CAAC;QAAE;QACnFoG,QAAQ,CAAClxB,MAAM,CAAC4B,IAAI,CAACqR,GAAG,CAAC;MAC1B;MAEA,IAAIie,QAAQ,CAACnvB,KAAK,IAAIxL,KAAK,CAACwL,KAAK,EAAE;QAClCgR,KAAK,CAACye,OAAO,GAAG,EAAE,GAAC,CAACj7B,KAAK,CAACwL,KAAK,GAACpN,CAAC,GAAC,CAAC,IAAEA,CAAC;QACtCu8B,QAAQ,CAACnvB,KAAK,GAAGxL,KAAK,CAACwL,KAAK;MAC7B;IACD,CAAC;IAGDlO,QAAQ,CAAC48B,UAAU,GAAG58B,QAAQ,CAACQ,OAAO,CAACo8B,UAAU,EAAE,eAAe,CAAC;EACpE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASgB,MAAMA,CAAA,EAAG,CAAC;IACnB,IAAIz7B,CAAC,GAAGy7B,MAAM,CAAC/9B,SAAS;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;IACEsC,CAAC,CAACgjB,SAAS,GAAG,UAASlW,IAAI,EAAE;MAC5B,OAAOA,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE9M,CAAC,CAAC2jB,WAAW,GAAG,UAAS/O,GAAG,EAAErX,CAAC,EAAEiL,CAAC,EAAE6D,KAAK,EAAEC,MAAM,EAAEovB,SAAS,EAAEC,OAAO,EAAEC,OAAO,EAAE;MAC/E;MACAF,SAAS,GAAGA,SAAS,IAAI9mB,GAAG;MAC5B,IAAI+mB,OAAO,IAAI,IAAI,EAAE;QAAEA,OAAO,GAAGp+B,CAAC;MAAE;MACpC,IAAIq+B,OAAO,IAAI,IAAI,EAAE;QAAEA,OAAO,GAAGpzB,CAAC;MAAE;MACpC,IAAI;QACH,IAAIqzB,SAAS,GAAGjnB,GAAG,CAAC8O,YAAY,CAACnmB,CAAC,EAAEiL,CAAC,EAAE6D,KAAK,EAAEC,MAAM,CAAC;MACtD,CAAC,CAAC,OAAOpK,CAAC,EAAE;QACX,OAAO,KAAK;MACb;MACA,IAAI,IAAI,CAAC45B,YAAY,CAACD,SAAS,CAAC,EAAE;QACjCH,SAAS,CAACxS,YAAY,CAAC2S,SAAS,EAAEF,OAAO,EAAEC,OAAO,CAAC;QACnD,OAAO,IAAI;MACZ;MACA,OAAO,KAAK;IACb,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE57B,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,UAAU;IAClB,CAAC;;IAED;AACF;AACA;AACA;AACA;IACER,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,OAAO,IAAIo7B,MAAM,CAAC,CAAC;IACpB,CAAC;;IAEF;IACC;AACF;AACA;AACA;AACA;IACEz7B,CAAC,CAAC87B,YAAY,GAAG,UAASD,SAAS,EAAE;MAAE,OAAO,IAAI;IAAE,CAAC;IAGrDh+B,QAAQ,CAAC49B,MAAM,GAAGA,MAAM;EACzB,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASM,UAAUA,CAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAE;MAC3C,IAAKpe,KAAK,CAACke,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EAAG;QAAEA,KAAK,GAAG,CAAC;MAAE;MAC9C,IAAKle,KAAK,CAACme,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EAAG;QAAEA,KAAK,GAAG,CAAC;MAAE;MAC9C,IAAKne,KAAK,CAACoe,OAAO,CAAC,IAAIA,OAAO,GAAG,CAAC,EAAI;QAAEA,OAAO,GAAG,CAAC;MAAE;;MAGrD;MACA;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACF,KAAK,GAAGA,KAAK,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAGA,KAAK,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAGA,OAAO,GAAG,CAAC;IAC3B;IACA,IAAIl8B,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAAC+9B,UAAU,EAAEl+B,QAAQ,CAAC49B,MAAM,CAAC;;IAEpD;IACA;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACEM,UAAU,CAACI,SAAS,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;IAEpuC;AACF;AACA;AACA;AACA;AACA;AACA;IACEJ,UAAU,CAACK,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,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f;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC3R,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACogB,EAAE,GAAG,IAAI;;MAEd;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACosB,aAAa,GAAG,KAAK;;MAE1B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAChE,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC9lC,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACkiC,MAAM,GAAGlmC,QAAQ,CAAC6tC,QAAQ,CAACE,GAAG;;MAEnC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,KAAK;;MAE5B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAChjB,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACijB,WAAW,GAAG,IAAI;;MAEvB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAGtwB,CAAC,CAACuwB,oBAAoB;IAC1C;IACA,IAAIlsC,CAAC,GAAG0rC,QAAQ,CAAChuC,SAAS,GAAG,CAAC,CAAC;IAC/B,IAAIie,CAAC,GAAG+vB,QAAQ;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;IACE/vB,CAAC,CAACuwB,oBAAoB,GAAG,IAAI;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEvwB,CAAC,CAACwwB,MAAM,GAAG,UAAU9nC,KAAK,EAAE;MAC3B,IAAI,OAAOA,KAAK,IAAI,QAAQ,EAAE;QAC7B,IAAI+n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AACU,IAAI;MACrC;IACD,CAAC;IAED7wC,QAAQ,CAACuxC,YAAY,GAAGzzB,CAAC;EAE1B,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAY;IAEb;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASqyB,cAAcA,CAACqB,QAAQ,EAAEC,SAAS,EAAEnwC,IAAI,EAAE;MAClD,IAAI,CAAC+P,2BAA2B,CAAC,CAAC;;MAElC;MACA;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACm1B,MAAM,GAAG,KAAK;;MAEnB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACkL,QAAQ,GAAG,KAAK;;MAErB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACzX,QAAQ,GAAG,CAAC;;MAEjB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC34B,IAAI,GAAGA,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACqwC,eAAe,GAAG,IAAI;;MAE3B;MACA;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAIH,QAAQ,EAAE;QACb,IAAI,CAACI,KAAK,GAAG5xC,QAAQ,CAAC6tC,QAAQ,CAACS,MAAM,CAACkD,QAAQ,CAAC;MAChD,CAAC,MAAM;QACN,IAAI,CAACI,KAAK,GAAG,IAAI;MAClB;;MAEA;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAGJ,SAAS;;MAE3B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACK,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,IAAI;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,IAAI;;MAExB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,IAAI;;MAE5B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,IAAI,GAAG,IAAI;IACjB;IACA,IAAI/vC,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACgwC,cAAc,EAAEnwC,QAAQ,CAAC4C,eAAe,CAAC;IACjE,IAAIkb,CAAC,GAAGqyB,cAAc;;IAEtB;IACA;;IAGA;AACF;AACA;AACA;AACA;AACA;AACA;IACEryB,CAAC,CAACq0B,IAAI,GAAG,MAAM;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;IACEr0B,CAAC,CAACiwB,GAAG,GAAG,KAAK;;IAEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEjwB,CAAC,CAACuyB,MAAM,GAAG,QAAQ;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEvyB,CAAC,CAACkzB,GAAG,GAAG,KAAK;;IAEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACElzB,CAAC,CAACsyB,KAAK,GAAG,OAAO;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEtyB,CAAC,CAACozB,UAAU,GAAG,YAAY;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEpzB,CAAC,CAACwuB,IAAI,GAAG,MAAM;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACExuB,CAAC,CAACs0B,KAAK,GAAG,OAAO;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEt0B,CAAC,CAACgzB,QAAQ,GAAG,UAAU;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEhzB,CAAC,CAACuzB,KAAK,GAAG,OAAO;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEvzB,CAAC,CAACwzB,KAAK,GAAG,OAAO;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACExzB,CAAC,CAACqzB,WAAW,GAAG,aAAa;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACErzB,CAAC,CAACmzB,GAAG,GAAG,KAAK;;IAEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEnzB,CAAC,CAAC+yB,IAAI,GAAG,MAAM;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE/yB,CAAC,CAACizB,GAAG,GAAG,KAAK;;IAEd;IACC;AACF;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;IAGE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE5uC,CAAC,CAACkwC,OAAO,GAAG,YAAY;MACvB,OAAO,IAAI,CAACT,KAAK;IAClB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEzvC,CAAC,CAACmwC,SAAS,GAAG,UAAUC,GAAG,EAAE;MAC5B,OAAOA,GAAG,GAAG,IAAI,CAACR,UAAU,GAAG,IAAI,CAACD,OAAO;IAC5C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE3vC,CAAC,CAACqwC,MAAM,GAAG,YAAY;MACtB,OAAO,IAAI,CAACN,IAAI;IACjB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE/vC,CAAC,CAACswC,MAAM,GAAG,UAASC,GAAG,EAAE;MACvB,IAAI,CAACR,IAAI,GAAGQ,GAAG;IACjB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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MACxB,OAAO,wBAAwB;IAChC,CAAC;IAED3C,QAAQ,CAACqzC,UAAU,GAAGrzC,QAAQ,CAACQ,OAAO,CAAC6yC,UAAU,EAAE,iBAAiB,CAAC;EAEtE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE,aAAY;IAEb;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS+F,SAASA,CAAE3H,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,EAAE;MACrD,IAAI,CAAC+F,0BAA0B,CAAC,CAAC;;MAEjC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACoF,QAAQ,GAAG,EAAE;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,mBAAmB,GAAG,CAAC,CAAC;;MAE7B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACplC,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACqlC,mBAAmB,GAAG,IAAI;;MAE/B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,KAAK;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,iBAAiB,GAAG,CACxB55C,QAAQ,CAAC65C,WAAW,EACpB75C,QAAQ,CAAC85C,gBAAgB,EACzB95C,QAAQ,CAAC+5C,SAAS,EAClB/5C,QAAQ,CAACg6C,UAAU,EACnBh6C,QAAQ,CAACi6C,WAAW,EACpBj6C,QAAQ,CAACk6C,WAAW,EACpBl6C,QAAQ,CAACm6C,cAAc,EACvBn6C,QAAQ,CAACo6C,iBAAiB,EAC1Bp6C,QAAQ,CAACq6C,SAAS,EAClBr6C,QAAQ,CAACs6C,SAAS,EAClBt6C,QAAQ,CAACu6C,YAAY,EACrBv6C,QAAQ,CAACw6C,WAAW,EACpBx6C,QAAQ,CAACy6C,UAAU,CACnB;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,oBAAoB,GAAG,IAAI,CAACd,iBAAiB,CAACx4C,MAAM;MAEzD,IAAI,CAACkE,IAAI,CAACmsC,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,CAAC;IAC5C;IAEA,IAAIhsC,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACi5C,SAAS,EAAEp5C,QAAQ,CAACmwC,cAAc,CAAC;IAC3D,IAAIryB,CAAC,GAAGs7B,SAAS;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEj3C,CAAC,CAACmD,IAAI,GAAG,UAAUmsC,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,EAAE;MAEpD;MACA;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACwM,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAClJ,SAAS,GAAG,IAAI,CAAC,CAAC;MACvB,IAAI,CAACI,UAAU,GAAG,IAAI;MACtB,IAAI,CAAC+I,YAAY,CAACnJ,SAAS,CAAC;;MAE5B;MACA;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACoJ,OAAO,GAAG,KAAK;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,SAAS,GAAGzB,QAAQ;;MAEzB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC0B,YAAY,GAAG5M,WAAW;;MAE/B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC6M,uBAAuB,GAAG,KAAK;;MAEpC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,uBAAuB,GAAG,IAAI;;MAEnC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,EAAE;;MAEvB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,UAAU,GAAG,EAAE;;MAEpB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,gBAAgB,GAAG,EAAE;;MAE1B;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,CAAC,CAAC;;MAEzB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;;MAE3B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,SAAS,GAAG,CAAC;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,YAAY,GAAG,EAAE;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,cAAc,GAAG,EAAE;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG5kB,GAAG;IAEzB,CAAC;;IAEF;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEnZ,CAAC,CAACswB,WAAW,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;IACEtwB,CAAC,CAACg+B,YAAY,GAAG,CAAC;;IAEnB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACEh+B,CAAC,CAACuyB,MAAM,GAAGrwC,QAAQ,CAACmwC,cAAc,CAACE,MAAM;;IAEzC;AACF;AACA;AACA;AACA;AACA;AACA;IACEvyB,CAAC,CAACkzB,GAAG,GAAGhxC,QAAQ,CAACmwC,cAAc,CAACa,GAAG;;IAEnC;AACF;AACA;AACA;AACA;AACA;AACA;IACElzB,CAAC,CAACsyB,KAAK,GAAGpwC,QAAQ,CAACmwC,cAAc,CAACC,KAAK;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;IACEtyB,CAAC,CAACozB,UAAU,GAAGlxC,QAAQ,CAACmwC,cAAc,CAACe,UAAU;;IAEjD;AACF;AACA;AACA;AACA;AACA;AACA;IACEpzB,CAAC,CAACwuB,IAAI,GAAGtsC,QAAQ,CAACmwC,cAAc,CAAC7D,IAAI;;IAErC;AACF;AACA;AACA;AACA;AACA;AACA;IACExuB,CAAC,CAACs0B,KAAK,GAAGpyC,QAAQ,CAACmwC,cAAc,CAACiC,KAAK;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEt0B,CAAC,CAACgzB,QAAQ,GAAG9wC,QAAQ,CAACmwC,cAAc,CAACW,QAAQ;;IAE7C;AACF;AACA;AACA;AACA;AACA;AACA;IACEhzB,CAAC,CAACuzB,KAAK,GAAGrxC,QAAQ,CAACmwC,cAAc,CAACkB,KAAK;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;IACEvzB,CAAC,CAACwzB,KAAK,GAAGtxC,QAAQ,CAACmwC,cAAc,CAACmB,KAAK;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;IACExzB,CAAC,CAACmzB,GAAG,GAAGjxC,QAAQ,CAACmwC,cAAc,CAACc,GAAG;;IAEnC;AACF;AACA;AACA;AACA;AACA;AACA;IACEnzB,CAAC,CAAC+yB,IAAI,GAAG7wC,QAAQ,CAACmwC,cAAc,CAACU,IAAI;;IAErC;AACF;AACA;AACA;AACA;AACA;AACA;IACE/yB,CAAC,CAACizB,GAAG,GAAG/wC,QAAQ,CAACmwC,cAAc,CAACY,GAAG;;IAEnC;AACF;AACA;AACA;AACA;IACEjzB,CAAC,CAACq0B,IAAI,GAAGnyC,QAAQ,CAACmwC,cAAc,CAACgC,IAAI;;IAErC;AACF;AACA;AACA;AACA;IACEr0B,CAAC,CAACiwB,GAAG,GAAG/tC,QAAQ,CAACmwC,cAAc,CAACpC,GAAG;;IAEpC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;;IAEC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE5rC,CAAC,CAAC45C,cAAc,GAAG,UAAUjJ,MAAM,EAAE;MACpC,IAAI,CAACA,MAAM,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M,CAACoiD,KAAK,IAAI,IAAK;IAC9CN,aAAa,CAACO,QAAQ,GAAIN,KAAK,CAACtgD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAE,CAAC,CAAE;IAC1DqgD,aAAa,CAACQ,KAAK,GAAG,CAACP,KAAK,CAACtgD,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAIsgD,KAAK,CAACtgD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAIsgD,KAAK,CAACtgD,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAACqgD,aAAa,CAACG,aAAa;IAChJH,aAAa,CAACS,SAAS,GAAIR,KAAK,CAACtgD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAK,CAACqgD,aAAa,CAACG,aAAa;IACzFH,aAAa,CAACU,YAAY,GAAIT,KAAK,CAACtgD,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAE;IAE/Df,QAAQ,CAACohD,aAAa,GAAGA,aAAa;EAEvC,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEA;;EAGA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;EACA;EACA;;EAEC,aAAY;IACZ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE;IACA,IAAIW,eAAe,GAAG,SAAAA,CAAA,EAAY;MACnC;MACE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,SAAS,GAAG,IAAI;;MAErB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,KAAK,GAAG,IAAI;;MAEjB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACvnC,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACua,IAAI,GAAG,IAAI;;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACitB,MAAM,GAAG,IAAI;;MAElB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,GAAG,GAAG,IAAI;;MAEf;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,SAAS,GAAG,IAAI;;MAErB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC5rB,QAAQ,GAAG,IAAI;IACrB,CAAC;IACD,IAAIr0B,CAAC,GAAG4/C,eAAe,CAACliD,SAAS,GAAG,CAAC,CAAC;IACtC,IAAIie,CAAC,GAAGikC,eAAe;;IAGxB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEjkC,CAAC,CAACwwB,MAAM,GAAG,UAAU9nC,KAAK,EAAE;MAC3B,IAAIA,KAAK,YAAYsX,CAAC,IAAItX,KAAK,YAAY5G,MAAM,EAAE;QAClD,IAAIyiD,GAAG,GAAG,IAAIriD,QAAQ,CAAC+hD,eAAe,CAAC,CAAC;QACxCM,GAAG,CAAC5/C,GAAG,CAAC+D,KAAK,CAAC;QACd,OAAO67C,GAAG;MACX,CAAC,MAAM;QACN,MAAM,IAAI7T,KAAK,CAAC,sBAAsB,CAAC;MACxC;IACD,CAAC;;IAEF;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErsC,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;MACvB,KAAK,IAAI5B,CAAC,IAAI4B,KAAK,EAAE;QAAE,IAAI,CAAC5B,CAAC,CAAC,GAAG4B,KAAK,CAAC5B,CAAC,CAAC;MAAE;MAC3C,OAAO,IAAI;IACZ,CAAC;IAEDqB,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,mBAAmB;IAC3B,CAAC;IAED3C,QAAQ,CAAC+hD,eAAe,GAAGjkC,CAAC;EAE7B,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAY;IAEZ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAEE,SAASwkC,KAAKA,CAAA,EAAG;MAChB,MAAM,8BAA8B;IACrC;IAEA,IAAIxkC,CAAC,GAAGwkC,KAAK;;IAGd;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACExkC,CAAC,CAACykC,aAAa,GAAG,KAAK;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEzkC,CAAC,CAAC0kC,eAAe,GAAG,OAAO;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE1kC,CAAC,CAAC2kC,cAAc,GAAG,MAAM;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE3kC,CAAC,CAAC4kC,cAAc,GAAG,MAAM;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;IACE5kC,CAAC,CAAC6kC,WAAW,GAAG,YAAY;;IAE5B;AACF;AACA;AACA;AACA;AACA;AACA;IACE7kC,CAAC,CAAC8kC,cAAc,GAAG,eAAe;;IAElC;AACF;AACA;AACA;AACA;AACA;AACA;IACE9kC,CAAC,CAAC+kC,gBAAgB,GAAG,iBAAiB;;IAEtC;AACF;AACA;AACA;AACA;AACA;AACA;IACE/kC,CAAC,CAACglC,aAAa,GAAG,cAAc;;IAEhC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEhlC,CAAC,CAACilC,WAAW,GAAG,YAAY;;IAE5B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEjlC,CAAC,CAACklC,oBAAoB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;;IAElG;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEllC,CAAC,CAACmlC,aAAa,GAAG;MACjBC,GAAG,EAAC;IACL,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEplC,CAAC,CAACqlC,YAAY,GAAG,2FAA2F;;IAG7G;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErlC,CAAC,CAACslC,wBAAwB,GAAGtlC,CAAC,CAAC4kC,cAAc,CAAC,CAAE;;IAEhD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE5kC,CA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CA;AACA;AACA;AACA;AACA;AACA;IACEpmC,CAAC,CAAC6lC,UAAU,GAAG,EAAE;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;IACE7lC,CAAC,CAACqmC,OAAO,GAAG,CAAC,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErmC,CAAC,CAACsmC,YAAY,GAAG,CAAC,CAAC;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEtmC,CAAC,CAACumC,qBAAqB,GAAG,CAAC,CAAC;;IAG7B;IACCvmC,CAAC,CAAC9a,gBAAgB,GAAG,IAAI;IACzB8a,CAAC,CAAC5a,mBAAmB,GAAG,IAAI;IAC5B4a,CAAC,CAAC1a,uBAAuB,GAAG,IAAI;IAChC0a,CAAC,CAACxa,aAAa,GAAG,IAAI;IACtBwa,CAAC,CAACza,gBAAgB,GAAG,IAAI;IACzBya,CAAC,CAACjb,UAAU,GAAG,IAAI;IAEnB7C,QAAQ,CAAC4C,eAAe,CAACG,UAAU,CAAC+a,CAAC,CAAC,CAAC,CAAC;;IAGzC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEA,CAAC,CAAC8+B,kBAAkB,GAAG,YAAY;MAClC,OAAO;QACN9S,QAAQ,EAAC9pC,QAAQ,CAACimC,KAAK,CAACnoB,CAAC,CAACwmC,QAAQ,EAAExmC,CAAC,CAAC;QACtC++B,KAAK,EAAC,CAAC,OAAO,CAAC;QACfC,UAAU,EAACh/B,CAAC,CAACklC;MACd,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEllC,CAAC,CAACymC,mBAAmB,GAAG,UAASr7C,KAAK,EAAE;MACvC,IAAI+J,GAAG,GAAG/J,KAAK,CAACzH,MAAM,CAAC4wC,OAAO,CAAC,CAAC,CAACp/B,GAAG;MACpC,IAAI,CAA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ACE/nD,CAAC,CAACgoD,eAAe,GAAG,YAAY;MAC/B;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEhoD,CAAC,CAACooD,cAAc,GAAG,UAAU/jD,KAAK,EAAE;MACnC;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACErE,CAAC,CAACqoD,WAAW,GAAG,UAAUhkD,KAAK,EAAE;MAChC;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;IACErE,CAAC,CAAC2nD,MAAM,GAAG,YAAY;MACtB;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;IACE3nD,CAAC,CAAC4nD,OAAO,GAAG,YAAY;MACvB;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;IACE5nD,CAAC,CAAC0nD,WAAW,GAAG,YAAW;MAC1B;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;IACE1nD,CAAC,CAACuoD,cAAc,GAAG,YAAW;MAC7B;IAAA,CACA;;IAED;AACF;AACA;AACA;AACA;AACA;IACEvoD,CAAC,CAAC0oD,WAAW,GAAG,YAAY;MAC3B;IAAA,CACA;IAED7qD,QAAQ,CAACwoD,qBAAqB,GAAGxoD,QAAQ,CAACQ,OAAO,CAACgoD,qBAAqB,EAAE,iBAAiB,CAAC;IAC3FxoD,QAAQ,CAACknD,oBAAoB,GAAGlnD,QAAQ,CAACwoD,qBAAqB,CAAC,CAAC;EACjE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAY;IAGb;IACE;AACH;AACA;AACA;AACA;AACA;;IAEE,IAAIsC,cAAc,GAAG,SAAAA,CAAA,EAAY;MACjC;MACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC9G,aAAa,GAAG,IAAI;;MAEzB;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC+G,QAAQ,GAAG,CAAC,CAAC;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,aAAa,GAAG,CAAC,CAAC;;MAEvB;AACH;AACA;AACA;AACA;AACA;MACG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,GAAG,IAAI;IAG5C9jD,QAAQ,CAAC6kD,eAAe,GAAG7kD,QAAQ,CAACQ,OAAO,CAACqkD,eAAe,EAAE,gBAAgB,CAAC;EAC/E,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEA;EACA;;EAKC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAASztB,KAAKA,CAAC31B,MAAM,EAAEiB,KAAK,EAAEwuD,UAAU,EAAE;MAE1C;MACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,iBAAiB,GAAG,KAAK;;MAE9B;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACl8B,IAAI,GAAG,KAAK;;MAEjB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACuB,QAAQ,GAAG,CAAC;;MAEjB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC06B,UAAU,GAAGA,UAAU,IAAI,CAAC,CAAC;;MAElC;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACzvD,MAAM,GAAGA,MAAM;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC8zB,QAAQ,GAAG,IAAI;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACqC,OAAO,GAAG,KAAK;;MAErB;MACC;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACijB,OAAO,GAAG,KAAK;;MAEpB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACuW,cAAc,GAAG,CAAC,CAAC;;MAExB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,eAAe,GAAG,CAAC,CAAC;;MAEzB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,MAAM,GAAG,EAAE;;MAEhB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACC,QAAQ,GAAG,EAAE;;MAElB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC17B,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACgC,aAAa,GAAG,CAAC,CAAC,CAAC;;MAExB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACjC,QAAQ,GAAG,CAAC,CAAC;;MAElB;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC+B,OAAO,GAAGl2B,MAAM;;MAErB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC+vD,SAAS,GAAG,KAAK;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACnsD,OAAO,GAAG,KAAK;;MAEpB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACosD,WAAW,GAAG,KAAK;MAGxB,IAAI/uD,KAAK,EAAE;QACV,IAAI,CAAC8uD,SAAS,GAAG9uD,KAAK,CAAC8yB,QAAQ;QAC/B,IAAI,CAAC27B,iBAAiB,GAAGzuD,KAAK,CAACyuD,iBAAiB;QAChD,IAAI,CAACl8B,IAAI,GAAGvyB,KAAK,CAACuyB,IAAI;QACtBvyB,KAAK,CAACgvD,QAAQ,IAAI,IAAI,CAAC1uD,gBAAgB,CAAC,QAAQ,EAAEN,KAAK,CAACgvD,QAAQ,CAAC;QACjE,IAAIhvD,KAAK,CAACivD,QAAQ,EAAE;UAAEv6B,KAAK,CAACw6B,YAAY,CAACnwD,MAAM,CAAC;QAAE;MACnD;MACA,IAAIiB,KAAK,IAAEA,KAAK,CAACyC,MAAM,EAAE;QAAE,IAAI,CAAC01C,OAAO,GAAC,IAAI;MAAE,CAAC,MAC1C;QAAE76C,QAAQ,CAACo3B,KAAK,CAACy6B,SAAS,CAAC,IAAI,EAAC,IAAI,CAAC;MAAE;MAC5C,IAAInvD,KAAK,IAAEA,KAAK,CAAC6yB,QAAQ,IAAE,IAAI,EAAE;QAAE,IAAI,CAACgC,WAAW,CAAC70B,KAAK,CAAC6yB,QAAQ,EAAE6B,KAAK,CAACC,IAAI,CAAC;MAAE;IAElF;IACA,IAAIl1B,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACi3B,KAAK,EAAEp3B,QAAQ,CAAC4C,eAAe,CAAC;;IAExD;IACA;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACEw0B,KAAK,CAACC,IAAI,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;IACED,KAAK,CAAC06B,IAAI,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;IACE16B,KAAK,CAAC26B,OAAO,GAAG,CAAC;;IAEjB;AACF;AACA;AACA;AACA;AACA;IACE36B,KAAK,CAAC46B,MAAM,GAAG,CAAC,CAAC;;IAEjB;AACF;AACA;AACA;AACA;AACA;IACE56B,KAAK,CAACK,OAAO,GAAG,EAAE;;IAElB;AACF;AACA;AACA;AACA;AACA;IACEL,KAAK,CAACkiB,QAAQ,GAAG,CAAC,CAAC;;IAGpB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEliB,KAAK,CAACzwB,GAAG,GAAG,UAASlF,MAAM,EAAEiB,KAAK,EAAEwuD,UAAU,EAAES,QAAQ,EAAE;MACzD,IAAIA,QAAQ,EAAE;QAAEv6B,KAAK,CAACw6B,YAAY,CAACnwD,MAAM,CAAC;MAAE;MAC5C,OAAO,IAAI21B,KAAK,CAAC31B,MAAM,EAAEiB,KAAK,EAAEwuD,UAAU,CAAC;IAC5C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE95B,KAAK,CAACpM,IAAI,GAAG,UAAS7hB,KAAK,EAAEhE,MAAM,EAAE;MACpC,IAAIqyB,MAAM,GAAGJ,KAAK,CAACK,OAAO,CAAC9yB,KAAK,CAAC,CAAC,CAAC,CAAC;MACpC,KAAK,IAAIzD,CAAC,GAACs2B,MAAM,CAACp2B,MAAM,GAAC,CAAC,EAAEF,CAAC,IAAE,CAAC,EAAEA,CAAC,EAAE,EAAE;QACtC,IAAIw2B,KAAK,GAAGF,MAAM,CAACt2B,CAAC,CAAC;QACrB,IAAKiE,MAAM,IAAI,CAACuyB,KAAK,CAACy5B,iBAAiB,IAAKz5B,KAAK,CAACmjB,OAAO,EAAE;UAAE;QAAU;QACvEnjB,KAAK,CAAC1M,IAAI,CAAC0M,KAAK,CAAC85B,SAAS,GAAC,CAAC,GAACroD,KAAK,CAAC;MACpC;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEiuB,KAAK,CAACnzB,WAAW,GAAG,UAASiF,KAAK,EAAE;MACnC,IAAIA,KAAK,CAAC5H,IAAI,IAAI,MAAM,EAAE;QACzB,IAAI,CAAC0pB,IAAI,CAAC9hB,KAAK,CAACC,KAAK,EAAED,KAAK,CAAC/D,MAAM,CAAC;MACrC;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEiyB,KAAK,CAACw6B,YAAY,GAAG,UAASnwD,MAAM,EAAE;MACrC,IAAI,CAACA,MAAM,CAACwwD,aAAa,EAAE;QAAE;MAAQ;MACrC,IAAIz6B,MAAM,GAAGJ,KAAK,CAACK,OAAO;MAC1B,KAAK,IAAIv2B,CAAC,GAACs2B,MAAM,CAACp2B,MAAM,GAAC,CAAC,EAAEF,CAAC,IAAE,CAAC,EAAEA,CAAC,EAAE,EAAE;QACtC,IAAIw2B,KAAK,GAAGF,MAAM,CAACt2B,CAAC,CAAC;QACrB,IAAIw2B,KAAK,CAACC,OAAO,IAAIl2B,MAAM,EAAE;UAC5Bi2B,KAAK,CAACmjB,OAAO,GAAG,IAAI;UACpBrjB,MAAM,CAACrzB,MAAM,CAACjD,CAAC,EAAE,CAAC,CAAC;QACpB;MACD;MACAO,MAAM,CAACwwD,aAAa,GAAG,CAAC;IACzB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE76B,KAAK,CAAC86B,eAAe,GAAG,YAAW;MAClC,IAAI16B,MAAM,GAAGJ,KAAK,CAACK,OAAO;MAC1B,KAAK,IAAIv2B,CAAC,GAAE,CAAC,EAAEC,CAAC,GAACq2B,MAAM,CAACp2B,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QACzC,IAAIw2B,KAAK,GAAGF,MAAM,CAACt2B,CAAC,CAAC;QACrBw2B,KAAK,CAACmjB,OAAO,GAAG,IAAI;QACpBnjB,KAAK,CAACj2B,MAAM,KAAGi2B,KAAK,CAACj2B,MAAM,CAACwwD,aAAa,GAAG,CAAC,CAAC;MAC/C;MACAz6B,MAAM,CAACp2B,MAAM,GAAG,CAAC;IAClB,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEg2B,KAAK,CAAC+6B,eAAe,GAAG,UAAS1wD,MAAM,EAAE;MACxC,IAAIA,MAAM,EAAE;QAAE,OAAOA,MAAM,CAACwwD,aAAa,IAAI,IAAI,IAAI,CAAC,CAACxwD,MAAM,CAACwwD,aAAa;MAAE;MAC7E,OAAO76B,KAAK,CAACK,OAAO,IAAI,CAAC,CAACL,KAAK,CAACK,OAAO,CAACr2B,MAAM;IAC/C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEg2B,KAAK,CAACgB,aAAa,GAAG,UAASukB,MAAM,EAAE7R,UAAU,EAAE;MAClD,IAAI3S,QAAQ,GAAGwkB,MAAM,CAACxkB,QAAQ;MAC9B,IAAIA,QAAQ,IAAI,IAAI,EAAE;QAAEwkB,MAAM,CAACxkB,QAAQ,GAAGA,QAAQ,GAAG,CAAC;MAAE;MACxD,KAAK,IAAIj3B,CAAC,GAAC,CAAC,EAACC,CAAC,GAAC2pC,UAAU,CAAC1pC,MAAM,EAACe,CAAC,GAACi1B,KAAK,CAACkiB,QAAQ,EAACp4C,CAAC,GAACC,CAAC,EAACD,CAAC,EAAE,EAAE;QAC1D,IAAIJ,CAAC,GAAGgqC,UAAU,CAAC5pC,CAAC,CAAC;QACrB,IAAI,CAACiB,CAAC,CAACrB,CAAC,CAAC,EAAE;UAAEqB,CAAC,CAACrB,CAAC,CAAC,GAAG,CAAC67C,MAAM,CAAC;QAAE,CAAC,MAC1B;UACJ,IAAI/4C,GAAG,GAAGzB,CAAC,CAACrB,CAAC,CAAC;UACd,KAAK,IAAIkyB,CAAC,GAAC,CAAC,EAACC,EAAE,GAACrvB,GAAG,CAACxC,MAAM,EAAC4xB,CAAC,GAACC,EAAE,EAACD,CAAC,EAAE,EAAE;YACpC,IAAImF,QAAQ,GAAGv0B,GAAG,CAACovB,CAAC,CAAC,CAACmF,QAAQ,EAAE;cAAE;YAAO;UAC1C;UACAh2B,CAAC,CAACrB,CAAC,CAAC,CAACqD,MAAM,CAAC6uB,CAAC,EAAC,CAAC,EAAC2pB,MAAM,CAAC;QACxB;MACD;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEvlB,KAAK,CAACy6B,SAAS,GAAG,UAASn6B,KAAK,EAAElxB,KAAK,EAAE;MACxC,IAAI/E,MAAM,GAAGi2B,KAAK,CAACC,OAAO;MAC1B,IAAIH,MAAM,GAAGJ,KAAK,CAACK,OAAO;MAC1B,IAAIjxB,KAAK,IAAI,CAACkxB,KAAK,CAAC+5B,WAAW,EAAE;QAChC;QACA,IAAIhwD,MAAM,EAAE;UAAEA,MAAM,CAACwwD,aAAa,GAAGxwD,MAAM,CAACwwD,aAAa,GAAGxwD,MAAM,CAACwwD,aAAa,GAAC,CAAC,GAAG,CAAC;QAAE;QACxFz6B,MAAM,CAAC3zB,IAAI,CAAC6zB,KAAK,CAAC;QAClB,IAAI,CAACN,KAAK,CAAC/xB,OAAO,IAAIrF,QAAQ,CAAC4E,MAAM,EAAE;UAAE5E,QAAQ,CAAC4E,MAAM,CAAC5B,gBAAgB,CAAC,MAAM,EAAEo0B,KAAK,CAAC;UAAEA,KAAK,CAAC/xB,OAAO,GAAG,IAAI;QAAE;MACjH,CAAC,MAAM,IAAI,CAACmB,KAAK,IAAIkxB,KAAK,CAAC+5B,WAAW,EAAE;QACvC,IAAIhwD,MAAM,EAAE;UAAEA,MAAM,CAACwwD,aAAa,EAAE;QAAE;QACtC,IAAI/wD,CAAC,GAAGs2B,MAAM,CAACp2B,MAAM;QACrB,OAAOF,CAAC,EAAE,EAAE;UACX,IAAIs2B,MAAM,CAACt2B,CAAC,CAAC,IAAIw2B,KAAK,EAAE;YACvBF,MAAM,CAACrzB,MAAM,CAACjD,CAAC,EAAE,CAAC,CAAC;YACnB;UACD;QACD;MACD;MACAw2B,KAAK,CAAC+5B,WAAW,GAAGjrD,KAAK;IAC1B,CAAC;;IAGF;IACC;AACF;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErE,CAAC,CAACu2B,IAAI,GAAG,UAASlC,QAAQ,EAAEoB,OAAO,EAAE;MACpC,IAAIpB,QAAQ,IAAI,IAAI,IAAIA,QAAQ,IAAI,CAAC,EAAE;QAAE,OAAO,IAAI;MAAE;MACtD,IAAIl2B,CAAC,GAAG,IAAI,CAACilB,WAAW,CAAC,IAAI,CAAC6rC,cAAc,CAAC;MAC7C,OAAO,IAAI,CAACgB,QAAQ,CAAC;QAAChnD,CAAC,EAACorB,QAAQ;QAAE67B,EAAE,EAAC/xD,CAAC;QAAE+D,CAAC,EAAC,IAAI,CAACiuD,WAAW;QAAEC,EAAE,EAACjyD,CAAC;QAAEg5B,CAAC,EAAC1B;MAAO,CAAC,CAAC;IAC9E,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEz1B,CAAC,CAACqwD,EAAE,GAAG,UAAS9vD,KAAK,EAAE8zB,QAAQ,EAAEi8B,IAAI,EAAE;MACtC,IAAIxyC,KAAK,CAACuW,QAAQ,CAAC,IAAIA,QAAQ,GAAG,CAAC,EAAE;QAAEA,QAAQ,GAAG,CAAC;MAAE;MACrD,OAAO,IAAI,CAAC47B,QAAQ,CAAC;QAAChnD,CAAC,EAACorB,QAAQ,IAAE,CAAC;QAAE67B,EAAE,EAAC,IAAI,CAAC9sC,WAAW,CAAC,IAAI,CAAC6rC,cAAc,CAAC;QAAE/sD,CAAC,EAACouD,IAAI;QAAEF,EAAE,EAAC,IAAI,CAAChtC,WAAW,CAAC,IAAI,CAACmtC,iBAAiB,CAAChwD,KAAK,CAAC;MAAC,CAAC,CAAC;IAC5I,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEP,CAAC,CAACpC,IAAI,GAAG,UAAS+pC,QAAQ,EAAEttB,MAAM,EAAE1Y,KAAK,EAAE;MAC1C,OAAO,IAAI,CAAC6uD,UAAU,CAAC;QAAC1rD,CAAC,EAAC6iC,QAAQ;QAAE3nC,CAAC,EAACqa,MAAM,GAAGA,MAAM,GAAG,CAAC,IAAI,CAAC;QAAElc,CAAC,EAACwD,KAAK,GAAGA,KAAK,GAAG,IAAI,CAAC6zB;MAAO,CAAC,CAAC;IACjG,CAAC;;IAED;IACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEx1B,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAEjB,MAAM,EAAE;MAC/B,OAAO,IAAI,CAACkxD,UAAU,CAAC;QAAC1rD,CAAC,EAAC,IAAI,CAAC2rD,IAAI;QAAEtyD,CAAC,EAAC,IAAI;QAAE6B,CAAC,EAAC,CAACO,KAAK,EAAEjB,MAAM,GAAGA,MAAM,GAAG,IAAI,CAACk2B,OAAO;MAAC,CAAC,CAAC;IACzF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEx1B,CAAC,CAAC0N,IAAI,GAAG,UAAS6nB,KAAK,EAAE;MACxB,IAAI,CAACA,KAAK,EAAE;QAAEA,KAAK,GAAG,IAAI;MAAE;MAC5B,OAAO,IAAI,CAAC33B,IAAI,CAAC23B,KAAK,CAAC3vB,SAAS,EAAE,CAAC,KAAK,CAAC,EAAE2vB,KAAK,CAAC;IAClD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEv1B,CAAC,CAACmuD,KAAK,GAAG,UAAS54B,KAAK,EAAE;MACzB,IAAI,CAACA,KAAK,EAAE;QAAEA,KAAK,GAAG,IAAI;MAAE;MAC5B,OAAO,IAAI,CAAC33B,IAAI,CAAC23B,KAAK,CAAC3vB,SAAS,EAAE,CAAC,IAAI,CAAC,EAAE2vB,KAAK,CAAC;IACjD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEv1B,CAAC,CAACo1B,WAAW,GAAG,UAAS/wB,KAAK,EAAEqsD,WAAW,EAAE;MAC5C,IAAIrsD,KAAK,GAAG,CAAC,EAAE;QAAEA,KAAK,GAAG,CAAC;MAAE;MAC5B,IAAIqsD,WAAW,IAAI,IAAI,EAAE;QAAEA,WAAW,GAAG,CAAC;MAAE;;MAE5C;MACA,IAAIhiD,CAAC,GAAGrK,KAAK;MACb,IAAIkqB,GAAG,GAAG,KAAK;MACf,IAAI7f,CAAC,IAAI,IAAI,CAAC2lB,QAAQ,EAAE;QACvB,IAAI,IAAI,CAACvB,IAAI,EAAE;UAAEpkB,CAAC,GAAGA,CAAC,GAAC,IAAI,CAAC2lB,QAAQ;QAAE,CAAC,MAClC;UACJ3lB,CAAC,GAAG,IAAI,CAAC2lB,QAAQ;UACjB9F,GAAG,GAAG,IAAI;QACX;MACD;MACA,IAAI7f,CAAC,IAAI,IAAI,CAAC+kB,QAAQ,EAAE;QAAE,OAAOlF,GAAG;MAAE;MAGtC,IAAIoiC,OAAO,GAAG,IAAI,CAACl9B,QAAQ;MAC3B,IAAI,CAACL,QAAQ,GAAG,IAAI,CAACK,QAAQ,GAAG/kB,CAAC,CAAC,CAAC;MACnC,IAAI,CAACglB,aAAa,GAAGrvB,KAAK;;MAE1B;MACA,IAAI,IAAI,CAACmxB,OAAO,EAAE;QACjB,IAAIjH,GAAG,EAAE;UACR;UACA,IAAI,CAACqiC,kBAAkB,CAAC,IAAI,EAAC,CAAC,CAAC;QAChC,CAAC,MAAM,IAAI,IAAI,CAACzB,MAAM,CAAClwD,MAAM,GAAG,CAAC,EAAE;UAClC;UACA,KAAK,IAAIF,CAAC,GAAC,CAAC,EAAEC,CAAC,GAAC,IAAI,CAACmwD,MAAM,CAAClwD,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAACowD,MAAM,CAACpwD,CAAC,CAAC,CAAC2P,CAAC,GAAGA,CAAC,EAAE;cAAE;YAAO;UACpC;UACA,IAAIynB,IAAI,GAAG,IAAI,CAACg5B,MAAM,CAACpwD,CAAC,GAAC,CAAC,CAAC;UAC3B,IAAI,CAAC6xD,kBAAkB,CAACz6B,IAAI,EAAC,CAAC,IAAI,CAACT,aAAa,GAAGhnB,CAAC,GAACynB,IAAI,CAACznB,CAAC,IAAEynB,IAAI,CAACltB,CAAC,CAAC;QACrE;MACD;;MAEA;MACA,IAAIynD,WAAW,IAAI,CAAC,IAAI,IAAI,CAACtB,QAAQ,CAACnwD,MAAM,GAAG,CAAC,EAAE;QACjD,IAAI,IAAI,CAACowD,SAAS,EAAE;UACnB;UACA,IAAI,CAACwB,WAAW,CAACniD,CAAC,EAACA,CAAC,CAAC;QACtB,CAAC,MAAM,IAAIgiD,WAAW,IAAI,CAAC,IAAIhiD,CAAC,GAACiiD,OAAO,EAAE;UACzC,IAAIA,OAAO,IAAI,IAAI,CAACt8B,QAAQ,EAAE;YAAE,IAAI,CAACw8B,WAAW,CAACF,OAAO,EAAE,IAAI,CAACt8B,QAAQ,CAAC;UAAE;UAC1E,IAAI,CAACw8B,WAAW,CAAC,CAAC,EAAEniD,CAAC,EAAE,IAAI,CAAC;QAC7B,CAAC,MAAM;UACN,IAAI,CAACmiD,WAAW,CAACF,OAAO,EAAEjiD,CAAC,CAAC;QAC7B;MACD;MAEA,IAAI6f,GAAG,EAAE;QAAE,IAAI,CAAC3oB,SAAS,CAAC,IAAI,CAAC;MAAE;MAE3B,IAAI,CAACzE,aAAa,CAAC,QAAQ,CAAC;MAClC,OAAOotB,GAAG;IACX,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEvuB,CAAC,CAAC6oB,IAAI,GAAG,UAAS7hB,KAAK,EAAE;MACxB,IAAI,IAAI,CAAC0xC,OAAO,EAAE;QAAE;MAAQ;MAC5B,IAAI,CAACtjB,WAAW,CAAC,IAAI,CAAC1B,aAAa,GAAC1sB,KAAK,CAAC;IAC3C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEhH,CAAC,CAAC4F,SAAS,GAAG,UAASvB,KAAK,EAAE;MAC7B,IAAI,IAAI,CAACq0C,OAAO,KAAK,CAAC,CAACr0C,KAAK,EAAE;QAAE,OAAO,IAAI;MAAE;MAC7C,IAAI,CAACq0C,OAAO,GAAG,CAAC,CAACr0C,KAAK;MACtB4wB,KAAK,CAACy6B,SAAS,CAAC,IAAI,EAAE,CAACrrD,KAAK,CAAC;MAC7B,OAAO,IAAI;IACZ,CAAC;;IAED;IACArE,CAAC,CAACwW,CAAC,GAAGxW,CAAC,CAACu2B,IAAI;IACZv2B,CAAC,CAAC0O,CAAC,GAAG1O,CAAC,CAACqwD,EAAE;IACVrwD,CAAC,CAACgJ,CAAC,GAAGhJ,CAAC,CAACpC,IAAI;IACZoC,CAAC,CAAC2b,CAAC,GAAG3b,CAAC,CAACM,GAAG;;IAEX;AACF;AACA;AACA;AACA;IACEN,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,SAAS;IACjB,CAAC;;IAED;AACF;AACA;AACA;IACER,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,MAAM,0BAA0B;IACjC,CAAC;;IAEF;IACC;AACF;AACA;AACA;AACA;AACA;IACEL,CAAC,CAAC4wD,kBAAkB,GAAG,UAASz6B,IAAI,EAAEG,KAAK,EAAE;MAC5C,IAAI45B,EAAE,EAACE,EAAE,EAACj5B,CAAC,EAAC25B,EAAE,EAACC,EAAE,EAACtvD,GAAG;MACrB,IAAI,CAAC00B,IAAI,IAAIG,KAAK,IAAI,CAAC,EAAE;QACxB;QACA,IAAI,CAACb,OAAO,GAAG,KAAK;QACpBy6B,EAAE,GAAGE,EAAE,GAAG,IAAI,CAACnB,cAAc;MAC9B,CAAC,MAAM;QACN,IAAI,CAACx5B,OAAO,GAAG,CAAC,CAACU,IAAI,CAACgB,CAAC;QACvB,IAAI,IAAI,CAAC1B,OAAO,EAAE;UAAE;QAAQ,CAAC,CAAC;QAC9B;QACA,IAAIU,IAAI,CAACj0B,CAAC,EAAE;UAAEo0B,KAAK,GAAGH,IAAI,CAACj0B,CAAC,CAACo0B,KAAK,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;QAAE;QAC3C45B,EAAE,GAAG/5B,IAAI,CAAC+5B,EAAE;QACZE,EAAE,GAAGj6B,IAAI,CAACi6B,EAAE;MACb;MAEA,KAAK,IAAIzxD,CAAC,IAAI,IAAI,CAACuwD,eAAe,EAAE;QACnC,IAAI,CAAC4B,EAAE,GAAGZ,EAAE,CAACvxD,CAAC,CAAC,KAAK,IAAI,EAAE;UAAEuxD,EAAE,CAACvxD,CAAC,CAAC,GAAGmyD,EAAE,GAAG,IAAI,CAAC5B,eAAe,CAACvwD,CAAC,CAAC;QAAE;QAClE,IAAI,CAACoyD,EAAE,GAAGX,EAAE,CAACzxD,CAAC,CAAC,KAAK,IAAI,EAAE;UAAEyxD,EAAE,CAACzxD,CAAC,CAAC,GAAGoyD,EAAE,GAAGD,EAAE;QAAE;QAC7C,IAAIA,EAAE,IAAIC,EAAE,IAAIz6B,KAAK,IAAI,CAAC,IAAIA,KAAK,IAAI,CAAC,IAAK,OAAOw6B,EAAG,IAAI,QAAS,EAAE;UACrE;UACA35B,CAAC,GAAGb,KAAK,IAAI,CAAC,GAAGy6B,EAAE,GAAGD,EAAE;QACzB,CAAC,MAAM;UACN35B,CAAC,GAAG25B,EAAE,GAAC,CAACC,EAAE,GAACD,EAAE,IAAEx6B,KAAK;QACrB;QAEA,IAAI06B,MAAM,GAAG,KAAK;QAClB,IAAIvvD,GAAG,GAAGwzB,KAAK,CAACkiB,QAAQ,CAACx4C,CAAC,CAAC,EAAE;UAC5B,KAAK,IAAII,CAAC,GAAC,CAAC,EAACC,CAAC,GAACyC,GAAG,CAACxC,MAAM,EAACF,CAAC,GAACC,CAAC,EAACD,CAAC,EAAE,EAAE;YAClC,IAAIkyD,EAAE,GAAGxvD,GAAG,CAAC1C,CAAC,CAAC,CAACw2B,KAAK,CAAC,IAAI,EAAE52B,CAAC,EAAEw4B,CAAC,EAAE+4B,EAAE,EAAEE,EAAE,EAAE95B,KAAK,EAAE,CAAC,CAACH,IAAI,IAAE+5B,EAAE,IAAEE,EAAE,EAAE,CAACj6B,IAAI,CAAC;YACvE,IAAI86B,EAAE,IAAIh8B,KAAK,CAAC46B,MAAM,EAAE;cAAEmB,MAAM,GAAG,IAAI;YAAE,CAAC,MACrC;cAAE75B,CAAC,GAAG85B,EAAE;YAAE;UAChB;QACD;QACA,IAAI,CAACD,MAAM,EAAE;UAAE,IAAI,CAACx7B,OAAO,CAAC72B,CAAC,CAAC,GAAGw4B,CAAC;QAAE;MACrC;IAED,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEn3B,CAAC,CAAC6wD,WAAW,GAAG,UAASK,QAAQ,EAAEC,MAAM,EAAEC,YAAY,EAAE;MACxD,IAAIC,IAAI,GAAGH,QAAQ;MACnB,IAAII,IAAI,GAAGH,MAAM;MACjB,IAAIpyD,CAAC,GAAG,CAAC,CAAC;MACV,IAAI8xB,CAAC,GAAG,IAAI,CAACu+B,QAAQ,CAACnwD,MAAM;MAC5B,IAAI2f,CAAC,GAAG,CAAC;MACT,IAAIsyC,QAAQ,GAAGC,MAAM,EAAE;QACtB;QACAE,IAAI,GAAGF,MAAM;QACbG,IAAI,GAAGJ,QAAQ;QACfnyD,CAAC,GAAG8xB,CAAC;QACLA,CAAC,GAAGjS,CAAC,GAAG,CAAC,CAAC;MACX;MACA,OAAO,CAAC7f,CAAC,IAAE6f,CAAC,KAAKiS,CAAC,EAAE;QACnB,IAAI0gC,MAAM,GAAG,IAAI,CAACnC,QAAQ,CAACrwD,CAAC,CAAC;QAC7B,IAAI61B,GAAG,GAAG28B,MAAM,CAAC7iD,CAAC;QAClB,IAAIkmB,GAAG,IAAI08B,IAAI,IAAK18B,GAAG,GAAGy8B,IAAI,IAAIz8B,GAAG,GAAG08B,IAAK,IAAKF,YAAY,IAAIx8B,GAAG,IAAIs8B,QAAS,EAAG;UACpFK,MAAM,CAACzsD,CAAC,CAAC1B,KAAK,CAACmuD,MAAM,CAACpzD,CAAC,EAAEozD,MAAM,CAACvxD,CAAC,CAAC;QACnC;MACD;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEA,CAAC,CAACuwD,iBAAiB,GAAG,UAASpyD,CAAC,EAAE;MACjC,IAAIsD,GAAG,EAAC+vD,QAAQ,EAACzyD,CAAC,EAAEC,CAAC,EAAEyyD,WAAW;MAClC,KAAK,IAAI9yD,CAAC,IAAIR,CAAC,EAAE;QAChB,IAAI,IAAI,CAAC+wD,eAAe,CAACvwD,CAAC,CAAC,KAAKuT,SAAS,EAAE;UAC1Cs/C,QAAQ,GAAG,IAAI,CAACh8B,OAAO,CAAC72B,CAAC,CAAC;;UAE1B;UACA,IAAI8C,GAAG,GAAGwzB,KAAK,CAACkiB,QAAQ,CAACx4C,CAAC,CAAC,EAAE;YAC5B,KAAKI,CAAC,GAAC,CAAC,EAACC,CAAC,GAACyC,GAAG,CAACxC,MAAM,EAACF,CAAC,GAACC,CAAC,EAACD,CAAC,EAAE,EAAE;cAC9ByyD,QAAQ,GAAG/vD,GAAG,CAAC1C,CAAC,CAAC,CAACoE,IAAI,CAAC,IAAI,EAAExE,CAAC,EAAE6yD,QAAQ,CAAC;YAC1C;UACD;UACA,IAAI,CAACtC,eAAe,CAACvwD,CAAC,CAAC,GAAG,IAAI,CAACswD,cAAc,CAACtwD,CAAC,CAAC,GAAI6yD,QAAQ,KAAGt/C,SAAS,GAAI,IAAI,GAAGs/C,QAAQ;QAC5F,CAAC,MAAM;UACNA,QAAQ,GAAG,IAAI,CAACvC,cAAc,CAACtwD,CAAC,CAAC;QAClC;MACD;MAEA,KAAK,IAAIA,CAAC,IAAIR,CAAC,EAAE;QAChBqzD,QAAQ,GAAG,IAAI,CAACvC,cAAc,CAACtwD,CAAC,CAAC;QACjC,IAAI8C,GAAG,GAAGwzB,KAAK,CAACkiB,QAAQ,CAACx4C,CAAC,CAAC,EAAE;UAC5B8yD,WAAW,GAAGA,WAAW,IAAE,CAAC,CAAC;UAC7B,KAAK1yD,CAAC,GAAC,CAAC,EAAEC,CAAC,GAACyC,GAAG,CAACxC,MAAM,EAACF,CAAC,GAACC,CAAC,EAACD,CAAC,EAAE,EAAE;YAC/B;YACA,IAAI0C,GAAG,CAAC1C,CAAC,CAAC,CAACo3B,IAAI,EAAE;cAAE10B,GAAG,CAAC1C,CAAC,CAAC,CAACo3B,IAAI,CAAC,IAAI,EAAEx3B,CAAC,EAAE6yD,QAAQ,EAAErzD,CAAC,CAACQ,CAAC,CAAC,EAAE8yD,WAAW,CAAC;YAAE;UACvE;QACD;QACA,IAAI,CAACxC,cAAc,CAACtwD,CAAC,CAAC,GAAGR,CAAC,CAACQ,CAAC,CAAC;MAC9B;MACA,IAAI8yD,WAAW,EAAE;QAAE,IAAI,CAAClB,iBAAiB,CAACkB,WAAW,CAAC;MAAE;MACxD,OAAO,IAAI,CAACxC,cAAc;IAC3B,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEjvD,CAAC,CAACojB,WAAW,GAAG,UAAS7iB,KAAK,EAAE;MAC/B,IAAIpC,CAAC,GAAG,CAAC,CAAC;MACV,KAAK,IAAIQ,CAAC,IAAI4B,KAAK,EAAE;QACpBpC,CAAC,CAACQ,CAAC,CAAC,GAAG4B,KAAK,CAAC5B,CAAC,CAAC;MAChB;MACA,OAAOR,CAAC;IACT,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE6B,CAAC,CAACiwD,QAAQ,GAAG,UAAS9xD,CAAC,EAAE;MACxB,IAAIA,CAAC,CAAC8K,CAAC,GAAG,CAAC,EAAE;QACZ,IAAI,CAACkmD,MAAM,CAACztD,IAAI,CAACvD,CAAC,CAAC;QACnBA,CAAC,CAACuQ,CAAC,GAAG,IAAI,CAAC2lB,QAAQ;QACnB,IAAI,CAACA,QAAQ,IAAIl2B,CAAC,CAAC8K,CAAC;MACrB;MACA,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEjJ,CAAC,CAACwwD,UAAU,GAAG,UAASryD,CAAC,EAAE;MAC1BA,CAAC,CAACuQ,CAAC,GAAG,IAAI,CAAC2lB,QAAQ;MACnB,IAAI,CAAC+6B,QAAQ,CAAC1tD,IAAI,CAACvD,CAAC,CAAC;MACrB,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE6B,CAAC,CAACywD,IAAI,GAAG,UAASlwD,KAAK,EAAEpC,CAAC,EAAE;MAC3B,KAAK,IAAIQ,CAAC,IAAI4B,KAAK,EAAE;QACpBpC,CAAC,CAACQ,CAAC,CAAC,GAAG4B,KAAK,CAAC5B,CAAC,CAAC;MAChB;IACD,CAAC;IAEDd,QAAQ,CAACo3B,KAAK,GAAGp3B,QAAQ,CAACQ,OAAO,CAAC42B,KAAK,EAAE,iBAAiB,CAAC;EAE5D,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAGZ;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS9B,QAAQA,CAACkC,MAAM,EAAEtC,MAAM,EAAExyB,KAAK,EAAE;MACxC,IAAI,CAAC2O,2BAA2B,CAAC,CAAC;;MAEnC;MACC;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC8/C,iBAAiB,GAAG,KAAK;;MAE9B;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC36B,QAAQ,GAAG,CAAC;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACvB,IAAI,GAAG,KAAK;;MAEjB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACM,QAAQ,GAAG,IAAI;;MAEpB;MACA;AACH;AACA;AACA;AACA;MACG,IAAI,CAACslB,OAAO,GAAG,KAAK;;MAEpB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACpjB,OAAO,GAAG,EAAE;;MAEjB;AACH;AACA;AACA;AACA;MACG,IAAI,CAAC2D,OAAO,GAAG,IAAI;;MAEnB;AACH;AACA;AACA;AACA;MACG,IAAI,CAACy4B,UAAU,GAAG,IAAI;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACh+B,aAAa,GAAG,CAAC;;MAEtB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAACD,QAAQ,GAAG,CAAC,CAAC;;MAElB;AACH;AACA;AACA;AACA;AACA;MACG,IAAI,CAAC47B,SAAS,GAAG,KAAK;;MAEtB;AACH;AACA;AACA;AACA;AACA;AACA;MACG,IAAI,CAACC,WAAW,GAAG,KAAK;MAGxB,IAAI/uD,KAAK,EAAE;QACV,IAAI,CAAC8uD,SAAS,GAAG9uD,KAAK,CAAC8yB,QAAQ;QAC/B,IAAI,CAACP,IAAI,GAAGvyB,KAAK,CAACuyB,IAAI;QACtB,IAAI,CAACk8B,iBAAiB,GAAGzuD,KAAK,CAACyuD,iBAAiB;QAChDzuD,KAAK,CAACgvD,QAAQ,IAAE,IAAI,CAAC1uD,gBAAgB,CAAC,QAAQ,EAAEN,KAAK,CAACgvD,QAAQ,CAAC;MAChE;MACA,IAAIl6B,MAAM,EAAE;QAAE,IAAI,CAACs8B,QAAQ,CAACvuD,KAAK,CAAC,IAAI,EAAEiyB,MAAM,CAAC;MAAE;MACjD,IAAI,CAACu8B,SAAS,CAAC7+B,MAAM,CAAC;MACtB,IAAIxyB,KAAK,IAAEA,KAAK,CAACyC,MAAM,EAAE;QAAE,IAAI,CAAC01C,OAAO,GAAC,IAAI;MAAE,CAAC,MAC1C;QAAE76C,QAAQ,CAACo3B,KAAK,CAACy6B,SAAS,CAAC,IAAI,EAAC,IAAI,CAAC;MAAE;MAC5C,IAAInvD,KAAK,IAAEA,KAAK,CAAC6yB,QAAQ,IAAE,IAAI,EAAE;QAAE,IAAI,CAACgC,WAAW,CAAC70B,KAAK,CAAC6yB,QAAQ,EAAEv1B,QAAQ,CAACo3B,KAAK,CAACC,IAAI,CAAC;MAAE;IAE3F;IACA,IAAIl1B,CAAC,GAAGnC,QAAQ,CAACG,MAAM,CAACm1B,QAAQ,EAAEt1B,QAAQ,CAAC4C,eAAe,CAAC;;IAE3D;IACA;;IAGD;IACC;AACF;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACET,CAAC,CAAC2xD,QAAQ,GAAG,UAASp8B,KAAK,EAAE;MAC5B,IAAIpQ,WAAW,GAAG9hB,SAAS;MAE3B,IAAIrE,CAAC,GAAGqE,SAAS,CAACpE,MAAM;MACxB,IAAID,CAAC,GAAG,CAAC,EAAE;QACV,KAAK,IAAID,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UAAE,IAAI,CAAC4yD,QAAQ,CAACxsC,WAAW,CAACpmB,CAAC,CAAC,CAAC;QAAE;QACzD,OAAOsE,SAAS,CAAC,CAAC,CAAC;MACpB,CAAC,MAAM,IAAIrE,CAAC,IAAI,CAAC,EAAE;QAAE,OAAO,IAAI;MAAE;MAClC,IAAI,CAAC6yD,WAAW,CAACt8B,KAAK,CAAC;MACvB,IAAI,CAACD,OAAO,CAAC5zB,IAAI,CAAC6zB,KAAK,CAAC;MACxBA,KAAK,CAAC3vB,SAAS,CAAC,IAAI,CAAC;MACrB2vB,KAAK,CAACmjB,OAAO,GAAG,KAAK;MACrBnjB,KAAK,CAAC85B,SAAS,GAAG,IAAI,CAACA,SAAS;MAChC,IAAI95B,KAAK,CAAClB,QAAQ,GAAG,IAAI,CAACA,QAAQ,EAAE;QAAE,IAAI,CAACA,QAAQ,GAAGkB,KAAK,CAAClB,QAAQ;MAAE;MACtE,IAAI,IAAI,CAACZ,QAAQ,IAAI,CAAC,EAAE;QAAE8B,KAAK,CAACH,WAAW,CAAC,IAAI,CAAC3B,QAAQ,EAAE51B,QAAQ,CAACo3B,KAAK,CAACC,IAAI,CAAC;MAAE;MACjF,OAAOK,KAAK;IACb,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEv1B,CAAC,CAAC6xD,WAAW,GAAG,UAASt8B,KAAK,EAAE;MAC/B,IAAIpQ,WAAW,GAAG9hB,SAAS;MAE3B,IAAIrE,CAAC,GAAGqE,SAAS,CAACpE,MAAM;MACxB,IAAID,CAAC,GAAG,CAAC,EAAE;QACV,IAAIwmB,IAAI,GAAG,IAAI;QACf,KAAK,IAAIzmB,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UAAEymB,IAAI,GAAGA,IAAI,IAAI,IAAI,CAACqsC,WAAW,CAAC1sC,WAAW,CAACpmB,CAAC,CAAC,CAAC;QAAE;QAC3E,OAAOymB,IAAI;MACZ,CAAC,MAAM,IAAIxmB,CAAC,IAAI,CAAC,EAAE;QAAE,OAAO,KAAK;MAAE;MAEnC,IAAIq2B,MAAM,GAAG,IAAI,CAACC,OAAO;MACzB,IAAIv2B,CAAC,GAAGs2B,MAAM,CAACp2B,MAAM;MACrB,OAAOF,CAAC,EAAE,EAAE;QACX,IAAIs2B,MAAM,CAACt2B,CAAC,CAAC,IAAIw2B,KAAK,EAAE;UACvBF,MAAM,CAACrzB,MAAM,CAACjD,CAAC,EAAE,CAAC,CAAC;UACnB,IAAIw2B,KAAK,CAAClB,QAAQ,IAAI,IAAI,CAACA,QAAQ,EAAE;YAAE,IAAI,CAACy9B,cAAc,CAAC,CAAC;UAAE;UAC9D,OAAO,IAAI;QACZ;MACD;MACA,OAAO,KAAK;IACb,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE9xD,CAAC,CAAC+xD,QAAQ,GAAG,UAAStjD,KAAK,EAAE2kB,QAAQ,EAAE;MACtC,IAAI,CAAC6F,OAAO,CAACxqB,KAAK,CAAC,GAAG2kB,QAAQ;MAC9B,IAAI/wB,IAAI,GAAG,IAAI,CAACqvD,UAAU;MAC1B,IAAIrvD,IAAI,EAAE;QACT,KAAK,IAAItD,CAAC,GAAE,CAAC,EAACC,CAAC,GAACqD,IAAI,CAACpD,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UAAE,IAAIq0B,QAAQ,GAAG/wB,IAAI,CAACtD,CAAC,CAAC,CAACq0B,QAAQ,EAAE;YAAE;UAAO;QAAE;QACrF/wB,IAAI,CAACL,MAAM,CAACjD,CAAC,EAAE,CAAC,EAAE;UAAC0P,KAAK,EAACA,KAAK;UAAE2kB,QAAQ,EAACA;QAAQ,CAAC,CAAC;MACpD;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEpzB,CAAC,CAAC4xD,SAAS,GAAG,UAASzzD,CAAC,EAAE;MACzB,IAAI,CAAC86B,OAAO,GAAG96B,CAAC,GAAIA,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE6B,CAAC,CAACi0B,SAAS,GAAG,YAAW;MACxB,IAAI5xB,IAAI,GAAG,IAAI,CAACqvD,UAAU;MAC1B,IAAI,CAACrvD,IAAI,EAAE;QACVA,IAAI,GAAG,IAAI,CAACqvD,UAAU,GAAG,EAAE;QAC3B,IAAI3+B,MAAM,GAAG,IAAI,CAACkG,OAAO;QACzB,KAAK,IAAIt6B,CAAC,IAAIo0B,MAAM,EAAE;UACrB1wB,IAAI,CAACX,IAAI,CAAC;YAAC+M,KAAK,EAAC9P,CAAC;YAAEy0B,QAAQ,EAACL,MAAM,CAACp0B,CAAC;UAAC,CAAC,CAAC;QACzC;QACA0D,IAAI,CAACqjB,IAAI,CAAC,UAAU5c,CAAC,EAACC,CAAC,EAAE;UAAE,OAAOD,CAAC,CAACsqB,QAAQ,GAAErqB,CAAC,CAACqqB,QAAQ;QAAE,CAAC,CAAC;MAC7D;MACA,OAAO/wB,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACErC,CAAC,CAACk0B,eAAe,GAAG,YAAW;MAC9B,IAAInB,MAAM,GAAG,IAAI,CAACkB,SAAS,CAAC,CAAC;MAC7B,IAAIW,GAAG,GAAG,IAAI,CAACxB,QAAQ;MACvB,IAAIp0B,CAAC,GAAG+zB,MAAM,CAAC9zB,MAAM;MACrB,IAAID,CAAC,EAAE;QACN,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;UAAE,IAAI61B,GAAG,GAAG7B,MAAM,CAACh0B,CAAC,CAAC,CAACq0B,QAAQ,EAAE;YAAE;UAAO;QAAE;QACrE,OAAQr0B,CAAC,IAAE,CAAC,GAAI,IAAI,GAAGg0B,MAAM,CAACh0B,CAAC,GAAC,CAAC,CAAC,CAAC0P,KAAK;MACzC;MACA,OAAO,IAAI;IACZ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEzO,CAAC,CAAC2O,WAAW,GAAG,UAAS6lB,eAAe,EAAE;MACzC,IAAI,CAAC5uB,SAAS,CAAC,KAAK,CAAC;MACrB,IAAI,CAACooB,KAAK,CAACwG,eAAe,CAAC;IAC5B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEx0B,CAAC,CAACmO,WAAW,GAAG,UAASqmB,eAAe,EAAE;MACzC,IAAI,CAAC5uB,SAAS,CAAC,IAAI,CAAC;MACpB,IAAI,CAACooB,KAAK,CAACwG,eAAe,CAAC;IAC5B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEx0B,CAAC,CAACo1B,WAAW,GAAG,UAAS/wB,KAAK,EAAEqsD,WAAW,EAAE;MAC5C,IAAIhiD,CAAC,GAAG,IAAI,CAACymB,aAAa,CAAC9wB,KAAK,CAAC;MACjC,IAAIkqB,GAAG,GAAG,CAAC,IAAI,CAACuE,IAAI,IAAIzuB,KAAK,IAAI,IAAI,CAACgwB,QAAQ;MAC9C,IAAI3lB,CAAC,IAAI,IAAI,CAAC+kB,QAAQ,EAAE;QAAE,OAAOlF,GAAG;MAAE;MACtC,IAAI,CAACmF,aAAa,GAAGrvB,KAAK;MAC1B,IAAI,CAAC+uB,QAAQ,GAAG,IAAI,CAACK,QAAQ,GAAG/kB,CAAC,CAAC,CAAC;MACnC,KAAK,IAAI3P,CAAC,GAAC,CAAC,EAAEC,CAAC,GAAC,IAAI,CAACs2B,OAAO,CAACr2B,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QAC9C,IAAI,CAACu2B,OAAO,CAACv2B,CAAC,CAAC,CAACq2B,WAAW,CAAC1mB,CAAC,EAAEgiD,WAAW,CAAC;QAC3C,IAAIhiD,CAAC,IAAI,IAAI,CAAC+kB,QAAQ,EAAE;UAAE,OAAO,KAAK;QAAE,CAAC,CAAC;MAC3C;MACA,IAAIlF,GAAG,EAAE;QAAE,IAAI,CAAC3oB,SAAS,CAAC,IAAI,CAAC;MAAE;MACjC,IAAI,CAACzE,aAAa,CAAC,QAAQ,CAAC;MAC5B,OAAOotB,GAAG;IACX,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEvuB,CAAC,CAAC4F,SAAS,GAAG,UAASvB,KAAK,EAAE;MAC7B,IAAI,CAACq0C,OAAO,GAAG,CAAC,CAACr0C,KAAK;MACtBxG,QAAQ,CAACo3B,KAAK,CAACy6B,SAAS,CAAC,IAAI,EAAE,CAACrrD,KAAK,CAAC;IACvC,CAAC;;IAED;AACF;AACA;AACA;AACA;IACErE,CAAC,CAAC8xD,cAAc,GAAG,YAAW;MAC7B,IAAI,CAACz9B,QAAQ,GAAG,CAAC;MACjB,KAAK,IAAIt1B,CAAC,GAAC,CAAC,EAACC,CAAC,GAAC,IAAI,CAACs2B,OAAO,CAACr2B,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QAC7C,IAAIw2B,KAAK,GAAG,IAAI,CAACD,OAAO,CAACv2B,CAAC,CAAC;QAC3B,IAAIw2B,KAAK,CAAClB,QAAQ,GAAG,IAAI,CAACA,QAAQ,EAAE;UAAE,IAAI,CAACA,QAAQ,GAAGkB,KAAK,CAAClB,QAAQ;QAAE;MACvE;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEr0B,CAAC,CAAC6oB,IAAI,GAAG,UAAS7hB,KAAK,EAAE;MACxB,IAAI,CAACouB,WAAW,CAAC,IAAI,CAAC1B,aAAa,GAAC1sB,KAAK,CAAC;IAC3C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEhH,CAAC,CAAC60B,OAAO,GAAG,UAASL,eAAe,EAAE;MACrC,IAAII,GAAG,GAAGmQ,MAAM,CAACvQ,eAAe,CAAC;MACjC,IAAI1W,KAAK,CAAC8W,GAAG,CAAC,EAAE;QAAEA,GAAG,GAAG,IAAI,CAACqE,OAAO,CAACzE,eAAe,CAAC;MAAE;MACvD,OAAOI,GAAG;IACX,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE50B,CAAC,CAACQ,QAAQ,GAAG,YAAW;MACvB,OAAO,YAAY;IACpB,CAAC;;IAED;AACF;AACA;AACA;IACER,CAAC,CAACK,KAAK,GAAG,YAAW;MACpB,MAAM,6BAA6B;IACpC,CAAC;;IAEF;IACC;AACF;AACA;AACA;AACA;IACEL,CAAC,CAACguB,KAAK,GAAG,UAASwG,eAAe,EAAE;MACnC,IAAII,GAAG,GAAG,IAAI,CAACC,OAAO,CAACL,eAAe,CAAC;MACvC,IAAII,GAAG,IAAI,IAAI,EAAE;QAAE,IAAI,CAACQ,WAAW,CAACR,GAAG,CAAC;MAAE;IAC3C,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE50B,CAAC,CAACm1B,aAAa,GAAG,UAAS9wB,KAAK,EAAE;MACjC,IAAIA,KAAK,GAAG,CAAC,EAAE;QAAE,OAAO,CAAC;MAAE;MAC3B,IAAIA,KAAK,GAAG,IAAI,CAACgwB,QAAQ,EAAE;QAAE,OAAOhwB,KAAK;MAAE;MAC3C,OAAO,IAAI,CAACyuB,IAAI,GAAGzuB,KAAK,GAAC,IAAI,CAACgwB,QAAQ,GAAG,IAAI,CAACA,QAAQ;IACvD,CAAC;IAEDx2B,QAAQ,CAACs1B,QAAQ,GAAGt1B,QAAQ,CAACQ,OAAO,CAAC80B,QAAQ,EAAE,iBAAiB,CAAC;EAElE,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAEX;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS6+B,IAAIA,CAAA,EAAG;MACf,MAAM,8BAA8B;IACrC;;IAGD;IACC;AACF;AACA;AACA;AACA;AACA;IACEA,IAAI,CAACC,MAAM,GAAG,UAASvjD,CAAC,EAAE;MAAE,OAAOA,CAAC;IAAE,CAAC;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAACE,IAAI,GAAGF,IAAI,CAACC,MAAM;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;IACED,IAAI,CAACxtD,GAAG,GAAG,UAAS2tD,MAAM,EAAE;MAC3B,IAAIA,MAAM,GAAG,CAAC,CAAC,EAAE;QAAEA,MAAM,GAAG,CAAC,CAAC;MAAE;MAChC,IAAIA,MAAM,GAAG,CAAC,EAAE;QAAEA,MAAM,GAAG,CAAC;MAAE;MAC9B,OAAO,UAASzjD,CAAC,EAAE;QAClB,IAAIyjD,MAAM,IAAE,CAAC,EAAE;UAAE,OAAOzjD,CAAC;QAAE;QAC3B,IAAIyjD,MAAM,GAAC,CAAC,EAAE;UAAE,OAAOzjD,CAAC,IAAEA,CAAC,GAAC,CAACyjD,MAAM,GAAC,CAAC,GAACA,MAAM,CAAC;QAAE;QAC/C,OAAOzjD,CAAC,IAAE,CAAC,CAAC,GAACA,CAAC,IAAEyjD,MAAM,IAAE,CAAC,GAACA,MAAM,CAAC,CAAC;MACnC,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEH,IAAI,CAACI,QAAQ,GAAG,UAASr4B,GAAG,EAAE;MAC7B,OAAO,UAASrrB,CAAC,EAAE;QAClB,OAAOjJ,IAAI,CAACs0B,GAAG,CAACrrB,CAAC,EAACqrB,GAAG,CAAC;MACvB,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEi4B,IAAI,CAACK,SAAS,GAAG,UAASt4B,GAAG,EAAE;MAC9B,OAAO,UAASrrB,CAAC,EAAE;QAClB,OAAO,CAAC,GAACjJ,IAAI,CAACs0B,GAAG,CAAC,CAAC,GAACrrB,CAAC,EAACqrB,GAAG,CAAC;MAC3B,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEi4B,IAAI,CAACM,WAAW,GAAG,UAASv4B,GAAG,EAAE;MAChC,OAAO,UAASrrB,CAAC,EAAE;QAClB,IAAI,CAACA,CAAC,IAAE,CAAC,IAAE,CAAC,EAAE;UAAE,OAAO,GAAG,GAACjJ,IAAI,CAACs0B,GAAG,CAACrrB,CAAC,EAACqrB,GAAG,CAAC;QAAE;QAC5C,OAAO,CAAC,GAAC,GAAG,GAACt0B,IAAI,CAACkG,GAAG,CAAClG,IAAI,CAACs0B,GAAG,CAAC,CAAC,GAACrrB,CAAC,EAACqrB,GAAG,CAAC,CAAC;MACzC,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEi4B,IAAI,CAACO,MAAM,GAAGP,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC;IAC9B;AACF;AACA;AACA;AACA;AACA;IACEJ,IAAI,CAACQ,OAAO,GAAGR,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC;IAChC;AACF;AACA;AACA;AACA;AACA;IACEL,IAAI,CAACS,SAAS,GAAGT,IAAI,CAACM,WAAW,CAAC,CAAC,CAAC;;IAEpC;AACF;AACA;AACA;AACA;AACA;IACEN,IAAI,CAACU,OAAO,GAAGV,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC;IAC/B;AACF;AACA;AACA;AACA;AACA;IACEJ,IAAI,CAACW,QAAQ,GAAGX,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC;IACjC;AACF;AACA;AACA;AACA;AACA;IACEL,IAAI,CAACY,UAAU,GAAGZ,IAAI,CAACM,WAAW,CAAC,CAAC,CAAC;;IAErC;AACF;AACA;AACA;AACA;AACA;IACEN,IAAI,CAACa,OAAO,GAAGb,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC;IAC/B;AACF;AACA;AACA;AACA;AACA;IACEJ,IAAI,CAACc,QAAQ,GAAGd,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC;IACjC;AACF;AACA;AACA;AACA;AACA;IACEL,IAAI,CAACe,UAAU,GAAGf,IAAI,CAACM,WAAW,CAAC,CAAC,CAAC;;IAErC;AACF;AACA;AACA;AACA;AACA;IACEN,IAAI,CAACgB,OAAO,GAAGhB,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC;IAC/B;AACF;AACA;AACA;AACA;AACA;IACEJ,IAAI,CAACiB,QAAQ,GAAGjB,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC;IACjC;AACF;AACA;AACA;AACA;AACA;IACEL,IAAI,CAACkB,UAAU,GAAGlB,IAAI,CAACM,WAAW,CAAC,CAAC,CAAC;;IAErC;AACF;AACA;AACA;AACA;AACA;IACEN,IAAI,CAACmB,MAAM,GAAG,UAASzkD,CAAC,EAAE;MACzB,OAAO,CAAC,GAACjJ,IAAI,CAACkF,GAAG,CAAC+D,CAAC,GAACjJ,IAAI,CAAC6D,EAAE,GAAC,CAAC,CAAC;IAC/B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE0oD,IAAI,CAACoB,OAAO,GAAG,UAAS1kD,CAAC,EAAE;MAC1B,OAAOjJ,IAAI,CAACmF,GAAG,CAAC8D,CAAC,GAACjJ,IAAI,CAAC6D,EAAE,GAAC,CAAC,CAAC;IAC7B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACE0oD,IAAI,CAACqB,SAAS,GAAG,UAAS3kD,CAAC,EAAE;MAC5B,OAAO,CAAC,GAAG,IAAEjJ,IAAI,CAACkF,GAAG,CAAClF,IAAI,CAAC6D,EAAE,GAACoF,CAAC,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAACsB,SAAS,GAAG,UAASnB,MAAM,EAAE;MACjC,OAAO,UAASzjD,CAAC,EAAE;QAClB,OAAOA,CAAC,GAACA,CAAC,IAAE,CAACyjD,MAAM,GAAC,CAAC,IAAEzjD,CAAC,GAACyjD,MAAM,CAAC;MACjC,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEH,IAAI,CAACuB,MAAM,GAAGvB,IAAI,CAACsB,SAAS,CAAC,GAAG,CAAC;;IAEjC;AACF;AACA;AACA;AACA;AACA;AACA;IACEtB,IAAI,CAACwB,UAAU,GAAG,UAASrB,MAAM,EAAE;MAClC,OAAO,UAASzjD,CAAC,EAAE;QAClB,OAAQ,EAAEA,CAAC,GAACA,CAAC,IAAE,CAACyjD,MAAM,GAAC,CAAC,IAAEzjD,CAAC,GAAGyjD,MAAM,CAAC,GAAG,CAAC;MAC1C,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEH,IAAI,CAACyB,OAAO,GAAGzB,IAAI,CAACwB,UAAU,CAAC,GAAG,CAAC;;IAEnC;AACF;AACA;AACA;AACA;AACA;AACA;IACExB,IAAI,CAAC0B,YAAY,GAAG,UAASvB,MAAM,EAAE;MACpCA,MAAM,IAAE,KAAK;MACb,OAAO,UAASzjD,CAAC,EAAE;QAClB,IAAI,CAACA,CAAC,IAAE,CAAC,IAAE,CAAC,EAAE;UAAE,OAAO,GAAG,IAAEA,CAAC,GAACA,CAAC,IAAE,CAACyjD,MAAM,GAAC,CAAC,IAAEzjD,CAAC,GAACyjD,MAAM,CAAC,CAAC;QAAE;QACxD,OAAO,GAAG,IAAE,CAACzjD,CAAC,IAAE,CAAC,IAAEA,CAAC,IAAE,CAACyjD,MAAM,GAAC,CAAC,IAAEzjD,CAAC,GAACyjD,MAAM,CAAC,GAAC,CAAC,CAAC;MAC9C,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEH,IAAI,CAAC2B,SAAS,GAAG3B,IAAI,CAAC0B,YAAY,CAAC,GAAG,CAAC;;IAEvC;AACF;AACA;AACA;AACA;AACA;IACE1B,IAAI,CAAC4B,MAAM,GAAG,UAASllD,CAAC,EAAE;MACzB,OAAO,EAAEjJ,IAAI,CAACgG,IAAI,CAAC,CAAC,GAACiD,CAAC,GAACA,CAAC,CAAC,GAAE,CAAC,CAAC;IAC9B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAAC6B,OAAO,GAAG,UAASnlD,CAAC,EAAE;MAC1B,OAAOjJ,IAAI,CAACgG,IAAI,CAAC,CAAC,GAAE,EAAEiD,CAAC,GAAEA,CAAC,CAAC;IAC5B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAAC8B,SAAS,GAAG,UAASplD,CAAC,EAAE;MAC5B,IAAI,CAACA,CAAC,IAAE,CAAC,IAAI,CAAC,EAAE;QAAE,OAAO,CAAC,GAAG,IAAEjJ,IAAI,CAACgG,IAAI,CAAC,CAAC,GAACiD,CAAC,GAACA,CAAC,CAAC,GAAC,CAAC,CAAC;MAAE;MACpD,OAAO,GAAG,IAAEjJ,IAAI,CAACgG,IAAI,CAAC,CAAC,GAAC,CAACiD,CAAC,IAAE,CAAC,IAAEA,CAAC,CAAC,GAAC,CAAC,CAAC;IACrC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAAC+B,QAAQ,GAAG,UAASrlD,CAAC,EAAE;MAC3B,OAAO,CAAC,GAACsjD,IAAI,CAACgC,SAAS,CAAC,CAAC,GAACtlD,CAAC,CAAC;IAC7B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAACgC,SAAS,GAAG,UAAStlD,CAAC,EAAE;MAC5B,IAAIA,CAAC,GAAG,CAAC,GAAC,IAAI,EAAE;QACf,OAAQ,MAAM,GAACA,CAAC,GAACA,CAAC;MACnB,CAAC,MAAM,IAAIA,CAAC,GAAG,CAAC,GAAC,IAAI,EAAE;QACtB,OAAQ,MAAM,IAAEA,CAAC,IAAE,GAAG,GAAC,IAAI,CAAC,GAACA,CAAC,GAAC,IAAI;MACpC,CAAC,MAAM,IAAIA,CAAC,GAAG,GAAG,GAAC,IAAI,EAAE;QACxB,OAAQ,MAAM,IAAEA,CAAC,IAAE,IAAI,GAAC,IAAI,CAAC,GAACA,CAAC,GAAC,MAAM;MACvC,CAAC,MAAM;QACN,OAAQ,MAAM,IAAEA,CAAC,IAAE,KAAK,GAAC,IAAI,CAAC,GAACA,CAAC,GAAE,QAAQ;MAC3C;IACD,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAACiC,WAAW,GAAG,UAASvlD,CAAC,EAAE;MAC9B,IAAIA,CAAC,GAAC,GAAG,EAAE;QAAE,OAAOsjD,IAAI,CAAC+B,QAAQ,CAAErlD,CAAC,GAAC,CAAC,CAAC,GAAG,EAAE;MAAE;MAC9C,OAAOsjD,IAAI,CAACgC,SAAS,CAACtlD,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAC,GAAG,GAAC,GAAG;IACrC,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEsjD,IAAI,CAACkC,YAAY,GAAG,UAASC,SAAS,EAACC,MAAM,EAAE;MAC9C,IAAIC,GAAG,GAAG5uD,IAAI,CAAC6D,EAAE,GAAC,CAAC;MACnB,OAAO,UAASoF,CAAC,EAAE;QAClB,IAAIA,CAAC,IAAE,CAAC,IAAIA,CAAC,IAAE,CAAC,EAAE;UAAE,OAAOA,CAAC;QAAE;QAC9B,IAAIiN,CAAC,GAAGy4C,MAAM,GAACC,GAAG,GAAC5uD,IAAI,CAAC6uD,IAAI,CAAC,CAAC,GAACH,SAAS,CAAC;QACzC,OAAO,EAAEA,SAAS,GAAC1uD,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAAC,EAAE,IAAErrB,CAAC,IAAE,CAAC,CAAC,CAAC,GAACjJ,IAAI,CAACmF,GAAG,CAAC,CAAC8D,CAAC,GAACiN,CAAC,IAAE04C,GAAG,GAACD,MAAM,CAAC,CAAC;MACrE,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEpC,IAAI,CAACuC,SAAS,GAAGvC,IAAI,CAACkC,YAAY,CAAC,CAAC,EAAC,GAAG,CAAC;;IAEzC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACElC,IAAI,CAACwC,aAAa,GAAG,UAASL,SAAS,EAACC,MAAM,EAAE;MAC/C,IAAIC,GAAG,GAAG5uD,IAAI,CAAC6D,EAAE,GAAC,CAAC;MACnB,OAAO,UAASoF,CAAC,EAAE;QAClB,IAAIA,CAAC,IAAE,CAAC,IAAIA,CAAC,IAAE,CAAC,EAAE;UAAE,OAAOA,CAAC;QAAE;QAC9B,IAAIiN,CAAC,GAAGy4C,MAAM,GAACC,GAAG,GAAG5uD,IAAI,CAAC6uD,IAAI,CAAC,CAAC,GAACH,SAAS,CAAC;QAC3C,OAAQA,SAAS,GAAC1uD,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAAC,CAAC,EAAE,GAACrrB,CAAC,CAAC,GAACjJ,IAAI,CAACmF,GAAG,CAAC,CAAC8D,CAAC,GAACiN,CAAC,IAAE04C,GAAG,GAACD,MAAO,CAAC,GAAC,CAAC;MAClE,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEpC,IAAI,CAACyC,UAAU,GAAGzC,IAAI,CAACwC,aAAa,CAAC,CAAC,EAAC,GAAG,CAAC;;IAE3C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACExC,IAAI,CAAC0C,eAAe,GAAG,UAASP,SAAS,EAACC,MAAM,EAAE;MACjD,IAAIC,GAAG,GAAG5uD,IAAI,CAAC6D,EAAE,GAAC,CAAC;MACnB,OAAO,UAASoF,CAAC,EAAE;QAClB,IAAIiN,CAAC,GAAGy4C,MAAM,GAACC,GAAG,GAAG5uD,IAAI,CAAC6uD,IAAI,CAAC,CAAC,GAACH,SAAS,CAAC;QAC3C,IAAI,CAACzlD,CAAC,IAAE,CAAC,IAAE,CAAC,EAAE;UAAE,OAAO,CAAC,GAAG,IAAEylD,SAAS,GAAC1uD,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAAC,EAAE,IAAErrB,CAAC,IAAE,CAAC,CAAC,CAAC,GAACjJ,IAAI,CAACmF,GAAG,CAAE,CAAC8D,CAAC,GAACiN,CAAC,IAAE04C,GAAG,GAACD,MAAO,CAAC,CAAC;QAAE;QAC5F,OAAOD,SAAS,GAAC1uD,IAAI,CAACs0B,GAAG,CAAC,CAAC,EAAC,CAAC,EAAE,IAAErrB,CAAC,IAAE,CAAC,CAAC,CAAC,GAACjJ,IAAI,CAACmF,GAAG,CAAC,CAAC8D,CAAC,GAACiN,CAAC,IAAE04C,GAAG,GAACD,MAAM,CAAC,GAAC,GAAG,GAAC,CAAC;MACzE,CAAC;IACF,CAAC;IACD;AACF;AACA;AACA;AACA;AACA;IACEpC,IAAI,CAAC2C,YAAY,GAAG3C,IAAI,CAAC0C,eAAe,CAAC,CAAC,EAAC,GAAG,GAAC,GAAG,CAAC;IAEnD72D,QAAQ,CAACm0D,IAAI,GAAGA,IAAI;EAErB,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEC,aAAW;IAEX;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS4C,iBAAiBA,CAAA,EAAG;MAC5B,MAAM,2CAA2C;IAClD;;IAED;IACC;AACF;AACA;AACA;AACA;IACEA,iBAAiB,CAAC5+B,QAAQ,GAAG,CAAC,CAAC,CAAC;;IAEhC;AACF;AACA;AACA;AACA;IACE4+B,iBAAiB,CAACC,QAAQ;IAC1B;AACF;AACA;AACA;AACA;IACED,iBAAiB,CAACE,QAAQ;IAC1B;AACF;AACA;AACA;AACA;IACEF,iBAAiB,CAACG,SAAS;IAC3B;AACF;AACA;AACA;AACA;IACEH,iBAAiB,CAACI,SAAS;;IAG5B;IACC;AACF;AACA;AACA;AACA;IACEJ,iBAAiB,CAAC5gC,OAAO,GAAG,YAAW;MACtCn2B,QAAQ,CAACo3B,KAAK,CAACgB,aAAa,CAAC2+B,iBAAiB,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC;MAChF,OAAO/2D,QAAQ,CAACo3B,KAAK,CAAC46B,MAAM;IAC7B,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE+E,iBAAiB,CAACzxD,IAAI,GAAG,UAASoyB,KAAK,EAAEW,IAAI,EAAE7xB,KAAK,EAAE;MACrD,IAAI/E,MAAM,GAAGi2B,KAAK,CAACj2B,MAAM;MACzB,IAAG,CAACA,MAAM,CAAC3B,cAAc,CAAC,GAAG,CAAC,EAAC;QAAE2B,MAAM,CAAC/B,CAAC,GAAG,CAAC;MAAE;MAC/C,IAAG,CAAC+B,MAAM,CAAC3B,cAAc,CAAC,GAAG,CAAC,EAAC;QAAE2B,MAAM,CAACkJ,CAAC,GAAG,CAAC;MAAE;MAC/C,IAAG,CAAClJ,MAAM,CAAC3B,cAAc,CAAC,UAAU,CAAC,EAAC;QAAE2B,MAAM,CAAC+K,QAAQ,GAAG,CAAC;MAAE;MAE7D,IAAG6rB,IAAI,IAAE,UAAU,EAAC;QAAEX,KAAK,CAAC0/B,UAAU,GAAG,IAAI;MAAE;MAC/C,OAAO/+B,IAAI,IAAE,OAAO,GAAC,IAAI,GAAC7xB,KAAK;IAChC,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEuwD,iBAAiB,CAACz+B,IAAI,GAAG,UAASZ,KAAK,EAAEW,IAAI,EAAEg/B,UAAU,EAAEC,QAAQ,EAAE1D,WAAW,EAAE;MACjF;MACA,IAAGv7B,IAAI,IAAI,UAAU,EAAC;QACrBX,KAAK,CAAC6/B,YAAY,GAAGF,UAAU;QAC/B3/B,KAAK,CAAC8/B,YAAY,GAAGF,QAAQ;QAC7BP,iBAAiB,CAACU,WAAW,CAAC//B,KAAK,EAAEk8B,WAAW,CAAC;MAClD;MACA,IAAGv7B,IAAI,IAAI,OAAO,EAAC;QAAE,OAAOi/B,QAAQ;MAAE;;MAEtC;MACA,IAAII,IAAI;QAAE1zD,IAAI,GAAGszD,QAAQ;MACzB,IAAG,CAACtzD,IAAI,CAAClE,cAAc,CAAC,MAAM,CAAC,EAAC;QAAEkE,IAAI,CAACoT,IAAI,GAAG,EAAE;MAAE;MAClD,IAAIA,IAAI,GAAGpT,IAAI,CAACoT,IAAI;MACpB,IAAG,CAACpT,IAAI,CAAClE,cAAc,CAAC,KAAK,CAAC,EAAC;QAAEkE,IAAI,CAAC0sB,GAAG,GAAG,CAAC;MAAE;MAC/C,IAAG,CAAC1sB,IAAI,CAAClE,cAAc,CAAC,OAAO,CAAC,EAAC;QAChCkE,IAAI,CAACutB,KAAK,GAAI8lC,UAAU,IAAEA,UAAU,CAACv3D,cAAc,CAAC,KAAK,CAAC,IAAEu3D,UAAU,CAACjgD,IAAI,KAAGA,IAAI,GAAEigD,UAAU,CAAC3mC,GAAG,GAAC,CAAC;MACrG;;MAEA;MACA,IAAG1sB,IAAI,CAAClE,cAAc,CAAC,WAAW,CAAC,IAAIkE,IAAI,CAAC2zD,OAAO,EAAC;QAAE,OAAOL,QAAQ;MAAE;MACvE,IAAIn2D,CAAC,GAAGiW,IAAI,CAAChW,MAAM;MACnB,IAAIw2D,QAAQ,GAAG,EAAE,CAAC,CAAE;MACpB,IAAGz2D,CAAC,IAAI,CAAC,IAAI,CAACA,CAAC,GAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;QAAE;QAC7B6C,IAAI,CAAC6zD,SAAS,GAAG,EAAE;QACnB7zD,IAAI,CAAC2zD,OAAO,GAAG,CAAC;QAChB,KAAI,IAAIz2D,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,IAAE,CAAC,EAAC;UACtB,IAAIy+B,EAAE,GAAGvoB,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;YAAE2+B,EAAE,GAAGzoB,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;UAClC,IAAI42D,EAAE,GAAG1gD,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;YAAE62D,EAAE,GAAG3gD,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;UAClC,IAAI82D,EAAE,GAAG5gD,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;YAAE+2D,EAAE,GAAG7gD,IAAI,CAAClW,CAAC,GAAC,CAAC,CAAC;UAClC,IAAIg3D,IAAI,GAAGv4B,EAAE;YAAEw4B,IAAI,GAAGt4B,EAAE;UACxB,IAAIu4B,KAAK;YAAEC,KAAK;YAAE5xB,KAAK,GAAG,CAAC;UAC3B,IAAI6xB,QAAQ,GAAG,EAAE;UACjB,KAAI,IAAItlC,CAAC,GAAC,CAAC,EAAEA,CAAC,IAAE4kC,QAAQ,EAAE5kC,CAAC,EAAE,EAAC;YAC7B,IAAIniB,CAAC,GAAGmiB,CAAC,GAAC4kC,QAAQ;YAClB,IAAIW,GAAG,GAAG,CAAC,GAAG1nD,CAAC;YACfunD,KAAK,GAAGG,GAAG,GAACA,GAAG,GAAG54B,EAAE,GAAG,CAAC,GAAG44B,GAAG,GAAG1nD,CAAC,GAAGinD,EAAE,GAAGjnD,CAAC,GAACA,CAAC,GAAGmnD,EAAE;YAClDK,KAAK,GAAGE,GAAG,GAACA,GAAG,GAAG14B,EAAE,GAAG,CAAC,GAAG04B,GAAG,GAAG1nD,CAAC,GAAGknD,EAAE,GAAGlnD,CAAC,GAACA,CAAC,GAAGonD,EAAE;YAClDxxB,KAAK,IAAI6xB,QAAQ,CAACA,QAAQ,CAACz0D,IAAI,CAAC+D,IAAI,CAACgG,IAAI,CAAC,CAAC8pD,IAAI,GAACU,KAAK,GAACF,IAAI,IAAER,IAAI,GAAG,CAACA,IAAI,GAACW,KAAK,GAACF,IAAI,IAAET,IAAI,CAAC,CAAC,GAAC,CAAC,CAAC;YAC9FQ,IAAI,GAAGE,KAAK;YACZD,IAAI,GAAGE,KAAK;UACb;UACAr0D,IAAI,CAAC6zD,SAAS,CAACh0D,IAAI,CAAC4iC,KAAK,CAAC;UAC1BziC,IAAI,CAAC6zD,SAAS,CAACh0D,IAAI,CAACy0D,QAAQ,CAAC;UAC7Bt0D,IAAI,CAAC2zD,OAAO,IAAIlxB,KAAK;QACtB;MACD,CAAC,MAAM;QACN,MAAM,+DAA+D;MACtE;;MAEA;MACAixB,IAAI,GAAG1zD,IAAI,CAACw0D,MAAM;MAClBx0D,IAAI,CAACw0D,MAAM,GAAG,IAAI;MAClB,IAAIl4D,CAAC,GAAG,CAAC,CAAC;MACVy2D,iBAAiB,CAAC0B,IAAI,CAACz0D,IAAI,EAAEA,IAAI,CAACutB,KAAK,EAAEjxB,CAAC,CAAC;MAC3Co3B,KAAK,CAACghC,UAAU,GAAGxxB,MAAM,CAAC5mC,CAAC,CAACkM,QAAQ,CAACmsD,OAAO,CAAC,CAAC,CAAC,CAAC;MAChD5B,iBAAiB,CAAC0B,IAAI,CAACz0D,IAAI,EAAEA,IAAI,CAAC0sB,GAAG,EAAEpwB,CAAC,CAAC;MACzCo3B,KAAK,CAACkhC,UAAU,GAAG1xB,MAAM,CAAC5mC,CAAC,CAACkM,QAAQ,CAACmsD,OAAO,CAAC,CAAC,CAAC,CAAC;MAChD30D,IAAI,CAACw0D,MAAM,GAAG,KAAK,CAAC,CAAC;MACrBzB,iBAAiB,CAAC0B,IAAI,CAACz0D,IAAI,EAAEA,IAAI,CAAC0sB,GAAG,EAAEkjC,WAAW,CAAC;MACnD5vD,IAAI,CAACw0D,MAAM,GAAGd,IAAI;;MAElB;MACA,IAAG,CAAC1zD,IAAI,CAACw0D,MAAM,EAAC;QAAE,OAAOlB,QAAQ;MAAE;MACnC5/B,KAAK,CAACmhC,WAAW,GAAG70D,IAAI;MACxB+yD,iBAAiB,CAACU,WAAW,CAAC//B,KAAK,EAAEk8B,WAAW,CAAC;MACjD,OAAO0D,QAAQ;IAChB,CAAC;;IAED;AACF;AACA;AACA;AACA;IACEP,iBAAiB,CAACU,WAAW,GAAG,UAAS//B,KAAK,EAAEk8B,WAAW,EAAC;MAE3D;MACA,IAAGl8B,KAAK,CAAC6/B,YAAY,KAAKljD,SAAS,IAAIqjB,KAAK,CAAC8/B,YAAY,KAAKnjD,SAAS,EAAC;QACvE,IAAGqjB,KAAK,CAAC0/B,UAAU,EAAC;UAAE;QAAQ;QAC9B,IAAG1/B,KAAK,CAAC05B,cAAc,CAAC5kD,QAAQ,KAAK6H,SAAS,EAAC;UAC9CqjB,KAAK,CAAC6/B,YAAY,GAAG7/B,KAAK,CAAC8/B,YAAY,GAAG9/B,KAAK,CAAC05B,cAAc,CAAC5kD,QAAQ;QACxE,CAAC,MAAM;UACNkrB,KAAK,CAAC6/B,YAAY,GAAG7/B,KAAK,CAAC8/B,YAAY,GAAG5D,WAAW,CAACpnD,QAAQ,GAAGkrB,KAAK,CAACj2B,MAAM,CAAC+K,QAAQ,IAAI,CAAC;QAC5F;MACD;MACA,IAAGkrB,KAAK,CAACmhC,WAAW,KAAKxkD,SAAS,EAAC;QAAE;MAAQ;;MAE7C;MACA,IAAIrQ,IAAI,GAAG0zB,KAAK,CAACmhC,WAAW;MAC5B,IAAIC,UAAU,GAAGphC,KAAK,CAAC8/B,YAAY,GAAG9/B,KAAK,CAAC6/B,YAAY;MACxD,IAAIwB,QAAQ,GAAGrhC,KAAK,CAACkhC,UAAU,GAAGlhC,KAAK,CAACghC,UAAU;MAClD,IAAIM,GAAG,GAAGF,UAAU,GAAGC,QAAQ;MAE/B,IAAG/0D,IAAI,CAACw0D,MAAM,IAAI,MAAM,EAAC;QACxB,IAAGQ,GAAG,GAAG,GAAG,EAAC;UAAIA,GAAG,IAAI,GAAG;QAAE,CAAC,MACzB,IAAGA,GAAG,GAAG,CAAC,GAAG,EAAC;UAAEA,GAAG,IAAI,GAAG;QAAE;MAElC,CAAC,MAAM,IAAGh1D,IAAI,CAACw0D,MAAM,IAAI,IAAI,EAAC;QAC7B,OAAMQ,GAAG,GAAG,CAAC,EAAC;UAAEA,GAAG,IAAI,GAAG;QAAE;QAC5B,IAAGA,GAAG,IAAI,CAAC,IAAIF,UAAU,GAAG,CAAC,IAAIA,UAAU,IAAI,GAAG,EAAC;UAAEE,GAAG,IAAI,GAAG;QAAE;MAElE,CAAC,MAAM,IAAGh1D,IAAI,CAACw0D,MAAM,IAAI,KAAK,EAAC;QAC9BQ,GAAG,GAAGF,UAAU,IAAKC,QAAQ,GAAG,GAAG,GAAG,GAAG,GAACA,QAAQ,GAAGA,QAAS,CAAC,CAAC,CAAC;QACjE,OAAMC,GAAG,GAAG,CAAC,EAAC;UAAEA,GAAG,IAAI,GAAG;QAAE;QAC5B,IAAGA,GAAG,IAAI,CAAC,IAAIF,UAAU,GAAG,CAAC,IAAIA,UAAU,IAAI,CAAC,GAAG,EAAC;UAAEE,GAAG,IAAI,GAAG;QAAE;MACnE;MAEAh1D,IAAI,CAACi1D,QAAQ,GAAGD,GAAG;MACnBh1D,IAAI,CAACk1D,OAAO,GAAGxhC,KAAK,CAAC6/B,YAAY,GAAG7/B,KAAK,CAACghC,UAAU;;MAEpD;MACAhhC,KAAK,CAAC6/B,YAAY,GAAG7/B,KAAK,CAAC8/B,YAAY,GAAG9/B,KAAK,CAACmhC,WAAW,GAAGnhC,KAAK,CAAC0/B,UAAU,GAAG/iD,SAAS;IAC3F,CAAC;;IAED;AACF;AACA;AACA;AACA;IACE0iD,iBAAiB,CAACr/B,KAAK,GAAG,UAASA,KAAK,EAAEW,IAAI,EAAE7xB,KAAK,EAAE+xB,WAAW,EAAEC,SAAS,EAAEC,KAAK,EAAEC,IAAI,EAAEhI,GAAG,EAAE;MAChG,IAAI1sB,IAAI,GAAGw0B,SAAS,CAAC2gC,KAAK;MAC1B,IAAGn1D,IAAI,IAAIqQ,SAAS,IAAIrQ,IAAI,KAAKu0B,WAAW,CAAC4gC,KAAK,EAAC;QAAE,OAAO3yD,KAAK;MAAE;MACnE,IAAGxC,IAAI,CAACo1D,SAAS,IAAI3gC,KAAK,EAAC;QAC1B;QACA,IAAI5nB,CAAC,GAAI,CAAC7M,IAAI,CAAC0sB,GAAG,GAAC1sB,IAAI,CAACutB,KAAK,KAAGmH,IAAI,GAAC10B,IAAI,CAAC0sB,GAAG,GAAC+H,KAAK,CAAC,GAACz0B,IAAI,CAACutB,KAAM;QAChEwlC,iBAAiB,CAAC0B,IAAI,CAACz0D,IAAI,EAAE6M,CAAC,EAAE6mB,KAAK,CAACj2B,MAAM,CAAC;QAC7C,QAAOuC,IAAI,CAACw0D,MAAM;UACjB,KAAK,IAAI,CAAC,CAAE;UACZ,KAAK,KAAK;UACV,KAAK,MAAM;YAAE9gC,KAAK,CAACj2B,MAAM,CAAC+K,QAAQ,IAAIxI,IAAI,CAACk1D,OAAO,GAAGl1D,IAAI,CAACi1D,QAAQ,GAACxgC,KAAK;YAAE;UAC1E,KAAK,OAAO,CAAC,CAAC;UACd;YAASf,KAAK,CAACj2B,MAAM,CAAC+K,QAAQ,IAAIxI,IAAI,CAACk1D,OAAO;YAAE;QACjD;QACAl1D,IAAI,CAACo1D,SAAS,GAAG3gC,KAAK;MACvB;MACA,IAAGJ,IAAI,IAAI,UAAU,KAAM,CAACr0B,IAAI,CAACw0D,MAAM,IAAKx0D,IAAI,CAACw0D,MAAM,IAAI,OAAO,CAAC,EAAC;QAAE,OAAOhyD,KAAK;MAAE;MACpF,OAAOkxB,KAAK,CAACj2B,MAAM,CAAC42B,IAAI,CAAC;IAC1B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE0+B,iBAAiB,CAAC0B,IAAI,GAAG,UAASz0D,IAAI,EAAEy0B,KAAK,EAAEh3B,MAAM,EAAE;MACtD,IAAGuC,IAAI,CAAC6zD,SAAS,IAAIxjD,SAAS,EAAC;QAAE,MAAM,gEAAgE;MAAG;MAC1G,IAAG5S,MAAM,IAAI4S,SAAS,EAAC;QAAE5S,MAAM,GAAG;UAAC/B,CAAC,EAAC,CAAC;UAAEiL,CAAC,EAAC,CAAC;UAAE6B,QAAQ,EAAC;QAAC,CAAC;MAAE;MAC1D,IAAI6sD,GAAG,GAAGr1D,IAAI,CAAC6zD,SAAS;MACxB,IAAIzgD,IAAI,GAAGpT,IAAI,CAACoT,IAAI;;MAEpB;MACA,IAAI2f,GAAG,GAAG/yB,IAAI,CAAC2zD,OAAO,GAAGl/B,KAAK;MAC9B,IAAI6gC,GAAG,GAAGD,GAAG,CAACj4D,MAAM,GAAG,CAAC;MACxB,IAAIN,CAAC,GAAG,CAAC;MACT,OAAMi2B,GAAG,GAAGsiC,GAAG,CAACv4D,CAAC,CAAC,IAAIA,CAAC,GAAGw4D,GAAG,EAAC;QAC7BviC,GAAG,IAAIsiC,GAAG,CAACv4D,CAAC,CAAC;QACbA,CAAC,IAAE,CAAC;MACL;;MAEA;MACA,IAAIw3D,QAAQ,GAAGe,GAAG,CAACv4D,CAAC,GAAC,CAAC,CAAC;MACvB,IAAII,CAAC,GAAG,CAAC;MACTo4D,GAAG,GAAGhB,QAAQ,CAACl3D,MAAM,GAAC,CAAC;MACvB,OAAM21B,GAAG,GAAGuhC,QAAQ,CAACp3D,CAAC,CAAC,IAAIA,CAAC,GAAGo4D,GAAG,EAAC;QAClCviC,GAAG,IAAIuhC,QAAQ,CAACp3D,CAAC,CAAC;QAClBA,CAAC,EAAE;MACJ;MACA,IAAI2P,CAAC,GAAI3P,CAAC,GAAC,EAAEo4D,GAAG,GAAGviC,GAAG,IAAEuiC,GAAG,GAAChB,QAAQ,CAACp3D,CAAC,CAAC,CAAE;;MAEzC;MACAJ,CAAC,GAAIA,CAAC,GAAC,CAAC,GAAE,CAAC;MACX,IAAIy3D,GAAG,GAAG,CAAC,GAAG1nD,CAAC;MACfpP,MAAM,CAAC/B,CAAC,GAAG64D,GAAG,GAACA,GAAG,GAAGnhD,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAAG,CAAC,GAAGy3D,GAAG,GAAG1nD,CAAC,GAAGuG,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAAG+P,CAAC,GAACA,CAAC,GAAGuG,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC;MAC1EW,MAAM,CAACkJ,CAAC,GAAG4tD,GAAG,GAACA,GAAG,GAAGnhD,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAAG,CAAC,GAAGy3D,GAAG,GAAG1nD,CAAC,GAAGuG,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAAG+P,CAAC,GAACA,CAAC,GAAGuG,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC;;MAE1E;MACA,IAAGkD,IAAI,CAACw0D,MAAM,EAAC;QACd/2D,MAAM,CAAC+K,QAAQ,GAAG,UAAU,GAAG5E,IAAI,CAACiG,KAAK,CACxC,CAACuJ,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAACsW,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,IAAEy3D,GAAG,GAAG,CAACnhD,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAACsW,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,IAAE+P,CAAC,EACnD,CAACuG,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAACsW,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,IAAEy3D,GAAG,GAAG,CAACnhD,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,GAACsW,IAAI,CAACtW,CAAC,GAAC,CAAC,CAAC,IAAE+P,CAAC,CAAC;MACtD;MAEA,OAAOpP,MAAM;IACd,CAAC;IAEDzB,QAAQ,CAAC+2D,iBAAiB,GAAGA,iBAAiB;EAE/C,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;;EAEA,CAAC,YAAW;IAEX;AACF;AACA;AACA;AACA;IACE,IAAIj5C,CAAC,GAAG9d,QAAQ,CAACu5D,OAAO,GAAGv5D,QAAQ,CAACu5D,OAAO,IAAI,CAAC,CAAC;;IAEjD;AACF;AACA;AACA;AACA;AACA;IACEz7C,CAAC,CAACgoB,OAAO,GAAG,YAAY,OAAO,CAAC,CAAC;;IAEjC;AACF;AACA;AACA;AACA;AACA;IACEhoB,CAAC,CAACioB,SAAS,GAAG,SAAS,+BAA+B,CAAC,CAAC;EAEzD,CAAC,EAAE,CAAC;EACJ;IAAE7lC,MAAM,CAACD,OAAO,GAAGb,cAAc,CAACY,QAAQ;EAAE;AAC7C,CAAC,EAAEA,QAAQ,EAAEA,QAAQ,CAACC,OAAO,CAAC;AAE9B,IAAIu5D,eAAe,GAAGx5D,QAAQ,CAACC,OAAO;;AAEtC;AACAu5D,eAAe,CAAC9vC,KAAK,CAAC7pB,SAAS,CAAC45D,WAAW,GAAG,UAAS/5D,CAAC,EAAEiL,CAAC,EAAE;EAC3D,IAAI+uD,IAAI,GAAG,CAACh6D,CAAC,GAAG,IAAI,CAACA,CAAC,IAAI,IAAI,CAAC4M,MAAM;EACrC,IAAIqtD,IAAI,GAAG,CAAC,IAAI,CAAChvD,CAAC,GAAGA,CAAC,IAAI,IAAI,CAAC4B,MAAM;EACrC,OAAO,IAAIpN,MAAM,CAACy6D,OAAO,CAAC;IACxBl6D,CAAC,EAAGg6D,IAAI;IACR/uD,CAAC,EAAGgvD;EACN,CAAC,CAAC;AACJ,CAAC;;AAED;AACAH,eAAe,CAAC9vC,KAAK,CAAC7pB,SAAS,CAACg6D,WAAW,GAAG,UAAS9iC,GAAG,EAAE;EAC1D,IAAIr3B,CAAC,GAAGq3B,GAAG,CAACr3B,CAAC,GAAG,IAAI,CAAC4M,MAAM,GAAG,IAAI,CAAC5M,CAAC;EACpC,IAAIiL,CAAC,GAAGosB,GAAG,CAACpsB,CAAC,GAAG,IAAI,CAAC4B,MAAM,GAAG,IAAI,CAAC5B,CAAC;EACpC,OAAO;IACLjL,CAAC,EAAGA,CAAC;IACLiL,CAAC,EAAGA;EACN,CAAC;AACH,CAAC;;AAED;AACA6uD,eAAe,CAAC9vC,KAAK,CAAC7pB,SAAS,CAACi6D,0BAA0B,GAAG,UAASC,WAAW,EAAE;EACjF;EACA;EACA,IAAIC,EAAE,GAAGD,WAAW,CAACphD,CAAC;EACtB,IAAIshD,EAAE,GAAGF,WAAW,CAACr6D,CAAC;EACtB,IAAIw6D,EAAE,GAAGH,WAAW,CAACpvD,CAAC;EACtB,IAAIwvD,EAAE,GAAGJ,WAAW,CAACK,CAAC;EACtB;EACA,OAAO,CAACxyD,IAAI,CAACiG,KAAK,CAAC,CAAC,IAAImsD,EAAE,GAAGG,EAAE,GAAGF,EAAE,GAAGC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,IAAIA,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAC,CAAC,GAAG,KAAK,GAAGvyD,IAAI,CAAC6D,EAAE;AAC5F,CAAC;;AAED;AACA;AACA;AACA;;AAEA,IAAI4uD,QAAQ,GAAG,aAAc,UAAUh6D,UAAU,EAAE;EACjD,SAASg6D,QAAQA,CAACC,OAAO,EAAE;IACzBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIh0B,OAAO,GAAGg0B,OAAO,CAACh0B,OAAO;IAC7B,IAAI1yB,KAAK,GAAG0mD,OAAO,CAAC1mD,KAAK;;IAEzB;IACAvT,UAAU,CAACN,IAAI,CAAC,IAAI,EAAE6T,KAAK,CAAC;;IAE5B;IACA,IAAI,CAAC2mD,IAAI,GAAG,IAAIp7D,MAAM,CAACq7D,IAAI,CAAC;MAC1BjlC,QAAQ,EAAG+Q,OAAO,CAAC4S,MAAM,CAAC3jB,QAAQ;MAClCwkC,WAAW,EAAGzzB,OAAO,CAAC4S,MAAM,CAAC6gB;IAC/B,CAAC,CAAC;;IAEF;IACA,IAAI,CAACvrD,KAAK,GAAG83B,OAAO,CAAC93B,KAAK;IAC1B,IAAI,CAACC,MAAM,GAAG63B,OAAO,CAAC73B,MAAM;;IAE5B;IACA,IAAI,CAAC9D,CAAC,GAAG,CAAC,IAAI,CAAC8D,MAAM,GAAG63B,OAAO,CAACm0B,UAAU;;IAE1C;IACA,IAAI,CAACnuD,MAAM,GAAGg6B,OAAO,CAACm0B,UAAU;IAChC,IAAI,CAACluD,MAAM,GAAG+5B,OAAO,CAACm0B,UAAU;IAChC,IAAI,CAACjsD,KAAK,IAAI,IAAI,CAAClC,MAAM;IACzB,IAAI,CAACmC,MAAM,IAAI,IAAI,CAAClC,MAAM;;IAE1B;IACA,IAAI,CAAC7M,CAAC,IAAI,IAAI,CAAC66D,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC;IAC9B,IAAI,CAACiL,CAAC,IAAI,IAAI,CAAC4vD,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC;EAChC;EAEA,IAAKtK,UAAU,EAAGg6D,QAAQ,CAACx5D,SAAS,GAAGR,UAAU;EACjDg6D,QAAQ,CAACx6D,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EACxEw6D,QAAQ,CAACx6D,SAAS,CAACU,WAAW,GAAG85D,QAAQ;EAEzC,OAAOA,QAAQ;AACjB,CAAC,CAACb,eAAe,CAACnqC,MAAM,CAAE;AAE1B,IAAIqrC,aAAa,GAAG;EAACz6D,OAAO,EAAE,CAAC;AAAC,CAAC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACAy6D,aAAa,CAACz6D,OAAO;AAEpB,WAAUC,MAAM,EAAED,OAAO,EAAE;EAC5B,CAAC,UAAS06D,WAAW,EAAE;IACpB,IAAI76D,cAAc,GAAEF,MAAM,CAACE,cAAc;IACzC,IAAI6T,OAAO,GAAGD,KAAK,CAACC,OAAO,GAAGD,KAAK,CAACC,OAAO,GAAG,SAASinD,QAAQA,CAAC1mD,GAAG,EAAE;MACnE,OAAOtU,MAAM,CAACC,SAAS,CAAC8C,QAAQ,CAAC5C,IAAI,CAACmU,GAAG,CAAC,KAAK,gBAAgB;IACjE,CAAC;IACD,IAAI2mD,mBAAmB,GAAG,EAAE;IAC5B,IAAIC,iBAAiB,GAAE,OAAOC,OAAO,IAAE,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,IAAE,UAAU;IACtF,IAAIC,gBAAgB,GAAE,OAAOC,MAAM,KAAG,UAAU;IAChD,IAAIC,gBAAgB,GAAE,OAAOC,OAAO,KAAK,QAAQ;IACjD,IAAIC,qBAAqB,GAAE,OAAOC,YAAY,KAAK,UAAU;IAC7D,IAAIC,aAAa,GAAEF,qBAAqB,GAAGC,YAAY,GAAGvyD,UAAU;IACpE,IAAIyyD,OAAO,GAAEP,gBAAgB,GAAGE,gBAAgB,IAAI,OAAOC,OAAO,CAACI,OAAO,KAAG,UAAU,GAAEJ,OAAO,CAACI,OAAO,GAAG,UAAStnD,GAAG,EAAC;MACtH,IAAItQ,GAAG,GAAEhE,MAAM,CAAC67D,mBAAmB,CAACvnD,GAAG,CAAC;MACxCtQ,GAAG,CAACC,IAAI,CAAC0B,KAAK,CAAC3B,GAAG,EAAEhE,MAAM,CAAC87D,qBAAqB,CAACxnD,GAAG,CAAC,CAAC;MACtD,OAAOtQ,GAAG;IACZ,CAAC,GAAIhE,MAAM,CAAC+7D,IAAI;IAEhB,SAASr2D,IAAIA,CAAA,EAAG;MACd,IAAI,CAACs2D,OAAO,GAAG,CAAC,CAAC;MACjB,IAAI,IAAI,CAACC,KAAK,EAAE;QACdC,SAAS,CAAC/7D,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC87D,KAAK,CAAC;MAClC;IACF;IAEA,SAASC,SAASA,CAACC,IAAI,EAAE;MACvB,IAAIA,IAAI,EAAE;QACR,IAAI,CAACF,KAAK,GAAGE,IAAI;QAEjBA,IAAI,CAACC,SAAS,KAAK,IAAI,CAACA,SAAS,GAAGD,IAAI,CAACC,SAAS,CAAC;QAEnD,IAAGD,IAAI,CAACE,YAAY,KAAGtB,WAAW,EAAC;UAC/B,IAAI,CAACuB,aAAa,GAAEH,IAAI,CAACE,YAAY;QACzC;QAEAF,IAAI,CAACI,QAAQ,KAAK,IAAI,CAACA,QAAQ,GAAGJ,IAAI,CAACI,QAAQ,CAAC;QAChDJ,IAAI,CAACK,WAAW,KAAK,IAAI,CAACC,YAAY,GAAGN,IAAI,CAACK,WAAW,CAAC;QAC1DL,IAAI,CAACO,cAAc,KAAK,IAAI,CAACC,eAAe,GAAGR,IAAI,CAACO,cAAc,CAAC;QACnEP,IAAI,CAACS,iBAAiB,KAAK,IAAI,CAACA,iBAAiB,GAAGT,IAAI,CAACS,iBAAiB,CAAC;QAC3ET,IAAI,CAACU,YAAY,KAAK,IAAI,CAACA,YAAY,GAAGV,IAAI,CAACU,YAAY,CAAC;QAE5D,IAAI,IAAI,CAACN,QAAQ,EAAE;UACjB,IAAI,CAACO,YAAY,GAAG,CAAC,CAAC;QACxB;MACF;IACF;IAEA,SAASC,qBAAqBA,CAAC5oD,KAAK,EAAE6oD,SAAS,EAAE;MAC/C,IAAIC,QAAQ,GAAG,+CAA+C,GAC1D,iBAAiB,GAAG9oD,KAAK,GAAG,oBAAoB,GAChD,kDAAkD;MAEtD,IAAG,IAAI,CAACyoD,iBAAiB,EAAC;QACxBK,QAAQ,IAAI,eAAe,GAAGD,SAAS,GAAG,GAAG;MAC/C;MAEA,IAAG,OAAO7B,OAAO,KAAK,WAAW,IAAIA,OAAO,CAAC+B,WAAW,EAAC;QACvD,IAAIz4D,CAAC,GAAG,IAAImqC,KAAK,CAACquB,QAAQ,CAAC;QAC3Bx4D,CAAC,CAACqO,IAAI,GAAG,6BAA6B;QACtCrO,CAAC,CAAC04D,OAAO,GAAG,IAAI;QAChB14D,CAAC,CAAC0P,KAAK,GAAGA,KAAK;QACfgnD,OAAO,CAAC+B,WAAW,CAACz4D,CAAC,CAAC;MACxB,CAAC,MAAM;QACLwC,OAAO,CAAC4wC,KAAK,CAAColB,QAAQ,CAAC;QAEvB,IAAIh2D,OAAO,CAACm2D,KAAK,EAAC;UAChBn2D,OAAO,CAACm2D,KAAK,CAAC,CAAC;QACjB;MACF;IACF;IAEA,IAAIt6B,OAAO,GAAG,SAAAA,CAAUz3B,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;MAC/B,IAAImc,WAAW,GAAG9hB,SAAS;MAE3B,IAAI1E,CAAC,GAAG0E,SAAS,CAACpE,MAAM;MACxB,QAAQN,CAAC;QACP,KAAK,CAAC;UACJ,OAAO,EAAE;QACX,KAAK,CAAC;UACJ,OAAO,CAACmK,CAAC,CAAC;QACZ,KAAK,CAAC;UACJ,OAAO,CAACA,CAAC,EAAEC,CAAC,CAAC;QACf,KAAK,CAAC;UACJ,OAAO,CAACD,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;QAClB;UACE,IAAIvH,GAAG,GAAG,IAAI8P,KAAK,CAAC5S,CAAC,CAAC;UACtB,OAAOA,CAAC,EAAE,EAAE;YACV8C,GAAG,CAAC9C,CAAC,CAAC,GAAGwmB,WAAW,CAACxmB,CAAC,CAAC;UACzB;UACA,OAAO8C,GAAG;MACd;IACF,CAAC;IAED,SAASq5D,QAAQA,CAACtB,IAAI,EAAE3tB,MAAM,EAAE;MAC9B,IAAI95B,GAAG,GAAG,CAAC,CAAC;MACZ,IAAI+wC,GAAG;MACP,IAAIiY,GAAG,GAAGvB,IAAI,CAACv6D,MAAM;MACrB,IAAI+7D,WAAW,GAAGnvB,MAAM,GAAGxnC,KAAK,CAACpF,MAAM,GAAG,CAAC;MAC3C,KAAK,IAAIF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGg8D,GAAG,EAAEh8D,CAAC,EAAE,EAAE;QAC5B+jD,GAAG,GAAG0W,IAAI,CAACz6D,CAAC,CAAC;QACbgT,GAAG,CAAC+wC,GAAG,CAAC,GAAG/jD,CAAC,GAAGi8D,WAAW,GAAGnvB,MAAM,CAAC9sC,CAAC,CAAC,GAAGy5D,WAAW;MACtD;MACA,OAAOzmD,GAAG;IACZ;IAEA,SAASkpD,cAAcA,CAACL,OAAO,EAAEt7D,MAAM,EAAE64D,OAAO,EAAE;MAChD,IAAI,CAAC+C,QAAQ,GAAGN,OAAO;MACvB,IAAI,CAACplC,OAAO,GAAGl2B,MAAM;MACrB,IAAI,CAACoB,UAAU,GAAG,CAAC,CAAC;MACpB,IAAI,CAACy6D,eAAe,GAAG,CAAC;MAExB,IAAIr6D,EAAE,EAAEE,GAAG;MAEX,IAAIm3D,OAAO,CAACr3D,EAAE,IAAIq3D,OAAO,CAACn3D,GAAG,EAAE;QAC7BF,EAAE,GAAGq3D,OAAO,CAACr3D,EAAE;QACfE,GAAG,GAAGm3D,OAAO,CAACn3D,GAAG;MACnB;MAEA,IAAI1B,MAAM,CAACuB,gBAAgB,EAAE;QAC3BC,EAAE,GAAGxB,MAAM,CAACuB,gBAAgB;QAC5BG,GAAG,GAAG1B,MAAM,CAACyB,mBAAmB;MAClC,CAAC,MAAM,IAAIzB,MAAM,CAAC87D,WAAW,EAAE;QAC7Bt6D,EAAE,GAAGxB,MAAM,CAAC87D,WAAW;QACvBp6D,GAAG,GAAG1B,MAAM,CAAC66D,cAAc;MAC7B,CAAC,MAAM,IAAI76D,MAAM,CAACwB,EAAE,EAAE;QACpBA,EAAE,GAAGxB,MAAM,CAACwB,EAAE;QACdE,GAAG,GAAG1B,MAAM,CAAC0B,GAAG;MAClB;MAEA,IAAI,CAACF,EAAE,IAAI,CAACE,GAAG,EAAE;QACf,MAAMqrC,KAAK,CAAC,+CAA+C,CAAC;MAC9D;MAEA,IAAI,OAAOvrC,EAAE,KAAK,UAAU,EAAE;QAC5B,MAAMmkC,SAAS,CAAC,8BAA8B,CAAC;MACjD;MAEA,IAAI,OAAOjkC,GAAG,KAAK,UAAU,EAAE;QAC7B,MAAMikC,SAAS,CAAC,+BAA+B,CAAC;MAClD;MAEA,IAAI,CAACo2B,GAAG,GAAGv6D,EAAE;MACb,IAAI,CAACg1B,IAAI,GAAG90B,GAAG;MAEf,IAAIs6D,UAAU,GAAEV,OAAO,CAACU,UAAU;MAClC,IAAGA,UAAU,EAAC;QACZA,UAAU,CAAC55D,IAAI,CAAC,IAAI,CAAC;MACvB,CAAC,MAAK;QACJk5D,OAAO,CAACU,UAAU,GAAE,CAAC,IAAI,CAAC;MAC5B;IACF;IAEA79D,MAAM,CAAC89D,MAAM,CAACN,cAAc,CAACv9D,SAAS,EAAE;MACtC89D,SAAS,EAAE,SAAAA,CAASz0D,KAAK,EAAE00D,UAAU,EAAEC,OAAO,EAAC;QAC7C,IAAIC,QAAQ,GAAE,IAAI;QAClB,IAAIr8D,MAAM,GAAE,IAAI,CAACk2B,OAAO;QACxB,IAAIolC,OAAO,GAAE,IAAI,CAACM,QAAQ;QAC1B,IAAI15D,SAAS,GAAE,IAAI,CAACd,UAAU;QAC9B,IAAIk7D,OAAO,GAAE,SAAAA,CAAA,EAAU;UACrB,IAAI1hB,IAAI,GAAE3Z,OAAO,CAACn9B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;UACxC,IAAIpB,QAAQ,GAAE;YACZJ,IAAI,EAAEq4C,IAAI;YACV3pC,IAAI,EAAEkrD,UAAU;YAChBh0B,QAAQ,EAAE1gC;UACZ,CAAC;UACD,IAAG20D,OAAO,EAAC;YACT,IAAIr0C,MAAM,GAAEq0C,OAAO,CAAC99D,IAAI,CAAC0B,MAAM,EAAE2C,QAAQ,CAAC;YAC1C,IAAGolB,MAAM,KAAG,KAAK,EAAC;cAChBuzC,OAAO,CAACiB,IAAI,CAACz4D,KAAK,CAACw3D,OAAO,EAAE,CAAC34D,QAAQ,CAACsO,IAAI,CAAC,CAAC8vB,MAAM,CAAC6Z,IAAI,CAAC,CAAC;YAC3D;YACA;UACF;UACA0gB,OAAO,CAACiB,IAAI,CAACz4D,KAAK,CAACw3D,OAAO,EAAE,CAACa,UAAU,CAAC,CAACp7B,MAAM,CAAC6Z,IAAI,CAAC,CAAC;QACxD,CAAC;QAGD,IAAG14C,SAAS,CAACuF,KAAK,CAAC,EAAC;UAClB,MAAMslC,KAAK,CAAC,UAAU,GAAGtlC,KAAK,GAAG,yBAAyB,CAAC;QAC7D;QAEA,IAAI,CAACo0D,eAAe,EAAE;QAEtB,IAAGP,OAAO,CAACV,YAAY,IAAIU,OAAO,CAACR,eAAe,IAAI,CAACuB,QAAQ,CAACG,cAAc,EAAC;UAE7E,IAAI,CAACA,cAAc,GAAG,UAAUC,MAAM,EAAE;YACtC,IAAIA,MAAM,KAAKN,UAAU,IAAIj6D,SAAS,CAACuF,KAAK,CAAC,KAAK,IAAI,EAAE;cACtDvF,SAAS,CAACuF,KAAK,CAAC,GAAG60D,OAAO;cAC1BD,QAAQ,CAACN,GAAG,CAACz9D,IAAI,CAAC0B,MAAM,EAAEyH,KAAK,EAAE60D,OAAO,CAAC;YAC3C;UACF,CAAC;UAEDhB,OAAO,CAAC95D,EAAE,CAAC,aAAa,EAAE,IAAI,CAACg7D,cAAc,CAAC;UAE9C,IAAI,CAACE,iBAAiB,GAAE,UAASD,MAAM,EAAC;YACtC,IAAGA,MAAM,KAAKN,UAAU,IAAI,CAACb,OAAO,CAACqB,YAAY,CAACF,MAAM,CAAC,IAAIv6D,SAAS,CAACuF,KAAK,CAAC,EAAC;cAC5EvF,SAAS,CAACuF,KAAK,CAAC,GAAE,IAAI;cACtB40D,QAAQ,CAAC7lC,IAAI,CAACl4B,IAAI,CAAC0B,MAAM,EAAEyH,KAAK,EAAE60D,OAAO,CAAC;YAC5C;UACF,CAAC;UAEDp6D,SAAS,CAACuF,KAAK,CAAC,GAAE,IAAI;UAEtB6zD,OAAO,CAAC95D,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACk7D,iBAAiB,CAAC;QACtD,CAAC,MAAK;UACJx6D,SAAS,CAACuF,KAAK,CAAC,GAAE60D,OAAO;UACzBD,QAAQ,CAACN,GAAG,CAACz9D,IAAI,CAAC0B,MAAM,EAAEyH,KAAK,EAAE60D,OAAO,CAAC;QAC3C;MACF,CAAC;MAEDM,WAAW,EAAE,SAAAA,CAASn1D,KAAK,EAAC;QAC1B,IAAI40D,QAAQ,GAAE,IAAI;QAClB,IAAIn6D,SAAS,GAAE,IAAI,CAACd,UAAU;QAC9B,IAAIk6D,OAAO,GAAE,IAAI,CAACM,QAAQ;QAC1B,IAAIU,OAAO;QACX,IAAIO,MAAM;QACV,IAAIn7D,GAAG,GAAE,IAAI,CAAC80B,IAAI;QAClB,IAAIx2B,MAAM,GAAE,IAAI,CAACk2B,OAAO;QACxB,IAAIz2B,CAAC;QAEL,IAAGgI,KAAK,IAAI,OAAOA,KAAK,KAAG,QAAQ,EAAC;UAClC,MAAMk+B,SAAS,CAAC,wBAAwB,CAAC;QAC3C;QAEA,SAASm3B,SAASA,CAAA,EAAE;UAClB,IAAGT,QAAQ,CAACG,cAAc,EAAC;YACzBlB,OAAO,CAAC55D,GAAG,CAAC,aAAa,EAAE26D,QAAQ,CAACG,cAAc,CAAC;YACnDlB,OAAO,CAAC55D,GAAG,CAAC,gBAAgB,EAAE26D,QAAQ,CAACK,iBAAiB,CAAC;YACzDL,QAAQ,CAACG,cAAc,GAAE,IAAI;YAC7BH,QAAQ,CAACK,iBAAiB,GAAE,IAAI;UAClC;UACA,IAAI12C,KAAK,GAAE+2C,eAAe,CAACz+D,IAAI,CAACg9D,OAAO,EAAEe,QAAQ,CAAC;UAClDf,OAAO,CAACU,UAAU,CAACt5D,MAAM,CAACsjB,KAAK,EAAE,CAAC,CAAC;QACrC;QAEA,IAAGve,KAAK,EAAC;UACP60D,OAAO,GAAEp6D,SAAS,CAACuF,KAAK,CAAC;UACzB,IAAG,CAAC60D,OAAO,EAAE;YAAE;UAAQ;UACvB56D,GAAG,CAACpD,IAAI,CAAC0B,MAAM,EAAEyH,KAAK,EAAE60D,OAAO,CAAC;UAChC,OAAOp6D,SAAS,CAACuF,KAAK,CAAC;UACvB,IAAG,CAAC,GAAE,IAAI,CAACo0D,eAAe,EAAC;YACzBiB,SAAS,CAAC,CAAC;UACb;QACF,CAAC,MAAK;UACJD,MAAM,GAAE9C,OAAO,CAAC73D,SAAS,CAAC;UAC1BzC,CAAC,GAAEo9D,MAAM,CAACl9D,MAAM;UAChB,OAAMF,CAAC,EAAE,GAAC,CAAC,EAAC;YACVgI,KAAK,GAAEo1D,MAAM,CAACp9D,CAAC,CAAC;YAChBiC,GAAG,CAACpD,IAAI,CAAC0B,MAAM,EAAEyH,KAAK,EAAEvF,SAAS,CAACuF,KAAK,CAAC,CAAC;UAC3C;UACA,IAAI,CAACrG,UAAU,GAAE,CAAC,CAAC;UACnB,IAAI,CAACy6D,eAAe,GAAE,CAAC;UACvBiB,SAAS,CAAC,CAAC;QACb;MACF;IACF,CAAC,CAAC;IAEF,SAASE,cAAcA,CAACnE,OAAO,EAAEoE,MAAM,EAAEC,QAAQ,EAAEC,YAAY,EAAE;MAC/D,IAAIC,eAAe,GAAGj/D,MAAM,CAAC89D,MAAM,CAAC,CAAC,CAAC,EAAEgB,MAAM,CAAC;MAE/C,IAAI,CAACpE,OAAO,EAAE;QAAE,OAAOuE,eAAe;MAAE;MAExC,IAAI,OAAOvE,OAAO,KAAK,QAAQ,EAAE;QAC/B,MAAMlzB,SAAS,CAAC,2BAA2B,CAAC;MAC9C;MAEA,IAAIu0B,IAAI,GAAG/7D,MAAM,CAAC+7D,IAAI,CAACrB,OAAO,CAAC;MAC/B,IAAIl5D,MAAM,GAAGu6D,IAAI,CAACv6D,MAAM;MACxB,IAAI09D,MAAM,EAAEt4D,KAAK;MACjB,IAAIq3D,OAAO;MAEX,SAASkB,MAAMA,CAACC,MAAM,EAAE;QACtB,MAAMxwB,KAAK,CAAC,WAAW,GAAGswB,MAAM,GAAG,gBAAgB,IAAIE,MAAM,GAAG,YAAY,GAAGA,MAAM,GAAG,EAAE,CAAC,CAAC;MAC9F;MAEA,KAAK,IAAI99D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,MAAM,EAAEF,CAAC,EAAE,EAAE;QAC/B49D,MAAM,GAAGnD,IAAI,CAACz6D,CAAC,CAAC;QAChB,IAAI,CAAC09D,YAAY,IAAI,CAAC9+D,cAAc,CAACC,IAAI,CAAC2+D,MAAM,EAAEI,MAAM,CAAC,EAAE;UACzD,MAAMtwB,KAAK,CAAC,WAAW,GAAGswB,MAAM,GAAG,UAAU,CAAC;QAChD;QACAt4D,KAAK,GAAG8zD,OAAO,CAACwE,MAAM,CAAC;QACvB,IAAIt4D,KAAK,KAAKm0D,WAAW,EAAE;UACzBkD,OAAO,GAAGc,QAAQ,CAACG,MAAM,CAAC;UAC1BD,eAAe,CAACC,MAAM,CAAC,GAAGjB,OAAO,GAAGA,OAAO,CAACr3D,KAAK,EAAEu4D,MAAM,CAAC,GAAGv4D,KAAK;QACpE;MACF;MACA,OAAOq4D,eAAe;IACxB;IAEA,SAASI,kBAAkBA,CAACz4D,KAAK,EAAEu4D,MAAM,EAAE;MACzC,IAAI,OAAOv4D,KAAK,KAAK,UAAU,IAAI,CAACA,KAAK,CAAC1G,cAAc,CAAC,WAAW,CAAC,EAAE;QACrEi/D,MAAM,CAAC,6BAA6B,CAAC;MACvC;MACA,OAAOv4D,KAAK;IACd;IAEA,SAAS04D,eAAeA,CAACriB,KAAK,EAAE;MAC9B,IAAIvW,OAAO,GAAE,wBAAwB,GAAGuW,KAAK,CAACnR,IAAI,CAAC,GAAG,CAAC;MACvD,IAAIwxB,GAAG,GAAErgB,KAAK,CAACz7C,MAAM;MACrB,IAAI+9D,SAAS,GAAEtiB,KAAK,CAAC,CAAC,CAAC;MACvB,IAAIuiB,UAAU,GAAEviB,KAAK,CAAC,CAAC,CAAC;MAExB,IAAIqgB,GAAG,KAAK,CAAC,EAAE;QACb,OAAO,UAAU5jC,CAAC,EAAEylC,MAAM,EAAE;UAC1B,IAAI,OAAOzlC,CAAC,KAAK6lC,SAAS,EAAE;YAC1B,OAAO7lC,CAAC;UACV;UACAylC,MAAM,CAACz4B,OAAO,CAAC;QACjB,CAAC;MACH;MAEA,IAAI42B,GAAG,KAAK,CAAC,EAAE;QACb,OAAO,UAAU5jC,CAAC,EAAEylC,MAAM,EAAE;UAC1B,IAAIM,IAAI,GAAE,OAAO/lC,CAAC;UAClB,IAAI+lC,IAAI,KAAKF,SAAS,IAAIE,IAAI,KAAKD,UAAU,EAAE;YAAE,OAAO9lC,CAAC;UAAE;UAC3DylC,MAAM,CAACz4B,OAAO,CAAC;QACjB,CAAC;MACH;MAEA,OAAO,UAAUhN,CAAC,EAAEylC,MAAM,EAAE;QAC1B,IAAIM,IAAI,GAAG,OAAO/lC,CAAC;QACnB,IAAIp4B,CAAC,GAAGg8D,GAAG;QACX,OAAOh8D,CAAC,EAAE,GAAG,CAAC,EAAE;UACd,IAAIm+D,IAAI,KAAKxiB,KAAK,CAAC37C,CAAC,CAAC,EAAE;YAAE,OAAOo4B,CAAC;UAAE;QACrC;QACAylC,MAAM,CAACz4B,OAAO,CAAC;MACjB,CAAC;IACH;IAEA,IAAIg5B,eAAe,GAAEJ,eAAe,CAAC,CAAC,UAAU,CAAC,CAAC;IAElD,IAAIK,qBAAqB,GAAEL,eAAe,CAAC,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;IAElE,SAASM,qBAAqBA,CAACC,OAAO,EAAEC,QAAQ,EAAEpF,OAAO,EAAE;MACzD,IAAIqF,YAAY;MAChB,IAAIC,SAAS;MACb,IAAIC,KAAK,GAAE,CAAC;MACZ,IAAIC,kBAAkB;MAEtB,IAAIC,OAAO,GAAG,IAAIN,OAAO,CAAC,UAAUzoC,OAAO,EAAE+nC,MAAM,EAAEiB,QAAQ,EAAE;QAC7D1F,OAAO,GAAEmE,cAAc,CAACnE,OAAO,EAAE;UAC/B2F,OAAO,EAAE,CAAC;UACVC,QAAQ,EAAE;QACZ,CAAC,EAAE;UACDD,OAAO,EAAE,SAAAA,CAASz5D,KAAK,EAAEu4D,MAAM,EAAC;YAC9Bv4D,KAAK,IAAG,CAAC;YACT,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,GAAG,CAAC,IAAI,CAAC0gC,MAAM,CAACi5B,QAAQ,CAAC35D,KAAK,CAAC,EAAE;cACrEu4D,MAAM,CAAC,mCAAmC,CAAC;YAC7C;YACA,OAAOv4D,KAAK;UACd;QACF,CAAC,CAAC;QAEFm5D,YAAY,GAAG,CAACrF,OAAO,CAAC4F,QAAQ,IAAI,OAAOT,OAAO,CAAC5/D,SAAS,CAACkzC,MAAM,KAAK,UAAU,IAAI,OAAOitB,QAAQ,KAAK,UAAU;QAEpH,SAASI,OAAOA,CAAA,EAAG;UACjB,IAAIR,SAAS,EAAE;YACbA,SAAS,GAAG,IAAI;UAClB;UACA,IAAIC,KAAK,EAAE;YACTt4D,YAAY,CAACs4D,KAAK,CAAC;YACnBA,KAAK,GAAG,CAAC;UACX;QACF;QAEA,IAAIQ,QAAQ,GAAE,SAAAA,CAAS75D,KAAK,EAAC;UAC3B45D,OAAO,CAAC,CAAC;UACTppC,OAAO,CAACxwB,KAAK,CAAC;QAChB,CAAC;QAED,IAAI85D,OAAO,GAAE,SAAAA,CAASn0C,GAAG,EAAC;UACxBi0C,OAAO,CAAC,CAAC;UACTrB,MAAM,CAAC5yC,GAAG,CAAC;QACb,CAAC;QAED,IAAIwzC,YAAY,EAAE;UAChBD,QAAQ,CAACW,QAAQ,EAAEC,OAAO,EAAEN,QAAQ,CAAC;QACvC,CAAC,MAAM;UACLJ,SAAS,GAAG,CAAC,UAASZ,MAAM,EAAC;YAC3BsB,OAAO,CAACtB,MAAM,IAAIxwB,KAAK,CAAC,UAAU,CAAC,CAAC;UACtC,CAAC,CAAC;UACFkxB,QAAQ,CAACW,QAAQ,EAAEC,OAAO,EAAE,UAAUC,EAAE,EAAE;YACxC,IAAIT,kBAAkB,EAAE;cACtB,MAAMtxB,KAAK,CAAC,oDAAoD,CAAC;YACnE;YACA,IAAI,OAAO+xB,EAAE,KAAK,UAAU,EAAE;cAC5B,MAAMn5B,SAAS,CAAC,sCAAsC,CAAC;YACzD;YACAw4B,SAAS,CAAC/7D,IAAI,CAAC08D,EAAE,CAAC;UACpB,CAAC,CAAC;UACFT,kBAAkB,GAAE,IAAI;QAC1B;QAEA,IAAIxF,OAAO,CAAC2F,OAAO,GAAG,CAAC,EAAE;UACvBJ,KAAK,GAAE92D,UAAU,CAAC,YAAU;YAC1B,IAAIi2D,MAAM,GAAExwB,KAAK,CAAC,SAAS,CAAC;YAC5BwwB,MAAM,CAACwB,IAAI,GAAG,WAAW;YACzBX,KAAK,GAAE,CAAC;YACRE,OAAO,CAAChtB,MAAM,CAACisB,MAAM,CAAC;YACtBD,MAAM,CAACC,MAAM,CAAC;UAChB,CAAC,EAAE1E,OAAO,CAAC2F,OAAO,CAAC;QACrB;MACF,CAAC,CAAC;MAEF,IAAI,CAACN,YAAY,EAAE;QACjBI,OAAO,CAAChtB,MAAM,GAAG,UAAUisB,MAAM,EAAE;UACjC,IAAI,CAACY,SAAS,EAAE;YACd;UACF;UACA,IAAIx+D,MAAM,GAAGw+D,SAAS,CAACx+D,MAAM;UAC7B,KAAK,IAAIF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,MAAM,EAAEF,CAAC,EAAE,EAAE;YAC/B0+D,SAAS,CAAC1+D,CAAC,CAAC,CAAC89D,MAAM,CAAC;UACtB;UACA;UACAY,SAAS,CAAC,CAAC,CAAC,CAACZ,MAAM,CAAC;UACpBY,SAAS,GAAG,IAAI;QAClB,CAAC;MACH;MAEA,OAAOG,OAAO;IAChB;IAEA,SAASvB,eAAeA,CAACV,QAAQ,EAAE;MACjC,IAAI2C,SAAS,GAAG,IAAI,CAAChD,UAAU;MAC/B,IAAG,CAACgD,SAAS,EAAC;QACZ,OAAO,CAAC,CAAC;MACX;MACA,IAAIvD,GAAG,GAAGuD,SAAS,CAACr/D,MAAM;MAC1B,KAAK,IAAIF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGg8D,GAAG,EAAEh8D,CAAC,EAAE,EAAE;QAC5B,IAAIu/D,SAAS,CAACv/D,CAAC,CAAC,CAACy2B,OAAO,KAAKmmC,QAAQ,EAAE;UAAE,OAAO58D,CAAC;QAAE;MACrD;MACA,OAAO,CAAC,CAAC;IACX;;IAEA;IACA;IACA;IACA;IACA,SAASw/D,kBAAkBA,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,EAAE1/D,CAAC,EAAE2/D,UAAU,EAAE;MAC/D,IAAI,CAACD,IAAI,EAAE;QACT,OAAO,IAAI;MACb;MAEA,IAAI1/D,CAAC,KAAK,CAAC,EAAE;QACX,IAAIm+D,IAAI,GAAG,OAAO/9D,IAAI;QACtB,IAAI+9D,IAAI,KAAK,QAAQ,EAAE;UACrB,IAAIyB,EAAE;YAAEhgE,CAAC;YAAEK,CAAC,GAAG,CAAC;YAAE6xB,CAAC,GAAG,CAAC;YAAEgpC,SAAS,GAAG,IAAI,CAACA,SAAS;YAAE+E,EAAE,GAAG/E,SAAS,CAAC56D,MAAM;UAC1E,IAAI,CAACN,CAAC,GAAGQ,IAAI,CAACP,OAAO,CAACi7D,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE;YACxC8E,EAAE,GAAG,IAAIptD,KAAK,CAAC,CAAC,CAAC;YACjB,GAAG;cACDotD,EAAE,CAAC3/D,CAAC,EAAE,CAAC,GAAGG,IAAI,CAACqD,KAAK,CAACquB,CAAC,EAAElyB,CAAC,CAAC;cAC1BkyB,CAAC,GAAGlyB,CAAC,GAAGigE,EAAE;YACZ,CAAC,QAAQ,CAACjgE,CAAC,GAAGQ,IAAI,CAACP,OAAO,CAACi7D,SAAS,EAAEhpC,CAAC,CAAC,MAAM,CAAC,CAAC;YAEhD8tC,EAAE,CAAC3/D,CAAC,EAAE,CAAC,GAAGG,IAAI,CAACqD,KAAK,CAACquB,CAAC,CAAC;YACvB1xB,IAAI,GAAGw/D,EAAE;YACTD,UAAU,GAAG1/D,CAAC;UAChB,CAAC,MAAM;YACLG,IAAI,GAAG,CAACA,IAAI,CAAC;YACbu/D,UAAU,GAAG,CAAC;UAChB;QACF,CAAC,MAAM,IAAIxB,IAAI,KAAK,QAAQ,EAAE;UAC5BwB,UAAU,GAAGv/D,IAAI,CAACF,MAAM;QAC1B,CAAC,MAAM;UACLE,IAAI,GAAG,CAACA,IAAI,CAAC;UACbu/D,UAAU,GAAG,CAAC;QAChB;MACF;MAEA,IAAIl9D,SAAS,GAAE,IAAI;QAAEq9D,MAAM;QAAEC,KAAK;QAAEC,MAAM;QAAEC,cAAc;QAAEC,UAAU;QAAEC,WAAW,GAAG//D,IAAI,CAACJ,CAAC,CAAC;QACzFogE,QAAQ,GAAGhgE,IAAI,CAACJ,CAAC,GAAG,CAAC,CAAC;QAAEqgE,QAAQ;QAAE1+D,UAAU;MAEhD,IAAI3B,CAAC,KAAK2/D,UAAU,EAAE;QACpB;QACA;QACA;QACA;;QAEA,IAAGD,IAAI,CAAC/9D,UAAU,EAAE;UAClB,IAAI,OAAO+9D,IAAI,CAAC/9D,UAAU,KAAK,UAAU,EAAE;YACzC89D,QAAQ,IAAIA,QAAQ,CAAC98D,IAAI,CAAC+8D,IAAI,CAAC/9D,UAAU,CAAC;YAC1Cc,SAAS,GAAG,CAACi9D,IAAI,CAAC;UACpB,CAAC,MAAM;YACLD,QAAQ,IAAIA,QAAQ,CAAC98D,IAAI,CAAC0B,KAAK,CAACo7D,QAAQ,EAAEC,IAAI,CAAC/9D,UAAU,CAAC;YAC1Dc,SAAS,GAAG,CAACi9D,IAAI,CAAC;UACpB;QACF;MACF,CAAC,MAAM;QAEL,IAAIS,WAAW,KAAK,GAAG,EAAE;UACvB;UACA;UACA;UACA;UACAE,QAAQ,GAAG/F,OAAO,CAACoF,IAAI,CAAC;UACxB9/D,CAAC,GAAGygE,QAAQ,CAACngE,MAAM;UACnB,OAAON,CAAC,EAAE,GAAG,CAAC,EAAE;YACdkgE,MAAM,GAAGO,QAAQ,CAACzgE,CAAC,CAAC;YACpB,IAAIkgE,MAAM,KAAK,YAAY,EAAE;cAC3Bn+D,UAAU,GAAG69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACI,MAAM,CAAC,EAAE9/D,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;cAChF,IAAIh+D,UAAU,EAAE;gBACd,IAAIc,SAAS,EAAE;kBACbA,SAAS,CAACE,IAAI,CAAC0B,KAAK,CAAC5B,SAAS,EAAEd,UAAU,CAAC;gBAC7C,CAAC,MAAM;kBACLc,SAAS,GAAGd,UAAU;gBACxB;cACF;YACF;UACF;UACA,OAAOc,SAAS;QAClB,CAAC,MAAM,IAAI09D,WAAW,KAAK,IAAI,EAAE;UAC/BD,UAAU,GAAIlgE,CAAC,GAAG,CAAC,KAAK2/D,UAAU,IAAK3/D,CAAC,GAAG,CAAC,KAAK2/D,UAAU,IAAIS,QAAQ,KAAK,GAAK;UACjF,IAAIF,UAAU,IAAIR,IAAI,CAAC/9D,UAAU,EAAE;YACjC;YACAc,SAAS,GAAG+8D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,EAAEC,UAAU,EAAEA,UAAU,CAAC;UAC9E;UAEAU,QAAQ,GAAG/F,OAAO,CAACoF,IAAI,CAAC;UACxB9/D,CAAC,GAAGygE,QAAQ,CAACngE,MAAM;UACnB,OAAON,CAAC,EAAE,GAAG,CAAC,EAAE;YACdkgE,MAAM,GAAGO,QAAQ,CAACzgE,CAAC,CAAC;YACpB,IAAIkgE,MAAM,KAAK,YAAY,EAAE;cAC3B,IAAIA,MAAM,KAAK,GAAG,IAAIA,MAAM,KAAK,IAAI,EAAE;gBACrC,IAAIJ,IAAI,CAACI,MAAM,CAAC,CAACn+D,UAAU,IAAI,CAACu+D,UAAU,EAAE;kBAC1Cv+D,UAAU,GAAG69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACI,MAAM,CAAC,EAAEH,UAAU,EAAEA,UAAU,CAAC;kBACrF,IAAIh+D,UAAU,EAAE;oBACd,IAAIc,SAAS,EAAE;sBACbA,SAAS,CAACE,IAAI,CAAC0B,KAAK,CAAC5B,SAAS,EAAEd,UAAU,CAAC;oBAC7C,CAAC,MAAM;sBACLc,SAAS,GAAGd,UAAU;oBACxB;kBACF;gBACF;gBACAA,UAAU,GAAG69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACI,MAAM,CAAC,EAAE9/D,CAAC,EAAE2/D,UAAU,CAAC;cAC9E,CAAC,MAAM,IAAIG,MAAM,KAAKM,QAAQ,EAAE;gBAC9Bz+D,UAAU,GAAG69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACI,MAAM,CAAC,EAAE9/D,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;cAClF,CAAC,MAAM;gBACL;gBACAh+D,UAAU,GAAG69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACI,MAAM,CAAC,EAAE9/D,CAAC,EAAE2/D,UAAU,CAAC;cAC9E;cACA,IAAIh+D,UAAU,EAAE;gBACd,IAAIc,SAAS,EAAE;kBACbA,SAAS,CAACE,IAAI,CAAC0B,KAAK,CAAC5B,SAAS,EAAEd,UAAU,CAAC;gBAC7C,CAAC,MAAM;kBACLc,SAAS,GAAGd,UAAU;gBACxB;cACF;YACF;UACF;UACA,OAAOc,SAAS;QAClB,CAAC,MAAM,IAAIi9D,IAAI,CAACS,WAAW,CAAC,EAAE;UAC5B19D,SAAS,GAAG+8D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAEs/D,IAAI,CAACS,WAAW,CAAC,EAAEngE,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;QACtF;MACF;MAEEI,KAAK,GAAGL,IAAI,CAAC,GAAG,CAAC;MACnB,IAAIK,KAAK,EAAE;QACT;QACA;QACA;QACA;QACAP,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE2/D,KAAK,EAAE//D,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;MAC9D;MAEAK,MAAM,GAAGN,IAAI,CAAC,IAAI,CAAC;MACnB,IAAIM,MAAM,EAAE;QACV,IAAIhgE,CAAC,GAAG2/D,UAAU,EAAE;UAClB,IAAIK,MAAM,CAACr+D,UAAU,EAAE;YACrB;YACA69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE4/D,MAAM,EAAEL,UAAU,EAAEA,UAAU,CAAC;UACpE;;UAEA;UACAU,QAAQ,GAAE/F,OAAO,CAAC0F,MAAM,CAAC;UACzBpgE,CAAC,GAAEygE,QAAQ,CAACngE,MAAM;UAClB,OAAMN,CAAC,EAAE,GAAC,CAAC,EAAC;YACVkgE,MAAM,GAAEO,QAAQ,CAACzgE,CAAC,CAAC;YACnB,IAAIkgE,MAAM,KAAK,YAAY,EAAE;cAC3B,IAAIA,MAAM,KAAKM,QAAQ,EAAE;gBACvB;gBACAZ,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE4/D,MAAM,CAACF,MAAM,CAAC,EAAE9/D,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;cACvE,CAAC,MAAM,IAAIG,MAAM,KAAKK,WAAW,EAAE;gBACjC;gBACAX,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE4/D,MAAM,CAACF,MAAM,CAAC,EAAE9/D,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;cACvE,CAAC,MAAM;gBACLM,cAAc,GAAG,CAAC,CAAC;gBACnBA,cAAc,CAACH,MAAM,CAAC,GAAGE,MAAM,CAACF,MAAM,CAAC;gBACvCN,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE;kBAAC,IAAI,EAAE6/D;gBAAc,CAAC,EAAEjgE,CAAC,GAAG,CAAC,EAAE2/D,UAAU,CAAC;cAC/E;YACF;UACF;QACF,CAAC,MAAM,IAAIK,MAAM,CAACr+D,UAAU,EAAE;UAC5B;UACA69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE4/D,MAAM,EAAEL,UAAU,EAAEA,UAAU,CAAC;QACpE,CAAC,MAAM,IAAIK,MAAM,CAAC,GAAG,CAAC,IAAIA,MAAM,CAAC,GAAG,CAAC,CAACr+D,UAAU,EAAE;UAChD69D,kBAAkB,CAACC,QAAQ,EAAEr/D,IAAI,EAAE4/D,MAAM,CAAC,GAAG,CAAC,EAAEL,UAAU,EAAEA,UAAU,CAAC;QACzE;MACF;MAEA,OAAOl9D,SAAS;IAClB;IAEA,SAAS69D,gBAAgBA,CAAClgE,IAAI,EAAEmC,QAAQ,EAAEuI,OAAO,EAAE;MACjD,IAAIkxD,GAAG,GAAG,CAAC;QAAElqC,CAAC,GAAG,CAAC;QAAE9xB,CAAC;QAAE86D,SAAS,GAAG,IAAI,CAACA,SAAS;QAAE+E,EAAE,GAAE/E,SAAS,CAAC56D,MAAM;QAAE0/D,EAAE;MAE3E,IAAG,OAAOx/D,IAAI,KAAG,QAAQ,EAAE;QACzB,IAAI,CAACJ,CAAC,GAAGI,IAAI,CAACP,OAAO,CAACi7D,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE;UACxC8E,EAAE,GAAG,IAAIptD,KAAK,CAAC,CAAC,CAAC;UACjB,GAAG;YACDotD,EAAE,CAAC5D,GAAG,EAAE,CAAC,GAAG57D,IAAI,CAACqD,KAAK,CAACquB,CAAC,EAAE9xB,CAAC,CAAC;YAC5B8xB,CAAC,GAAG9xB,CAAC,GAAG6/D,EAAE;UACZ,CAAC,QAAQ,CAAC7/D,CAAC,GAAGI,IAAI,CAACP,OAAO,CAACi7D,SAAS,EAAEhpC,CAAC,CAAC,MAAM,CAAC,CAAC;UAEhD8tC,EAAE,CAAC5D,GAAG,EAAE,CAAC,GAAG57D,IAAI,CAACqD,KAAK,CAACquB,CAAC,CAAC;QAC3B,CAAC,MAAK;UACJ8tC,EAAE,GAAE,CAACx/D,IAAI,CAAC;UACV47D,GAAG,GAAE,CAAC;QACR;MACF,CAAC,MAAK;QACJ4D,EAAE,GAAEx/D,IAAI;QACR47D,GAAG,GAAE57D,IAAI,CAACF,MAAM;MAClB;;MAEA;MACA;MACA;MACA,IAAI87D,GAAG,GAAG,CAAC,EAAE;QACX,KAAKh8D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,GAAGg8D,GAAG,EAAEh8D,CAAC,EAAE,EAAE;UAC5B,IAAI4/D,EAAE,CAAC5/D,CAAC,CAAC,KAAK,IAAI,IAAI4/D,EAAE,CAAC5/D,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,EAAE;YACxC;UACF;QACF;MACF;MAIA,IAAI0/D,IAAI,GAAG,IAAI,CAAClE,YAAY;QAAEhqD,IAAI;MAElC,KAAKxR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGg8D,GAAG,EAAEh8D,CAAC,EAAE,EAAE;QACxBwR,IAAI,GAAGouD,EAAE,CAAC5/D,CAAC,CAAC;QAEZ0/D,IAAI,GAAGA,IAAI,CAACluD,IAAI,CAAC,KAAKkuD,IAAI,CAACluD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAEtC,IAAIxR,CAAC,KAAKg8D,GAAG,GAAG,CAAC,EAAE;UACjB,IAAI,CAAC0D,IAAI,CAAC/9D,UAAU,EAAE;YACpB+9D,IAAI,CAAC/9D,UAAU,GAAGY,QAAQ;UAC5B,CAAC,MAAM;YACL,IAAI,OAAOm9D,IAAI,CAAC/9D,UAAU,KAAK,UAAU,EAAE;cACzC+9D,IAAI,CAAC/9D,UAAU,GAAG,CAAC+9D,IAAI,CAAC/9D,UAAU,CAAC;YACrC;YAEA,IAAImJ,OAAO,EAAE;cACX40D,IAAI,CAAC/9D,UAAU,CAACuG,OAAO,CAAC3F,QAAQ,CAAC;YACnC,CAAC,MAAM;cACLm9D,IAAI,CAAC/9D,UAAU,CAACgB,IAAI,CAACJ,QAAQ,CAAC;YAChC;YAEA,IACI,CAACm9D,IAAI,CAAC/9D,UAAU,CAAC4+D,MAAM,IACvB,IAAI,CAACvF,aAAa,GAAG,CAAC,IACtB0E,IAAI,CAAC/9D,UAAU,CAACzB,MAAM,GAAG,IAAI,CAAC86D,aAAa,EAC7C;cACA0E,IAAI,CAAC/9D,UAAU,CAAC4+D,MAAM,GAAG,IAAI;cAC7B9E,qBAAqB,CAAC58D,IAAI,CAAC,IAAI,EAAE6gE,IAAI,CAAC/9D,UAAU,CAACzB,MAAM,EAAEsR,IAAI,CAAC;YAChE;UACF;UACA,OAAO,IAAI;QACb;MACF;MAEA,OAAO,IAAI;IACb;IAEA,SAASgvD,iBAAiBA,CAACd,IAAI,EAAEtC,MAAM,EAAEx3B,IAAI,EAAE66B,OAAO,EAAC;MACpD,IAAIJ,QAAQ,GAAE/F,OAAO,CAACoF,IAAI,CAAC;MAC3B,IAAI1/D,CAAC,GAAEqgE,QAAQ,CAACngE,MAAM;MACtB,IAAI4/D,MAAM,EAAEY,UAAU,EAAExqD,IAAI;MAC5B,IAAIgnD,YAAY,GAAEwC,IAAI,CAAC,YAAY,CAAC;MACpC,IAAIiB,WAAW;MAEf,OAAM3gE,CAAC,EAAE,GAAC,CAAC,EAAC;QACR0gE,UAAU,GAAEL,QAAQ,CAACrgE,CAAC,CAAC;QAEvB8/D,MAAM,GAAEJ,IAAI,CAACgB,UAAU,CAAC;QAExB,IAAGA,UAAU,KAAG,YAAY,EAAC;UACzBxqD,IAAI,GAAE0vB,IAAI;QACd,CAAC,MAAK;UACF1vB,IAAI,GAAG0vB,IAAI,GAAGA,IAAI,CAACtE,MAAM,CAACo/B,UAAU,CAAC,GAAG,CAACA,UAAU,CAAC;QACxD;QAEAC,WAAW,GAAEF,OAAO,IAAI,OAAOC,UAAU,KAAG,QAAQ;QAEpDxD,YAAY,IAAIE,MAAM,CAACz6D,IAAI,CAACg+D,WAAW,GAAEzqD,IAAI,GAAGA,IAAI,CAACs0B,IAAI,CAAC,IAAI,CAACswB,SAAS,CAAC,CAAC;QAE1E,IAAG,OAAOgF,MAAM,KAAG,QAAQ,EAAC;UACxBU,iBAAiB,CAAC3hE,IAAI,CAAC,IAAI,EAAEihE,MAAM,EAAE1C,MAAM,EAAElnD,IAAI,EAAEyqD,WAAW,CAAC;QACnE;MACJ;MAEA,OAAOvD,MAAM;IAChB;IAEA,SAASwD,yBAAyBA,CAACh7B,IAAI,EAAE;MACvC,IAAI60B,IAAI,GAAGH,OAAO,CAAC10B,IAAI,CAAC;MACxB,IAAI5lC,CAAC,GAAEy6D,IAAI,CAACv6D,MAAM;MAClB,IAAI8S,GAAG,EAAE+wC,GAAG,EAAE8c,IAAI;MAClB,OAAM7gE,CAAC,EAAE,GAAC,CAAC,EAAC;QACV+jD,GAAG,GAAG0W,IAAI,CAACz6D,CAAC,CAAC;QACbgT,GAAG,GAAG4yB,IAAI,CAACme,GAAG,CAAC;QAEf,IAAG/wC,GAAG,EAAC;UACH6tD,IAAI,GAAE,IAAI;UACV,IAAG9c,GAAG,KAAK,YAAY,IAAI,CAAC6c,yBAAyB,CAAC5tD,GAAG,CAAC,EAAC;YACxD,OAAO4yB,IAAI,CAACme,GAAG,CAAC;UACnB;QACJ;MACF;MAEA,OAAO8c,IAAI;IACb;IAEA,SAASC,QAAQA,CAACjF,OAAO,EAAE7zD,KAAK,EAAEzF,QAAQ,EAAC;MACzC,IAAI,CAACs5D,OAAO,GAAEA,OAAO;MACrB,IAAI,CAAC7zD,KAAK,GAAEA,KAAK;MACjB,IAAI,CAACzF,QAAQ,GAAEA,QAAQ;IACzB;IAEAu+D,QAAQ,CAACniE,SAAS,CAACsD,GAAG,GAAE,YAAU;MAChC,IAAI,CAAC45D,OAAO,CAAC55D,GAAG,CAAC,IAAI,CAAC+F,KAAK,EAAE,IAAI,CAACzF,QAAQ,CAAC;MAC3C,OAAO,IAAI;IACb,CAAC;IAED,SAASw+D,aAAaA,CAAC/4D,KAAK,EAAEzF,QAAQ,EAAE62D,OAAO,EAAC;MAC5C,IAAIA,OAAO,KAAK,IAAI,EAAE;QACpB4H,SAAS,GAAG,IAAI;MAClB,CAAC,MAAM,IAAI5H,OAAO,KAAK,KAAK,EAAE;QAC5B7sB,KAAK,GAAG,IAAI;MACd,CAAC,MAAM;QACL,IAAI,CAAC6sB,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;UAC3C,MAAMlzB,SAAS,CAAC,qCAAqC,CAAC;QACxD;QACA,IAAIqG,KAAK,GAAG6sB,OAAO,CAAC7sB,KAAK;QACzB,IAAIy0B,SAAS,GAAG5H,OAAO,CAAC4H,SAAS;QACjC,IAAIlH,QAAQ,GAAGV,OAAO,CAACU,QAAQ;QAC/B,IAAImH,SAAS,GAAG7H,OAAO,CAAC6H,SAAS;MACnC;MAEA,IAAI10B,KAAK,IAAIutB,QAAQ,IAAIkH,SAAS,EAAE;QAClC,IAAIE,SAAS,GAAG3+D,QAAQ;QACxB,IAAI4+D,OAAO,GAAG5+D,QAAQ,CAAC4+D,OAAO,IAAI5+D,QAAQ;QAE1C,IAAIu3D,QAAQ,IAAI,CAACF,iBAAiB,EAAE;UAClC,MAAMtsB,KAAK,CAAC,mCAAmC,CAAC;QAClD;QAEA,IAAI0zB,SAAS,KAAKvH,WAAW,EAAE;UAC7BuH,SAAS,GAAGz+D,QAAQ,CAAClD,WAAW,CAACmS,IAAI,KAAK,eAAe;QAC3D;QAEAjP,QAAQ,GAAG,SAAAA,CAAA,EAAY;UACrB,IAAI44C,IAAI,GAAG72C,SAAS;UACpB,IAAIyhC,OAAO,GAAG,IAAI;UAClB,IAAI/9B,KAAK,GAAG,IAAI,CAACA,KAAK;UAEtB,OAAOg5D,SAAS,GAAIlH,QAAQ,GAAGyE,OAAO,CAACzoC,OAAO,CAAC,CAAC,GAAG,IAAIyoC,OAAO,CAAC,UAAUzoC,OAAO,EAAE;YAChFukC,aAAa,CAACvkC,OAAO,CAAC;UACxB,CAAC,CAAC,CAACsrC,IAAI,CAAC,YAAY;YAClBr7B,OAAO,CAAC/9B,KAAK,GAAGA,KAAK;YACrB,OAAOk5D,SAAS,CAAC78D,KAAK,CAAC0hC,OAAO,EAAEoV,IAAI,CAAC;UACvC,CAAC,CAAC,GAAI,CAAC2e,QAAQ,GAAGD,OAAO,CAACC,QAAQ,GAAGO,aAAa,EAAE,YAAY;YAC9Dt0B,OAAO,CAAC/9B,KAAK,GAAGA,KAAK;YACrBk5D,SAAS,CAAC78D,KAAK,CAAC0hC,OAAO,EAAEoV,IAAI,CAAC;UAChC,CAAC,CAAC;QACJ,CAAC;QAED54C,QAAQ,CAAC8+D,MAAM,GAAG,IAAI;QACtB9+D,QAAQ,CAAC4+D,OAAO,GAAGA,OAAO;MAC5B;MAEF,OAAO,CAAC5+D,QAAQ,EAAE0+D,SAAS,GAAE,IAAIH,QAAQ,CAAC,IAAI,EAAE94D,KAAK,EAAEzF,QAAQ,CAAC,GAAE,IAAI,CAAC;IACzE;IAEA,SAAS++D,YAAYA,CAACzG,IAAI,EAAE;MAC1B,IAAI,CAACH,OAAO,GAAG,CAAC,CAAC;MACjB,IAAI,CAACS,YAAY,GAAG,KAAK;MACzB,IAAI,CAACE,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,iBAAiB,GAAG,KAAK;MAC9BV,SAAS,CAAC/7D,IAAI,CAAC,IAAI,EAAEg8D,IAAI,CAAC;IAC5B;IAEAyG,YAAY,CAACC,aAAa,GAAGD,YAAY,CAAC,CAAC;;IAE3CA,YAAY,CAAC3iE,SAAS,CAAC6iE,QAAQ,GAAE,UAASjhE,MAAM,EAAE68D,MAAM,EAAEhE,OAAO,EAAC;MAChE,IAAG,OAAO74D,MAAM,KAAG,QAAQ,EAAC;QAC1B,MAAM2lC,SAAS,CAAC,2BAA2B,CAAC;MAC9C;MAEA,IAAI21B,OAAO,GAAE,IAAI;MAEjBzC,OAAO,GAAGmE,cAAc,CAACnE,OAAO,EAAE;QAChCr3D,EAAE,EAAE03D,WAAW;QACfx3D,GAAG,EAAEw3D,WAAW;QAChBgE,QAAQ,EAAEhE;MACZ,CAAC,EAAE;QACD13D,EAAE,EAAEq8D,eAAe;QACnBn8D,GAAG,EAAEm8D,eAAe;QACpBX,QAAQ,EAAEY;MACZ,CAAC,CAAC;MAEF,SAASoD,MAAMA,CAACrE,MAAM,EAAC;QACrB,IAAG,OAAOA,MAAM,KAAG,QAAQ,EAAC;UAC1B,MAAMl3B,SAAS,CAAC,0BAA0B,CAAC;QAC7C;QAEA,IAAIu3B,QAAQ,GAAErE,OAAO,CAACqE,QAAQ;QAC9B,IAAIl3C,KAAK,GAAE+2C,eAAe,CAACz+D,IAAI,CAACg9D,OAAO,EAAEt7D,MAAM,CAAC;QAChD,IAAIq8D,QAAQ;QAEZ,IAAGr2C,KAAK,KAAG,CAAC,CAAC,EAAC;UACZq2C,QAAQ,GAAE,IAAIV,cAAc,CAACL,OAAO,EAAEt7D,MAAM,EAAE64D,OAAO,CAAC;QACxD,CAAC,MAAK;UACJwD,QAAQ,GAAEf,OAAO,CAACU,UAAU,CAACh2C,KAAK,CAAC;QACrC;QAEA,IAAIk0C,IAAI,GAAEH,OAAO,CAAC8C,MAAM,CAAC;QACzB,IAAIpB,GAAG,GAAEvB,IAAI,CAACv6D,MAAM;QACpB,IAAI8H,KAAK;QACT,IAAI05D,eAAe,GAAE,OAAOjE,QAAQ,KAAG,UAAU;QAEjD,KAAI,IAAIz9D,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACg8D,GAAG,EAAEh8D,CAAC,EAAE,EAAC;UACtBgI,KAAK,GAAEyyD,IAAI,CAACz6D,CAAC,CAAC;UACd48D,QAAQ,CAACH,SAAS,CACdz0D,KAAK,EACLo1D,MAAM,CAACp1D,KAAK,CAAC,IAAIA,KAAK,EACtB05D,eAAe,GAAGjE,QAAQ,GAAGA,QAAQ,IAAIA,QAAQ,CAACz1D,KAAK,CAC3D,CAAC;QACH;MACF;MAEAyK,OAAO,CAAC2qD,MAAM,CAAC,GACXqE,MAAM,CAAC1F,QAAQ,CAACqB,MAAM,CAAC,CAAC,GACvB,OAAOA,MAAM,KAAG,QAAQ,GAAEqE,MAAM,CAAC1F,QAAQ,CAACqB,MAAM,CAACzrC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,GAAE8vC,MAAM,CAACrE,MAAM,CAAE;MAErF,OAAO,IAAI;IACb,CAAC;IAEDkE,YAAY,CAAC3iE,SAAS,CAACgjE,eAAe,GAAG,UAAUphE,MAAM,EAAEyH,KAAK,EAAE;MAChE,IAAIu3D,SAAS,GAAG,IAAI,CAAChD,UAAU;MAE/B,IAAG,CAACgD,SAAS,EAAC;QACZ,OAAO,KAAK;MACd;MAEA,IAAIv/D,CAAC,GAAGu/D,SAAS,CAACr/D,MAAM;MACxB,IAAI08D,QAAQ;MACZ,IAAIgF,OAAO,GAAE,KAAK;MAElB,IAAGrhE,MAAM,IAAI,OAAOA,MAAM,KAAG,QAAQ,EAAC;QACpC,MAAM2lC,SAAS,CAAC,4BAA4B,CAAC;MAC/C;MAEA,OAAOlmC,CAAC,EAAE,GAAG,CAAC,EAAE;QACd48D,QAAQ,GAAG2C,SAAS,CAACv/D,CAAC,CAAC;QACvB,IAAI,CAACO,MAAM,IAAIq8D,QAAQ,CAACnmC,OAAO,KAAKl2B,MAAM,EAAE;UAC1Cq8D,QAAQ,CAACO,WAAW,CAACn1D,KAAK,CAAC;UAC3B45D,OAAO,GAAE,IAAI;QACf;MACF;MAEA,OAAOA,OAAO;IAChB,CAAC;;IAED;IACA;IACA;IACA;IACA;IACA;;IAEAN,YAAY,CAAC3iE,SAAS,CAACm8D,SAAS,GAAG,GAAG;IAEtCwG,YAAY,CAAC3iE,SAAS,CAACkjE,eAAe,GAAG,UAASjiE,CAAC,EAAE;MACnD,IAAIA,CAAC,KAAK65D,WAAW,EAAE;QACrB,IAAI,CAACuB,aAAa,GAAGp7D,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC+6D,KAAK,EAAE;UAAE,IAAI,CAACA,KAAK,GAAG,CAAC,CAAC;QAAE;QACpC,IAAI,CAACA,KAAK,CAACI,YAAY,GAAGn7D,CAAC;MAC7B;IACF,CAAC;IAED0hE,YAAY,CAAC3iE,SAAS,CAACmjE,eAAe,GAAG,YAAW;MAClD,OAAO,IAAI,CAAC9G,aAAa;IAC3B,CAAC;IAEDsG,YAAY,CAAC3iE,SAAS,CAACqJ,KAAK,GAAG,EAAE;IAEjCs5D,YAAY,CAAC3iE,SAAS,CAACkE,IAAI,GAAG,UAASmF,KAAK,EAAE+5D,EAAE,EAAE3I,OAAO,EAAE;MACzD,OAAO,IAAI,CAAC4I,KAAK,CAACh6D,KAAK,EAAE+5D,EAAE,EAAE,KAAK,EAAE3I,OAAO,CAAC;IAC9C,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACsjE,mBAAmB,GAAG,UAASj6D,KAAK,EAAE+5D,EAAE,EAAE3I,OAAO,EAAE;MACxE,OAAO,IAAI,CAAC4I,KAAK,CAACh6D,KAAK,EAAE+5D,EAAE,EAAE,IAAI,EAAE3I,OAAO,CAAC;IAC7C,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACqjE,KAAK,GAAG,UAASh6D,KAAK,EAAE+5D,EAAE,EAAEj3D,OAAO,EAAEsuD,OAAO,EAAE;MACnE,OAAO,IAAI,CAAC8I,KAAK,CAACl6D,KAAK,EAAE,CAAC,EAAE+5D,EAAE,EAAEj3D,OAAO,EAAEsuD,OAAO,CAAC;IACnD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACwjE,IAAI,GAAG,UAASn6D,KAAK,EAAExB,GAAG,EAAEu7D,EAAE,EAAE3I,OAAO,EAAE;MAC9D,OAAO,IAAI,CAAC8I,KAAK,CAACl6D,KAAK,EAAExB,GAAG,EAAEu7D,EAAE,EAAE,KAAK,EAAE3I,OAAO,CAAC;IACnD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACyjE,WAAW,GAAG,UAASp6D,KAAK,EAAExB,GAAG,EAAEu7D,EAAE,EAAE3I,OAAO,EAAE;MACrE,OAAO,IAAI,CAAC8I,KAAK,CAACl6D,KAAK,EAAExB,GAAG,EAAEu7D,EAAE,EAAE,IAAI,EAAE3I,OAAO,CAAC;IAClD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACujE,KAAK,GAAG,UAASl6D,KAAK,EAAExB,GAAG,EAAEu7D,EAAE,EAAEj3D,OAAO,EAAEsuD,OAAO,EAAE;MACxE,IAAI96D,IAAI,GAAG,IAAI;MAEf,IAAI,OAAOyjE,EAAE,KAAK,UAAU,EAAE;QAC5B,MAAM,IAAIz0B,KAAK,CAAC,yCAAyC,CAAC;MAC5D;MAEA,SAAS/qC,QAAQA,CAAA,EAAG;QAClB,IAAI,EAAEiE,GAAG,KAAK,CAAC,EAAE;UACflI,IAAI,CAAC2D,GAAG,CAAC+F,KAAK,EAAEzF,QAAQ,CAAC;QAC3B;QACA,OAAOw/D,EAAE,CAAC19D,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;MAClC;MAEA/B,QAAQ,CAAC4+D,OAAO,GAAGY,EAAE;MAErB,OAAO,IAAI,CAACzF,GAAG,CAACt0D,KAAK,EAAEzF,QAAQ,EAAEuI,OAAO,EAAEsuD,OAAO,CAAC;IACpD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACm+D,IAAI,GAAG,YAAW;MACvC,IAAI12C,WAAW,GAAG9hB,SAAS;MAE3B,IAAI,CAAC,IAAI,CAACo2D,OAAO,IAAI,CAAC,IAAI,CAAC2H,IAAI,EAAE;QAC/B,OAAO,KAAK;MACd;MAEA,IAAI,CAAC3H,OAAO,IAAIt2D,IAAI,CAACvF,IAAI,CAAC,IAAI,CAAC;MAE/B,IAAIuB,IAAI,GAAGkE,SAAS,CAAC,CAAC,CAAC;QAAEs7D,EAAE;QAAE3E,QAAQ,GAAE,IAAI,CAACA,QAAQ;MACpD,IAAI9f,IAAI,EAACl7C,CAAC,EAACD,CAAC,EAAC8xB,CAAC,EAAEwwC,cAAc;MAE9B,IAAIliE,IAAI,KAAK,aAAa,IAAI,CAAC,IAAI,CAAC+6D,YAAY,EAAE;QAChD,IAAI,CAAC,IAAI,CAACT,OAAO,CAACQ,WAAW,EAAE;UAC7B,OAAO,KAAK;QACd;MACF;MAEA,IAAID,QAAQ,EAAE;QACZ2E,EAAE,GAAEx/D,IAAI;QACR,IAAGA,IAAI,KAAG,aAAa,IAAIA,IAAI,KAAG,gBAAgB,EAAC;UACjD,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;YAC5BH,CAAC,GAAGG,IAAI,CAACF,MAAM;YACf,IAAI65D,gBAAgB,EAAE;cACpB,KAAK/5D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;gBACtB,IAAI,OAAOI,IAAI,CAACJ,CAAC,CAAC,KAAK,QAAQ,EAAE;kBAC/BsiE,cAAc,GAAG,IAAI;kBACrB;gBACF;cACF;YACF;YACA,IAAI,CAACA,cAAc,EAAE;cACnBliE,IAAI,GAAGA,IAAI,CAACoqC,IAAI,CAAC,IAAI,CAACswB,SAAS,CAAC;YAClC;UACF;QACF;MACF;MAEA,IAAIpiC,EAAE,GAAGp0B,SAAS,CAACpE,MAAM;MACzB,IAAI28D,OAAO;MAEX,IAAI,IAAI,CAACwF,IAAI,IAAI,IAAI,CAACA,IAAI,CAACniE,MAAM,EAAE;QACjC28D,OAAO,GAAG,IAAI,CAACwF,IAAI,CAAC5+D,KAAK,CAAC,CAAC;QAE3B,KAAKzD,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG48D,OAAO,CAAC38D,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UAC1C,IAAI,CAACgI,KAAK,GAAG5H,IAAI;UACjB,QAAQs4B,EAAE;YACV,KAAK,CAAC;cACJmkC,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,CAAC;cAC3B;YACF,KAAK,CAAC;cACJy8D,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEgmB,WAAW,CAAC,CAAC,CAAC,CAAC;cAC3C;YACF,KAAK,CAAC;cACJy2C,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEgmB,WAAW,CAAC,CAAC,CAAC,EAAEA,WAAW,CAAC,CAAC,CAAC,CAAC;cAC3D;YACF;cACEy2C,OAAO,CAAC78D,CAAC,CAAC,CAACqE,KAAK,CAAC,IAAI,EAAE+hB,WAAW,CAAC;UACrC;QACF;MACF;MAEA,IAAI60C,QAAQ,EAAE;QACZ4B,OAAO,GAAG,EAAE;QACZ2C,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAEg+D,OAAO,EAAE+C,EAAE,EAAE,IAAI,CAACpE,YAAY,EAAE,CAAC,EAAEv7D,CAAC,CAAC;MACrE,CAAC,MAAM;QACL48D,OAAO,GAAG,IAAI,CAACnC,OAAO,CAACt6D,IAAI,CAAC;QAC5B,IAAI,OAAOy8D,OAAO,KAAK,UAAU,EAAE;UACjC,IAAI,CAAC70D,KAAK,GAAG5H,IAAI;UACjB,QAAQs4B,EAAE;YACV,KAAK,CAAC;cACJmkC,OAAO,CAACh+D,IAAI,CAAC,IAAI,CAAC;cAClB;YACF,KAAK,CAAC;cACJg+D,OAAO,CAACh+D,IAAI,CAAC,IAAI,EAAEyF,SAAS,CAAC,CAAC,CAAC,CAAC;cAChC;YACF,KAAK,CAAC;cACJu4D,OAAO,CAACh+D,IAAI,CAAC,IAAI,EAAEyF,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;cAC9C;YACF;cACE62C,IAAI,GAAG,IAAI3oC,KAAK,CAACkmB,EAAE,GAAG,CAAC,CAAC;cACxB,KAAK5G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4G,EAAE,EAAE5G,CAAC,EAAE,EAAE;gBAAEqpB,IAAI,CAACrpB,CAAC,GAAG,CAAC,CAAC,GAAG1L,WAAW,CAAC0L,CAAC,CAAC;cAAE;cACzD+qC,OAAO,CAACx4D,KAAK,CAAC,IAAI,EAAE82C,IAAI,CAAC;UAC3B;UACA,OAAO,IAAI;QACb,CAAC,MAAM,IAAI0hB,OAAO,EAAE;UAClB;UACA;UACAA,OAAO,GAAGA,OAAO,CAACp5D,KAAK,CAAC,CAAC;QAC3B;MACF;MAEA,IAAIo5D,OAAO,IAAIA,OAAO,CAAC38D,MAAM,EAAE;QAC7B,IAAIw4B,EAAE,GAAG,CAAC,EAAE;UACVyiB,IAAI,GAAG,IAAI3oC,KAAK,CAACkmB,EAAE,GAAG,CAAC,CAAC;UACxB,KAAK5G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4G,EAAE,EAAE5G,CAAC,EAAE,EAAE;YAAEqpB,IAAI,CAACrpB,CAAC,GAAG,CAAC,CAAC,GAAG1L,WAAW,CAAC0L,CAAC,CAAC;UAAE;QAC3D;QACA,KAAK9xB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG48D,OAAO,CAAC38D,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UAC1C,IAAI,CAACgI,KAAK,GAAG5H,IAAI;UACjB,QAAQs4B,EAAE;YACV,KAAK,CAAC;cACJmkC,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,CAAC;cACrB;YACF,KAAK,CAAC;cACJg+D,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEunB,WAAW,CAAC,CAAC,CAAC,CAAC;cACrC;YACF,KAAK,CAAC;cACJy2C,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEunB,WAAW,CAAC,CAAC,CAAC,EAAEA,WAAW,CAAC,CAAC,CAAC,CAAC;cACrD;YACF;cACEy2C,OAAO,CAAC78D,CAAC,CAAC,CAACqE,KAAK,CAAC,IAAI,EAAE82C,IAAI,CAAC;UAC9B;QACF;QACA,OAAO,IAAI;MACb,CAAC,MAAM,IAAI,CAAC,IAAI,CAACogB,YAAY,IAAI,CAAC,IAAI,CAAC8G,IAAI,IAAIjiE,IAAI,KAAK,OAAO,EAAE;QAC/D,IAAIkE,SAAS,CAAC,CAAC,CAAC,YAAYgpC,KAAK,EAAE;UACjC,MAAMhpC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,MAAM;UACL,MAAM,IAAIgpC,KAAK,CAAC,sCAAsC,CAAC;QACzD;MACF;MAEA,OAAO,CAAC,CAAC,IAAI,CAAC+0B,IAAI;IACpB,CAAC;IAEDf,YAAY,CAAC3iE,SAAS,CAAC4jE,SAAS,GAAG,YAAW;MAC5C,IAAIn8C,WAAW,GAAG9hB,SAAS;MAE3B,IAAI,CAAC,IAAI,CAACo2D,OAAO,IAAI,CAAC,IAAI,CAAC2H,IAAI,EAAE;QAC/B,OAAO,KAAK;MACd;MAEA,IAAI,CAAC3H,OAAO,IAAIt2D,IAAI,CAACvF,IAAI,CAAC,IAAI,CAAC;MAE/B,IAAIuB,IAAI,GAAGkE,SAAS,CAAC,CAAC,CAAC;QAAE22D,QAAQ,GAAE,IAAI,CAACA,QAAQ;QAAE2E,EAAE;QAAE0C,cAAc;MACpE,IAAInnB,IAAI,EAACl7C,CAAC,EAACD,CAAC,EAAC8xB,CAAC;MAEd,IAAI1xB,IAAI,KAAK,aAAa,IAAI,CAAC,IAAI,CAAC+6D,YAAY,EAAE;QAC9C,IAAI,CAAC,IAAI,CAACT,OAAO,CAACQ,WAAW,EAAE;UAAE,OAAOqD,OAAO,CAACzoC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC;QAAE;MACtE;MAEA,IAAImlC,QAAQ,EAAE;QACZ2E,EAAE,GAAEx/D,IAAI;QACR,IAAGA,IAAI,KAAG,aAAa,IAAIA,IAAI,KAAG,gBAAgB,EAAC;UACjD,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;YAC5BH,CAAC,GAAGG,IAAI,CAACF,MAAM;YACf,IAAI65D,gBAAgB,EAAE;cACpB,KAAK/5D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;gBACtB,IAAI,OAAOI,IAAI,CAACJ,CAAC,CAAC,KAAK,QAAQ,EAAE;kBAC/BsiE,cAAc,GAAG,IAAI;kBACrB;gBACF;cACF;YACF;YACA,IAAI,CAACA,cAAc,EAAE;cACnBliE,IAAI,GAAGA,IAAI,CAACoqC,IAAI,CAAC,IAAI,CAACswB,SAAS,CAAC;YAClC;UACF;QACF;MACF;MAEA,IAAI0H,QAAQ,GAAE,EAAE;MAEhB,IAAI9pC,EAAE,GAAGp0B,SAAS,CAACpE,MAAM;MACzB,IAAI28D,OAAO;MAEX,IAAI,IAAI,CAACwF,IAAI,EAAE;QACb,KAAKriE,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,CAACoiE,IAAI,CAACniE,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UAC5C,IAAI,CAACgI,KAAK,GAAG5H,IAAI;UACjB,QAAQs4B,EAAE;YACV,KAAK,CAAC;cACJ8pC,QAAQ,CAAC7/D,IAAI,CAAC,IAAI,CAAC0/D,IAAI,CAACriE,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,CAAC,CAAC;cAC5C;YACF,KAAK,CAAC;cACJoiE,QAAQ,CAAC7/D,IAAI,CAAC,IAAI,CAAC0/D,IAAI,CAACriE,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEgmB,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;cAC5D;YACF,KAAK,CAAC;cACJo8C,QAAQ,CAAC7/D,IAAI,CAAC,IAAI,CAAC0/D,IAAI,CAACriE,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEgmB,WAAW,CAAC,CAAC,CAAC,EAAEA,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;cAC5E;YACF;cACEo8C,QAAQ,CAAC7/D,IAAI,CAAC,IAAI,CAAC0/D,IAAI,CAACriE,CAAC,CAAC,CAACqE,KAAK,CAAC,IAAI,EAAE+hB,WAAW,CAAC,CAAC;UACtD;QACF;MACF;MAEA,IAAI60C,QAAQ,EAAE;QACZ4B,OAAO,GAAG,EAAE;QACZ2C,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAEg+D,OAAO,EAAE+C,EAAE,EAAE,IAAI,CAACpE,YAAY,EAAE,CAAC,CAAC;MAClE,CAAC,MAAM;QACLqB,OAAO,GAAG,IAAI,CAACnC,OAAO,CAACt6D,IAAI,CAAC;MAC9B;MAEA,IAAI,OAAOy8D,OAAO,KAAK,UAAU,EAAE;QACjC,IAAI,CAAC70D,KAAK,GAAG5H,IAAI;QACjB,QAAQs4B,EAAE;UACV,KAAK,CAAC;YACJ8pC,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAACh+D,IAAI,CAAC,IAAI,CAAC,CAAC;YACjC;UACF,KAAK,CAAC;YACJ2jE,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAACh+D,IAAI,CAAC,IAAI,EAAEyF,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/C;UACF,KAAK,CAAC;YACJk+D,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAACh+D,IAAI,CAAC,IAAI,EAAEyF,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D;UACF;YACE62C,IAAI,GAAG,IAAI3oC,KAAK,CAACkmB,EAAE,GAAG,CAAC,CAAC;YACxB,KAAK5G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4G,EAAE,EAAE5G,CAAC,EAAE,EAAE;cAAEqpB,IAAI,CAACrpB,CAAC,GAAG,CAAC,CAAC,GAAG1L,WAAW,CAAC0L,CAAC,CAAC;YAAE;YACzD0wC,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAACx4D,KAAK,CAAC,IAAI,EAAE82C,IAAI,CAAC,CAAC;QAC1C;MACF,CAAC,MAAM,IAAI0hB,OAAO,IAAIA,OAAO,CAAC38D,MAAM,EAAE;QACpC28D,OAAO,GAAGA,OAAO,CAACp5D,KAAK,CAAC,CAAC;QACzB,IAAIi1B,EAAE,GAAG,CAAC,EAAE;UACVyiB,IAAI,GAAG,IAAI3oC,KAAK,CAACkmB,EAAE,GAAG,CAAC,CAAC;UACxB,KAAK5G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4G,EAAE,EAAE5G,CAAC,EAAE,EAAE;YAAEqpB,IAAI,CAACrpB,CAAC,GAAG,CAAC,CAAC,GAAG1L,WAAW,CAAC0L,CAAC,CAAC;UAAE;QAC3D;QACA,KAAK9xB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG48D,OAAO,CAAC38D,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UAC1C,IAAI,CAACgI,KAAK,GAAG5H,IAAI;UACjB,QAAQs4B,EAAE;YACV,KAAK,CAAC;cACJ8pC,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;cACpC;YACF,KAAK,CAAC;cACJ2jE,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEunB,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;cACpD;YACF,KAAK,CAAC;cACJo8C,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAAC78D,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,EAAEunB,WAAW,CAAC,CAAC,CAAC,EAAEA,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;cACpE;YACF;cACEo8C,QAAQ,CAAC7/D,IAAI,CAACk6D,OAAO,CAAC78D,CAAC,CAAC,CAACqE,KAAK,CAAC,IAAI,EAAE82C,IAAI,CAAC,CAAC;UAC7C;QACF;MACF,CAAC,MAAM,IAAI,CAAC,IAAI,CAACogB,YAAY,IAAI,CAAC,IAAI,CAAC8G,IAAI,IAAIjiE,IAAI,KAAK,OAAO,EAAE;QAC/D,IAAIkE,SAAS,CAAC,CAAC,CAAC,YAAYgpC,KAAK,EAAE;UACjC,OAAOixB,OAAO,CAACV,MAAM,CAACv5D,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,CAAC,MAAM;UACL,OAAOi6D,OAAO,CAACV,MAAM,CAAC,sCAAsC,CAAC;QAC/D;MACF;MAEA,OAAOU,OAAO,CAACkE,GAAG,CAACD,QAAQ,CAAC;IAC9B,CAAC;IAEDlB,YAAY,CAAC3iE,SAAS,CAACoD,EAAE,GAAG,UAAS3B,IAAI,EAAEmC,QAAQ,EAAE62D,OAAO,EAAE;MAC5D,OAAO,IAAI,CAACkD,GAAG,CAACl8D,IAAI,EAAEmC,QAAQ,EAAE,KAAK,EAAE62D,OAAO,CAAC;IACjD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAAC+jE,eAAe,GAAG,UAAStiE,IAAI,EAAEmC,QAAQ,EAAE62D,OAAO,EAAE;MACzE,OAAO,IAAI,CAACkD,GAAG,CAACl8D,IAAI,EAAEmC,QAAQ,EAAE,IAAI,EAAE62D,OAAO,CAAC;IAChD,CAAC;IAEDkI,YAAY,CAAC3iE,SAAS,CAACgkE,KAAK,GAAG,UAASZ,EAAE,EAAE;MAC1C,OAAO,IAAI,CAACa,MAAM,CAACb,EAAE,EAAE,KAAK,CAAC;IAC/B,CAAC;IAEDT,YAAY,CAAC3iE,SAAS,CAACkkE,UAAU,GAAG,UAASd,EAAE,EAAE;MAC/C,OAAO,IAAI,CAACa,MAAM,CAACb,EAAE,EAAE,IAAI,CAAC;IAC9B,CAAC;IAEDT,YAAY,CAAC3iE,SAAS,CAAC09D,WAAW,GAAGiF,YAAY,CAAC3iE,SAAS,CAACoD,EAAE;IAE9Du/D,YAAY,CAAC3iE,SAAS,CAACikE,MAAM,GAAG,UAASb,EAAE,EAAEj3D,OAAO,EAAC;MACnD,IAAI,OAAOi3D,EAAE,KAAK,UAAU,EAAE;QAC5B,MAAM,IAAIz0B,KAAK,CAAC,0CAA0C,CAAC;MAC7D;MAEA,IAAI,CAAC,IAAI,CAAC+0B,IAAI,EAAE;QACd,IAAI,CAACA,IAAI,GAAG,EAAE;MAChB;;MAEA;MACA,IAAGv3D,OAAO,EAAC;QACT,IAAI,CAACu3D,IAAI,CAACn6D,OAAO,CAAC65D,EAAE,CAAC;MACvB,CAAC,MAAK;QACJ,IAAI,CAACM,IAAI,CAAC1/D,IAAI,CAACo/D,EAAE,CAAC;MACpB;MAEA,OAAO,IAAI;IACb,CAAC;IAEDT,YAAY,CAAC3iE,SAAS,CAAC29D,GAAG,GAAG,UAASl8D,IAAI,EAAEmC,QAAQ,EAAEuI,OAAO,EAAEsuD,OAAO,EAAE;MACtE,IAAI,OAAOh5D,IAAI,KAAK,UAAU,EAAE;QAC9B,IAAI,CAACwiE,MAAM,CAACxiE,IAAI,EAAEmC,QAAQ,CAAC;QAC3B,OAAO,IAAI;MACb;MAEA,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;QAClC,MAAM,IAAI+qC,KAAK,CAAC,uCAAuC,CAAC;MAC1D;MACA,IAAI,CAACotB,OAAO,IAAIt2D,IAAI,CAACvF,IAAI,CAAC,IAAI,CAAC;MAE/B,IAAIikE,WAAW,GAAE,IAAI;QAAEtM,IAAI;MAE3B,IAAI4C,OAAO,KAAKK,WAAW,EAAE;QAC3BjD,IAAI,GAAGuK,aAAa,CAACliE,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEmC,QAAQ,EAAE62D,OAAO,CAAC;QACxD72D,QAAQ,GAAGi0D,IAAI,CAAC,CAAC,CAAC;QAClBsM,WAAW,GAAGtM,IAAI,CAAC,CAAC,CAAC;MACvB;;MAEA;MACA;MACA,IAAI,IAAI,CAAC2E,YAAY,EAAE;QACrB,IAAI,CAAC2B,IAAI,CAAC,aAAa,EAAE18D,IAAI,EAAEmC,QAAQ,CAAC;MAC1C;MAEA,IAAI,IAAI,CAAC04D,QAAQ,EAAE;QACjBqF,gBAAgB,CAACzhE,IAAI,CAAC,IAAI,EAAEuB,IAAI,EAAEmC,QAAQ,EAAEuI,OAAO,CAAC;QACpD,OAAOg4D,WAAW;MACpB;MAEA,IAAI,CAAC,IAAI,CAACpI,OAAO,CAACt6D,IAAI,CAAC,EAAE;QACvB;QACA,IAAI,CAACs6D,OAAO,CAACt6D,IAAI,CAAC,GAAGmC,QAAQ;MAC/B,CAAC,MAAM;QACL,IAAI,OAAO,IAAI,CAACm4D,OAAO,CAACt6D,IAAI,CAAC,KAAK,UAAU,EAAE;UAC5C;UACA,IAAI,CAACs6D,OAAO,CAACt6D,IAAI,CAAC,GAAG,CAAC,IAAI,CAACs6D,OAAO,CAACt6D,IAAI,CAAC,CAAC;QAC3C;;QAEA;QACA,IAAG0K,OAAO,EAAC;UACT,IAAI,CAAC4vD,OAAO,CAACt6D,IAAI,CAAC,CAAC8H,OAAO,CAAC3F,QAAQ,CAAC;QACtC,CAAC,MAAK;UACJ,IAAI,CAACm4D,OAAO,CAACt6D,IAAI,CAAC,CAACuC,IAAI,CAACJ,QAAQ,CAAC;QACnC;;QAEA;QACA,IACE,CAAC,IAAI,CAACm4D,OAAO,CAACt6D,IAAI,CAAC,CAACmgE,MAAM,IAC1B,IAAI,CAACvF,aAAa,GAAG,CAAC,IACtB,IAAI,CAACN,OAAO,CAACt6D,IAAI,CAAC,CAACF,MAAM,GAAG,IAAI,CAAC86D,aAAa,EAC9C;UACA,IAAI,CAACN,OAAO,CAACt6D,IAAI,CAAC,CAACmgE,MAAM,GAAG,IAAI;UAChC9E,qBAAqB,CAAC58D,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC67D,OAAO,CAACt6D,IAAI,CAAC,CAACF,MAAM,EAAEE,IAAI,CAAC;QACnE;MACF;MAEA,OAAO0iE,WAAW;IACpB,CAAC;IAEDxB,YAAY,CAAC3iE,SAAS,CAACsD,GAAG,GAAG,UAAS7B,IAAI,EAAEmC,QAAQ,EAAE;MACpD,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;QAClC,MAAM,IAAI+qC,KAAK,CAAC,iDAAiD,CAAC;MACpE;MAEA,IAAImyB,QAAQ;QAACsD,KAAK,GAAC,EAAE;MAErB,IAAG,IAAI,CAAC9H,QAAQ,EAAE;QAChB,IAAI2E,EAAE,GAAG,OAAOx/D,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACuxB,KAAK,CAAC,IAAI,CAACmpC,SAAS,CAAC,GAAG16D,IAAI,CAACqD,KAAK,CAAC,CAAC;QAC7Es/D,KAAK,GAAGvD,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE+gE,EAAE,EAAE,IAAI,CAACpE,YAAY,EAAE,CAAC,CAAC;QACrE,IAAG,CAACuH,KAAK,EAAE;UAAE,OAAO,IAAI;QAAE;MAC5B,CAAC,MAAM;QACL;QACA,IAAI,CAAC,IAAI,CAACrI,OAAO,CAACt6D,IAAI,CAAC,EAAE;UAAE,OAAO,IAAI;QAAE;QACxCq/D,QAAQ,GAAG,IAAI,CAAC/E,OAAO,CAACt6D,IAAI,CAAC;QAC7B2iE,KAAK,CAACpgE,IAAI,CAAC;UAAChB,UAAU,EAAC89D;QAAQ,CAAC,CAAC;MACnC;MAEA,KAAK,IAAIuD,KAAK,GAAC,CAAC,EAAEA,KAAK,GAACD,KAAK,CAAC7iE,MAAM,EAAE8iE,KAAK,EAAE,EAAE;QAC7C,IAAIC,IAAI,GAAGF,KAAK,CAACC,KAAK,CAAC;QACvBvD,QAAQ,GAAGwD,IAAI,CAACthE,UAAU;QAC1B,IAAI8Q,OAAO,CAACgtD,QAAQ,CAAC,EAAE;UAErB,IAAIprC,QAAQ,GAAG,CAAC,CAAC;UAEjB,KAAK,IAAIr0B,CAAC,GAAG,CAAC,EAAEE,MAAM,GAAGu/D,QAAQ,CAACv/D,MAAM,EAAEF,CAAC,GAAGE,MAAM,EAAEF,CAAC,EAAE,EAAE;YACzD,IAAIy/D,QAAQ,CAACz/D,CAAC,CAAC,KAAKuC,QAAQ,IACzBk9D,QAAQ,CAACz/D,CAAC,CAAC,CAACuC,QAAQ,IAAIk9D,QAAQ,CAACz/D,CAAC,CAAC,CAACuC,QAAQ,KAAKA,QAAS,IAC1Dk9D,QAAQ,CAACz/D,CAAC,CAAC,CAACmhE,OAAO,IAAI1B,QAAQ,CAACz/D,CAAC,CAAC,CAACmhE,OAAO,KAAK5+D,QAAS,EAAE;cAC3D8xB,QAAQ,GAAGr0B,CAAC;cACZ;YACF;UACF;UAEA,IAAIq0B,QAAQ,GAAG,CAAC,EAAE;YAChB;UACF;UAEA,IAAG,IAAI,CAAC4mC,QAAQ,EAAE;YAChBgI,IAAI,CAACthE,UAAU,CAACsB,MAAM,CAACoxB,QAAQ,EAAE,CAAC,CAAC;UACrC,CAAC,MACI;YACH,IAAI,CAACqmC,OAAO,CAACt6D,IAAI,CAAC,CAAC6C,MAAM,CAACoxB,QAAQ,EAAE,CAAC,CAAC;UACxC;UAEA,IAAIorC,QAAQ,CAACv/D,MAAM,KAAK,CAAC,EAAE;YACzB,IAAG,IAAI,CAAC+6D,QAAQ,EAAE;cAChB,OAAOgI,IAAI,CAACthE,UAAU;YACxB,CAAC,MACI;cACH,OAAO,IAAI,CAAC+4D,OAAO,CAACt6D,IAAI,CAAC;YAC3B;UACF;UACA,IAAI,IAAI,CAACi7D,eAAe,EACtB;YAAE,IAAI,CAACyB,IAAI,CAAC,gBAAgB,EAAE18D,IAAI,EAAEmC,QAAQ,CAAC;UAAE;UAEjD,OAAO,IAAI;QACb,CAAC,MACI,IAAIk9D,QAAQ,KAAKl9D,QAAQ,IAC3Bk9D,QAAQ,CAACl9D,QAAQ,IAAIk9D,QAAQ,CAACl9D,QAAQ,KAAKA,QAAS,IACpDk9D,QAAQ,CAAC0B,OAAO,IAAI1B,QAAQ,CAAC0B,OAAO,KAAK5+D,QAAS,EAAE;UACrD,IAAG,IAAI,CAAC04D,QAAQ,EAAE;YAChB,OAAOgI,IAAI,CAACthE,UAAU;UACxB,CAAC,MACI;YACH,OAAO,IAAI,CAAC+4D,OAAO,CAACt6D,IAAI,CAAC;UAC3B;UACA,IAAI,IAAI,CAACi7D,eAAe,EACtB;YAAE,IAAI,CAACyB,IAAI,CAAC,gBAAgB,EAAE18D,IAAI,EAAEmC,QAAQ,CAAC;UAAE;QACnD;MACF;MAEA,IAAI,CAACi5D,YAAY,IAAIoF,yBAAyB,CAAC,IAAI,CAACpF,YAAY,CAAC;MAEjE,OAAO,IAAI;IACb,CAAC;IAED8F,YAAY,CAAC3iE,SAAS,CAACukE,MAAM,GAAG,UAASnB,EAAE,EAAE;MAC3C,IAAI/hE,CAAC,GAAG,CAAC;QAAEC,CAAC,GAAG,CAAC;QAAEkjE,GAAG;MACrB,IAAIpB,EAAE,IAAI,IAAI,CAACM,IAAI,IAAI,IAAI,CAACA,IAAI,CAACniE,MAAM,GAAG,CAAC,EAAE;QAC3CijE,GAAG,GAAG,IAAI,CAACd,IAAI;QACf,KAAIriE,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGkjE,GAAG,CAACjjE,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UACrC,IAAG+hE,EAAE,KAAKoB,GAAG,CAACnjE,CAAC,CAAC,EAAE;YAChBmjE,GAAG,CAAClgE,MAAM,CAACjD,CAAC,EAAE,CAAC,CAAC;YAChB,IAAI,IAAI,CAACq7D,eAAe,EACtB;cAAE,IAAI,CAACyB,IAAI,CAAC,mBAAmB,EAAEiF,EAAE,CAAC;YAAE;YACxC,OAAO,IAAI;UACb;QACF;MACF,CAAC,MAAM;QACLoB,GAAG,GAAG,IAAI,CAACd,IAAI;QACf,IAAI,IAAI,CAAChH,eAAe,EAAE;UACxB,KAAIr7D,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGkjE,GAAG,CAACjjE,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EACnC;YAAE,IAAI,CAAC88D,IAAI,CAAC,mBAAmB,EAAEqG,GAAG,CAACnjE,CAAC,CAAC,CAAC;UAAE;QAC9C;QACA,IAAI,CAACqiE,IAAI,GAAG,EAAE;MAChB;MACA,OAAO,IAAI;IACb,CAAC;IAEDf,YAAY,CAAC3iE,SAAS,CAACy8D,cAAc,GAAGkG,YAAY,CAAC3iE,SAAS,CAACsD,GAAG;IAElEq/D,YAAY,CAAC3iE,SAAS,CAACykE,kBAAkB,GAAG,UAAUhjE,IAAI,EAAE;MAC1D,IAAIA,IAAI,KAAKq5D,WAAW,EAAE;QACxB,CAAC,IAAI,CAACiB,OAAO,IAAIt2D,IAAI,CAACvF,IAAI,CAAC,IAAI,CAAC;QAChC,OAAO,IAAI;MACb;MAEA,IAAI,IAAI,CAACo8D,QAAQ,EAAE;QACjB,IAAI8H,KAAK,GAAGvD,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAEuB,IAAI,EAAE,IAAI,CAACo7D,YAAY,EAAE,CAAC,CAAC;UAAEyH,IAAI;UAAEjjE,CAAC;QACpF,IAAI,CAAC+iE,KAAK,EAAE;UAAE,OAAO,IAAI;QAAE;QAC3B,KAAK/iE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+iE,KAAK,CAAC7iE,MAAM,EAAEF,CAAC,EAAE,EAAE;UACjCijE,IAAI,GAAGF,KAAK,CAAC/iE,CAAC,CAAC;UACfijE,IAAI,CAACthE,UAAU,GAAG,IAAI;QACxB;QACA,IAAI,CAAC65D,YAAY,IAAIoF,yBAAyB,CAAC,IAAI,CAACpF,YAAY,CAAC;MACnE,CAAC,MAAM,IAAI,IAAI,CAACd,OAAO,EAAE;QACvB,IAAI,CAACA,OAAO,CAACt6D,IAAI,CAAC,GAAG,IAAI;MAC3B;MACA,OAAO,IAAI;IACb,CAAC;IAEDkhE,YAAY,CAAC3iE,SAAS,CAAC8D,SAAS,GAAG,UAAUrC,IAAI,EAAE;MACjD,IAAIs6D,OAAO,GAAG,IAAI,CAACA,OAAO;MAC1B,IAAID,IAAI,EAAEh4D,SAAS,EAAE4gE,YAAY;MACjC,IAAIrjE,CAAC;MACL,IAAIw7D,YAAY;MAEhB,IAAIp7D,IAAI,KAAKq5D,WAAW,EAAE;QACxB,IAAI,IAAI,CAACwB,QAAQ,EAAE;UACjB,MAAM3tB,KAAK,CAAC,0CAA0C,CAAC;QACzD;QAEA,IAAI,CAACotB,OAAO,EAAE;UACZ,OAAO,EAAE;QACX;QAEAD,IAAI,GAAGH,OAAO,CAACI,OAAO,CAAC;QACvB16D,CAAC,GAAGy6D,IAAI,CAACv6D,MAAM;QACfmjE,YAAY,GAAG,EAAE;QACjB,OAAOrjE,CAAC,EAAE,GAAG,CAAC,EAAE;UACdyC,SAAS,GAAGi4D,OAAO,CAACD,IAAI,CAACz6D,CAAC,CAAC,CAAC;UAC5B,IAAI,OAAOyC,SAAS,KAAK,UAAU,EAAE;YACnC4gE,YAAY,CAAC1gE,IAAI,CAACF,SAAS,CAAC;UAC9B,CAAC,MAAM;YACL4gE,YAAY,CAAC1gE,IAAI,CAAC0B,KAAK,CAACg/D,YAAY,EAAE5gE,SAAS,CAAC;UAClD;QACF;QACA,OAAO4gE,YAAY;MACrB,CAAC,MAAM;QACL,IAAI,IAAI,CAACpI,QAAQ,EAAE;UACjBO,YAAY,GAAE,IAAI,CAACA,YAAY;UAC/B,IAAG,CAACA,YAAY,EAAE;YAAE,OAAO,EAAE;UAAE;UAC/B,IAAIiE,QAAQ,GAAG,EAAE;UACjB,IAAIG,EAAE,GAAG,OAAOx/D,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACuxB,KAAK,CAAC,IAAI,CAACmpC,SAAS,CAAC,GAAG16D,IAAI,CAACqD,KAAK,CAAC,CAAC;UAC7E+7D,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAE4gE,QAAQ,EAAEG,EAAE,EAAEpE,YAAY,EAAE,CAAC,CAAC;UAC5D,OAAOiE,QAAQ;QACjB;QAEA,IAAI,CAAC/E,OAAO,EAAE;UACZ,OAAO,EAAE;QACX;QAEAj4D,SAAS,GAAGi4D,OAAO,CAACt6D,IAAI,CAAC;QAEzB,IAAI,CAACqC,SAAS,EAAE;UACd,OAAO,EAAE;QACX;QACA,OAAO,OAAOA,SAAS,KAAK,UAAU,GAAG,CAACA,SAAS,CAAC,GAAGA,SAAS;MAClE;IACF,CAAC;IAED6+D,YAAY,CAAC3iE,SAAS,CAAC2kE,UAAU,GAAG,UAASC,SAAS,EAAC;MACrD,IAAI7I,OAAO,GAAE,IAAI,CAACA,OAAO;MACzB,OAAO,IAAI,CAACO,QAAQ,GAAEuF,iBAAiB,CAAC3hE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC28D,YAAY,EAAE,EAAE,EAAE,IAAI,EAAE+H,SAAS,CAAC,GAAI7I,OAAO,GAAEJ,OAAO,CAACI,OAAO,CAAC,GAAG,EAAG;IAC/H,CAAC;IAED4G,YAAY,CAAC3iE,SAAS,CAAC6kE,aAAa,GAAG,UAASpjE,IAAI,EAAE;MACpD,OAAO,IAAI,CAACqC,SAAS,CAACrC,IAAI,CAAC,CAACF,MAAM;IACpC,CAAC;IAEDohE,YAAY,CAAC3iE,SAAS,CAACu+D,YAAY,GAAG,UAAU98D,IAAI,EAAE;MACpD,IAAI,IAAI,CAAC66D,QAAQ,EAAE;QACjB,IAAIwE,QAAQ,GAAG,EAAE;QACjB,IAAIG,EAAE,GAAG,OAAOx/D,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACuxB,KAAK,CAAC,IAAI,CAACmpC,SAAS,CAAC,GAAG16D,IAAI,CAACqD,KAAK,CAAC,CAAC;QAC7E+7D,kBAAkB,CAAC3gE,IAAI,CAAC,IAAI,EAAE4gE,QAAQ,EAAEG,EAAE,EAAE,IAAI,CAACpE,YAAY,EAAE,CAAC,CAAC;QACjE,OAAOiE,QAAQ,CAACv/D,MAAM,GAAG,CAAC;MAC5B;MAEA,IAAIw6D,OAAO,GAAG,IAAI,CAACA,OAAO;MAC1B,IAAI2H,IAAI,GAAG,IAAI,CAACA,IAAI;MAEpB,OAAO,CAAC,EAAEA,IAAI,IAAIA,IAAI,CAACniE,MAAM,IAAIw6D,OAAO,KAAKt6D,IAAI,KAAKq5D,WAAW,GAAGa,OAAO,CAACI,OAAO,CAAC,CAACx6D,MAAM,GAAGw6D,OAAO,CAACt6D,IAAI,CAAC,CAAC,CAAC;IAC/G,CAAC;IAEDkhE,YAAY,CAAC3iE,SAAS,CAAC8kE,YAAY,GAAG,YAAW;MAE/C,IAAG,IAAI,CAACpB,IAAI,EAAE;QACZ,OAAO,IAAI,CAACA,IAAI;MAClB,CAAC,MACI;QACH,OAAO,EAAE;MACX;IAEF,CAAC;IAEDf,YAAY,CAAC3iE,SAAS,CAAC+kE,OAAO,GAAG,UAAU17D,KAAK,EAAEoxD,OAAO,EAAE;MACzD,IAAI96D,IAAI,GAAG,IAAI;MACf,IAAI8B,IAAI,GAAG,OAAOg5D,OAAO;MACzB,IAAIh5D,IAAI,KAAK,QAAQ,EAAE;QACrBg5D,OAAO,GAAG;UAAC2F,OAAO,EAAE3F;QAAO,CAAC;MAC9B,CAAC,MAAM,IAAIh5D,IAAI,KAAK,UAAU,EAAE;QAC9Bg5D,OAAO,GAAG;UAAC3uB,MAAM,EAAE2uB;QAAO,CAAC;MAC7B;MAEAA,OAAO,GAAEmE,cAAc,CAACnE,OAAO,EAAE;QAC/B2F,OAAO,EAAE,CAAC;QACVt0B,MAAM,EAAEgvB,WAAW;QACnBkK,WAAW,EAAE,KAAK;QAClBpF,OAAO,EAAEA,OAAO;QAChBS,QAAQ,EAAE;MACZ,CAAC,EAAE;QACDv0B,MAAM,EAAE2zB,eAAe;QACvBG,OAAO,EAAER;MACX,CAAC,CAAC;MAEF,OAAOO,qBAAqB,CAAClF,OAAO,CAACmF,OAAO,EAAE,UAAUzoC,OAAO,EAAE+nC,MAAM,EAAEiB,QAAQ,EAAE;QACjF,SAASv8D,QAAQA,CAAA,EAAG;UAClB,IAAIkoC,MAAM,GAAE2uB,OAAO,CAAC3uB,MAAM;UAC1B,IAAIA,MAAM,IAAI,CAACA,MAAM,CAACpmC,KAAK,CAAC/F,IAAI,EAAEgG,SAAS,CAAC,EAAE;YAC5C;UACF;UACAhG,IAAI,CAAC2D,GAAG,CAAC+F,KAAK,EAAEzF,QAAQ,CAAC;UACzB,IAAI62D,OAAO,CAACuK,WAAW,EAAE;YACvB,IAAI14C,GAAG,GAAG3mB,SAAS,CAAC,CAAC,CAAC;YACtB2mB,GAAG,GAAG4yC,MAAM,CAAC5yC,GAAG,CAAC,GAAG6K,OAAO,CAAC0L,OAAO,CAACn9B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAACb,KAAK,CAAC,CAAC,CAAC,CAAC;UACtE,CAAC,MAAM;YACLqyB,OAAO,CAAC0L,OAAO,CAACn9B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAC;UACzC;QACF;QAEAw6D,QAAQ,CAAC,YAAU;UACjBxgE,IAAI,CAAC2D,GAAG,CAAC+F,KAAK,EAAEzF,QAAQ,CAAC;QAC3B,CAAC,CAAC;QAEFjE,IAAI,CAACg+D,GAAG,CAACt0D,KAAK,EAAEzF,QAAQ,EAAE,KAAK,CAAC;MAClC,CAAC,EAAE;QACDw8D,OAAO,EAAE3F,OAAO,CAAC2F,OAAO;QACxBC,QAAQ,EAAE5F,OAAO,CAAC4F;MACpB,CAAC,CAAC;IACJ,CAAC;IAED,SAASn8D,IAAIA,CAACg5D,OAAO,EAAErqD,IAAI,EAAE4nD,OAAO,EAAE;MACpCA,OAAO,GAAEmE,cAAc,CAACnE,OAAO,EAAE;QAC/BmF,OAAO,EAAEA,OAAO;QAChBQ,OAAO,EAAE,CAAC;QACVC,QAAQ,EAAE;MACZ,CAAC,EAAE;QACDT,OAAO,EAAER;MACX,CAAC,CAAC;MAEF,IAAI6F,QAAQ,GAAExK,OAAO,CAACmF,OAAO;MAE7B,OAAOD,qBAAqB,CAACsF,QAAQ,EAAE,UAAS9tC,OAAO,EAAE+nC,MAAM,EAAEiB,QAAQ,EAAC;QACxE,IAAIjC,OAAO;QACX,IAAI,OAAOhB,OAAO,CAAC/5D,gBAAgB,KAAK,UAAU,EAAE;UAClD+6D,OAAO,GAAG,SAAAA,CAAA,EAAY;YACpB/mC,OAAO,CAAC0L,OAAO,CAACn9B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAC;UACzC,CAAC;UAEDw6D,QAAQ,CAAC,YAAU;YACjBjD,OAAO,CAAC75D,mBAAmB,CAACwP,IAAI,EAAEqrD,OAAO,CAAC;UAC5C,CAAC,CAAC;UAEFhB,OAAO,CAAC/5D,gBAAgB,CACpB0P,IAAI,EACJqrD,OAAO,EACP;YAACh6D,IAAI,EAAE;UAAI,CACf,CAAC;UACD;QACF;QAEA,IAAIghE,aAAa,GAAG,SAAAA,CAAA,EAAU;UAC5BC,aAAa,IAAIjI,OAAO,CAACT,cAAc,CAAC,OAAO,EAAE0I,aAAa,CAAC;UAC/DhuC,OAAO,CAAC0L,OAAO,CAACn9B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAC;QACzC,CAAC;QAED,IAAIw/D,aAAa;QAEjB,IAAItyD,IAAI,KAAK,OAAO,EAAE;UACpBsyD,aAAa,GAAG,SAAAA,CAAU74C,GAAG,EAAC;YAC5B4wC,OAAO,CAACT,cAAc,CAAC5pD,IAAI,EAAEqyD,aAAa,CAAC;YAC3ChG,MAAM,CAAC5yC,GAAG,CAAC;UACb,CAAC;UAED4wC,OAAO,CAACh5D,IAAI,CAAC,OAAO,EAAEihE,aAAa,CAAC;QACtC;QAEAhF,QAAQ,CAAC,YAAU;UACjBgF,aAAa,IAAIjI,OAAO,CAACT,cAAc,CAAC,OAAO,EAAE0I,aAAa,CAAC;UAC/DjI,OAAO,CAACT,cAAc,CAAC5pD,IAAI,EAAEqyD,aAAa,CAAC;QAC7C,CAAC,CAAC;QAEFhI,OAAO,CAACh5D,IAAI,CAAC2O,IAAI,EAAEqyD,aAAa,CAAC;MACnC,CAAC,EAAE;QACD9E,OAAO,EAAE3F,OAAO,CAAC2F,OAAO;QACxBC,QAAQ,EAAE5F,OAAO,CAAC4F;MACpB,CAAC,CAAC;IACJ;IAEA,IAAIrgE,SAAS,GAAE2iE,YAAY,CAAC3iE,SAAS;IAErCD,MAAM,CAAC8G,gBAAgB,CAAC87D,YAAY,EAAE;MACpC3H,mBAAmB,EAAE;QACnBl0D,GAAG,EAAE,SAAAA,CAAA,EAAY;UACf,OAAO9G,SAAS,CAACq8D,aAAa;QAChC,CAAC;QACDz5D,GAAG,EAAE,SAAAA,CAAU3B,CAAC,EAAE;UAChB,IAAI,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,GAAG,CAAC,IAAIomC,MAAM,CAACjnB,KAAK,CAACnf,CAAC,CAAC,EAAE;YACrD,MAAMsmC,SAAS,CAAC,iCAAiC,CAAC;UACpD;UACAvnC,SAAS,CAACq8D,aAAa,GAAGp7D,CAAC;QAC7B,CAAC;QACDmkE,UAAU,EAAE;MACd,CAAC;MACDlhE,IAAI,EAAE;QACJyC,KAAK,EAAEzC,IAAI;QACXmhE,QAAQ,EAAE,IAAI;QACdC,YAAY,EAAE;MAChB;IACF,CAAC,CAAC;IAEFvlE,MAAM,CAAC8G,gBAAgB,CAAC7G,SAAS,EAAE;MAC/Bq8D,aAAa,EAAE;QACX11D,KAAK,EAAEq0D,mBAAmB;QAC1BqK,QAAQ,EAAE,IAAI;QACdC,YAAY,EAAE;MAClB,CAAC;MACD1H,UAAU,EAAE;QAACj3D,KAAK,EAAE,IAAI;QAAE0+D,QAAQ,EAAE,IAAI;QAAEC,YAAY,EAAE;MAAI;IAChE,CAAC,CAAC;IAEF,IAAI,OAAOxK,WAAW,KAAK,UAAU,IAAIA,WAAW,CAACyK,GAAG,EAAE;MACvD;MACDzK,WAAW,CAAC,YAAW;QACrB,OAAO6H,YAAY;MACrB,CAAC,CAAC;IACJ,CAAC,MAAM;MACL;MACAtiE,MAAM,CAACD,OAAO,GAAGuiE,YAAY;IAC/B;EACF,CAAC,CAAC,CAAC;AACJ,CAAC,EAAE9H,aAAa,EAAEA,aAAa,CAACz6D,OAAO,CAAC;AAExC,IAAIolE,oBAAoB,GAAG3K,aAAa,CAACz6D,OAAO;AAChD,IAAIwiE,aAAa,GAAG,aAAahjE,uBAAuB,CAAC4lE,oBAAoB,CAAC;;AAE9E;AACA;AACA;AACA;;AAEA,IAAIC,cAAc,GAAG,aAAc,UAAU7C,aAAa,EAAE;EAC1D,SAAS6C,cAAcA,CAAChL,OAAO,EAAE;IAC/BmI,aAAa,CAAC1iE,IAAI,CAAC,IAAI,CAAC;IACxBu6D,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIiL,GAAG,GAAGjL,OAAO,CAACiL,GAAG;IACrB,IAAIC,KAAK,GAAGlL,OAAO,CAACkL,KAAK,IAAI,MAAM;IACnC,IAAI,CAAC5xD,KAAK,GAAG0mD,OAAO,CAAC1mD,KAAK;IAC1B,IAAI,CAAC6xD,UAAU,GAAGnL,OAAO,CAACmL,UAAU,IAAI,IAAIjM,eAAe,CAAC5yC,SAAS,CAAC,CAAC;;IAEvE;IACA,IAAI,CAAC8+C,YAAY,GAAG,IAAIlM,eAAe,CAAC5oC,KAAK,CAAC,CAAC;;IAE/C;IACA,IAAI+0C,QAAQ,GAAG,IAAIxmE,MAAM,CAACymE,KAAK,CAAC;MAC9BL,GAAG,EAAGA,GAAG;MACT7yD,IAAI,EAAG8yD,KAAK;MACZK,WAAW,EAAG;IAChB,CAAC,CAAC;IAEFF,QAAQ,CAAChI,SAAS,CAAC,UAASr3B,OAAO,EAAE;MACnC;MACAq/B,QAAQ,CAACtH,WAAW,CAAC,CAAC;;MAEtB;MACA,IAAI,CAACqH,YAAY,GAAG,IAAIrL,QAAQ,CAAC;QAC/B/zB,OAAO,EAAGA,OAAO;QACjB1yB,KAAK,EAAG,IAAI,CAACA;MACf,CAAC,CAAC;MACF,IAAI,CAAC6xD,UAAU,CAACp+C,QAAQ,CAAC,IAAI,CAACq+C,YAAY,CAAC;MAE3C,IAAI,CAAC1H,IAAI,CAAC,QAAQ,CAAC;IACrB,CAAC,CAAC8H,IAAI,CAAC,IAAI,CAAC,CAAC;EACf;EAEA,IAAKrD,aAAa,EAAG6C,cAAc,CAACzkE,SAAS,GAAG4hE,aAAa;EAC7D6C,cAAc,CAACzlE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEm0B,aAAa,IAAIA,aAAa,CAAC5iE,SAAU,CAAC;EACpFylE,cAAc,CAACzlE,SAAS,CAACU,WAAW,GAAG+kE,cAAc;EAErD,OAAOA,cAAc;AACvB,CAAC,CAAC7C,aAAa,CAAE;;AAEjB;AACA;AACA;AACA;;AAEA,IAAIsD,aAAa,GAAG,aAAc,UAAU1lE,UAAU,EAAE;EACtD,SAAS0lE,aAAaA,CAACzL,OAAO,EAAE;IAC9BA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIh0B,OAAO,GAAGg0B,OAAO,CAACh0B,OAAO;;IAE7B;IACA,IAAI9vB,MAAM,GAAGtD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC7C,IAAI8zB,OAAO,GAAGzwB,MAAM,CAACpD,UAAU,CAAC,IAAI,CAAC;;IAErC;IACAoD,MAAM,CAAChI,KAAK,GAAG83B,OAAO,CAACuI,IAAI,CAACrgC,KAAK;IACjCgI,MAAM,CAAC/H,MAAM,GAAG63B,OAAO,CAACuI,IAAI,CAACpgC,MAAM;IAEnC,IAAIuvB,SAAS,GAAGiJ,OAAO,CAAC++B,eAAe,CAACxvD,MAAM,CAAChI,KAAK,EAAEgI,MAAM,CAAC/H,MAAM,CAAC;IACpE,KAAM,IAAIw3D,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGzvD,MAAM,CAAC/H,MAAM,EAAEw3D,GAAG,EAAE,EAAE;MAC7C,KAAM,IAAIn0C,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGtb,MAAM,CAAChI,KAAK,EAAEsjB,GAAG,EAAE,EAAE;QAC5C;QACA,IAAIo0C,IAAI,GAAGp0C,GAAG,GAAI,CAACtb,MAAM,CAAC/H,MAAM,GAAGw3D,GAAG,GAAG,CAAC,IAAIzvD,MAAM,CAAChI,KAAM;QAC3D;QACA,IAAIxK,IAAI,GAAGsiC,OAAO,CAACtiC,IAAI,CAACkiE,IAAI,CAAC;QAC7B,IAAIvjC,GAAG;QACP,IAAI3+B,IAAI,KAAK,GAAG,EAAE;UAChB2+B,GAAG,GAAG,CAAC;QACT,CAAC,MAAM,IAAI3+B,IAAI,KAAK,CAAC,EAAE;UACrB2+B,GAAG,GAAG,GAAG;QACX,CAAC,MAAM;UACLA,GAAG,GAAG,GAAG;QACX;;QAEA;QACA,IAAIzhC,CAAC,GAAG,CAAC4wB,GAAG,GAAIm0C,GAAG,GAAGzvD,MAAM,CAAChI,KAAM,IAAI,CAAC;QACxC;QACAwvB,SAAS,CAACh6B,IAAI,CAAC9C,CAAC,CAAC,GAAGyhC,GAAG;QACvB;QACA3E,SAAS,CAACh6B,IAAI,CAAC,EAAE9C,CAAC,CAAC,GAAGyhC,GAAG;QACzB;QACA3E,SAAS,CAACh6B,IAAI,CAAC,EAAE9C,CAAC,CAAC,GAAGyhC,GAAG;QACzB;QACA3E,SAAS,CAACh6B,IAAI,CAAC,EAAE9C,CAAC,CAAC,GAAG,GAAG;MAC3B;IACF;IACA+lC,OAAO,CAAC5b,YAAY,CAAC2S,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;;IAErC;IACA39B,UAAU,CAACN,IAAI,CAAC,IAAI,EAAEyW,MAAM,CAAC;IAE7B,IAAI,CAAChI,KAAK,GAAGgI,MAAM,CAAChI,KAAK;IACzB,IAAI,CAACC,MAAM,GAAG+H,MAAM,CAAC/H,MAAM;;IAE3B;IACA,IAAI,CAAC8rD,IAAI,GAAG,IAAIp7D,MAAM,CAACq7D,IAAI,CAAC;MAC1BjlC,QAAQ,EAAG+Q,OAAO,CAACuI,IAAI,CAACqK,MAAM,CAAC3jB,QAAQ;MACvCwkC,WAAW,EAAGzzB,OAAO,CAACuI,IAAI,CAACqK,MAAM,CAAC6gB;IACpC,CAAC,CAAC;;IAEF;IACA,IAAI,CAACpvD,CAAC,GAAG,CAAC,IAAI,CAAC8D,MAAM,GAAG63B,OAAO,CAACuI,IAAI,CAAC4rB,UAAU;;IAE/C;IACA,IAAI,CAACnuD,MAAM,GAAGg6B,OAAO,CAACuI,IAAI,CAAC4rB,UAAU;IACrC,IAAI,CAACluD,MAAM,GAAG+5B,OAAO,CAACuI,IAAI,CAAC4rB,UAAU;IACrC,IAAI,CAACjsD,KAAK,IAAI,IAAI,CAAClC,MAAM;IACzB,IAAI,CAACmC,MAAM,IAAI,IAAI,CAAClC,MAAM;;IAE1B;IACA,IAAI,CAAC7M,CAAC,IAAI,IAAI,CAAC66D,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC;IAC9B,IAAI,CAACiL,CAAC,IAAI,IAAI,CAAC4vD,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC;EAChC;EAEA,IAAKtK,UAAU,EAAG0lE,aAAa,CAACllE,SAAS,GAAGR,UAAU;EACtD0lE,aAAa,CAAClmE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC7EkmE,aAAa,CAAClmE,SAAS,CAACU,WAAW,GAAGwlE,aAAa;EAEnD,OAAOA,aAAa;AACtB,CAAC,CAACvM,eAAe,CAACnqC,MAAM,CAAE;;AAE1B;AACA;AACA;AACA;;AAEA,IAAI82C,IAAI,GAAG,aAAc,UAAU9lE,UAAU,EAAE;EAC7C,SAAS8lE,IAAIA,CAAC7L,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIr+B,IAAI,GAAGq+B,OAAO,CAACr+B,IAAI,IAAI,EAAE;IAC7B,IAAImqC,QAAQ,GAAG9L,OAAO,CAAC8L,QAAQ,IAAI,GAAG;IACtC,IAAIrmD,SAAS,GAAGu6C,OAAO,CAACv6C,SAAS,IAAI,KAAK;IAC1C;IACA,IAAIyD,QAAQ,GAAG,IAAIg2C,eAAe,CAACzkD,QAAQ,CAAC,CAAC;IAC7C;IACAyO,QAAQ,CAACvJ,cAAc,CAAC8F,SAAS,GAAC,CAAC,CAAC;IACpCyD,QAAQ,CAAC5I,WAAW,CAAC4+C,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9DyN,QAAQ,CAACxK,SAAS,CAACwgD,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9DyN,QAAQ,CAACnM,MAAM,CAAC,CAAC4kB,IAAI,GAACmqC,QAAQ,EAAE,CAAC,CAAC;IAClC5iD,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,GAACmqC,QAAQ,EAAE,CAAC,CAAC;IACjC5iD,QAAQ,CAACnM,MAAM,CAAC,CAAC,EAAE,CAAC4kB,IAAI,GAACmqC,QAAQ,CAAC;IAClC5iD,QAAQ,CAACjM,MAAM,CAAC,CAAC,EAAE0kB,IAAI,GAACmqC,QAAQ,CAAC;IACjC5iD,QAAQ,CAACxJ,OAAO,CAAC,CAAC;IAClBwJ,QAAQ,CAACtI,SAAS,CAAC,CAAC;IAEpBsI,QAAQ,CAACvJ,cAAc,CAAC8F,SAAS,CAAC;IAClCyD,QAAQ,CAAC5I,WAAW,CAAC4+C,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9DyN,QAAQ,CAACxK,SAAS,CAACwgD,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9D,KAAK,IAAI7U,CAAC,GAAG,CAAC+6B,IAAI,EAAE/6B,CAAC,IAAI+6B,IAAI,EAAE/6B,CAAC,EAAE,EAAE;MAChCsiB,QAAQ,CAACnM,MAAM,CAAC,CAAC4kB,IAAI,GAACmqC,QAAQ,EAAEllE,CAAC,GAAGklE,QAAQ,CAAC;MAC7C5iD,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,GAACmqC,QAAQ,EAAEllE,CAAC,GAAGklE,QAAQ,CAAC;MAC5C5iD,QAAQ,CAACnM,MAAM,CAACnW,CAAC,GAAGklE,QAAQ,EAAE,CAACnqC,IAAI,GAACmqC,QAAQ,CAAC;MAC7C5iD,QAAQ,CAACjM,MAAM,CAACrW,CAAC,GAAGklE,QAAQ,EAAEnqC,IAAI,GAACmqC,QAAQ,CAAC;IAChD;IACA5iD,QAAQ,CAACxJ,OAAO,CAAC,CAAC;IAClBwJ,QAAQ,CAACtI,SAAS,CAAC,CAAC;IACpB;IACA7a,UAAU,CAACN,IAAI,CAAC,IAAI,EAAEyjB,QAAQ,CAAC;EAEnC;EAEA,IAAKnjB,UAAU,EAAG8lE,IAAI,CAACtlE,SAAS,GAAGR,UAAU;EAC7C8lE,IAAI,CAACtmE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EACpEsmE,IAAI,CAACtmE,SAAS,CAACU,WAAW,GAAG4lE,IAAI;EAEjC,OAAOA,IAAI;AACb,CAAC,CAAC3M,eAAe,CAAC5oC,KAAK,CAAE;;AAEzB;AACA;AACA;AACA;;AAEA,IAAIy1C,mBAAmB,GAAG,aAAc,UAAU5D,aAAa,EAAE;EAC/D,SAAS4D,mBAAmBA,CAAC/L,OAAO,EAAE;IACpCmI,aAAa,CAAC1iE,IAAI,CAAC,IAAI,CAAC;IACxB,IAAIumE,IAAI,GAAG,IAAI;IACfhM,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIiL,GAAG,GAAGjL,OAAO,CAACiL,GAAG;IACrB,IAAIC,KAAK,GAAGlL,OAAO,CAACkL,KAAK,IAAI,MAAM;IACnC,IAAI,CAACe,UAAU,GAAGjM,OAAO,CAACiM,UAAU;IACpC,IAAI,CAACd,UAAU,GAAGnL,OAAO,CAACmL,UAAU,IAAI,IAAIjM,eAAe,CAAC5yC,SAAS,CAAC,CAAC;;IAEvE;IACA;IACA,IAAI,CAAC4/C,WAAW,GAAG,IAAIhN,eAAe,CAAC5oC,KAAK,CAAC,CAAC;IAC9C,IAAI,CAAC60C,UAAU,CAACp+C,QAAQ,CAAC,IAAI,CAACm/C,WAAW,CAAC;IAC1C;IACA,IAAI,CAACf,UAAU,CAACp+C,QAAQ,CAAC,IAAI8+C,IAAI,CAAC;MAAClqC,IAAI,EAAC;IAAC,CAAC,CAAC,CAAC;;IAE5C;IACA,IAAI0pC,QAAQ,GAAG,IAAIxmE,MAAM,CAACymE,KAAK,CAAC;MAC9BL,GAAG,EAAGA,GAAG;MACT7yD,IAAI,EAAG8yD,KAAK;MACZK,WAAW,EAAG;MACd;IACF,CAAC,CAAC;IAEFF,QAAQ,CAAChI,SAAS,CAAC,UAASr3B,OAAO,EAAE;MACnC;MACA,IAAI7e,KAAK,GAAG,IAAI;MAChB,IAAI6+C,IAAI,CAACE,WAAW,EAAE;QACpB/+C,KAAK,GAAG6+C,IAAI,CAACb,UAAU,CAACr9C,aAAa,CAACk+C,IAAI,CAACE,WAAW,CAAC;QACvDF,IAAI,CAACb,UAAU,CAACl+C,WAAW,CAAC++C,IAAI,CAACE,WAAW,CAAC;MAC/C;MAEAF,IAAI,CAACE,WAAW,GAAG,IAAIT,aAAa,CAAC;QACnCz/B,OAAO,EAAGA;MACZ,CAAC,CAAC;MACF,IAAI7e,KAAK,KAAK,IAAI,EAAE;QAClB6+C,IAAI,CAACb,UAAU,CAACj+C,UAAU,CAAC8+C,IAAI,CAACE,WAAW,EAAE/+C,KAAK,CAAC;MACrD,CAAC,MACI;QACH6+C,IAAI,CAACb,UAAU,CAACp+C,QAAQ,CAACi/C,IAAI,CAACE,WAAW,CAAC;MAC5C;MAEAF,IAAI,CAACtI,IAAI,CAAC,QAAQ,CAAC;;MAEnB;MACA,IAAI,CAACsI,IAAI,CAACC,UAAU,EAAE;QACpBZ,QAAQ,CAACtH,WAAW,CAAC,CAAC;MACxB;IACF,CAAC,CAAC;EACJ;EAEA,IAAKoE,aAAa,EAAG4D,mBAAmB,CAACxlE,SAAS,GAAG4hE,aAAa;EAClE4D,mBAAmB,CAACxmE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEm0B,aAAa,IAAIA,aAAa,CAAC5iE,SAAU,CAAC;EACzFwmE,mBAAmB,CAACxmE,SAAS,CAACU,WAAW,GAAG8lE,mBAAmB;EAE/D,OAAOA,mBAAmB;AAC5B,CAAC,CAAC5D,aAAa,CAAE;;AAEjB;AACA;AACA;AACA;AACA;;AAEA,IAAIgE,sBAAsB,GAAG,aAAc,UAAUhE,aAAa,EAAE;EAClE,SAASgE,sBAAsBA,CAACnM,OAAO,EAAE;IACvCmI,aAAa,CAAC1iE,IAAI,CAAC,IAAI,CAAC;IACxB,IAAIumE,IAAI,GAAG,IAAI;IACfhM,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIiL,GAAG,GAAGjL,OAAO,CAACiL,GAAG;IACrB,IAAImB,OAAO,GAAGpM,OAAO,CAACoM,OAAO,IAAI,aAAa;IAC9C,IAAI,CAACjB,UAAU,GAAGnL,OAAO,CAACmL,UAAU,IAAI,IAAIjM,eAAe,CAAC5yC,SAAS,CAAC,CAAC;;IAEvE;IACA,IAAI,CAAC4/C,WAAW,GAAG,IAAI;;IAEvB;IACA,IAAIG,UAAU,GAAG,IAAIxnE,MAAM,CAACynE,OAAO,CAAC;MAClCrB,GAAG,EAAGA,GAAG;MACT7yD,IAAI,EAAGg0D,OAAO;MACdG,WAAW,EAAG,iBAAiB;MAC/BC,WAAW,EAAG;IAChB,CAAC,CAAC;IAEFH,UAAU,CAACI,WAAW,CAAC,IAAI5nE,MAAM,CAAC6nE,cAAc,CAAC,CAAC,EAAC,UAASvuB,QAAQ,EAAE;MACpE;MACA,IAAI6tB,IAAI,CAACE,WAAW,EAAE;QACpBF,IAAI,CAACb,UAAU,CAACl+C,WAAW,CAAC++C,IAAI,CAACE,WAAW,CAAC;MAC/C;MAEAF,IAAI,CAACE,WAAW,GAAG,IAAIT,aAAa,CAAC;QACnCz/B,OAAO,EAAGmS,QAAQ,CAACjY;MACrB,CAAC,CAAC;MACF8lC,IAAI,CAACb,UAAU,CAACp+C,QAAQ,CAACi/C,IAAI,CAACE,WAAW,CAAC;MAE1CF,IAAI,CAACtI,IAAI,CAAC,QAAQ,EAAEsI,IAAI,CAACE,WAAW,CAAC;IACvC,CAAC,CAAC;EACJ;EAEA,IAAK/D,aAAa,EAAGgE,sBAAsB,CAAC5lE,SAAS,GAAG4hE,aAAa;EACrEgE,sBAAsB,CAAC5mE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEm0B,aAAa,IAAIA,aAAa,CAAC5iE,SAAU,CAAC;EAC5F4mE,sBAAsB,CAAC5mE,SAAS,CAACU,WAAW,GAAGkmE,sBAAsB;EAErE,OAAOA,sBAAsB;AAC/B,CAAC,CAAChE,aAAa,CAAE;;AAEjB;AACA;AACA;AACA;;AAEA,IAAIwE,UAAU,GAAG,aAAc,UAAU5mE,UAAU,EAAE;EACnD,SAAS4mE,UAAUA,CAAC3M,OAAO,EAAE;IAC5B,IAAIgM,IAAI,GAAG,IAAI;IACfhM,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIr+B,IAAI,GAAGq+B,OAAO,CAACr+B,IAAI,IAAI,EAAE;IAC7B,IAAIirC,UAAU,GAAG5M,OAAO,CAAC4M,UAAU,IAAI,CAAC;IACxC,IAAIC,WAAW,GAAG7M,OAAO,CAAC6M,WAAW,IAAI3N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACjF,IAAIqxD,SAAS,GAAG9M,OAAO,CAAC8M,SAAS,IAAI5N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IAC/E,IAAIsxD,KAAK,GAAG/M,OAAO,CAAC+M,KAAK;;IAEzB;IACA,IAAI7jD,QAAQ,GAAG,IAAIg2C,eAAe,CAACzkD,QAAQ,CAAC,CAAC;IAE7C,IAAIuyD,OAAO,GAAGrrC,IAAI,GAAG,GAAG;IACxB,IAAIsrC,SAAS,GAAGD,OAAO,GAAG,GAAG,GAAG,GAAG;IAEnC9jD,QAAQ,CAACvJ,cAAc,CAACitD,UAAU,CAAC;IACnC1jD,QAAQ,CAAC5I,WAAW,CAACusD,WAAW,CAAC;IACjC3jD,QAAQ,CAACnM,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IACrBmM,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,GAACqrC,OAAO,EAAE,CAAC,CAAC;IAEhC9jD,QAAQ,CAACxK,SAAS,CAACouD,SAAS,CAAC;IAC7B5jD,QAAQ,CAACnM,MAAM,CAAC4kB,IAAI,EAAE,CAAC,CAAC;IACxBzY,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,GAACqrC,OAAO,EAAEC,SAAS,GAAG,GAAG,CAAC;IAC9C/jD,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,GAACqrC,OAAO,EAAE,CAACC,SAAS,GAAG,GAAG,CAAC;IAC/C/jD,QAAQ,CAAC1K,SAAS,CAAC,CAAC;IACpB0K,QAAQ,CAACxJ,OAAO,CAAC,CAAC;IAClBwJ,QAAQ,CAACtI,SAAS,CAAC,CAAC;;IAEpB;IACA7a,UAAU,CAACN,IAAI,CAAC,IAAI,EAAEyjB,QAAQ,CAAC;;IAE/B;IACA,IAAI6jD,KAAK,EAAE;MACV;MACA,IAAIG,SAAS,GAAG,CAAC;MACjB,IAAIC,OAAO,GAAG,IAAI;MAClBjO,eAAe,CAAC50D,MAAM,CAAC5B,gBAAgB,CAAC,MAAM,EAAE,YAAW;QAC1D,IAAIykE,OAAO,EAAE;UACZnB,IAAI,CAACh6D,MAAM,IAAI,KAAK;UACpBg6D,IAAI,CAAC/5D,MAAM,IAAI,KAAK;UACpBk7D,OAAO,GAAI,EAAED,SAAS,GAAG,EAAG;QAC7B,CAAC,MAAM;UACNlB,IAAI,CAACh6D,MAAM,IAAI,KAAK;UACpBg6D,IAAI,CAAC/5D,MAAM,IAAI,KAAK;UACpBk7D,OAAO,GAAI,EAAED,SAAS,GAAG,CAAE;QAC5B;MACD,CAAC,CAAC;IACH;EACD;EAEA,IAAKnnE,UAAU,EAAG4mE,UAAU,CAACpmE,SAAS,GAAGR,UAAU;EACnD4mE,UAAU,CAACpnE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC1EonE,UAAU,CAACpnE,SAAS,CAACU,WAAW,GAAG0mE,UAAU;EAE7C,OAAOA,UAAU;AACnB,CAAC,CAACzN,eAAe,CAAC5oC,KAAK,CAAE;;AAEzB;AACA;AACA;AACA;;AAEA,IAAI82C,eAAe,GAAG,aAAc,UAAUrnE,UAAU,EAAE;EACxD,SAASqnE,eAAeA,CAACpN,OAAO,EAAE;IAChC,IAAIgM,IAAI,GAAG,IAAI;IACfhM,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIr+B,IAAI,GAAGq+B,OAAO,CAACr+B,IAAI,IAAI,EAAE;IAC7B,IAAIirC,UAAU,GAAG5M,OAAO,CAAC4M,UAAU,IAAI,CAAC;IACxC,IAAIC,WAAW,GAAG7M,OAAO,CAAC6M,WAAW,IAAI3N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACjF,IAAIqxD,SAAS,GAAG9M,OAAO,CAAC8M,SAAS,IAAI5N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IAC/E,IAAIsxD,KAAK,GAAG/M,OAAO,CAAC+M,KAAK;;IAEzB;IACA,IAAI7jD,QAAQ,GAAG,IAAIg2C,eAAe,CAACzkD,QAAQ,CAAC,CAAC;IAC7C;IACAyO,QAAQ,CAACvJ,cAAc,CAACitD,UAAU,CAAC;IACnC1jD,QAAQ,CAACnM,MAAM,CAAC,CAAC4kB,IAAI,GAAG,GAAG,EAAE,CAACA,IAAI,GAAG,GAAG,CAAC;IACzCzY,QAAQ,CAAC5I,WAAW,CAACusD,WAAW,CAAC;IACjC3jD,QAAQ,CAACxK,SAAS,CAACouD,SAAS,CAAC;IAC7B5jD,QAAQ,CAACjM,MAAM,CAAC0kB,IAAI,EAAE,CAAC,CAAC;IACxBzY,QAAQ,CAACjM,MAAM,CAAC,CAAC0kB,IAAI,GAAG,GAAG,EAAEA,IAAI,GAAG,GAAG,CAAC;IACxCzY,QAAQ,CAAC1K,SAAS,CAAC,CAAC;IACpB0K,QAAQ,CAACxJ,OAAO,CAAC,CAAC;IAClBwJ,QAAQ,CAACtI,SAAS,CAAC,CAAC;;IAEpB;IACA7a,UAAU,CAACN,IAAI,CAAC,IAAI,EAAEyjB,QAAQ,CAAC;;IAE/B;IACA,IAAI6jD,KAAK,EAAE;MACT;MACA,IAAIG,SAAS,GAAG,CAAC;MACjB,IAAIC,OAAO,GAAG,IAAI;MAClBjO,eAAe,CAAC50D,MAAM,CAAC5B,gBAAgB,CAAC,MAAM,EAAE,YAAW;QACzD,IAAIykE,OAAO,EAAE;UACXnB,IAAI,CAACh6D,MAAM,IAAI,KAAK;UACpBg6D,IAAI,CAAC/5D,MAAM,IAAI,KAAK;UACpBk7D,OAAO,GAAI,EAAED,SAAS,GAAG,EAAG;QAC9B,CAAC,MAAM;UACLlB,IAAI,CAACh6D,MAAM,IAAI,KAAK;UACpBg6D,IAAI,CAAC/5D,MAAM,IAAI,KAAK;UACpBk7D,OAAO,GAAI,EAAED,SAAS,GAAG,CAAE;QAC7B;MACF,CAAC,CAAC;IACJ;EACF;EAEA,IAAKnnE,UAAU,EAAGqnE,eAAe,CAAC7mE,SAAS,GAAGR,UAAU;EACxDqnE,eAAe,CAAC7nE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC/E6nE,eAAe,CAAC7nE,SAAS,CAACU,WAAW,GAAGmnE,eAAe;EAEvD,OAAOA,eAAe;AACxB,CAAC,CAAClO,eAAe,CAAC5oC,KAAK,CAAE;;AAEzB;AACA;AACA;AACA;;AAEA,IAAI+2C,eAAe,GAAG,aAAc,UAAUtnE,UAAU,EAAE;EACxD,SAASsnE,eAAeA,CAACrN,OAAO,EAAE;IAChCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIr+B,IAAI,GAAGq+B,OAAO,CAACr+B,IAAI,IAAI,EAAE;IAC7B,IAAI2rC,SAAS,GAAGtN,OAAO,CAAC1mD,KAAK;IAC7B,IAAIyzD,KAAK,GAAG/M,OAAO,CAAC+M,KAAK;IACzB,IAAIn5D,KAAK,GAAGosD,OAAO,CAACpsD,KAAK,IAAI,CAAC;IAE9B,IAAI25D,SAAS,GAAG,CAAC,CAAC;IAElB,IAAIj0D,KAAK,GAAG,IAAIk0D,KAAK,CAAC,CAAC;IAEvBznE,UAAU,CAACN,IAAI,CAAC,IAAI,EAAE6T,KAAK,CAAC;IAE5B,IAAIm0D,UAAU,GAAG,SAAAA,CAAA,EAAW;MAC1B,IAAI36D,KAAK,GAAG46D,cAAc,CAAC/rC,IAAI,CAAC;MAChC,IAAI,CAAC/tB,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC5B,MAAM,GAAGc,KAAK;MACnB,IAAI,CAACb,MAAM,GAAGa,KAAK;MACnB,IAAI,CAACR,IAAI,GAAG,IAAI,CAACgH,KAAK,CAACnF,MAAM,GAAC,CAAC;MAC/B,IAAI,CAAC9B,IAAI,GAAG,IAAI,CAACiH,KAAK,CAACpF,KAAK,GAAC,CAAC;MAC9Bq5D,SAAS,CAAC,UAAU,CAAC,GAAG,IAAI,CAACr7D,QAAQ;MACrC5M,MAAM,CAAC4jD,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE;QACtC78C,GAAG,EAAE,SAAAA,CAAA,EAAU;UAAE,OAAOkhE,SAAS,CAAC,UAAU,CAAC,GAAG,EAAE;QAAE,CAAC;QACrDplE,GAAG,EAAE,SAAAA,CAAS+D,KAAK,EAAC;UAAEqhE,SAAS,CAAC,UAAU,CAAC,GAAGrhE,KAAK;QAAE;MACvD,CAAC,CAAC;MACF,IAAI6gE,KAAK,EAAE;QACT;QACA,IAAIG,SAAS,GAAG,CAAC;QACjB,IAAIC,OAAO,GAAG,IAAI;QAClB,IAAIQ,UAAU,GAAG,KAAK;QACtBzO,eAAe,CAAC50D,MAAM,CAAC5B,gBAAgB,CAAC,MAAM,EAAE,YAAW;UACzD,IAAIykE,OAAO,EAAE;YACX,IAAI,CAACn7D,MAAM,IAAI27D,UAAU;YACzB,IAAI,CAAC17D,MAAM,IAAI07D,UAAU;YACzBR,OAAO,GAAI,EAAED,SAAS,GAAG,EAAG;UAC9B,CAAC,MAAM;YACL,IAAI,CAACl7D,MAAM,IAAI27D,UAAU;YACzB,IAAI,CAAC17D,MAAM,IAAI07D,UAAU;YACzBR,OAAO,GAAI,EAAED,SAAS,GAAG,CAAE;UAC7B;QACF,CAAC,CAAC;MACJ;IACF,CAAC;IAED5zD,KAAK,CAACN,MAAM,GAAGy0D,UAAU,CAACjC,IAAI,CAAC,IAAI,CAAC;IACpClyD,KAAK,CAACX,GAAG,GAAG20D,SAAS;IAErB,IAAII,cAAc,GAAG,SAAAA,CAASE,KAAK,EAAC;MAClC,OAAOA,KAAK,GAAGt0D,KAAK,CAACpF,KAAK;IAC5B,CAAC;EAEH;EAEA,IAAKnO,UAAU,EAAGsnE,eAAe,CAAC9mE,SAAS,GAAGR,UAAU;EACxDsnE,eAAe,CAAC9nE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC/E8nE,eAAe,CAAC9nE,SAAS,CAACU,WAAW,GAAGonE,eAAe;EAEvD,OAAOA,eAAe;AACxB,CAAC,CAACnO,eAAe,CAACnqC,MAAM,CAAE;;AAE1B;AACA;AACA;AACA;;AAEA,IAAI84C,SAAS,GAAG,aAAc,UAAU9nE,UAAU,EAAE;EAClD,SAAS8nE,SAASA,CAAC7N,OAAO,EAAE;IAC3BA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIljD,IAAI,GAAGkjD,OAAO,CAACljD,IAAI;IACvB,IAAI,CAAC8vD,UAAU,GAAG5M,OAAO,CAAC4M,UAAU,IAAI,CAAC;IACzC,IAAI,CAACC,WAAW,GAAG7M,OAAO,CAAC6M,WAAW,IAAI3N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;IAElF;IACA,IAAI,CAACyN,QAAQ,GAAG,IAAIg2C,eAAe,CAACzkD,QAAQ,CAAC,CAAC;IAE9C,IAAIqC,IAAI,KAAK,IAAI,IAAI,OAAOA,IAAI,KAAK,WAAW,EAAE;MACjD,IAAI,CAACoM,QAAQ,CAACvJ,cAAc,CAAC,IAAI,CAACitD,UAAU,CAAC;MAC7C,IAAI,CAAC1jD,QAAQ,CAAC5I,WAAW,CAAC,IAAI,CAACusD,WAAW,CAAC;MAC3C,IAAI,CAAC3jD,QAAQ,CAACnM,MAAM,CAACD,IAAI,CAACgxD,KAAK,CAAC,CAAC,CAAC,CAAC7N,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE8K,IAAI,CAACgxD,KAAK,CAAC,CAAC,CAAC,CAAC7N,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MAC/G,KAAK,IAAIrL,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACkW,IAAI,CAACgxD,KAAK,CAAChnE,MAAM,EAAE,EAAEF,CAAC,EAAE;QACvC,IAAI,CAACsiB,QAAQ,CAACjM,MAAM,CAACH,IAAI,CAACgxD,KAAK,CAAClnE,CAAC,CAAC,CAACq5D,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE8K,IAAI,CAACgxD,KAAK,CAAClnE,CAAC,CAAC,CAACq5D,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MAChH;MACA,IAAI,CAACiX,QAAQ,CAACtI,SAAS,CAAC,CAAC;IAC1B;;IAEA;IACA7a,UAAU,CAACN,IAAI,CAAC,IAAI,EAAE,IAAI,CAACyjB,QAAQ,CAAC;EACrC;EAEA,IAAKnjB,UAAU,EAAG8nE,SAAS,CAACtnE,SAAS,GAAGR,UAAU;EAClD8nE,SAAS,CAACtoE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EACzEsoE,SAAS,CAACtoE,SAAS,CAACU,WAAW,GAAG4nE,SAAS;EAC3C;AACF;AACA;AACA;AACA;EACEA,SAAS,CAACtoE,SAAS,CAACwoE,OAAO,GAAG,SAASA,OAAOA,CAAEjxD,IAAI,EAAE;IACrD,IAAI,CAACoM,QAAQ,CAAC3N,KAAK,CAAC,CAAC;IACrB,IAAIuB,IAAI,KAAK,IAAI,IAAI,OAAOA,IAAI,KAAK,WAAW,EAAE;MACjD,IAAI,CAACoM,QAAQ,CAACvJ,cAAc,CAAC,IAAI,CAACitD,UAAU,CAAC;MAC7C,IAAI,CAAC1jD,QAAQ,CAAC5I,WAAW,CAAC,IAAI,CAACusD,WAAW,CAAC;MAC3C,IAAI,CAAC3jD,QAAQ,CAACnM,MAAM,CAACD,IAAI,CAACgxD,KAAK,CAAC,CAAC,CAAC,CAAC7N,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE8K,IAAI,CAACgxD,KAAK,CAAC,CAAC,CAAC,CAAC7N,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MAC/G,KAAK,IAAIrL,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACkW,IAAI,CAACgxD,KAAK,CAAChnE,MAAM,EAAE,EAAEF,CAAC,EAAE;QACvC,IAAI,CAACsiB,QAAQ,CAACjM,MAAM,CAACH,IAAI,CAACgxD,KAAK,CAAClnE,CAAC,CAAC,CAACq5D,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE8K,IAAI,CAACgxD,KAAK,CAAClnE,CAAC,CAAC,CAACq5D,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MAChH;MACA,IAAI,CAACiX,QAAQ,CAACtI,SAAS,CAAC,CAAC;IAC1B;EACD,CAAC;EAED,OAAOitD,SAAS;AAClB,CAAC,CAAC3O,eAAe,CAAC5oC,KAAK,CAAE;;AAEzB;AACA;AACA;AACA;;AAEA,IAAI03C,aAAa,GAAG,aAAc,UAAUjoE,UAAU,EAAE;EACtD,SAASioE,aAAaA,CAAChO,OAAO,EAAE;IAChC;IACIj6D,UAAU,CAACN,IAAI,CAAC,IAAI,CAAC;IACrBu6D,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAI,CAACiO,QAAQ,GAAGjO,OAAO,CAACiO,QAAQ,IAAI,CAAC;IACrC,IAAI,CAACC,SAAS,GAAGlO,OAAO,CAACkO,SAAS,IAAIhP,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC;IACtF,IAAI,CAACmG,SAAS,GAAGo+C,OAAO,CAACp+C,SAAS,IAAI,EAAE;IACxC,IAAI,CAACusD,UAAU,GAAGnO,OAAO,CAACmO,UAAU,IAAIjP,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IACxF,IAAI,CAACqxD,SAAS,GAAG9M,OAAO,CAACmO,UAAU,IAAIjP,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC;IACvF,IAAI,CAAC2yD,YAAY,GAAGpO,OAAO,CAACoO,YAAY;IACxC,IAAI,CAACC,aAAa,GAAGrO,OAAO,CAACqO,aAAa;;IAE1C;IACJ;IACI,IAAI,CAACC,cAAc,GAAG,IAAIpP,eAAe,CAAC5yC,SAAS,CAAC,CAAC;;IAErD;IACJ;IACI,IAAI,CAACiiD,aAAa,GAAG,IAAIrP,eAAe,CAAC5yC,SAAS,CAAC,CAAC;IAEpD,IAAI,CAACkiD,SAAS,GAAG,IAAItP,eAAe,CAAC5oC,KAAK,CAAC,CAAC;;IAE5C;IACA,IAAI,CAACvJ,QAAQ,CAAC,IAAI,CAACyhD,SAAS,CAAC;IAC7B,IAAI,CAACzhD,QAAQ,CAAC,IAAI,CAACwhD,aAAa,CAAC;IACjC,IAAI,CAACxhD,QAAQ,CAAC,IAAI,CAACuhD,cAAc,CAAC;EACtC;EAEA,IAAKvoE,UAAU,EAAGioE,aAAa,CAACznE,SAAS,GAAGR,UAAU;EACtDioE,aAAa,CAACzoE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC7EyoE,aAAa,CAACzoE,SAAS,CAACU,WAAW,GAAG+nE,aAAa;EACnD;AACF;AACA;EACEA,aAAa,CAACzoE,SAAS,CAACkpE,eAAe,GAAG,SAASA,eAAeA,CAAEC,UAAU,EAAEC,QAAQ,EAAE;IACtF,IAAIC,IAAI,GAAG,IAAI1P,eAAe,CAAC5oC,KAAK,CAAC,CAAC;IAC1C;IACA;IACA;IACA;IACI,IAAI,CAACu4C,aAAa,CAACD,IAAI,EAAEF,UAAU,EAAEC,QAAQ,CAAC;IAE9C,IAAI3C,IAAI,GAAG,IAAI;IACf4C,IAAI,CAAClmE,gBAAgB,CAAC,WAAW,EAAE,UAASkG,KAAK,EAAE;MAC/C,IAAIo9D,IAAI,CAACoC,YAAY,KAAK,IAAI,IAAI,OAAOpC,IAAI,CAACoC,YAAY,KAAK,WAAW,EAAE;QACxEpC,IAAI,CAACoC,YAAY,CAAC,WAAW,EAAEx/D,KAAK,EAAEo9D,IAAI,CAACuC,aAAa,CAACzgD,aAAa,CAAClf,KAAK,CAACzH,MAAM,CAAC,CAAC;MACzF;IACJ,CAAC,CAAC;IAEF,OAAOynE,IAAI;EACf,CAAC;EACD;AACF;AACA;EACEZ,aAAa,CAACzoE,SAAS,CAACspE,aAAa,GAAG,SAASA,aAAaA,CAAED,IAAI,EAAEF,UAAU,EAAEC,QAAQ,EAAE;IACxFC,IAAI,CAAC1lD,QAAQ,CAAC3N,KAAK,CAAC,CAAC;IACrBqzD,IAAI,CAAC1lD,QAAQ,CAACvJ,cAAc,CAAC,IAAI,CAACsuD,QAAQ,CAAC;IAC3CW,IAAI,CAAC1lD,QAAQ,CAAC5I,WAAW,CAAC,IAAI,CAAC4tD,SAAS,CAAC;IACzCU,IAAI,CAAC1lD,QAAQ,CAACnM,MAAM,CAAC2xD,UAAU,CAACtpE,CAAC,EAAEspE,UAAU,CAACr+D,CAAC,CAAC;IAChDu+D,IAAI,CAAC1lD,QAAQ,CAACjM,MAAM,CAAC0xD,QAAQ,CAACvpE,CAAC,EAAEupE,QAAQ,CAACt+D,CAAC,CAAC;EAChD,CAAC;EACD;AACF;AACA;EACE29D,aAAa,CAACzoE,SAAS,CAACupE,gBAAgB,GAAG,SAASA,gBAAgBA,CAAEryC,GAAG,EAAE;IACvE,IAAIzoB,KAAK,GAAG,IAAIkrD,eAAe,CAAC5oC,KAAK,CAAC,CAAC;IACvCtiB,KAAK,CAACkV,QAAQ,CAACxK,SAAS,CAAC,IAAI,CAACyvD,UAAU,CAAC;IACzCn6D,KAAK,CAACkV,QAAQ,CAAC5H,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACM,SAAS,CAAC;IAC/C5N,KAAK,CAAC5O,CAAC,GAAGq3B,GAAG,CAACr3B,CAAC;IACf4O,KAAK,CAAC3D,CAAC,GAAG,CAACosB,GAAG,CAACpsB,CAAC;IAEhB,IAAI27D,IAAI,GAAG,IAAI;IACfh4D,KAAK,CAACtL,gBAAgB,CAAC,WAAW,EAAE,UAASkG,KAAK,EAAE;MAChD,IAAIo9D,IAAI,CAACqC,aAAa,KAAK,IAAI,IAAI,OAAOrC,IAAI,CAACqC,aAAa,KAAK,WAAW,EAAE;QAC1ErC,IAAI,CAACqC,aAAa,CAAC,WAAW,EAAEz/D,KAAK,EAAEo9D,IAAI,CAACsC,cAAc,CAACxgD,aAAa,CAAClf,KAAK,CAACzH,MAAM,CAAC,CAAC;MAC3F;IACJ,CAAC,CAAC;IAEF,OAAO6M,KAAK;EAChB,CAAC;EACD;AACF;AACA;AACA;AACA;EACEg6D,aAAa,CAACzoE,SAAS,CAACwpE,QAAQ,GAAG,SAASA,QAAQA,CAAEtyC,GAAG,EAAE;IACvD,IAAIzoB,KAAK,GAAG,IAAI,CAAC86D,gBAAgB,CAACryC,GAAG,CAAC;IACtC,IAAI,CAAC6xC,cAAc,CAACvhD,QAAQ,CAAC/Y,KAAK,CAAC;IACnC,IAAIg7D,SAAS,GAAG,IAAI,CAACV,cAAc,CAAC3hD,WAAW;;IAE/C;IACA;IACA;IACA;IACA;;IAEA,IAAIqiD,SAAS,GAAG,CAAC,EAAE,CAAC,KACf,IAAIA,SAAS,GAAG,CAAC,EAAE;MACpB;MACA,IAAIJ,IAAI,GAAG,IAAI,CAACH,eAAe,CAAC,IAAI,CAACH,cAAc,CAAC5gD,UAAU,CAACshD,SAAS,GAAC,CAAC,CAAC,EAAEh7D,KAAK,CAAC;MACnF,IAAI,CAACu6D,aAAa,CAACxhD,QAAQ,CAAC6hD,IAAI,CAAC;IACrC;IACA,IAAII,SAAS,GAAG,CAAC,EAAE;MACf;MACA,IAAI,CAACH,aAAa,CAAC,IAAI,CAACN,aAAa,CAAC7gD,UAAU,CAACshD,SAAS,GAAC,CAAC,CAAC,EAAE,IAAI,CAACV,cAAc,CAAC5gD,UAAU,CAACshD,SAAS,GAAC,CAAC,CAAC,EAAEh7D,KAAK,CAAC;IACtH;IACA,IAAIg7D,SAAS,GAAG,CAAC,EAAE;MACf;MACA,IAAIC,OAAO,GAAG,IAAI,CAACR,eAAe,CAACz6D,KAAK,EAAE,IAAI,CAACs6D,cAAc,CAAC5gD,UAAU,CAAC,CAAC,CAAC,CAAC;MAC5E,IAAI,CAAC6gD,aAAa,CAACxhD,QAAQ,CAACkiD,OAAO,CAAC;IACxC;IAEA,IAAI,CAACC,QAAQ,CAAC,CAAC;EACnB,CAAC;EACD;AACF;AACA;AACA;AACA;EACElB,aAAa,CAACzoE,SAAS,CAAC4pE,QAAQ,GAAG,SAASA,QAAQA,CAAEv1D,GAAG,EAAE;IACvD,IAAIuT,KAAK;IACb;IACI,IAAIvT,GAAG,YAAYslD,eAAe,CAAC5oC,KAAK,EAAE;MACtCnJ,KAAK,GAAG,IAAI,CAACmhD,cAAc,CAACxgD,aAAa,CAAClU,GAAG,CAAC;MACtD;IACI,CAAC,MACI;MACDuT,KAAK,GAAGvT,GAAG;MACnB;IACI;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAIo1D,SAAS,GAAG,IAAI,CAACV,cAAc,CAAC3hD,WAAW;IAE/C,IAAIqiD,SAAS,GAAG,CAAC,EAAE,CAAC,KACf,IAAIA,SAAS,GAAG,CAAC,EAAE;MACpB;MACA,IAAI,CAACT,aAAa,CAAC/gD,iBAAiB,CAAC,CAAC;IAC1C,CAAC,MACI;MACD;MACA,IAAI,CAACqhD,aAAa,CACd,IAAI,CAACN,aAAa,CAAC7gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,GAAC6hD,SAAS,IAAEA,SAAS,CAAC,EAC5D,IAAI,CAACV,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,GAAC6hD,SAAS,IAAEA,SAAS,CAAC,EAC7D,IAAI,CAACV,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,IAAE6hD,SAAS,CACtD,CAAC;MACD,IAAI,CAACT,aAAa,CAACjhD,aAAa,CAACH,KAAK,CAAC;IAC3C;IACA,IAAI,CAACmhD,cAAc,CAAChhD,aAAa,CAACH,KAAK,CAAC;IAC5C;;IAEI,IAAI,CAAC+hD,QAAQ,CAAC,CAAC;EACnB,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;EACElB,aAAa,CAACzoE,SAAS,CAAC6pE,SAAS,GAAG,SAASA,SAASA,CAAEx1D,GAAG,EAAEy1D,MAAM,EAAE;IACjE,IAAIliD,KAAK;IACT,IAAInZ,KAAK;IACT,IAAI4F,GAAG,YAAYslD,eAAe,CAAC5oC,KAAK,EAAE;MACtCnJ,KAAK,GAAG,IAAI,CAACmhD,cAAc,CAACxgD,aAAa,CAAClU,GAAG,CAAC;MAC9C5F,KAAK,GAAG4F,GAAG;IACf,CAAC,MACI;MACDuT,KAAK,GAAGvT,GAAG;MACX5F,KAAK,GAAG,IAAI,CAACs6D,cAAc,CAAC5gD,UAAU,CAACP,KAAK,CAAC;IACjD;IACAnZ,KAAK,CAAC5O,CAAC,GAAGiqE,MAAM,CAACjqE,CAAC;IAClB4O,KAAK,CAAC3D,CAAC,GAAG,CAACg/D,MAAM,CAACh/D,CAAC;IAEnB,IAAI2+D,SAAS,GAAG,IAAI,CAACV,cAAc,CAAC3hD,WAAW;IAC/C,IAAIqiD,SAAS,GAAG,CAAC,EAAE;MACf;MACA,IAAIM,KAAK,GAAG,IAAI,CAACf,aAAa,CAAC7gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,GAAC6hD,SAAS,IAAEA,SAAS,CAAC;MACxE,IAAI,CAACH,aAAa,CAACS,KAAK,EAAE,IAAI,CAAChB,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,GAAC6hD,SAAS,IAAEA,SAAS,CAAC,EAAEh7D,KAAK,CAAC;;MAE/F;MACA,IAAIu7D,KAAK,GAAG,IAAI,CAAChB,aAAa,CAAC7gD,UAAU,CAACP,KAAK,CAAC;MAChD,IAAI,CAAC0hD,aAAa,CAACU,KAAK,EAAEv7D,KAAK,EAAE,IAAI,CAACs6D,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,IAAE6hD,SAAS,CAAC,CAAC;IACzF;IAEA,IAAI,CAACE,QAAQ,CAAC,CAAC;EACnB,CAAC;EACD;AACF;AACA;AACA;AACA;EACElB,aAAa,CAACzoE,SAAS,CAACiqE,SAAS,GAAG,SAASA,SAASA,CAAE51D,GAAG,EAAE;IACzD,IAAIuT,KAAK;IACT,IAAIyhD,IAAI;IACR,IAAIh1D,GAAG,YAAYslD,eAAe,CAAC5oC,KAAK,EAAE;MACtCnJ,KAAK,GAAG,IAAI,CAACohD,aAAa,CAACzgD,aAAa,CAAClU,GAAG,CAAC;MAC7Cg1D,IAAI,GAAGh1D,GAAG;IACd,CAAC,MACI;MACDuT,KAAK,GAAGvT,GAAG;MACXg1D,IAAI,GAAG,IAAI,CAACL,aAAa,CAAC7gD,UAAU,CAACP,KAAK,CAAC;IAC/C;IACA,IAAI6hD,SAAS,GAAG,IAAI,CAACV,cAAc,CAAC3hD,WAAW;IAC/C,IAAI8iD,EAAE,GAAG,IAAI,CAACnB,cAAc,CAAC5gD,UAAU,CAACP,KAAK,CAAC,CAAC/nB,CAAC;IAChD,IAAIsqE,EAAE,GAAG,IAAI,CAACpB,cAAc,CAAC5gD,UAAU,CAACP,KAAK,CAAC,CAAC9c,CAAC;IAChD,IAAIuW,EAAE,GAAG,IAAI,CAAC0nD,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,IAAE6hD,SAAS,CAAC,CAAC5pE,CAAC;IAC9D,IAAIyhB,EAAE,GAAG,IAAI,CAACynD,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,IAAE6hD,SAAS,CAAC,CAAC3+D,CAAC;IAC9D,IAAIs/D,EAAE,GAAG,CAACF,EAAE,GAAC7oD,EAAE,IAAE,GAAG;IACpB,IAAIgpD,EAAE,GAAG,CAACF,EAAE,GAAC7oD,EAAE,IAAE,GAAG;IACpB,IAAI4V,GAAG,GAAG,IAAI53B,MAAM,CAACy6D,OAAO,CAAC;MAAEl6D,CAAC,EAACuqE,EAAE;MAAEt/D,CAAC,EAAC,CAACu/D;IAAG,CAAC,CAAC;;IAE7C;IACA,IAAI57D,KAAK,GAAG,IAAI,CAAC86D,gBAAgB,CAACryC,GAAG,CAAC;IACtC,IAAI,CAAC6xC,cAAc,CAACphD,UAAU,CAAClZ,KAAK,EAAEmZ,KAAK,GAAC,CAAC,CAAC;IAC9C,EAAE6hD,SAAS;;IAEX;IACA,IAAIa,OAAO,GAAG,IAAI,CAACpB,eAAe,CAACz6D,KAAK,EAAE,IAAI,CAACs6D,cAAc,CAAC5gD,UAAU,CAAC,CAACP,KAAK,GAAC,CAAC,IAAE6hD,SAAS,CAAC,CAAC;IAC9F,IAAI,CAACT,aAAa,CAACrhD,UAAU,CAAC2iD,OAAO,EAAE1iD,KAAK,GAAC,CAAC,CAAC;;IAE/C;IACA,IAAI,CAAC0hD,aAAa,CAACD,IAAI,EAAE,IAAI,CAACN,cAAc,CAAC5gD,UAAU,CAACP,KAAK,CAAC,EAAEnZ,KAAK,CAAC;IAEtE,IAAI,CAACk7D,QAAQ,CAAC,CAAC;EACnB,CAAC;EACD;AACF;AACA;EACElB,aAAa,CAACzoE,SAAS,CAAC2pE,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAI;IACpD,IAAIF,SAAS,GAAG,IAAI,CAACV,cAAc,CAAC3hD,WAAW;IAC/C,IAAIqiD,SAAS,GAAG,CAAC,EAAE;MACf,IAAItzD,CAAC,GAAG,IAAI,CAAC8yD,SAAS,CAACtlD,QAAQ;MAC/BxN,CAAC,CAACH,KAAK,CAAC,CAAC;MACTG,CAAC,CAACiE,cAAc,CAAC,CAAC,CAAC;MACnBjE,CAAC,CAAC4E,WAAW,CAAC,CAAC;MACf5E,CAAC,CAACgD,SAAS,CAAC,IAAI,CAACouD,SAAS,CAAC;MAC3BpxD,CAAC,CAACqB,MAAM,CAAC,IAAI,CAACuxD,cAAc,CAAC5gD,UAAU,CAAC,CAAC,CAAC,CAACtoB,CAAC,EAAE,IAAI,CAACkpE,cAAc,CAAC5gD,UAAU,CAAC,CAAC,CAAC,CAACrd,CAAC,CAAC;MAClF,KAAK,IAAIzJ,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACooE,SAAS,EAAE,EAAEpoE,CAAC,EAAE;QAC5B8U,CAAC,CAACuB,MAAM,CAAC,IAAI,CAACqxD,cAAc,CAAC5gD,UAAU,CAAC9mB,CAAC,CAAC,CAACxB,CAAC,EAAE,IAAI,CAACkpE,cAAc,CAAC5gD,UAAU,CAAC9mB,CAAC,CAAC,CAACyJ,CAAC,CAAC;MACtF;MACAqL,CAAC,CAAC8C,SAAS,CAAC,CAAC;MACb9C,CAAC,CAACgE,OAAO,CAAC,CAAC;MACXhE,CAAC,CAACkF,SAAS,CAAC,CAAC;IACjB,CAAC,MACI;MACD,IAAI,CAAC4tD,SAAS,CAACtlD,QAAQ,CAAC3N,KAAK,CAAC,CAAC;IACnC;EACJ,CAAC;EAED,OAAOyyD,aAAa;AACtB,CAAC,CAAC9O,eAAe,CAAC5yC,SAAS,CAAE;;AAE7B;AACA;AACA;AACA;;AAEA,IAAIwjD,UAAU,GAAG,aAAc,UAAU/pE,UAAU,EAAE;EACnD,SAAS+pE,UAAUA,CAAC9P,OAAO,EAAE;IAC7B;IACCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIC,IAAI,GAAGD,OAAO,CAACC,IAAI;IACvB,IAAI,CAAC2M,UAAU,GAAG5M,OAAO,CAAC4M,UAAU,IAAI,CAAC;IACzC,IAAI,CAACC,WAAW,GAAG7M,OAAO,CAAC6M,WAAW,IAAI3N,eAAe,CAACzkD,QAAQ,CAACgB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClF,IAAI,CAACs0D,QAAQ,GAAI/P,OAAO,CAAC+P,QAAQ,IAAI/P,OAAO,CAAC+P,QAAQ,KAAK,CAAC,GAAI/P,OAAO,CAAC+P,QAAQ,GAAG,GAAG;IACrF,IAAI,CAACC,OAAO,GAAGhQ,OAAO,CAACgQ,OAAO,IAAI,IAAI;;IAEtC;IACA,IAAI,CAACA,OAAO,GAAG,IAAI,CAACA,OAAO,GAAC,IAAI,CAACA,OAAO;;IAExC;IACA;IACA,IAAI,CAAClC,KAAK,GAAG,EAAE;;IAEf;IACA,IAAI,CAAC5kD,QAAQ,GAAG,IAAIg2C,eAAe,CAACzkD,QAAQ,CAAC,CAAC;IAC9C,IAAI,CAACyO,QAAQ,CAACvJ,cAAc,CAAC,IAAI,CAACitD,UAAU,CAAC;IAC7C,IAAI,CAAC1jD,QAAQ,CAAC5I,WAAW,CAAC,IAAI,CAACusD,WAAW,CAAC;;IAE3C;IACA,IAAI5M,IAAI,KAAK,IAAI,IAAI,OAAOA,IAAI,KAAK,WAAW,EAAE;MACjD,IAAI,CAAC6N,KAAK,CAACvkE,IAAI,CAAC02D,IAAI,CAAC;IACtB;;IAEA;IACAl6D,UAAU,CAACN,IAAI,CAAC,IAAI,EAAE,IAAI,CAACyjB,QAAQ,CAAC;EACrC;EAEA,IAAKnjB,UAAU,EAAG+pE,UAAU,CAACvpE,SAAS,GAAGR,UAAU;EACnD+pE,UAAU,CAACvqE,SAAS,GAAGD,MAAM,CAAC0uC,MAAM,CAAEjuC,UAAU,IAAIA,UAAU,CAACR,SAAU,CAAC;EAC1EuqE,UAAU,CAACvqE,SAAS,CAACU,WAAW,GAAG6pE,UAAU;EAC7C;AACF;AACA;AACA;AACA;EACEA,UAAU,CAACvqE,SAAS,CAAC0qE,OAAO,GAAG,SAASA,OAAOA,CAAEhQ,IAAI,EAAE;IACtD,IAAIiQ,IAAI,GAAG,IAAI,CAACpC,KAAK,CAAChnE,MAAM,GAAC,CAAC;IAC9B,IAAIopE,IAAI,GAAG,CAAC,EAAE;MACb,IAAI,CAACpC,KAAK,CAACvkE,IAAI,CAAC02D,IAAI,CAAC;MACrB,IAAI,CAAC/2C,QAAQ,CAACnM,MAAM,CAACkjD,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAEiuD,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;IACpF,CAAC,MACI;MACJ,IAAIk+D,KAAK,GAAG,IAAI,CAACrC,KAAK,CAACoC,IAAI,CAAC,CAACj1C,QAAQ,CAAC71B,CAAC;MACvC,IAAIgrE,KAAK,GAAG,IAAI,CAACtC,KAAK,CAACoC,IAAI,CAAC,CAACj1C,QAAQ,CAAC5qB,CAAC;MACvC,IAAIggE,EAAE,GAAIpQ,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG+qE,KAAM;MAClC,IAAIG,EAAE,GAAIrQ,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG+/D,KAAM;MAClC,IAAIC,EAAE,GAACA,EAAE,GAAGC,EAAE,GAACA,EAAE,GAAG,IAAI,CAACN,OAAO,EAAE;QACjC,IAAI,CAAC9mD,QAAQ,CAACjM,MAAM,CAACgjD,IAAI,CAAChlC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAEiuD,IAAI,CAAChlC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;QACnF,IAAI,CAAC67D,KAAK,CAACvkE,IAAI,CAAC02D,IAAI,CAAC;MACtB;IACD;IACA,IAAI,IAAI,CAAC8P,QAAQ,GAAG,CAAC,IAAI,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACjC,KAAK,CAAChnE,MAAM,EAAE;MAC3D,IAAI,CAACypE,QAAQ,CAAC,CAAC;IAChB;EACD,CAAC;EACD;AACF;AACA;EACET,UAAU,CAACvqE,SAAS,CAACgrE,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAI;IACpD,IAAI,IAAI,CAACzC,KAAK,CAAChnE,MAAM,GAAG,CAAC,EAAE;MAC1B,IAAI,CAACgnE,KAAK,CAAC0C,KAAK,CAAC,CAAC;MAClB;MACA,IAAI,CAACtnD,QAAQ,CAAC3N,KAAK,CAAC,CAAC;MACrB,IAAI,CAAC2N,QAAQ,CAACvJ,cAAc,CAAC,IAAI,CAACitD,UAAU,CAAC;MAC7C,IAAI,CAAC1jD,QAAQ,CAAC5I,WAAW,CAAC,IAAI,CAACusD,WAAW,CAAC;MAC3C,IAAI,CAAC3jD,QAAQ,CAACjM,MAAM,CAAC,IAAI,CAAC6wD,KAAK,CAAC,CAAC,CAAC,CAAC7yC,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE,IAAI,CAAC87D,KAAK,CAAC,CAAC,CAAC,CAAC7yC,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MACrG,KAAK,IAAIrL,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,IAAI,CAACknE,KAAK,CAAChnE,MAAM,EAAE,EAAEF,CAAC,EAAE;QACvC,IAAI,CAACsiB,QAAQ,CAACjM,MAAM,CAAC,IAAI,CAAC6wD,KAAK,CAAClnE,CAAC,CAAC,CAACq0B,QAAQ,CAAC71B,CAAC,GAAG,IAAI,CAAC4M,MAAM,EAAE,IAAI,CAAC87D,KAAK,CAAClnE,CAAC,CAAC,CAACq0B,QAAQ,CAAC5qB,CAAC,GAAG,CAAC,IAAI,CAAC4B,MAAM,CAAC;MACtG;IACD;EACD,CAAC;EAED,OAAO69D,UAAU;AACnB,CAAC,CAAC5Q,eAAe,CAAC5oC,KAAK,CAAE;;AAEzB;AACA;AACA;AACA;;AAEA,IAAIm6C,OAAO,GAAG,SAASA,OAAOA,CAACzQ,OAAO,EAAE;EACrCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAI,CAACmL,UAAU,GAAGnL,OAAO,CAACmL,UAAU;;EAEpC;EACA,IAAI,IAAI,CAACA,UAAU,YAAYjM,eAAe,CAAC9vC,KAAK,EAAE;IACrD,IAAI,CAACvG,KAAK,GAAG,IAAI,CAACsiD,UAAU;EAC7B,CAAC,MACI;IACJ,IAAI,CAACtiD,KAAK,GAAG,IAAI,CAACsiD,UAAU,CAACxiD,QAAQ,CAAC,CAAC;EACxC;EAEA,IAAI,CAACowC,QAAQ,GAAG,IAAIl0D,MAAM,CAACy6D,OAAO,CAAC,CAAC;AACvC,CAAC;AAEDmR,OAAO,CAAClrE,SAAS,CAACmrE,QAAQ,GAAG,SAASA,QAAQA,CAAEC,MAAM,EAAEC,MAAM,EAAE;EAC7D,IAAI,CAAC7X,QAAQ,CAAC3zD,CAAC,GAAGurE,MAAM;EACxB,IAAI,CAAC5X,QAAQ,CAAC1oD,CAAC,GAAGugE,MAAM;AAC3B,CAAC;AACDH,OAAO,CAAClrE,SAAS,CAACsiD,GAAG,GAAG,SAASA,GAAGA,CAAEgpB,IAAI,EAAEC,IAAI,EAAE;EAC/C,IAAI,CAACjoD,KAAK,CAACzjB,CAAC,IAAIyrE,IAAI,GAAG,IAAI,CAAC9X,QAAQ,CAAC3zD,CAAC;EACtC,IAAI,CAAC2zD,QAAQ,CAAC3zD,CAAC,GAAGyrE,IAAI;EACtB,IAAI,CAAChoD,KAAK,CAACxY,CAAC,IAAIygE,IAAI,GAAG,IAAI,CAAC/X,QAAQ,CAAC1oD,CAAC;EACtC,IAAI,CAAC0oD,QAAQ,CAAC1oD,CAAC,GAAGygE,IAAI;AACzB,CAAC;;AAED;AACA;AACA;AACA;;AAEA,IAAIC,MAAM,GAAG,SAASA,MAAMA,CAAC/Q,OAAO,EAAE;EACpCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAIgR,KAAK,GAAGhR,OAAO,CAACgR,KAAK;EACzB,IAAI,CAAC98D,KAAK,GAAG8rD,OAAO,CAAC9rD,KAAK;EAC1B,IAAI,CAACC,MAAM,GAAG6rD,OAAO,CAAC7rD,MAAM;EAC5B,IAAI88D,UAAU,GAAGjR,OAAO,CAACiR,UAAU,IAAI,SAAS;;EAEhD;EACA,IAAI/0D,MAAM,GAAGtD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC7CqD,MAAM,CAAChI,KAAK,GAAG,IAAI,CAACA,KAAK;EACzBgI,MAAM,CAAC/H,MAAM,GAAG,IAAI,CAACA,MAAM;EAC3B+H,MAAM,CAAC0I,KAAK,CAACqsD,UAAU,GAAGA,UAAU;EACpCr4D,QAAQ,CAAC2W,cAAc,CAACyhD,KAAK,CAAC,CAACx+B,WAAW,CAACt2B,MAAM,CAAC;EAClD;EACA,IAAI,CAACg1D,KAAK,GAAG,IAAIhS,eAAe,CAAC9vC,KAAK,CAAClT,MAAM,CAAC;;EAE9C;EACA,IAAI,CAACg1D,KAAK,CAAC7gE,CAAC,GAAG,IAAI,CAAC8D,MAAM;;EAE1B;EACAyE,QAAQ,CAAC2W,cAAc,CAACyhD,KAAK,CAAC,CAACx+B,WAAW,CAACt2B,MAAM,CAAC;;EAElD;EACAgjD,eAAe,CAAC50D,MAAM,CAACgC,SAAS,GAAG,EAAE;EACrC4yD,eAAe,CAAC50D,MAAM,CAAC5B,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACwoE,KAAK,CAAC;AAC7D,CAAC;AACD;AACA;AACA;AACA;AACA;AACAH,MAAM,CAACxrE,SAAS,CAAC4rE,SAAS,GAAG,SAASA,SAASA,CAAE5hC,MAAM,EAAE;EACvD,IAAI,CAAC2hC,KAAK,CAACnkD,QAAQ,CAACwiB,MAAM,CAAC;AAC7B,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACAwhC,MAAM,CAACxrE,SAAS,CAAC6rE,iBAAiB,GAAG,SAASA,iBAAiBA,CAAEl9D,KAAK,EAAEC,MAAM,EAAE;EAC9E;EACA,IAAI,CAAC+8D,KAAK,CAAC9rE,CAAC,GAAG,OAAO,IAAI,CAAC8rE,KAAK,CAACG,YAAY,KAAK,WAAW,GAAG,IAAI,CAACH,KAAK,CAACG,YAAY,GAAG,IAAI,CAACH,KAAK,CAAC9rE,CAAC;EACtG,IAAI,CAAC8rE,KAAK,CAAC7gE,CAAC,GAAG,OAAO,IAAI,CAAC6gE,KAAK,CAACI,YAAY,KAAK,WAAW,GAAG,IAAI,CAACJ,KAAK,CAACI,YAAY,GAAG,IAAI,CAACJ,KAAK,CAAC7gE,CAAC;;EAEtG;EACA,IAAI,CAAC6gE,KAAK,CAACl/D,MAAM,GAAG,IAAI,CAACkC,KAAK,GAAGA,KAAK;EACtC,IAAI,CAACg9D,KAAK,CAACj/D,MAAM,GAAG,IAAI,CAACkC,MAAM,GAAGA,MAAM;AAC1C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA48D,MAAM,CAACxrE,SAAS,CAACirE,KAAK,GAAG,SAASA,KAAKA,CAAEprE,CAAC,EAAEiL,CAAC,EAAE;EAC7C;EACA,IAAI,CAAC6gE,KAAK,CAACG,YAAY,GAAG,IAAI,CAACH,KAAK,CAAC9rE,CAAC;EACtC,IAAI,CAAC8rE,KAAK,CAACI,YAAY,GAAG,IAAI,CAACJ,KAAK,CAAC7gE,CAAC;;EAEtC;EACA,IAAI,CAAC6gE,KAAK,CAAC9rE,CAAC,IAAKA,CAAC,GAAG,IAAI,CAAC8rE,KAAK,CAACl/D,MAAO;EACvC,IAAI,CAACk/D,KAAK,CAAC7gE,CAAC,IAAKA,CAAC,GAAG,IAAI,CAAC6gE,KAAK,CAACj/D,MAAO;AACzC,CAAC;;AAED;AACA;AACA;AACA;;AAEA,IAAIs/D,QAAQ,GAAG,SAASA,QAAQA,CAACvR,OAAO,EAAE;EACvCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAI,CAACmL,UAAU,GAAGnL,OAAO,CAACmL,UAAU;EACpC,IAAI,CAACqG,QAAQ,GAAGxR,OAAO,CAACwR,QAAQ,IAAI,KAAK;;EAEzC;EACA,IAAI,IAAI,CAACrG,UAAU,YAAYjM,eAAe,CAAC9vC,KAAK,EAAE;IACrD,IAAI,CAACvG,KAAK,GAAG,IAAI,CAACsiD,UAAU;EAC7B,CAAC,MACI;IACJ,IAAI,CAACtiD,KAAK,GAAG,IAAI,CAACsiD,UAAU,CAACxiD,QAAQ,CAAC,CAAC;EACxC;EAEA,IAAI,CAACuO,MAAM,GAAG,IAAIryB,MAAM,CAACy6D,OAAO,CAAC,CAAC;EAClC,IAAI,CAACmS,UAAU,GAAG,IAAI5sE,MAAM,CAACy6D,OAAO,CAAC,CAAC;EACtC,IAAI,CAACoS,UAAU,GAAG,IAAI7sE,MAAM,CAACy6D,OAAO,CAAC,CAAC;AACzC,CAAC;AAEDiS,QAAQ,CAAChsE,SAAS,CAACosE,SAAS,GAAG,SAASA,SAASA,CAAEC,OAAO,EAAEC,OAAO,EAAE;EAClE,IAAI,CAAC36C,MAAM,CAAC9xB,CAAC,GAAGwsE,OAAO;EACvB,IAAI,CAAC16C,MAAM,CAAC7mB,CAAC,GAAGwhE,OAAO;EACvB,IAAI,CAACJ,UAAU,CAACrsE,CAAC,GAAG,IAAI,CAACyjB,KAAK,CAACzjB,CAAC;EAChC,IAAI,CAACqsE,UAAU,CAACphE,CAAC,GAAG,IAAI,CAACwY,KAAK,CAACxY,CAAC;EAChC,IAAI,CAACqhE,UAAU,CAACtsE,CAAC,GAAG,IAAI,CAACyjB,KAAK,CAAC7W,MAAM;EACrC,IAAI,CAAC0/D,UAAU,CAACrhE,CAAC,GAAG,IAAI,CAACwY,KAAK,CAAC5W,MAAM;AACxC,CAAC;AACDs/D,QAAQ,CAAChsE,SAAS,CAACusE,IAAI,GAAG,SAASA,IAAIA,CAAEC,MAAM,EAAE;EAC9C;EACA,IAAI,IAAI,CAACL,UAAU,CAACtsE,CAAC,GAAC2sE,MAAM,GAAG,IAAI,CAACP,QAAQ,EAAE;IAC7CO,MAAM,GAAG,IAAI,CAACP,QAAQ,GAAC,IAAI,CAACE,UAAU,CAACtsE,CAAC;EACzC;EACA,IAAI,IAAI,CAACssE,UAAU,CAACrhE,CAAC,GAAC0hE,MAAM,GAAG,IAAI,CAACP,QAAQ,EAAE;IAC7CO,MAAM,GAAG,IAAI,CAACP,QAAQ,GAAC,IAAI,CAACE,UAAU,CAACrhE,CAAC;EACzC;EAEA,IAAI,CAACwY,KAAK,CAAC7W,MAAM,GAAG,IAAI,CAAC0/D,UAAU,CAACtsE,CAAC,GAAC2sE,MAAM;EAC5C,IAAI,CAAClpD,KAAK,CAAC5W,MAAM,GAAG,IAAI,CAACy/D,UAAU,CAACrhE,CAAC,GAAC0hE,MAAM;EAE5C,IAAI,CAAClpD,KAAK,CAACzjB,CAAC,GAAG,IAAI,CAACqsE,UAAU,CAACrsE,CAAC,GAAG,CAAC,IAAI,CAAC8xB,MAAM,CAAC9xB,CAAC,GAAC,IAAI,CAACqsE,UAAU,CAACrsE,CAAC,KAAK,IAAI,CAACyjB,KAAK,CAAC7W,MAAM,GAAC,IAAI,CAAC0/D,UAAU,CAACtsE,CAAC,GAAG,CAAC,CAAC;EAChH,IAAI,CAACyjB,KAAK,CAACxY,CAAC,GAAG,IAAI,CAACohE,UAAU,CAACphE,CAAC,GAAG,CAAC,IAAI,CAAC6mB,MAAM,CAAC7mB,CAAC,GAAC,IAAI,CAACohE,UAAU,CAACphE,CAAC,KAAK,IAAI,CAACwY,KAAK,CAAC5W,MAAM,GAAC,IAAI,CAACy/D,UAAU,CAACrhE,CAAC,GAAG,CAAC,CAAC;AACnH,CAAC;AAED,SAASs8D,UAAU,EAAEd,IAAI,EAAE9L,QAAQ,EAAEiL,cAAc,EAAEoC,eAAe,EAAEC,eAAe,EAAE5B,aAAa,EAAEM,mBAAmB,EAAEI,sBAAsB,EAAEsE,OAAO,EAAE5C,SAAS,EAAEG,aAAa,EAAE8B,UAAU,EAAEiB,MAAM,EAAEQ,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}